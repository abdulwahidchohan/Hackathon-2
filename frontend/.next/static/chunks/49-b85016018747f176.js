"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{2296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{DecodeError:function(){return h},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return b},NormalizeError:function(){return y},PageNotFoundError:function(){return g},SP:function(){return d},ST:function(){return p},WEB_VITALS:function(){return n},execOnce:function(){return r},getDisplayName:function(){return u},getLocationOrigin:function(){return s},getURL:function(){return l},isAbsoluteUrl:function(){return i},isResSent:function(){return a},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return m}});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function r(e){let t,n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n||(n=!0,t=e(...o)),t}}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function s(){let{protocol:e,hostname:t,port:n}=window.location;return e+"//"+t+(n?":"+n:"")}function l(){let{href:e}=window.location,t=s();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function a(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function f(e,t){let n=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(n&&a(n))return r;if(!r)throw Object.defineProperty(Error('"'+u(e)+'.getInitialProps()" should resolve to an object. But found "'+r+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let d="undefined"!=typeof performance,p=d&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class h extends Error{}class y extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class b extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function m(e){return JSON.stringify({message:e.message,stack:e.stack})}},2619:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return g},useLinkStatus:function(){return v}});let r=n(9417),o=n(5155),i=r._(n(2115)),s=n(7670),l=n(6752),u=n(3011),a=n(2296),c=n(6058);n(4781);let f=n(3499),d=n(8607),p=n(1807);n(7045);let h=n(6048);function y(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}function g(e){var t;let n,r,s,[g,v]=(0,i.useOptimistic)(f.IDLE_LINK_STATUS),m=(0,i.useRef)(null),{href:w,as:E,children:T,prefetch:R=null,passHref:O,replace:S,shallow:_,scroll:P,onClick:A,onMouseEnter:L,onTouchStart:j,legacyBehavior:x=!1,onNavigate:U,ref:I,unstable_dynamicOnHover:C,...N}=e;n=T,x&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let M=i.default.useContext(l.AppRouterContext),k=!1!==R,$=!1!==R?null===(t=R)||"auto"===t?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:B,as:D}=i.default.useMemo(()=>{let e=y(w);return{href:e,as:E?y(E):e}},[w,E]);x&&(r=i.default.Children.only(n));let q=x?r&&"object"==typeof r&&r.ref:I,F=i.default.useCallback(e=>(null!==M&&(m.current=(0,f.mountLinkInstance)(e,B,M,$,k,v)),()=>{m.current&&((0,f.unmountLinkForCurrentNavigation)(m.current),m.current=null),(0,f.unmountPrefetchableInstance)(e)}),[k,B,M,$,v]),H={ref:(0,u.useMergedRef)(F,q),onClick(e){x||"function"!=typeof A||A(e),x&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),M&&(e.defaultPrevented||function(e,t,n,r,o,s,l){let{nodeName:u}=e.currentTarget;if(!("A"===u.toUpperCase()&&function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||e.currentTarget.hasAttribute("download"))){if(!(0,d.isLocalURL)(t)){o&&(e.preventDefault(),location.replace(t));return}if(e.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}i.default.startTransition(()=>{(0,p.dispatchNavigateAction)(n||t,o?"replace":"push",null==s||s,r.current)})}}(e,B,D,m,S,P,U))},onMouseEnter(e){x||"function"!=typeof L||L(e),x&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),M&&k&&(0,f.onNavigationIntent)(e.currentTarget,!0===C)},onTouchStart:function(e){x||"function"!=typeof j||j(e),x&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),M&&k&&(0,f.onNavigationIntent)(e.currentTarget,!0===C)}};return(0,a.isAbsoluteUrl)(D)?H.href=D:x&&!O&&("a"!==r.type||"href"in r.props)||(H.href=(0,c.addBasePath)(D)),s=x?i.default.cloneElement(r,H):(0,o.jsx)("a",{...N,...H,children:n}),(0,o.jsx)(b.Provider,{value:g,children:s})}let b=(0,i.createContext)(f.IDLE_LINK_STATUS),v=()=>(0,i.useContext)(b);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3011:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return o}});let r=n(2115);function o(e,t){let n=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=n.current;e&&(n.current=null,e());let t=o.current;t&&(o.current=null,t())}else e&&(n.current=i(e,r)),t&&(o.current=i(t,r))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3078:(e,t)=>{function n(e){let t={};for(let[n,r]of e.entries()){let e=t[n];void 0===e?t[n]=r:Array.isArray(e)?e.push(r):t[n]=[e,r]}return t}function r(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[n,o]of Object.entries(e))if(Array.isArray(o))for(let e of o)t.append(n,r(e));else t.set(n,r(o));return t}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let t of n){for(let n of t.keys())e.delete(n);for(let[n,r]of t.entries())e.append(n,r)}return e}Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}})},7027:(e,t,n)=>{n.d(t,{M:()=>ec});var r=n(5704);let o=Object.create(null),i=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?o:globalThis),s=new Proxy(o,{get:(e,t)=>i()[t]??o[t],has:(e,t)=>t in i()||t in o,set:(e,t,n)=>(i(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;let n=i(!0);return delete n[t],!0},ownKeys:()=>Object.keys(i(!0))});function l(e,t){return void 0!==r&&r.env?r.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}void 0!==r&&r.env,Object.freeze({get BETTER_AUTH_SECRET(){return l("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return l("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return l("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return l("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return l("NODE_ENV","development")},get PACKAGE_VERSION(){return l("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return l("BETTER_AUTH_TELEMETRY_ENDPOINT","")}});let u={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},a=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),c=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],f={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"}},d=["debug","info","success","warn","error"],p={info:f.fg.blue,success:f.fg.green,warn:f.fg.yellow,error:f.fg.red,debug:f.fg.magenta};(e=>{let t=e?.disabled!==!0,n=e?.level??"warn",r=e?.disableColors!==void 0?!e.disableColors:1!==function(){if(void 0!==l("FORCE_COLOR"))switch(l("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==l("NODE_DISABLE_COLORS")&&""!==l("NODE_DISABLE_COLORS")||void 0!==l("NO_COLOR")&&""!==l("NO_COLOR")||"dumb"===l("TERM"))return 1;if(l("TMUX"))return 24;if("TF_BUILD"in s&&"AGENT_NAME"in s)return 4;if("CI"in s){for(let{0:e,1:t}of a)if(e in s)return t;return"codeship"===l("CI_NAME")?8:1}if("TEAMCITY_VERSION"in s)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(l("TEAMCITY_VERSION"))?4:1;switch(l("TERM_PROGRAM")){case"iTerm.app":if(!l("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(l("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===l("COLORTERM")||"24bit"===l("COLORTERM"))return 24;if(l("TERM")){if(null!==/truecolor/.exec(l("TERM")))return 24;if(null!==/^xterm-256/.exec(l("TERM")))return 8;let e=l("TERM").toLowerCase();if(u[e])return u[e];if(c.some(t=>null!==t.exec(e)))return 4}return l("COLORTERM")?4:1}();return{...Object.fromEntries(d.map(o=>[o,(...[i,...s])=>((o,i,s=[])=>{if(!t||!(d.indexOf(o)>=d.indexOf(n)))return;let l=((e,t,n)=>{let r=new Date().toISOString();return n?`${f.dim}${r}${f.reset} ${p[e]}${e.toUpperCase()}${f.reset} ${f.bright}[Better Auth]:${f.reset} ${t}`:`${r} ${e.toUpperCase()} [Better Auth]: ${t}`})(o,i,r);if(!e||"function"!=typeof e.log)return void("error"===o?console.error(l,...s):"warn"===o?console.warn(l,...s):console.log(l,...s));e.log("success"===o?"info":o,i,...s)})(o,i,s)])),get level(){return n}}})();var h=class extends Error{constructor(e,t){super(e,t),this.name="BetterAuthError",this.message=e,this.stack=""}};function y(e,t="/api/auth"){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new h(`Invalid base URL: ${e}. URL must include 'http://' or 'https://'`)}catch(t){if(t instanceof h)throw t;throw new h(`Invalid base URL: ${e}. Please provide a valid base URL.`,{cause:t})}if(function(e){try{return"/"!==(new URL(e).pathname.replace(/\/+$/,"")||"/")}catch{throw new h(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let n=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${n}${t}`):n}let g={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}},b={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},v=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,m={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},w=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,E=[],T=0,R=0,O=e=>{let t=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:e=>(n.lc=t.push(e),()=>{for(let t=T+4;t<E.length;)E[t]===e?E.splice(t,4):t+=4;let r=t.indexOf(e);~r&&(t.splice(r,1),--n.lc||n.off())}),notify(e,r){R++;let o=!E.length;for(let o of t)E.push(o,n.value,e,r);if(o){for(T=0;T<E.length;T+=4)E[T](E[T+1],E[T+2],E[T+3]);E.length=0}},off(){},set(e){let t=n.value;t!==e&&(n.value=e,n.notify(t))},subscribe(e){let t=n.listen(e);return e(n.value),t},value:e};return n},S=(e,t)=>((e,t,n,r)=>(e.events=e.events||{},e.events[n+10]||(e.events[n+10]=r(t=>{e.events[n].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[n]=e.events[n]||[],e.events[n].push(t),()=>{let r=e.events[n],o=r.indexOf(t);r.splice(o,1),r.length||(delete e.events[n],e.events[n+10](),delete e.events[n+10])}))(e,n=>{let r=t(n);r&&e.events[6].push(r)},5,t=>{let n=e.listen;e.listen=(...r)=>(e.lc||e.active||(e.active=!0,t()),n(...r));let r=e.off;return e.events[6]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=n,e.off=r}}),_=()=>"undefined"==typeof window,P=Symbol.for("better-auth:broadcast-channel");var A=class{listeners=new Set;name;constructor(e="better-auth.message"){this.name=e}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}post(e){if("undefined"!=typeof window)try{localStorage.setItem(this.name,JSON.stringify({...e,timestamp:Math.floor(Date.now()/1e3)}))}catch{}}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=e=>{if(e.key!==this.name)return;let t=JSON.parse(e.newValue??"{}");t?.event==="session"&&t?.data&&this.listeners.forEach(e=>e(t))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}};function L(e="better-auth.message"){return globalThis[P]||(globalThis[P]=new A(e)),globalThis[P]}let j=Symbol.for("better-auth:focus-manager");var x=class{listeners=new Set;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setFocused(e){this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||"undefined"==typeof document||void 0===window.addEventListener)return()=>{};let e=()=>{"visible"===document.visibilityState&&this.setFocused(!0)};return document.addEventListener("visibilitychange",e,!1),()=>{document.removeEventListener("visibilitychange",e,!1)}}};function U(){return globalThis[j]||(globalThis[j]=new x),globalThis[j]}let I=Symbol.for("better-auth:online-manager");var C=class{listeners=new Set;isOnline="undefined"==typeof navigator||navigator.onLine;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setOnline(e){this.isOnline=e,this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=()=>this.setOnline(!0),t=()=>this.setOnline(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e,!1),window.removeEventListener("offline",t,!1)}}};function N(){return globalThis[I]||(globalThis[I]=new C),globalThis[I]}let M=()=>Math.floor(Date.now()/1e3);function k(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function $(e){return(...t)=>t.reduce((t,n)=>(function e(t,n,r=".",o){if(!k(n))return e(t,{},r,o);let i=Object.assign({},n);for(let n in t){if("__proto__"===n||"constructor"===n)continue;let s=t[n];null!=s&&(o&&o(i,n,s,r)||(Array.isArray(s)&&Array.isArray(i[n])?i[n]=[...s,...i[n]]:k(s)&&k(i[n])?i[n]=e(s,i[n],(r?`${r}.`:"")+n.toString(),o):i[n]=s))}return i})(t,n,"",e),{})}let B=$();$((e,t,n)=>{if(void 0!==e[t]&&"function"==typeof n)return e[t]=n(e[t]),!0}),$((e,t,n)=>{if(Array.isArray(e[t])&&"function"==typeof n)return e[t]=n(e[t]),!0});var D=Object.defineProperty,q=Object.defineProperties,F=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,V=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&V(e,n,t[n]);if(H)for(var n of H(t))G.call(t,n)&&V(e,n,t[n]);return e},K=(e,t)=>q(e,F(t)),Y=class extends Error{constructor(e,t,n){super(t||e.toString(),{cause:n}),this.status=e,this.statusText=t,this.error=n,Error.captureStackTrace(this,this.constructor)}},z=async(e,t)=>{var n,r,o,i,s,l;let u=t||{},a={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:u,hooks:a};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let r=await (null==(n=c.init)?void 0:n.call(c,e.toString(),t));u=r.options||u,e=r.url}a.onRequest.push(null==(r=c.hooks)?void 0:r.onRequest),a.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),a.onSuccess.push(null==(i=c.hooks)?void 0:i.onSuccess),a.onError.push(null==(s=c.hooks)?void 0:s.onError),a.onRetry.push(null==(l=c.hooks)?void 0:l.onRetry)}return{url:e,options:u,hooks:a}},X=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},Z=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},Q=async e=>{let t={},n=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let r=await n(e.auth.token);if(!r)return t;t.authorization=`Bearer ${r}`}else if("Basic"===e.auth.type){let[r,o]=await Promise.all([n(e.auth.username),n(e.auth.password)]);if(!r||!o)return t;t.authorization=`Basic ${btoa(`${r}:${o}`)}`}else if("Custom"===e.auth.type){let[r,o]=await Promise.all([n(e.auth.prefix),n(e.auth.value)]);if(!o)return t;t.authorization=`${null!=r?r:""} ${o}`}}return t},ee=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function et(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function en(e){try{return JSON.parse(e)}catch(t){return e}}function er(e){return"function"==typeof e}async function eo(e){let t=new Headers(null==e?void 0:e.headers);for(let[n,r]of Object.entries(await Q(e)||{}))t.set(n,r);if(!t.has("content-type")){let n=et(null==e?void 0:e.body)?"application/json":null;n&&t.set("content-type",n)}return t}var ei=class e extends Error{constructor(t,n){super(n||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function es(e,t){let n=await e["~standard"].validate(t);if(n.issues)throw new ei(n.issues);return n.value}var el=["get","post","put","patch","delete"],eu=async(e,t)=>{var n,r,o,i,s,l,u,a;let{hooks:c,url:f,options:d}=await z(e,t),p=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&er(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&er(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(d),h=new AbortController,y=null!=(n=d.signal)?n:h.signal,g=function(e,t){let{baseURL:n,params:r,query:o}=t||{query:{},params:{},baseURL:""},i=e.startsWith("http")?e.split("/").slice(0,3).join("/"):n||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];el.includes(t)&&(e=e.replace(`@${t}/`,"/"))}i.endsWith("/")||(i+="/");let[s,l]=e.replace(i,"").split("?"),u=new URLSearchParams(l);for(let[e,t]of Object.entries(o||{})){let n;if(null!=t){if("string"==typeof t)n=t;else if(Array.isArray(t)){for(let n of t)u.append(e,n);continue}else n=JSON.stringify(t);u.set(e,n)}}if(r)if(Array.isArray(r))for(let[e,t]of s.split("/").filter(e=>e.startsWith(":")).entries()){let n=r[e];s=s.replace(t,n)}else for(let[e,t]of Object.entries(r))s=s.replace(`:${e}`,String(t));(s=s.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(s=s.slice(1));let a=u.toString();return(a=a.length>0?`?${a}`.replace(/\+/g,"%20"):"",i.startsWith("http"))?new URL(`${s}${a}`,i):`${i}${s}${a}`}(f,d),b=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(et(e.body)&&!t.has("content-type")){for(let[t,n]of Object.entries(null==e?void 0:e.body))n instanceof Date&&(e.body[t]=n.toISOString());return JSON.stringify(e.body)}return t.has("content-type")&&"application/x-www-form-urlencoded"===t.get("content-type")&&et(e.body)?new URLSearchParams(e.body).toString():e.body}(d),v=await eo(d),m=function(e,t){var n;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let r=null==(n=e.split("@")[1])?void 0:n.split("/")[0];return el.includes(r)?r.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(f,d),w=K(J({},d),{url:g,headers:v,body:b,method:m,signal:y});for(let e of c.onRequest)if(e){let t=await e(w);"object"==typeof t&&null!==t&&(w=t)}("pipeTo"in w&&"function"==typeof w.pipeTo||"function"==typeof(null==(r=null==t?void 0:t.body)?void 0:r.pipe))&&!("duplex"in w)&&(w.duplex="half");let{clearTimeout:E}=function(e,t){let n;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(n=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}(d,h),T=await p(w.url,w);E();let R={response:T,request:w};for(let e of c.onResponse)if(e){let n=await e(K(J({},R),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?T.clone():T}));n instanceof Response?T=n:"object"==typeof n&&null!==n&&(T=n.response)}if(T.ok){if("HEAD"===w.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let r=t.split(";").shift()||"";return ee.test(r)?"json":n.has(r)||r.startsWith("text/")?"text":"blob"}(T),n={data:null,response:T,request:w};if("json"===e||"text"===e){let e=await T.text(),t=null!=(i=w.jsonParser)?i:en;n.data=await t(e)}else n.data=await T[e]();for(let e of((null==w?void 0:w.output)&&w.output&&!w.disableValidation&&(n.data=await es(w.output,n.data)),c.onSuccess))e&&await e(K(J({},n),{response:(null==(s=null==t?void 0:t.hookOptions)?void 0:s.cloneResponse)?T.clone():T}));return(null==t?void 0:t.throw)?n.data:{data:n.data,error:null}}let O=null!=(l=null==t?void 0:t.jsonParser)?l:en,S=await T.text(),_=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(S),P=_?await O(S):null,A={response:T,responseText:S,request:w,error:K(J({},P),{status:T.status,statusText:T.statusText})};for(let e of c.onError)e&&await e(K(J({},A),{response:(null==(u=null==t?void 0:t.hookOptions)?void 0:u.cloneResponse)?T.clone():T}));if(null==t?void 0:t.retry){let n=function(e){if("number"==typeof e)return new X({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new X(e);case"exponential":return new Z(e);default:throw Error("Invalid retry strategy")}}(t.retry),r=null!=(a=t.retryAttempt)?a:0;if(await n.shouldAttemptRetry(r,T)){for(let e of c.onRetry)e&&await e(R);let o=n.getDelay(r);return await new Promise(e=>setTimeout(e,o)),await eu(e,K(J({},t),{retryAttempt:r+1}))}}if(null==t?void 0:t.throw)throw new Y(T.status,T.statusText,_?P:S);return{data:null,error:K(J({},P),{status:T.status,statusText:T.statusText})}},ea=n(2115);function ec(e){var t;let{pluginPathMethods:n,pluginsActions:r,pluginsAtoms:o,$fetch:i,$store:l,atomListeners:u}=((e,t)=>{let n,r="credentials"in Request.prototype,o=function(e,t,n,r,o){if(e)return y(e,t);if(!1!==r){let e=s.BETTER_AUTH_URL||s.NEXT_PUBLIC_BETTER_AUTH_URL||s.PUBLIC_BETTER_AUTH_URL||s.NUXT_PUBLIC_BETTER_AUTH_URL||s.NUXT_PUBLIC_AUTH_URL||("/"!==s.BASE_URL?s.BASE_URL:void 0);if(e)return y(e,t)}n?.headers.get("x-forwarded-host"),n?.headers.get("x-forwarded-proto");if(n){let e=function(e){try{let t=new URL(e);return"null"===t.origin?null:t.origin}catch{return null}}(n.url);if(!e)throw new h("Could not get origin from request. Please provide a valid base URL.");return y(e,t)}if("undefined"!=typeof window&&window.location)return y(window.location.origin,t)}(e?.baseURL,e?.basePath,void 0,t)??"/api/auth",i=e?.plugins?.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e)||[],l={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:u,onError:a,onRequest:c,onResponse:f,...d}=e?.fetchOptions||{},p=(n={baseURL:o,...r?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?function(e,t={strict:!0}){return function(e,t={}){let{strict:n=!1,warnings:r=!1,reviver:o,parseDates:i=!0}=t;if("string"!=typeof e)return e;let s=e.trim();if(s.length>0&&'"'===s[0]&&s.endsWith('"')&&!s.slice(1,-1).includes('"'))return s.slice(1,-1);let l=s.toLowerCase();if(l.length<=9&&l in m)return m[l];if(!v.test(s)){if(n)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(b).some(([e,t])=>{let n=t.test(s);return n&&r&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${e} pattern`),n})&&n)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(s,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){r&&console.warn(`[better-json] Dropping "${e}" key to prevent prototype pollution`);return}if(i&&"string"==typeof t){let e=function(e){let t=w.exec(e);if(!t)return null;let[,n,r,o,i,s,l,u,a,c,f]=t,d=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(o,10),parseInt(i,10),parseInt(s,10),parseInt(l,10),u?parseInt(u.padEnd(3,"0"),10):0));if(a){let e=(60*parseInt(c,10)+parseInt(f,10))*("+"===a?-1:1);d.setUTCMinutes(d.getUTCMinutes()+e)}return d instanceof Date&&!isNaN(d.getTime())?d:null}(t);if(e)return e}return o?o(e,t):t})}catch(t){if(n)throw t;return e}}(e,t)}(e,{strict:!1}):null,customFetchImpl:fetch,...d,plugins:[l,...d.plugins||[],...e?.disableDefaultFetchPlugins?[]:[g],...i]},async function(e,t){let r,o=K(J(J({},n),t),{plugins:[...(null==n?void 0:n.plugins)||[],(r=n||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var n,o,i,s;let l=(null==(o=null==(n=r.plugins)?void 0:n.find(t=>{var n;return null!=(n=t.schema)&&!!n.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:o.schema)||r.schema;if(l){let n=e;(null==(i=l.config)?void 0:i.prefix)&&n.startsWith(l.config.prefix)&&(n=n.replace(l.config.prefix,""),l.config.baseURL&&(e=e.replace(l.config.prefix,l.config.baseURL))),(null==(s=l.config)?void 0:s.baseURL)&&n.startsWith(l.config.baseURL)&&(n=n.replace(l.config.baseURL,""));let r=l.schema[n];if(r){let n=K(J({},t),{method:r.method,output:r.output});return(null==t?void 0:t.disableValidation)||(n=K(J({},n),{body:r.input?await es(r.input,null==t?void 0:t.body):null==t?void 0:t.body,params:r.params?await es(r.params,null==t?void 0:t.params):null==t?void 0:t.params,query:r.query?await es(r.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:n}}}return{url:e,options:t}}}),...(null==t?void 0:t.plugins)||[]]});if(null==n?void 0:n.catchAllError)try{return await eu(e,o)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await eu(e,o)}),{$sessionSignal:E,session:T}=function(e,t){let n=O(!1),r=((e,t,n,r)=>{let o=O({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>i(e)}),i=async e=>new Promise(i=>{let s="function"==typeof r?r({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):r;n(t,{...s,query:{...s?.query,...e?.query},async onSuccess(e){o.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await s?.onSuccess?.(e)},async onError(e){let{request:t}=e,n="number"==typeof t.retry?t.retry:t.retry?.attempts,r=t.retryAttempt||0;n&&r<n||(o.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await s?.onError?.(e))},async onRequest(e){let t=o.get();o.set({isPending:null===t.data,data:t.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await s?.onRequest?.(e)}}).catch(e=>{o.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch})}).finally(()=>{i(void 0)})});e=Array.isArray(e)?e:[e];let s=!1;for(let t of e)t.subscribe(async()=>{_()||(s?await i():S(o,()=>{let e=setTimeout(async()=>{s||(await i(),s=!0)},0);return()=>{o.off(),t.off(),clearTimeout(e)}}))});return o})(n,"/get-session",e,{method:"GET"});return S(r,()=>{let o=function(e){let{sessionAtom:t,sessionSignal:n,$fetch:r,options:o={}}=e,i=o.sessionOptions?.refetchInterval??0,s=o.sessionOptions?.refetchOnWindowFocus??!0,l=o.sessionOptions?.refetchWhenOffline??!1,u={lastSync:0,lastSessionRequest:0,cachedSession:void 0},a=e=>{if(!(l||N().isOnline))return;if(e?.event==="storage"){u.lastSync=M(),n.set(!n.get());return}let o=t.get();if(e?.event==="poll"){u.lastSessionRequest=M(),r("/get-session").then(e=>{e.error?t.set({...o,data:null,error:e.error}):t.set({...o,data:e.data,error:null}),u.lastSync=M(),n.set(!n.get())}).catch(()=>{});return}if(e?.event==="visibilitychange"){if(M()-u.lastSessionRequest<5)return;u.lastSessionRequest=M()}(o?.data===null||o?.data===void 0||e?.event==="visibilitychange")&&(u.lastSync=M(),n.set(!n.get()))};return{init:()=>{i&&i>0&&(u.pollInterval=setInterval(()=>{t.get()?.data&&a({event:"poll"})},1e3*i)),u.unsubscribeBroadcast=L().subscribe(()=>{a({event:"storage"})}),s&&(u.unsubscribeFocus=U().subscribe(()=>{a({event:"visibilitychange"})})),u.unsubscribeOnline=N().subscribe(e=>{e&&a({event:"visibilitychange"})}),L().setup(),U().setup(),N().setup()},cleanup:()=>{u.pollInterval&&(clearInterval(u.pollInterval),u.pollInterval=void 0),u.unsubscribeBroadcast&&(u.unsubscribeBroadcast(),u.unsubscribeBroadcast=void 0),u.unsubscribeFocus&&(u.unsubscribeFocus(),u.unsubscribeFocus=void 0),u.unsubscribeOnline&&(u.unsubscribeOnline(),u.unsubscribeOnline=void 0),u.lastSync=0,u.lastSessionRequest=0,u.cachedSession=void 0},triggerRefetch:a,broadcastSessionUpdate:e=>{L().post({event:"session",data:{trigger:e},clientId:Math.random().toString(36).substring(7)})}}}({sessionAtom:r,sessionSignal:n,$fetch:e,options:t});return o.init(),()=>{o.cleanup()}}),{session:r,$sessionSignal:n}}(p,e),R=e?.plugins||[],P={},A={$sessionSignal:E,session:T},j={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},x=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||"/sign-up/email"===e||"/sign-in/email"===e||"/delete-user"===e||"/verify-email"===e||"/revoke-sessions"===e||"/revoke-session"===e||"/change-email"===e}];for(let e of R)e.getAtoms&&Object.assign(A,e.getAtoms?.(p)),e.pathMethods&&Object.assign(j,e.pathMethods),e.atomListeners&&x.push(...e.atomListeners);let I={notify:e=>{A[e].set(!A[e].get())},listen:(e,t)=>{A[e].subscribe(t)},atoms:A};for(let t of R)t.getActions&&(P=B(t.getActions?.(p,I,e)??{},P));return{get baseURL(){return o},pluginsActions:P,pluginsAtoms:A,pluginPathMethods:j,atomListeners:x,$fetch:p,$store:I}})(e),a={};for(let[e,t]of Object.entries(o))a[function(e){return`use${e.charAt(0).toUpperCase()+e.slice(1)}`}(e)]=()=>(function(e,t={}){let n=(0,ea.useRef)(e.get()),{keys:r,deps:o=[e,r]}=t,i=(0,ea.useCallback)(t=>{let o=e=>{n.current!==e&&(n.current=e,t())};if(o(e.value),r?.length){let t;return t=new Set(r).add(void 0),e.listen((e,n,r)=>{t.has(r)&&o(e,n,r)})}return e.listen(o)},o),s=()=>n.current;return(0,ea.useSyncExternalStore)(i,s,s)})(t);return t={...r,...a,$fetch:i,$store:l},function e(r=[]){return new Proxy(function(){},{get(n,o){var i;if("string"!=typeof o||"then"===o||"catch"===o||"finally"===o)return;let s=[...r,o],l=t;for(let e of s)if(l&&"object"==typeof l&&e in l)l=l[e];else{l=void 0;break}return"function"==typeof l?l:"object"==typeof(i=l)&&null!==i&&"get"in i&&"function"==typeof i.get&&"lc"in i&&"number"==typeof i.lc?l:e(s)},apply:async(e,t,s)=>{let l="/"+r.map(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)).join("/"),a=s[0]||{},c=s[1]||{},{query:f,fetchOptions:d,...p}=a,h={...c,...d},y=function(e,t,n){let r=t[e],{fetchOptions:o,query:i,...s}=n||{};return r||(o?.method?o.method:s&&Object.keys(s).length>0?"POST":"GET")}(l,n,a);return await i(l,{...h,body:"GET"===y?void 0:{...p,...h?.body||{}},query:f||h?.query,method:y,async onSuccess(e){if(await h?.onSuccess?.(e),!u||h.disableSignal)return;let t=u.filter(e=>e.matcher(l));if(!t.length)return;let n=new Set;for(let e of t){let t=o[e.signal];if(!t)return;if(n.has(e.signal))continue;n.add(e.signal);let r=t.get();setTimeout(()=>{t.set(!r)},10)}}})}})}()}},7045:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},7670:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{formatUrl:function(){return i},formatWithValidation:function(){return l},urlObjectKeys:function(){return s}});let r=n(9417)._(n(3078)),o=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:n}=e,i=e.protocol||"",s=e.pathname||"",l=e.hash||"",u=e.query||"",a=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?a=t+e.host:n&&(a=t+(~n.indexOf(":")?"["+n+"]":n),e.port&&(a+=":"+e.port)),u&&"object"==typeof u&&(u=String(r.urlQueryToSearchParams(u)));let c=e.search||u&&"?"+u||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||o.test(i))&&!1!==a?(a="//"+(a||""),s&&"/"!==s[0]&&(s="/"+s)):a||(a=""),l&&"#"!==l[0]&&(l="#"+l),c&&"?"!==c[0]&&(c="?"+c),""+i+a+(s=s.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+l}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(e){return i(e)}},8607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return i}});let r=n(2296),o=n(2929);function i(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),n=new URL(e,t);return n.origin===t&&(0,o.hasBasePath)(n.pathname)}catch(e){return!1}}}}]);