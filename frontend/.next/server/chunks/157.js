"use strict";exports.id=157,exports.ids=[157],exports.modules={1069:(a,b,c)=>{c.d(b,{V:()=>t});var d=c(73519),e=c(53082),f=c(80193),g=c(34186);async function h(a,b,c,d){let h=await (0,g.j)(a,b,"verify");(0,f.O)(a,h);let i=(0,e.B)(a,h.algorithm);try{return await crypto.subtle.verify(i,h,c,d)}catch{return!1}}var i=c(33164),j=c(37432),k=c(66719),l=c(32712),m=c(80053),n=c(17969),o=c(1911),p=c(80801);async function q(a,b,c){let e,f;if(!(0,l.G)(a))throw new i.Ye("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new i.Ye('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new i.Ye("JWS Protected Header incorrect type");if(void 0===a.payload)throw new i.Ye("JWS Payload missing");if("string"!=typeof a.signature)throw new i.Ye("JWS Signature missing or incorrect type");if(void 0!==a.header&&!(0,l.G)(a.header))throw new i.Ye("JWS Unprotected Header incorrect type");let g={};if(a.protected)try{let b=(0,d.D)(a.protected);g=JSON.parse(j.D0.decode(b))}catch{throw new i.Ye("JWS Protected Header is invalid")}if(!(0,k.f)(g,a.header))throw new i.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let q={...g,...a.header},r=(0,n.n)(i.Ye,new Map([["b64",!0]]),c?.crit,g,q),s=!0;if(r.has("b64")&&"boolean"!=typeof(s=g.b64))throw new i.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:t}=q;if("string"!=typeof t||!t)throw new i.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');let u=c&&(0,o.F)("algorithms",c.algorithms);if(u&&!u.has(t))throw new i.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(s){if("string"!=typeof a.payload)throw new i.Ye("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new i.Ye("JWS Payload must be a string or an Uint8Array instance");let v=!1;"function"==typeof b&&(b=await b(g,a),v=!0),(0,m.y)(t,b,"verify");let w=(0,j.xW)(void 0!==a.protected?(0,j.lF)(a.protected):new Uint8Array,(0,j.lF)("."),"string"==typeof a.payload?s?(0,j.lF)(a.payload):j.Rd.encode(a.payload):a.payload);try{e=(0,d.D)(a.signature)}catch{throw new i.Ye("Failed to base64url decode the signature")}let x=await (0,p.l)(b,t);if(!await h(t,x,e,w))throw new i.h2;if(s)try{f=(0,d.D)(a.payload)}catch{throw new i.Ye("Failed to base64url decode the payload")}else f="string"==typeof a.payload?j.Rd.encode(a.payload):a.payload;let y={payload:f};return(void 0!==a.protected&&(y.protectedHeader=g),void 0!==a.header&&(y.unprotectedHeader=a.header),v)?{...y,key:x}:y}async function r(a,b,c){if(a instanceof Uint8Array&&(a=j.D0.decode(a)),"string"!=typeof a)throw new i.Ye("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new i.Ye("Invalid Compact JWS");let h=await q({payload:e,protected:d,signature:f},b,c),k={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...k,key:h.key}:k}var s=c(7448);async function t(a,b,c){let d=await r(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new i.Dp("JWTs MUST NOT use unencoded payload");let e={payload:(0,s.k6)(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}},1911:(a,b,c)=>{c.d(b,{F:()=>d});function d(a,b){if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}},2816:(a,b,c)=>{function d(a,b){if(!a||!b)return a;let c=Object.entries(b).filter(([,{returned:a}])=>!1===a).map(([a])=>a);return Object.entries(structuredClone(a)).filter(([a])=>!c.includes(a)).reduce((a,[b,c])=>({...a,[b]:c}),{})}function e(a,b,c){let d=!1;return function(...e){return d||((c?.warn??console.warn)(`[Deprecation] ${b}`),d=!0),a.apply(this,e)}}c.d(b,{JW:()=>k,CI:()=>e,dB:()=>d,$C:()=>f.$,mY:()=>h,Ll:()=>j,Wi:()=>m,$l:()=>l.$});var f=c(63561),g=c(49764);function h(a){return g.ipv4().safeParse(a).success||g.ipv6().safeParse(a).success}function i(a){if(a.includes("::")){let b=a.split("::"),c=b[0]?b[0].split(":"):[],d=b[1]?b[1].split(":"):[],e=Array(8-c.length-d.length).fill("0000");return[...c.map(a=>a.padStart(4,"0")),...e,...d.map(a=>a.padStart(4,"0"))]}return a.split(":").map(a=>a.padStart(4,"0"))}function j(a,b={}){if(g.ipv4().safeParse(a).success||!g.ipv6().safeParse(a).success)return a.toLowerCase();let c=function(a){let b=a.toLowerCase();if(b.startsWith("::ffff:")){let a=b.substring(7);if(g.ipv4().safeParse(a).success)return a}let c=a.split(":");if(7===c.length&&c[5]?.toLowerCase()==="ffff"){let a=c[6];if(a&&g.ipv4().safeParse(a).success)return a}if(b.includes("::ffff:")||b.includes(":ffff:")){let b=i(a);if(8===b.length&&"0000"===b[0]&&"0000"===b[1]&&"0000"===b[2]&&"0000"===b[3]&&"0000"===b[4]&&"ffff"===b[5]&&b[6]&&b[7])return`${Number.parseInt(b[6].substring(0,2),16)}.${Number.parseInt(b[6].substring(2,4),16)}.${Number.parseInt(b[7].substring(0,2),16)}.${Number.parseInt(b[7].substring(2,4),16)}`}return null}(a);if(c)return c.toLowerCase();var d=b.ipv6Subnet||64;let e=i(a);if(d&&d<128){let a=d;return e.map(b=>{if(a<=0)return"0000";if(a>=16)return a-=16,b;let c=Number.parseInt(b,16)&(65535<<16-a&65535);return a=0,c.toString(16).padStart(4,"0")}).join(":").toLowerCase()}return e.join(":").toLowerCase()}function k(a,b){return`${a}|${b}`}var l=c(75544);function m(a,b){let c;try{c=new URL(a).pathname.replace(/\/+$/,"")||"/"}catch{return"/"}return"/"===b||""===b?c:c===b?"/":c.startsWith(b+"/")?c.slice(b.length).replace(/\/+$/,"")||"/":c}},2952:(a,b,c)=>{c.d(b,{$O:()=>r,DT:()=>u,NF:()=>s,Ow:()=>w,RY:()=>v,kU:()=>q,q5:()=>t,vd:()=>p});var d=c(44625),e=c(31009),f=c(49374),g=c(69385),h=c(60353),i=c(57105),j=c(81266),k=c(68019),l=c(40659),m=c(38729),n=c(80906),o=c(67183);function p(a){return(0,h.Kg)(a)?t(a):a.toOperationNode()}function q(a){return(0,h.MH)(a)?a.map(a=>r(a)):[r(a)]}function r(a){return(0,i.SS)(a)?(0,i.YK)(a):p(a)}function s(a,b){let c=t(a);if((0,l.Xm)(b))return m.Q.create(c,n.k.create(l.zX.create(b)));let d=b.slice(0,-1);if((0,l.Xm)(d))return m.Q.create(c,o.c.create(l.zX.create(d)));throw Error(`Invalid JSON operator: ${b}`)}function t(a){if(!a.includes("."))return f.q.create(e.Z.create(a));let b=a.split(".").map(x);if(3===b.length){var c=b;let[a,d,h]=c;return f.q.create(e.Z.create(h),g.H.createWithSchema(a,d))}if(2===b.length){var d=b;let[a,c]=d;return f.q.create(e.Z.create(c),g.H.create(a))}throw Error(`invalid column reference ${a}`)}function u(a){let b=" as ";if(!a.includes(b))return t(a);{let[c,e]=a.split(b).map(x);return d.N.create(t(c),j.O.create(e))}}function v(a){return e.Z.create(a)}function w(a){if(!a.includes(" "))return v(a);{let[b,c]=a.split(" ").map(x);if(!(0,k.bE)(c))throw Error(`invalid order direction "${c}" next to "${b}"`);return(0,k.xk)([b,c])[0]}}function x(a){return a.trim()}},4315:(a,b,c)=>{c.d(b,{L:()=>o});var d=c(47467),e=c(18804),f=c(93087),g=c(83197),h=c(54744),i=c(60353);let j=(0,i.CN)({is:a=>"ReturningNode"===a.kind,create:a=>(0,i.CN)({kind:"ReturningNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})}),k=(0,i.CN)({is:a=>"ExplainNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ExplainNode",format:a,options:b})});var l=c(24118);let m=(0,i.CN)({is:a=>"OutputNode"===a.kind,create:a=>(0,i.CN)({kind:"OutputNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})});var n=c(47777);let o=(0,i.CN)({is:a=>e.L.is(a)||d.o.is(a)||f.U.is(a)||g.e.is(a)||l.r.is(a),cloneWithEndModifier:(a,b)=>(0,i.CN)({...a,endModifiers:a.endModifiers?(0,i.CN)([...a.endModifiers,b]):(0,i.CN)([b])}),cloneWithWhere:(a,b)=>(0,i.CN)({...a,where:a.where?h.o.cloneWithOperation(a.where,"And",b):h.o.create(b)}),cloneWithJoin:(a,b)=>(0,i.CN)({...a,joins:a.joins?(0,i.CN)([...a.joins,b]):(0,i.CN)([b])}),cloneWithReturning:(a,b)=>(0,i.CN)({...a,returning:a.returning?j.cloneWithSelections(a.returning,b):j.create(b)}),cloneWithoutReturning:a=>(0,i.CN)({...a,returning:void 0}),cloneWithoutWhere:a=>(0,i.CN)({...a,where:void 0}),cloneWithExplain:(a,b,c)=>(0,i.CN)({...a,explain:k.create(b,c?.toOperationNode())}),cloneWithTop:(a,b)=>(0,i.CN)({...a,top:b}),cloneWithOutput:(a,b)=>(0,i.CN)({...a,output:a.output?m.cloneWithSelections(a.output,b):m.create(b)}),cloneWithOrderByItems:(a,b)=>(0,i.CN)({...a,orderBy:a.orderBy?n.O.cloneWithItems(a.orderBy,b):n.O.create(b)}),cloneWithoutOrderBy:a=>(0,i.CN)({...a,orderBy:void 0})})},4744:(a,b,c)=>{c.d(b,{Ce:()=>m,R_:()=>k,SY:()=>o,Uh:()=>j,Zt:()=>l,ec:()=>n});var d=c(64196);c(24386);var e=c(2816),f=c(49764);function g(a){let b=a.split("."),c=parseInt(b[b.length-1]||"0",10);return isNaN(c)?0:c}function h(a,b){let c={};for(let d in a)c[d]={name:d,value:"",attributes:{...b,maxAge:0}};return c}let i=a=>(b,c,d)=>{let e=function(a,b){let c={};for(let[d,e]of Object.entries(function(a){let b=a.headers?.get("cookie");if(!b)return{};let c={};for(let a of b.split("; ")){let[b,...d]=a.split("=");b&&d.length>0&&(c[b]=d.join("="))}return c}(b)))d.startsWith(a)&&(c[d]=e);return c}(b,d),f=d.context.logger;return{getValue:()=>(function(a){return Object.keys(a).sort((a,b)=>g(a)-g(b)).map(b=>a[b]).join("")})(e),hasChunks:()=>Object.keys(e).length>0,chunk(d,g){let i=h(e,c);for(let a in e)delete e[a];for(let h of function(a,b,c,d){let e=Math.ceil(b.value.length/3896);if(1===e)return c[b.name]=b.value,[b];let f=[];for(let a=0;a<e;a++){let d=`${b.name}.${a}`,e=3896*a,g=b.value.substring(e,e+3896);f.push({...b,name:d,value:g}),c[d]=g}return d.debug(`CHUNKING_${a.toUpperCase()}_COOKIE`,{message:`${a} cookie exceeds allowed 4096 bytes.`,emptyCookieSize:200,valueSize:b.value.length,chunkCount:e,chunks:f.map(a=>a.value.length+200)}),f}(a,{name:b,value:d,attributes:{...c,...g}},e,f))i[h.name]=h;return Object.values(i)},clean(){let a=h(e,c);for(let a in e)delete e[a];return Object.values(a)},setCookies(a){for(let b of a)d.setCookie(b.name,b.value,b.attributes)}}},j=i("Session"),k=i("Account");function l(a,b){let c=a.getCookie(b);if(c)return c;let d=[],e=a.headers?.get("cookie");if(!e)return null;let f={};for(let a of e.split("; ")){let[b,...c]=a.split("=");b&&c.length>0&&(f[b]=c.join("="))}for(let[a,c]of Object.entries(f))if(a.startsWith(b+".")){let b=parseInt(a.split(".").at(-1)||"0",10);isNaN(b)||d.push({index:b,value:c})}return d.length>0?(d.sort((a,b)=>a.index-b.index),d.map(a=>a.value).join("")):null}async function m(a,b){let c=a.context.authCookies.accountData,e={maxAge:300,...c.attributes},f=await (0,d.lT)(b,a.context.secret,"better-auth-account",e.maxAge);if(f.length>4096){let b=k(c.name,e,a),d=b.chunk(f,e);b.setCookies(d)}else{let b=k(c.name,e,a);if(b.hasChunks()){let a=b.clean();b.setCookies(a)}a.setCookie(c.name,f,e)}}async function n(a){let b=l(a,a.context.authCookies.accountData.name);if(b){let c=(0,e.$l)(await (0,d.Do)(b,a.context.secret,"better-auth-account"));if(c)return c}return null}let o=f.optional(f.object({disableCookieCache:f.coerce.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:f.coerce.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}))},5109:(a,b,c)=>{function d(a){return a?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function e(a,b,c){let d="",e=0,f=0;for(let c of a)for(e=e<<8|c,f+=8;f>=6;)f-=6,d+=b[e>>f&63];if(f>0&&(d+=b[e<<6-f&63]),c){let a=(4-d.length%4)%4;d+="=".repeat(a)}return d}function f(a,b){let c=new Map;for(let a=0;a<b.length;a++)c.set(b[a],a);let d=[],e=0,f=0;for(let b of a){if("="===b)break;let a=c.get(b);if(void 0===a)throw Error(`Invalid Base64 character: ${b}`);e=e<<6|a,(f+=6)>=8&&(f-=8,d.push(e>>f&255))}return Uint8Array.from(d)}c.d(b,{K:()=>g,z:()=>h});let g={encode(a,b={}){let c=d(!1);return e("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){"string"!=typeof a&&(a=new TextDecoder().decode(a));let b=d(a.includes("-")||a.includes("_"));return f(a,b)}},h={encode(a,b={}){let c=d(!0);return e("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){let b=d(a.includes("-")||a.includes("_"));return f(a,b)}}},5964:(a,b,c)=>{c.d(b,{Mn:()=>p,dc:()=>j,eP:()=>k,gS:()=>n,h6:()=>o,kc:()=>i,oh:()=>q,pS:()=>m,yO:()=>l});var d=c(17317),e=c(41328);let f=new WeakMap;function g(a,b){let c=b.fields,d={};for(let b in a){let e=c[b];if(!e){d[b]=a[b];continue}(!1!==e.returned||"id"===b)&&(d[b]=a[b])}return d}function h(a,b,c){let e=`${b}:${c}`;f.has(a)||f.set(a,new Map);let g=f.get(a);if(g.has(e))return g.get(e);let h="output"===c?(0,d.getAuthTables)(a)[b]?.fields??{}:{},i="user"===b||"session"===b||"account"===b?a[b]?.additionalFields:void 0,j={...h,...i??{}};for(let c of a.plugins||[])c.schema&&c.schema[b]&&(j={...j,...c.schema[b].fields});return g.set(e,j),j}function i(a,b){return g(b,{fields:h(a,"user","output")})}function j(a,b){return g(b,{fields:h(a,"session","output")})}function k(a,b){let{accessToken:c,refreshToken:d,idToken:e,accessTokenExpiresAt:f,refreshTokenExpiresAt:i,password:j,...k}=g(b,{fields:h(a,"account","output")});return k}function l(a,b){let c=b.action||"create",d=b.fields,f=Object.assign(Object.create(null),null);for(let b in d){if(b in a){if(!1===d[b].input){if(void 0!==d[b].defaultValue&&"update"!==c){f[b]=d[b].defaultValue;continue}if(a[b])throw new e.LG("BAD_REQUEST",{message:`${b} is not allowed to be set`});continue}if(d[b].validator?.input&&void 0!==a[b]){let c=d[b].validator.input["~standard"].validate(a[b]);if(c instanceof Promise)throw new e.LG("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in c&&c.issues)throw new e.LG("BAD_REQUEST",{message:c.issues[0]?.message||"Validation Error"});f[b]=c.value;continue}if(d[b].transform?.input&&void 0!==a[b]){f[b]=d[b].transform?.input(a[b]);continue}f[b]=a[b];continue}if(void 0!==d[b].defaultValue&&"create"===c){if("function"==typeof d[b].defaultValue){f[b]=d[b].defaultValue();continue}f[b]=d[b].defaultValue;continue}if(d[b].required&&"create"===c)throw new e.LG("BAD_REQUEST",{message:`${b} is required`})}return f}function m(a,b={},c){return l(b,{fields:h(a,"user","input"),action:c})}function n(a,b){return l(b||{},{fields:h(a,"user","input")})}function o(a,b){return l(b,{fields:h(a,"account","input")})}function p(a,b){return l(b,{fields:h(a,"session","input")})}function q(a,b){if(!b)return a;for(let c in b){let d=b[c]?.modelName;for(let e in d&&(a[c].modelName=d),a[c].fields){let d=b[c]?.fields?.[e];d&&(a[c].fields[e].fieldName=d)}}return a}},7448:(a,b,c)=>{c.d(b,{cE:()=>m,k6:()=>l});var d=c(33164),e=c(37432),f=c(32712);let g=a=>Math.floor(a.getTime()/1e3),h=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function i(a){let b,c=h.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b}function j(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let k=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;function l(a,b,c={}){var h,j;let m,n;try{m=JSON.parse(e.D0.decode(b))}catch{}if(!(0,f.G)(m))throw new d.Dp("JWT Claims Set must be a top-level JSON object");let{typ:o}=c;if(o&&("string"!=typeof a.typ||k(a.typ)!==k(o)))throw new d.ie('unexpected "typ" JWT header value',m,"typ","check_failed");let{requiredClaims:p=[],issuer:q,subject:r,audience:s,maxTokenAge:t}=c,u=[...p];for(let a of(void 0!==t&&u.push("iat"),void 0!==s&&u.push("aud"),void 0!==r&&u.push("sub"),void 0!==q&&u.push("iss"),new Set(u.reverse())))if(!(a in m))throw new d.ie(`missing required "${a}" claim`,m,a,"missing");if(q&&!(Array.isArray(q)?q:[q]).includes(m.iss))throw new d.ie('unexpected "iss" claim value',m,"iss","check_failed");if(r&&m.sub!==r)throw new d.ie('unexpected "sub" claim value',m,"sub","check_failed");if(s&&(h=m.aud,j="string"==typeof s?[s]:s,"string"==typeof h?!j.includes(h):!(Array.isArray(h)&&j.some(Set.prototype.has.bind(new Set(h))))))throw new d.ie('unexpected "aud" claim value',m,"aud","check_failed");switch(typeof c.clockTolerance){case"string":n=i(c.clockTolerance);break;case"number":n=c.clockTolerance;break;case"undefined":n=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:v}=c,w=g(v||new Date);if((void 0!==m.iat||t)&&"number"!=typeof m.iat)throw new d.ie('"iat" claim must be a number',m,"iat","invalid");if(void 0!==m.nbf){if("number"!=typeof m.nbf)throw new d.ie('"nbf" claim must be a number',m,"nbf","invalid");if(m.nbf>w+n)throw new d.ie('"nbf" claim timestamp check failed',m,"nbf","check_failed")}if(void 0!==m.exp){if("number"!=typeof m.exp)throw new d.ie('"exp" claim must be a number',m,"exp","invalid");if(m.exp<=w-n)throw new d.n('"exp" claim timestamp check failed',m,"exp","check_failed")}if(t){let a=w-m.iat;if(a-n>("number"==typeof t?t:i(t)))throw new d.n('"iat" claim timestamp check failed (too far in the past)',m,"iat","check_failed");if(a<0-n)throw new d.ie('"iat" claim timestamp check failed (it should be in the past)',m,"iat","check_failed")}return m}class m{#a;constructor(a){if(!(0,f.G)(a))throw TypeError("JWT Claims Set MUST be an object");this.#a=structuredClone(a)}data(){return e.Rd.encode(JSON.stringify(this.#a))}get iss(){return this.#a.iss}set iss(a){this.#a.iss=a}get sub(){return this.#a.sub}set sub(a){this.#a.sub=a}get aud(){return this.#a.aud}set aud(a){this.#a.aud=a}set jti(a){this.#a.jti=a}set nbf(a){"number"==typeof a?this.#a.nbf=j("setNotBefore",a):a instanceof Date?this.#a.nbf=j("setNotBefore",g(a)):this.#a.nbf=g(new Date)+i(a)}set exp(a){"number"==typeof a?this.#a.exp=j("setExpirationTime",a):a instanceof Date?this.#a.exp=j("setExpirationTime",g(a)):this.#a.exp=g(new Date)+i(a)}set iat(a){void 0===a?this.#a.iat=g(new Date):a instanceof Date?this.#a.iat=j("setIssuedAt",g(a)):"string"==typeof a?this.#a.iat=j("setIssuedAt",g(new Date)+i(a)):this.#a.iat=j("setIssuedAt",a)}}},9005:(a,b,c)=>{c.d(b,{U:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"SelectAllNode"===a.kind,create:()=>(0,d.CN)({kind:"SelectAllNode"})})},9576:(a,b,c)=>{c.d(b,{$F:()=>l,KV:()=>h,Km:()=>m,Nu:()=>j,_K:()=>f,lh:()=>k,yz:()=>i});let d=Object.create(null),e=a=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(a?d:globalThis),f=new Proxy(d,{get:(a,b)=>e()[b]??d[b],has:(a,b)=>b in e()||b in d,set:(a,b,c)=>(e(!0)[b]=c,!0),deleteProperty(a,b){if(!b)return!1;let c=e(!0);return delete c[b],!0},ownKeys:()=>Object.keys(e(!0))}),g="undefined"!=typeof process&&process.env&&"production"||"",h="production"===g,i=()=>"dev"===g||"development"===g,j=()=>"test"===g||function(a){return!!a&&"false"!==a}(f.TEST);function k(a,b){return"undefined"!=typeof process&&process.env?process.env[a]??b:"undefined"!=typeof Deno?Deno.env.get(a)??b:"undefined"!=typeof Bun?Bun.env[a]??b:b}function l(a,b=!0){let c=k(a);return c?"0"!==c&&"false"!==c.toLowerCase()&&""!==c:b}let m=Object.freeze({get BETTER_AUTH_SECRET(){return k("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return k("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return k("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return k("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return k("NODE_ENV","development")},get PACKAGE_VERSION(){return k("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return k("BETTER_AUTH_TELEMETRY_ENDPOINT","")}})},10106:(a,b,c)=>{c.d(b,{F:()=>d,x:()=>e});class d extends Error{node;constructor(a){super("no result"),this.node=a}}function e(a){return Object.prototype.hasOwnProperty.call(a,"prototype")}},11934:(a,b,c)=>{c.d(b,{p:()=>d});let d=(a,b="ms")=>new Date(Date.now()+("sec"===b?1e3*a:a))},12034:(a,b,c)=>{c.d(b,{R:()=>h});var d=c(60353),e=c(48137),f=c(80234);let g=(0,d.CN)([]);class h{#b;constructor(a=g){this.#b=a}get plugins(){return this.#b}transformQuery(a,b){for(let c of this.#b){let d=c.transformQuery({node:a,queryId:b});if(d.kind===a.kind)a=d;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${a.kind} but it returned a ${d.kind}`)}return a}async executeQuery(a){return await this.provideConnection(async b=>{let c=await b.executeQuery(a);return"numUpdatedOrDeletedRows"in c&&(0,f.u)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#c(c,a.queryId)})}async *stream(a,b){let{connection:c,release:d}=await (0,e.G)(this);try{for await(let d of c.streamQuery(a,b))yield await this.#c(d,a.queryId)}finally{d()}}async #c(a,b){for(let c of this.#b)a=await c.transformResult({result:a,queryId:b});return a}}},15560:(a,b,c)=>{c.d(b,{h:()=>i,p4:()=>e,p8:()=>g,vF:()=>j});var d=c(84981);let e={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",undim:"\x1b[22m",underscore:"\x1b[4m",blink:"\x1b[5m",reverse:"\x1b[7m",hidden:"\x1b[8m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},bg:{black:"\x1b[40m",red:"\x1b[41m",green:"\x1b[42m",yellow:"\x1b[43m",blue:"\x1b[44m",magenta:"\x1b[45m",cyan:"\x1b[46m",white:"\x1b[47m"}},f=["debug","info","success","warn","error"];function g(a,b){return f.indexOf(b)>=f.indexOf(a)}let h={info:e.fg.blue,success:e.fg.green,warn:e.fg.yellow,error:e.fg.red,debug:e.fg.magenta},i=a=>{let b=a?.disabled!==!0,c=a?.level??"warn",i=a?.disableColors!==void 0?!a.disableColors:1!==(0,d.t)();return{...Object.fromEntries(f.map(d=>[d,(...[f,...j])=>((d,f,j=[])=>{if(!b||!g(c,d))return;let k=((a,b,c)=>{let d=new Date().toISOString();return c?`${e.dim}${d}${e.reset} ${h[a]}${a.toUpperCase()}${e.reset} ${e.bright}[Better Auth]:${e.reset} ${b}`:`${d} ${a.toUpperCase()} [Better Auth]: ${b}`})(d,f,i);if(!a||"function"!=typeof a.log)return void("error"===d?console.error(k,...j):"warn"===d?console.warn(k,...j):console.log(k,...j));a.log("success"===d?"info":d,f,...j)})(d,f,j)])),get level(){return c}}},j=i()},17317:(a,b,c)=>{c.r(b),c.d(b,{accountSchema:()=>g,coreSchema:()=>f,getAuthTables:()=>d.y,rateLimitSchema:()=>h,sessionSchema:()=>i,userSchema:()=>j,verificationSchema:()=>k});var d=c(82587),e=c(49764);let f=e.object({id:e.string(),createdAt:e.date().default(()=>new Date),updatedAt:e.date().default(()=>new Date)}),g=f.extend({providerId:e.string(),accountId:e.string(),userId:e.coerce.string(),accessToken:e.string().nullish(),refreshToken:e.string().nullish(),idToken:e.string().nullish(),accessTokenExpiresAt:e.date().nullish(),refreshTokenExpiresAt:e.date().nullish(),scope:e.string().nullish(),password:e.string().nullish()}),h=e.object({key:e.string(),count:e.number(),lastRequest:e.number()}),i=f.extend({userId:e.coerce.string(),expiresAt:e.date(),token:e.string(),ipAddress:e.string().nullish(),userAgent:e.string().nullish()}),j=f.extend({email:e.string().transform(a=>a.toLowerCase()),emailVerified:e.boolean().default(!1),name:e.string(),image:e.string().nullish()}),k=f.extend({value:e.string(),expiresAt:e.date(),identifier:e.string()})},17793:(a,b,c)=>{c.d(b,{b:()=>h});var d=c(60353),e=c(55914),f=c(28244);let g=(0,d.CN)({is:a=>"OnNode"===a.kind,create:a=>(0,d.CN)({kind:"OnNode",on:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,on:"And"===b?e.s.create(a.on,c):f.K.create(a.on,c)})}),h=(0,d.CN)({is:a=>"JoinNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:void 0}),createWithOn:(a,b,c)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:g.create(c)}),cloneWithOn:(a,b)=>(0,d.CN)({...a,on:a.on?g.cloneWithOperation(a.on,"And",b):g.create(b)})})},17969:(a,b,c)=>{c.d(b,{n:()=>e});var d=c(33164);function e(a,b,c,e,f){let g;if(void 0!==f.crit&&e?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let h of(g=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,e.crit)){if(!g.has(h))throw new d.T0(`Extension Header Parameter "${h}" is not recognized`);if(void 0===f[h])throw new a(`Extension Header Parameter "${h}" is missing`);if(g.get(h)&&void 0===e[h])throw new a(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(e.crit)}},18804:(a,b,c)=>{c.d(b,{L:()=>k});var d=c(60353),e=c(75227);let f=(0,d.CN)({is:a=>"GroupByNode"===a.kind,create:a=>(0,d.CN)({kind:"GroupByNode",items:(0,d.CN)(a)}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})});var g=c(55914),h=c(28244);let i=(0,d.CN)({is:a=>"HavingNode"===a.kind,create:a=>(0,d.CN)({kind:"HavingNode",having:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,having:"And"===b?g.s.create(a.having,c):h.K.create(a.having,c)})});var j=c(4315);let k=(0,d.CN)({is:a=>"SelectQueryNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectQueryNode",...a&&{with:a}}),createFrom:(a,b)=>(0,d.CN)({kind:"SelectQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithSelections:(a,b)=>(0,d.CN)({...a,selections:a.selections?(0,d.CN)([...a.selections,...b]):(0,d.CN)(b)}),cloneWithDistinctOn:(a,b)=>(0,d.CN)({...a,distinctOn:a.distinctOn?(0,d.CN)([...a.distinctOn,...b]):(0,d.CN)(b)}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithOrderByItems:(a,b)=>j.L.cloneWithOrderByItems(a,b),cloneWithGroupByItems:(a,b)=>(0,d.CN)({...a,groupBy:a.groupBy?f.cloneWithItems(a.groupBy,b):f.create(b)}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithOffset:(a,b)=>(0,d.CN)({...a,offset:b}),cloneWithFetch:(a,b)=>(0,d.CN)({...a,fetch:b}),cloneWithHaving:(a,b)=>(0,d.CN)({...a,having:a.having?i.cloneWithOperation(a.having,"And",b):i.create(b)}),cloneWithSetOperations:(a,b)=>(0,d.CN)({...a,setOperations:a.setOperations?(0,d.CN)([...a.setOperations,...b]):(0,d.CN)([...b])}),cloneWithoutSelections:a=>(0,d.CN)({...a,selections:[]}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithoutOffset:a=>(0,d.CN)({...a,offset:void 0}),cloneWithoutOrderBy:a=>j.L.cloneWithoutOrderBy(a),cloneWithoutGroupBy:a=>(0,d.CN)({...a,groupBy:void 0})})},19051:(a,b,c)=>{c.d(b,{w:()=>f});var d=c(89875);class e{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(a,b){if((0,d.sd)(a),(0,d.DO)(b,void 0,"key"),this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let c=this.blockLen,e=new Uint8Array(c);e.set(b.length>c?a.create().update(b).digest():b);for(let a=0;a<e.length;a++)e[a]^=54;this.iHash.update(e),this.oHash=a.create();for(let a=0;a<e.length;a++)e[a]^=106;this.oHash.update(e),(0,d.uH)(e)}update(a){return(0,d.CC)(this),this.iHash.update(a),this}digestInto(a){(0,d.CC)(this),(0,d.DO)(a,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||=Object.create(Object.getPrototypeOf(this),{});let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let f=(a,b,c)=>new e(a,b).update(c).digest();f.create=(a,b)=>new e(a,b)},19151:(a,b,c)=>{c.d(b,{B:()=>o});var d=c(44625),e=c(81266),f=c(17793),g=c(97831),h=c(42437),i=c(36923),j=c(69385),k=c(84161);let l=(0,c(60353).CN)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),m={json_agg:!0,to_json:!0};class n extends h.V{#d;#e=new Set;#f=new Set;constructor(a){super(),this.#d=a}transformNodeImpl(a,b){if(!this.#g(a))return super.transformNodeImpl(a,b);let c=this.#h(a);for(let a of c)this.#f.add(a);let d=this.#i(a);for(let a of d)this.#e.add(a);let e=super.transformNodeImpl(a,b);for(let a of d)this.#e.delete(a);for(let a of c)this.#f.delete(a);return e}transformSchemableIdentifier(a,b){let c=super.transformSchemableIdentifier(a,b);return c.schema||!this.#e.has(a.identifier.name)?c:{...c,schema:e.O.create(this.#d)}}transformReferences(a,b){let c=super.transformReferences(a,b);return c.table.table.schema?c:{...c,table:j.H.createWithSchema(this.#d,c.table.table.identifier.name)}}transformAggregateFunction(a,b){return{...super.transformAggregateFunction({...a,aggregated:[]},b),aggregated:this.#j(a,b,"aggregated")}}transformFunction(a,b){return{...super.transformFunction({...a,arguments:[]},b),arguments:this.#j(a,b,"arguments")}}transformSelectModifier(a,b){return{...super.transformSelectModifier({...a,of:void 0},b),of:a.of?.map(a=>j.H.is(a)&&!a.table.schema?{...a,table:this.transformIdentifier(a.table.identifier,b)}:this.transformNode(a,b))}}#j(a,b,c){return m[a.func]?a[c].map(a=>!j.H.is(a)||a.table.schema?this.transformNode(a,b):{...a,table:this.transformIdentifier(a.table.identifier,b)}):this.transformNodeList(a[c],b)}#g(a){return a.kind in l}#i(a){let b=new Set;if("name"in a&&a.name&&i.y.is(a.name)&&this.#k(a.name,b),"from"in a&&a.from)for(let c of a.from.froms)this.#l(c,b);if("into"in a&&a.into&&this.#l(a.into,b),"table"in a&&a.table&&this.#l(a.table,b),"joins"in a&&a.joins)for(let c of a.joins)this.#l(c.table,b);return"using"in a&&a.using&&(f.b.is(a.using)?this.#l(a.using.table,b):this.#l(a.using,b)),b}#h(a){let b=new Set;return"with"in a&&a.with&&this.#m(a.with,b),b}#l(a,b){if(j.H.is(a))return this.#k(a.table,b);if(d.N.is(a)&&j.H.is(a.node))return this.#k(a.node.table,b);if(g.v.is(a)){for(let c of a.items)this.#l(c,b);return}if(k.f.is(a)){for(let c of a.tables)this.#l(c,b);return}}#k(a,b){let c=a.identifier.name;this.#e.has(c)||this.#f.has(c)||b.add(c)}#m(a,b){for(let c of a.expressions){let a=c.name.table.table.identifier.name;this.#f.has(a)||b.add(a)}}}class o{#n;constructor(a){this.#n=new n(a)}transformQuery(a){return this.#n.transformNode(a.node,a.queryId)}async transformResult(a){return a.result}}},19795:(a,b,c)=>{c.d(b,{JB:()=>j,M$:()=>m,Xm:()=>l,uJ:()=>k});var d=c(60353),e=c(44625),f=c(69385),g=c(57105),h=c(81266),i=c(20527);function j(a){return(0,d.MH)(a)?a.map(a=>k(a)):[k(a)]}function k(a){return(0,d.Kg)(a)?l(a):(0,i.uc)(a)?a.toOperationNode():(0,g.v0)(a)}function l(a){let b=" as ";if(!a.includes(b))return m(a);{let[c,d]=a.split(b).map(n);return e.N.create(m(c),h.O.create(d))}}function m(a){if(!a.includes("."))return f.H.create(a);{let[b,c]=a.split(".").map(n);return f.H.createWithSchema(b,c)}}function n(a){return a.trim()}},20527:(a,b,c)=>{c.d(b,{bj:()=>i,uc:()=>k});var d=c(44625),e=c(81266),f=c(39450),g=c(19795),h=c(60353);class i{#o;get table(){return this.#o}constructor(a){this.#o=a}as(a){return new j(this.#o,a)}}class j{#o;#p;get table(){return this.#o}get alias(){return this.#p}constructor(a,b){this.#o=a,this.#p=b}toOperationNode(){return d.N.create((0,g.M$)(this.#o),e.O.create(this.#p))}}function k(a){return(0,h.Gv)(a)&&(0,f.N)(a)&&(0,h.Kg)(a.table)&&(0,h.Kg)(a.alias)}},22795:(a,b,c)=>{c.d(b,{W:()=>f});var d=c(12034);class e extends d.R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(a){return new e([...this.plugins,a])}withPlugins(a){return new e([...this.plugins,...a])}withPluginAtFront(a){return new e([a,...this.plugins])}withoutPlugins(){return new e([])}}let f=new e},23090:(a,b,c)=>{c.d(b,{E:()=>g});var d=c(31575),e=c(60353),f=c(31700);let g=(0,e.CN)({raw:(a,b=[])=>(0,e.CN)({sql:a,query:d.z.createWithSql(a),parameters:(0,e.CN)(b),queryId:(0,f.a)()})})},24118:(a,b,c)=>{c.d(b,{r:()=>f});var d=c(60353),e=c(33423);let f=(0,d.CN)({is:a=>"MergeQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"MergeQueryNode",into:a,...b&&{with:b}}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:b}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens,b]):(0,d.CN)([b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens.slice(0,-1),e.t.cloneWithResult(a.whens[a.whens.length-1],b)]):void 0})})},24386:(a,b,c)=>{c.d(b,{zp:()=>Q,vX:()=>P}),c(64196),c(55649),c(24399);var d=c(69744);function e(a){if("boolean"!=typeof a)throw Error(`boolean expected, not ${a}`)}function f(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function g(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function h(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function i(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function j(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}let k=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],l="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,m=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0")),n={_0:48,_9:57,A:65,F:70,a:97,f:102};function o(a){return a>=n._0&&a<=n._9?a-n._0:a>=n.A&&a<=n.F?a-(n.A-10):a>=n.a&&a<=n.f?a-(n.a-10):void 0}function p(a,b,c=!0){if(void 0===b)return new Uint8Array(a);if(b.length!==a)throw Error('"output" expected Uint8Array of length '+a+", got: "+b.length);if(c&&b.byteOffset%4!=0)throw Error("invalid output, must be aligned");return b}function q(a){return Uint8Array.from(a)}function r(a=32){let b="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof b?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return b.getRandomValues(new Uint8Array(a))}function s(a,b=r){let{nonceLength:c}=a;f(c);let d=(a,b)=>{let c=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];g(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}(a,b);return b.fill(0),c};return(e,...f)=>({encrypt(h){g(h);let i=b(c),j=a(e,i,...f).encrypt(h);return j instanceof Promise?j.then(a=>d(i,a)):d(i,j)},decrypt(b){g(b);let d=b.subarray(0,c),h=b.subarray(c);return a(e,d,...f).decrypt(h)}})}let t=a=>Uint8Array.from(a.split(""),a=>a.charCodeAt(0)),u=t("expand 16-byte k"),v=t("expand 32-byte k"),w=i(u),x=i(v);function y(a,b){return a<<b|a>>>32-b}function z(a){return a.byteOffset%4==0}let A=0x100000000-1,B=Uint32Array.of();function C(a,b){let{allowShortKeys:c,extendNonceFn:d,counterLength:h,counterRight:k,rounds:l}=function(a,b){if(null==b||"object"!=typeof b)throw Error("options must be defined");return Object.assign(a,b)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},b);if("function"!=typeof a)throw Error("core must be a function");return f(h),f(l),e(k),e(c),(b,e,m,n,o=0)=>{let p,r;g(b,void 0,"key"),g(e,void 0,"nonce"),g(m,void 0,"data");let s=m.length;if(void 0===n&&(n=new Uint8Array(s)),g(n,void 0,"output"),f(o),o<0||o>=A)throw Error("arx: counter overflow");if(n.length<s)throw Error(`arx: output (${n.length}) is shorter than data (${s})`);let t=[],u=b.length;if(32===u)t.push(p=q(b)),r=x;else if(16===u&&c)(p=new Uint8Array(32)).set(b),p.set(b,16),r=w,t.push(p);else throw g(b,32,"arx key"),Error("invalid key size");z(e)||t.push(e=q(e));let v=i(p);if(d){if(24!==e.length)throw Error("arx: extended nonce must be 24 bytes");d(r,v,i(e.subarray(0,16)),v),e=e.subarray(16)}let y=16-h;if(y!==e.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let a=new Uint8Array(12);a.set(e,k?0:12-e.length),e=a,t.push(e)}return!function(a,b,c,d,e,f,g,h){let j=e.length,k=new Uint8Array(64),l=i(k),m=z(e)&&z(f),n=m?i(e):B,o=m?i(f):B;for(let i=0;i<j;g++){if(a(b,c,d,l,g,h),g>=A)throw Error("arx: counter overflow");let p=Math.min(64,j-i);if(m&&64===p){let a=i/4;if(i%4!=0)throw Error("arx: invalid block position");for(let b=0,c;b<16;b++)o[c=a+b]=n[c]^l[b];i+=64;continue}for(let a=0,b;a<p;a++)f[b=i+a]=e[b]^k[a];i+=p}}(a,r,v,i(e),m,n,o,l),j(...t),n}}function D(a,b){return 255&a[b++]|(255&a[b++])<<8}class E{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(a){let b=D(a=q(g(a,32,"key")),0),c=D(a,2),d=D(a,4),e=D(a,6),f=D(a,8),h=D(a,10),i=D(a,12),j=D(a,14);this.r[0]=8191&b,this.r[1]=(b>>>13|c<<3)&8191,this.r[2]=(c>>>10|d<<6)&7939,this.r[3]=(d>>>7|e<<9)&8191,this.r[4]=(e>>>4|f<<12)&255,this.r[5]=f>>>1&8190,this.r[6]=(f>>>14|h<<2)&8191,this.r[7]=(h>>>11|i<<5)&8065,this.r[8]=(i>>>8|j<<8)&8191,this.r[9]=j>>>5&127;for(let b=0;b<8;b++)this.pad[b]=D(a,16+2*b)}process(a,b,c=!1){let{h:d,r:e}=this,f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=e[7],n=e[8],o=e[9],p=D(a,b+0),q=D(a,b+2),r=D(a,b+4),s=D(a,b+6),t=D(a,b+8),u=D(a,b+10),v=D(a,b+12),w=D(a,b+14),x=d[0]+(8191&p),y=d[1]+((p>>>13|q<<3)&8191),z=d[2]+((q>>>10|r<<6)&8191),A=d[3]+((r>>>7|s<<9)&8191),B=d[4]+((s>>>4|t<<12)&8191),C=d[5]+(t>>>1&8191),E=d[6]+((t>>>14|u<<2)&8191),F=d[7]+((u>>>11|v<<5)&8191),G=d[8]+((v>>>8|w<<8)&8191),H=d[9]+(w>>>5|2048*!c),I=0,J=0+x*f+5*o*y+5*n*z+5*m*A+5*l*B;I=J>>>13,J&=8191,J+=5*k*C+5*j*E+5*i*F+5*h*G+5*g*H,I+=J>>>13,J&=8191;let K=I+x*g+y*f+5*o*z+5*n*A+5*m*B;I=K>>>13,K&=8191,K+=5*l*C+5*k*E+5*j*F+5*i*G+5*h*H,I+=K>>>13,K&=8191;let L=I+x*h+y*g+z*f+5*o*A+5*n*B;I=L>>>13,L&=8191,L+=5*m*C+5*l*E+5*k*F+5*j*G+5*i*H,I+=L>>>13,L&=8191;let M=I+x*i+y*h+z*g+A*f+5*o*B;I=M>>>13,M&=8191,M+=5*n*C+5*m*E+5*l*F+5*k*G+5*j*H,I+=M>>>13,M&=8191;let N=I+x*j+y*i+z*h+A*g+B*f;I=N>>>13,N&=8191,N+=5*o*C+5*n*E+5*m*F+5*l*G+5*k*H,I+=N>>>13,N&=8191;let O=I+x*k+y*j+z*i+A*h+B*g;I=O>>>13,O&=8191,O+=C*f+5*o*E+5*n*F+5*m*G+5*l*H,I+=O>>>13,O&=8191;let P=I+x*l+y*k+z*j+A*i+B*h;I=P>>>13,P&=8191,P+=C*g+E*f+5*o*F+5*n*G+5*m*H,I+=P>>>13,P&=8191;let Q=I+x*m+y*l+z*k+A*j+B*i;I=Q>>>13,Q&=8191,Q+=C*h+E*g+F*f+5*o*G+5*n*H,I+=Q>>>13,Q&=8191;let R=I+x*n+y*m+z*l+A*k+B*j;I=R>>>13,R&=8191,R+=C*i+E*h+F*g+G*f+5*o*H,I+=R>>>13,R&=8191;let S=I+x*o+y*n+z*m+A*l+B*k;I=S>>>13,S&=8191,S+=C*j+E*i+F*h+G*g+H*f,I+=S>>>13,S&=8191,J=8191&(I=(I=(I<<2)+I|0)+J|0),I>>>=13,K+=I,d[0]=J,d[1]=K,d[2]=L,d[3]=M,d[4]=N,d[5]=O,d[6]=P,d[7]=Q,d[8]=R,d[9]=S}finalize(){let{h:a,pad:b}=this,c=new Uint16Array(10),d=a[1]>>>13;a[1]&=8191;for(let b=2;b<10;b++)a[b]+=d,d=a[b]>>>13,a[b]&=8191;a[0]+=5*d,d=a[0]>>>13,a[0]&=8191,a[1]+=d,d=a[1]>>>13,a[1]&=8191,a[2]+=d,c[0]=a[0]+5,d=c[0]>>>13,c[0]&=8191;for(let b=1;b<10;b++)c[b]=a[b]+d,d=c[b]>>>13,c[b]&=8191;c[9]-=8192;let e=(1^d)-1;for(let a=0;a<10;a++)c[a]&=e;e=~e;for(let b=0;b<10;b++)a[b]=a[b]&e|c[b];a[0]=(a[0]|a[1]<<13)&65535,a[1]=(a[1]>>>3|a[2]<<10)&65535,a[2]=(a[2]>>>6|a[3]<<7)&65535,a[3]=(a[3]>>>9|a[4]<<4)&65535,a[4]=(a[4]>>>12|a[5]<<1|a[6]<<14)&65535,a[5]=(a[6]>>>2|a[7]<<11)&65535,a[6]=(a[7]>>>5|a[8]<<8)&65535,a[7]=(a[8]>>>8|a[9]<<5)&65535;let f=a[0]+b[0];a[0]=65535&f;for(let c=1;c<8;c++)f=(a[c]+b[c]|0)+(f>>>16)|0,a[c]=65535&f;j(c)}update(a){h(this),g(a);let{buffer:b,blockLen:c}=this,d=(a=q(a)).length;for(let e=0;e<d;){let f=Math.min(c-this.pos,d-e);if(f===c){for(;c<=d-e;e+=c)this.process(a,e);continue}b.set(a.subarray(e,e+f),this.pos),this.pos+=f,e+=f,this.pos===c&&(this.process(b,0,!1),this.pos=0)}return this}destroy(){j(this.h,this.r,this.buffer,this.pad)}digestInto(a){h(this);g(a,void 0,"output");let b=this.outputLen;if(a.length<b)throw Error("digestInto() expects output buffer of length at least "+b);this.finished=!0;let{buffer:c,h:d}=this,{pos:e}=this;if(e){for(c[e++]=1;e<16;e++)c[e]=0;this.process(c,0,!0)}this.finalize();let f=0;for(let b=0;b<8;b++)a[f++]=d[b]>>>0,a[f++]=d[b]>>>8;return a}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}}let F=function(a){let b=(b,c)=>a(c).update(b).digest(),c=a(new Uint8Array(32));return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b}(a=>new E(a));function G(a,b,c,d,e,f=20){let g=a[0],h=a[1],i=a[2],j=a[3],k=b[0],l=b[1],m=b[2],n=b[3],o=b[4],p=b[5],q=b[6],r=b[7],s=c[0],t=c[1],u=c[2],v=g,w=h,x=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,H=q,I=r,J=e,K=s,L=t,M=u;for(let a=0;a<f;a+=2)E=E+(J=y(J^(v=v+A|0),16))|0,v=v+(A=y(A^E,12))|0,E=E+(J=y(J^v,8))|0,A=y(A^E,7),F=F+(K=y(K^(w=w+B|0),16))|0,w=w+(B=y(B^F,12))|0,F=F+(K=y(K^w,8))|0,B=y(B^F,7),H=H+(L=y(L^(x=x+C|0),16))|0,x=x+(C=y(C^H,12))|0,H=H+(L=y(L^x,8))|0,C=y(C^H,7),I=I+(M=y(M^(z=z+D|0),16))|0,z=z+(D=y(D^I,12))|0,I=I+(M=y(M^z,8))|0,D=y(D^I,7),H=H+(M=y(M^(v=v+B|0),16))|0,v=v+(B=y(B^H,12))|0,H=H+(M=y(M^v,8))|0,B=y(B^H,7),I=I+(J=y(J^(w=w+C|0),16))|0,w=w+(C=y(C^I,12))|0,I=I+(J=y(J^w,8))|0,C=y(C^I,7),E=E+(K=y(K^(x=x+D|0),16))|0,x=x+(D=y(D^E,12))|0,E=E+(K=y(K^x,8))|0,D=y(D^E,7),F=F+(L=y(L^(z=z+A|0),16))|0,z=z+(A=y(A^F,12))|0,F=F+(L=y(L^z,8))|0,A=y(A^F,7);let N=0;d[N++]=g+v|0,d[N++]=h+w|0,d[N++]=i+x|0,d[N++]=j+z|0,d[N++]=k+A|0,d[N++]=l+B|0,d[N++]=m+C|0,d[N++]=n+D|0,d[N++]=o+E|0,d[N++]=p+F|0,d[N++]=q+H|0,d[N++]=r+I|0,d[N++]=e+J|0,d[N++]=s+K|0,d[N++]=t+L|0,d[N++]=u+M|0}let H=C(G,{counterRight:!1,counterLength:4,allowShortKeys:!1}),I=C(G,{counterRight:!1,counterLength:8,extendNonceFn:function(a,b,c,d){let e=a[0],f=a[1],g=a[2],h=a[3],i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=c[0],r=c[1],s=c[2],t=c[3];for(let a=0;a<20;a+=2)m=m+(q=y(q^(e=e+i|0),16))|0,e=e+(i=y(i^m,12))|0,m=m+(q=y(q^e,8))|0,i=y(i^m,7),n=n+(r=y(r^(f=f+j|0),16))|0,f=f+(j=y(j^n,12))|0,n=n+(r=y(r^f,8))|0,j=y(j^n,7),o=o+(s=y(s^(g=g+k|0),16))|0,g=g+(k=y(k^o,12))|0,o=o+(s=y(s^g,8))|0,k=y(k^o,7),p=p+(t=y(t^(h=h+l|0),16))|0,h=h+(l=y(l^p,12))|0,p=p+(t=y(t^h,8))|0,l=y(l^p,7),o=o+(t=y(t^(e=e+j|0),16))|0,e=e+(j=y(j^o,12))|0,o=o+(t=y(t^e,8))|0,j=y(j^o,7),p=p+(q=y(q^(f=f+k|0),16))|0,f=f+(k=y(k^p,12))|0,p=p+(q=y(q^f,8))|0,k=y(k^p,7),m=m+(r=y(r^(g=g+l|0),16))|0,g=g+(l=y(l^m,12))|0,m=m+(r=y(r^g,8))|0,l=y(l^m,7),n=n+(s=y(s^(h=h+i|0),16))|0,h=h+(i=y(i^n,12))|0,n=n+(s=y(s^h,8))|0,i=y(i^n,7);let u=0;d[u++]=e,d[u++]=f,d[u++]=g,d[u++]=h,d[u++]=q,d[u++]=r,d[u++]=s,d[u++]=t},allowShortKeys:!1}),J=new Uint8Array(16),K=(a,b)=>{a.update(b);let c=b.length%16;c&&a.update(J.subarray(c))},L=new Uint8Array(32);function M(a,b,c,d,f){void 0!==f&&g(f,void 0,"AAD");let h=a(b,c,L),i=function(a,b,c){e(c);let d=new Uint8Array(16),f=new DataView(d.buffer,d.byteOffset,d.byteLength);return f.setBigUint64(0,BigInt(b),c),f.setBigUint64(8,BigInt(a),c),d}(d.length,f?f.length:0,!0),k=F.create(h);f&&K(k,f),K(k,d),k.update(i);let l=k.digest();return j(h,i),l}let N=a=>(b,c,d)=>({encrypt(e,f){let g=e.length;(f=p(g+16,f,!1)).set(e);let h=f.subarray(0,-16);a(b,c,h,h,1);let i=M(a,b,c,h,d);return f.set(i,g),j(i),f},decrypt(e,f){f=p(e.length-16,f,!1);let g=e.subarray(0,-16),h=e.subarray(-16),i=M(a,b,c,g,d);if(!function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}(h,i))throw Error("invalid tag");return f.set(e.subarray(0,-16)),a(b,c,f,f,1),j(i),f}});N(H);let O=((a,b)=>{function c(d,...e){if(g(d,void 0,"key"),!k)throw Error("Non little-endian hardware is not yet supported");void 0!==a.nonceLength&&g(e[0],a.varSizeNonce?void 0:a.nonceLength,"nonce");let f=a.tagLength;f&&void 0!==e[1]&&g(e[1],void 0,"AAD");let h=b(d,...e),i=(a,b)=>{if(void 0!==b){if(2!==a)throw Error("cipher output not supported");g(b,void 0,"output")}},j=!1;return{encrypt(a,b){if(j)throw Error("cannot encrypt() twice with same key + nonce");return j=!0,g(a),i(h.encrypt.length,b),h.encrypt(a,b)},decrypt(a,b){if(g(a),f&&a.length<f)throw Error('"ciphertext" expected length bigger than tagLength='+f);return i(h.decrypt.length,b),h.decrypt(a,b)}}}return Object.assign(c,a),c})({blockSize:64,nonceLength:24,tagLength:16},N(I)),P=async({key:a,data:b})=>{let c=await (0,d.n)("SHA-256").digest(a),e=function(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}(b);return function(a){if(g(a),l)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=m[a[c]];return b}(s(O)(new Uint8Array(c)).encrypt(e))},Q=async({key:a,data:b})=>{let c=await (0,d.n)("SHA-256").digest(a),e=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(l)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=o(a.charCodeAt(e)),f=o(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}(b),f=s(O)(new Uint8Array(c));return new TextDecoder().decode(f.decrypt(e))}},24399:(a,b,c)=>{c.d(b,{k:()=>d});let d=(0,c(94285).q)("a-z","0-9","A-Z","-_")},24598:(a,b,c)=>{c.d(b,{y:()=>d});function d(a){return!!a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof a.then}},26861:(a,b,c)=>{c.d(b,{Aw:()=>i,Di:()=>g});var d=c(67849);c(51678);var e=c(41328);let f=(0,e.Ny)(async()=>({})),g=e.Ny.create({use:[f,(0,e.Ny)(async()=>({}))]}),h=[f];function i(a,b,c){let f="string"==typeof a?a:void 0,g="object"==typeof b?b:a,i="function"==typeof b?b:c;return f?(0,e.UD)(f,{...g,use:[...g?.use||[],...h]},async a=>(0,d.Qs)(a,()=>i(a))):(0,e.UD)({...g,use:[...g?.use||[],...h]},async a=>(0,d.Qs)(a,()=>i(a)))}},27646:(a,b,c)=>{c.d(b,{C:()=>h,g:()=>g});var d=c(39450),e=c(2952),f=c(60353);class g{#q;get dynamicReference(){return this.#q}get refType(){}constructor(a){this.#q=a}toOperationNode(){return(0,e.vd)(this.#q)}}function h(a){return(0,f.Gv)(a)&&(0,d.N)(a)&&(0,f.Kg)(a.dynamicReference)}},27701:(a,b,c)=>{c.d(b,{$:()=>h,Y:()=>g});let d=(a,b="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`);function e(a){return parseInt(a.name.slice(4),10)}function f(a,b){if(b&&!a.usages.includes(b))throw TypeError(`CryptoKey does not support this operation, its usages must include ${b}.`)}function g(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if("HMAC"!==a.algorithm.name)throw d("HMAC");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if("RSASSA-PKCS1-v1_5"!==a.algorithm.name)throw d("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if("RSA-PSS"!==a.algorithm.name)throw d("RSA-PSS");let c=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if("Ed25519"!==a.algorithm.name)throw d("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":let g;if(g=a.algorithm,g.name!==b)throw d(b);break;case"ES256":case"ES384":case"ES512":{if("ECDSA"!==a.algorithm.name)throw d("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw d(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,c)}function h(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==a.algorithm.name)throw d("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==a.algorithm.name)throw d("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw d("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==a.algorithm.name)throw d("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==a.algorithm.name)throw d("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(e(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,c)}},28244:(a,b,c)=>{c.d(b,{K:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"OrNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"OrNode",left:a,right:b})})},31009:(a,b,c)=>{c.d(b,{Z:()=>f});var d=c(60353),e=c(81266);let f=(0,d.CN)({is:a=>"ColumnNode"===a.kind,create:a=>(0,d.CN)({kind:"ColumnNode",column:e.O.create(a)})})},31575:(a,b,c)=>{c.d(b,{z:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"RawNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"RawNode",sqlFragments:(0,d.CN)(a),parameters:(0,d.CN)(b)}),createWithSql:a=>e.create([a],[]),createWithChild:a=>e.create(["",""],[a]),createWithChildren:a=>e.create(Array(a.length+1).fill(""),a)})},31700:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(96931);function e(){return new f}class f{#r;get queryId(){return void 0===this.#r&&(this.#r=(0,d.D)(8)),this.#r}}},32712:(a,b,c)=>{c.d(b,{G:()=>d});function d(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},33164:(a,b,c)=>{c.d(b,{$4:()=>p,BT:()=>o,Dm:()=>n,Dp:()=>l,Rb:()=>g,T0:()=>h,Ye:()=>k,_L:()=>m,aA:()=>j,h2:()=>r,i4:()=>d,ie:()=>e,n:()=>f,xO:()=>i,xb:()=>q});class d extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class e extends d{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class f extends d{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class g extends d{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class h extends d{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class i extends d{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class j extends d{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class k extends d{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class l extends d{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class m extends d{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class n extends d{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class o extends d{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class p extends d{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class q extends d{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class r extends d{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}},33423:(a,b,c)=>{c.d(b,{t:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"WhenNode"===a.kind,create:a=>(0,d.CN)({kind:"WhenNode",condition:a}),cloneWithResult:(a,b)=>(0,d.CN)({...a,result:b})})},33679:(a,b,c)=>{c.d(b,{a:()=>e});let d=new Map,e={decode:(a,b="utf-8")=>(d.has(b)||d.set(b,new TextDecoder(b)),d.get(b).decode(a)),encode:new TextEncoder().encode}},33999:(a,b,c)=>{c.d(b,{M3:()=>g,W2:()=>f,ll:()=>e,t9:()=>h});var d=c(32712);let e=a=>(0,d.G)(a)&&"string"==typeof a.kty,f=a=>"oct"!==a.kty&&("AKP"===a.kty&&"string"==typeof a.priv||"string"==typeof a.d),g=a=>"oct"!==a.kty&&void 0===a.d&&void 0===a.priv,h=a=>"oct"===a.kty&&"string"==typeof a.k},34186:(a,b,c)=>{c.d(b,{j:()=>f});var d=c(27701),e=c(41330);async function f(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError((0,e.X)(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return(0,d.Y)(b,a,c),b}},34220:(a,b,c)=>{c.d(b,{l:()=>r});var d=c(81266),e=c(39450),f=c(31575),g=c(90350),h=c(2952),i=c(19795),j=c(82324),k=c(31700),l=c(44625),m=c(60353),n=c(22795);class o{#s;constructor(a){this.#s=(0,m.CN)(a)}get expressionType(){}get isRawBuilder(){return!0}as(a){return new q(this,a)}$castTo(){return new o({...this.#s})}$notNull(){return new o(this.#s)}withPlugin(a){return new o({...this.#s,plugins:void 0!==this.#s.plugins?(0,m.CN)([...this.#s.plugins,a]):(0,m.CN)([a])})}toOperationNode(){return this.#t(this.#u())}compile(a){return this.#v(this.#u(a))}async execute(a){let b=this.#u(a);return b.executeQuery(this.#v(b))}#u(a){let b=void 0!==a?a.getExecutor():n.W;return void 0!==this.#s.plugins?b.withPlugins(this.#s.plugins):b}#t(a){return a.transformQuery(this.#s.rawNode,this.#s.queryId)}#v(a){return a.compileQuery(this.#t(a),this.#s.queryId)}}function p(a){return new o(a)}class q{#w;#p;constructor(a,b){this.#w=a,this.#p=b}get expression(){return this.#w}get alias(){return this.#p}get rawBuilder(){return this.#w}toOperationNode(){return l.N.create(this.#w.toOperationNode(),(0,e.N)(this.#p)?this.#p.toOperationNode():d.O.create(this.#p))}}let r=Object.assign((a,...b)=>p({queryId:(0,k.a)(),rawNode:f.z.create(a,b?.map(s)??[])}),{ref:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,h.q5)(a))}),val:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,j.$s)(a))}),value(a){return this.val(a)},table:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,i.M$)(a))}),id(...a){let b=Array(a.length+1).fill(".");return b[0]="",b[b.length-1]="",p({queryId:(0,k.a)(),rawNode:f.z.create(b,a.map(d.O.create))})},lit:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild(g.q.createImmediate(a))}),literal(a){return this.lit(a)},raw:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithSql(a)}),join(a,b=r`, `){let c=Array(Math.max(2*a.length-1,0)),d=b.toOperationNode();for(let b=0;b<a.length;++b)c[2*b]=s(a[b]),b!==a.length-1&&(c[2*b+1]=d);return p({queryId:(0,k.a)(),rawNode:f.z.createWithChildren(c)})}});function s(a){return(0,e.N)(a)?a.toOperationNode():(0,j.$s)(a)}},35537:(a,b,c)=>{c.d(b,{q:()=>d,$:()=>e}),c(2816);let d={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",CROSS_SITE_NAVIGATION_LOGIN_BLOCKED:"Cross-site navigation login blocked. This request appears to be a CSRF attack.",VERIFICATION_EMAIL_NOT_ENABLED:"Verification email isn't enabled",EMAIL_ALREADY_VERIFIED:"Email is already verified",EMAIL_MISMATCH:"Email mismatch",SESSION_NOT_FRESH:"Session is not fresh",LINKED_ACCOUNT_ALREADY_EXISTS:"Linked account already exists",INVALID_ORIGIN:"Invalid origin",INVALID_CALLBACK_URL:"Invalid callbackURL",INVALID_REDIRECT_URL:"Invalid redirectURL",INVALID_ERROR_CALLBACK_URL:"Invalid errorCallbackURL",INVALID_NEW_USER_CALLBACK_URL:"Invalid newUserCallbackURL",MISSING_OR_NULL_ORIGIN:"Missing or null Origin",CALLBACK_URL_REQUIRED:"callbackURL is required",FAILED_TO_CREATE_VERIFICATION:"Unable to create verification",FIELD_NOT_ALLOWED:"Field not allowed to be set",ASYNC_VALIDATION_NOT_SUPPORTED:"Async validation is not supported",VALIDATION_ERROR:"Validation Error",MISSING_FIELD:"Field is required"};var e=class extends Error{constructor(a,b){super(a,b),this.name="BetterAuthError",this.message=a,this.stack=""}}},36903:(a,b,c)=>{c.d(b,{f:()=>f});var d=c(60353);let e=(0,d.CN)({is:a=>"TopNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"TopNode",expression:a,modifiers:b})});function f(a,b){var c;if(!(0,d.Et)(a)&&!(0,d.sI)(a))throw Error(`Invalid top expression: ${a}`);if(!(0,d.b0)(b)&&"percent"!==(c=b)&&"with ties"!==c&&"percent with ties"!==c)throw Error(`Invalid top modifiers: ${b}`);return e.create(a,b)}},36923:(a,b,c)=>{c.d(b,{y:()=>f});var d=c(60353),e=c(81266);let f=(0,d.CN)({is:a=>"SchemableIdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"SchemableIdentifierNode",identifier:e.O.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"SchemableIdentifierNode",schema:e.O.create(a),identifier:e.O.create(b)})})},37161:(a,b,c)=>{let d,e,f,g;c.d(b,{li:()=>cD});var h={};c.r(h),c.d(h,{$brand:()=>m.$brand,$input:()=>m.$input,$output:()=>m.$output,NEVER:()=>m.NEVER,TimePrecision:()=>m.TimePrecision,ZodAny:()=>m.ZodAny,ZodArray:()=>m.ZodArray,ZodBase64:()=>m.ZodBase64,ZodBase64URL:()=>m.ZodBase64URL,ZodBigInt:()=>m.ZodBigInt,ZodBigIntFormat:()=>m.ZodBigIntFormat,ZodBoolean:()=>m.ZodBoolean,ZodCIDRv4:()=>m.ZodCIDRv4,ZodCIDRv6:()=>m.ZodCIDRv6,ZodCUID:()=>m.ZodCUID,ZodCUID2:()=>m.ZodCUID2,ZodCatch:()=>m.ZodCatch,ZodCodec:()=>m.ZodCodec,ZodCustom:()=>m.ZodCustom,ZodCustomStringFormat:()=>m.ZodCustomStringFormat,ZodDate:()=>m.ZodDate,ZodDefault:()=>m.ZodDefault,ZodDiscriminatedUnion:()=>m.ZodDiscriminatedUnion,ZodE164:()=>m.ZodE164,ZodEmail:()=>m.ZodEmail,ZodEmoji:()=>m.ZodEmoji,ZodEnum:()=>m.ZodEnum,ZodError:()=>m.ZodError,ZodExactOptional:()=>m.ZodExactOptional,ZodFile:()=>m.ZodFile,ZodFirstPartyTypeKind:()=>m.ZodFirstPartyTypeKind,ZodFunction:()=>m.ZodFunction,ZodGUID:()=>m.ZodGUID,ZodIPv4:()=>m.ZodIPv4,ZodIPv6:()=>m.ZodIPv6,ZodISODate:()=>m.ZodISODate,ZodISODateTime:()=>m.ZodISODateTime,ZodISODuration:()=>m.ZodISODuration,ZodISOTime:()=>m.ZodISOTime,ZodIntersection:()=>m.ZodIntersection,ZodIssueCode:()=>m.ZodIssueCode,ZodJWT:()=>m.ZodJWT,ZodKSUID:()=>m.ZodKSUID,ZodLazy:()=>m.ZodLazy,ZodLiteral:()=>m.ZodLiteral,ZodMAC:()=>m.ZodMAC,ZodMap:()=>m.ZodMap,ZodNaN:()=>m.ZodNaN,ZodNanoID:()=>m.ZodNanoID,ZodNever:()=>m.ZodNever,ZodNonOptional:()=>m.ZodNonOptional,ZodNull:()=>m.ZodNull,ZodNullable:()=>m.ZodNullable,ZodNumber:()=>m.ZodNumber,ZodNumberFormat:()=>m.ZodNumberFormat,ZodObject:()=>m.ZodObject,ZodOptional:()=>m.ZodOptional,ZodPipe:()=>m.ZodPipe,ZodPrefault:()=>m.ZodPrefault,ZodPromise:()=>m.ZodPromise,ZodReadonly:()=>m.ZodReadonly,ZodRealError:()=>m.ZodRealError,ZodRecord:()=>m.ZodRecord,ZodSet:()=>m.ZodSet,ZodString:()=>m.ZodString,ZodStringFormat:()=>m.ZodStringFormat,ZodSuccess:()=>m.ZodSuccess,ZodSymbol:()=>m.ZodSymbol,ZodTemplateLiteral:()=>m.ZodTemplateLiteral,ZodTransform:()=>m.ZodTransform,ZodTuple:()=>m.ZodTuple,ZodType:()=>m.ZodType,ZodULID:()=>m.ZodULID,ZodURL:()=>m.ZodURL,ZodUUID:()=>m.ZodUUID,ZodUndefined:()=>m.ZodUndefined,ZodUnion:()=>m.ZodUnion,ZodUnknown:()=>m.ZodUnknown,ZodVoid:()=>m.ZodVoid,ZodXID:()=>m.ZodXID,ZodXor:()=>m.ZodXor,_ZodString:()=>m._ZodString,_default:()=>m._default,_function:()=>m._function,any:()=>m.any,array:()=>m.array,base64:()=>m.base64,base64url:()=>m.base64url,bigint:()=>m.bigint,boolean:()=>m.boolean,catch:()=>m.catch,check:()=>m.check,cidrv4:()=>m.cidrv4,cidrv6:()=>m.cidrv6,clone:()=>m.clone,codec:()=>m.codec,coerce:()=>m.coerce,config:()=>m.config,core:()=>m.core,cuid:()=>m.cuid,cuid2:()=>m.cuid2,custom:()=>m.custom,date:()=>m.date,decode:()=>m.decode,decodeAsync:()=>m.decodeAsync,default:()=>ag,describe:()=>m.describe,discriminatedUnion:()=>m.discriminatedUnion,e164:()=>m.e164,email:()=>m.email,emoji:()=>m.emoji,encode:()=>m.encode,encodeAsync:()=>m.encodeAsync,endsWith:()=>m.endsWith,enum:()=>m.enum,exactOptional:()=>m.exactOptional,file:()=>m.file,flattenError:()=>m.flattenError,float32:()=>m.float32,float64:()=>m.float64,formatError:()=>m.formatError,fromJSONSchema:()=>m.fromJSONSchema,function:()=>m.function,getErrorMap:()=>m.getErrorMap,globalRegistry:()=>m.globalRegistry,gt:()=>m.gt,gte:()=>m.gte,guid:()=>m.guid,hash:()=>m.hash,hex:()=>m.hex,hostname:()=>m.hostname,httpUrl:()=>m.httpUrl,includes:()=>m.includes,instanceof:()=>m.instanceof,int:()=>m.int,int32:()=>m.int32,int64:()=>m.int64,intersection:()=>m.intersection,ipv4:()=>m.ipv4,ipv6:()=>m.ipv6,iso:()=>m.iso,json:()=>m.json,jwt:()=>m.jwt,keyof:()=>m.keyof,ksuid:()=>m.ksuid,lazy:()=>m.lazy,length:()=>m.length,literal:()=>m.literal,locales:()=>m.locales,looseObject:()=>m.looseObject,looseRecord:()=>m.looseRecord,lowercase:()=>m.lowercase,lt:()=>m.lt,lte:()=>m.lte,mac:()=>m.mac,map:()=>m.map,maxLength:()=>m.maxLength,maxSize:()=>m.maxSize,meta:()=>m.meta,mime:()=>m.mime,minLength:()=>m.minLength,minSize:()=>m.minSize,multipleOf:()=>m.multipleOf,nan:()=>m.nan,nanoid:()=>m.nanoid,nativeEnum:()=>m.nativeEnum,negative:()=>m.negative,never:()=>m.never,nonnegative:()=>m.nonnegative,nonoptional:()=>m.nonoptional,nonpositive:()=>m.nonpositive,normalize:()=>m.normalize,null:()=>m.null,nullable:()=>m.nullable,nullish:()=>m.nullish,number:()=>m.number,object:()=>m.object,optional:()=>m.optional,overwrite:()=>m.overwrite,parse:()=>m.parse,parseAsync:()=>m.parseAsync,partialRecord:()=>m.partialRecord,pipe:()=>m.pipe,positive:()=>m.positive,prefault:()=>m.prefault,preprocess:()=>m.preprocess,prettifyError:()=>m.prettifyError,promise:()=>m.promise,property:()=>m.property,readonly:()=>m.readonly,record:()=>m.record,refine:()=>m.refine,regex:()=>m.regex,regexes:()=>m.regexes,registry:()=>m.registry,safeDecode:()=>m.safeDecode,safeDecodeAsync:()=>m.safeDecodeAsync,safeEncode:()=>m.safeEncode,safeEncodeAsync:()=>m.safeEncodeAsync,safeParse:()=>m.safeParse,safeParseAsync:()=>m.safeParseAsync,set:()=>m.set,setErrorMap:()=>m.setErrorMap,size:()=>m.size,slugify:()=>m.slugify,startsWith:()=>m.startsWith,strictObject:()=>m.strictObject,string:()=>m.string,stringFormat:()=>m.stringFormat,stringbool:()=>m.stringbool,success:()=>m.success,superRefine:()=>m.superRefine,symbol:()=>m.symbol,templateLiteral:()=>m.templateLiteral,toJSONSchema:()=>m.toJSONSchema,toLowerCase:()=>m.toLowerCase,toUpperCase:()=>m.toUpperCase,transform:()=>m.transform,treeifyError:()=>m.treeifyError,trim:()=>m.trim,tuple:()=>m.tuple,uint32:()=>m.uint32,uint64:()=>m.uint64,ulid:()=>m.ulid,undefined:()=>m.undefined,union:()=>m.union,unknown:()=>m.unknown,uppercase:()=>m.uppercase,url:()=>m.url,util:()=>m.util,uuid:()=>m.uuid,uuidv4:()=>m.uuidv4,uuidv6:()=>m.uuidv6,uuidv7:()=>m.uuidv7,void:()=>m.void,xid:()=>m.xid,xor:()=>m.xor,z:()=>m});var i=c(24399),j=c(24386),k=c(44161),l=c(35537),m=c(49764);let n=m.looseObject({callbackURL:m.string(),codeVerifier:m.string(),errorURL:m.string().optional(),newUserURL:m.string().optional(),expiresAt:m.number(),link:m.object({email:m.string(),userId:m.coerce.string()}).optional(),requestSignUp:m.boolean().optional()});var o=class extends l.${code;details;constructor(a,b){super(a,b),this.code=b.code,this.details=b.details}};async function p(a,b,c){let d=(0,i.k)(32);if("cookie"===a.context.oauthConfig.storeStateStrategy){let e=await (0,j.vX)({key:a.context.secret,data:JSON.stringify(b)}),f=a.context.createAuthCookie(c?.cookieName??"oauth_state",{maxAge:600});return a.setCookie(f.name,e,f.attributes),{state:d,codeVerifier:b.codeVerifier}}let e=a.context.createAuthCookie(c?.cookieName??"state",{maxAge:300});await a.setSignedCookie(e.name,d,a.context.secret,e.attributes);let f=new Date;f.setMinutes(f.getMinutes()+10);let g=await a.context.internalAdapter.createVerificationValue({value:JSON.stringify(b),identifier:d,expiresAt:f});if(!g)throw new o("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database",{code:"state_generation_error"});return{state:g.identifier,codeVerifier:b.codeVerifier}}async function q(a,b,c){let d;if("cookie"===a.context.oauthConfig.storeStateStrategy){let e=a.context.createAuthCookie(c?.cookieName??"oauth_state"),f=a.getCookie(e.name);if(!f)throw new o("State mismatch: auth state cookie not found",{code:"state_mismatch",details:{state:b}});try{let b=await (0,j.zp)({key:a.context.secret,data:f});d=n.parse(JSON.parse(b))}catch(a){throw new o("State invalid: Failed to decrypt or parse auth state",{code:"state_invalid",details:{state:b},cause:a})}(0,k.Aj)(a,e)}else{let e=await a.context.internalAdapter.findVerificationValue(b);if(!e)throw new o("State mismatch: verification not found",{code:"state_mismatch",details:{state:b}});d=n.parse(JSON.parse(e.value));let f=a.context.createAuthCookie(c?.cookieName??"state"),g=await a.getSignedCookie(f.name,a.context.secret);if(!a.context.oauthConfig.skipStateCookieCheck&&(!g||g!==b))throw new o("State mismatch: State not persisted correctly",{code:"state_security_mismatch",details:{state:b}});(0,k.Aj)(a,f),await a.context.internalAdapter.deleteVerificationValue(e.id)}if(d.expiresAt<Date.now())throw new o("Invalid state: request expired",{code:"state_mismatch",details:{expiresAt:d.expiresAt}});return d}var r=c(51678);let{get:s,set:t}=(0,r.sL)(()=>null);var u=c(41328);async function v(a,b,c){let d=a.body?.callbackURL||a.context.options.baseURL;if(!d)throw new u.LG("BAD_REQUEST",{message:"callbackURL is required"});let e=(0,i.k)(128),f={...c||{},callbackURL:d,codeVerifier:e,errorURL:a.body?.errorCallbackURL,newUserURL:a.body?.newUserCallbackURL,link:b,expiresAt:Date.now()+6e5,requestSignUp:a.body?.requestSignUp};await t(f);try{return p(a,f)}catch(b){throw a.context.logger.error("Failed to create verification",b),new u.LG("INTERNAL_SERVER_ERROR",{message:"Unable to create verification",cause:b})}}async function w(a){let b,c=a.query.state||a.body.state,d=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;try{b=await q(a,c)}catch(b){if(a.context.logger.error("Failed to parse state",b),b instanceof o&&"state_security_mismatch"===b.code)throw a.redirect(`${d}?error=state_mismatch`);throw a.redirect(`${d}?error=please_restart_the_process`)}return b.errorURL||(b.errorURL=d),b&&await t(b),b}let x={scope:"server"};var y=c(2816),z=c(97960);function A(a,b){if(b.advanced?.ipAddress?.disableIpTracking)return null;let c="headers"in a?a.headers:a;for(let a of b.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let d="get"in c?c.get(a):c[a];if("string"==typeof d){let a=d.split(",")[0].trim();if((0,y.mY)(a))return(0,y.Ll)(a,{ipv6Subnet:b.advanced?.ipAddress?.ipv6Subnet})}}return(0,z.Nu)()||(0,z.yz)()?"127.0.0.1":null}function B(a,b="/api/auth"){try{let b=new URL(a);if("http:"!==b.protocol&&"https:"!==b.protocol)throw new l.$(`Invalid base URL: ${a}. URL must include 'http://' or 'https://'`)}catch(b){if(b instanceof l.$)throw b;throw new l.$(`Invalid base URL: ${a}. Please provide a valid base URL.`,{cause:b})}if(function(a){try{return"/"!==(new URL(a).pathname.replace(/\/+$/,"")||"/")}catch{throw new l.$(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a))return a;let c=a.replace(/\/+$/,"");return b&&"/"!==b?(b=b.startsWith("/")?b:`/${b}`,`${c}${b}`):c}function C(a,b){return!!a&&""!==a.trim()&&("proto"===b?"http"===a||"https"===a:"host"===b&&![/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(b=>b.test(a))&&(/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(a)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test(a)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test(a)||/^localhost(:[0-9]{1,5})?$/i.test(a)))}function D(a,b,c,d,e){if(a)return B(a,b);if(!1!==d){let a=z._K.BETTER_AUTH_URL||z._K.NEXT_PUBLIC_BETTER_AUTH_URL||z._K.PUBLIC_BETTER_AUTH_URL||z._K.NUXT_PUBLIC_BETTER_AUTH_URL||z._K.NUXT_PUBLIC_AUTH_URL||("/"!==z._K.BASE_URL?z._K.BASE_URL:void 0);if(a)return B(a,b)}let f=c?.headers.get("x-forwarded-host"),g=c?.headers.get("x-forwarded-proto");if(f&&g&&e&&C(g,"proto")&&C(f,"host"))try{return B(`${g}://${f}`,b)}catch(a){}if(c){let a=E(c.url);if(!a)throw new l.$("Could not get origin from request. Please provide a valid base URL.");return B(a,b)}if("undefined"!=typeof window&&window.location)return B(window.location.origin,b)}function E(a){try{let b=new URL(a);return"null"===b.origin?null:b.origin}catch{return null}}function F(a){return"-"===a||"^"===a||"$"===a||"+"===a||"."===a||"("===a||")"===a||"|"===a||"["===a||"]"===a||"{"===a||"}"===a||"*"===a||"?"===a||"\\"===a?`\\${a}`:a}function G(a,b){if("string"!=typeof b)throw TypeError(`Sample must be a string, but ${typeof b} given`);return a.test(b)}function H(a,b){if("string"!=typeof a&&!Array.isArray(a))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof a} given`);if(("string"==typeof b||"boolean"==typeof b)&&(b={separator:b}),2==arguments.length&&!(void 0===b||"object"==typeof b&&null!==b&&!Array.isArray(b)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof b} given`);if("\\"===(b=b||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let c=function a(b,c=!0){if(Array.isArray(b))return`(?:${b.map(b=>`^${a(b,c)}$`).join("|")})`;let d="",e="",f=".";!0===c?(d="/",e="[/\\\\]",f="[^/\\\\]"):c&&((e=function(a){let b="";for(let c=0;c<a.length;c++)b+=F(a[c]);return b}(d=c)).length>1?(e=`(?:${e})`,f=`((?!${e}).)`):f=`[^${e}]`);let g=c?`${e}+?`:"",h=c?`${e}*?`:"",i=c?b.split(d):[b],j="";for(let a=0;a<i.length;a++){let b=i[a],d=i[a+1],e="";if(b||!(a>0)){if(c&&(e=a===i.length-1?h:"**"!==d?g:""),c&&"**"===b){e&&(j+=0===a?"":e,j+=`(?:${f}*?${e})*?`);continue}for(let a=0;a<b.length;a++){let c=b[a];"\\"===c?a<b.length-1&&(j+=F(b[a+1]),a++):"?"===c?j+=f:"*"===c?j+=`${f}*?`:j+=F(c)}j+=e}}return j}(a,b.separator),d=RegExp(`^${c}$`,b.flags),e=G.bind(null,d);return e.options=b,e.pattern=a,e.regexp=d,e}let I=(a,b,c)=>{if(a.startsWith("/"))return!!c?.allowRelativePaths&&a.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(a);if(b.includes("*")||b.includes("?")){if(b.includes("://"))return H(b)(E(a)||a);let c=function(a){try{return new URL(a).host}catch{return null}}(a);return!!c&&H(b)(c)}let d=function(a){try{return new URL(a).protocol}catch{return null}}(a);return"http:"!==d&&"https:"!==d&&d?a.startsWith(b):b===E(a)};var J=c(26861);function K(a){return!0===a.context.skipOriginCheck&&a.context.options.advanced?.disableCSRFCheck===void 0}let L=(0,y.CI)(function(){},"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config."),M=(0,J.Di)(async a=>{if(a.request?.method==="GET"||a.request?.method==="OPTIONS"||a.request?.method==="HEAD"||!a.request||(await O(a),a.context.skipOriginCheck))return;let{body:b,query:c}=a,d=b?.callbackURL||c?.callbackURL,e=b?.redirectTo,f=b?.errorCallbackURL,g=b?.newUserCallbackURL,h=(b,c)=>{if(b&&!a.context.isTrustedOrigin(b,{allowRelativePaths:"origin"!==c}))throw a.context.logger.error(`Invalid ${c}: ${b}`),a.context.logger.info(`If it's a valid URL, please add ${b} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${a.context.trustedOrigins}`),new u.LG("FORBIDDEN",{message:`Invalid ${c}`})};d&&h(d,"callbackURL"),e&&h(e,"redirectURL"),f&&h(f,"errorCallbackURL"),g&&h(g,"newUserCallbackURL")}),N=a=>(0,J.Di)(async b=>{if(!b.request||b.context.skipOriginCheck)return;let c=a(b),d=(a,c)=>{if(a&&!b.context.isTrustedOrigin(a,{allowRelativePaths:"origin"!==c}))throw b.context.logger.error(`Invalid ${c}: ${a}`),b.context.logger.info(`If it's a valid URL, please add ${a} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${b.context.trustedOrigins}`),new u.LG("FORBIDDEN",{message:`Invalid ${c}`})};for(let a of Array.isArray(c)?c:[c])d(a,"callbackURL")});async function O(a,b=!1){let c=a.request?.headers;if(!c||!a.request)return;let d=c.get("origin")||c.get("referer")||"",e=c.has("cookie");if(a.context.skipCSRFCheck)return;if(K(a)){a.context.options.advanced?.disableOriginCheck===!0&&L();return}let f=a.context.skipOriginCheck;if(Array.isArray(f))try{let b=new URL(a.context.baseURL).pathname,c=(0,y.Wi)(a.request.url,b);if(f.some(a=>c.startsWith(a)))return}catch{}if(!(b||e))return;if(!d||"null"===d)throw new u.LG("FORBIDDEN",{message:l.q.MISSING_OR_NULL_ORIGIN});let g=Array.isArray(a.context.options.trustedOrigins)?a.context.trustedOrigins:[...a.context.trustedOrigins,...(await a.context.options.trustedOrigins?.(a.request))?.filter(a=>!!a)||[]];if(!g.some(a=>I(d,a)))throw a.context.logger.error(`Invalid origin: ${d}`),a.context.logger.info(`If it's a valid URL, please add ${d} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${g}`),new u.LG("FORBIDDEN",{message:"Invalid origin"})}let P=(0,J.Di)(async a=>{a.request&&await Q(a)});async function Q(a){let b=a.request;if(!b||a.context.skipCSRFCheck||K(a))return;let c=b.headers;if(c.has("cookie"))return await O(a);let d=c.get("Sec-Fetch-Site"),e=c.get("Sec-Fetch-Mode"),f=c.get("Sec-Fetch-Dest");if(d&&d.trim()||e&&e.trim()||f&&f.trim()){if("cross-site"===d&&"navigate"===e)throw a.context.logger.error("Blocked cross-site navigation login attempt (CSRF protection)",{secFetchSite:d,secFetchMode:e,secFetchDest:f}),new u.LG("FORBIDDEN",{message:l.q.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED});return await O(a,!0)}}let R=new Map;async function S(a,b){if(!b.rateLimit.enabled)return;let c=new URL(b.baseURL).pathname,d=(0,y.Wi)(a.url,c),e=b.rateLimit.window,f=b.rateLimit.max,g=A(a,b.options);if(!g)return;let h=(0,y.JW)(g,d),i=[{pathMatcher:a=>a.startsWith("/sign-in")||a.startsWith("/sign-up")||a.startsWith("/change-password")||a.startsWith("/change-email"),window:10,max:3}].find(a=>a.pathMatcher(d));for(let a of(i&&(e=i.window,f=i.max),b.options.plugins||[]))if(a.rateLimit){let b=a.rateLimit.find(a=>a.pathMatcher(d));if(b){e=b.window,f=b.max;break}}if(b.rateLimit.customRules){let c=Object.keys(b.rateLimit.customRules).find(a=>a.includes("*")?H(a)(d):a===d);if(c){let d=b.rateLimit.customRules[c],g="function"==typeof d?await d(a,{window:e,max:f}):d;if(g&&(e=g.window,f=g.max),!1===g)return}}let j=function(a,b){if(a.options.rateLimit?.customStorage)return a.options.rateLimit.customStorage;let c=a.rateLimit.storage;if("secondary-storage"===c)return{get:async b=>{let c=await a.options.secondaryStorage?.get(b);return c?(0,y.$l)(c):null},set:async(c,d,e)=>{let f=b?.window??a.options.rateLimit?.window??10;await a.options.secondaryStorage?.set?.(c,JSON.stringify(d),f)}};if("memory"===c)return{async get(a){let b=R.get(a);return b?Date.now()>=b.expiresAt?(R.delete(a),null):b.data:null},async set(c,d,e){let f=b?.window??a.options.rateLimit?.window??10,g=Date.now()+1e3*f;R.set(c,{data:d,expiresAt:g})}};let d="rateLimit",e=a.adapter;return{get:async a=>{let b=(await e.findMany({model:d,where:[{field:"key",value:a}]}))[0];return"bigint"==typeof b?.lastRequest&&(b.lastRequest=Number(b.lastRequest)),b},set:async(b,c,f)=>{try{f?await e.updateMany({model:d,where:[{field:"key",value:b}],update:{count:c.count,lastRequest:c.lastRequest}}):await e.create({model:d,data:{key:b,count:c.count,lastRequest:c.lastRequest}})}catch(b){a.logger.error("Error setting rate limit",b)}}}}(b,{window:e}),k=await j.get(h),l=Date.now();if(k){var m,n,o,p;let a=l-k.lastRequest;if(m=f,n=e,o=k,Date.now()-o.lastRequest<1e3*n&&o.count>=m){return p=Math.ceil((k.lastRequest+1e3*e-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":p.toString()}})}a>1e3*e?await j.set(h,{...k,count:1,lastRequest:l},!0):await j.set(h,{...k,count:k.count+1,lastRequest:l},!0)}else await j.set(h,{key:h,count:1,lastRequest:l})}var T=c(11934),U=c(5964),V=Object.defineProperty,W=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertyNames,Y=Object.prototype.hasOwnProperty,Z=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(var e,f=X(b),g=0,h=f.length;g<h;g++)e=f[g],Y.call(a,e)||e===c||V(a,e,{get:(a=>b[a]).bind(null,e),enumerable:!(d=W(b,e))||d.enumerable});return a},$=c(17317);async function _(a,b){let d;if(a.database)d="function"==typeof a.database?a.database(a):await b(a);else{let b=Object.keys((0,$.getAuthTables)(a)).reduce((a,b)=>(a[b]=[],a),{}),{memoryAdapter:e}=await c.e(123).then(c.bind(c,63123));d=e(b)(a)}return d.transaction||(z.vF.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),d.transaction=async a=>a(d)),d}async function aa(a){return _(a,async a=>{let{createKyselyAdapter:b}=await c.e(545).then(c.bind(c,41545)),{kysely:d,databaseType:e,transaction:f}=await b(a);if(!d)throw new l.$("Failed to initialize database adapter");let{kyselyAdapter:g}=await c.e(545).then(c.bind(c,41545));return g(d,{type:e||"sqlite",debugLogs:!!a.database&&"debugLogs"in a.database&&a.database.debugLogs,transaction:f})(a)})}let ab=(a,b)=>({type:a,...b});function ac(a,b){let c=b.id?{id:b.id}:{};for(let d in a){let e=a[d],f=b[d];void 0!==f&&(c[e.fieldName||d]=f)}return c}function ad(a,b){if(!b)return null;let c={id:b.id};for(let[d,e]of Object.entries(a))c[d]=b[e.fieldName||d];return c}function ae(a,b){let c=b.hooks;return{createWithHooks:async function(b,d,e){let f=await (0,r.xA)().catch(()=>null),g=b;for(let a of c||[]){let b=a[d]?.create?.before;if(b){let a=await b(g,f);if(!1===a)return null;"object"==typeof a&&"data"in a&&(g={...g,...a.data})}}let h=e?await e.fn(g):null,i=!e||e.executeMainFn?await (await (0,r.d3)(a)).create({model:d,data:g,forceAllowId:!0}):h;for(let a of c||[]){let b=a[d]?.create?.after;b&&await b(i,f)}return i},updateWithHooks:async function(b,d,e,f){let g=await (0,r.xA)().catch(()=>null),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,r.d3)(a)).update({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},updateManyWithHooks:async function(b,d,e,f){let g=await (0,r.xA)().catch(()=>null),h=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=f?await f.fn(h):null,j=!f||f.executeMainFn?await (await (0,r.d3)(a)).updateMany({model:e,update:h,where:d}):i;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(j,g)}return j},deleteWithHooks:async function(b,d,e){let f=await (0,r.xA)().catch(()=>null),g=null;try{g=(await (await (0,r.d3)(a)).findMany({model:d,where:b,limit:1}))[0]||null}catch{}if(g)for(let a of c||[]){let b=a[d]?.delete?.before;if(b&&await b(g,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,r.d3)(a)).delete({model:d,where:b}):h;if(g)for(let a of c||[]){let b=a[d]?.delete?.after;b&&await b(g,f)}return i},deleteManyWithHooks:async function(b,d,e){let f=await (0,r.xA)().catch(()=>null),g=[];try{g=await (await (0,r.d3)(a)).findMany({model:d,where:b})}catch{}for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.before;if(c&&await c(a,f)===!1)return null}let h=e?await e.fn(b):null,i=!e||e.executeMainFn?await (await (0,r.d3)(a)).deleteMany({model:d,where:b}):h;for(let a of g)for(let b of c||[]){let c=b[d]?.delete?.after;c&&await c(a,f)}return i}}}let af=(a,b)=>{let c=b.logger,d=b.options,e=d.secondaryStorage,f=d.session?.expiresIn||604800,{createWithHooks:g,updateWithHooks:h,updateManyWithHooks:i,deleteWithHooks:j,deleteManyWithHooks:k}=ae(a,b);async function l(a){if(!e)return;let b=await e.get(`active-sessions-${a.id}`);if(!b)return;let c=Date.now(),d=((0,y.$l)(b)||[]).filter(a=>a.expiresAt>c);await Promise.all(d.map(async({token:b})=>{let d=await e.get(b);if(!d)return;let f=(0,y.$l)(d);if(!f)return;let g=Math.max(Math.floor(new Date(f.session.expiresAt).getTime()-c)/1e3,0);await e.set(b,JSON.stringify({session:f.session,user:a}),Math.floor(g))}))}return{createOAuthUser:async(b,c)=>(0,r.iD)(a,async()=>{let a=await g({createdAt:new Date,updatedAt:new Date,...b},"user",void 0);return{user:a,account:await g({...c,userId:a.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async a=>await g({createdAt:new Date,updatedAt:new Date,...a,email:a.email?.toLowerCase()},"user",void 0),createAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),listSessions:async c=>{if(e){let a=await e.get(`active-sessions-${c}`);if(!a)return[];let d=(0,y.$l)(a)||[],f=Date.now(),g=new Set,h=[];for(let{token:a,expiresAt:c}of d){if(c<=f||g.has(a))continue;g.add(a);let d=await e.get(a);if(d)try{let a="string"==typeof d?JSON.parse(d):d;if(!a?.session)continue;h.push((0,U.dc)(b.options,{...a.session,expiresAt:new Date(a.session.expiresAt)}))}catch{continue}}return h}return await (await (0,r.d3)(a)).findMany({model:"session",where:[{field:"userId",value:c}]})},listUsers:async(b,c,d,e)=>await (await (0,r.d3)(a)).findMany({model:"user",limit:b,offset:c,sortBy:d,where:e}),countTotalUsers:async b=>{let c=await (await (0,r.d3)(a)).count({model:"user",where:b});return"string"==typeof c?parseInt(c):c},deleteUser:async a=>{(!e||d.session?.storeSessionInDatabase)&&await k([{field:"userId",value:a}],"session",void 0),await k([{field:"userId",value:a}],"account",void 0),await j([{field:"id",value:a}],"user",void 0)},createSession:async(b,c,h,i)=>{let j=await (0,r.xA)().catch(()=>null),k=j?.headers||j?.request?.headers,{id:l,...m}=h||{},n=(0,U.Mn)(j?.context.options??d,{}),o={ipAddress:(j?.request||j?.headers)&&A(j?.request||j?.headers,j?.context.options)||"",userAgent:k?.get("user-agent")||"",...m,expiresAt:c?(0,T.p)(86400,"sec"):(0,T.p)(f,"sec"),userId:b,token:(0,y.$C)(32),createdAt:new Date,updatedAt:new Date,...n,...i?m:{}};return await g(o,"session",e?{fn:async c=>{let d=await e.get(`active-sessions-${b}`),f=[],g=Date.now();d&&(f=(f=(0,y.$l)(d)||[]).filter(a=>a.expiresAt>g&&a.token!==o.token));let h=[...f,{token:o.token,expiresAt:o.expiresAt.getTime()}].sort((a,b)=>a.expiresAt-b.expiresAt),i=Math.max(Math.floor(((h.at(-1)?.expiresAt??o.expiresAt.getTime())-g)/1e3),0);i>0&&await e.set(`active-sessions-${b}`,JSON.stringify(h),i);let j=await a.findOne({model:"user",where:[{field:"id",value:b}]}),k=Math.max(Math.floor((o.expiresAt.getTime()-g)/1e3),0);return k>0&&await e.set(o.token,JSON.stringify({session:c,user:j}),k),c},executeMainFn:d.session?.storeSessionInDatabase}:void 0)},findSession:async c=>{if(e){let a=await e.get(c);if(!a&&!d.session?.storeSessionInDatabase)return null;if(a){let c=(0,y.$l)(a);return c?{session:(0,U.dc)(b.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),user:(0,U.kc)(b.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)})}:null}}let f=await (await (0,r.d3)(a)).findOne({model:"session",where:[{value:c,field:"token"}],join:{user:!0}});if(!f)return null;let{user:g,...h}=f;return g?{session:(0,U.dc)(b.options,h),user:(0,U.kc)(b.options,g)}:null},findSessions:async b=>{if(e){let a=[];for(let c of b){let b=await e.get(c);if(b)try{let c="string"==typeof b?JSON.parse(b):b;if(!c?.session)continue;let d={session:{...c.session,expiresAt:new Date(c.session.expiresAt)},user:{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)}};a.push(d)}catch{continue}}return a}let c=await (await (0,r.d3)(a)).findMany({model:"session",where:[{field:"token",value:b,operator:"in"}],join:{user:!0}});return!c.length||c.some(a=>!a.user)?[]:c.map(a=>{let{user:b,...c}=a;return{session:c,user:b}})},updateSession:async(a,c)=>await h(c,[{field:"token",value:a}],"session",e?{async fn(c){let d=await e.get(a);if(!d)return null;let f=(0,y.$l)(d);if(!f)return null;let g={...f.session,...c,expiresAt:new Date(c.expiresAt??f.session.expiresAt),createdAt:new Date(f.session.createdAt),updatedAt:new Date(c.updatedAt??f.session.updatedAt)},h=(0,U.dc)(b.options,g),i=Date.now(),j=new Date(h.expiresAt).getTime(),k=Math.max(Math.floor((j-i)/1e3),0);if(k>0){await e.set(a,JSON.stringify({session:h,user:f.user}),k);let b=`active-sessions-${h.userId}`,c=await e.get(b),d=(c&&(0,y.$l)(c)||[]).filter(b=>b.token!==a&&b.expiresAt>i).concat([{token:a,expiresAt:j}]).sort((a,b)=>a.expiresAt-b.expiresAt),g=d.at(-1)?.expiresAt;g&&g>i?await e.set(b,JSON.stringify(d),Math.floor((g-i)/1e3)):await e.delete(b)}return h},executeMainFn:d.session?.storeSessionInDatabase}:void 0),deleteSession:async a=>{if(e){let f=await e.get(a);if(f){let{session:b}=(0,y.$l)(f)??{};if(!b)return void c.error("Session not found in secondary storage");let d=b.userId,g=await e.get(`active-sessions-${d}`);if(g){let b=(0,y.$l)(g)||[],c=Date.now(),f=b.filter(b=>b.expiresAt>c&&b.token!==a),h=f.sort((a,b)=>a.expiresAt-b.expiresAt).at(-1)?.expiresAt;f.length>0&&h&&h>Date.now()?await e.set(`active-sessions-${d}`,JSON.stringify(f),Math.floor((h-c)/1e3)):await e.delete(`active-sessions-${d}`)}else c.error("Active sessions list not found in secondary storage")}if(await e.delete(a),!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await j([{field:"token",value:a}],"session",void 0)},deleteAccounts:async a=>{await k([{field:"userId",value:a}],"account",void 0)},deleteAccount:async a=>{await j([{field:"id",value:a}],"account",void 0)},deleteSessions:async a=>{if(e){if("string"==typeof a){let b=await e.get(`active-sessions-${a}`),c=b?(0,y.$l)(b):[];if(!c)return;for(let a of c)await e.delete(a.token);await e.delete(`active-sessions-${a}`)}else for(let b of a)await e.get(b)&&await e.delete(b);if(!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await k([{field:Array.isArray(a)?"token":"userId",value:a,operator:Array.isArray(a)?"in":void 0}],"session",void 0)},findOAuthUser:async(b,c,d)=>{let e=await (await (0,r.d3)(a)).findOne({model:"account",where:[{value:c,field:"accountId"},{value:d,field:"providerId"}],join:{user:!0}});if(e)if(e.user)return{user:e.user,linkedAccount:e,accounts:[e]};else{let c=await (await (0,r.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,linkedAccount:e,accounts:[e]}:null}{let c=await (await (0,r.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,linkedAccount:null,accounts:await (await (0,r.d3)(a)).findMany({model:"account",where:[{value:c.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(b,c)=>{let d=await (await (0,r.d3)(a)).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}],join:{...c?.includeAccounts?{account:!0}:{}}});if(!d)return null;let{account:e,...f}=d;return{user:f,accounts:e??[]}},findUserById:async b=>b?await (await (0,r.d3)(a)).findOne({model:"user",where:[{field:"id",value:b}]}):null,linkAccount:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0),updateUser:async(a,b)=>{let c=await h(b,[{field:"id",value:a}],"user",void 0);return await l(c),c},updateUserByEmail:async(a,b)=>{let c=await h(b,[{field:"email",value:a.toLowerCase()}],"user",void 0);return await l(c),c},updatePassword:async(a,b)=>{await i({password:b},[{field:"userId",value:a},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async b=>await (await (0,r.d3)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),findAccount:async b=>await (await (0,r.d3)(a)).findOne({model:"account",where:[{field:"accountId",value:b}]}),findAccountByProviderId:async(b,c)=>await (await (0,r.d3)(a)).findOne({model:"account",where:[{field:"accountId",value:b},{field:"providerId",value:c}]}),findAccountByUserId:async b=>await (await (0,r.d3)(a)).findMany({model:"account",where:[{field:"userId",value:b}]}),updateAccount:async(a,b)=>await h(b,[{field:"id",value:a}],"account",void 0),createVerificationValue:async a=>await g({createdAt:new Date,updatedAt:new Date,...a},"verification",void 0),findVerificationValue:async b=>{let c=await (await (0,r.d3)(a)).findMany({model:"verification",where:[{field:"identifier",value:b}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return d.verification?.disableCleanup||await k([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),c[0]},deleteVerificationValue:async a=>{await j([{field:"id",value:a}],"verification",void 0)},deleteVerificationByIdentifier:async a=>{await j([{field:"identifier",value:a}],"verification",void 0)},updateVerificationValue:async(a,b)=>await h(b,[{field:"id",value:a}],"verification",void 0)}},ag=m;function ah({fields:a,isClientSide:b}){let c=Object.keys(a).reduce((c,d)=>{let e,f=a[d];return!f||b&&!1===f.input?c:(e="json"===f.type?m.json?m.json():m.any():"string[]"===f.type||"number[]"===f.type?m.array("string[]"===f.type?m.string():m.number()):Array.isArray(f.type)?m.any():h[f.type](),f?.required===!1&&(e=e.optional()),b||f?.returned!==!1)?{...c,[d]:e}:c},{});return m.object(c)}function ai(a){let b=(0,aq.getAuthTables)(a),c={};for(let a in b){let d=b[a],e=d.fields,f={};if(Object.entries(e).forEach(([a,c])=>{if(f[c.fieldName||a]=c,c.references){let d=b[c.references.model];d&&(f[c.fieldName||a].references={...c.references,model:d.modelName,field:c.references.field})}}),c[d.modelName]){c[d.modelName].fields={...c[d.modelName].fields,...f};continue}c[d.modelName]={fields:f,order:d.order||1/0}}return c}var aj=c(74021),ak=c(34220),al=c(48750);let am={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function an(a,b,c){if("string[]"===b||"number[]"===b)return a.toLowerCase().includes("json");let d=am[c];return(Array.isArray(b)?d.string.map(a=>a.toLowerCase()):d[b].map(a=>a.toLowerCase())).includes(a.toLowerCase().split("(")[0].trim())}async function ao(a){try{let b=await (0,ak.l)`SHOW search_path`.execute(a);if(b.rows[0]?.search_path)return b.rows[0].search_path.split(",").map(a=>a.trim()).map(a=>a.replace(/^["']|["']$/g,"")).filter(a=>!a.startsWith("$"))[0]||"public"}catch{}return"public"}async function ap(a){let b=ai(a),c=(0,z.h)(a.logger),{kysely:d,databaseType:e}=await (0,aj.x)(a);e||(c.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),e="sqlite"),d||(c.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let f="public";if("postgres"===e){f=await ao(d),c.debug(`PostgreSQL migration: Using schema '${f}' (from search_path)`);try{(await (0,ak.l)`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${f}
			`.execute(d)).rows[0]||c.warn(`Schema '${f}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(a){c.debug(`Could not verify schema existence: ${a instanceof Error?a.message:String(a)}`)}}let g=await d.introspection.getTables(),h=g;if("postgres"===e)try{let a=await (0,ak.l)`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${f}
				AND table_type = 'BASE TABLE'
			`.execute(d),b=new Set(a.rows.map(a=>a.table_name));h=g.filter(a=>a.schema===f&&b.has(a.name)),c.debug(`Found ${h.length} table(s) in schema '${f}': ${h.map(a=>a.name).join(", ")||"(none)"}`)}catch(a){c.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${a instanceof Error?a.message:String(a)}`)}let i=[],j=[];for(let[a,d]of Object.entries(b)){let b=h.find(b=>b.name===a);if(!b){let b=i.findIndex(b=>b.table===a),c={table:a,fields:d.fields,order:d.order||1/0},e=i.findIndex(a=>(a.order||1/0)>c.order);-1===e?-1===b?i.push(c):i[b].fields={...i[b].fields,...d.fields}:i.splice(e,0,c);continue}let f={};for(let[g,h]of Object.entries(d.fields)){let d=b.columns.find(a=>a.name===g);if(!d){f[g]=h;continue}an(d.dataType,h.type,e)||c.warn(`Field ${g} in table ${a} has a different type in the database. Expected ${h.type} but got ${d.dataType}.`)}Object.keys(f).length>0&&j.push({table:a,fields:f,order:d.order||1/0})}let k=[],l=a.advanced?.database?.generateId==="uuid",m=a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial";function n(a,b){let c=a.type,d=e||"sqlite",f={string:{sqlite:"text",postgres:"text",mysql:a.unique?"varchar(255)":a.references?"varchar(36)":a.sortable||a.index?"varchar(255)":"text",mssql:a.unique||a.sortable?"varchar(255)":a.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:a.bigint?"bigint":"integer",postgres:a.bigint?"bigint":"integer",mysql:a.bigint?"bigint":"integer",mssql:a.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:(0,ak.l)`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:m?(0,ak.l)`integer GENERATED BY DEFAULT AS IDENTITY`:l?"uuid":"text",mysql:m?"integer":"varchar(36)",mssql:m?"integer":"varchar(36)",sqlite:m?"integer":"text"},foreignKeyId:{postgres:m?"integer":l?"uuid":"text",mysql:m?"integer":"varchar(36)",mssql:m?"integer":"varchar(36)",sqlite:m?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if("id"===b||a.references?.field==="id")return"id"===b?f.id[d]:f.foreignKeyId[d];if(Array.isArray(c))return"text";if(!(c in f))throw Error(`Unsupported field type '${String(c)}' for field '${b}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return f[c][d]}let o=(0,al.jt)({schema:(0,$.getAuthTables)(a),usePlural:!1}),p=(0,al.yk)({schema:(0,$.getAuthTables)(a),usePlural:!1});function q(a,b){try{return`${o(a)}.${p({model:a,field:b})}`}catch{return`${a}.${b}`}}if(j.length)for(let a of j)for(let[b,c]of Object.entries(a.fields)){let f=n(c,b),g=d.schema.alterTable(a.table);if(c.index){let c=d.schema.alterTable(a.table).addIndex(`${a.table}_${b}_idx`);k.push(c)}let h=g.addColumn(b,f,a=>(a=!1!==c.required?a.notNull():a,c.references&&(a=a.references(q(c.references.model,c.references.field)).onDelete(c.references.onDelete||"cascade")),c.unique&&(a=a.unique()),"date"===c.type&&"function"==typeof c.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,ak.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,ak.l)`CURRENT_TIMESTAMP`)),a));k.push(h)}let r=[];if(a.advanced?.database?.useNumberId&&c.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),i.length)for(let a of i){let b=n({type:m?"number":"string"},"id"),c=d.schema.createTable(a.table).addColumn("id",b,a=>{if(m)return"postgres"===e?a.primaryKey().notNull():"sqlite"===e?a.primaryKey().notNull():"mssql"===e?a.identity().primaryKey().notNull():a.autoIncrement().primaryKey().notNull();return l&&"postgres"===e?a.primaryKey().defaultTo((0,ak.l)`pg_catalog.gen_random_uuid()`).notNull():a.primaryKey().notNull()});for(let[b,f]of Object.entries(a.fields)){let g=n(f,b);if(c=c.addColumn(b,g,a=>(a=!1!==f.required?a.notNull():a,f.references&&(a=a.references(q(f.references.model,f.references.field)).onDelete(f.references.onDelete||"cascade")),f.unique&&(a=a.unique()),"date"===f.type&&"function"==typeof f.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,ak.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,ak.l)`CURRENT_TIMESTAMP`)),a)),f.index){let c=d.schema.createIndex(`${a.table}_${b}_${f.unique?"uidx":"idx"}`).on(a.table).columns([b]);r.push(f.unique?c.unique():c)}}k.push(c)}if(r.length)for(let a of r)k.push(a);return{toBeCreated:i,toBeAdded:j,runMigrations:async function(){for(let a of k)await a.execute()},compileMigrations:async function(){return k.map(a=>a.compile().sql).join(";\n\n")+";"}}}var aq=((a,b)=>{let c={};for(var d in a)V(c,d,{get:a[d],enumerable:!0});return b&&V(c,Symbol.toStringTag,{value:"Module"}),c})({convertFromDB:()=>ad,convertToDB:()=>ac,createFieldAttribute:()=>ab,createInternalAdapter:()=>af,getAdapter:()=>aa,getBaseAdapter:()=>_,getMigrations:()=>ap,getSchema:()=>ai,getWithHooks:()=>ae,matchType:()=>an,mergeSchema:()=>U.oh,parseAccountInput:()=>U.h6,parseAccountOutput:()=>U.eP,parseAdditionalUserInput:()=>U.gS,parseInputData:()=>U.yO,parseSessionInput:()=>U.Mn,parseSessionOutput:()=>U.dc,parseUserInput:()=>U.pS,parseUserOutput:()=>U.kc,toZodSchema:()=>ah});((a,b,c,d)=>{d&&(V(a,Symbol.toStringTag,{value:"Module"}),c&&V(c,Symbol.toStringTag,{value:"Module"})),Z(a,b,"default"),c&&Z(c,b,"default")})(aq,$);var ar=c(64196),as=c(4744),at=c(5109),au=c(33679),av=c(37305);let aw=()=>(0,J.Aw)("/get-session",{method:"GET",operationId:"getSession",query:as.SY,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async a=>{try{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(!b)return null;let c=(0,as.Zt)(a,a.context.authCookies.sessionData.name),d=null;if(c){let b=a.context.options.session?.cookieCache?.strategy||"compact";if("jwe"===b){let b=await (0,ar.Do)(c,a.context.secret,"better-auth-session");if(!b||!b.session||!b.user)return(0,k.Aj)(a,a.context.authCookies.sessionData),a.json(null);d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()}}else if("jwt"===b){let b=await (0,ar.RO)(c,a.context.secret);if(!b||!b.session||!b.user)return(0,k.Aj)(a,a.context.authCookies.sessionData),a.json(null);d={session:{session:b.session,user:b.user,updatedAt:b.updatedAt,version:b.version},expiresAt:b.exp?1e3*b.exp:Date.now()}}else{let b=(0,y.$l)(au.a.decode(at.z.decode(c)));if(b)if(!await (0,av.s)("SHA-256","base64urlnopad").verify(a.context.secret,JSON.stringify({...b.session,expiresAt:b.expiresAt}),b.signature))return(0,k.Aj)(a,a.context.authCookies.sessionData),a.json(null);else d=b}}let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);if(d?.session&&a.context.options.session?.cookieCache?.enabled&&!a.query?.disableCookieCache){let b=d.session,c=a.context.options.session?.cookieCache?.version,e="1";if(c){if("string"==typeof c)e=c;else if("function"==typeof c){let a=c(b.session,b.user);e=a instanceof Promise?await a:a}}if((b.version||"1")!==e)(0,k.Aj)(a,a.context.authCookies.sessionData);else{let c=new Date(b.session.expiresAt);if(d.expiresAt<Date.now()||c<new Date)(0,k.Aj)(a,a.context.authCookies.sessionData);else{let c=a.context.sessionConfig.cookieRefreshCache;if(!1===c){a.context.session=b;let c=(0,U.dc)(a.context.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),d=(0,U.kc)(a.context.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)});return a.json({session:c,user:d})}if(d.expiresAt-Date.now()<1e3*c.updateAge){let c=(0,T.p)(a.context.options.session?.cookieCache?.maxAge||300,"sec"),d={session:{...b.session,expiresAt:c},user:b.user,updatedAt:Date.now()};await (0,k.vt)(a,d,!1);let e=(0,U.dc)(a.context.options,{...d.session,expiresAt:new Date(d.session.expiresAt),createdAt:new Date(d.session.createdAt),updatedAt:new Date(d.session.updatedAt)}),f=(0,U.kc)(a.context.options,{...d.user,createdAt:new Date(d.user.createdAt),updatedAt:new Date(d.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}let e=(0,U.dc)(a.context.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),f=(0,U.kc)(a.context.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)});return a.context.session={session:e,user:f},a.json({session:e,user:f})}}}let f=await a.context.internalAdapter.findSession(b);if(a.context.session=f,!f||f.session.expiresAt<new Date)return(0,k.eC)(a),f&&await a.context.internalAdapter.deleteSession(f.session.token),a.json(null);if(e||a.query?.disableRefresh){let b=(0,U.dc)(a.context.options,f.session),c=(0,U.kc)(a.context.options,f.user);return a.json({session:b,user:c})}let g=a.context.sessionConfig.expiresIn,h=a.context.sessionConfig.updateAge;if(f.session.expiresAt.valueOf()-1e3*g+1e3*h<=Date.now()&&(!a.query?.disableRefresh||!a.context.options.session?.disableSessionRefresh)){let b=await a.context.internalAdapter.updateSession(f.session.token,{expiresAt:(0,T.p)(a.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!b)return(0,k.eC)(a),a.json(null,{status:401});let c=(b.expiresAt.valueOf()-Date.now())/1e3;await (0,k.$G)(a,{session:b,user:f.user},!1,{maxAge:c});let d=(0,U.dc)(a.context.options,b),e=(0,U.kc)(a.context.options,f.user);return a.json({session:d,user:e})}await (0,k.vt)(a,f,!!e);let i=(0,U.dc)(a.context.options,f.session),j=(0,U.kc)(a.context.options,f.user);return a.json({session:i,user:j})}catch(b){throw a.context.logger.error("INTERNAL_SERVER_ERROR",b),new u.LG("INTERNAL_SERVER_ERROR",{message:l.q.FAILED_TO_GET_SESSION})}}),ax=async(a,b)=>{if(a.context.session)return a.context.session;let c=await aw()({...a,asResponse:!1,headers:a.headers,returnHeaders:!1,returnStatus:!1,query:{...b,...a.query}}).catch(a=>null);return a.context.session=c,c},ay=(0,J.Di)(async a=>{let b=await ax(a);if(!b?.session)throw new u.LG("UNAUTHORIZED");return{session:b}}),az=(0,J.Di)(async a=>{let b=await ax(a,{disableCookieCache:!0});if(!b?.session)throw new u.LG("UNAUTHORIZED");return{session:b}});(0,J.Di)(async a=>{let b=await ax(a);if(!b?.session&&(a.request||a.headers))throw new u.LG("UNAUTHORIZED");return{session:b}});let aA=(0,J.Di)(async a=>{let b=await ax(a);if(!b?.session)throw new u.LG("UNAUTHORIZED");if(0===a.context.sessionConfig.freshAge)return{session:b};let c=a.context.sessionConfig.freshAge,d=new Date(b.session.updatedAt||b.session.createdAt).getTime();if(!(Date.now()-d<1e3*c))throw new u.LG("FORBIDDEN",{message:"Session is not fresh"});return{session:b}}),aB=(0,J.Aw)("/revoke-session",{method:"POST",body:m.object({token:m.string().meta({description:"The token to revoke"})}),use:[az],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.body.token;if((await a.context.internalAdapter.findSession(b))?.session.userId===a.context.session.user.id)try{await a.context.internalAdapter.deleteSession(b)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new u.LG("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),aC=(0,J.Aw)("/revoke-sessions",{method:"POST",use:[az],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{try{await a.context.internalAdapter.deleteSessions(a.context.session.user.id)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new u.LG("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),aD=(0,J.Aw)("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[az],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.context.session;if(!b.user)throw new u.LG("UNAUTHORIZED");let c=(await a.context.internalAdapter.listSessions(b.user.id)).filter(a=>a.expiresAt>new Date).filter(b=>b.token!==a.context.session.session.token);return await Promise.all(c.map(b=>a.context.internalAdapter.deleteSession(b.token))),a.json({status:!0})});function aE(a,b){return a&&b.options.account?.encryptOAuthTokens?(0,j.zp)({key:b.secret,data:a}):a}function aF(a,b){return b.options.account?.encryptOAuthTokens&&a?(0,j.vX)({key:b.secret,data:a}):a}function aG(a){let b=a=>new Date(new Date().getTime()+1e3*a);return{tokenType:a.token_type,accessToken:a.access_token,refreshToken:a.refresh_token,accessTokenExpiresAt:a.expires_in?b(a.expires_in):void 0,refreshTokenExpiresAt:a.refresh_token_expires_in?b(a.refresh_token_expires_in):void 0,scopes:a?.scope?"string"==typeof a.scope?a.scope.split(" "):a.scope:[],idToken:a.id_token,raw:a}}async function aH(a){let b=new TextEncoder().encode(a),c=await crypto.subtle.digest("SHA-256",b);return at.z.encode(new Uint8Array(c),{padding:!1})}async function aI({id:a,options:b,authorizationEndpoint:c,state:d,codeVerifier:e,scopes:f,claims:g,redirectURI:h,duration:i,prompt:j,accessType:k,responseType:l,display:m,loginHint:n,hd:o,responseMode:p,additionalParams:q,scopeJoiner:r}){let s=new URL(b.authorizationEndpoint||c);s.searchParams.set("response_type",l||"code");let t=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;if(s.searchParams.set("client_id",t),s.searchParams.set("state",d),f&&s.searchParams.set("scope",f.join(r||" ")),s.searchParams.set("redirect_uri",b.redirectURI||h),i&&s.searchParams.set("duration",i),m&&s.searchParams.set("display",m),n&&s.searchParams.set("login_hint",n),j&&s.searchParams.set("prompt",j),o&&s.searchParams.set("hd",o),k&&s.searchParams.set("access_type",k),p&&s.searchParams.set("response_mode",p),e){let a=await aH(e);s.searchParams.set("code_challenge_method","S256"),s.searchParams.set("code_challenge",a)}if(g){let a=g.reduce((a,b)=>(a[b]=null,a),{});s.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...a}}))}return q&&Object.entries(q).forEach(([a,b])=>{s.searchParams.set(a,b)}),s}var aJ=Object.defineProperty,aK=Object.defineProperties,aL=Object.getOwnPropertyDescriptors,aM=Object.getOwnPropertySymbols,aN=Object.prototype.hasOwnProperty,aO=Object.prototype.propertyIsEnumerable,aP=(a,b,c)=>b in a?aJ(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,aQ=(a,b)=>{for(var c in b||(b={}))aN.call(b,c)&&aP(a,c,b[c]);if(aM)for(var c of aM(b))aO.call(b,c)&&aP(a,c,b[c]);return a},aR=(a,b)=>aK(a,aL(b)),aS=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c,Error.captureStackTrace(this,this.constructor)}},aT=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},aU=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},aV=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},aW=async a=>{let b={},c=async a=>"function"==typeof a?await a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=await c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.username),c(a.auth.password)]);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let[d,e]=await Promise.all([c(a.auth.prefix),c(a.auth.value)]);if(!e)return b;b.authorization=`${null!=d?d:""} ${e}`}}return b},aX=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function aY(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function aZ(a){try{return JSON.parse(a)}catch(b){return a}}function a$(a){return"function"==typeof a}async function a_(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries(await aW(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=aY(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}var a0=class a extends Error{constructor(b,c){super(c||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,a.prototype)}};async function a1(a,b){let c=await a["~standard"].validate(b);if(c.issues)throw new a0(c.issues);return c.value}var a2=["get","post","put","patch","delete"],a3=async(a,b)=>{var c,d,e,f,g,h,i,j;let{hooks:k,url:l,options:m}=await aT(a,b),n=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("undefined"!=typeof globalThis&&a$(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&a$(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(m),o=new AbortController,p=null!=(c=m.signal)?c:o.signal,q=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c||"";if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];a2.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{})){let c;if(null!=b){if("string"==typeof b)c=b;else if(Array.isArray(b)){for(let c of b)i.append(a,c);continue}else c=JSON.stringify(b);i.set(a,c)}}if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.toString();return(j=j.length>0?`?${j}`.replace(/\+/g,"%20"):"",f.startsWith("http"))?new URL(`${g}${j}`,f):`${f}${g}${j}`}(l,m),r=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);if(aY(a.body)&&!b.has("content-type")){for(let[b,c]of Object.entries(null==a?void 0:a.body))c instanceof Date&&(a.body[b]=c.toISOString());return JSON.stringify(a.body)}return b.has("content-type")&&"application/x-www-form-urlencoded"===b.get("content-type")&&aY(a.body)?new URLSearchParams(a.body).toString():a.body}(m),s=await a_(m),t=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return a2.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(l,m),u=aR(aQ({},m),{url:q,headers:s,body:r,method:t,signal:p});for(let a of k.onRequest)if(a){let b=await a(u);"object"==typeof b&&null!==b&&(u=b)}("pipeTo"in u&&"function"==typeof u.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in u)&&(u.duplex="half");let{clearTimeout:v}=function(a,b){let c;return!(null==a?void 0:a.signal)&&(null==a?void 0:a.timeout)&&(c=setTimeout(()=>null==b?void 0:b.abort(),null==a?void 0:a.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}}(m,o),w=await n(u.url,u);v();let x={response:w,request:u};for(let a of k.onResponse)if(a){let c=await a(aR(aQ({},x),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?w.clone():w}));c instanceof Response?w=c:"object"==typeof c&&null!==c&&(w=c.response)}if(w.ok){if("HEAD"===u.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return aX.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(w),c={data:null,response:w,request:u};if("json"===a||"text"===a){let a=await w.text(),b=null!=(f=u.jsonParser)?f:aZ;c.data=await b(a)}else c.data=await w[a]();for(let a of((null==u?void 0:u.output)&&u.output&&!u.disableValidation&&(c.data=await a1(u.output,c.data)),k.onSuccess))a&&await a(aR(aQ({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?w.clone():w}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let y=null!=(h=null==b?void 0:b.jsonParser)?h:aZ,z=await w.text(),A=function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(z),B=A?await y(z):null,C={response:w,responseText:z,request:u,error:aR(aQ({},B),{status:w.status,statusText:w.statusText})};for(let a of k.onError)a&&await a(aR(aQ({},C),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?w.clone():w}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new aU({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new aU(a);case"exponential":return new aV(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,w)){for(let a of k.onRetry)a&&await a(x);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await a3(a,aR(aQ({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new aS(w.status,w.statusText,A?B:z);return{data:null,error:aR(aQ({},B),{status:w.status,statusText:w.statusText})}};async function a4({refreshToken:a,options:b,tokenEndpoint:c,authentication:d,extraParams:e}){let{body:f,headers:g}=function({refreshToken:a,options:b,authentication:c,extraParams:d,resource:e}){let f=new URLSearchParams,g={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(f.set("grant_type","refresh_token"),f.set("refresh_token",a),"basic"===c){let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;a?g.authorization="Basic "+at.K.encode(`${a}:${b.clientSecret??""}`):g.authorization="Basic "+at.K.encode(`:${b.clientSecret??""}`)}else{let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;f.set("client_id",a),b.clientSecret&&f.set("client_secret",b.clientSecret)}if(e)if("string"==typeof e)f.append("resource",e);else for(let a of e)f.append("resource",a);if(d)for(let[a,b]of Object.entries(d))f.set(a,b);return{body:f,headers:g}}({refreshToken:a,options:b,authentication:d,extraParams:e}),{data:h,error:i}=await a3(c,{method:"POST",body:f,headers:g});if(i)throw i;let j={accessToken:h.access_token,refreshToken:h.refresh_token,tokenType:h.token_type,scopes:h.scope?.split(" "),idToken:h.id_token};return h.expires_in&&(j.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*h.expires_in)),j}var a5=c(15560);function a6({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:e,deviceId:f,headers:g,additionalParams:h={},resource:i}){let j=new URLSearchParams,k={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...g};if(j.set("grant_type","authorization_code"),j.set("code",a),b&&j.set("code_verifier",b),d.clientKey&&j.set("client_key",d.clientKey),f&&j.set("device_id",f),j.set("redirect_uri",d.redirectURI||c),i)if("string"==typeof i)j.append("resource",i);else for(let a of i)j.append("resource",a);if("basic"===e){let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;k.authorization=`Basic ${at.K.encode(`${a}:${d.clientSecret??""}`)}`}else{let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;j.set("client_id",a),d.clientSecret&&j.set("client_secret",d.clientSecret)}for(let[a,b]of Object.entries(h))j.has(a)||j.append(a,b);return{body:j,headers:k}}async function a7({code:a,codeVerifier:b,redirectURI:c,options:d,tokenEndpoint:e,authentication:f,deviceId:g,headers:h,additionalParams:i={},resource:j}){let{body:k,headers:l}=a6({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:f,deviceId:g,headers:h,additionalParams:i,resource:j}),{data:m,error:n}=await a3(e,{method:"POST",body:k,headers:l});if(n)throw n;return aG(m)}var a8=c(73519),a9=c(37432),ba=c(32712);function bb(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(a9.D0.decode((0,a8.D)(b)));if(!(0,ba.G)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}var bc=c(1069),bd=c(33164);function be(a){let b,c;if("string"!=typeof a)throw new bd.Dp("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new bd.Dp("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new bd.Dp("Invalid JWT");if(!d)throw new bd.Dp("JWTs must contain a payload");try{b=(0,a8.D)(d)}catch{throw new bd.Dp("Failed to base64url decode the payload")}try{c=JSON.parse(a9.D0.decode(b))}catch{throw new bd.Dp("Failed to parse the decoded payload as JSON")}if(!(0,ba.G)(c))throw new bd.Dp("Invalid JWT Claims Set");return c}var bf=c(92545);let bg=async a=>{let{data:b}=await a3("https://appleid.apple.com/auth/keys");if(!b?.keys)throw new u.LG("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,bf.Og)(c,c.alg)},bh=async(a,b,c)=>{let d=`https://cognito-idp.${b}.amazonaws.com/${c}/.well-known/jwks.json`;try{let{data:b}=await a3(d);if(!b?.keys)throw new u.LG("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,bf.Og)(c,c.alg)}catch(a){throw a5.vF.error("Failed to fetch Cognito public key:",a),a}};function bi(a){return(0,ba.G)(a)}class bj{#x;#y=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(bi)}(a))throw new bd.Dm("JSON Web Key Set malformed");this.#x=structuredClone(a)}jwks(){return this.#x}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new bd.T0('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this.#x.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&("string"==typeof a.alg||"AKP"===e)&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":case"EdDSA":b="Ed25519"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new bd.BT;if(1!==h){let a=new bd.$4,b=this.#y;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await bk(b,a,c)}catch{}},a}return bk(this.#y,g,c)}}async function bk(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await (0,bf.Og)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new bd.Dm("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function bl(a){let b=new bj(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>structuredClone(b.jwks()),enumerable:!1,configurable:!1,writable:!1}}),c}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="jose/v6.1.3");let bm=Symbol();async function bn(a,b,c,d=fetch){let e=await d(a,{method:"GET",signal:c,redirect:"manual",headers:b}).catch(a=>{if("TimeoutError"===a.name)throw new bd.xb;throw a});if(200!==e.status)throw new bd.i4("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await e.json()}catch{throw new bd.i4("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let bo=Symbol();class bp{#z;#A;#B;#C;#D;#E;#F;#G;#H;#I;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this.#z=new URL(a.href),this.#A="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this.#B="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this.#C="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,this.#F=new Headers(b?.headers),d&&!this.#F.has("User-Agent")&&this.#F.set("User-Agent",d),this.#F.has("accept")||(this.#F.set("accept","application/json"),this.#F.append("accept","application/jwk-set+json")),this.#G=b?.[bm],b?.[bo]!==void 0&&(this.#I=b?.[bo],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!(0,ba.G)(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,ba.G)}(b?.[bo],this.#C)&&(this.#D=this.#I.uat,this.#H=bl(this.#I.jwks)))}pendingFetch(){return!!this.#E}coolingDown(){return"number"==typeof this.#D&&Date.now()<this.#D+this.#B}fresh(){return"number"==typeof this.#D&&Date.now()<this.#D+this.#C}jwks(){return this.#H?.jwks()}async getKey(a,b){this.#H&&this.fresh()||await this.reload();try{return await this.#H(a,b)}catch(c){if(c instanceof bd.BT&&!1===this.coolingDown())return await this.reload(),this.#H(a,b);throw c}}async reload(){this.#E&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#E=void 0),this.#E||=bn(this.#z.href,this.#F,AbortSignal.timeout(this.#A),this.#G).then(a=>{this.#H=bl(a),this.#I&&(this.#I.uat=Date.now(),this.#I.jwks=a),this.#D=Date.now(),this.#E=void 0}).catch(a=>{throw this.#E=void 0,a}),await this.#E}}let bq=(a="")=>a.split("://").map(a=>a.replace(/\/{2,}/g,"/")).join("://"),br=async a=>{let{data:b}=await a3("https://www.googleapis.com/oauth2/v3/certs");if(!b?.keys)throw new u.LG("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await (0,bf.Og)(c,c.alg)},bs={apple:a=>({id:"apple",name:"Apple",async createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["email","name"];return a.scope&&e.push(...a.scope),c&&e.push(...c),await aI({id:"apple",options:a,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:e,state:b,redirectURI:d,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=bb(b);if(!d||!e)return!1;let{payload:f}=await (0,bc.V)(b,await bg(d),{algorithms:[e],issuer:"https://appleid.apple.com",audience:a.audience&&a.audience.length?a.audience:a.appBundleIdentifier?a.appBundleIdentifier:a.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{void 0!==f[a]&&(f[a]=!!f[a])}),(!c||f.nonce===c)&&!!f},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(b){let c;if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let d=be(b.idToken);if(!d)return null;c=b.user?.name?`${b.user.name.firstName||""} ${b.user.name.lastName||""}`.trim()||" ":d.name||" ";let e="boolean"==typeof d.email_verified?d.email_verified:"true"===d.email_verified,f={...d,name:c},g=await a.mapProfileToUser?.(f);return{user:{id:d.sub,name:f.name,emailVerified:e,email:d.email,...g},data:f}},options:a}),atlassian:a=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Secret are required for Atlassian"),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new l.$("codeVerifier is required for Atlassian");let f=a.disableDefaultScope?[]:["read:jira-user","offline_access"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"atlassian",options:a,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,additionalParams:{audience:"api.atlassian.com"},prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;try{let{data:c}=await a3("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name,email:c.email,image:c.picture,emailVerified:!1,...d},data:c}}catch(a){return a5.vF.error("Failed to fetch user info from Figma:",a),null}},options:a}),cognito:a=>{if(!a.domain||!a.region||!a.userPoolId)throw a5.vF.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new l.$("DOMAIN_AND_REGION_REQUIRED");let b=a.domain.replace(/^https?:\/\//,""),c=`https://${b}/oauth2/authorize`,d=`https://${b}/oauth2/token`,e=`https://${b}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId)throw a5.vF.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(a.requireClientSecret&&!a.clientSecret)throw a5.vF.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new l.$("CLIENT_SECRET_REQUIRED");let g=a.disableDefaultScope?[]:["openid","profile","email"];a.scope&&g.push(...a.scope),d&&g.push(...d);let h=await aI({id:"cognito",options:{...a},authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt}),i=h.searchParams.get("scope");if(i){h.searchParams.delete("scope");let a=encodeURIComponent(i),b=h.toString(),c=b.includes("?")?"&":"?";return new URL(`${b}${c}scope=${a}`)}return h},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>a7({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{let{kid:d,alg:e}=bb(b);if(!d||!e)return!1;let f=await bh(d,a.region,a.userPoolId),g=`https://cognito-idp.${a.region}.amazonaws.com/${a.userPoolId}`,{payload:h}=await (0,bc.V)(b,f,{algorithms:[e],issuer:g,audience:a.clientId,maxTokenAge:"1h"});if(c&&h.nonce!==c)return!1;return!0}catch(a){return a5.vF.error("Failed to verify ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken)try{let c=be(b.idToken);if(!c)return null;let d=c.name||c.given_name||c.username||c.email,e={...c,name:d},f=await a.mapProfileToUser?.(e);return{user:{id:c.sub,name:e.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...f},data:e}}catch(a){a5.vF.error("Failed to decode ID token:",a)}if(b.accessToken)try{let{data:c}=await a3(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(c){let b=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.given_name||c.username,email:c.email,image:c.picture,emailVerified:c.email_verified,...b},data:c}}}catch(a){a5.vF.error("Failed to fetch user info from Cognito:",a)}return null},options:a}},discord:a=>({id:"discord",name:"Discord",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identify","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=e.includes("bot")&&void 0!==a.permissions?`&permissions=${a.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"none"}${f}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;if(null===c.avatar)c.image_url=`https://cdn.discordapp.com/embed/avatars/${"0"===c.discriminator?Number(BigInt(c.id)>>BigInt(22))%6:parseInt(c.discriminator)%5}.png`;else{let a=c.avatar.startsWith("a_")?"gif":"png";c.image_url=`https://cdn.discordapp.com/avatars/${c.id}/${c.avatar}.${a}`}let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.global_name||c.username||"",email:c.email,emailVerified:c.verified,image:c.image_url,...e},data:c}},options:a}),facebook:a=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:b,scopes:c,redirectURI:d,loginHint:e}){let f=a.disableDefaultScope?[]:["email","public_profile"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await aI({id:"facebook",options:a,authorizationEndpoint:"https://www.facebook.com/v24.0/dialog/oauth",scopes:f,state:b,redirectURI:d,loginHint:e,additionalParams:a.configId?{config_id:a.configId}:{}})},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);if(3===b.split(".").length)try{let{payload:d}=await (0,bc.V)(b,function(a,b){let c=new bp(a,void 0),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>c.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>c.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:a.clientId,issuer:"https://www.facebook.com"});if(c&&d.nonce!==c)return!1;return!!d}catch{return!1}return!0},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken&&3===b.idToken.split(".").length){let c=be(b.idToken),d={id:c.sub,name:c.name,email:c.email,picture:{data:{url:c.picture,height:100,width:100,is_silhouette:!1}}},e=await a.mapProfileToUser?.({...d,email_verified:!1});return{user:{...d,emailVerified:!1,...e},data:c}}let{data:c,error:d}=await a3("https://graph.facebook.com/me?fields="+["id","name","email","picture",...a?.fields||[]].join(","),{auth:{type:"Bearer",token:b.accessToken}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.email,image:c.picture.data.url,emailVerified:c.email_verified,...e},data:c}},options:a}),figma:a=>({id:"figma",name:"Figma",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new l.$("codeVerifier is required for Figma");let f=a.disableDefaultScope?[]:["current_user:read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await aI({id:"figma",options:a,authorizationEndpoint:"https://www.figma.com/oauth",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await a3("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return a5.vF.error("Failed to fetch user from Figma"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.handle,email:c.email,image:c.img_url,emailVerified:!1,...d},data:c}}catch(a){return a5.vF.error("Failed to fetch user info from Figma:",a),null}},options:a}),github:a=>({id:"github",name:"GitHub",createAuthorizationURL({state:b,scopes:c,loginHint:d,codeVerifier:e,redirectURI:f}){let g=a.disableDefaultScope?[]:["read:user","user:email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),aI({id:"github",options:a,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:g,state:b,codeVerifier:e,redirectURI:f,loginHint:d,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>{let{body:e,headers:f}=a6({code:b,codeVerifier:c,redirectURI:d,options:a}),{data:g,error:h}=await a3("https://github.com/login/oauth/access_token",{method:"POST",body:e,headers:f});return h?(a5.vF.error("GitHub OAuth token exchange failed:",h),null):"error"in g?(a5.vF.error("GitHub OAuth token exchange failed:",g),null):aG(g)},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e}=await a3("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});!c.email&&e&&(c.email=(e.find(a=>a.primary)??e[0])?.email);let f=e?.find(a=>a.email===c.email)?.verified??!1,g=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name||c.login,email:c.email,image:c.avatar_url,emailVerified:f,...g},data:c}},options:a}),microsoft:a=>{let b=a.tenantId||"common",c=a.authority||"https://login.microsoftonline.com",d=`${c}/${b}/oauth2/v2.0/authorize`,e=`${c}/${b}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),aI({id:"microsoft",options:a,authorizationEndpoint:d,state:b.state,codeVerifier:b.codeVerifier,scopes:c,redirectURI:b.redirectURI,prompt:a.prompt,loginHint:b.loginHint})},validateAuthorizationCode:({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:e}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=be(b.idToken),d=a.profilePhotoSize||48;await a3(`https://graph.microsoft.com/v1.0/me/photos/${d}x${d}/$value`,{headers:{Authorization:`Bearer ${b.accessToken}`},async onResponse(b){if(!a.disableProfilePhoto&&b.response.ok)try{let a=await b.response.clone().arrayBuffer();c.picture=`data:image/jpeg;base64, ${at.K.encode(a)}`}catch(a){a5.vF.error(a&&"object"==typeof a&&"name"in a?a.name:"",a)}}});let e=await a.mapProfileToUser?.(c),f=void 0!==c.email_verified?c.email_verified:!!(c.email&&(c.verified_primary_email?.includes(c.email)||c.verified_secondary_email?.includes(c.email)));return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:f,...e},data:c}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),a4({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},extraParams:{scope:c.join(" ")},tokenEndpoint:e})},options:a}},google:a=>({id:"google",name:"Google",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f,display:g}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new l.$("codeVerifier is required for Google");let h=a.disableDefaultScope?[]:["email","profile","openid"];return a.scope&&h.push(...a.scope),c&&h.push(...c),await aI({id:"google",options:a,authorizationEndpoint:"https://accounts.google.com/o/oauth2/v2/auth",scopes:h,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt,accessType:a.accessType,display:g||a.display,loginHint:f,hd:a.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://oauth2.googleapis.com/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=bb(b);if(!d||!e)return!1;let{payload:f}=await (0,bc.V)(b,await br(d),{algorithms:[e],issuer:["https://accounts.google.com","accounts.google.com"],audience:a.clientId,maxTokenAge:"1h"});return!c||f.nonce===c},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=be(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...d},data:c}},options:a}),huggingface:a=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"huggingface",options:a,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),slack:a=>({id:"slack",name:"Slack",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=new URL("https://slack.com/openid/connect/authorize");return f.searchParams.set("scope",e.join(" ")),f.searchParams.set("response_type","code"),f.searchParams.set("client_id",a.clientId),f.searchParams.set("redirect_uri",a.redirectURI||d),f.searchParams.set("state",b),f},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c["https://slack.com/user_id"],name:c.name||"",email:c.email,emailVerified:c.email_verified,image:c.picture||c["https://slack.com/user_image_512"],...e},data:c}},options:a}),spotify:a=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["user-read-email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"spotify",options:a,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,email:c.email,image:c.images[0]?.url,emailVerified:!1,...e},data:c}},options:a}),twitch:a=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user:read:email","openid"];return a.scope&&e.push(...a.scope),c&&e.push(...c),aI({id:"twitch",redirectURI:d,options:a,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:e,state:b,claims:a.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=b.idToken;if(!c)return a5.vF.error("No idToken found in token"),null;let d=be(c),e=await a.mapProfileToUser?.(d);return{user:{id:d.sub,name:d.preferred_username,email:d.email,image:d.picture,emailVerified:d.email_verified,...e},data:d}},options:a}),twitter:a=>({id:"twitter",name:"Twitter",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),aI({id:"twitter",options:a,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:c,state:b.state,codeVerifier:b.codeVerifier,redirectURI:b.redirectURI})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,authentication:"basic",redirectURI:d,options:a,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e,error:f}=await a3("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}}),g=!1;!f&&e?.data?.confirmed_email&&(c.data.email=e.data.confirmed_email,g=!0);let h=await a.mapProfileToUser?.(c);return{user:{id:c.data.id,name:c.data.name,email:c.data.email||c.data.username||null,image:c.data.profile_image_url,emailVerified:g,...h},data:c}},options:a}),dropbox:a=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:b,scopes:c,codeVerifier:d,redirectURI:e})=>{let f=a.disableDefaultScope?[]:["account_info.read"];a.scope&&f.push(...a.scope),c&&f.push(...c);let g={};return a.accessType&&(g.token_access_type=a.accessType),await aI({id:"dropbox",options:a,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d,additionalParams:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>await a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name?.display_name,email:c.email,emailVerified:c.email_verified||!1,image:c.profile_photo_url,...e},data:c}},options:a}),kick:a=>({id:"kick",name:"Kick",createAuthorizationURL({state:b,scopes:c,redirectURI:d,codeVerifier:e}){let f=a.disableDefaultScope?[]:["user:read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"kick",redirectURI:d,options:a,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:f,codeVerifier:e,state:b})},validateAuthorizationCode:async({code:b,redirectURI:c,codeVerifier:d})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=c.data[0],f=await a.mapProfileToUser?.(e);return{user:{id:e.user_id,name:e.name,email:e.email,image:e.profile_picture,emailVerified:!1,...f},data:e}},options:a}),linear:a=>{let b="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"linear",options:a,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>a7({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>a4({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(d||!c?.data?.viewer)return null;let e=c.data.viewer,f=await a.mapProfileToUser?.(e);return{user:{id:c.data.viewer.id,name:c.data.viewer.name,email:c.data.viewer.email,image:c.data.viewer.avatarUrl,emailVerified:!1,...f},data:e}},options:a}},linkedin:a=>{let b="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:b,scopes:c,redirectURI:d,loginHint:e})=>{let f=a.disableDefaultScope?[]:["profile","email","openid"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await aI({id:"linkedin",options:a,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:f,state:b,loginHint:e,redirectURI:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>await a7({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>a4({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,emailVerified:c.email_verified||!1,image:c.picture,...e},data:c}},options:a}},gitlab:a=>{let{authorizationEndpoint:b,tokenEndpoint:c,userinfoEndpoint:d}=(a=>{let b=a||"https://gitlab.com";return{authorizationEndpoint:bq(`${b}/oauth/authorize`),tokenEndpoint:bq(`${b}/oauth/token`),userinfoEndpoint:bq(`${b}/api/v4/user`)}})(a.issuer),e="gitlab";return{id:e,name:"Gitlab",createAuthorizationURL:async({state:c,scopes:d,codeVerifier:f,loginHint:g,redirectURI:h})=>{let i=a.disableDefaultScope?[]:["read_user"];return a.scope&&i.push(...a.scope),d&&i.push(...d),await aI({id:e,options:a,authorizationEndpoint:b,scopes:i,state:c,redirectURI:h,codeVerifier:f,loginHint:g})},validateAuthorizationCode:async({code:b,redirectURI:d,codeVerifier:e})=>a7({code:b,redirectURI:d,options:a,codeVerifier:e,tokenEndpoint:c}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:c}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:e}=await a3(d,{headers:{authorization:`Bearer ${b.accessToken}`}});if(e||"active"!==c.state||c.locked)return null;let f=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name??c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...f},data:c}},options:a}},tiktok:a=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user.info.profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${e.join(",")}&response_type=code&client_key=${a.clientKey}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:a.redirectURI||c,options:{clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:a.clientKey}}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${b.accessToken}`}});return d?null:{user:{email:c.data.user.email||c.data.user.username,id:c.data.user.open_id,name:c.data.user.display_name||c.data.user.username,image:c.data.user.avatar_large_url,emailVerified:!1},data:c}},options:a}),reddit:a=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identity"];return a.scope&&e.push(...a.scope),c&&e.push(...c),aI({id:"reddit",options:a,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:e,state:b,redirectURI:d,duration:a.duration})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let d=new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:a.redirectURI||c}),{data:e,error:f}=await a3("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${at.K.encode(`${a.clientId}:${a.clientSecret}`)}`},body:d.toString()});if(f)throw f;return aG(e)},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.oauth_client_id,emailVerified:c.has_verified_email,image:c.icon_img?.split("?")[0],...e},data:c}},options:a}),roblox:a=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:a.redirectURI||c,options:a,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.nickname||c.preferred_username||"",image:c.picture,email:c.preferred_username||null,emailVerified:!1,...e},data:{...c}}},options:a}),salesforce:a=>{let b=(a.environment??"production")==="sandbox",c=a.loginUrl?`https://${a.loginUrl}/services/oauth2/authorize`:b?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",d=a.loginUrl?`https://${a.loginUrl}/services/oauth2/token`:b?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",e=a.loginUrl?`https://${a.loginUrl}/services/oauth2/userinfo`:b?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new l.$("codeVerifier is required for Salesforce");let g=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&g.push(...a.scope),d&&g.push(...d),aI({id:"salesforce",options:a,authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:a.redirectURI||f})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>a7({code:b,codeVerifier:c,redirectURI:a.redirectURI||e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await a3(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return a5.vF.error("Failed to fetch user info from Salesforce"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.user_id,name:c.name,email:c.email,image:c.photos?.picture||c.photos?.thumbnail,emailVerified:c.email_verified??!1,...d},data:c}}catch(a){return a5.vF.error("Failed to fetch user info from Salesforce:",a),null}},options:a}},vk:a=>({id:"vk",name:"VK",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["email","phone"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"vk",options:a,authorizationEndpoint:"https://id.vk.com/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d,deviceId:e})=>a7({code:b,codeVerifier:c,redirectURI:a.redirectURI||d,options:a,deviceId:e,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;let c=new URLSearchParams({access_token:b.accessToken,client_id:a.clientId}).toString(),{data:d,error:e}=await a3("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(e)return null;let f=await a.mapProfileToUser?.(d);return d.user.email||f?.email?{user:{id:d.user.user_id,first_name:d.user.first_name,last_name:d.user.last_name,email:d.user.email,image:d.user.avatar,emailVerified:!1,birthday:d.user.birthday,sex:d.user.sex,name:`${d.user.first_name} ${d.user.last_name}`,...f},data:d}:null},options:a}),zoom:a=>{let b={pkce:!0,...a};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:a,redirectURI:c,codeVerifier:d})=>{let e=new URLSearchParams({response_type:"code",redirect_uri:b.redirectURI?b.redirectURI:c,client_id:b.clientId,state:a});if(b.pkce){let a=await aH(d);e.set("code_challenge_method","S256"),e.set("code_challenge",a)}let f=new URL("https://zoom.us/oauth/authorize");return f.search=e.toString(),f},validateAuthorizationCode:async({code:a,redirectURI:c,codeVerifier:d})=>a7({code:a,redirectURI:b.redirectURI||c,codeVerifier:d,options:b,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:b.refreshAccessToken?b.refreshAccessToken:async a=>a4({refreshToken:a,options:{clientId:b.clientId,clientKey:b.clientKey,clientSecret:b.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(a){if(b.getUserInfo)return b.getUserInfo(a);let{data:c,error:d}=await a3("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${a.accessToken}`}});if(d)return null;let e=await b.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,image:c.pic_url,email:c.email,emailVerified:!!c.verified,...e},data:{...c}}}}},notion:a=>{let b="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=(a.disableDefaultScope,[]);return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"notion",options:a,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:c,redirectURI:d})=>a7({code:c,redirectURI:d,options:a,tokenEndpoint:b,authentication:"basic"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>a4({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"Notion-Version":"2022-06-28"}});if(d||!c)return null;let e=c.bot?.owner?.user;if(!e)return null;let f=await a.mapProfileToUser?.(e);return{user:{id:e.id,name:e.name||"Notion User",email:e.person?.email||null,image:e.avatar_url,emailVerified:!1,...f},data:e}},options:a}},kakao:a=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return a.scope&&e.push(...a.scope),c&&e.push(...c),aI({id:"kakao",options:a,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c),f=c.kakao_account||{},g=f.profile||{};return{user:{id:String(c.id),name:g.nickname||f.name||void 0,email:f.email,image:g.profile_image_url||g.thumbnail_image_url,emailVerified:!!f.is_email_valid&&!!f.is_email_verified,...e},data:c}},options:a}),naver:a=>({id:"naver",name:"Naver",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["profile","email"];return a.scope&&e.push(...a.scope),c&&e.push(...c),aI({id:"naver",options:a,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>a7({code:b,redirectURI:c,options:a,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c||"00"!==c.resultcode)return null;let e=await a.mapProfileToUser?.(c),f=c.response||{};return{user:{id:f.id,name:f.name||f.nickname,email:f.email,image:f.profile_image,emailVerified:!1,...e},data:c}},options:a}),line:a=>{let b="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f}){let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),await aI({id:"line",options:a,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:g,state:b,codeVerifier:d,redirectURI:e,loginHint:f})},validateAuthorizationCode:async({code:c,codeVerifier:d,redirectURI:e})=>a7({code:c,codeVerifier:d,redirectURI:e,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>a4({refreshToken:c,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:b}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let d=new URLSearchParams;d.set("id_token",b),d.set("client_id",a.clientId),c&&d.set("nonce",c);let{data:e,error:f}=await a3("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:d});return!f&&!!e&&e.aud===a.clientId&&(!e.nonce||e.nonce===c)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=null;if(b.idToken)try{c=be(b.idToken)}catch{}if(!c){let{data:a}=await a3("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});c=a||null}if(!c)return null;let d=await a.mapProfileToUser?.(c),e=c.sub||c.userId,f=c.name||c.displayName,g=c.picture||c.pictureUrl||void 0;return{user:{id:e,name:f,email:c.email,image:g,emailVerified:!1,...d},data:c}},options:a}},paybin:a=>{let b=a.issuer||"https://idp.paybin.io",c=`${b}/oauth2/authorize`,d=`${b}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f,loginHint:g}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new l.$("codeVerifier is required for Paybin");let h=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&h.push(...a.scope),d&&h.push(...d),await aI({id:"paybin",options:a,authorizationEndpoint:c,scopes:h,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt,loginHint:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>a7({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=be(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username||(c.email?c.email.split("@")[0]:"User")||"User",email:c.email,image:c.picture,emailVerified:c.email_verified||!1,...d},data:c}},options:a}},paypal:a=>{let b="sandbox"===(a.environment||"sandbox"),c=b?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",d=b?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",e=b?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:b,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw a5.vF.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new l.$("CLIENT_ID_AND_SECRET_REQUIRED");return await aI({id:"paypal",options:a,authorizationEndpoint:c,scopes:[],state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let e=at.K.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await a3(d,{method:"POST",headers:{Authorization:`Basic ${e}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:c}).toString()});if(!a.data)throw new l.$("FAILED_TO_GET_ACCESS_TOKEN");let f=a.data;return{accessToken:f.access_token,refreshToken:f.refresh_token,accessTokenExpiresAt:f.expires_in?new Date(Date.now()+1e3*f.expires_in):void 0,idToken:f.id_token}}catch(a){throw a5.vF.error("PayPal token exchange failed:",a),new l.$("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=at.K.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await a3(d,{method:"POST",headers:{Authorization:`Basic ${c}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:b}).toString()});if(!a.data)throw new l.$("FAILED_TO_REFRESH_ACCESS_TOKEN");let e=a.data;return{accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?new Date(Date.now()+1e3*e.expires_in):void 0}}catch(a){throw a5.vF.error("PayPal token refresh failed:",a),new l.$("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{return!!be(b).sub}catch(a){return a5.vF.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return a5.vF.error("Access token is required to fetch PayPal user info"),null;try{let c=await a3(`${e}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${b.accessToken}`,Accept:"application/json"}});if(!c.data)return a5.vF.error("Failed to fetch user info from PayPal"),null;let d=c.data,f=await a.mapProfileToUser?.(d);return{user:{id:d.user_id,name:d.name,email:d.email,image:d.picture,emailVerified:d.email_verified,...f},data:d}}catch(a){return a5.vF.error("Failed to fetch user info from PayPal:",a),null}},options:a}},polar:a=>({id:"polar",name:"Polar",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),aI({id:"polar",options:a,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>a4({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.public_name||c.username,email:c.email,image:c.avatar_url,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),vercel:a=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f;if(!d)throw new l.$("codeVerifier is required for Vercel");return(void 0!==a.scope||void 0!==c)&&(f=[],a.scope&&f.push(...a.scope),c&&f.push(...c)),aI({id:"vercel",options:a,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>a7({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await a3("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name??c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a})},bt=Object.keys(bs),bu=m.enum(bt).or(m.string()),bv=(0,J.Aw)("/list-accounts",{method:"GET",use:[ay],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async a=>{let b=a.context.session,c=await a.context.internalAdapter.findAccounts(b.user.id);return a.json(c.map(b=>{let{scope:c,...d}=(0,U.eP)(a.context.options,b);return{...d,scopes:c?.split(",")||[]}}))}),bw=(0,J.Aw)("/link-social",{method:"POST",requireHeaders:!0,body:m.object({callbackURL:m.string().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:bu,idToken:m.object({token:m.string(),nonce:m.string().optional(),accessToken:m.string().optional(),refreshToken:m.string().optional(),scopes:m.array(m.string()).optional()}).optional(),requestSignUp:m.boolean().optional(),scopes:m.array(m.string()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:m.string().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:m.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:m.record(m.string(),m.any()).optional()}),use:[ay],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async a=>{let b=a.context.session,c=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!c)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new u.LG("NOT_FOUND",{message:l.q.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!c.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new u.LG("NOT_FOUND",{message:l.q.ID_TOKEN_NOT_SUPPORTED});let{token:d,nonce:e}=a.body.idToken;if(!await c.verifyIdToken(d,e))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_TOKEN});let f=await c.getUserInfo({idToken:d,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!f||!f?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.FAILED_TO_GET_USER_INFO});let g=String(f.user.id);if(!f.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.USER_EMAIL_NOT_FOUND});if((await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>a.providerId===c.id&&a.accountId===g))return a.json({url:"",status:!0,redirect:!1});if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(c.id)&&!f.user.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)throw new u.LG("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(f.user.email!==b.user.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new u.LG("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await a.context.internalAdapter.createAccount({userId:b.user.id,providerId:c.id,accountId:g,accessToken:a.body.idToken.accessToken,idToken:d,refreshToken:a.body.idToken.refreshToken,scope:a.body.idToken.scopes?.join(",")})}catch{throw new u.LG("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(a.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await a.context.internalAdapter.updateUser(b.user.id,{name:f.user?.name,image:f.user?.image})}catch(a){console.warn("Could not update user - "+a.toString())}return a.json({url:"",status:!0,redirect:!1})}let d=await v(a,{userId:b.user.id,email:b.user.email},a.body.additionalData),e=await c.createAuthorizationURL({state:d.state,codeVerifier:d.codeVerifier,redirectURI:`${a.context.baseURL}/callback/${c.id}`,scopes:a.body.scopes});return a.body.disableRedirect||a.setHeader("Location",e.toString()),a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),bx=(0,J.Aw)("/unlink-account",{method:"POST",body:m.object({providerId:m.string(),accountId:m.string().optional()}),use:[aA],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let{providerId:b,accountId:c}=a.body,d=await a.context.internalAdapter.findAccounts(a.context.session.user.id);if(1===d.length&&!a.context.options.account?.accountLinking?.allowUnlinkingAll)throw new u.LG("BAD_REQUEST",{message:l.q.FAILED_TO_UNLINK_LAST_ACCOUNT});let e=d.find(a=>c?a.accountId===c&&a.providerId===b:a.providerId===b);if(!e)throw new u.LG("BAD_REQUEST",{message:l.q.ACCOUNT_NOT_FOUND});return await a.context.internalAdapter.deleteAccount(e.id),a.json({status:!0})}),by=(0,J.Aw)("/get-access-token",{method:"POST",body:m.object({providerId:m.string().meta({description:"The provider ID for the OAuth provider"}),accountId:m.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:m.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,{providerId:c,accountId:d,userId:e}=a.body||{},f=a.request,g=await ax(a);if(f&&!g)throw a.error("UNAUTHORIZED");let h=g?.user?.id||e;if(!h)throw a.error("UNAUTHORIZED");if(!a.context.socialProviders.find(a=>a.id===c))throw new u.LG("BAD_REQUEST",{message:`Provider ${c} is not supported.`});let i=await (0,as.ec)(a);if(!(b=i&&c===i.providerId&&(!d||i.id===d)?i:(await a.context.internalAdapter.findAccounts(h)).find(a=>d?a.id===d&&a.providerId===c:a.providerId===c)))throw new u.LG("BAD_REQUEST",{message:"Account not found"});let j=a.context.socialProviders.find(a=>a.id===c);if(!j)throw new u.LG("BAD_REQUEST",{message:`Provider ${c} not found.`});try{let c=null,d=b.accessTokenExpiresAt&&new Date(b.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(b.refreshToken&&d&&j.refreshAccessToken){let d=await aE(b.refreshToken,a.context);c=await j.refreshAccessToken(d);let e={accessToken:await aF(c.accessToken,a.context),accessTokenExpiresAt:c.accessTokenExpiresAt,refreshToken:await aF(c.refreshToken,a.context),refreshTokenExpiresAt:c.refreshTokenExpiresAt},f=null;b.id&&(f=await a.context.internalAdapter.updateAccount(b.id,e)),a.context.options.account?.storeAccountCookie&&await (0,as.Ce)(a,{...b,...f??e})}let e=c?.accessTokenExpiresAt?"string"==typeof c.accessTokenExpiresAt?new Date(c.accessTokenExpiresAt):c.accessTokenExpiresAt:b.accessTokenExpiresAt?"string"==typeof b.accessTokenExpiresAt?new Date(b.accessTokenExpiresAt):b.accessTokenExpiresAt:void 0,f={accessToken:c?.accessToken??await aE(b.accessToken??"",a.context),accessTokenExpiresAt:e,scopes:b.scope?.split(",")??[],idToken:c?.idToken??b.idToken??void 0};return a.json(f)}catch(a){throw new u.LG("BAD_REQUEST",{message:"Failed to get a valid access token",cause:a})}}),bz=(0,J.Aw)("/refresh-token",{method:"POST",body:m.object({providerId:m.string().meta({description:"The provider ID for the OAuth provider"}),accountId:m.string().meta({description:"The account ID associated with the refresh token"}).optional(),userId:m.string().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let b,c,{providerId:d,accountId:e,userId:f}=a.body,g=a.request,h=await ax(a);if(g&&!h)throw a.error("UNAUTHORIZED");let i=h?.user?.id||f;if(!i)throw new u.LG("BAD_REQUEST",{message:"Either userId or session is required"});let j=a.context.socialProviders.find(a=>a.id===d);if(!j)throw new u.LG("BAD_REQUEST",{message:`Provider ${d} not found.`});if(!j.refreshAccessToken)throw new u.LG("BAD_REQUEST",{message:`Provider ${d} does not support token refreshing.`});let k=await (0,as.ec)(a);if(!(b=k&&(!d||d===k?.providerId)?k:(await a.context.internalAdapter.findAccounts(i)).find(a=>e?a.id===e&&a.providerId===d:a.providerId===d)))throw new u.LG("BAD_REQUEST",{message:"Account not found"});if(!(c=k&&d===k.providerId?k.refreshToken??void 0:b.refreshToken??void 0))throw new u.LG("BAD_REQUEST",{message:"Refresh token not found"});try{let e=await aE(c,a.context),f=await j.refreshAccessToken(e);if(b.id){let c={...b||{},accessToken:await aF(f.accessToken,a.context),refreshToken:await aF(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken};await a.context.internalAdapter.updateAccount(b.id,c)}return k&&d===k.providerId&&a.context.options.account?.storeAccountCookie&&await (0,as.Ce)(a,{...k,accessToken:await aF(f.accessToken,a.context),refreshToken:await aF(f.refreshToken,a.context),accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||k.scope,idToken:f.idToken||k.idToken}),a.json({accessToken:f.accessToken,refreshToken:f.refreshToken,accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")||b.scope,idToken:f.idToken||b.idToken,providerId:b.providerId,accountId:b.accountId})}catch(a){throw new u.LG("BAD_REQUEST",{message:"Failed to refresh access token",cause:a})}}),bA=m.optional(m.object({accountId:m.string().meta({description:"The provider given account id for which to get the account info"}).optional()})),bB=(0,J.Aw)("/account-info",{method:"GET",use:[ay],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:bA},async a=>{let b,c=a.query?.accountId;if(c){let d=await a.context.internalAdapter.findAccount(c);d&&(b=d)}else if(a.context.options.account?.storeAccountCookie){let c=await (0,as.ec)(a);c&&(b=c)}if(!b||b.userId!==a.context.session.user.id)throw new u.LG("BAD_REQUEST",{message:"Account not found"});let d=a.context.socialProviders.find(a=>a.id===b.providerId);if(!d)throw new u.LG("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${b.providerId} but it is not configured`});let e=await by({...a,method:"POST",body:{accountId:b.id,providerId:b.providerId},returnHeaders:!1,returnStatus:!1});if(!e.accessToken)throw new u.LG("BAD_REQUEST",{message:"Access token not found"});let f=await d.getUserInfo({...e,accessToken:e.accessToken});return a.json(f)});async function bC(a,b,c,d=3600,e){return await (0,ar.FA)({email:b.toLowerCase(),updateTo:c,...e},a,d)}async function bD(a,b){if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new u.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await bC(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),d=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${d}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:b,url:e,token:c},a.request))}let bE=(0,J.Aw)("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:m.object({email:m.email().meta({description:"The email to send the verification email to"}),callbackURL:m.string().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async a=>{if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new u.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:b}=a.body,c=await ax(a);if(!c){let c=await a.context.internalAdapter.findUserByEmail(b);return c?await bD(a,c.user):await bC(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),a.json({status:!0})}if(c?.user.email!==b)throw new u.LG("BAD_REQUEST",{message:l.q.EMAIL_MISMATCH});if(c?.user.emailVerified)throw new u.LG("BAD_REQUEST",{message:l.q.EMAIL_ALREADY_VERIFIED});return await bD(a,c.user),a.json({status:!0})}),bF=(0,J.Aw)("/verify-email",{method:"GET",operationId:"verifyEmail",query:m.object({token:m.string().meta({description:"The token to verify the email"}),callbackURL:m.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[N(a=>a.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async a=>{let b;function c(b){if(a.query.callbackURL){if(a.query.callbackURL.includes("?"))throw a.redirect(`${a.query.callbackURL}&error=${b}`);throw a.redirect(`${a.query.callbackURL}?error=${b}`)}throw new u.LG("UNAUTHORIZED",{message:b})}let{token:d}=a.query;try{b=await (0,bc.V)(d,new TextEncoder().encode(a.context.secret),{algorithms:["HS256"]})}catch(a){if(a instanceof bd.n)return c("token_expired");return c("invalid_token")}let e=m.object({email:m.email(),updateTo:m.string().optional(),requestType:m.string().optional()}).parse(b.payload),f=await a.context.internalAdapter.findUserByEmail(e.email);if(!f)return c("user_not_found");if(e.updateTo){let b=await ax(a);if(b&&b.user.email!==e.email)return c("unauthorized");switch(e.requestType){case"change-email-confirmation":{let b=await bC(a.context.secret,e.email,e.updateTo,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),c=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/"),d=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;if(a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...f.user,email:e.updateTo},url:d,token:b},a.request)),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0})}case"change-email-verification":{let c=b;if(!c){let b=await a.context.internalAdapter.createSession(f.user.id);if(!b)throw new u.LG("INTERNAL_SERVER_ERROR",{message:l.q.FAILED_TO_CREATE_SESSION});c={session:b,user:f.user}}a.context.options.emailVerification?.onEmailVerification&&await a.context.options.emailVerification.onEmailVerification(f.user,a.request);let d=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!0});if(a.context.options.emailVerification?.afterEmailVerification&&await a.context.options.emailVerification.afterEmailVerification(d,a.request),await (0,k.$G)(a,{session:c.session,user:{...c.user,email:e.updateTo,emailVerified:!0}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:(0,U.kc)(a.context.options,d)})}default:{let c=b;if(!c){let b=await a.context.internalAdapter.createSession(f.user.id);if(!b)throw new u.LG("INTERNAL_SERVER_ERROR",{message:l.q.FAILED_TO_CREATE_SESSION});c={session:b,user:f.user}}let d=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!1}),g=await bC(a.context.secret,e.updateTo),h=a.query.callbackURL?encodeURIComponent(a.query.callbackURL):encodeURIComponent("/");if(a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:d,url:`${a.context.baseURL}/verify-email?token=${g}&callbackURL=${h}`,token:g},a.request)),await (0,k.$G)(a,{session:c.session,user:{...c.user,email:e.updateTo,emailVerified:!1}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:(0,U.kc)(a.context.options,d)})}}}if(f.user.emailVerified){if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})}a.context.options.emailVerification?.beforeEmailVerification&&await a.context.options.emailVerification.beforeEmailVerification(f.user,a.request),a.context.options.emailVerification?.onEmailVerification&&await a.context.options.emailVerification.onEmailVerification(f.user,a.request);let g=await a.context.internalAdapter.updateUserByEmail(e.email,{emailVerified:!0});if(a.context.options.emailVerification?.afterEmailVerification&&await a.context.options.emailVerification.afterEmailVerification(g,a.request),a.context.options.emailVerification?.autoSignInAfterVerification){let b=await ax(a);if(b&&b.user.email===e.email)await (0,k.$G)(a,{session:b.session,user:{...b.user,emailVerified:!0}});else{let b=await a.context.internalAdapter.createSession(f.user.id);if(!b)throw new u.LG("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await (0,k.$G)(a,{session:b,user:{...f.user,emailVerified:!0}})}}if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})});async function bG(a,b){let{userInfo:c,account:d,callbackURL:e,disableSignUp:f,overrideUserInfo:g}=b,h=await a.context.internalAdapter.findOAuthUser(c.email.toLowerCase(),d.accountId,d.providerId).catch(b=>{z.vF.error("Better auth was unable to query your database.\nError: ",b);let c=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${c}?error=internal_server_error`)}),i=h?.user,j=!i;if(h){let e=h.linkedAccount??h.accounts.find(a=>a.providerId===d.providerId&&a.accountId===d.accountId);if(e){let b=a.context.options.account?.updateAccountOnSignIn!==!1?Object.fromEntries(Object.entries({idToken:d.idToken,accessToken:await aF(d.accessToken,a.context),refreshToken:await aF(d.refreshToken,a.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope}).filter(([a,b])=>void 0!==b)):{};a.context.options.account?.storeAccountCookie&&await (0,as.Ce)(a,{...e,...b}),Object.keys(b).length>0&&await a.context.internalAdapter.updateAccount(e.id,b),c.emailVerified&&!h.user.emailVerified&&c.email.toLowerCase()===h.user.email&&await a.context.internalAdapter.updateUser(h.user.id,{emailVerified:!0})}else{let e=a.context.options.account?.accountLinking,f=a.context.options.account?.accountLinking?.trustedProviders;if(!(b.isTrustedProvider||f?.includes(d.providerId))&&!c.emailVerified||e?.enabled===!1||e?.disableImplicitLinking===!0)return(0,z.yz)()&&z.vF.warn(`User already exist but account isn't linked to ${d.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await a.context.internalAdapter.linkAccount({providerId:d.providerId,accountId:c.id.toString(),userId:h.user.id,accessToken:await aF(d.accessToken,a.context),refreshToken:await aF(d.refreshToken,a.context),idToken:d.idToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope})}catch(a){return z.vF.error("Unable to link account",a),{error:"unable to link account",data:null}}c.emailVerified&&!h.user.emailVerified&&c.email.toLowerCase()===h.user.email&&await a.context.internalAdapter.updateUser(h.user.id,{emailVerified:!0})}if(g){let{id:b,...d}=c;i=await a.context.internalAdapter.updateUser(h.user.id,{...d,email:c.email.toLowerCase(),emailVerified:c.email.toLowerCase()===h.user.email&&h.user.emailVerified||c.emailVerified})}}else{if(f)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:b,...f}=c,g={accessToken:await aF(d.accessToken,a.context),refreshToken:await aF(d.refreshToken,a.context),idToken:d.idToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scope,providerId:d.providerId,accountId:c.id.toString()},{user:h,account:j}=await a.context.internalAdapter.createOAuthUser({...f,email:c.email.toLowerCase()},g);if(i=h,a.context.options.account?.storeAccountCookie&&await (0,as.Ce)(a,j),!c.emailVerified&&i&&a.context.options.emailVerification?.sendOnSignUp&&a.context.options.emailVerification?.sendVerificationEmail){let b=await bC(a.context.secret,i.email,void 0,a.context.options.emailVerification?.expiresIn),c=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${e}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:i,url:c,token:b},a.request))}}catch(a){if(z.vF.error(a),a instanceof u.LG)return{error:a.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!i)return{error:"unable to create user",data:null,isRegister:!1};let k=await a.context.internalAdapter.createSession(i.id);return k?{data:{session:k,user:i},error:null,isRegister:j}:{error:"unable to create session",data:null,isRegister:!1}}let bH=m.object({code:m.string().optional(),error:m.string().optional(),device_id:m.string().optional(),error_description:m.string().optional(),state:m.string().optional(),user:m.string().optional()}),bI=(0,J.Aw)("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:bH.optional(),query:bH.optional(),metadata:{...x,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async a=>{let b,c,d,e=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;if("POST"===a.method){let b=a.body?bH.parse(a.body):{},c=a.query?bH.parse(a.query):{},d=bH.parse({...b,...c}),e=new URLSearchParams;for(let[a,b]of Object.entries(d))null!=b&&e.set(a,String(b));let f=`${a.context.baseURL}/callback/${a.params.id}?${e.toString()}`;throw a.redirect(f)}try{if("GET"===a.method)b=bH.parse(a.query);else if("POST"===a.method)b=bH.parse(a.body);else throw Error("Unsupported method")}catch(b){throw a.context.logger.error("INVALID_CALLBACK_REQUEST",b),a.redirect(`${e}?error=invalid_callback_request`)}let{code:f,error:g,state:h,error_description:i,device_id:j,user:l}=b;if(!h){a.context.logger.error("State not found",g);let b=`${e}${e.includes("?")?"&":"?"}state=state_not_found`;throw a.redirect(b)}let{codeVerifier:m,callbackURL:n,link:o,errorURL:p,newUserURL:q,requestSignUp:r}=await w(a);function s(b,c){let d=p??e,f=new URLSearchParams({error:b});c&&f.set("error_description",c);let g=`${d}${d.includes("?")?"&":"?"}${f.toString()}`;throw a.redirect(g)}if(g&&s(g,i),!f)throw a.context.logger.error("Code not found"),s("no_code");let t=a.context.socialProviders.find(b=>b.id===a.params.id);if(!t)throw a.context.logger.error("Oauth provider with id",a.params.id,"not found"),s("oauth_provider_not_found");try{c=await t.validateAuthorizationCode({code:f,codeVerifier:m,deviceId:j,redirectURI:`${a.context.baseURL}/callback/${t.id}`})}catch(b){throw a.context.logger.error("",b),s("invalid_code")}if(!c)throw s("invalid_code");let u=l?(0,y.$l)(l):null,v=await t.getUserInfo({...c,user:u??void 0}).then(a=>a?.user);if(!v)return a.context.logger.error("Unable to get user info"),s("unable_to_get_user_info");if(!n)throw a.context.logger.error("No callback URL found"),s("no_callback_url");if(o){let b;if(!a.context.options.account?.accountLinking?.trustedProviders?.includes(t.id)&&!v.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return a.context.logger.error("Unable to link account - untrusted provider"),s("unable_to_link_account");if(v.email!==o.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return s("email_doesn't_match");let d=await a.context.internalAdapter.findAccount(String(v.id));if(d){if(d.userId.toString()!==o.userId.toString())return s("account_already_linked_to_different_user");let b=Object.fromEntries(Object.entries({accessToken:await aF(c.accessToken,a.context),refreshToken:await aF(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scopes?.join(",")}).filter(([a,b])=>void 0!==b));await a.context.internalAdapter.updateAccount(d.id,b)}else if(!await a.context.internalAdapter.createAccount({userId:o.userId,providerId:t.id,accountId:String(v.id),...c,accessToken:await aF(c.accessToken,a.context),refreshToken:await aF(c.refreshToken,a.context),scope:c.scopes?.join(",")}))return s("unable_to_link_account");try{b=n.toString()}catch{b=n}throw a.redirect(b)}if(!v.email)return a.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),s("email_not_found");let x={providerId:t.id,accountId:String(v.id),...c,scope:c.scopes?.join(",")},z=await bG(a,{userInfo:{...v,id:String(v.id),email:v.email,name:v.name||v.email},account:x,callbackURL:n,disableSignUp:t.disableImplicitSignUp&&!r||t.options?.disableSignUp,overrideUserInfo:t.options?.overrideUserInfoOnSignIn});if(z.error)return a.context.logger.error(z.error.split(" ").join("_")),s(z.error.split(" ").join("_"));let{session:A,user:B}=z.data;await (0,k.$G)(a,{session:A,user:B});try{d=(z.isRegister&&q||n).toString()}catch{d=z.isRegister&&q||n}throw a.redirect(d)});function bJ(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}let bK=(0,J.Aw)("/error",{method:"GET",metadata:{...x,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async a=>{let b=new URL(a.request?.url||""),c=b.searchParams.get("error")||"UNKNOWN",d=b.searchParams.get("error_description")||null,e=/^[\'A-Za-z0-9_-]+$/.test(c||"")?c:"UNKNOWN",f=d?bJ(d):null,g=new URLSearchParams;g.set("error",e),d&&g.set("error_description",d);let h=a.context.options,i=h.onAPIError?.errorURL;return i?new Response(null,{status:302,headers:{Location:`${i}${i.includes("?")?"&":"?"}${g.toString()}`}}):z.KV&&!h.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${g.toString()}`}}):new Response(((a,b="Unknown",c=null)=>{let d=a.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${d?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${d?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${d?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${d?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${d?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${d?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${d?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${d?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${d?.colors?.primary||"black"};
        --primary-foreground: ${d?.colors?.primaryForeground||"white"};
        --background: ${d?.colors?.background||"white"};
        --foreground: ${d?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${d?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${d?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${d?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${d?.colors?.primary||"white"};
          --primary-foreground: ${d?.colors?.primaryForeground||"black"};
          --background: ${d?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${d?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${d?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${d?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${d?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${d?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${d?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${d?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${d?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${d?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${d?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${d?.disableTitleBorder?"transparent":d?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${d?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${bJ(b)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!c?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(b)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:c}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/reference/errors/${encodeURIComponent(b)}?askai=${encodeURIComponent(`What does the error code ${b} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`})(a.context.options,e,f),{headers:{"Content-Type":"text/html"}})}),bL=(0,J.Aw)("/ok",{method:"GET",metadata:{...x,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async a=>a.json({ok:!0}));async function bM(a,b){let c=(await a.context.internalAdapter.findAccounts(b.userId))?.find(a=>"credential"===a.providerId),d=c?.password;return!!c&&!!d&&await a.context.password.verify({hash:d,password:b.password})}async function bN(a,b){let c=(await b.context.internalAdapter.findAccounts(a))?.find(a=>"credential"===a.providerId),d=c?.password;if(!c||!d||!b.body.password)throw new u.LG("BAD_REQUEST",{message:"No password credential found"});if(!await b.context.password.verify({hash:d,password:b.body.password}))throw new u.LG("BAD_REQUEST",{message:"Invalid password"});return!0}function bO(a,b,c){let d=b?new URL(b,a.baseURL):new URL(`${a.baseURL}/error`);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}let bP=(0,J.Aw)("/request-password-reset",{method:"POST",body:m.object({email:m.email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:m.string().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.emailAndPassword?.sendResetPassword)throw a.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new u.LG("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:b,redirectTo:c}=a.body,d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)return(0,y.$C)(24),await a.context.internalAdapter.findVerificationValue("dummy-verification-token"),a.context.logger.error("Reset Password: User not found",{email:b}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let e=(0,T.p)(a.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),f=(0,y.$C)(24);await a.context.internalAdapter.createVerificationValue({value:d.user.id,identifier:`reset-password:${f}`,expiresAt:e});let g=c?encodeURIComponent(c):"",h=`${a.context.baseURL}/reset-password/${f}?callbackURL=${g}`;return await a.context.runInBackgroundOrAwait(a.context.options.emailAndPassword.sendResetPassword({user:d.user,url:h,token:f},a.request)),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),bQ=(0,J.Aw)("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:m.object({callbackURL:m.string().meta({description:"The URL to redirect the user to reset their password"})}),use:[N(a=>a.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async a=>{let{token:b}=a.params,{callbackURL:c}=a.query;if(!b||!c)throw a.redirect(bO(a.context,c,{error:"INVALID_TOKEN"}));let d=await a.context.internalAdapter.findVerificationValue(`reset-password:${b}`);if(!d||d.expiresAt<new Date)throw a.redirect(bO(a.context,c,{error:"INVALID_TOKEN"}));throw a.redirect(function(a,b,c){let d=new URL(b,a.baseURL);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}(a.context,c,{token:b}))}),bR=(0,J.Aw)("/reset-password",{method:"POST",operationId:"resetPassword",query:m.object({token:m.string().optional()}).optional(),body:m.object({newPassword:m.string().meta({description:"The new password to set"}),token:m.string().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let b=a.body.token||a.query?.token;if(!b)throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_TOKEN});let{newPassword:c}=a.body,d=a.context.password?.config.minPasswordLength,e=a.context.password?.config.maxPasswordLength;if(c.length<d)throw new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_SHORT});if(c.length>e)throw new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_LONG});let f=`reset-password:${b}`,g=await a.context.internalAdapter.findVerificationValue(f);if(!g||g.expiresAt<new Date)throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_TOKEN});let h=g.value,i=await a.context.password.hash(c);if((await a.context.internalAdapter.findAccounts(h)).find(a=>"credential"===a.providerId)?await a.context.internalAdapter.updatePassword(h,i):await a.context.internalAdapter.createAccount({userId:h,providerId:"credential",password:i,accountId:h}),await a.context.internalAdapter.deleteVerificationValue(g.id),a.context.options.emailAndPassword?.onPasswordReset){let b=await a.context.internalAdapter.findUserById(h);b&&await a.context.options.emailAndPassword.onPasswordReset({user:b},a.request)}return a.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await a.context.internalAdapter.deleteSessions(h),a.json({status:!0})}),bS=(0,J.Aw)("/verify-password",{method:"POST",body:m.object({password:m.string().meta({description:"The password to verify"})}),metadata:{scope:"server",openapi:{operationId:"verifyPassword",description:"Verify the current user's password",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}},use:[az]},async a=>{let{password:b}=a.body,c=a.context.session;if(!await bM(a,{password:b,userId:c.user.id}))throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_PASSWORD});return a.json({status:!0})}),bT=m.object({callbackURL:m.string().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:m.string().optional(),errorCallbackURL:m.string().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:bu,disableRedirect:m.boolean().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:m.optional(m.object({token:m.string().meta({description:"ID token from the provider"}),nonce:m.string().meta({description:"Nonce used to generate the token"}).optional(),accessToken:m.string().meta({description:"Access token from the provider"}).optional(),refreshToken:m.string().meta({description:"Refresh token from the provider"}).optional(),expiresAt:m.number().meta({description:"Expiry date of the token"}).optional()})),scopes:m.array(m.string()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:m.boolean().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:m.string().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:m.record(m.string(),m.any()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),bU=(0,J.Aw)("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(b)try{await a.context.internalAdapter.deleteSession(b)}catch(b){a.context.logger.error("Failed to delete session from database",b)}return(0,k.eC)(a),a.json({success:!0})}),bV=m.object({name:m.string(),email:m.email(),password:m.string().nonempty(),image:m.string().optional(),callbackURL:m.string().optional(),rememberMe:m.boolean().optional()}).and(m.record(m.string(),m.any())),bW=m.record(m.string().meta({description:"Field name must be a string"}),m.any()),bX=(0,J.Aw)("/change-password",{method:"POST",operationId:"changePassword",body:m.object({newPassword:m.string().meta({description:"The new password to set"}),currentPassword:m.string().meta({description:"The current password is required"}),revokeOtherSessions:m.boolean().meta({description:"Must be a boolean value"}).optional()}),use:[az],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async a=>{let{newPassword:b,currentPassword:c,revokeOtherSessions:d}=a.body,e=a.context.session,f=a.context.password.config.minPasswordLength;if(b.length<f)throw a.context.logger.error("Password is too short"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_SHORT});let g=a.context.password.config.maxPasswordLength;if(b.length>g)throw a.context.logger.error("Password is too long"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_LONG});let h=(await a.context.internalAdapter.findAccounts(e.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!h||!h.password)throw new u.LG("BAD_REQUEST",{message:l.q.CREDENTIAL_ACCOUNT_NOT_FOUND});let i=await a.context.password.hash(b);if(!await a.context.password.verify({hash:h.password,password:c}))throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_PASSWORD});await a.context.internalAdapter.updateAccount(h.id,{password:i});let j=null;if(d){await a.context.internalAdapter.deleteSessions(e.user.id);let b=await a.context.internalAdapter.createSession(e.user.id);if(!b)throw new u.LG("INTERNAL_SERVER_ERROR",{message:l.q.FAILED_TO_GET_SESSION});await (0,k.$G)(a,{session:b,user:e.user}),j=b.token}return a.json({token:j,user:(0,U.kc)(a.context.options,e.user)})}),bY=(0,J.Aw)({method:"POST",body:m.object({newPassword:m.string().meta({description:"The new password to set is required"})}),use:[az]},async a=>{let{newPassword:b}=a.body,c=a.context.session,d=a.context.password.config.minPasswordLength;if(b.length<d)throw a.context.logger.error("Password is too short"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_SHORT});let e=a.context.password.config.maxPasswordLength;if(b.length>e)throw a.context.logger.error("Password is too long"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_LONG});let f=(await a.context.internalAdapter.findAccounts(c.user.id)).find(a=>"credential"===a.providerId&&a.password),g=await a.context.password.hash(b);if(!f)return await a.context.internalAdapter.linkAccount({userId:c.user.id,providerId:"credential",accountId:c.user.id,password:g}),a.json({status:!0});throw new u.LG("BAD_REQUEST",{message:"user already has a password"})}),bZ=(0,J.Aw)("/delete-user",{method:"POST",use:[az],body:m.object({callbackURL:m.string().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:m.string().meta({description:"The password of the user is required to delete the user"}).optional(),token:m.string().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new u.LG("NOT_FOUND");let b=a.context.session;if(a.body.password){let c=(await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!c||!c.password)throw new u.LG("BAD_REQUEST",{message:l.q.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await a.context.password.verify({hash:c.password,password:a.body.password}))throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_PASSWORD})}if(a.body.token)return await b$({...a,query:{token:a.body.token}}),a.json({success:!0,message:"User deleted"});if(a.context.options.user.deleteUser?.sendDeleteAccountVerification){let c=(0,i.k)(32,"0-9","a-z");await a.context.internalAdapter.createVerificationValue({value:b.user.id,identifier:`delete-account-${c}`,expiresAt:new Date(Date.now()+1e3*(a.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});let d=`${a.context.baseURL}/delete-user/callback?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.runInBackgroundOrAwait(a.context.options.user.deleteUser.sendDeleteAccountVerification({user:b.user,url:d,token:c},a.request)),a.json({success:!0,message:"Verification email sent"})}if(!a.body.password&&0!==a.context.sessionConfig.freshAge){let c=new Date(b.session.createdAt).getTime(),d=1e3*a.context.sessionConfig.freshAge;if(Date.now()-c>1e3*d)throw new u.LG("BAD_REQUEST",{message:l.q.SESSION_EXPIRED})}let c=a.context.options.user.deleteUser?.beforeDelete;c&&await c(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),(0,k.eC)(a);let d=a.context.options.user.deleteUser?.afterDelete;return d&&await d(b.user,a.request),a.json({success:!0,message:"User deleted"})}),b$=(0,J.Aw)("/delete-user/callback",{method:"GET",query:m.object({token:m.string().meta({description:"The token to verify the deletion request"}),callbackURL:m.string().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[N(a=>a.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new u.LG("NOT_FOUND");let b=await ax(a);if(!b)throw new u.LG("NOT_FOUND",{message:l.q.FAILED_TO_GET_USER_INFO});let c=await a.context.internalAdapter.findVerificationValue(`delete-account-${a.query.token}`);if(!c||c.expiresAt<new Date||c.value!==b.user.id)throw new u.LG("NOT_FOUND",{message:l.q.INVALID_TOKEN});let d=a.context.options.user.deleteUser?.beforeDelete;d&&await d(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),await a.context.internalAdapter.deleteAccounts(b.user.id),await a.context.internalAdapter.deleteVerificationValue(c.id),(0,k.eC)(a);let e=a.context.options.user.deleteUser?.afterDelete;if(e&&await e(b.user,a.request),a.query.callbackURL)throw a.redirect(a.query.callbackURL||"/");return a.json({success:!0,message:"User deleted"})}),b_=(0,J.Aw)("/change-email",{method:"POST",body:m.object({newEmail:m.email().meta({description:"The new email address to set must be a valid email address"}),callbackURL:m.string().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[az],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.user?.changeEmail?.enabled)throw a.context.logger.error("Change email is disabled."),new u.LG("BAD_REQUEST",{message:"Change email is disabled"});let b=a.body.newEmail.toLowerCase();if(b===a.context.session.user.email)throw a.context.logger.error("Email is the same"),new u.LG("BAD_REQUEST",{message:"Email is the same"});if(await a.context.internalAdapter.findUserByEmail(b))throw a.context.logger.error("Email already exists"),new u.LG("UNPROCESSABLE_ENTITY",{message:l.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(!0!==a.context.session.user.emailVerified&&a.context.options.user.changeEmail.updateEmailWithoutVerification){if(await a.context.internalAdapter.updateUserByEmail(a.context.session.user.email,{email:b}),await (0,k.$G)(a,{session:a.context.session.session,user:{...a.context.session.user,email:b}}),a.context.options.emailVerification?.sendVerificationEmail){let c=await bC(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request))}return a.json({status:!0})}if(a.context.session.user.emailVerified&&(a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification)){let c=await bC(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`,e=a.context.options.user.changeEmail.sendChangeEmailConfirmation||a.context.options.user.changeEmail.sendChangeEmailVerification;return e&&await a.context.runInBackgroundOrAwait(e({user:a.context.session.user,newEmail:b,url:d,token:c},a.request)),a.json({status:!0})}if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new u.LG("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await bC(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request)),a.json({status:!0})});function b0(a){if(null===a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.iterator in a)&&(!(Symbol.toStringTag in a)||"[object Module]"===Object.prototype.toString.call(a))}function b1(a){return(...b)=>b.reduce((b,c)=>(function a(b,c,d=".",e){if(!b0(c))return a(b,{},d,e);let f=Object.assign({},c);for(let c in b){if("__proto__"===c||"constructor"===c)continue;let g=b[c];null!=g&&(e&&e(f,c,g,d)||(Array.isArray(g)&&Array.isArray(f[c])?f[c]=[...g,...f[c]]:b0(g)&&b0(f[c])?f[c]=a(g,f[c],(d?`${d}.`:"")+c.toString(),e):f[c]=g))}return f})(b,c,"",a),{})}let b2=b1();b1((a,b,c)=>{if(void 0!==a[b]&&"function"==typeof c)return a[b]=c(a[b]),!0}),b1((a,b,c)=>{if(Array.isArray(a[b])&&"function"==typeof c)return a[b]=c(a[b]),!0});let b3=b1((a,b,c)=>{if(Array.isArray(a[b])&&Array.isArray(c))return a[b]=c,!0}),b4=new WeakMap;async function b5(a,b){let c={};for(let d of b){let b=!1;try{b=d.matcher(a)}catch(c){let b=b4.get(d.handler)??"unknown";throw a.context.logger.error(`An error occurred during ${b} hook matcher execution:`,c),new u.LG("INTERNAL_SERVER_ERROR",{message:"An error occurred during hook matcher execution. Check the logs for more details."})}if(b){let b=await d.handler({...a,returnHeaders:!1}).catch(b=>{throw b instanceof u.LG&&(0,z.p8)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),b});if(b&&"object"==typeof b){if("context"in b&&"object"==typeof b.context){let{headers:a,...d}=b.context;a instanceof Headers&&(c.headers?a.forEach((a,b)=>{c.headers?.set(b,a)}):c.headers=a),c=b3(d,c);continue}return b}}}return{context:c}}async function b6(a,b){for(let c of b)if(c.matcher(a)){let b=await c.handler(a).catch(b=>{if(b instanceof u.LG)return(0,z.p8)(a.context.logger.level,"debug")&&(b.stack=b.errorStack),{response:b,headers:b.headers?new Headers(b.headers):null};throw b});b.headers&&b.headers.forEach((b,c)=>{a.context.responseHeaders?"set-cookie"===c.toLowerCase()?a.context.responseHeaders.append(c,b):a.context.responseHeaders.set(c,b):a.context.responseHeaders=new Headers({[c]:b})}),b.response&&(a.context.returned=b.response)}return{response:a.context.returned,headers:a.context.responseHeaders}}function b7(a,b){let c=b.plugins?.reduce((a,b)=>({...a,...b.endpoints}),{})??{},d=b.plugins?.map(b=>b.middlewares?.map(b=>{let c=async c=>{let d=await a;return b.middleware({...c,context:{...d,...c.context}})};return c.options=b.middleware.options,{path:b.path,middleware:c}})).filter(a=>void 0!==a).flat()||[];return{api:function(a,b){let c={};for(let[d,e]of Object.entries(a))c[d]=async a=>{let c=async()=>{let c=await b,d={...a,context:{...c,returned:void 0,responseHeaders:void 0,session:null},path:e.path,headers:a?.headers?new Headers(a?.headers):void 0};return(0,r.Qs)(d,async()=>{let{beforeHooks:b,afterHooks:f}=function(a){let b=a.options.plugins||[],c=[],d=[],e=a.options.hooks?.before;e&&(b4.set(e,"user"),c.push({matcher:()=>!0,handler:e}));let f=a.options.hooks?.after;f&&(b4.set(f,"user"),d.push({matcher:()=>!0,handler:f}));let g=b.filter(a=>a.hooks?.before).map(a=>a.hooks?.before).flat(),h=b.filter(a=>a.hooks?.after).map(a=>a.hooks?.after).flat();return g.length&&c.push(...g),h.length&&d.push(...h),{beforeHooks:c,afterHooks:d}}(c),g=await b5(d,b);if("context"in g&&g.context&&"object"==typeof g.context){let{headers:a,...b}=g.context;a&&a.forEach((a,b)=>{d.headers.set(b,a)}),d=b3(b,d)}else if(g)return a?.asResponse?(0,u.Zr)(g,{headers:a?.headers}):a?.returnHeaders?{headers:a?.headers,response:g}:g;d.asResponse=!1,d.returnHeaders=!0,d.returnStatus=!0;let h=await (0,r.Qs)(d,()=>e(d)).catch(a=>{if(a instanceof u.LG)return{response:a,status:a.statusCode,headers:a.headers?new Headers(a.headers):null};throw a});if(h&&h instanceof Response)return h;d.context.returned=h.response,d.context.responseHeaders=h.headers;let i=await b6(d,f);if(i.response&&(h.response=i.response),h.response instanceof u.LG&&(0,z.p8)(c.logger.level,"debug")&&(h.response.stack=h.response.errorStack),h.response instanceof u.LG&&!a?.asResponse)throw h.response;return a?.asResponse?(0,u.Zr)(h.response,{headers:h.headers,status:h.status}):a?.returnHeaders?a?.returnStatus?{headers:h.headers,response:h.response,status:h.status}:{headers:h.headers,response:h.response}:a?.returnStatus?{response:h.response,status:h.status}:h.response})};return await (0,r.ty)()?c():(0,r.uy)(new WeakMap,c)},c[d].path=e.path,c[d].options=e.options;return c}({signInSocial:(0,J.Aw)("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:bT,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async a=>{let b=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!b)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new u.LG("NOT_FOUND",{message:l.q.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!b.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new u.LG("NOT_FOUND",{message:l.q.ID_TOKEN_NOT_SUPPORTED});let{token:c,nonce:d}=a.body.idToken;if(!await b.verifyIdToken(c,d))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_TOKEN});let e=await b.getUserInfo({idToken:c,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!e||!e?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.FAILED_TO_GET_USER_INFO});if(!e.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new u.LG("UNAUTHORIZED",{message:l.q.USER_EMAIL_NOT_FOUND});let f=await bG(a,{userInfo:{...e.user,email:e.user.email,id:String(e.user.id),name:e.user.name||"",image:e.user.image,emailVerified:e.user.emailVerified||!1},account:{providerId:b.id,accountId:String(e.user.id),accessToken:a.body.idToken.accessToken},callbackURL:a.body.callbackURL,disableSignUp:b.disableImplicitSignUp&&!a.body.requestSignUp||b.disableSignUp});if(f.error)throw new u.LG("UNAUTHORIZED",{message:f.error});return await (0,k.$G)(a,f.data),a.json({redirect:!1,token:f.data.session.token,url:void 0,user:(0,U.kc)(a.context.options,f.data.user)})}let{codeVerifier:c,state:d}=await v(a,void 0,a.body.additionalData),e=await b.createAuthorizationURL({state:d,codeVerifier:c,redirectURI:`${a.context.baseURL}/callback/${b.id}`,scopes:a.body.scopes,loginHint:a.body.loginHint});return a.body.disableRedirect||a.setHeader("Location",e.toString()),a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),callbackOAuth:bI,getSession:aw(),signOut:bU,signUpEmail:(0,J.Aw)("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",use:[P],body:bV,metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>(0,r.iD)(a.context.adapter,async()=>{let b;if(!a.context.options.emailAndPassword?.enabled||a.context.options.emailAndPassword?.disableSignUp)throw new u.LG("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let c=a.body,{name:d,email:e,password:f,image:g,callbackURL:h,rememberMe:i,...j}=c;if(!m.email().safeParse(e).success)throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_EMAIL});if(!f||"string"!=typeof f)throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_PASSWORD});let n=a.context.password.config.minPasswordLength;if(f.length<n)throw a.context.logger.error("Password is too short"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_SHORT});let o=a.context.password.config.maxPasswordLength;if(f.length>o)throw a.context.logger.error("Password is too long"),new u.LG("BAD_REQUEST",{message:l.q.PASSWORD_TOO_LONG});if((await a.context.internalAdapter.findUserByEmail(e))?.user)throw a.context.logger.info(`Sign-up attempt for existing email: ${e}`),new u.LG("UNPROCESSABLE_ENTITY",{message:l.q.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let p=await a.context.password.hash(f);try{let c=(0,U.pS)(a.context.options,j,"create");if(!(b=await a.context.internalAdapter.createUser({email:e.toLowerCase(),name:d,image:g,...c,emailVerified:!1})))throw new u.LG("BAD_REQUEST",{message:l.q.FAILED_TO_CREATE_USER})}catch(b){if((0,z.yz)()&&a.context.logger.error("Failed to create user",b),b instanceof u.LG)throw b;throw a.context.logger?.error("Failed to create user",b),new u.LG("UNPROCESSABLE_ENTITY",{message:l.q.FAILED_TO_CREATE_USER})}if(!b)throw new u.LG("UNPROCESSABLE_ENTITY",{message:l.q.FAILED_TO_CREATE_USER});if(await a.context.internalAdapter.linkAccount({userId:b.id,providerId:"credential",accountId:b.id,password:p}),a.context.options.emailVerification?.sendOnSignUp??a.context.options.emailAndPassword.requireEmailVerification){let d=await bC(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),e=c.callbackURL?encodeURIComponent(c.callbackURL):encodeURIComponent("/"),f=`${a.context.baseURL}/verify-email?token=${d}&callbackURL=${e}`;a.context.options.emailVerification?.sendVerificationEmail&&await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:b,url:f,token:d},a.request))}if(!1===a.context.options.emailAndPassword.autoSignIn||a.context.options.emailAndPassword.requireEmailVerification)return a.json({token:null,user:(0,U.kc)(a.context.options,b)});let q=await a.context.internalAdapter.createSession(b.id,!1===i);if(!q)throw new u.LG("BAD_REQUEST",{message:l.q.FAILED_TO_CREATE_SESSION});return await (0,k.$G)(a,{session:q,user:b},!1===i),a.json({token:q.token,user:(0,U.kc)(a.context.options,b)})})),signInEmail:(0,J.Aw)("/sign-in/email",{method:"POST",operationId:"signInEmail",use:[P],body:m.object({email:m.string().meta({description:"Email of the user"}),password:m.string().meta({description:"Password of the user"}),callbackURL:m.string().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:m.boolean().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async a=>{if(!a.context.options?.emailAndPassword?.enabled)throw a.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new u.LG("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:b,password:c}=a.body;if(!m.email().safeParse(b).success)throw new u.LG("BAD_REQUEST",{message:l.q.INVALID_EMAIL});let d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)throw await a.context.password.hash(c),a.context.logger.error("User not found",{email:b}),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_EMAIL_OR_PASSWORD});let e=d.accounts.find(a=>"credential"===a.providerId);if(!e)throw await a.context.password.hash(c),a.context.logger.error("Credential account not found",{email:b}),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_EMAIL_OR_PASSWORD});let f=e?.password;if(!f)throw await a.context.password.hash(c),a.context.logger.error("Password not found",{email:b}),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_EMAIL_OR_PASSWORD});if(!await a.context.password.verify({hash:f,password:c}))throw a.context.logger.error("Invalid password"),new u.LG("UNAUTHORIZED",{message:l.q.INVALID_EMAIL_OR_PASSWORD});if(a.context.options?.emailAndPassword?.requireEmailVerification&&!d.user.emailVerified){if(!a.context.options?.emailVerification?.sendVerificationEmail)throw new u.LG("FORBIDDEN",{message:l.q.EMAIL_NOT_VERIFIED});if(a.context.options?.emailVerification?.sendOnSignIn){let b=await bC(a.context.secret,d.user.email,void 0,a.context.options.emailVerification?.expiresIn),c=a.body.callbackURL?encodeURIComponent(a.body.callbackURL):encodeURIComponent("/"),e=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${c}`;await a.context.runInBackgroundOrAwait(a.context.options.emailVerification.sendVerificationEmail({user:d.user,url:e,token:b},a.request))}throw new u.LG("FORBIDDEN",{message:l.q.EMAIL_NOT_VERIFIED})}let g=await a.context.internalAdapter.createSession(d.user.id,!1===a.body.rememberMe);if(!g)throw a.context.logger.error("Failed to create session"),new u.LG("UNAUTHORIZED",{message:l.q.FAILED_TO_CREATE_SESSION});return await (0,k.$G)(a,{session:g,user:d.user},!1===a.body.rememberMe),a.body.callbackURL&&a.setHeader("Location",a.body.callbackURL),a.json({redirect:!!a.body.callbackURL,token:g.token,url:a.body.callbackURL,user:(0,U.kc)(a.context.options,d.user)})}),resetPassword:bR,verifyPassword:bS,verifyEmail:bF,sendVerificationEmail:bE,changeEmail:b_,changePassword:bX,setPassword:bY,updateUser:(0,J.Aw)("/update-user",{method:"POST",operationId:"updateUser",body:bW,use:[ay],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async a=>{let b=a.body;if("object"!=typeof b||Array.isArray(b))throw new u.LG("BAD_REQUEST",{message:"Body must be an object"});if(b.email)throw new u.LG("BAD_REQUEST",{message:l.q.EMAIL_CAN_NOT_BE_UPDATED});let{name:c,image:d,...e}=b,f=a.context.session,g=(0,U.pS)(a.context.options,e,"update");if(void 0===d&&void 0===c&&0===Object.keys(g).length)throw new u.LG("BAD_REQUEST",{message:"No fields to update"});let h=await a.context.internalAdapter.updateUser(f.user.id,{name:c,image:d,...g})??{...f.user,...void 0!==c&&{name:c},...void 0!==d&&{image:d},...g};return await (0,k.$G)(a,{session:f.session,user:h}),a.json({status:!0})}),deleteUser:bZ,requestPasswordReset:bP,requestPasswordResetCallback:bQ,listSessions:(0,J.Aw)("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[ay],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async a=>{try{let b=(await a.context.internalAdapter.listSessions(a.context.session.user.id)).filter(a=>a.expiresAt>new Date);return a.json(b.map(b=>(0,U.dc)(a.context.options,b)))}catch(b){throw a.context.logger.error(b),a.error("INTERNAL_SERVER_ERROR")}}),revokeSession:aB,revokeSessions:aC,revokeOtherSessions:aD,linkSocialAccount:bw,listUserAccounts:bv,deleteUserCallback:b$,unlinkAccount:bx,refreshToken:bz,getAccessToken:by,accountInfo:bB,...c,ok:bL,error:bK},a),middlewares:d}}var b8=c(55649),b9=c(24598);let ca="better-auth-secret-12345678901234567890";async function cb(a){let b=a.options,c=b.plugins||[],d=a,e=[];for(let a of c)if(a.init){let c,f=a.init(d);if("object"==typeof(c=(0,b9.y)(f)?await f:f)){if(c.options){let{databaseHooks:a,...d}=c.options;a&&e.push(a),b=b2(b,d)}c.context&&(d={...d,...c.context})}}return e.push(b.databaseHooks),d.internalAdapter=af(d.adapter,{options:b,logger:d.logger,hooks:e.filter(a=>void 0!==a),generateId:d.generateId}),d.options=b,{context:d}}async function cc(a,b){let c=D(a.baseURL,a.basePath,b),d=c?[new URL(c).origin]:[];if(a.trustedOrigins&&(Array.isArray(a.trustedOrigins)&&d.push(...a.trustedOrigins),"function"==typeof a.trustedOrigins)){let c=await a.trustedOrigins(b);d.push(...c)}let e=z._K.BETTER_AUTH_TRUSTED_ORIGINS;return e&&d.push(...e.split(",")),d.filter(a=>!!a)}var cd=c(69744),ce=c(94285);async function cf(){if(e)return e;try{let a="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!a)return;let b=a=>Function("mm","return import(mm)")(a),[{default:c},{default:d}]=await Promise.all([b("fs/promises"),b("path")]),f=await c.readFile(d.join(a,"package.json"),"utf-8");return e=JSON.parse(f)}catch{}}async function cg(a){if(e)return e.dependencies?.[a]||e.devDependencies?.[a]||e.peerDependencies?.[a];try{let b="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!b)throw Error("no-cwd");let c=a=>Function("mm","return import(mm)")(a),[{default:d},{default:e}]=await Promise.all([c("fs/promises"),c("path")]),f=e.join(b,"node_modules",a,"package.json"),g=await d.readFile(f,"utf-8");return JSON.parse(g).version||await ch(a)||void 0}catch{}return await ch(a)}async function ch(a){let b=await cf();if(b)return({...b.dependencies,...b.devDependencies,...b.peerDependencies})[a]}async function ci(){return(await cf())?.name}let cj={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function ck(){for(let[a,b]of Object.entries(cj)){let c=await cg(a);if(c)return{name:b,version:c}}}let cl={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function cm(){for(let[a,b]of Object.entries(cl)){let c=await cg(a);if(c)return{name:b,version:c}}}let cn=a=>Function("mm","return import(mm)")(a);function co(){let a=(...a)=>a.some(a=>!!z._K[a]);return a("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":a("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":a("NETLIFY","NETLIFY_URL")?"netlify":a("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":a("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":a("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":a("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":a("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":a("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":a("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":a("DYNO","HEROKU_APP_NAME")?"heroku":a("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":a("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function cp(){try{if("cloudflare"===co())return"cloudflare";let a=await cn("os"),b=a.cpus();return{deploymentVendor:co(),systemPlatform:a.platform(),systemRelease:a.release(),systemArchitecture:a.arch(),cpuCount:b.length,cpuModel:b.length?b[0].model:null,cpuSpeed:b.length?b[0].speed:null,memory:a.totalmem(),isWSL:await ct(),isDocker:await cs(),isTTY:"undefined"!=typeof process&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function cq(){if("cloudflare"===co())return!1;try{return(await cn("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function cr(){if("cloudflare"===co())return!1;try{return(await cn("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function cs(){return"cloudflare"!==co()&&(void 0===f&&(f=await cq()||await cr()),f)}async function ct(){try{if("cloudflare"===co()||"undefined"==typeof process||process?.platform!=="linux")return!1;let a=await cn("fs");if((await cn("os")).release().toLowerCase().includes("microsoft")){if(await cv())return!1;return!0}return!!a.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await cv()}catch{return!1}}let cu=async()=>{if("cloudflare"===co())return!1;try{return(await cn("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function cv(){return void 0===g&&(g=await cu()||await cs()),g}async function cw(a){let b=await (0,cd.n)("SHA-256").digest(a);return at.K.encode(b)}let cx=null;async function cy(a){if(cx)return cx;let b=await ci();return b?cx=await cw(a?a+b:b):a?cx=await cw(a):cx=(0,ce.q)("a-z","A-Z","0-9")(32)}let cz=async function(){};async function cA(a,b){let c,d=a.telemetry?.debug||(0,z.$F)("BETTER_AUTH_TELEMETRY_DEBUG",!1),e=z.Km.BETTER_AUTH_TELEMETRY_ENDPOINT;if(!e&&!b?.customTrack)return{publish:cz};let f=async a=>{b?.customTrack?await b.customTrack(a).catch(z.vF.error):e&&(d?z.vF.info("telemetry event",JSON.stringify(a,null,2)):await a3(e,{method:"POST",body:a}).catch(z.vF.error))},g=async()=>{let c=a.telemetry?.enabled!==void 0&&a.telemetry.enabled;return((0,z.$F)("BETTER_AUTH_TELEMETRY",!1)||c)&&(b?.skipTestCheck||!(0,z.Nu)())},h=await g();h&&(c=await cy(a.baseURL),f({type:"init",payload:{config:{database:b?.database,adapter:b?.adapter,emailVerification:{sendVerificationEmail:!!a.emailVerification?.sendVerificationEmail,sendOnSignUp:!!a.emailVerification?.sendOnSignUp,sendOnSignIn:!!a.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!a.emailVerification?.autoSignInAfterVerification,expiresIn:a.emailVerification?.expiresIn,onEmailVerification:!!a.emailVerification?.onEmailVerification,afterEmailVerification:!!a.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!a.emailAndPassword?.enabled,disableSignUp:!!a.emailAndPassword?.disableSignUp,requireEmailVerification:!!a.emailAndPassword?.requireEmailVerification,maxPasswordLength:a.emailAndPassword?.maxPasswordLength,minPasswordLength:a.emailAndPassword?.minPasswordLength,sendResetPassword:!!a.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:a.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!a.emailAndPassword?.onPasswordReset,password:{hash:!!a.emailAndPassword?.password?.hash,verify:!!a.emailAndPassword?.password?.verify},autoSignIn:!!a.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!a.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(a.socialProviders||{}).map(b=>{let c=a.socialProviders?.[b];return c?{id:b,mapProfileToUser:!!c.mapProfileToUser,disableDefaultScope:!!c.disableDefaultScope,disableIdTokenSignIn:!!c.disableIdTokenSignIn,disableImplicitSignUp:c.disableImplicitSignUp,disableSignUp:c.disableSignUp,getUserInfo:!!c.getUserInfo,overrideUserInfoOnSignIn:!!c.overrideUserInfoOnSignIn,prompt:c.prompt,verifyIdToken:!!c.verifyIdToken,scope:c.scope,refreshAccessToken:!!c.refreshAccessToken}:{}}),plugins:a.plugins?.map(a=>a.id.toString()),user:{modelName:a.user?.modelName,fields:a.user?.fields,additionalFields:a.user?.additionalFields,changeEmail:{enabled:a.user?.changeEmail?.enabled,sendChangeEmailVerification:!!a.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:a.verification?.modelName,disableCleanup:a.verification?.disableCleanup,fields:a.verification?.fields},session:{modelName:a.session?.modelName,additionalFields:a.session?.additionalFields,cookieCache:{enabled:a.session?.cookieCache?.enabled,maxAge:a.session?.cookieCache?.maxAge,strategy:a.session?.cookieCache?.strategy},disableSessionRefresh:a.session?.disableSessionRefresh,expiresIn:a.session?.expiresIn,fields:a.session?.fields,freshAge:a.session?.freshAge,preserveSessionInDatabase:a.session?.preserveSessionInDatabase,storeSessionInDatabase:a.session?.storeSessionInDatabase,updateAge:a.session?.updateAge},account:{modelName:a.account?.modelName,fields:a.account?.fields,encryptOAuthTokens:a.account?.encryptOAuthTokens,updateAccountOnSignIn:a.account?.updateAccountOnSignIn,accountLinking:{enabled:a.account?.accountLinking?.enabled,trustedProviders:a.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:a.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:a.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!a.hooks?.after,before:!!a.hooks?.before},secondaryStorage:!!a.secondaryStorage,advanced:{cookiePrefix:!!a.advanced?.cookiePrefix,cookies:!!a.advanced?.cookies,crossSubDomainCookies:{domain:!!a.advanced?.crossSubDomainCookies?.domain,enabled:a.advanced?.crossSubDomainCookies?.enabled,additionalCookies:a.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!a.advanced?.database?.useNumberId||a.advanced?.database?.generateId==="serial",generateId:a.advanced?.database?.generateId,defaultFindManyLimit:a.advanced?.database?.defaultFindManyLimit},useSecureCookies:a.advanced?.useSecureCookies,ipAddress:{disableIpTracking:a.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:a.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:a.advanced?.disableCSRFCheck,cookieAttributes:{expires:a.advanced?.defaultCookieAttributes?.expires,secure:a.advanced?.defaultCookieAttributes?.secure,sameSite:a.advanced?.defaultCookieAttributes?.sameSite,domain:!!a.advanced?.defaultCookieAttributes?.domain,path:a.advanced?.defaultCookieAttributes?.path,httpOnly:a.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:a.trustedOrigins?.length,rateLimit:{storage:a.rateLimit?.storage,modelName:a.rateLimit?.modelName,window:a.rateLimit?.window,customStorage:!!a.rateLimit?.customStorage,enabled:a.rateLimit?.enabled,max:a.rateLimit?.max},onAPIError:{errorURL:a.onAPIError?.errorURL,onError:!!a.onAPIError?.onError,throw:a.onAPIError?.throw},logger:{disabled:a.logger?.disabled,level:a.logger?.level,log:!!a.logger?.log},databaseHooks:{user:{create:{after:!!a.databaseHooks?.user?.create?.after,before:!!a.databaseHooks?.user?.create?.before},update:{after:!!a.databaseHooks?.user?.update?.after,before:!!a.databaseHooks?.user?.update?.before}},session:{create:{after:!!a.databaseHooks?.session?.create?.after,before:!!a.databaseHooks?.session?.create?.before},update:{after:!!a.databaseHooks?.session?.update?.after,before:!!a.databaseHooks?.session?.update?.before}},account:{create:{after:!!a.databaseHooks?.account?.create?.after,before:!!a.databaseHooks?.account?.create?.before},update:{after:!!a.databaseHooks?.account?.update?.after,before:!!a.databaseHooks?.account?.update?.before}},verification:{create:{after:!!a.databaseHooks?.verification?.create?.after,before:!!a.databaseHooks?.verification?.create?.before},update:{after:!!a.databaseHooks?.verification?.update?.after,before:!!a.databaseHooks?.verification?.update?.before}}}},runtime:"undefined"!=typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"undefined"!=typeof Bun?{name:"bun",version:Bun?.version??null}:"undefined"!=typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await ck(),framework:await cm(),environment:"production"===(0,z.lh)("NODE_ENV")?"production":"false"!==z._K.CI&&("BUILD_ID"in z._K||"BUILD_NUMBER"in z._K||"CI"in z._K||"CI_APP_ID"in z._K||"CI_BUILD_ID"in z._K||"CI_BUILD_NUMBER"in z._K||"CI_NAME"in z._K||"CONTINUOUS_INTEGRATION"in z._K||"RUN_ID"in z._K)?"ci":(0,z.Nu)()?"test":"development",systemInfo:await cp(),packageManager:function(){let a=z._K.npm_config_user_agent;if(!a)return;let b=a.split(" ")[0],c=b.lastIndexOf("/"),d=b.substring(0,c);return{name:"npminstall"===d?"cnpm":d,version:b.substring(c+1)}}()},anonymousId:c}));return{publish:async b=>{h&&(c||(c=await cy(a.baseURL)),await f({type:b.type,payload:b.payload,anonymousId:c}))}}}async function cB(a,b,c){var d;let e;b.database||(b=b2(b,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let f=b.plugins||[],g=(d=b,d.advanced?.crossSubDomainCookies?.enabled,[]),h=(0,z.h)(b.logger),i=D(b.baseURL,b.basePath);i||h.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly."),"memory"===a.id&&b.advanced?.database?.generateId===!1&&h.error(`[better-auth] Misconfiguration detected.
You are using the memory DB with generateId: false.
This will cause no id to be generated for any model.
Most of the features of Better Auth will not work correctly.`);let j=b.secret||z._K.BETTER_AUTH_SECRET||z._K.AUTH_SECRET||ca,m=j===ca;if(!(0,z.Nu)()){if(m&&z.KV)throw new l.$("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!j)throw new l.$("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");j.length<32&&h.warn("[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`."),120>function(a){let b=new Set(a).size;return 0===b?0:Math.log2(Math.pow(b,a.length))}(j)&&h.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}!function(a,b){let c=new Map;a.plugins?.forEach(a=>{if(a.endpoints){for(let[b,d]of Object.entries(a.endpoints))if(d&&"path"in d&&"string"==typeof d.path){let e=d.path,f=[];d.options&&"method"in d.options&&(Array.isArray(d.options.method)?f=d.options.method:"string"==typeof d.options.method&&(f=[d.options.method])),0===f.length&&(f=["*"]),c.has(e)||c.set(e,[]),c.get(e).push({pluginId:a.id,endpointKey:b,methods:f})}}});let d=[];for(let[a,b]of c.entries())if(b.length>1){let c=new Map,e=!1;for(let a of b)for(let d of a.methods)c.has(d)||c.set(d,[]),c.get(d).push(a.pluginId),c.get(d).length>1&&(e=!0),"*"===d&&b.length>1?e=!0:"*"!==d&&c.has("*")&&(e=!0);if(e){let e=[...new Set(b.map(a=>a.pluginId))],f=[];for(let[a,d]of c.entries())(d.length>1||"*"===a&&b.length>1||"*"!==a&&c.has("*"))&&f.push(a);d.push({path:a,plugins:e,conflictingMethods:f})}}if(d.length>0){let a=d.map(a=>`  - "${a.path}" [${a.conflictingMethods.join(", ")}] used by plugins: ${a.plugins.join(", ")}`).join("\n");b.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${a}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}(b={...b,secret:j,baseURL:i?new URL(i).origin:"",basePath:b.basePath||"/api/auth",plugins:f.concat(g)},h);let n=(0,k.OR)(b),o=(0,$.getAuthTables)(b),p=Object.entries(b.socialProviders||{}).map(([a,b])=>{if(null==b||!1===b.enabled)return null;b.clientId||h.warn(`Social provider ${a} is missing clientId or clientSecret`);let c=bs[a](b);return c.disableImplicitSignUp=b.disableImplicitSignUp,c}).filter(a=>null!==a),q=({model:a,size:c})=>{if("function"==typeof b.advanced?.generateId)return b.advanced.generateId({model:a,size:c});let d=b?.advanced?.database?.generateId;return"function"==typeof d?d({model:a,size:c}):"uuid"===d?crypto.randomUUID():"serial"!==d&&!1!==d&&(0,y.$C)(c)},{publish:s}=await cA(b,{adapter:a.id,database:"function"==typeof b.database?"adapter":c(b.database)}),t=await cc(b),u=cb({appName:b.appName||"Better Auth",baseURL:i||"",version:(0,r.HX)(),socialProviders:p,options:b,oauthConfig:{storeStateStrategy:b.account?.storeStateStrategy||(b.database?"database":"cookie"),skipStateCookieCheck:!!b.account?.skipStateCookieCheck},tables:o,trustedOrigins:t,isTrustedOrigin(a,b){return this.trustedOrigins.some(c=>I(a,c,b))},sessionConfig:{updateAge:b.session?.updateAge!==void 0?b.session.updateAge:86400,expiresIn:b.session?.expiresIn||604800,freshAge:b.session?.freshAge===void 0?86400:b.session.freshAge,cookieRefreshCache:(()=>{let a=b.session?.cookieCache?.refreshCache,c=b.session?.cookieCache?.maxAge||300;return(b.database||b.secondaryStorage)&&a?(h.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning."),!1):!1!==a&&void 0!==a&&(!0===a?{enabled:!0,updateAge:Math.floor(.2*c)}:{enabled:!0,updateAge:void 0!==a.updateAge?a.updateAge:Math.floor(.2*c)})})()},secret:j,rateLimit:{...b.rateLimit,enabled:b.rateLimit?.enabled??z.KV,window:b.rateLimit?.window||10,max:b.rateLimit?.max||100,storage:b.rateLimit?.storage||(b.secondaryStorage?"secondary-storage":"memory")},authCookies:n,logger:h,generateId:q,session:null,secondaryStorage:b.secondaryStorage,password:{hash:b.emailAndPassword?.password?.hash||b8.E,verify:b.emailAndPassword?.password?.verify||b8.B,config:{minPasswordLength:b.emailAndPassword?.minPasswordLength||8,maxPasswordLength:b.emailAndPassword?.maxPasswordLength||128},checkPassword:bN},setNewSession(a){this.newSession=a},newSession:null,adapter:a,internalAdapter:af(a,{options:b,logger:h,hooks:b.databaseHooks?[b.databaseHooks]:[],generateId:q}),createAuthCookie:(0,k.a6)(b),async runMigrations(){throw new l.$("runMigrations will be set by the specific init implementation")},publishTelemetry:s,skipCSRFCheck:!!b.advanced?.disableCSRFCheck,skipOriginCheck:b.advanced?.disableOriginCheck!==void 0?b.advanced.disableOriginCheck:!!(0,z.Nu)(),runInBackground:b.advanced?.backgroundTasks?.handler??(a=>{a.catch(()=>{})}),async runInBackgroundOrAwait(a){try{b.advanced?.backgroundTasks?.handler?a instanceof Promise&&b.advanced.backgroundTasks.handler(a.catch(a=>{h.error("Failed to run background task:",a)})):await a}catch(a){h.error("Failed to run background task:",a)}},getPlugin:a=>b.plugins.find(b=>b.id===a)??null});return(0,b9.y)(u)?{context:e}=await u:{context:e}=u,"function"==typeof e.options.emailVerification?.onEmailVerification&&(e.options.emailVerification.onEmailVerification=(0,y.CI)(e.options.emailVerification.onEmailVerification,"Use `afterEmailVerification` instead. This will be removed in 1.5",e.logger)),e}let cC=async a=>{let b=await aa(a),c=await cB(b,a,a=>(0,aj.d)(a)||"unknown");return c.runMigrations=async function(){if(!a.database||"updateMany"in a.database)throw new l.$("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:b}=await ap(a);await b()},c},cD=a=>((a,b)=>{let c=b(a),{api:d}=b7(c,a);return{handler:async b=>{let d=await c,e=d.options.basePath||"/api/auth";if(!d.options.baseURL){let a=D(void 0,e,b,void 0,d.options.advanced?.trustedProxyHeaders);if(a)d.baseURL=a,d.options.baseURL=E(d.baseURL)||void 0;else throw new l.$("Could not get base URL from request. Please provide a valid base URL.")}d.trustedOrigins=await cc(d.options,b);let{handler:f}=((a,b)=>{let{api:c,middlewares:d}=b7(a,b),e=new URL(a.baseURL).pathname;return(0,u.aE)(c,{routerContext:a,openapi:{disabled:!0},basePath:e,routerMiddleware:[{path:"/**",middleware:M},...d],allowedMediaTypes:["application/json"],skipTrailingSlashes:b.advanced?.skipTrailingSlashes??!1,async onRequest(b){let c=a.options.disabledPaths||[],d=(0,y.Wi)(b.url,e);if(c.includes(d))return new Response("Not Found",{status:404});let f=b;for(let b of a.options.plugins||[])if(b.onRequest){let c=await b.onRequest(f,a);if(c&&"response"in c)return c.response;c&&"request"in c&&(f=c.request)}let g=await S(f,a);return g||f},async onResponse(b){for(let c of a.options.plugins||[])if(c.onResponse){let d=await c.onResponse(b,a);if(d)return d.response}return b},onError(c){if(c instanceof u.LG&&"FOUND"===c.status)return;if(b.onAPIError?.throw)throw c;if(b.onAPIError?.onError)return void b.onAPIError.onError(c,a);let d=b.logger?.level,e="error"===d||"warn"===d||"debug"===d?z.vF:void 0;if(b.logger?.disabled!==!0){if(c&&"object"==typeof c&&"message"in c&&"string"==typeof c.message&&(c.message.includes("no column")||c.message.includes("column")||c.message.includes("relation")||c.message.includes("table")||c.message.includes("does not exist")))return void a.logger?.error(c.message);c instanceof u.LG?("INTERNAL_SERVER_ERROR"===c.status&&a.logger.error(c.status,c),e?.error(c.message)):a.logger?.error(c&&"object"==typeof c&&"name"in c?c.name:"",c)}}})})(d,a);return(0,r.vp)(d.adapter,()=>f(b))},api:d,options:a,$context:c,$ERROR_CODES:{...a.plugins?.reduce((a,b)=>b.$ERROR_CODES?{...a,...b.$ERROR_CODES}:a,{}),...l.q}}})(a,cC)},37305:(a,b,c)=>{c.d(b,{s:()=>g});var d=c(62767),e=c(5109),f=c(40016);let g=(a="SHA-256",b="none")=>{let c={importKey:async(b,c)=>(0,f.N)().importKey("raw","string"==typeof b?new TextEncoder().encode(b):b,{name:"HMAC",hash:{name:a}},!1,[c]),sign:async(a,g)=>{"string"==typeof a&&(a=await c.importKey(a,"sign"));let h=await (0,f.N)().sign("HMAC",a,"string"==typeof g?new TextEncoder().encode(g):g);return"hex"===b?d.u.encode(h):"base64"===b||"base64url"===b||"base64urlnopad"===b?e.z.encode(h,{padding:"base64urlnopad"!==b}):h},verify:async(a,g,h)=>("string"==typeof a&&(a=await c.importKey(a,"verify")),"hex"===b&&(h=d.u.decode(h)),("base64"===b||"base64url"===b||"base64urlnopad"===b)&&(h=await e.K.decode(h)),(0,f.N)().verify("HMAC",a,"string"==typeof h?new TextEncoder().encode(h):h,"string"==typeof g?new TextEncoder().encode(g):g))};return c}},37381:(a,b,c)=>{c.d(b,{c:()=>d});class d{#J;#K;#L;constructor(){this.#J=new Promise((a,b)=>{this.#L=b,this.#K=a})}get promise(){return this.#J}resolve=a=>{this.#K&&this.#K(a)};reject=a=>{this.#L&&this.#L(a)}}},37432:(a,b,c)=>{c.d(b,{D0:()=>e,Rd:()=>d,VS:()=>i,lF:()=>j,mx:()=>h,xW:()=>f});let d=new TextEncoder,e=new TextDecoder;function f(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function g(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function h(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return g(c,b,0),g(c,a%0x100000000,4),c}function i(a){let b=new Uint8Array(4);return g(b,a),b}function j(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);if(d>127)throw TypeError("non-ASCII string encountered in encode()");b[c]=d}return b}},38729:(a,b,c)=>{c.d(b,{Q:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"JSONReferenceNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JSONReferenceNode",reference:a,traversal:b}),cloneWithTraversal:(a,b)=>(0,d.CN)({...a,traversal:b})})},39281:(a,b,c)=>{c.d(b,{O:()=>K,A:()=>L});var d=c(90423),e=c(18804),f=c(19795),g=c(19151),h=c(31700),i=c(71644),j=c(2952),k=c(53284),l=c(94296),m=c(77688),n=c(40659),o=c(60353);let p=(0,o.CN)({is:a=>"UnaryOperationNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"UnaryOperationNode",operator:a,operand:b})});var q=c(82324),r=c(22795),s=c(61238),t=c(69079),u=c(44625),v=c(81266),w=c(80906);let x=(0,o.CN)({is:a=>"JSONPathLegNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"JSONPathLegNode",type:a,value:b})});var y=c(67183),z=c(38729),A=c(39450),B=c(90350);class C{#M;constructor(a){this.#M=a}at(a){return this.#N("ArrayLocation",a)}key(a){return this.#N("Member",a)}#N(a,b){return new D(z.Q.is(this.#M)?z.Q.cloneWithTraversal(this.#M,y.c.is(this.#M.traversal)?y.c.cloneWithLeg(this.#M.traversal,x.create(a,b)):w.k.cloneWithValue(this.#M.traversal,B.q.createImmediate(b))):y.c.cloneWithLeg(this.#M,x.create(a,b)))}}class D extends C{#M;constructor(a){super(a),this.#M=a}get expressionType(){}as(a){return new E(this,a)}$castTo(){return new D(this.#M)}$notNull(){return new D(this.#M)}toOperationNode(){return this.#M}}class E{#O;#p;constructor(a,b){this.#O=a,this.#p=b}get expression(){return this.#O}get alias(){return this.#p}toOperationNode(){return u.N.create(this.#O.toOperationNode(),(0,A.N)(this.#p)?this.#p.toOperationNode():v.O.create(this.#p))}}var F=c(56112),G=c(55914);let H=(0,o.CN)({is:a=>"TupleNode"===a.kind,create:a=>(0,o.CN)({kind:"TupleNode",values:(0,o.CN)(a)})});var I=c(43926);let J=(0,o.CN)({is:a=>"CastNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"CastNode",expression:a,dataType:b})});function K(a=r.W){function b(a,b){return new m.Is(p.create(n.zX.create(a),(0,j.$O)(b)))}let c=Object.assign(function(a,b,c){return new m.Is((0,k.ds)(a,b,c))},{fn:void 0,eb:void 0,selectFrom:b=>(0,d.c)({queryId:(0,h.a)(),executor:a,queryNode:e.L.createFrom((0,f.JB)(b))}),case:a=>new s.OU({node:t.P.create((0,o.b0)(a)?void 0:(0,j.$O)(a))}),ref:(a,b)=>(0,o.b0)(b)?new m.Is((0,j.q5)(a)):new C((0,j.NF)(a,b)),jsonPath:()=>new C(y.c.create()),table:a=>new m.Is((0,f.M$)(a)),val:a=>new m.Is((0,q.$s)(a)),refTuple:(...a)=>new m.Is(H.create(a.map(j.$O))),tuple:(...a)=>new m.Is(H.create(a.map(q.$s))),lit:a=>new m.Is((0,q.dJ)(a)),unary:b,not:a=>b("not",a),exists:a=>b("exists",a),neg:a=>b("-",a),between:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),betweenSymmetric:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between symmetric"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),and:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"and"):(0,k.Ve)(a,"and")),or:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"or"):(0,k.Ve)(a,"or")),parens(...a){let b=(0,k.GB)(a);return new m.Is(l.k.is(b)?b:l.k.create(b))},cast:(a,b)=>new m.Is(J.create((0,j.$O)(a),(0,I.Q)(b))),withSchema:b=>K(a.withPluginAtFront(new g.B(b)))});return c.fn=(0,i.t)(),c.eb=c,c}function L(a){return K()}},39450:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(60353);function e(a){return(0,d.Gv)(a)&&(0,d.Tn)(a.toOperationNode)}},40016:(a,b,c)=>{c.d(b,{N:()=>d});function d(){let a="undefined"!=typeof globalThis&&globalThis.crypto;if(a&&"object"==typeof a.subtle&&null!=a.subtle)return a.subtle;throw Error("crypto.subtle must be defined")}},40061:(a,b,c)=>{c.d(b,{O:()=>f,d:()=>g});var d=c(46010);c(44161);var e=c(26861);function f(a){let b=async b=>"handler"in a?a.handler(b):a(b);return{GET:b,POST:b,PATCH:b,PUT:b,DELETE:b}}let g=()=>({id:"next-cookies",hooks:{after:[{matcher:a=>!0,handler:(0,e.Di)(async a=>{let b=a.context.responseHeaders;if((!("_flag"in a)||"router"!==a._flag)&&b instanceof Headers){let a,e=b?.get("set-cookie");if(!e)return;let f=(0,d.To)(e),{cookies:g}=await Promise.all([c.e(802),c.e(982)]).then(c.bind(c,86802));try{a=await g()}catch(a){if(a instanceof Error&&a.message.startsWith("`cookies` was called outside a request scope."))return;throw a}f.forEach((b,c)=>{if(!c)return;let d={sameSite:b.samesite,secure:b.secure,maxAge:b["max-age"],httpOnly:b.httponly,domain:b.domain,path:b.path};try{a.set(c,decodeURIComponent(b.value),d)}catch{}});return}})}]}})},40659:(a,b,c)=>{c.d(b,{Xm:()=>h,we:()=>f,zX:()=>g});var d=c(60353);let e=["->","->>"],f=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...e,"not","-","exists","not exists","between","between symmetric"],g=(0,d.CN)({is:a=>"OperatorNode"===a.kind,create:a=>(0,d.CN)({kind:"OperatorNode",operator:a})});function h(a){return(0,d.Kg)(a)&&e.includes(a)}},41328:(a,b,c)=>{c.d(b,{LG:()=>h,UD:()=>A,Ny:()=>B,aE:()=>N,Zr:()=>n});let d={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511};var e=class extends Error{constructor(a="INTERNAL_SERVER_ERROR",b,c={},e="number"==typeof a?a:d[a]){super(b?.message,b?.cause?{cause:b.cause}:void 0),this.status=a,this.body=b,this.headers=c,this.statusCode=e,this.name="APIError",this.status=a,this.headers=c,this.statusCode=e,this.body=b?{code:b?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...b}:void 0}},f=class extends e{constructor(a,b){super(400,{message:a,code:"VALIDATION_ERROR"}),this.message=a,this.issues=b,this.issues=b}},g=class extends Error{constructor(a){super(a),this.name="BetterCallError"}};let h=function(a,b){class c extends a{#P;constructor(...a){if(function(){let a=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===a?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(a,"writable")?a.writable:void 0!==a.set}()){let b=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...a),Error.stackTraceLimit=b}else super(...a);let b=Error().stack;b&&(this.#P=function(a){let b=a.split("\n    at ");return b.length<=1?a:(b.splice(1,1),b.join("\n    at "))}(b.replace(/^Error/,this.name)))}get errorStack(){return this.#P}}return Object.defineProperty(c.prototype,"constructor",{get:()=>b,enumerable:!1,configurable:!0}),c}(e,Error),i=/^application\/([a-z0-9.+-]*\+)?json/i;async function j(a,b){let c=a.headers.get("content-type")||"",d=c.toLowerCase();if(a.body){if(b&&b.length>0&&!b.some(a=>{let b=d.split(";")[0].trim(),c=a.toLowerCase().trim();return b===c||b.includes(c)})){if(!d)throw new h(415,{message:`Content-Type is required. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new h(415,{message:`Content-Type "${c}" is not allowed. Allowed types: ${b.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}if(i.test(d))return await a.json();if(d.includes("application/x-www-form-urlencoded")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a.toString()}),c}if(d.includes("multipart/form-data")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a}),c}return d.includes("text/plain")?await a.text():d.includes("application/octet-stream")?await a.arrayBuffer():d.includes("application/pdf")||d.includes("image/")||d.includes("video/")?await a.blob():d.includes("application/stream")||a.body instanceof ReadableStream?a.body:await a.text()}}function k(a){return a instanceof h||a?.name==="APIError"}async function l(a){try{return{data:await a,error:null}}catch(a){return{data:null,error:a}}}function m(a){return a instanceof Request||"[object Request]"===Object.prototype.toString.call(a)}function n(a,b){if(a instanceof Response)return b?.headers instanceof Headers&&b.headers.forEach((b,c)=>{a.headers.set(c,b)}),a;if(a&&"object"==typeof a&&"_flag"in a&&"json"===a._flag){let c=a.body,d=a.routerResponse;if(d instanceof Response)return d;let e=new Headers;if(d?.headers){let a=new Headers(d.headers);for(let[b,c]of a.entries())a.set(b,c)}if(a.headers)for(let[b,c]of new Headers(a.headers).entries())e.set(b,c);if(b?.headers)for(let[a,c]of new Headers(b.headers).entries())e.set(a,c);return e.set("Content-Type","application/json"),new Response(JSON.stringify(c),{...d,headers:e,status:a.status??b?.status??d?.status,statusText:b?.statusText??d?.statusText})}if(k(a))return n(a.body,{status:b?.status??a.statusCode,statusText:a.status.toString(),headers:b?.headers||a.headers});let c=a,d=new Headers(b?.headers);return a?"string"==typeof a?(c=a,d.set("Content-Type","text/plain")):a instanceof ArrayBuffer||ArrayBuffer.isView(a)?(c=a,d.set("Content-Type","application/octet-stream")):a instanceof Blob?(c=a,d.set("Content-Type",a.type||"application/octet-stream")):a instanceof FormData?c=a:a instanceof URLSearchParams?(c=a,d.set("Content-Type","application/x-www-form-urlencoded")):a instanceof ReadableStream?(c=a,d.set("Content-Type","application/octet-stream")):function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(a)&&(c=function(a,b,c){let d=0,e=new WeakMap;return JSON.stringify(a,(a,b)=>{if("bigint"==typeof b)return b.toString();if("object"==typeof b&&null!==b){if(e.has(b))return`[Circular ref-${e.get(b)}]`;e.set(b,d++)}return b},void 0)}(a),d.set("Content-Type","application/json")):(null===a&&(c=JSON.stringify(null)),d.set("content-type","application/json")),new Response(c,{...b,headers:d})}var o=c(40016);let p={name:"HMAC",hash:"SHA-256"},q=async a=>{let b="string"==typeof a?new TextEncoder().encode(a):a;return await (0,o.N)().importKey("raw",b,p,!1,["sign","verify"])},r=async(a,b,c)=>{try{let d=atob(a),e=new Uint8Array(d.length);for(let a=0,b=d.length;a<b;a++)e[a]=d.charCodeAt(a);return await (0,o.N)().verify(p,c,e,new TextEncoder().encode(b))}catch(a){return!1}},s=async(a,b)=>{let c=await q(b);return btoa(String.fromCharCode(...new Uint8Array(await (0,o.N)().sign(p.name,c,new TextEncoder().encode(a)))))},t=async(a,b)=>{let c=await s(a,b);return encodeURIComponent(a=`${a}.${c}`)},u=(a,b)=>{let c=a;if(b)if("secure"===b)c="__Secure-"+a;else{if("host"!==b)return;c="__Host-"+a}return c},v=(a,b,c={})=>{let d;if(d=c?.prefix==="secure"?`__Secure-${a}=${b}`:c?.prefix==="host"?`__Host-${a}=${b}`:`${a}=${b}`,a.startsWith("__Secure-")&&!c.secure&&(c.secure=!0),a.startsWith("__Host-")&&(c.secure||(c.secure=!0),"/"!==c.path&&(c.path="/"),c.domain&&(c.domain=void 0)),c&&"number"==typeof c.maxAge&&c.maxAge>=0){if(c.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");d+=`; Max-Age=${Math.floor(c.maxAge)}`}if(c.domain&&"host"!==c.prefix&&(d+=`; Domain=${c.domain}`),c.path&&(d+=`; Path=${c.path}`),c.expires){if(c.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");d+=`; Expires=${c.expires.toUTCString()}`}return c.httpOnly&&(d+="; HttpOnly"),c.secure&&(d+="; Secure"),c.sameSite&&(d+=`; SameSite=${c.sameSite.charAt(0).toUpperCase()+c.sameSite.slice(1)}`),c.partitioned&&(c.secure||(c.secure=!0),d+="; Partitioned"),d},w=async(a,b,c,d)=>v(a,b=await t(b,c),d);async function x(a,b={}){let c={body:b.body,query:b.query};if(a.body){let d=await a.body["~standard"].validate(b.body);if(d.issues)return{data:null,error:y(d.issues,"body")};c.body=d.value}if(a.query){let d=await a.query["~standard"].validate(b.query);if(d.issues)return{data:null,error:y(d.issues,"query")};c.query=d.value}return a.requireHeaders&&!b.headers?{data:null,error:{message:"Headers is required",issues:[]}}:a.requireRequest&&!b.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:c,error:null}}function y(a,b){return{message:a.map(a=>`[${a.path?.length?`${b}.`+a.path.map(a=>"object"==typeof a?a.key:a).join("."):b}] ${a.message}`).join("; "),issues:a}}let z=async(a,{options:b,path:c})=>{let d,e=new Headers,{data:g,error:i}=await x(b,a);if(i)throw new f(i.message,i.issues);let j="headers"in a?a.headers instanceof Headers?a.headers:new Headers(a.headers):"request"in a&&m(a.request)?a.request.headers:null,k=j?.get("cookie"),l=k?function(a){if("string"!=typeof a)throw TypeError("argument str must be a string");let b=new Map,c=0;for(;c<a.length;){let d=a.indexOf("=",c);if(-1===d)break;let e=a.indexOf(";",c);if(-1===e)e=a.length;else if(e<d){c=a.lastIndexOf(";",d-1)+1;continue}let f=a.slice(c,d).trim();if(!b.has(f)){let c=a.slice(d+1,e).trim();34===c.codePointAt(0)&&(c=c.slice(1,-1)),b.set(f,function(a){try{return a.includes("%")?decodeURIComponent(a):a}catch{return a}}(c))}c=e+1}return b}(k):void 0,n={...a,body:g.body,query:g.query,path:a.path||c||"virtual:",context:"context"in a&&a.context?a.context:{},returned:void 0,headers:a?.headers,request:a?.request,params:"params"in a?a.params:void 0,method:a.method??(Array.isArray(b.method)?b.method[0]:"*"===b.method?"GET":b.method),setHeader:(a,b)=>{e.set(a,b)},getHeader:a=>j?j.get(a):null,getCookie:(a,b)=>{let c=u(a,b);return c&&l?.get(c)||null},getSignedCookie:async(a,b,c)=>{let d=u(a,c);if(!d)return null;let e=l?.get(d);if(!e)return null;let f=e.lastIndexOf(".");if(f<1)return null;let g=e.substring(0,f),h=e.substring(f+1);return 44===h.length&&h.endsWith("=")?!!await r(h,g,await q(b))&&g:null},setCookie:(a,b,c)=>{let d=((a,b,c)=>v(a,b=encodeURIComponent(b),c))(a,b,c);return e.append("set-cookie",d),d},setSignedCookie:async(a,b,c,d)=>{let f=await w(a,b,c,d);return e.append("set-cookie",f),f},redirect:a=>(e.set("location",a),new h("FOUND",void 0,e)),error:(a,b,c)=>new h(a,b,c),setStatus:a=>{d=a},json:(b,c)=>a.asResponse?{body:c?.body||b,routerResponse:c,_flag:"json"}:b,responseHeaders:e,get responseStatus(){return d}};for(let a of b.use||[]){let b=await a({...n,returnHeaders:!0,asResponse:!1});b.response&&Object.assign(n.context,b.response),b.headers&&b.headers.forEach((a,b)=>{n.responseHeaders.set(b,a)})}return n};function A(a,b,c){let d="string"==typeof a?a:void 0,e="object"==typeof b?b:a,i="function"==typeof b?b:c;if(("GET"===e.method||"HEAD"===e.method)&&e.body)throw new g("Body is not allowed with GET or HEAD methods");if(d&&/\/{2,}/.test(d))throw new g("Path cannot contain consecutive slashes");let j=async(...a)=>{let b=a[0]||{},{data:c,error:g}=await l(z(b,{options:e,path:d}));if(g){if(!(g instanceof f))throw g;throw e.onValidationError&&await e.onValidationError({message:g.message,issues:g.issues}),new h(400,{message:g.message,code:"VALIDATION_ERROR"})}let j=await i(c).catch(async a=>{if(k(a)){let c=e.onAPIError;if(c&&await c(a),b.asResponse)return a}throw a}),m=c.responseHeaders,o=c.responseStatus;return b.asResponse?n(j,{headers:m,status:o}):b.returnHeaders?b.returnStatus?{headers:m,response:j,status:o}:{headers:m,response:j}:b.returnStatus?{response:j,status:o}:j};return j.options=e,j.path=d,j}function B(a,b){let c=async c=>{let d="function"==typeof a?a:b,e=await z(c,{options:"function"==typeof a?{}:a,path:"/"});if(!d)throw Error("handler must be defined");let f=await d(e),g=e.responseHeaders;return c.returnHeaders?{headers:g,response:f}:f};return c.options="function"==typeof a?{}:a,c}A.create=a=>(b,c,d)=>A(b,{...c,use:[...c?.use||[],...a?.use||[]]},d),B.create=a=>function(b,c){if("function"==typeof b)return B({use:a?.use},b);if(!c)throw Error("Middleware handler is required");return B({...b,method:"*",use:[...a?.use||[],...b.use||[]]},c)};var C=c(49764);let D={};function E(a){switch(a.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function F(a){let b=[];return a.metadata?.openapi?.parameters?b.push(...a.metadata.openapi.parameters):a.query instanceof C.ZodObject&&Object.entries(a.query.shape).forEach(([a,c])=>{c instanceof C.ZodObject&&b.push({name:a,in:"query",schema:{type:E(c),..."minLength"in c&&c.minLength?{minLength:c.minLength}:{},description:c.description}})}),b}function G(a){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...a}}async function H(a,b){return Object.entries(a).forEach(([a,b])=>{let c=b.options;if(!(!b.path||c.metadata?.SERVER_ONLY)&&("GET"===c.method&&(D[b.path]={get:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:F(c),responses:G(c.metadata?.openapi?.responses)}}),"POST"===c.method)){let a=function(a){if(a.metadata?.openapi?.requestBody)return a.metadata.openapi.requestBody;if(a.body&&(a.body instanceof C.ZodObject||a.body instanceof C.ZodOptional)){let b=a.body.shape;if(!b)return;let c={},d=[];return Object.entries(b).forEach(([a,b])=>{b instanceof C.ZodObject&&(c[a]={type:E(b),description:b.description},b instanceof C.ZodOptional||d.push(a))}),{required:!(a.body instanceof C.ZodOptional)&&!!a.body,content:{"application/json":{schema:{type:"object",properties:c,required:d}}}}}}(c);D[b.path]={post:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:F(c),...a?{requestBody:a}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:G(c.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:b?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:D}}let I=(()=>{let a=function(){};return a.prototype=Object.create(null),Object.freeze(a.prototype),a})();function J(){return{root:{key:""},static:new I}}function K(a){let[b,...c]=a.split("/");return""===c[c.length-1]?c.slice(0,-1):c}function L(a,b){let c=new I;for(let[d,e]of b){let b=d<0?a.slice(-(d+1)).join("/"):a[d];if("string"==typeof e)c[e]=b;else{let a=b.match(e);if(a)for(let b in a.groups)c[b]=a.groups[b]}}return c}function M(a,b="",c,d){b=b.toUpperCase(),47!==c.charCodeAt(0)&&(c=`/${c}`);let e=K(c=c.replace(/\\:/g,"%3A")),f=a.root,g=0,h=[],i=[];for(let a=0;a<e.length;a++){let b=e[a];if(b.startsWith("**")){f.wildcard||(f.wildcard={key:"**"}),f=f.wildcard,h.push([-(a+1),b.split(":")[1]||"_",2===b.length]);break}if("*"===b||b.includes(":")){if(f.param||(f.param={key:"*"}),f=f.param,"*"===b)h.push([a,`_${g++}`,!0]);else if(b.includes(":",1)){let c=function(a){let b=a.replace(/:(\w+)/g,(a,b)=>`(?<${b}>[^/]+)`).replace(/\./g,"\\.");return RegExp(`^${b}$`)}(b);i[a]=c,f.hasRegexParam=!0,h.push([a,c,!1])}else h.push([a,b.slice(1),!1]);continue}"\\*"===b?b=e[a]="*":"\\*\\*"===b&&(b=e[a]="**");let c=f.static?.[b];if(c)f=c;else{let a={key:b};f.static||(f.static=new I),f.static[b]=a,f=a}}let j=h.length>0;f.methods||(f.methods=new I),f.methods[b]??=[],f.methods[b].push({data:d||null,paramsRegexp:i,paramsMap:j?h:void 0}),j||(a.static["/"+e.join("/")]=f)}let N=(a,b)=>{if(!b?.openapi?.disabled){let c={path:"/api/reference",...b?.openapi};a.openapi=A(c.path,{method:"GET"},async b=>new Response(((a,b)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(a)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${b?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(b.logo)}`:void 0} ,
	   	theme: ${b?.theme||"saturn"},
        metaData: {
			title: ${b?.title||"Open API Reference"},
			description: ${b?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`)(await H(a),c.scalar),{headers:{"Content-Type":"text/html"}}))}let c=J(),d=J();for(let b of Object.values(a))if(!(!b.options||!b.path||b.options?.metadata?.SERVER_ONLY))for(let a of Array.isArray(b.options?.method)?b.options.method:[b.options?.method])M(c,a,b.path,b);if(b?.routerMiddleware?.length)for(let{path:a,middleware:c}of b.routerMiddleware)M(d,"*",a,c);let e=async a=>{let e=new URL(a.url),f=e.pathname,g=b?.basePath&&"/"!==b.basePath?f.split(b.basePath).reduce((a,c,d)=>(0!==d&&(d>1?a.push(`${b.basePath}${c}`):a.push(c)),a),[]).join(""):e.pathname;if(!g?.length||/\/{2,}/.test(g))return new Response(null,{status:404,statusText:"Not Found"});let h=function(a,b="",c,d){47===c.charCodeAt(c.length-1)&&(c=c.slice(0,-1));let e=a.static[c];if(e&&e.methods){let a=e.methods[b]||e.methods[""];if(void 0!==a)return a[0]}let f=K(c),g=function a(b,c,d,e,f){if(f===e.length){if(c.methods){let a=c.methods[d]||c.methods[""];if(a)return a}if(c.param&&c.param.methods){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}return}let g=e[f];if(c.static){let h=c.static[g];if(h){let c=a(b,h,d,e,f+1);if(c)return c}}if(c.param){let h=a(b,c.param,d,e,f+1);if(h){if(c.param.hasRegexParam){let a=h.find(a=>a.paramsRegexp[f]?.test(g))||h.find(a=>!a.paramsRegexp[f]);return a?[a]:void 0}return h}}if(c.wildcard&&c.wildcard.methods)return c.wildcard.methods[d]||c.wildcard.methods[""]}(a,a.root,b,f,0)?.[0];if(void 0!==g)return{data:g.data,params:g.paramsMap?L(f,g.paramsMap):void 0}}(c,a.method,g);if(g.endsWith("/")!==h?.data?.path?.endsWith("/")&&!b?.skipTrailingSlashes||!h?.data)return new Response(null,{status:404,statusText:"Not Found"});let i={};e.searchParams.forEach((a,b)=>{b in i?Array.isArray(i[b])?i[b].push(a):i[b]=[i[b],a]:i[b]=a});let l=h.data;try{let c=l.options.metadata?.allowedMediaTypes||b?.allowedMediaTypes,e={path:g,method:a.method,headers:a.headers,params:h.params?JSON.parse(JSON.stringify(h.params)):{},request:a,body:l.options.disableBody?void 0:await j(l.options.cloneRequest?a.clone():a,c),query:i,_flag:"router",asResponse:!0,context:b?.routerContext},f=function(a,b="",c,d){47===c.charCodeAt(c.length-1)&&(c=c.slice(0,-1));let e=K(c);return(function a(b,c,d,e,f,g=[]){let h=e[f];if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];a&&g.push(...a)}if(c.param&&(a(b,c.param,d,e,f+1,g),f===e.length&&c.param.methods)){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;b?.[b?.length-1]?.[2]&&g.push(...a)}}let i=c.static?.[h];if(i&&a(b,i,d,e,f+1,g),f===e.length&&c.methods){let a=c.methods[d]||c.methods[""];a&&g.push(...a)}return g})(a,a.root,b,e,0).map(a=>({data:a.data,params:a.paramsMap?L(e,a.paramsMap):void 0}))}(d,"*",g);if(f?.length)for(let{data:a,params:b}of f){let c=await a({...e,params:b,asResponse:!1});if(c instanceof Response)return c}return await l(e)}catch(a){if(b?.onError)try{let c=await b.onError(a);if(c instanceof Response)return n(c)}catch(a){if(k(a))return n(a);throw a}if(b?.throwError)throw a;if(k(a))return n(a);return console.error("# SERVER_ERROR: ",a),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async a=>{let c=await b?.onRequest?.(a);if(c instanceof Response)return c;let d=await e(m(c)?c:a),f=await b?.onResponse?.(d);return f instanceof Response?f:d},endpoints:a}}},41330:(a,b,c)=>{function d(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}c.d(b,{X:()=>e,t:()=>f});let e=(a,...b)=>d("Key must be ",a,...b),f=(a,b,...c)=>d(`Key for the ${a} algorithm must be `,b,...c)},42437:(a,b,c)=>{c.d(b,{V:()=>e});var d=c(60353);class e{nodeStack=[];#Q=(0,d.CN)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(a,b){if(!a)return a;this.nodeStack.push(a);let c=this.transformNodeImpl(a,b);return this.nodeStack.pop(),(0,d.CN)(c)}transformNodeImpl(a,b){return this.#Q[a.kind](a,b)}transformNodeList(a,b){return a?(0,d.CN)(a.map(a=>this.transformNode(a,b))):a}transformSelectQuery(a,b){return{kind:"SelectQueryNode",from:this.transformNode(a.from,b),selections:this.transformNodeList(a.selections,b),distinctOn:this.transformNodeList(a.distinctOn,b),joins:this.transformNodeList(a.joins,b),groupBy:this.transformNode(a.groupBy,b),orderBy:this.transformNode(a.orderBy,b),where:this.transformNode(a.where,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),limit:this.transformNode(a.limit,b),offset:this.transformNode(a.offset,b),with:this.transformNode(a.with,b),having:this.transformNode(a.having,b),explain:this.transformNode(a.explain,b),setOperations:this.transformNodeList(a.setOperations,b),fetch:this.transformNode(a.fetch,b),top:this.transformNode(a.top,b)}}transformSelection(a,b){return{kind:"SelectionNode",selection:this.transformNode(a.selection,b)}}transformColumn(a,b){return{kind:"ColumnNode",column:this.transformNode(a.column,b)}}transformAlias(a,b){return{kind:"AliasNode",node:this.transformNode(a.node,b),alias:this.transformNode(a.alias,b)}}transformTable(a,b){return{kind:"TableNode",table:this.transformNode(a.table,b)}}transformFrom(a,b){return{kind:"FromNode",froms:this.transformNodeList(a.froms,b)}}transformReference(a,b){return{kind:"ReferenceNode",column:this.transformNode(a.column,b),table:this.transformNode(a.table,b)}}transformAnd(a,b){return{kind:"AndNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformOr(a,b){return{kind:"OrNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformValueList(a,b){return{kind:"ValueListNode",values:this.transformNodeList(a.values,b)}}transformParens(a,b){return{kind:"ParensNode",node:this.transformNode(a.node,b)}}transformJoin(a,b){return{kind:"JoinNode",joinType:a.joinType,table:this.transformNode(a.table,b),on:this.transformNode(a.on,b)}}transformRaw(a,b){return{kind:"RawNode",sqlFragments:(0,d.CN)([...a.sqlFragments]),parameters:this.transformNodeList(a.parameters,b)}}transformWhere(a,b){return{kind:"WhereNode",where:this.transformNode(a.where,b)}}transformInsertQuery(a,b){return{kind:"InsertQueryNode",into:this.transformNode(a.into,b),columns:this.transformNodeList(a.columns,b),values:this.transformNode(a.values,b),returning:this.transformNode(a.returning,b),onConflict:this.transformNode(a.onConflict,b),onDuplicateKey:this.transformNode(a.onDuplicateKey,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),ignore:a.ignore,orAction:this.transformNode(a.orAction,b),replace:a.replace,explain:this.transformNode(a.explain,b),defaultValues:a.defaultValues,top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformValues(a,b){return{kind:"ValuesNode",values:this.transformNodeList(a.values,b)}}transformDeleteQuery(a,b){return{kind:"DeleteQueryNode",from:this.transformNode(a.from,b),using:this.transformNode(a.using,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),orderBy:this.transformNode(a.orderBy,b),limit:this.transformNode(a.limit,b),explain:this.transformNode(a.explain,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformReturning(a,b){return{kind:"ReturningNode",selections:this.transformNodeList(a.selections,b)}}transformCreateTable(a,b){return{kind:"CreateTableNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),constraints:this.transformNodeList(a.constraints,b),temporary:a.temporary,ifNotExists:a.ifNotExists,onCommit:a.onCommit,frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),selectQuery:this.transformNode(a.selectQuery,b)}}transformColumnDefinition(a,b){return{kind:"ColumnDefinitionNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),references:this.transformNode(a.references,b),primaryKey:a.primaryKey,autoIncrement:a.autoIncrement,unique:a.unique,notNull:a.notNull,unsigned:a.unsigned,defaultTo:this.transformNode(a.defaultTo,b),check:this.transformNode(a.check,b),generated:this.transformNode(a.generated,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),nullsNotDistinct:a.nullsNotDistinct,identity:a.identity,ifNotExists:a.ifNotExists}}transformAddColumn(a,b){return{kind:"AddColumnNode",column:this.transformNode(a.column,b)}}transformDropTable(a,b){return{kind:"DropTableNode",table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformOrderBy(a,b){return{kind:"OrderByNode",items:this.transformNodeList(a.items,b)}}transformOrderByItem(a,b){return{kind:"OrderByItemNode",orderBy:this.transformNode(a.orderBy,b),direction:this.transformNode(a.direction,b),collation:this.transformNode(a.collation,b),nulls:a.nulls}}transformGroupBy(a,b){return{kind:"GroupByNode",items:this.transformNodeList(a.items,b)}}transformGroupByItem(a,b){return{kind:"GroupByItemNode",groupBy:this.transformNode(a.groupBy,b)}}transformUpdateQuery(a,b){return{kind:"UpdateQueryNode",table:this.transformNode(a.table,b),from:this.transformNode(a.from,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),updates:this.transformNodeList(a.updates,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),explain:this.transformNode(a.explain,b),limit:this.transformNode(a.limit,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b),orderBy:this.transformNode(a.orderBy,b)}}transformColumnUpdate(a,b){return{kind:"ColumnUpdateNode",column:this.transformNode(a.column,b),value:this.transformNode(a.value,b)}}transformLimit(a,b){return{kind:"LimitNode",limit:this.transformNode(a.limit,b)}}transformOffset(a,b){return{kind:"OffsetNode",offset:this.transformNode(a.offset,b)}}transformOnConflict(a,b){return{kind:"OnConflictNode",columns:this.transformNodeList(a.columns,b),constraint:this.transformNode(a.constraint,b),indexExpression:this.transformNode(a.indexExpression,b),indexWhere:this.transformNode(a.indexWhere,b),updates:this.transformNodeList(a.updates,b),updateWhere:this.transformNode(a.updateWhere,b),doNothing:a.doNothing}}transformOnDuplicateKey(a,b){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(a.updates,b)}}transformCreateIndex(a,b){return{kind:"CreateIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists,where:this.transformNode(a.where,b),nullsNotDistinct:a.nullsNotDistinct}}transformList(a,b){return{kind:"ListNode",items:this.transformNodeList(a.items,b)}}transformDropIndex(a,b){return{kind:"DropIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformPrimaryKeyConstraint(a,b){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformUniqueConstraint(a,b){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),nullsNotDistinct:a.nullsNotDistinct,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformForeignKeyConstraint(a,b){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(a.columns,b),references:this.transformNode(a.references,b),name:this.transformNode(a.name,b),onDelete:a.onDelete,onUpdate:a.onUpdate,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformSetOperation(a,b){return{kind:"SetOperationNode",operator:a.operator,expression:this.transformNode(a.expression,b),all:a.all}}transformReferences(a,b){return{kind:"ReferencesNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),onDelete:a.onDelete,onUpdate:a.onUpdate}}transformCheckConstraint(a,b){return{kind:"CheckConstraintNode",expression:this.transformNode(a.expression,b),name:this.transformNode(a.name,b)}}transformWith(a,b){return{kind:"WithNode",expressions:this.transformNodeList(a.expressions,b),recursive:a.recursive}}transformCommonTableExpression(a,b){return{kind:"CommonTableExpressionNode",name:this.transformNode(a.name,b),materialized:a.materialized,expression:this.transformNode(a.expression,b)}}transformCommonTableExpressionName(a,b){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b)}}transformHaving(a,b){return{kind:"HavingNode",having:this.transformNode(a.having,b)}}transformCreateSchema(a,b){return{kind:"CreateSchemaNode",schema:this.transformNode(a.schema,b),ifNotExists:a.ifNotExists}}transformDropSchema(a,b){return{kind:"DropSchemaNode",schema:this.transformNode(a.schema,b),ifExists:a.ifExists,cascade:a.cascade}}transformAlterTable(a,b){return{kind:"AlterTableNode",table:this.transformNode(a.table,b),renameTo:this.transformNode(a.renameTo,b),setSchema:this.transformNode(a.setSchema,b),columnAlterations:this.transformNodeList(a.columnAlterations,b),addConstraint:this.transformNode(a.addConstraint,b),dropConstraint:this.transformNode(a.dropConstraint,b),renameConstraint:this.transformNode(a.renameConstraint,b),addIndex:this.transformNode(a.addIndex,b),dropIndex:this.transformNode(a.dropIndex,b)}}transformDropColumn(a,b){return{kind:"DropColumnNode",column:this.transformNode(a.column,b)}}transformRenameColumn(a,b){return{kind:"RenameColumnNode",column:this.transformNode(a.column,b),renameTo:this.transformNode(a.renameTo,b)}}transformAlterColumn(a,b){return{kind:"AlterColumnNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),dataTypeExpression:this.transformNode(a.dataTypeExpression,b),setDefault:this.transformNode(a.setDefault,b),dropDefault:a.dropDefault,setNotNull:a.setNotNull,dropNotNull:a.dropNotNull}}transformModifyColumn(a,b){return{kind:"ModifyColumnNode",column:this.transformNode(a.column,b)}}transformAddConstraint(a,b){return{kind:"AddConstraintNode",constraint:this.transformNode(a.constraint,b)}}transformDropConstraint(a,b){return{kind:"DropConstraintNode",constraintName:this.transformNode(a.constraintName,b),ifExists:a.ifExists,modifier:a.modifier}}transformRenameConstraint(a,b){return{kind:"RenameConstraintNode",oldName:this.transformNode(a.oldName,b),newName:this.transformNode(a.newName,b)}}transformCreateView(a,b){return{kind:"CreateViewNode",name:this.transformNode(a.name,b),temporary:a.temporary,orReplace:a.orReplace,ifNotExists:a.ifNotExists,materialized:a.materialized,columns:this.transformNodeList(a.columns,b),as:this.transformNode(a.as,b)}}transformRefreshMaterializedView(a,b){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(a.name,b),concurrently:a.concurrently,withNoData:a.withNoData}}transformDropView(a,b){return{kind:"DropViewNode",name:this.transformNode(a.name,b),ifExists:a.ifExists,materialized:a.materialized,cascade:a.cascade}}transformGenerated(a,b){return{kind:"GeneratedNode",byDefault:a.byDefault,always:a.always,identity:a.identity,stored:a.stored,expression:this.transformNode(a.expression,b)}}transformDefaultValue(a,b){return{kind:"DefaultValueNode",defaultValue:this.transformNode(a.defaultValue,b)}}transformOn(a,b){return{kind:"OnNode",on:this.transformNode(a.on,b)}}transformSelectModifier(a,b){return{kind:"SelectModifierNode",modifier:a.modifier,rawModifier:this.transformNode(a.rawModifier,b),of:this.transformNodeList(a.of,b)}}transformCreateType(a,b){return{kind:"CreateTypeNode",name:this.transformNode(a.name,b),enum:this.transformNode(a.enum,b)}}transformDropType(a,b){return{kind:"DropTypeNode",name:this.transformNode(a.name,b),ifExists:a.ifExists}}transformExplain(a,b){return{kind:"ExplainNode",format:a.format,options:this.transformNode(a.options,b)}}transformSchemableIdentifier(a,b){return{kind:"SchemableIdentifierNode",schema:this.transformNode(a.schema,b),identifier:this.transformNode(a.identifier,b)}}transformAggregateFunction(a,b){return{kind:"AggregateFunctionNode",func:a.func,aggregated:this.transformNodeList(a.aggregated,b),distinct:a.distinct,orderBy:this.transformNode(a.orderBy,b),withinGroup:this.transformNode(a.withinGroup,b),filter:this.transformNode(a.filter,b),over:this.transformNode(a.over,b)}}transformOver(a,b){return{kind:"OverNode",orderBy:this.transformNode(a.orderBy,b),partitionBy:this.transformNode(a.partitionBy,b)}}transformPartitionBy(a,b){return{kind:"PartitionByNode",items:this.transformNodeList(a.items,b)}}transformPartitionByItem(a,b){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(a.partitionBy,b)}}transformBinaryOperation(a,b){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(a.leftOperand,b),operator:this.transformNode(a.operator,b),rightOperand:this.transformNode(a.rightOperand,b)}}transformUnaryOperation(a,b){return{kind:"UnaryOperationNode",operator:this.transformNode(a.operator,b),operand:this.transformNode(a.operand,b)}}transformUsing(a,b){return{kind:"UsingNode",tables:this.transformNodeList(a.tables,b)}}transformFunction(a,b){return{kind:"FunctionNode",func:a.func,arguments:this.transformNodeList(a.arguments,b)}}transformCase(a,b){return{kind:"CaseNode",value:this.transformNode(a.value,b),when:this.transformNodeList(a.when,b),else:this.transformNode(a.else,b),isStatement:a.isStatement}}transformWhen(a,b){return{kind:"WhenNode",condition:this.transformNode(a.condition,b),result:this.transformNode(a.result,b)}}transformJSONReference(a,b){return{kind:"JSONReferenceNode",reference:this.transformNode(a.reference,b),traversal:this.transformNode(a.traversal,b)}}transformJSONPath(a,b){return{kind:"JSONPathNode",inOperator:this.transformNode(a.inOperator,b),pathLegs:this.transformNodeList(a.pathLegs,b)}}transformJSONPathLeg(a,b){return{kind:"JSONPathLegNode",type:a.type,value:a.value}}transformJSONOperatorChain(a,b){return{kind:"JSONOperatorChainNode",operator:this.transformNode(a.operator,b),values:this.transformNodeList(a.values,b)}}transformTuple(a,b){return{kind:"TupleNode",values:this.transformNodeList(a.values,b)}}transformMergeQuery(a,b){return{kind:"MergeQueryNode",into:this.transformNode(a.into,b),using:this.transformNode(a.using,b),whens:this.transformNodeList(a.whens,b),with:this.transformNode(a.with,b),top:this.transformNode(a.top,b),endModifiers:this.transformNodeList(a.endModifiers,b),output:this.transformNode(a.output,b),returning:this.transformNode(a.returning,b)}}transformMatched(a,b){return{kind:"MatchedNode",not:a.not,bySource:a.bySource}}transformAddIndex(a,b){return{kind:"AddIndexNode",name:this.transformNode(a.name,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists}}transformCast(a,b){return{kind:"CastNode",expression:this.transformNode(a.expression,b),dataType:this.transformNode(a.dataType,b)}}transformFetch(a,b){return{kind:"FetchNode",rowCount:this.transformNode(a.rowCount,b),modifier:a.modifier}}transformTop(a,b){return{kind:"TopNode",expression:a.expression,modifiers:a.modifiers}}transformOutput(a,b){return{kind:"OutputNode",selections:this.transformNodeList(a.selections,b)}}transformDataType(a,b){return a}transformSelectAll(a,b){return a}transformIdentifier(a,b){return a}transformValue(a,b){return a}transformPrimitiveValueList(a,b){return a}transformOperator(a,b){return a}transformDefaultInsertValue(a,b){return a}transformOrAction(a,b){return a}transformCollate(a,b){return a}}},43926:(a,b,c)=>{c.d(b,{Q:()=>i});var d=c(60353);let e=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],f=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],g=(0,d.CN)({is:a=>"DataTypeNode"===a.kind,create:a=>(0,d.CN)({kind:"DataTypeNode",dataType:a})});var h=c(39450);function i(a){if((0,h.N)(a))return a.toOperationNode();if(e.includes(a)||f.some(b=>b.test(a)))return g.create(a);throw Error(`invalid column data type ${JSON.stringify(a)}`)}},44161:(a,b,c)=>{c.d(b,{a6:()=>p,eC:()=>u,Aj:()=>t,OR:()=>q,vt:()=>r,$G:()=>s});var d=c(11934),e=c(5964),f=c(64196),g=c(4744),h=c(24598);let i=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;var j=c(46010),k=c(97960),l=c(35537),m=c(2816),n=c(5109);c(33679);var o=c(37305);function p(a){let b=(a.advanced?.useSecureCookies!==void 0?a.advanced?.useSecureCookies:a.baseURL?!!a.baseURL.startsWith("https://"):k.KV)?j.yE:"",c=!!a.advanced?.crossSubDomainCookies?.enabled,d=c?a.advanced?.crossSubDomainCookies?.domain||(a.baseURL?new URL(a.baseURL).hostname:void 0):void 0;if(c&&!d)throw new l.$("baseURL is required when crossSubdomainCookies are enabled");return function(e,f={}){let g=a.advanced?.cookiePrefix||"better-auth",h=a.advanced?.cookies?.[e]?.name||`${g}.${e}`,i=a.advanced?.cookies?.[e]?.attributes;return{name:`${b}${h}`,attributes:{secure:!!b,sameSite:"lax",path:"/",httpOnly:!0,...c?{domain:d}:{},...a.advanced?.defaultCookieAttributes,...f,...i}}}}function q(a){let b=p(a),c=b("session_token",{maxAge:a.session?.expiresIn||Math.round(function(a){let b,c=i.exec("7d");if(!c||c[4]&&c[1])throw TypeError(`Invalid time string format: "${a}". Use formats like "7d", "30m", "1 hour", etc.`);let d=parseFloat(c[2]),e=c[3].toLowerCase();switch(e){case"years":case"year":case"yrs":case"yr":case"y":b=315576e5*d;break;case"months":case"month":case"mo":b=2592e6*d;break;case"weeks":case"week":case"w":b=6048e5*d;break;case"days":case"day":case"d":b=864e5*d;break;case"hours":case"hour":case"hrs":case"hr":case"h":b=36e5*d;break;case"minutes":case"minute":case"mins":case"min":case"m":b=6e4*d;break;case"seconds":case"second":case"secs":case"sec":case"s":b=1e3*d;break;default:throw TypeError(`Unknown time unit: "${e}"`)}return"-"===c[1]||"ago"===c[4]?-b:b}("7d")/1e3)}),d=b("session_data",{maxAge:a.session?.cookieCache?.maxAge||300}),e=b("account_data",{maxAge:a.session?.cookieCache?.maxAge||300}),f=b("dont_remember");return{sessionToken:{name:c.name,attributes:c.attributes},sessionData:{name:d.name,attributes:d.attributes},dontRememberToken:{name:f.name,attributes:f.attributes},accountData:{name:e.name,attributes:e.attributes}}}async function r(a,b,c){let i;if(!a.context.options.session?.cookieCache?.enabled)return;let j=(0,m.dB)(b.session,a.context.options.session?.additionalFields),k=(0,e.kc)(a.context.options,b.user),l=a.context.options.session?.cookieCache?.version,p="1";if(l){if("string"==typeof l)p=l;else if("function"==typeof l){let a=l(b.session,b.user);p=(0,h.y)(a)?await a:a}}let q={session:j,user:k,updatedAt:Date.now(),version:p},r={...a.context.authCookies.sessionData.attributes,maxAge:c?void 0:a.context.authCookies.sessionData.attributes.maxAge},s=(0,d.p)(r.maxAge||60,"sec").getTime(),t=a.context.options.session?.cookieCache?.strategy||"compact";if((i="jwe"===t?await (0,f.lT)(q,a.context.secret,"better-auth-session",r.maxAge||300):"jwt"===t?await (0,f.FA)(q,a.context.secret,r.maxAge||300):n.z.encode(JSON.stringify({session:q,expiresAt:s,signature:await (0,o.s)("SHA-256","base64urlnopad").sign(a.context.secret,JSON.stringify({...q,expiresAt:s}))}),{padding:!1})).length>4093){let b=(0,g.Uh)(a.context.authCookies.sessionData.name,r,a),c=b.chunk(i,r);b.setCookies(c)}else{let b=(0,g.Uh)(a.context.authCookies.sessionData.name,r,a);if(b.hasChunks()){let a=b.clean();b.setCookies(a)}a.setCookie(a.context.authCookies.sessionData.name,i,r)}if(a.context.options.account?.storeAccountCookie){let b=await (0,g.ec)(a);b&&await (0,g.Ce)(a,b)}}async function s(a,b,c,d){let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);c=void 0!==c?c:!!e;let f=a.context.authCookies.sessionToken.attributes,g=c?void 0:a.context.sessionConfig.expiresIn;await a.setSignedCookie(a.context.authCookies.sessionToken.name,b.session.token,a.context.secret,{...f,maxAge:g,...d}),c&&await a.setSignedCookie(a.context.authCookies.dontRememberToken.name,"true",a.context.secret,a.context.authCookies.dontRememberToken.attributes),await r(a,b,c),a.context.setNewSession(b)}function t(a,b){a.setCookie(b.name,"",{...b.attributes,maxAge:0})}function u(a,b){if(t(a,a.context.authCookies.sessionToken),t(a,a.context.authCookies.sessionData),a.context.options.account?.storeAccountCookie){t(a,a.context.authCookies.accountData);let b=(0,g.R_)(a.context.authCookies.accountData.name,a.context.authCookies.accountData.attributes,a),c=b.clean();b.setCookies(c)}"cookie"===a.context.oauthConfig.storeStateStrategy&&t(a,a.context.createAuthCookie("oauth_state"));let c=(0,g.Uh)(a.context.authCookies.sessionData.name,a.context.authCookies.sessionData.attributes,a),d=c.clean();c.setCookies(d),b||t(a,a.context.authCookies.dontRememberToken)}},44625:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"AliasNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AliasNode",node:a,alias:b})})},46010:(a,b,c)=>{c.d(b,{To:()=>e,yE:()=>d});let d="__Secure-";function e(a){let b=new Map;return(function(a){if(!a)return[];let b=[],c="",d=0;for(;d<a.length;){let e=a[d];if(","===e){let f=c.toLowerCase();if(f.includes("expires=")&&!f.includes("gmt"))c+=e,d++;else{let e=c.trim();e&&b.push(e),c="",++d<a.length&&" "===a[d]&&d++}continue}c+=e,d++}let e=c.trim();return e&&b.push(e),b})(a).forEach(a=>{let[c,...d]=a.split(";").map(a=>a.trim()),[e,...f]=(c||"").split("="),g=f.join("=");if(!e||void 0===g)return;let h={value:g};d.forEach(a=>{let[b,...c]=a.split("="),d=c.join("="),e=b.trim().toLowerCase();switch(e){case"max-age":h["max-age"]=d?parseInt(d.trim(),10):void 0;break;case"expires":h.expires=d?new Date(d.trim()):void 0;break;case"domain":h.domain=d?d.trim():void 0;break;case"path":h.path=d?d.trim():void 0;break;case"secure":h.secure=!0;break;case"httponly":h.httponly=!0;break;case"samesite":h.samesite=d?d.trim().toLowerCase():void 0;break;default:h[e]=!d||d.trim()}}),b.set(e,h)}),b}},47467:(a,b,c)=>{c.d(b,{o:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"InsertQueryNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"InsertQueryNode",into:a,...b&&{with:b},replace:c}),createWithoutInto:()=>(0,d.CN)({kind:"InsertQueryNode"}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},47777:(a,b,c)=>{c.d(b,{O:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"OrderByNode"===a.kind,create:a=>(0,d.CN)({kind:"OrderByNode",items:(0,d.CN)([...a])}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})})},48137:(a,b,c)=>{c.d(b,{G:()=>f});var d=c(37381),e=c(60353);async function f(a){let b=new d.c,c=new d.c;return a.provideConnection(async a=>(b.resolve(a),await c.promise)).catch(a=>b.reject(a)),(0,e.CN)({connection:await b.promise,release:c.resolve})}},48750:(a,b,c)=>{c.d(b,{II:()=>q,yk:()=>j,jt:()=>k});var d=c(35537);let e=({usePlural:a,schema:b})=>c=>{if(a&&"s"===c.charAt(c.length-1)){let a=c.slice(0,-1),d=b[a]?a:void 0;if(d||(d=Object.entries(b).find(([b,c])=>c.modelName===a)?.[0]),d)return d}let e=b[c]?c:void 0;if(e||(e=Object.entries(b).find(([a,b])=>b.modelName===c)?.[0]),!e)throw new d.$(`Model "${c}" not found in schema`);return e},f=({schema:a,usePlural:b})=>{let c=e({schema:a,usePlural:b});return({field:b,model:e})=>{if("id"===b||"_id"===b)return"id";let f=c(e),g=a[f]?.fields[b];if(!g){let c=Object.entries(a[f].fields).find(([a,c])=>c.fieldName===b);c&&(g=c[1],b=c[0])}if(!g)throw new d.$(`Field ${b} not found in model ${f}`);return b}};var g=c(15560);c(97960);var h=c(63561);c(2816);let i=({usePlural:a,schema:b,disableIdGeneration:c,options:d,customIdGenerator:f,supportsUUIDs:i})=>{let j=e({usePlural:a,schema:b});return({customModelName:a,forceAllowId:b})=>{let e=d.advanced?.database?.useNumberId||d.advanced?.database?.generateId==="serial",k=d.advanced?.database?.generateId==="uuid",l=!c&&(!e||!!b)&&(!k||!i),m=j(a??"id");return{type:e?"number":"string",required:!!l,...l?{defaultValue(){if(c)return;let a=d.advanced?.database?.generateId;if(!1!==a&&!e)return"function"==typeof a?a({model:m}):f?f({model:m}):"uuid"===a?crypto.randomUUID():(0,h.$)()}}:{},transform:{input:a=>{if(a){if(e){let b=Number(a);if(isNaN(b))return;return b}if(k){if(l&&!b)return a;if(c||i)return;if(b&&"string"==typeof a)if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a))return a;else{let a=Error().stack?.split("\n").filter((a,b)=>1!==b).join("\n").replace("Error:","");g.vF.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",a)}return"string"==typeof a||i?void 0:crypto.randomUUID()}return a}},output:a=>{if(a)return String(a)}}}}},j=({schema:a,usePlural:b})=>{let c=e({schema:a,usePlural:b}),d=f({schema:a,usePlural:b});return function({model:b,field:e}){let f=c(b),g=d({model:f,field:e});return a[f]?.fields[g]?.fieldName||g}},k=({usePlural:a,schema:b})=>{let c=e({schema:b,usePlural:a});return d=>{let e=c(d);return b&&b[e]&&b[e].modelName!==d?a?`${b[e].modelName}s`:b[e].modelName:a?`${d}s`:d}};var l=c(82587),m=c(84981),n=c(75544);let o=[],p=-1,q=({adapter:a,config:b})=>c=>{let h=Math.random().toString(36).substring(2,15),m={...b,supportsBooleans:b.supportsBooleans??!0,supportsDates:b.supportsDates??!0,supportsJSON:b.supportsJSON??!1,adapterName:b.adapterName??b.adapterId,supportsNumericIds:b.supportsNumericIds??!0,supportsUUIDs:b.supportsUUIDs??!1,supportsArrays:b.supportsArrays??!1,transaction:b.transaction??!1,disableTransformInput:b.disableTransformInput??!1,disableTransformOutput:b.disableTransformOutput??!1,disableTransformJoin:b.disableTransformJoin??!1};if((c.advanced?.database?.useNumberId===!0||c.advanced?.database?.generateId==="serial")&&!1===m.supportsNumericIds)throw new d.$(`[${m.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let q=(0,l.y)(c),v=(...a)=>{if(!0===m.debugLogs||"object"==typeof m.debugLogs){let b=(0,g.h)({level:"info"});if("object"==typeof m.debugLogs&&"isRunningAdapterTests"in m.debugLogs){m.debugLogs.isRunningAdapterTests&&(a.shift(),o.push({instance:h,args:a}));return}if("object"!=typeof m.debugLogs||!m.debugLogs.logCondition||m.debugLogs.logCondition?.())if("object"==typeof a[0]&&"method"in a[0]){let c=a.shift().method;if("object"==typeof m.debugLogs){if("create"===c&&!m.debugLogs.create)return;else if("update"===c&&!m.debugLogs.update)return;else if("updateMany"===c&&!m.debugLogs.updateMany)return;else if("findOne"===c&&!m.debugLogs.findOne)return;else if("findMany"===c&&!m.debugLogs.findMany)return;else if("delete"===c&&!m.debugLogs.delete)return;else if("deleteMany"===c&&!m.debugLogs.deleteMany)return;else if("count"===c&&!m.debugLogs.count)return}b.info(`[${m.adapterName}]`,...a)}else b.info(`[${m.adapterName}]`,...a)}},w=(0,g.h)(c.logger),x=e({usePlural:m.usePlural,schema:q}),y=f({usePlural:m.usePlural,schema:q}),z=k({usePlural:m.usePlural,schema:q}),A=j({schema:q,usePlural:m.usePlural}),B=i({schema:q,options:c,usePlural:m.usePlural,disableIdGeneration:m.disableIdGeneration,customIdGenerator:m.customIdGenerator,supportsUUIDs:m.supportsUUIDs}),C=(({usePlural:a,schema:b,options:c,customIdGenerator:g,disableIdGeneration:h})=>{let j=e({usePlural:a,schema:b}),k=f({usePlural:a,schema:b}),l=i({usePlural:a,schema:b,options:c,customIdGenerator:g,disableIdGeneration:h});return({model:a,field:c})=>{let e=j(a),f=k({field:c,model:e}),g=b[e].fields;g.id=l({customModelName:e});let h=g[f];if(!h)throw new d.$(`Field ${c} not found in model ${a}`);return h}})({schema:q,options:c,usePlural:m.usePlural,disableIdGeneration:m.disableIdGeneration,customIdGenerator:m.customIdGenerator}),D=async(a,b,d,e)=>{let f={},g=q[b].fields,h=m.mapKeysTransformInput??{},i=c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial";for(let j in g.id=B({customModelName:b,forceAllowId:e&&"id"in a}),g){let e=a[j],k=g[j],l=h[j]||g[j].fieldName||j;if(void 0===e&&(void 0===k.defaultValue&&!k.transform?.input&&!("update"===d&&k.onUpdate)||"update"===d&&!k.onUpdate))continue;if(k&&"date"===k.type&&!(e instanceof Date)&&"string"==typeof e)try{e=new Date(e)}catch{w.error("[Adapter Factory] Failed to convert string to date",{value:e,field:j})}let n=function(a,b,c){if("update"===c)return void 0===a&&void 0!==b.onUpdate?"function"==typeof b.onUpdate?b.onUpdate():b.onUpdate:a;return"create"===c&&(void 0===a||!0===b.required&&null===a)&&void 0!==b.defaultValue?"function"==typeof b.defaultValue?b.defaultValue():b.defaultValue:a}(e,k,d);k.transform?.input&&(n=await k.transform.input(n)),k.references?.field==="id"&&i?n=Array.isArray(n)?n.map(a=>null!==a?Number(a):null):null!==n?Number(n):null:!1===m.supportsJSON&&"object"==typeof n&&"json"===k.type||!1===m.supportsArrays&&Array.isArray(n)&&("string[]"===k.type||"number[]"===k.type)?n=JSON.stringify(n):!1===m.supportsDates&&n instanceof Date&&"date"===k.type?n=n.toISOString():!1===m.supportsBooleans&&"boolean"==typeof n&&(n=+!!n),m.customTransformInput&&(n=m.customTransformInput({data:n,action:d,field:l,fieldAttributes:k,model:z(b),schema:q,options:c})),void 0!==n&&(f[l]=n)}return f},E=async(a,b,d=[],e)=>{let f=async(a,b,d=[])=>{if(!a)return null;let e=m.mapKeysTransformOutput??{},f={},g=q[x(b)].fields;for(let h in g[Object.entries(e).find(([a,b])=>"id"===b)?.[0]??"id"]={type:c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial"?"number":"string"},g){if(d.length&&!d.includes(h))continue;let i=g[h];if(i){let g=i.fieldName||h,j=a[Object.entries(e).find(([a,b])=>b===g)?.[0]||g];i.transform?.output&&(j=await i.transform.output(j));let k=e[h]||h;"id"===g||i.references?.field==="id"?null!=j&&(j=String(j)):!1===m.supportsJSON&&"string"==typeof j&&"json"===i.type||!1===m.supportsArrays&&"string"==typeof j&&("string[]"===i.type||"number[]"===i.type)?j=(0,n.$)(j):!1===m.supportsDates&&"string"==typeof j&&"date"===i.type?j=new Date(j):!1===m.supportsBooleans&&"number"==typeof j&&"boolean"===i.type&&(j=1===j),m.customTransformOutput&&(j=m.customTransformOutput({data:j,field:k,fieldAttributes:i,select:d,model:z(b),schema:q,options:c})),f[k]=j}}return f};if(!e||0===Object.keys(e).length)return await f(a,b,d);b=x(b);let g=await f(a,b,d),h=Object.entries(e).map(([a,b])=>({modelName:z(a),defaultModelName:x(a),joinConfig:b}));if(!a)return null;for(let{modelName:d,defaultModelName:e,joinConfig:i}of h){let h=await (async()=>c.experimental?.joins?a[d]:await H({baseModel:b,baseData:g,joinModel:d,specificJoinConfig:i}))();null==h&&(h="one-to-one"===i.relation?null:[]),"one-to-many"!==i.relation||Array.isArray(h)||(h=[h]);let j=[];if(Array.isArray(h))for(let a of h){let b=await f(a,d,[]);j.push(b)}else{let a=await f(h,d,[]);j.push(a)}g[e]=("one-to-one"===i.relation?j[0]:j)??null}return g},F=({model:a,where:b,action:e})=>{if(!b)return;let f=m.mapKeysTransformInput??{};return b.map(b=>{let{field:g,value:h,operator:i="eq",connector:j="AND"}=b;if("in"===i&&!Array.isArray(h))throw new d.$("Value must be an array");let k=h,l=x(a),n=y({field:g,model:a}),o=f[n]||A({field:n,model:l}),p=C({field:n,model:l}),r=c.advanced?.database?.useNumberId||c.advanced?.database?.generateId==="serial";if(("id"===n||p.references?.field==="id")&&r&&(k=Array.isArray(h)?h.map(Number):Number(h)),"date"===p.type&&h instanceof Date&&!m.supportsDates&&(k=h.toISOString()),"boolean"!==p.type||"boolean"!=typeof h||m.supportsBooleans||(k=+!!h),"json"===p.type&&"object"==typeof h&&!m.supportsJSON)try{k=JSON.stringify(h)}catch(a){throw Error(`Failed to stringify JSON value for field ${o}`,{cause:a})}return m.customTransformInput&&(k=m.customTransformInput({data:k,fieldAttributes:p,field:o,model:z(a),schema:q,options:c,action:e})),{operator:i,connector:j,field:o,value:k}})},G=(a,b,e)=>{if(!b||0===Object.keys(b).length)return;let f={};for(let[g,h]of Object.entries(b)){let b,i,j;if(!h)continue;let k=x(g),l=x(a),m=Object.entries(q[k].fields).filter(([a,b])=>b.references&&x(b.references.model)===l),n=!0;if(m.length||(m=Object.entries(q[l].fields).filter(([a,b])=>b.references&&x(b.references.model)===k),n=!1),m.length){if(m.length>1)throw new d.$(`Multiple foreign keys found for model ${g} and base model ${a} while performing join operation. Only one foreign key is supported.`)}else throw new d.$(`No foreign key found for model ${g} and base model ${a} while performing join operation.`);let[o,p]=m[0];if(!p.references)throw new d.$(`No references found for foreign key ${o} on model ${g} while performing join operation.`);n?(b=A({model:a,field:j=p.references.field}),i=A({model:g,field:o})):(b=A({model:a,field:j=o}),i=A({model:g,field:p.references.field})),e&&!e.includes(j)&&e.push(j);let r="id"===i||(p.unique??!1),s=c.advanced?.database?.defaultFindManyLimit??100;r?s=1:"object"==typeof h&&"number"==typeof h.limit&&(s=h.limit),f[z(g)]={on:{from:b,to:i},limit:s,relation:r?"one-to-one":"one-to-many"}}return{join:f,select:e}},H=async({baseModel:a,baseData:b,joinModel:d,specificJoinConfig:e})=>{let f;if(!b)return b;let g=z(d),h=e.on.to,i=b[y({field:e.on.from,model:a})];if(null==i)return"one-to-one"===e.relation?null:[];let j=F({model:g,where:[{field:h,value:i,operator:"eq",connector:"AND"}],action:"findOne"});try{if("one-to-one"===e.relation)f=await I.findOne({model:g,where:j});else{let a=e.limit??c.advanced?.database?.defaultFindManyLimit??100;f=await I.findMany({model:g,where:j,limit:a})}}catch(a){throw w.error(`Failed to query fallback join for model ${g}:`,{where:j,limit:e.limit}),console.error(a),a}return f},I=a({options:c,schema:q,debugLog:v,getFieldName:A,getModelName:z,getDefaultModelName:x,getDefaultFieldName:y,getFieldAttributes:C,transformInput:D,transformOutput:E,transformWhereClause:F}),J=null,K={transaction:async a=>{if(!J)if(m.transaction)w.debug(`[${m.adapterName}] - Using provided transaction implementation.`),J=m.transaction;else J=a=>a(K);return J(a)},create:async({data:a,model:b,select:c,forceAllowId:d=!1})=>{let e=++p,f=z(b);b=x(b),"id"in a&&void 0!==a.id&&!d&&(w.warn(`[${m.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`),console.log(Error().stack?.split("\n").filter((a,b)=>1!==b).join("\n").replace("Error:","Create method with `id` being called at:")),a.id=void 0),v({method:"create"},`${r(e)} ${s(1,4)}`,`${t("create")} ${u("Unsafe Input")}:`,{model:f,data:a});let g=a;m.disableTransformInput||(g=await D(a,b,"create",d)),v({method:"create"},`${r(e)} ${s(2,4)}`,`${t("create")} ${u("Parsed Input")}:`,{model:f,data:g});let h=await I.create({data:g,model:f});v({method:"create"},`${r(e)} ${s(3,4)}`,`${t("create")} ${u("DB Result")}:`,{model:f,res:h});let i=h;return m.disableTransformOutput||(i=await E(h,b,c,void 0)),v({method:"create"},`${r(e)} ${s(4,4)}`,`${t("create")} ${u("Parsed Result")}:`,{model:f,data:i}),i},update:async({model:a,where:b,update:c})=>{let d=++p,e=z(a=x(a)),f=F({model:a,where:b,action:"update"});v({method:"update"},`${r(d)} ${s(1,4)}`,`${t("update")} ${u("Unsafe Input")}:`,{model:e,data:c});let g=c;m.disableTransformInput||(g=await D(c,a,"update")),v({method:"update"},`${r(d)} ${s(2,4)}`,`${t("update")} ${u("Parsed Input")}:`,{model:e,data:g});let h=await I.update({model:e,where:f,update:g});v({method:"update"},`${r(d)} ${s(3,4)}`,`${t("update")} ${u("DB Result")}:`,{model:e,data:h});let i=h;return m.disableTransformOutput||(i=await E(h,a,void 0,void 0)),v({method:"update"},`${r(d)} ${s(4,4)}`,`${t("update")} ${u("Parsed Result")}:`,{model:e,data:i}),i},updateMany:async({model:a,where:b,update:c})=>{let d=++p,e=z(a),f=F({model:a,where:b,action:"updateMany"});a=x(a),v({method:"updateMany"},`${r(d)} ${s(1,4)}`,`${t("updateMany")} ${u("Unsafe Input")}:`,{model:e,data:c});let g=c;m.disableTransformInput||(g=await D(c,a,"update")),v({method:"updateMany"},`${r(d)} ${s(2,4)}`,`${t("updateMany")} ${u("Parsed Input")}:`,{model:e,data:g});let h=await I.updateMany({model:e,where:f,update:g});return v({method:"updateMany"},`${r(d)} ${s(3,4)}`,`${t("updateMany")} ${u("DB Result")}:`,{model:e,data:h}),v({method:"updateMany"},`${r(d)} ${s(4,4)}`,`${t("updateMany")} ${u("Parsed Result")}:`,{model:e,data:h}),h},findOne:async({model:a,where:b,select:d,join:e})=>{let f,g=++p,h=z(a),i=F({model:a,where:b,action:"findOne"});a=x(a);let j=!0;if(m.disableTransformJoin)f=e;else{let b=G(a,e,d);b&&(f=b.join,d=b.select),!c.experimental?.joins&&f&&Object.keys(f).length>0&&(j=!1)}v({method:"findOne"},`${r(g)} ${s(1,3)}`,`${t("findOne")}:`,{model:h,where:i,select:d,join:f});let k=await I.findOne({model:h,where:i,select:d,join:j?f:void 0});v({method:"findOne"},`${r(g)} ${s(2,3)}`,`${t("findOne")} ${u("DB Result")}:`,{model:h,data:k});let l=k;return m.disableTransformOutput||(l=await E(k,a,d,f)),v({method:"findOne"},`${r(g)} ${s(3,3)}`,`${t("findOne")} ${u("Parsed Result")}:`,{model:h,data:l}),l},findMany:async({model:a,where:b,limit:d,sortBy:e,offset:f,join:g})=>{let h,i=++p,j=d??c.advanced?.database?.defaultFindManyLimit??100,k=z(a),l=F({model:a,where:b,action:"findMany"});a=x(a);let n=!0;if(m.disableTransformJoin)h=g;else{let b=G(a,g,void 0);b&&(h=b.join),!c.experimental?.joins&&h&&Object.keys(h).length>0&&(n=!1)}v({method:"findMany"},`${r(i)} ${s(1,3)}`,`${t("findMany")}:`,{model:k,where:l,limit:j,sortBy:e,offset:f,join:h});let o=await I.findMany({model:k,where:l,limit:j,sortBy:e,offset:f,join:n?h:void 0});v({method:"findMany"},`${r(i)} ${s(2,3)}`,`${t("findMany")} ${u("DB Result")}:`,{model:k,data:o});let q=o;return m.disableTransformOutput||(q=await Promise.all(o.map(async b=>await E(b,a,void 0,h)))),v({method:"findMany"},`${r(i)} ${s(3,3)}`,`${t("findMany")} ${u("Parsed Result")}:`,{model:k,data:q}),q},delete:async({model:a,where:b})=>{let c=++p,d=z(a),e=F({model:a,where:b,action:"delete"});a=x(a),v({method:"delete"},`${r(c)} ${s(1,2)}`,`${t("delete")}:`,{model:d,where:e}),await I.delete({model:d,where:e}),v({method:"delete"},`${r(c)} ${s(2,2)}`,`${t("delete")} ${u("DB Result")}:`,{model:d})},deleteMany:async({model:a,where:b})=>{let c=++p,d=z(a),e=F({model:a,where:b,action:"deleteMany"});a=x(a),v({method:"deleteMany"},`${r(c)} ${s(1,2)}`,`${t("deleteMany")} ${u("DeleteMany")}:`,{model:d,where:e});let f=await I.deleteMany({model:d,where:e});return v({method:"deleteMany"},`${r(c)} ${s(2,2)}`,`${t("deleteMany")} ${u("DB Result")}:`,{model:d,data:f}),f},count:async({model:a,where:b})=>{let c=++p,d=z(a),e=F({model:a,where:b,action:"count"});a=x(a),v({method:"count"},`${r(c)} ${s(1,2)}`,`${t("count")}:`,{model:d,where:e});let f=await I.count({model:d,where:e});return v({method:"count"},`${r(c)} ${s(2,2)}`,`${t("count")}:`,{model:d,data:f}),f},createSchema:I.createSchema?async(a,b)=>{let d=(0,l.y)(c);return c.secondaryStorage&&!c.session?.storeSessionInDatabase&&delete d.session,I.createSchema({file:b,tables:d})}:void 0,options:{adapterConfig:m,...I.options??{}},id:m.adapterId,...m.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){o=o.filter(a=>a.instance!==h)},printDebugLogs(){let a=``.repeat(80),b=o.filter(a=>a.instance===h);0!==b.length&&console.log(...b.reverse().map(a=>(a.args[0]=`
${a.args[0]}`,[...a.args,"\n"])).reduce((a,b)=>[...b,...a],[`
${a}`]))}}}:{}};return K};function r(a){return 8>(0,m.t)()?`#${a}`:`${g.p4.fg.magenta}#${a}${g.p4.reset}`}function s(a,b){return`${g.p4.bg.black}${g.p4.fg.yellow}[${a}/${b}]${g.p4.reset}`}function t(a){return`${g.p4.bright}${a}${g.p4.reset}`}function u(a){return`${g.p4.dim}(${a})${g.p4.reset}`}},49374:(a,b,c)=>{c.d(b,{q:()=>f});var d=c(9005),e=c(60353);let f=(0,e.CN)({is:a=>"ReferenceNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"ReferenceNode",table:b,column:a}),createSelectAll:a=>(0,e.CN)({kind:"ReferenceNode",table:a,column:d.U.create()})})},49764:(a,b,c)=>{c.r(b),c.d(b,{$brand:()=>q,$input:()=>eT,$output:()=>eS,NEVER:()=>o,TimePrecision:()=>fk,ZodAny:()=>i3,ZodArray:()=>jd,ZodBase64:()=>ix,ZodBase64URL:()=>iz,ZodBigInt:()=>iU,ZodBigIntFormat:()=>iW,ZodBoolean:()=>iS,ZodCIDRv4:()=>it,ZodCIDRv6:()=>iv,ZodCUID:()=>ib,ZodCUID2:()=>id,ZodCatch:()=>j$,ZodCodec:()=>j4,ZodCustom:()=>kg,ZodCustomStringFormat:()=>iF,ZodDate:()=>jb,ZodDefault:()=>jS,ZodDiscriminatedUnion:()=>jo,ZodE164:()=>iB,ZodEmail:()=>hX,ZodEmoji:()=>h7,ZodEnum:()=>jC,ZodError:()=>hE,ZodExactOptional:()=>jN,ZodFile:()=>jH,ZodFirstPartyTypeKind:()=>e,ZodFunction:()=>ke,ZodGUID:()=>hZ,ZodIPv4:()=>im,ZodIPv6:()=>ir,ZodISODate:()=>hx,ZodISODateTime:()=>hv,ZodISODuration:()=>hB,ZodISOTime:()=>hz,ZodIntersection:()=>jq,ZodIssueCode:()=>kr,ZodJWT:()=>iD,ZodKSUID:()=>ik,ZodLazy:()=>ka,ZodLiteral:()=>jF,ZodMAC:()=>ip,ZodMap:()=>jy,ZodNaN:()=>j0,ZodNanoID:()=>h9,ZodNever:()=>i7,ZodNonOptional:()=>jW,ZodNull:()=>i1,ZodNullable:()=>jP,ZodNumber:()=>iK,ZodNumberFormat:()=>iM,ZodObject:()=>jg,ZodOptional:()=>jL,ZodPipe:()=>j2,ZodPrefault:()=>jU,ZodPromise:()=>kc,ZodReadonly:()=>j6,ZodRealError:()=>hF,ZodRecord:()=>ju,ZodSet:()=>jA,ZodString:()=>hU,ZodStringFormat:()=>hW,ZodSuccess:()=>jY,ZodSymbol:()=>iZ,ZodTemplateLiteral:()=>j8,ZodTransform:()=>jJ,ZodTuple:()=>js,ZodType:()=>hS,ZodULID:()=>ig,ZodURL:()=>h4,ZodUUID:()=>h_,ZodUndefined:()=>i_,ZodUnion:()=>jk,ZodUnknown:()=>i5,ZodVoid:()=>i9,ZodXID:()=>ii,ZodXor:()=>jm,_ZodString:()=>hT,_default:()=>jT,_function:()=>kf,any:()=>i4,array:()=>je,base64:()=>iy,base64url:()=>iA,bigint:()=>iV,boolean:()=>iT,catch:()=>j_,check:()=>kh,cidrv4:()=>iu,cidrv6:()=>iw,clone:()=>aa,codec:()=>j5,coerce:()=>n,config:()=>u,core:()=>j,cuid:()=>ic,cuid2:()=>ie,custom:()=>ki,date:()=>jc,decode:()=>hL,decodeAsync:()=>hN,describe:()=>kl,discriminatedUnion:()=>jp,e164:()=>iC,email:()=>hY,emoji:()=>h8,encode:()=>hK,encodeAsync:()=>hM,endsWith:()=>f4,enum:()=>jD,exactOptional:()=>jO,file:()=>jI,flattenError:()=>aH,float32:()=>iO,float64:()=>iP,formatError:()=>aI,fromJSONSchema:()=>kw,function:()=>kf,getErrorMap:()=>kt,globalRegistry:()=>eW,gt:()=>fO,gte:()=>fP,guid:()=>h$,hash:()=>iJ,hex:()=>iI,hostname:()=>iH,httpUrl:()=>h6,includes:()=>f2,instanceof:()=>kn,int:()=>iN,int32:()=>iQ,int64:()=>iX,intersection:()=>jr,ipv4:()=>io,ipv6:()=>is,iso:()=>l,json:()=>kp,jwt:()=>iE,keyof:()=>jf,ksuid:()=>il,lazy:()=>kb,length:()=>f$,literal:()=>jG,locales:()=>h,looseObject:()=>jj,looseRecord:()=>jx,lowercase:()=>f0,lt:()=>fM,lte:()=>fN,mac:()=>iq,map:()=>jz,maxLength:()=>fY,maxSize:()=>fV,meta:()=>km,mime:()=>f6,minLength:()=>fZ,minSize:()=>fW,multipleOf:()=>fU,nan:()=>j1,nanoid:()=>ia,nativeEnum:()=>jE,negative:()=>fR,never:()=>i8,nonnegative:()=>fT,nonoptional:()=>jX,nonpositive:()=>fS,normalize:()=>f8,null:()=>i2,nullable:()=>jQ,nullish:()=>jR,number:()=>iL,object:()=>jh,optional:()=>jM,overwrite:()=>f7,parse:()=>hG,parseAsync:()=>hH,partialRecord:()=>jw,pipe:()=>j3,positive:()=>fQ,prefault:()=>jV,preprocess:()=>kq,prettifyError:()=>aL,promise:()=>kd,property:()=>f5,readonly:()=>j7,record:()=>jv,refine:()=>kj,regex:()=>f_,regexes:()=>g,registry:()=>eV,safeDecode:()=>hP,safeDecodeAsync:()=>hR,safeEncode:()=>hO,safeEncodeAsync:()=>hQ,safeParse:()=>hI,safeParseAsync:()=>hJ,set:()=>jB,setErrorMap:()=>ks,size:()=>fX,slugify:()=>gc,startsWith:()=>f3,strictObject:()=>ji,string:()=>hV,stringFormat:()=>iG,stringbool:()=>ko,success:()=>jZ,superRefine:()=>kk,symbol:()=>i$,templateLiteral:()=>j9,toJSONSchema:()=>ht,toLowerCase:()=>ga,toUpperCase:()=>gb,transform:()=>jK,treeifyError:()=>aJ,trim:()=>f9,tuple:()=>jt,uint32:()=>iR,uint64:()=>iY,ulid:()=>ih,undefined:()=>i0,union:()=>jl,unknown:()=>i6,uppercase:()=>f1,url:()=>h5,util:()=>f,uuid:()=>h0,uuidv4:()=>h1,uuidv6:()=>h2,uuidv7:()=>h3,void:()=>ja,xid:()=>ij,xor:()=>jn});var d,e,f={};c.r(f),c.d(f,{BIGINT_FORMAT_RANGES:()=>ag,Class:()=>aD,NUMBER_FORMAT_RANGES:()=>af,aborted:()=>ao,allowsEval:()=>U,assert:()=>z,assertEqual:()=>v,assertIs:()=>x,assertNever:()=>y,assertNotEqual:()=>w,assignProp:()=>K,base64ToUint8Array:()=>ax,base64urlToUint8Array:()=>az,cached:()=>D,captureStackTrace:()=>S,cleanEnum:()=>aw,cleanRegex:()=>F,clone:()=>aa,cloneDef:()=>M,createTransparentProxy:()=>ac,defineLazy:()=>I,esc:()=>Q,escapeRegex:()=>_,extend:()=>aj,finalizeIssue:()=>ar,floatSafeRemainder:()=>G,getElementAtPath:()=>N,getEnumValues:()=>A,getLengthableOrigin:()=>at,getParsedType:()=>Y,getSizableOrigin:()=>as,hexToUint8Array:()=>aB,isObject:()=>T,isPlainObject:()=>V,issue:()=>av,joinValues:()=>B,jsonStringifyReplacer:()=>C,merge:()=>al,mergeDefs:()=>L,normalizeParams:()=>ab,nullish:()=>E,numKeys:()=>X,objectClone:()=>J,omit:()=>ai,optionalKeys:()=>ae,parsedType:()=>au,partial:()=>am,pick:()=>ah,prefixIssues:()=>ap,primitiveTypes:()=>$,promiseAllObject:()=>O,propertyKeyTypes:()=>Z,randomString:()=>P,required:()=>an,safeExtend:()=>ak,shallowClone:()=>W,slugify:()=>R,stringifyPrimitive:()=>ad,uint8ArrayToBase64:()=>ay,uint8ArrayToBase64url:()=>aA,uint8ArrayToHex:()=>aC,unwrapMessage:()=>aq});var g={};c.r(g),c.d(g,{base64:()=>bx,base64url:()=>by,bigint:()=>bI,boolean:()=>bL,browserEmail:()=>bq,cidrv4:()=>bv,cidrv6:()=>bw,cuid:()=>a8,cuid2:()=>a9,date:()=>bD,datetime:()=>bG,domain:()=>bA,duration:()=>be,e164:()=>bB,email:()=>bl,emoji:()=>br,extendedDuration:()=>bf,guid:()=>bg,hex:()=>bQ,hostname:()=>bz,html5Email:()=>bm,idnEmail:()=>bp,integer:()=>bJ,ipv4:()=>bs,ipv6:()=>bt,ksuid:()=>bc,lowercase:()=>bO,mac:()=>bu,md5_base64:()=>bU,md5_base64url:()=>bV,md5_hex:()=>bT,nanoid:()=>bd,null:()=>bM,number:()=>bK,rfc5322Email:()=>bn,sha1_base64:()=>bX,sha1_base64url:()=>bY,sha1_hex:()=>bW,sha256_base64:()=>b$,sha256_base64url:()=>b_,sha256_hex:()=>bZ,sha384_base64:()=>b1,sha384_base64url:()=>b2,sha384_hex:()=>b0,sha512_base64:()=>b4,sha512_base64url:()=>b5,sha512_hex:()=>b3,string:()=>bH,time:()=>bF,ulid:()=>ba,undefined:()=>bN,unicodeEmail:()=>bo,uppercase:()=>bP,uuid:()=>bh,uuid4:()=>bi,uuid6:()=>bj,uuid7:()=>bk,xid:()=>bb});var h={};c.r(h),c.d(h,{ar:()=>d_,az:()=>d0,be:()=>d2,bg:()=>d3,ca:()=>d4,cs:()=>d5,da:()=>d6,de:()=>d7,en:()=>d8,eo:()=>d9,es:()=>ea,fa:()=>eb,fi:()=>ec,fr:()=>ed,frCA:()=>ee,he:()=>ef,hu:()=>eg,hy:()=>ej,id:()=>ek,is:()=>el,it:()=>em,ja:()=>en,ka:()=>eo,kh:()=>eq,km:()=>ep,ko:()=>er,lt:()=>eu,mk:()=>ev,ms:()=>ew,nl:()=>ex,no:()=>ey,ota:()=>ez,pl:()=>eB,ps:()=>eA,pt:()=>eC,ru:()=>eE,sl:()=>eF,sv:()=>eG,ta:()=>eH,th:()=>eI,tr:()=>eJ,ua:()=>eL,uk:()=>eK,ur:()=>eM,uz:()=>eN,vi:()=>eO,yo:()=>eR,zhCN:()=>eP,zhTW:()=>eQ});var i={};c.r(i);var j={};c.r(j),c.d(j,{$ZodAny:()=>c7,$ZodArray:()=>dd,$ZodAsyncError:()=>r,$ZodBase64:()=>cU,$ZodBase64URL:()=>cW,$ZodBigInt:()=>c2,$ZodBigIntFormat:()=>c3,$ZodBoolean:()=>c1,$ZodCIDRv4:()=>cR,$ZodCIDRv6:()=>cS,$ZodCUID:()=>cF,$ZodCUID2:()=>cG,$ZodCatch:()=>dM,$ZodCheck:()=>b6,$ZodCheckBigIntFormat:()=>cc,$ZodCheckEndsWith:()=>cp,$ZodCheckGreaterThan:()=>b9,$ZodCheckIncludes:()=>cn,$ZodCheckLengthEquals:()=>ci,$ZodCheckLessThan:()=>b8,$ZodCheckLowerCase:()=>cl,$ZodCheckMaxLength:()=>cg,$ZodCheckMaxSize:()=>cd,$ZodCheckMimeType:()=>cs,$ZodCheckMinLength:()=>ch,$ZodCheckMinSize:()=>ce,$ZodCheckMultipleOf:()=>ca,$ZodCheckNumberFormat:()=>cb,$ZodCheckOverwrite:()=>ct,$ZodCheckProperty:()=>cr,$ZodCheckRegex:()=>ck,$ZodCheckSizeEquals:()=>cf,$ZodCheckStartsWith:()=>co,$ZodCheckStringFormat:()=>cj,$ZodCheckUpperCase:()=>cm,$ZodCodec:()=>dQ,$ZodCustom:()=>dZ,$ZodCustomStringFormat:()=>c$,$ZodDate:()=>db,$ZodDefault:()=>dG,$ZodDiscriminatedUnion:()=>dn,$ZodE164:()=>cX,$ZodEmail:()=>cB,$ZodEmoji:()=>cD,$ZodEncodeError:()=>s,$ZodEnum:()=>dy,$ZodError:()=>aF,$ZodExactOptional:()=>dE,$ZodFile:()=>dA,$ZodFunction:()=>dW,$ZodGUID:()=>cz,$ZodIPv4:()=>cO,$ZodIPv6:()=>cP,$ZodISODate:()=>cL,$ZodISODateTime:()=>cK,$ZodISODuration:()=>cN,$ZodISOTime:()=>cM,$ZodIntersection:()=>dp,$ZodJWT:()=>cZ,$ZodKSUID:()=>cJ,$ZodLazy:()=>dY,$ZodLiteral:()=>dz,$ZodMAC:()=>cQ,$ZodMap:()=>du,$ZodNaN:()=>dN,$ZodNanoID:()=>cE,$ZodNever:()=>c9,$ZodNonOptional:()=>dJ,$ZodNull:()=>c6,$ZodNullable:()=>dF,$ZodNumber:()=>c_,$ZodNumberFormat:()=>c0,$ZodObject:()=>dh,$ZodObjectJIT:()=>di,$ZodOptional:()=>dD,$ZodPipe:()=>dO,$ZodPrefault:()=>dI,$ZodPromise:()=>dX,$ZodReadonly:()=>dT,$ZodRealError:()=>aG,$ZodRecord:()=>dt,$ZodRegistry:()=>eU,$ZodSet:()=>dw,$ZodString:()=>cx,$ZodStringFormat:()=>cy,$ZodSuccess:()=>dL,$ZodSymbol:()=>c4,$ZodTemplateLiteral:()=>dV,$ZodTransform:()=>dB,$ZodTuple:()=>dr,$ZodType:()=>cw,$ZodULID:()=>cH,$ZodURL:()=>cC,$ZodUUID:()=>cA,$ZodUndefined:()=>c5,$ZodUnion:()=>dk,$ZodUnknown:()=>c8,$ZodVoid:()=>da,$ZodXID:()=>cI,$ZodXor:()=>dm,$brand:()=>q,$constructor:()=>p,$input:()=>eT,$output:()=>eS,Doc:()=>cu,JSONSchema:()=>i,JSONSchemaGenerator:()=>hu,NEVER:()=>o,TimePrecision:()=>fk,_any:()=>fF,_array:()=>gd,_base64:()=>fg,_base64url:()=>fh,_bigint:()=>fy,_boolean:()=>fw,_catch:()=>gw,_check:()=>gF,_cidrv4:()=>fe,_cidrv6:()=>ff,_coercedBigint:()=>fz,_coercedBoolean:()=>fx,_coercedDate:()=>fK,_coercedNumber:()=>fq,_coercedString:()=>eY,_cuid:()=>e6,_cuid2:()=>e7,_custom:()=>gC,_date:()=>fJ,_decode:()=>aW,_decodeAsync:()=>a$,_default:()=>gt,_discriminatedUnion:()=>gg,_e164:()=>fi,_email:()=>eZ,_emoji:()=>e4,_encode:()=>aU,_encodeAsync:()=>aY,_endsWith:()=>f4,_enum:()=>gm,_file:()=>gp,_float32:()=>fs,_float64:()=>ft,_gt:()=>fO,_gte:()=>fP,_guid:()=>e$,_includes:()=>f2,_int:()=>fr,_int32:()=>fu,_int64:()=>fA,_intersection:()=>gh,_ipv4:()=>fb,_ipv6:()=>fc,_isoDate:()=>fm,_isoDateTime:()=>fl,_isoDuration:()=>fo,_isoTime:()=>fn,_jwt:()=>fj,_ksuid:()=>fa,_lazy:()=>gA,_length:()=>f$,_literal:()=>go,_lowercase:()=>f0,_lt:()=>fM,_lte:()=>fN,_mac:()=>fd,_map:()=>gk,_max:()=>fN,_maxLength:()=>fY,_maxSize:()=>fV,_mime:()=>f6,_min:()=>fP,_minLength:()=>fZ,_minSize:()=>fW,_multipleOf:()=>fU,_nan:()=>fL,_nanoid:()=>e5,_nativeEnum:()=>gn,_negative:()=>fR,_never:()=>fH,_nonnegative:()=>fT,_nonoptional:()=>gu,_nonpositive:()=>fS,_normalize:()=>f8,_null:()=>fE,_nullable:()=>gs,_number:()=>fp,_optional:()=>gr,_overwrite:()=>f7,_parse:()=>aM,_parseAsync:()=>aO,_pipe:()=>gx,_positive:()=>fQ,_promise:()=>gB,_property:()=>f5,_readonly:()=>gy,_record:()=>gj,_refine:()=>gD,_regex:()=>f_,_safeDecode:()=>a2,_safeDecodeAsync:()=>a6,_safeEncode:()=>a0,_safeEncodeAsync:()=>a4,_safeParse:()=>aQ,_safeParseAsync:()=>aS,_set:()=>gl,_size:()=>fX,_slugify:()=>gc,_startsWith:()=>f3,_string:()=>eX,_stringFormat:()=>gJ,_stringbool:()=>gI,_success:()=>gv,_superRefine:()=>gE,_symbol:()=>fC,_templateLiteral:()=>gz,_toLowerCase:()=>ga,_toUpperCase:()=>gb,_transform:()=>gq,_trim:()=>f9,_tuple:()=>gi,_uint32:()=>fv,_uint64:()=>fB,_ulid:()=>e8,_undefined:()=>fD,_union:()=>ge,_unknown:()=>fG,_uppercase:()=>f1,_url:()=>e3,_uuid:()=>e_,_uuidv4:()=>e0,_uuidv6:()=>e1,_uuidv7:()=>e2,_void:()=>fI,_xid:()=>e9,_xor:()=>gf,clone:()=>aa,config:()=>u,createStandardJSONSchemaMethod:()=>gP,createToJSONSchemaMethod:()=>gO,decode:()=>aX,decodeAsync:()=>a_,describe:()=>gG,encode:()=>aV,encodeAsync:()=>aZ,extractDefs:()=>gM,finalize:()=>gN,flattenError:()=>aH,formatError:()=>aI,globalConfig:()=>t,globalRegistry:()=>eW,initializeContext:()=>gK,isValidBase64:()=>cT,isValidBase64URL:()=>cV,isValidJWT:()=>cY,locales:()=>h,meta:()=>gH,parse:()=>aN,parseAsync:()=>aP,prettifyError:()=>aL,process:()=>gL,regexes:()=>g,registry:()=>eV,safeDecode:()=>a3,safeDecodeAsync:()=>a7,safeEncode:()=>a1,safeEncodeAsync:()=>a5,safeParse:()=>aR,safeParseAsync:()=>aT,toDotPath:()=>aK,toJSONSchema:()=>ht,treeifyError:()=>aJ,util:()=>f,version:()=>cv});var k={};c.r(k),c.d(k,{endsWith:()=>f4,gt:()=>fO,gte:()=>fP,includes:()=>f2,length:()=>f$,lowercase:()=>f0,lt:()=>fM,lte:()=>fN,maxLength:()=>fY,maxSize:()=>fV,mime:()=>f6,minLength:()=>fZ,minSize:()=>fW,multipleOf:()=>fU,negative:()=>fR,nonnegative:()=>fT,nonpositive:()=>fS,normalize:()=>f8,overwrite:()=>f7,positive:()=>fQ,property:()=>f5,regex:()=>f_,size:()=>fX,slugify:()=>gc,startsWith:()=>f3,toLowerCase:()=>ga,toUpperCase:()=>gb,trim:()=>f9,uppercase:()=>f1});var l={};c.r(l),c.d(l,{ZodISODate:()=>hx,ZodISODateTime:()=>hv,ZodISODuration:()=>hB,ZodISOTime:()=>hz,date:()=>hy,datetime:()=>hw,duration:()=>hC,time:()=>hA});var m={};c.r(m),c.d(m,{ZodAny:()=>i3,ZodArray:()=>jd,ZodBase64:()=>ix,ZodBase64URL:()=>iz,ZodBigInt:()=>iU,ZodBigIntFormat:()=>iW,ZodBoolean:()=>iS,ZodCIDRv4:()=>it,ZodCIDRv6:()=>iv,ZodCUID:()=>ib,ZodCUID2:()=>id,ZodCatch:()=>j$,ZodCodec:()=>j4,ZodCustom:()=>kg,ZodCustomStringFormat:()=>iF,ZodDate:()=>jb,ZodDefault:()=>jS,ZodDiscriminatedUnion:()=>jo,ZodE164:()=>iB,ZodEmail:()=>hX,ZodEmoji:()=>h7,ZodEnum:()=>jC,ZodExactOptional:()=>jN,ZodFile:()=>jH,ZodFunction:()=>ke,ZodGUID:()=>hZ,ZodIPv4:()=>im,ZodIPv6:()=>ir,ZodIntersection:()=>jq,ZodJWT:()=>iD,ZodKSUID:()=>ik,ZodLazy:()=>ka,ZodLiteral:()=>jF,ZodMAC:()=>ip,ZodMap:()=>jy,ZodNaN:()=>j0,ZodNanoID:()=>h9,ZodNever:()=>i7,ZodNonOptional:()=>jW,ZodNull:()=>i1,ZodNullable:()=>jP,ZodNumber:()=>iK,ZodNumberFormat:()=>iM,ZodObject:()=>jg,ZodOptional:()=>jL,ZodPipe:()=>j2,ZodPrefault:()=>jU,ZodPromise:()=>kc,ZodReadonly:()=>j6,ZodRecord:()=>ju,ZodSet:()=>jA,ZodString:()=>hU,ZodStringFormat:()=>hW,ZodSuccess:()=>jY,ZodSymbol:()=>iZ,ZodTemplateLiteral:()=>j8,ZodTransform:()=>jJ,ZodTuple:()=>js,ZodType:()=>hS,ZodULID:()=>ig,ZodURL:()=>h4,ZodUUID:()=>h_,ZodUndefined:()=>i_,ZodUnion:()=>jk,ZodUnknown:()=>i5,ZodVoid:()=>i9,ZodXID:()=>ii,ZodXor:()=>jm,_ZodString:()=>hT,_default:()=>jT,_function:()=>kf,any:()=>i4,array:()=>je,base64:()=>iy,base64url:()=>iA,bigint:()=>iV,boolean:()=>iT,catch:()=>j_,check:()=>kh,cidrv4:()=>iu,cidrv6:()=>iw,codec:()=>j5,cuid:()=>ic,cuid2:()=>ie,custom:()=>ki,date:()=>jc,describe:()=>kl,discriminatedUnion:()=>jp,e164:()=>iC,email:()=>hY,emoji:()=>h8,enum:()=>jD,exactOptional:()=>jO,file:()=>jI,float32:()=>iO,float64:()=>iP,function:()=>kf,guid:()=>h$,hash:()=>iJ,hex:()=>iI,hostname:()=>iH,httpUrl:()=>h6,instanceof:()=>kn,int:()=>iN,int32:()=>iQ,int64:()=>iX,intersection:()=>jr,ipv4:()=>io,ipv6:()=>is,json:()=>kp,jwt:()=>iE,keyof:()=>jf,ksuid:()=>il,lazy:()=>kb,literal:()=>jG,looseObject:()=>jj,looseRecord:()=>jx,mac:()=>iq,map:()=>jz,meta:()=>km,nan:()=>j1,nanoid:()=>ia,nativeEnum:()=>jE,never:()=>i8,nonoptional:()=>jX,null:()=>i2,nullable:()=>jQ,nullish:()=>jR,number:()=>iL,object:()=>jh,optional:()=>jM,partialRecord:()=>jw,pipe:()=>j3,prefault:()=>jV,preprocess:()=>kq,promise:()=>kd,readonly:()=>j7,record:()=>jv,refine:()=>kj,set:()=>jB,strictObject:()=>ji,string:()=>hV,stringFormat:()=>iG,stringbool:()=>ko,success:()=>jZ,superRefine:()=>kk,symbol:()=>i$,templateLiteral:()=>j9,transform:()=>jK,tuple:()=>jt,uint32:()=>iR,uint64:()=>iY,ulid:()=>ih,undefined:()=>i0,union:()=>jl,unknown:()=>i6,url:()=>h5,uuid:()=>h0,uuidv4:()=>h1,uuidv6:()=>h2,uuidv7:()=>h3,void:()=>ja,xid:()=>ij,xor:()=>jn});var n={};c.r(n),c.d(n,{bigint:()=>kA,boolean:()=>kz,date:()=>kB,number:()=>ky,string:()=>kx});let o=Object.freeze({status:"aborted"});function p(a,b,c){function d(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:g,traits:new Set},enumerable:!1}),c._zod.traits.has(a))return;c._zod.traits.add(a),b(c,d);let e=g.prototype,f=Object.keys(e);for(let a=0;a<f.length;a++){let b=f[a];b in c||(c[b]=e[b].bind(c))}}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}let q=Symbol("zod_brand");class r extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class s extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let t={};function u(a){return a&&Object.assign(t,a),t}function v(a){return a}function w(a){return a}function x(a){}function y(a){throw Error("Unexpected value in exhaustive check")}function z(a){}function A(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function B(a,b="|"){return a.map(a=>ad(a)).join(b)}function C(a,b){return"bigint"==typeof b?b.toString():b}function D(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function E(a){return null==a}function F(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function G(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}let H=Symbol("evaluating");function I(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==H)return void 0===d&&(d=H,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function J(a){return Object.create(Object.getPrototypeOf(a),Object.getOwnPropertyDescriptors(a))}function K(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function L(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function M(a){return L(a._zod.def)}function N(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function O(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function P(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function Q(a){return JSON.stringify(a)}function R(a){return a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}let S="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function T(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let U=D(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function V(a){if(!1===T(a))return!1;let b=a.constructor;if(void 0===b||"function"!=typeof b)return!0;let c=b.prototype;return!1!==T(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function W(a){return V(a)?{...a}:Array.isArray(a)?[...a]:a}function X(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}let Y=a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("undefined"!=typeof Map&&a instanceof Map)return"map";if("undefined"!=typeof Set&&a instanceof Set)return"set";if("undefined"!=typeof Date&&a instanceof Date)return"date";if("undefined"!=typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},Z=new Set(["string","number","symbol"]),$=new Set(["string","number","bigint","boolean","symbol","undefined"]);function _(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aa(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function ab(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function ac(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function ad(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function ae(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}let af={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ag={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function ah(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let e=L(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return K(this,"shape",a),a},checks:[]});return aa(a,e)}function ai(a,b){let c=a._zod.def,d=c.checks;if(d&&d.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let e=L(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return K(this,"shape",d),d},checks:[]});return aa(a,e)}function aj(a,b){if(!V(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0){let c=a._zod.def.shape;for(let a in b)if(void 0!==Object.getOwnPropertyDescriptor(c,a))throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let d=L(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return K(this,"shape",c),c}});return aa(a,d)}function ak(a,b){if(!V(b))throw Error("Invalid input to safeExtend: expected a plain object");let c=L(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return K(this,"shape",c),c}});return aa(a,c)}function al(a,b){let c=L(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return K(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return aa(a,c)}function am(a,b,c){let d=b._zod.def.checks;if(d&&d.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let e=L(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return K(this,"shape",e),e},checks:[]});return aa(b,e)}function an(a,b,c){let d=L(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return K(this,"shape",e),e}});return aa(b,d)}function ao(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function ap(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function aq(a){return"string"==typeof a?a:a?.message}function ar(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=aq(a.inst?._zod.def?.error?.(a))??aq(b?.error?.(a))??aq(c.customError?.(a))??aq(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function as(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function at(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function au(a){let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"nan":"number";case"object":if(null===a)return"null";if(Array.isArray(a))return"array";if(a&&Object.getPrototypeOf(a)!==Object.prototype&&"constructor"in a&&a.constructor)return a.constructor.name}return b}function av(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function aw(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}function ax(a){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}function ay(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCharCode(a[c]);return btoa(b)}function az(a){let b=a.replace(/-/g,"+").replace(/_/g,"/"),c="=".repeat((4-b.length%4)%4);return ax(b+c)}function aA(a){return ay(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function aB(a){let b=a.replace(/^0x/,"");if(b.length%2!=0)throw Error("Invalid hex string length");let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2)c[a/2]=Number.parseInt(b.slice(a,a+2),16);return c}function aC(a){return Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")}class aD{constructor(...a){}}let aE=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,C,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},aF=p("$ZodError",aE),aG=p("$ZodError",aE,{Parent:Error});function aH(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}}function aI(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c}function aJ(a,b=a=>a.message){let c={errors:[]},d=(a,e=[])=>{var f,g;for(let h of a.issues)if("invalid_union"===h.code&&h.errors.length)h.errors.map(a=>d({issues:a},h.path));else if("invalid_key"===h.code)d({issues:h.issues},h.path);else if("invalid_element"===h.code)d({issues:h.issues},h.path);else{let a=[...e,...h.path];if(0===a.length){c.errors.push(b(h));continue}let d=c,i=0;for(;i<a.length;){let c=a[i],e=i===a.length-1;"string"==typeof c?(d.properties??(d.properties={}),(f=d.properties)[c]??(f[c]={errors:[]}),d=d.properties[c]):(d.items??(d.items=[]),(g=d.items)[c]??(g[c]={errors:[]}),d=d.items[c]),e&&d.errors.push(b(h)),i++}}};return d(a),c}function aK(a){let b=[];for(let c of a.map(a=>"object"==typeof a?a.key:a))"number"==typeof c?b.push(`[${c}]`):"symbol"==typeof c?b.push(`[${JSON.stringify(String(c))}]`):/[^\w$]/.test(c)?b.push(`[${JSON.stringify(c)}]`):(b.length&&b.push("."),b.push(c));return b.join("")}function aL(a){let b=[];for(let c of[...a.issues].sort((a,b)=>(a.path??[]).length-(b.path??[]).length))b.push(` ${c.message}`),c.path?.length&&b.push(`   at ${aK(c.path)}`);return b.join("\n")}let aM=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new r;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>ar(a,f,u())));throw S(b,e?.callee),b}return g.value},aN=aM(aG),aO=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>ar(a,f,u())));throw S(b,e?.callee),b}return g.value},aP=aO(aG),aQ=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new r;return f.issues.length?{success:!1,error:new(a??aF)(f.issues.map(a=>ar(a,e,u())))}:{success:!0,data:f.value}},aR=aQ(aG),aS=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>ar(a,e,u())))}:{success:!0,data:f.value}},aT=aS(aG),aU=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aM(a)(b,c,e)},aV=aU(aG),aW=a=>(b,c,d)=>aM(a)(b,c,d),aX=aW(aG),aY=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aO(a)(b,c,e)},aZ=aY(aG),a$=a=>async(b,c,d)=>aO(a)(b,c,d),a_=a$(aG),a0=a=>(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aQ(a)(b,c,e)},a1=a0(aG),a2=a=>(b,c,d)=>aQ(a)(b,c,d),a3=a2(aG),a4=a=>async(b,c,d)=>{let e=d?Object.assign(d,{direction:"backward"}):{direction:"backward"};return aS(a)(b,c,e)},a5=a4(aG),a6=a=>async(b,c,d)=>aS(a)(b,c,d),a7=a6(aG),a8=/^[cC][^\s-]{8,}$/,a9=/^[0-9a-z]+$/,ba=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,bb=/^[0-9a-vA-V]{20}$/,bc=/^[A-Za-z0-9]{27}$/,bd=/^[a-zA-Z0-9_-]{21}$/,be=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bf=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bg=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,bh=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,bi=bh(4),bj=bh(6),bk=bh(7),bl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,bm=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bn=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bo=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,bp=bo,bq=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function br(){return RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}let bs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bt=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,bu=a=>{let b=_(a??":");return RegExp(`^(?:[0-9A-F]{2}${b}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${b}){5}[0-9a-f]{2}$`)},bv=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,bw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bx=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,by=/^[A-Za-z0-9_-]*$/,bz=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,bA=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,bB=/^\+[1-9]\d{6,14}$/,bC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bD=RegExp(`^${bC}$`);function bE(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}function bF(a){return RegExp(`^${bE(a)}$`)}function bG(a){let b=bE({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${bC}T(?:${d})$`)}let bH=a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)},bI=/^-?\d+n?$/,bJ=/^-?\d+$/,bK=/^-?\d+(?:\.\d+)?$/,bL=/^(?:true|false)$/i,bM=/^null$/i,bN=/^undefined$/i,bO=/^[^A-Z]*$/,bP=/^[^a-z]*$/,bQ=/^[0-9a-fA-F]*$/;function bR(a,b){return RegExp(`^[A-Za-z0-9+/]{${a}}${b}$`)}function bS(a){return RegExp(`^[A-Za-z0-9_-]{${a}}$`)}let bT=/^[0-9a-fA-F]{32}$/,bU=bR(22,"=="),bV=bS(22),bW=/^[0-9a-fA-F]{40}$/,bX=bR(27,"="),bY=bS(27),bZ=/^[0-9a-fA-F]{64}$/,b$=bR(43,"="),b_=bS(43),b0=/^[0-9a-fA-F]{96}$/,b1=bR(64,""),b2=bS(64),b3=/^[0-9a-fA-F]{128}$/,b4=bR(86,"=="),b5=bS(86),b6=p("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),b7={number:"number",bigint:"bigint",object:"date"},b8=p("$ZodCheckLessThan",(a,b)=>{b6.init(a,b);let c=b7[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),b9=p("$ZodCheckGreaterThan",(a,b)=>{b6.init(a,b);let c=b7[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:"object"==typeof b.value?b.value.getTime():b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),ca=p("$ZodCheckMultipleOf",(a,b)=>{b6.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===G(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),cb=p("$ZodCheckNumberFormat",(a,b)=>{b6.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=af[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=bJ)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,inclusive:!0,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inclusive:!0,inst:a,continue:!b.abort})}}),cc=p("$ZodCheckBigIntFormat",(a,b)=>{b6.init(a,b);let[c,d]=ag[b.format];a._zod.onattach.push(a=>{let e=a._zod.bag;e.format=b.format,e.minimum=c,e.maximum=d}),a._zod.check=e=>{let f=e.value;f<c&&e.issues.push({origin:"bigint",input:f,code:"too_small",minimum:c,inclusive:!0,inst:a,continue:!b.abort}),f>d&&e.issues.push({origin:"bigint",input:f,code:"too_big",maximum:d,inclusive:!0,inst:a,continue:!b.abort})}}),cd=p("$ZodCheckMaxSize",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;d.size<=b.maximum||c.issues.push({origin:as(d),code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ce=p("$ZodCheckMinSize",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;d.size>=b.minimum||c.issues.push({origin:as(d),code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),cf=p("$ZodCheckSizeEquals",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.size}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.size,c.maximum=b.size,c.size=b.size}),a._zod.check=c=>{let d=c.value,e=d.size;if(e===b.size)return;let f=e>b.size;c.issues.push({origin:as(d),...f?{code:"too_big",maximum:b.size}:{code:"too_small",minimum:b.size},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),cg=p("$ZodCheckMaxLength",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=at(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ch=p("$ZodCheckMinLength",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=at(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ci=p("$ZodCheckLengthEquals",(a,b)=>{var c;b6.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!E(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=at(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),cj=p("$ZodCheckStringFormat",(a,b)=>{var c,d;b6.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),ck=p("$ZodCheckRegex",(a,b)=>{cj.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),cl=p("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=bO),cj.init(a,b)}),cm=p("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=bP),cj.init(a,b)}),cn=p("$ZodCheckIncludes",(a,b)=>{b6.init(a,b);let c=_(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),co=p("$ZodCheckStartsWith",(a,b)=>{b6.init(a,b);let c=RegExp(`^${_(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),cp=p("$ZodCheckEndsWith",(a,b)=>{b6.init(a,b);let c=RegExp(`.*${_(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}});function cq(a,b,c){a.issues.length&&b.issues.push(...ap(c,a.issues))}let cr=p("$ZodCheckProperty",(a,b)=>{b6.init(a,b),a._zod.check=a=>{let c=b.schema._zod.run({value:a.value[b.property],issues:[]},{});if(c instanceof Promise)return c.then(c=>cq(c,a,b.property));cq(c,a,b.property)}}),cs=p("$ZodCheckMimeType",(a,b)=>{b6.init(a,b);let c=new Set(b.mime);a._zod.onattach.push(a=>{a._zod.bag.mime=b.mime}),a._zod.check=d=>{c.has(d.value.type)||d.issues.push({code:"invalid_value",values:b.mime,input:d.value.type,inst:a,continue:!b.abort})}}),ct=p("$ZodCheckOverwrite",(a,b)=>{b6.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class cu{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let cv={major:4,minor:3,patch:6},cw=p("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=cv;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=ao(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new r;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=ao(a,b)))});else{if(a.issues.length===b)continue;e||(e=ao(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(ao(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new r;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new r;return g.then(a=>b(a,d,f))}return b(g,d,f)}}I(a,"~standard",()=>({validate:b=>{try{let c=aR(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return aT(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}))}),cx=p("$ZodString",(a,b)=>{cw.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??bH(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),cy=p("$ZodStringFormat",(a,b)=>{cj.init(a,b),cx.init(a,b)}),cz=p("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=bg),cy.init(a,b)}),cA=p("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=bh(a))}else b.pattern??(b.pattern=bh());cy.init(a,b)}),cB=p("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=bl),cy.init(a,b)}),cC=p("$ZodURL",(a,b)=>{cy.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:b.hostname.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),cD=p("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=br()),cy.init(a,b)}),cE=p("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=bd),cy.init(a,b)}),cF=p("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=a8),cy.init(a,b)}),cG=p("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=a9),cy.init(a,b)}),cH=p("$ZodULID",(a,b)=>{b.pattern??(b.pattern=ba),cy.init(a,b)}),cI=p("$ZodXID",(a,b)=>{b.pattern??(b.pattern=bb),cy.init(a,b)}),cJ=p("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=bc),cy.init(a,b)}),cK=p("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=bG(b)),cy.init(a,b)}),cL=p("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=bD),cy.init(a,b)}),cM=p("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=bF(b)),cy.init(a,b)}),cN=p("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=be),cy.init(a,b)}),cO=p("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=bs),cy.init(a,b),a._zod.bag.format="ipv4"}),cP=p("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=bt),cy.init(a,b),a._zod.bag.format="ipv6",a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),cQ=p("$ZodMAC",(a,b)=>{b.pattern??(b.pattern=bu(b.delimiter)),cy.init(a,b),a._zod.bag.format="mac"}),cR=p("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=bv),cy.init(a,b)}),cS=p("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=bw),cy.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function cT(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let cU=p("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=bx),cy.init(a,b),a._zod.bag.contentEncoding="base64",a._zod.check=c=>{cT(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}});function cV(a){if(!by.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return cT(b.padEnd(4*Math.ceil(b.length/4),"="))}let cW=p("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=by),cy.init(a,b),a._zod.bag.contentEncoding="base64url",a._zod.check=c=>{cV(c.value)||c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),cX=p("$ZodE164",(a,b)=>{b.pattern??(b.pattern=bB),cy.init(a,b)});function cY(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}let cZ=p("$ZodJWT",(a,b)=>{cy.init(a,b),a._zod.check=c=>{cY(c.value,b.alg)||c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),c$=p("$ZodCustomStringFormat",(a,b)=>{cy.init(a,b),a._zod.check=c=>{b.fn(c.value)||c.issues.push({code:"invalid_format",format:b.format,input:c.value,inst:a,continue:!b.abort})}}),c_=p("$ZodNumber",(a,b)=>{cw.init(a,b),a._zod.pattern=a._zod.bag.pattern??bK,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),c0=p("$ZodNumberFormat",(a,b)=>{cb.init(a,b),c_.init(a,b)}),c1=p("$ZodBoolean",(a,b)=>{cw.init(a,b),a._zod.pattern=bL,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),c2=p("$ZodBigInt",(a,b)=>{cw.init(a,b),a._zod.pattern=bI,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}}),c3=p("$ZodBigIntFormat",(a,b)=>{cc.init(a,b),c2.init(a,b)}),c4=p("$ZodSymbol",(a,b)=>{cw.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return"symbol"==typeof d||b.issues.push({expected:"symbol",code:"invalid_type",input:d,inst:a}),b}}),c5=p("$ZodUndefined",(a,b)=>{cw.init(a,b),a._zod.pattern=bN,a._zod.values=new Set([void 0]),a._zod.optin="optional",a._zod.optout="optional",a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"undefined",code:"invalid_type",input:d,inst:a}),b}}),c6=p("$ZodNull",(a,b)=>{cw.init(a,b),a._zod.pattern=bM,a._zod.values=new Set([null]),a._zod.parse=(b,c)=>{let d=b.value;return null===d||b.issues.push({expected:"null",code:"invalid_type",input:d,inst:a}),b}}),c7=p("$ZodAny",(a,b)=>{cw.init(a,b),a._zod.parse=a=>a}),c8=p("$ZodUnknown",(a,b)=>{cw.init(a,b),a._zod.parse=a=>a}),c9=p("$ZodNever",(a,b)=>{cw.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),da=p("$ZodVoid",(a,b)=>{cw.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return void 0===d||b.issues.push({expected:"void",code:"invalid_type",input:d,inst:a}),b}}),db=p("$ZodDate",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function dc(a,b,c){a.issues.length&&b.issues.push(...ap(c,a.issues)),b.value[c]=a.value}let dd=p("$ZodArray",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>dc(b,c,a))):dc(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function de(a,b,c,d,e){if(a.issues.length){if(e&&!(c in d))return;b.issues.push(...ap(c,a.issues))}void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function df(a){let b=Object.keys(a.shape);for(let c of b)if(!a.shape?.[c]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=ae(a.shape);return{...a,keys:b,keySet:new Set(b),numKeys:b.length,optionalKeys:new Set(c)}}function dg(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type,k="optional"===i.optout;for(let e in b){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>de(a,c,e,b,k))):de(f,c,e,b,k)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let dh=p("$ZodObject",(a,b)=>{let c;cw.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=D(()=>df(b));I(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!T(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a],e="optional"===c._zod.optout,f=c._zod.run({value:g[a],issues:[]},d);f instanceof Promise?h.push(f.then(c=>de(c,b,a,g,e))):de(f,b,a,g,e)}return f?dg(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),di=p("$ZodObjectJIT",(a,b)=>{let c,d;dh.init(a,b);let e=a._zod.parse,f=D(()=>df(b)),g=!t.jitless,h=g&&U.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return T(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new cu(["shape","payload","ctx"]),c=f.value,d=a=>{let b=Q(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let f of(b.write("const newResult = {};"),c.keys)){let c=e[f],g=Q(f),h=a[f],i=h?._zod?.optout==="optional";b.write(`const ${c} = ${d(f)};`),i?b.write(`
        if (${c}.issues.length) {
          if (${g} in input) {
            payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${g}, ...iss.path] : [${g}]
            })));
          }
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `):b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${g}, ...iss.path] : [${g}]
          })));
        }
        
        if (${c}.value === undefined) {
          if (${g} in input) {
            newResult[${g}] = undefined;
          }
        } else {
          newResult[${g}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?dg([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function dj(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!ao(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>ar(a,d,u())))}),b)}let dk=p("$ZodUnion",(a,b)=>{cw.init(a,b),I(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),I(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),I(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),I(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>F(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>dj(b,e,a,f)):dj(h,e,a,f)}});function dl(a,b,c,d){let e=a.filter(a=>0===a.issues.length);return 1===e.length?b.value=e[0].value:0===e.length?b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>ar(a,d,u())))}):b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:[],inclusive:!1}),b}let dm=p("$ZodXor",(a,b)=>{dk.init(a,b),b.inclusive=!1;let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);b instanceof Promise?(h.push(b),g=!0):h.push(b)}return g?Promise.all(h).then(b=>dl(b,e,a,f)):dl(h,e,a,f)}}),dn=p("$ZodDiscriminatedUnion",(a,b)=>{b.inclusive=!1,dk.init(a,b);let c=a._zod.parse;I(a._zod,"propValues",()=>{let a={};for(let c of b.options){let d=c._zod.propValues;if(!d||0===Object.keys(d).length)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(c)}"`);for(let[b,c]of Object.entries(d))for(let d of(a[b]||(a[b]=new Set),c))a[b].add(d)}return a});let d=D(()=>{let a=b.options,c=new Map;for(let d of a){let a=d._zod.propValues?.[b.discriminator];if(!a||0===a.size)throw Error(`Invalid discriminated union option at index "${b.options.indexOf(d)}"`);for(let b of a){if(c.has(b))throw Error(`Duplicate discriminator value "${String(b)}"`);c.set(b,d)}}return c});a._zod.parse=(e,f)=>{let g=e.value;if(!T(g))return e.issues.push({code:"invalid_type",expected:"object",input:g,inst:a}),e;let h=d.value.get(g?.[b.discriminator]);return h?h._zod.run(e,f):b.unionFallback?c(e,f):(e.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:b.discriminator,input:g,path:[b.discriminator],inst:a}),e)}}),dp=p("$ZodIntersection",(a,b)=>{cw.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>dq(a,b,c)):dq(a,e,f)}});function dq(a,b,c){let d,e=new Map;for(let c of b.issues)if("unrecognized_keys"===c.code)for(let a of(d??(d=c),c.keys))e.has(a)||e.set(a,{}),e.get(a).l=!0;else a.issues.push(c);for(let b of c.issues)if("unrecognized_keys"===b.code)for(let a of b.keys)e.has(a)||e.set(a,{}),e.get(a).r=!0;else a.issues.push(b);let f=[...e].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(f.length&&d&&a.issues.push({...d,keys:f}),ao(a))return a;let g=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(V(b)&&V(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!g.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(g.mergeErrorPath)}`);return a.value=g.data,a}let dr=p("$ZodTuple",(a,b)=>{cw.init(a,b);let c=b.items;a._zod.parse=(d,e)=>{let f=d.value;if(!Array.isArray(f))return d.issues.push({input:f,inst:a,expected:"tuple",code:"invalid_type"}),d;d.value=[];let g=[],h=[...c].reverse().findIndex(a=>"optional"!==a._zod.optin),i=-1===h?0:c.length-h;if(!b.rest){let b=f.length>c.length,e=f.length<i-1;if(b||e)return d.issues.push({...b?{code:"too_big",maximum:c.length,inclusive:!0}:{code:"too_small",minimum:c.length},input:f,inst:a,origin:"array"}),d}let j=-1;for(let a of c){if(++j>=f.length&&j>=i)continue;let b=a._zod.run({value:f[j],issues:[]},e);b instanceof Promise?g.push(b.then(a=>ds(a,d,j))):ds(b,d,j)}if(b.rest)for(let a of f.slice(c.length)){j++;let c=b.rest._zod.run({value:a,issues:[]},e);c instanceof Promise?g.push(c.then(a=>ds(a,d,j))):ds(c,d,j)}return g.length?Promise.all(g).then(()=>d):d}});function ds(a,b,c){a.issues.length&&b.issues.push(...ap(c,a.issues)),b.value[c]=a.value}let dt=p("$ZodRecord",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!V(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[],g=b.keyType._zod.values;if(g){let h;c.value={};let i=new Set;for(let a of g)if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){i.add("number"==typeof a?a.toString():a);let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...ap(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...ap(a,g.issues)),c.value[a]=g.value)}for(let a in e)i.has(a)||(h=h??[]).push(a);h&&h.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:h})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if("string"==typeof g&&bK.test(g)&&h.issues.length){let a=b.keyType._zod.run({value:Number(g),issues:[]},d);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");0===a.issues.length&&(h=a)}if(h.issues.length){"loose"===b.mode?c.value[g]=e[g]:c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>ar(a,d,u())),input:g,path:[g],inst:a});continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...ap(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...ap(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),du=p("$ZodMap",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Map))return c.issues.push({expected:"map",code:"invalid_type",input:e,inst:a}),c;let f=[];for(let[g,h]of(c.value=new Map,e)){let i=b.keyType._zod.run({value:g,issues:[]},d),j=b.valueType._zod.run({value:h,issues:[]},d);i instanceof Promise||j instanceof Promise?f.push(Promise.all([i,j]).then(([b,f])=>{dv(b,f,c,g,e,a,d)})):dv(i,j,c,g,e,a,d)}return f.length?Promise.all(f).then(()=>c):c}});function dv(a,b,c,d,e,f,g){a.issues.length&&(Z.has(typeof d)?c.issues.push(...ap(d,a.issues)):c.issues.push({code:"invalid_key",origin:"map",input:e,inst:f,issues:a.issues.map(a=>ar(a,g,u()))})),b.issues.length&&(Z.has(typeof d)?c.issues.push(...ap(d,b.issues)):c.issues.push({origin:"map",code:"invalid_element",input:e,inst:f,key:d,issues:b.issues.map(a=>ar(a,g,u()))})),c.value.set(a.value,b.value)}let dw=p("$ZodSet",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!(e instanceof Set))return c.issues.push({input:e,inst:a,expected:"set",code:"invalid_type"}),c;let f=[];for(let a of(c.value=new Set,e)){let e=b.valueType._zod.run({value:a,issues:[]},d);e instanceof Promise?f.push(e.then(a=>dx(a,c))):dx(e,c)}return f.length?Promise.all(f).then(()=>c):c}});function dx(a,b){a.issues.length&&b.issues.push(...a.issues),b.value.add(a.value)}let dy=p("$ZodEnum",(a,b)=>{cw.init(a,b);let c=A(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>Z.has(typeof a)).map(a=>"string"==typeof a?_(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),dz=p("$ZodLiteral",(a,b)=>{if(cw.init(a,b),0===b.values.length)throw Error("Cannot create literal schema with no valid values");let c=new Set(b.values);a._zod.values=c,a._zod.pattern=RegExp(`^(${b.values.map(a=>"string"==typeof a?_(a):a?_(a.toString()):String(a)).join("|")})$`),a._zod.parse=(d,e)=>{let f=d.value;return c.has(f)||d.issues.push({code:"invalid_value",values:b.values,input:f,inst:a}),d}}),dA=p("$ZodFile",(a,b)=>{cw.init(a,b),a._zod.parse=(b,c)=>{let d=b.value;return d instanceof File||b.issues.push({expected:"file",code:"invalid_type",input:d,inst:a}),b}}),dB=p("$ZodTransform",(a,b)=>{cw.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new s(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new r;return c.value=e,c}});function dC(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let dD=p("$ZodOptional",(a,b)=>{cw.init(a,b),a._zod.optin="optional",a._zod.optout="optional",I(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),I(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${F(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>dC(b,a.value)):dC(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),dE=p("$ZodExactOptional",(a,b)=>{dD.init(a,b),I(a._zod,"values",()=>b.innerType._zod.values),I(a._zod,"pattern",()=>b.innerType._zod.pattern),a._zod.parse=(a,c)=>b.innerType._zod.run(a,c)}),dF=p("$ZodNullable",(a,b)=>{cw.init(a,b),I(a._zod,"optin",()=>b.innerType._zod.optin),I(a._zod,"optout",()=>b.innerType._zod.optout),I(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${F(a.source)}|null)$`):void 0}),I(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),dG=p("$ZodDefault",(a,b)=>{cw.init(a,b),a._zod.optin="optional",I(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>dH(a,b)):dH(d,b)}});function dH(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let dI=p("$ZodPrefault",(a,b)=>{cw.init(a,b),a._zod.optin="optional",I(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),dJ=p("$ZodNonOptional",(a,b)=>{cw.init(a,b),I(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>dK(b,a)):dK(e,a)}});function dK(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let dL=p("$ZodSuccess",(a,b)=>{cw.init(a,b),a._zod.parse=(a,c)=>{if("backward"===c.direction)throw new s("ZodSuccess");let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>(a.value=0===b.issues.length,a)):(a.value=0===d.issues.length,a)}}),dM=p("$ZodCatch",(a,b)=>{cw.init(a,b),I(a._zod,"optin",()=>b.innerType._zod.optin),I(a._zod,"optout",()=>b.innerType._zod.optout),I(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ar(a,c,u()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>ar(a,c,u()))},input:a.value}),a.issues=[]),a)}}),dN=p("$ZodNaN",(a,b)=>{cw.init(a,b),a._zod.parse=(b,c)=>("number"==typeof b.value&&Number.isNaN(b.value)||b.issues.push({input:b.value,inst:a,expected:"nan",code:"invalid_type"}),b)}),dO=p("$ZodPipe",(a,b)=>{cw.init(a,b),I(a._zod,"values",()=>b.in._zod.values),I(a._zod,"optin",()=>b.in._zod.optin),I(a._zod,"optout",()=>b.out._zod.optout),I(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>dP(a,b.in,c)):dP(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>dP(a,b.out,c)):dP(d,b.out,c)}});function dP(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let dQ=p("$ZodCodec",(a,b)=>{cw.init(a,b),I(a._zod,"values",()=>b.in._zod.values),I(a._zod,"optin",()=>b.in._zod.optin),I(a._zod,"optout",()=>b.out._zod.optout),I(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("forward"===(c.direction||"forward")){let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>dR(a,b,c)):dR(d,b,c)}{let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>dR(a,b,c)):dR(d,b,c)}}});function dR(a,b,c){if(a.issues.length)return a.aborted=!0,a;if("forward"===(c.direction||"forward")){let d=b.transform(a.value,a);return d instanceof Promise?d.then(d=>dS(a,d,b.out,c)):dS(a,d,b.out,c)}{let d=b.reverseTransform(a.value,a);return d instanceof Promise?d.then(d=>dS(a,d,b.in,c)):dS(a,d,b.in,c)}}function dS(a,b,c,d){return a.issues.length?(a.aborted=!0,a):c._zod.run({value:b,issues:a.issues},d)}let dT=p("$ZodReadonly",(a,b)=>{cw.init(a,b),I(a._zod,"propValues",()=>b.innerType._zod.propValues),I(a._zod,"values",()=>b.innerType._zod.values),I(a._zod,"optin",()=>b.innerType?._zod?.optin),I(a._zod,"optout",()=>b.innerType?._zod?.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(dU):dU(d)}});function dU(a){return a.value=Object.freeze(a.value),a}let dV=p("$ZodTemplateLiteral",(a,b)=>{cw.init(a,b);let c=[];for(let a of b.parts)if("object"==typeof a&&null!==a){if(!a._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...a._zod.traits].shift()}`);let b=a._zod.pattern instanceof RegExp?a._zod.pattern.source:a._zod.pattern;if(!b)throw Error(`Invalid template literal part: ${a._zod.traits}`);let d=+!!b.startsWith("^"),e=b.endsWith("$")?b.length-1:b.length;c.push(b.slice(d,e))}else if(null===a||$.has(typeof a))c.push(_(`${a}`));else throw Error(`Invalid template literal part: ${a}`);a._zod.pattern=RegExp(`^${c.join("")}$`),a._zod.parse=(c,d)=>("string"!=typeof c.value?c.issues.push({input:c.value,inst:a,expected:"string",code:"invalid_type"}):(a._zod.pattern.lastIndex=0,a._zod.pattern.test(c.value)||c.issues.push({input:c.value,inst:a,code:"invalid_format",format:b.format??"template_literal",pattern:a._zod.pattern.source})),c)}),dW=p("$ZodFunction",(a,b)=>(cw.init(a,b),a._def=b,a._zod.def=b,a.implement=b=>{if("function"!=typeof b)throw Error("implement() must be called with a function");return function(...c){let d=Reflect.apply(b,this,a._def.input?aN(a._def.input,c):c);return a._def.output?aN(a._def.output,d):d}},a.implementAsync=b=>{if("function"!=typeof b)throw Error("implementAsync() must be called with a function");return async function(...c){let d=a._def.input?await aP(a._def.input,c):c,e=await Reflect.apply(b,this,d);return a._def.output?await aP(a._def.output,e):e}},a._zod.parse=(b,c)=>("function"!=typeof b.value?b.issues.push({code:"invalid_type",expected:"function",input:b.value,inst:a}):a._def.output&&"promise"===a._def.output._zod.def.type?b.value=a.implementAsync(b.value):b.value=a.implement(b.value),b),a.input=(...b)=>{let c=a.constructor;return new c(Array.isArray(b[0])?{type:"function",input:new dr({type:"tuple",items:b[0],rest:b[1]}),output:a._def.output}:{type:"function",input:b[0],output:a._def.output})},a.output=b=>new a.constructor({type:"function",input:a._def.input,output:b}),a)),dX=p("$ZodPromise",(a,b)=>{cw.init(a,b),a._zod.parse=(a,c)=>Promise.resolve(a.value).then(a=>b.innerType._zod.run({value:a,issues:[]},c))}),dY=p("$ZodLazy",(a,b)=>{cw.init(a,b),I(a._zod,"innerType",()=>b.getter()),I(a._zod,"pattern",()=>a._zod.innerType?._zod?.pattern),I(a._zod,"propValues",()=>a._zod.innerType?._zod?.propValues),I(a._zod,"optin",()=>a._zod.innerType?._zod?.optin??void 0),I(a._zod,"optout",()=>a._zod.innerType?._zod?.optout??void 0),a._zod.parse=(b,c)=>a._zod.innerType._zod.run(b,c)}),dZ=p("$ZodCustom",(a,b)=>{b6.init(a,b),cw.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>d$(b,c,d,a));d$(e,c,d,a)}});function d$(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(av(a))}}function d_(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  :   instanceof ${d.expected}    ${e}`;return`  :   ${a}    ${e}`}case"invalid_value":if(1===d.values.length)return`  :   ${ad(d.values[0])}`;return`  :     : ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`   :    ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`  :    ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`  :   ${d.origin}   ${b} ${d.minimum.toString()} ${c.unit}`;return`  :   ${d.origin}   ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`  :     "${d.prefix}"`;if("ends_with"===d.format)return`  :     "${d.suffix}"`;if("includes"===d.format)return`  :    "${d.includes}"`;if("regex"===d.format)return`  :     ${d.pattern}`;return`${b[d.format]??d.format}  `;case"not_multiple_of":return`  :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${B(d.keys," ")}`;case"invalid_key":return`    ${d.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${d.origin}`}}})()}}function d0(){return{localeError:(()=>{let a={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Yanl dyr: g\xf6zlniln instanceof ${d.expected}, daxil olan ${e}`;return`Yanl dyr: g\xf6zlniln ${a}, daxil olan ${e}`}case"invalid_value":if(1===d.values.length)return`Yanl dyr: g\xf6zlniln ${ad(d.values[0])}`;return`Yanl se\xe7im: aadaklardan biri olmaldr: ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${d.origin??"dyr"} ${b}${d.maximum.toString()} ${c.unit??"element"}`;return`\xc7ox b\xf6y\xfck: g\xf6zlniln ${d.origin??"dyr"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`\xc7ox ki\xe7ik: g\xf6zlniln ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return`\xc7ox ki\xe7ik: g\xf6zlniln ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Yanl mtn: "${d.prefix}" il balamaldr`;if("ends_with"===d.format)return`Yanl mtn: "${d.suffix}" il bitmlidir`;if("includes"===d.format)return`Yanl mtn: "${d.includes}" daxil olmaldr`;if("regex"===d.format)return`Yanl mtn: ${d.pattern} ablonuna uyun olmaldr`;return`Yanl ${b[d.format]??d.format}`;case"not_multiple_of":return`Yanl dd: ${d.divisor} il b\xf6l\xfcn biln olmaldr`;case"unrecognized_keys":return`Tannmayan a\xe7ar${d.keys.length>1?"lar":""}: ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin} daxilind yanl a\xe7ar`;case"invalid_union":return"Yanl dyr";case"invalid_element":return`${d.origin} daxilind yanl dyr`;default:return`Yanl dyr`}}})()}}function d1(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function d2(){return{localeError:(()=>{let a={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}},b={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}`;return` :    ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=d1(Number(d.maximum),c.unit.one,c.unit.few,c.unit.many);return` : ,  ${d.origin??""}  ${c.verb} ${b}${d.maximum.toString()} ${a}`}return` : ,  ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=d1(Number(d.minimum),c.unit.one,c.unit.few,c.unit.many);return` : ,  ${d.origin}  ${c.verb} ${b}${d.minimum.toString()} ${a}`}return` : ,  ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}}})()}}function d3(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}`;return` :    ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :   ${d.origin??""}   ${b}${d.maximum.toString()} ${c.unit??""}`;return` :   ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :   ${d.origin}   ${b}${d.minimum.toString()} ${c.unit}`;return` :   ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":{if("starts_with"===d.format)return` :     "${d.prefix}"`;if("ends_with"===d.format)return` :     "${d.suffix}"`;if("includes"===d.format)return` :    "${d.includes}"`;if("regex"===d.format)return` :     ${d.pattern}`;let a="";return"emoji"===d.format&&(a=""),"datetime"===d.format&&(a=""),"date"===d.format&&(a=""),"time"===d.format&&(a=""),"duration"===d.format&&(a=""),`${a} ${b[d.format]??d.format}`}case"not_multiple_of":return` :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}}})()}}function d4(){return{localeError:(()=>{let a={string:{unit:"car\xe0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}},b={regex:"entrada",email:"adre\xe7a electr\xf2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xe7a IPv4",ipv6:"adre\xe7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Tipus inv\xe0lid: s'esperava instanceof ${d.expected}, s'ha rebut ${e}`;return`Tipus inv\xe0lid: s'esperava ${a}, s'ha rebut ${e}`}case"invalid_value":if(1===d.values.length)return`Valor inv\xe0lid: s'esperava ${ad(d.values[0])}`;return`Opci\xf3 inv\xe0lida: s'esperava una de ${B(d.values," o ")}`;case"too_big":{let b=d.inclusive?"com a m\xe0xim":"menys de",c=a[d.origin]??null;if(c)return`Massa gran: s'esperava que ${d.origin??"el valor"} contingu\xe9s ${b} ${d.maximum.toString()} ${c.unit??"elements"}`;return`Massa gran: s'esperava que ${d.origin??"el valor"} fos ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"com a m\xednim":"m\xe9s de",c=a[d.origin]??null;if(c)return`Massa petit: s'esperava que ${d.origin} contingu\xe9s ${b} ${d.minimum.toString()} ${c.unit}`;return`Massa petit: s'esperava que ${d.origin} fos ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Format inv\xe0lid: ha de comen\xe7ar amb "${d.prefix}"`;if("ends_with"===d.format)return`Format inv\xe0lid: ha d'acabar amb "${d.suffix}"`;if("includes"===d.format)return`Format inv\xe0lid: ha d'incloure "${d.includes}"`;if("regex"===d.format)return`Format inv\xe0lid: ha de coincidir amb el patr\xf3 ${d.pattern}`;return`Format inv\xe0lid per a ${b[d.format]??d.format}`;case"not_multiple_of":return`N\xfamero inv\xe0lid: ha de ser m\xfaltiple de ${d.divisor}`;case"unrecognized_keys":return`Clau${d.keys.length>1?"s":""} no reconeguda${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Clau inv\xe0lida a ${d.origin}`;case"invalid_union":return"Entrada inv\xe0lida";case"invalid_element":return`Element inv\xe0lid a ${d.origin}`;default:return`Entrada inv\xe0lida`}}})()}}function d5(){return{localeError:(()=>{let a={string:{unit:"znak",verb:"m\xedt"},file:{unit:"bajt",verb:"m\xedt"},array:{unit:"prvk",verb:"m\xedt"},set:{unit:"prvk",verb:"m\xedt"}},b={regex:"regul\xe1rn\xed v\xfdraz",email:"e-mailov\xe1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve form\xe1tu ISO",date:"datum ve form\xe1tu ISO",time:"as ve form\xe1tu ISO",duration:"doba trv\xe1n\xed ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zak\xf3dovan\xfd ve form\xe1tu base64",base64url:"etzec zak\xf3dovan\xfd ve form\xe1tu base64url",json_string:"etzec ve form\xe1tu JSON",e164:"\xedslo E.164",jwt:"JWT",template_literal:"vstup"},c={nan:"NaN",number:"\xedslo",string:"etzec",function:"funkce",array:"pole"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Neplatn\xfd vstup: oek\xe1v\xe1no instanceof ${d.expected}, obdreno ${e}`;return`Neplatn\xfd vstup: oek\xe1v\xe1no ${a}, obdreno ${e}`}case"invalid_value":if(1===d.values.length)return`Neplatn\xfd vstup: oek\xe1v\xe1no ${ad(d.values[0])}`;return`Neplatn\xe1 monost: oek\xe1v\xe1na jedna z hodnot ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Hodnota je p\xedli velk\xe1: ${d.origin??"hodnota"} mus\xed m\xedt ${b}${d.maximum.toString()} ${c.unit??"prvk"}`;return`Hodnota je p\xedli velk\xe1: ${d.origin??"hodnota"} mus\xed b\xfdt ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Hodnota je p\xedli mal\xe1: ${d.origin??"hodnota"} mus\xed m\xedt ${b}${d.minimum.toString()} ${c.unit??"prvk"}`;return`Hodnota je p\xedli mal\xe1: ${d.origin??"hodnota"} mus\xed b\xfdt ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Neplatn\xfd etzec: mus\xed za\xednat na "${d.prefix}"`;if("ends_with"===d.format)return`Neplatn\xfd etzec: mus\xed konit na "${d.suffix}"`;if("includes"===d.format)return`Neplatn\xfd etzec: mus\xed obsahovat "${d.includes}"`;if("regex"===d.format)return`Neplatn\xfd etzec: mus\xed odpov\xeddat vzoru ${d.pattern}`;return`Neplatn\xfd form\xe1t ${b[d.format]??d.format}`;case"not_multiple_of":return`Neplatn\xe9 \xedslo: mus\xed b\xfdt n\xe1sobkem ${d.divisor}`;case"unrecognized_keys":return`Nezn\xe1m\xe9 kl\xede: ${B(d.keys,", ")}`;case"invalid_key":return`Neplatn\xfd kl\xed v ${d.origin}`;case"invalid_union":return"Neplatn\xfd vstup";case"invalid_element":return`Neplatn\xe1 hodnota v ${d.origin}`;default:return`Neplatn\xfd vstup`}}})()}}function d6(){return{localeError:(()=>{let a={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},b={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xe6t",date:"ISO-dato",time:"ISO-klokkesl\xe6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xe5de",ipv6:"IPv6-omr\xe5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},c={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xe6t",file:"fil"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ugyldigt input: forventede instanceof ${d.expected}, fik ${e}`;return`Ugyldigt input: forventede ${a}, fik ${e}`}case"invalid_value":if(1===d.values.length)return`Ugyldig v\xe6rdi: forventede ${ad(d.values[0])}`;return`Ugyldigt valg: forventede en af f\xf8lgende ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`For stor: forventede ${f??"value"} ${e.verb} ${b} ${d.maximum.toString()} ${e.unit??"elementer"}`;return`For stor: forventede ${f??"value"} havde ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`For lille: forventede ${f} ${e.verb} ${b} ${d.minimum.toString()} ${e.unit}`;return`For lille: forventede ${f} havde ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ugyldig streng: skal starte med "${d.prefix}"`;if("ends_with"===d.format)return`Ugyldig streng: skal ende med "${d.suffix}"`;if("includes"===d.format)return`Ugyldig streng: skal indeholde "${d.includes}"`;if("regex"===d.format)return`Ugyldig streng: skal matche m\xf8nsteret ${d.pattern}`;return`Ugyldig ${b[d.format]??d.format}`;case"not_multiple_of":return`Ugyldigt tal: skal v\xe6re deleligt med ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ukendte n\xf8gler":"Ukendt n\xf8gle"}: ${B(d.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8gle i ${d.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xe6rdi i ${d.origin}`;default:return"Ugyldigt input"}}})()}}function d7(){return{localeError:(()=>{let a={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}},b={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},c={nan:"NaN",number:"Zahl",array:"Array"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ung\xfcltige Eingabe: erwartet instanceof ${d.expected}, erhalten ${e}`;return`Ung\xfcltige Eingabe: erwartet ${a}, erhalten ${e}`}case"invalid_value":if(1===d.values.length)return`Ung\xfcltige Eingabe: erwartet ${ad(d.values[0])}`;return`Ung\xfcltige Option: erwartet eine von ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Zu gro\xdf: erwartet, dass ${d.origin??"Wert"} ${b}${d.maximum.toString()} ${c.unit??"Elemente"} hat`;return`Zu gro\xdf: erwartet, dass ${d.origin??"Wert"} ${b}${d.maximum.toString()} ist`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Zu klein: erwartet, dass ${d.origin} ${b}${d.minimum.toString()} ${c.unit} hat`;return`Zu klein: erwartet, dass ${d.origin} ${b}${d.minimum.toString()} ist`}case"invalid_format":if("starts_with"===d.format)return`Ung\xfcltiger String: muss mit "${d.prefix}" beginnen`;if("ends_with"===d.format)return`Ung\xfcltiger String: muss mit "${d.suffix}" enden`;if("includes"===d.format)return`Ung\xfcltiger String: muss "${d.includes}" enthalten`;if("regex"===d.format)return`Ung\xfcltiger String: muss dem Muster ${d.pattern} entsprechen`;return`Ung\xfcltig: ${b[d.format]??d.format}`;case"not_multiple_of":return`Ung\xfcltige Zahl: muss ein Vielfaches von ${d.divisor} sein`;case"unrecognized_keys":return`${d.keys.length>1?"Unbekannte Schl\xfcssel":"Unbekannter Schl\xfcssel"}: ${B(d.keys,", ")}`;case"invalid_key":return`Ung\xfcltiger Schl\xfcssel in ${d.origin}`;case"invalid_union":return"Ung\xfcltige Eingabe";case"invalid_element":return`Ung\xfcltiger Wert in ${d.origin}`;default:return`Ung\xfcltige Eingabe`}}})()}}function d8(){return{localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;return`Invalid input: expected ${a}, received ${e}`}case"invalid_value":if(1===d.values.length)return`Invalid input: expected ${ad(d.values[0])}`;return`Invalid option: expected one of ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Too big: expected ${d.origin??"value"} to have ${b}${d.maximum.toString()} ${c.unit??"elements"}`;return`Too big: expected ${d.origin??"value"} to be ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Too small: expected ${d.origin} to have ${b}${d.minimum.toString()} ${c.unit}`;return`Too small: expected ${d.origin} to be ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Invalid string: must start with "${d.prefix}"`;if("ends_with"===d.format)return`Invalid string: must end with "${d.suffix}"`;if("includes"===d.format)return`Invalid string: must include "${d.includes}"`;if("regex"===d.format)return`Invalid string: must match pattern ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${d.divisor}`;case"unrecognized_keys":return`Unrecognized key${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Invalid key in ${d.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${d.origin}`}}})()}}function d9(){return{localeError:(()=>{let a={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}},b={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},c={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Nevalida enigo: atendiis instanceof ${d.expected}, riceviis ${e}`;return`Nevalida enigo: atendiis ${a}, riceviis ${e}`}case"invalid_value":if(1===d.values.length)return`Nevalida enigo: atendiis ${ad(d.values[0])}`;return`Nevalida opcio: atendiis unu el ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Tro granda: atendiis ke ${d.origin??"valoro"} havu ${b}${d.maximum.toString()} ${c.unit??"elementojn"}`;return`Tro granda: atendiis ke ${d.origin??"valoro"} havu ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Tro malgranda: atendiis ke ${d.origin} havu ${b}${d.minimum.toString()} ${c.unit}`;return`Tro malgranda: atendiis ke ${d.origin} estu ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Nevalida karaktraro: devas komencii per "${d.prefix}"`;if("ends_with"===d.format)return`Nevalida karaktraro: devas finii per "${d.suffix}"`;if("includes"===d.format)return`Nevalida karaktraro: devas inkluzivi "${d.includes}"`;if("regex"===d.format)return`Nevalida karaktraro: devas kongrui kun la modelo ${d.pattern}`;return`Nevalida ${b[d.format]??d.format}`;case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${d.divisor}`;case"unrecognized_keys":return`Nekonata${d.keys.length>1?"j":""} losilo${d.keys.length>1?"j":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${d.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${d.origin}`}}})()}}function ea(){return{localeError:(()=>{let a={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},b={regex:"entrada",email:"direcci\xf3n de correo electr\xf3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xf3n ISO",ipv4:"direcci\xf3n IPv4",ipv6:"direcci\xf3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN",string:"texto",number:"n\xfamero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xfamero grande",symbol:"s\xedmbolo",undefined:"indefinido",null:"nulo",function:"funci\xf3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xf3n",union:"uni\xf3n",literal:"literal",promise:"promesa",void:"vac\xedo",never:"nunca",unknown:"desconocido",any:"cualquiera"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entrada inv\xe1lida: se esperaba instanceof ${d.expected}, recibido ${e}`;return`Entrada inv\xe1lida: se esperaba ${a}, recibido ${e}`}case"invalid_value":if(1===d.values.length)return`Entrada inv\xe1lida: se esperaba ${ad(d.values[0])}`;return`Opci\xf3n inv\xe1lida: se esperaba una de ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`Demasiado grande: se esperaba que ${f??"valor"} tuviera ${b}${d.maximum.toString()} ${e.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${f??"valor"} fuera ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",e=a[d.origin]??null,f=c[d.origin]??d.origin;if(e)return`Demasiado peque\xf1o: se esperaba que ${f} tuviera ${b}${d.minimum.toString()} ${e.unit}`;return`Demasiado peque\xf1o: se esperaba que ${f} fuera ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cadena inv\xe1lida: debe comenzar con "${d.prefix}"`;if("ends_with"===d.format)return`Cadena inv\xe1lida: debe terminar en "${d.suffix}"`;if("includes"===d.format)return`Cadena inv\xe1lida: debe incluir "${d.includes}"`;if("regex"===d.format)return`Cadena inv\xe1lida: debe coincidir con el patr\xf3n ${d.pattern}`;return`Inv\xe1lido ${b[d.format]??d.format}`;case"not_multiple_of":return`N\xfamero inv\xe1lido: debe ser m\xfaltiplo de ${d.divisor}`;case"unrecognized_keys":return`Llave${d.keys.length>1?"s":""} desconocida${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Llave inv\xe1lida en ${c[d.origin]??d.origin}`;case"invalid_union":return"Entrada inv\xe1lida";case"invalid_element":return`Valor inv\xe1lido en ${c[d.origin]??d.origin}`;default:return`Entrada inv\xe1lida`}}})()}}function eb(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected}  ${e}  `;return` :  ${a}  ${e}  `}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])} `;return` :    ${B(d.values,"|")} `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""} `;return` : ${d.origin??""}  ${b}${d.maximum.toString()} `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit} `;return` : ${d.origin}  ${b}${d.minimum.toString()} `}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"  `;if("ends_with"===d.format)return` :   "${d.suffix}"  `;if("includes"===d.format)return` :   "${d.includes}" `;if("regex"===d.format)return` :    ${d.pattern}   `;return`${b[d.format]??d.format} `;case"not_multiple_of":return` :   ${d.divisor} `;case"unrecognized_keys":return`${d.keys.length>1?"":""} : ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":default:return` `;case"invalid_element":return`   ${d.origin}`}}})()}}function ec(){return{localeError:(()=>{let a={string:{unit:"merkki\xe4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xe4iv\xe4m\xe4\xe4r\xe4n"}},b={regex:"s\xe4\xe4nn\xf6llinen lauseke",email:"s\xe4hk\xf6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xe4iv\xe4m\xe4\xe4r\xe4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Virheellinen tyyppi: odotettiin instanceof ${d.expected}, oli ${e}`;return`Virheellinen tyyppi: odotettiin ${a}, oli ${e}`}case"invalid_value":if(1===d.values.length)return`Virheellinen sy\xf6te: t\xe4ytyy olla ${ad(d.values[0])}`;return`Virheellinen valinta: t\xe4ytyy olla yksi seuraavista: ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Liian suuri: ${c.subject} t\xe4ytyy olla ${b}${d.maximum.toString()} ${c.unit}`.trim();return`Liian suuri: arvon t\xe4ytyy olla ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Liian pieni: ${c.subject} t\xe4ytyy olla ${b}${d.minimum.toString()} ${c.unit}`.trim();return`Liian pieni: arvon t\xe4ytyy olla ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy alkaa "${d.prefix}"`;if("ends_with"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy loppua "${d.suffix}"`;if("includes"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy sis\xe4lt\xe4\xe4 "${d.includes}"`;if("regex"===d.format)return`Virheellinen sy\xf6te: t\xe4ytyy vastata s\xe4\xe4nn\xf6llist\xe4 lauseketta ${d.pattern}`;return`Virheellinen ${b[d.format]??d.format}`;case"not_multiple_of":return`Virheellinen luku: t\xe4ytyy olla luvun ${d.divisor} monikerta`;case"unrecognized_keys":return`${d.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${B(d.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return`Virheellinen sy\xf6te`}}})()}}function ed(){return{localeError:(()=>{let a={string:{unit:"caract\xe8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xe9l\xe9ments",verb:"avoir"},set:{unit:"\xe9l\xe9ments",verb:"avoir"}},b={regex:"entr\xe9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xe9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xeene encod\xe9e en base64",base64url:"cha\xeene encod\xe9e en base64url",json_string:"cha\xeene JSON",e164:"num\xe9ro E.164",jwt:"JWT",template_literal:"entr\xe9e"},c={nan:"NaN",number:"nombre",array:"tableau"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entr\xe9e invalide : instanceof ${d.expected} attendu, ${e} re\xe7u`;return`Entr\xe9e invalide : ${a} attendu, ${e} re\xe7u`}case"invalid_value":if(1===d.values.length)return`Entr\xe9e invalide : ${ad(d.values[0])} attendu`;return`Option invalide : une valeur parmi ${B(d.values,"|")} attendue`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Trop grand : ${d.origin??"valeur"} doit ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"\xe9l\xe9ment(s)"}`;return`Trop grand : ${d.origin??"valeur"} doit \xeatre ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Trop petit : ${d.origin} doit ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Trop petit : ${d.origin} doit \xeatre ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cha\xeene invalide : doit commencer par "${d.prefix}"`;if("ends_with"===d.format)return`Cha\xeene invalide : doit se terminer par "${d.suffix}"`;if("includes"===d.format)return`Cha\xeene invalide : doit inclure "${d.includes}"`;if("regex"===d.format)return`Cha\xeene invalide : doit correspondre au mod\xe8le ${d.pattern}`;return`${b[d.format]??d.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${d.divisor}`;case"unrecognized_keys":return`Cl\xe9${d.keys.length>1?"s":""} non reconnue${d.keys.length>1?"s":""} : ${B(d.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${d.origin}`;case"invalid_union":return"Entr\xe9e invalide";case"invalid_element":return`Valeur invalide dans ${d.origin}`;default:return`Entr\xe9e invalide`}}})()}}function ee(){return{localeError:(()=>{let a={string:{unit:"caract\xe8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xe9l\xe9ments",verb:"avoir"},set:{unit:"\xe9l\xe9ments",verb:"avoir"}},b={regex:"entr\xe9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xe9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xeene encod\xe9e en base64",base64url:"cha\xeene encod\xe9e en base64url",json_string:"cha\xeene JSON",e164:"num\xe9ro E.164",jwt:"JWT",template_literal:"entr\xe9e"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Entr\xe9e invalide : attendu instanceof ${d.expected}, re\xe7u ${e}`;return`Entr\xe9e invalide : attendu ${a}, re\xe7u ${e}`}case"invalid_value":if(1===d.values.length)return`Entr\xe9e invalide : attendu ${ad(d.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"":"<",c=a[d.origin]??null;if(c)return`Trop grand : attendu que ${d.origin??"la valeur"} ait ${b}${d.maximum.toString()} ${c.unit}`;return`Trop grand : attendu que ${d.origin??"la valeur"} soit ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"":">",c=a[d.origin]??null;if(c)return`Trop petit : attendu que ${d.origin} ait ${b}${d.minimum.toString()} ${c.unit}`;return`Trop petit : attendu que ${d.origin} soit ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Cha\xeene invalide : doit commencer par "${d.prefix}"`;if("ends_with"===d.format)return`Cha\xeene invalide : doit se terminer par "${d.suffix}"`;if("includes"===d.format)return`Cha\xeene invalide : doit inclure "${d.includes}"`;if("regex"===d.format)return`Cha\xeene invalide : doit correspondre au motif ${d.pattern}`;return`${b[d.format]??d.format} invalide`;case"not_multiple_of":return`Nombre invalide : doit \xeatre un multiple de ${d.divisor}`;case"unrecognized_keys":return`Cl\xe9${d.keys.length>1?"s":""} non reconnue${d.keys.length>1?"s":""} : ${B(d.keys,", ")}`;case"invalid_key":return`Cl\xe9 invalide dans ${d.origin}`;case"invalid_union":return"Entr\xe9e invalide";case"invalid_element":return`Valeur invalide dans ${d.origin}`;default:return`Entr\xe9e invalide`}}})()}}function ef(){return{localeError:(()=>{let a={string:{label:"",gender:"f"},number:{label:"",gender:"m"},boolean:{label:" ",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"",gender:"m"},array:{label:"",gender:"m"},object:{label:"",gender:"m"},null:{label:"  (null)",gender:"m"},undefined:{label:"   (undefined)",gender:"m"},symbol:{label:" (Symbol)",gender:"m"},function:{label:"",gender:"f"},map:{label:" (Map)",gender:"f"},set:{label:" (Set)",gender:"f"},file:{label:"",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"  ",gender:"m"},value:{label:"",gender:"m"}},b={string:{unit:"",shortLabel:"",longLabel:""},file:{unit:"",shortLabel:"",longLabel:""},array:{unit:"",shortLabel:"",longLabel:""},set:{unit:"",shortLabel:"",longLabel:""},number:{unit:"",shortLabel:"",longLabel:""}},c=b=>b?a[b]:void 0,d=b=>{let d=c(b);return d?d.label:b??a.unknown.label},e=a=>`${d(a)}`,f=a=>{let b=c(a);return"f"===(b?.gender??"m")?" ":" "},g=a=>a?b[a]??null:null,h={regex:{label:"",gender:"m"},email:{label:" ",gender:"f"},url:{label:" ",gender:"f"},emoji:{label:"'",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"  ISO",gender:"m"},date:{label:" ISO",gender:"m"},time:{label:" ISO",gender:"m"},duration:{label:"  ISO",gender:"m"},ipv4:{label:" IPv4",gender:"f"},ipv6:{label:" IPv6",gender:"f"},cidrv4:{label:" IPv4",gender:"m"},cidrv6:{label:" IPv6",gender:"m"},base64:{label:"  64",gender:"f"},base64url:{label:"  64  ",gender:"f"},json_string:{label:" JSON",gender:"f"},e164:{label:" E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"",gender:"m"},includes:{label:"",gender:"m"},lowercase:{label:"",gender:"m"},starts_with:{label:"",gender:"m"},uppercase:{label:"",gender:"m"}},i={nan:"NaN"};return b=>{switch(b.code){case"invalid_type":{let c=b.expected,e=i[c??""]??d(c),f=au(b.input),g=i[f]??a[f]?.label??f;if(/^[A-Z]/.test(b.expected))return`  :   instanceof ${b.expected},  ${g}`;return`  :   ${e},  ${g}`}case"invalid_value":{if(1===b.values.length)return`  :    ${ad(b.values[0])}`;let a=b.values.map(a=>ad(a));if(2===b.values.length)return`  :    ${a[0]}  ${a[1]}`;let c=a[a.length-1],d=a.slice(0,-1).join(", ");return`  :    ${d}  ${c}`}case"too_big":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.longLabel??""} : ${c}   ${b.maximum.toString()} ${a?.unit??""} ${b.inclusive?" ":" "}`.trim();if("number"===b.origin){let a=b.inclusive?`   -${b.maximum}`:` -${b.maximum}`;return` : ${c}   ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"":"",e=b.inclusive?`${b.maximum} ${a?.unit??""}  `:` -${b.maximum} ${a?.unit??""}`;return` : ${c} ${d}  ${e}`.trim()}let d=b.inclusive?"<=":"<",h=f(b.origin??"value");if(a?.unit)return`${a.longLabel} : ${c} ${h} ${d}${b.maximum.toString()} ${a.unit}`;return`${a?.longLabel??""} : ${c} ${h} ${d}${b.maximum.toString()}`}case"too_small":{let a=g(b.origin),c=e(b.origin??"value");if("string"===b.origin)return`${a?.shortLabel??""} : ${c}   ${b.minimum.toString()} ${a?.unit??""} ${b.inclusive?" ":""}`.trim();if("number"===b.origin){let a=b.inclusive?`   -${b.minimum}`:` -${b.minimum}`;return` : ${c}   ${a}`}if("array"===b.origin||"set"===b.origin){let d="set"===b.origin?"":"";if(1===b.minimum&&b.inclusive){let a=(b.origin,"  ");return` : ${c} ${d}  ${a}`}let e=b.inclusive?`${b.minimum} ${a?.unit??""}  `:` -${b.minimum} ${a?.unit??""}`;return` : ${c} ${d}  ${e}`.trim()}let d=b.inclusive?">=":">",h=f(b.origin??"value");if(a?.unit)return`${a.shortLabel} : ${c} ${h} ${d}${b.minimum.toString()} ${a.unit}`;return`${a?.shortLabel??""} : ${c} ${h} ${d}${b.minimum.toString()}`}case"invalid_format":{if("starts_with"===b.format)return`    "${b.prefix}"`;if("ends_with"===b.format)return`    "${b.suffix}"`;if("includes"===b.format)return`   "${b.includes}"`;if("regex"===b.format)return`    ${b.pattern}`;let a=h[b.format],c=a?.label??b.format,d=a?.gender??"m";return`${c}  ${"f"===d?"":""}`}case"not_multiple_of":return`  :     ${b.divisor}`;case"unrecognized_keys":return`${b.keys.length>1?"":""}  ${b.keys.length>1?"":""}: ${B(b.keys,", ")}`;case"invalid_key":return`   `;case"invalid_union":return"  ";case"invalid_element":{let a=e(b.origin??"array");return`   ${a}`}default:return`  `}}})()}}function eg(){return{localeError:(()=>{let a={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}},b={regex:"bemenet",email:"email c\xedm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idb\xe9lyeg",date:"ISO d\xe1tum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 c\xedm",ipv6:"IPv6 c\xedm",cidrv4:"IPv4 tartom\xe1ny",cidrv6:"IPv6 tartom\xe1ny",base64:"base64-k\xf3dolt string",base64url:"base64url-k\xf3dolt string",json_string:"JSON string",e164:"E.164 sz\xe1m",jwt:"JWT",template_literal:"bemenet"},c={nan:"NaN",number:"sz\xe1m",array:"t\xf6mb"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k instanceof ${d.expected}, a kapott \xe9rt\xe9k ${e}`;return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${a}, a kapott \xe9rt\xe9k ${e}`}case"invalid_value":if(1===d.values.length)return`\xc9rv\xe9nytelen bemenet: a v\xe1rt \xe9rt\xe9k ${ad(d.values[0])}`;return`\xc9rv\xe9nytelen opci\xf3: valamelyik \xe9rt\xe9k v\xe1rt ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`T\xfal nagy: ${d.origin??"\xe9rt\xe9k"} m\xe9rete t\xfal nagy ${b}${d.maximum.toString()} ${c.unit??"elem"}`;return`T\xfal nagy: a bemeneti \xe9rt\xe9k ${d.origin??"\xe9rt\xe9k"} t\xfal nagy: ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${d.origin} m\xe9rete t\xfal kicsi ${b}${d.minimum.toString()} ${c.unit}`;return`T\xfal kicsi: a bemeneti \xe9rt\xe9k ${d.origin} t\xfal kicsi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`\xc9rv\xe9nytelen string: "${d.prefix}" \xe9rt\xe9kkel kell kezddnie`;if("ends_with"===d.format)return`\xc9rv\xe9nytelen string: "${d.suffix}" \xe9rt\xe9kkel kell v\xe9gzdnie`;if("includes"===d.format)return`\xc9rv\xe9nytelen string: "${d.includes}" \xe9rt\xe9ket kell tartalmaznia`;if("regex"===d.format)return`\xc9rv\xe9nytelen string: ${d.pattern} mint\xe1nak kell megfelelnie`;return`\xc9rv\xe9nytelen ${b[d.format]??d.format}`;case"not_multiple_of":return`\xc9rv\xe9nytelen sz\xe1m: ${d.divisor} t\xf6bbsz\xf6r\xf6s\xe9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`\xc9rv\xe9nytelen kulcs ${d.origin}`;case"invalid_union":return"\xc9rv\xe9nytelen bemenet";case"invalid_element":return`\xc9rv\xe9nytelen \xe9rt\xe9k: ${d.origin}`;default:return`\xc9rv\xe9nytelen bemenet`}}})()}}function eh(a,b,c){return 1===Math.abs(a)?b:c}function ei(a){if(!a)return"";let b=a[a.length-1];return a+(["","","","","","",""].includes(b)?"":"")}function ej(){return{localeError:(()=>{let a={string:{unit:{one:"",many:""},verb:""},file:{unit:{one:"",many:""},verb:""},array:{unit:{one:"",many:""},verb:""},set:{unit:{one:"",many:""},verb:""}},b={regex:"",email:". ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`    instanceof ${d.expected},   ${e}`;return`    ${a},   ${e}`}case"invalid_value":if(1===d.values.length)return`    ${ad(d.values[1])}`;return`      ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=eh(Number(d.maximum),c.unit.one,c.unit.many);return`    ,  ${ei(d.origin??"")}  ${b}${d.maximum.toString()} ${a}`}return`    ,  ${ei(d.origin??"")}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=eh(Number(d.minimum),c.unit.one,c.unit.many);return`    ,  ${ei(d.origin)}  ${b}${d.minimum.toString()} ${a}`}return`    ,  ${ei(d.origin)}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`     "${d.prefix}"-`;if("ends_with"===d.format)return`     "${d.suffix}"-`;if("includes"===d.format)return`     "${d.includes}"`;if("regex"===d.format)return`     ${d.pattern} `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return`      ${d.divisor}-`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}. ${B(d.keys,", ")}`;case"invalid_key":return`  ${ei(d.origin)}-`;case"invalid_union":return" ";case"invalid_element":return`  ${ei(d.origin)}-`;default:return` `}}})()}}function ek(){return{localeError:(()=>{let a={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}},b={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input tidak valid: diharapkan instanceof ${d.expected}, diterima ${e}`;return`Input tidak valid: diharapkan ${a}, diterima ${e}`}case"invalid_value":if(1===d.values.length)return`Input tidak valid: diharapkan ${ad(d.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Terlalu besar: diharapkan ${d.origin??"value"} memiliki ${b}${d.maximum.toString()} ${c.unit??"elemen"}`;return`Terlalu besar: diharapkan ${d.origin??"value"} menjadi ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Terlalu kecil: diharapkan ${d.origin} memiliki ${b}${d.minimum.toString()} ${c.unit}`;return`Terlalu kecil: diharapkan ${d.origin} menjadi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`String tidak valid: harus dimulai dengan "${d.prefix}"`;if("ends_with"===d.format)return`String tidak valid: harus berakhir dengan "${d.suffix}"`;if("includes"===d.format)return`String tidak valid: harus menyertakan "${d.includes}"`;if("regex"===d.format)return`String tidak valid: harus sesuai pola ${d.pattern}`;return`${b[d.format]??d.format} tidak valid`;case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${d.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${d.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${d.origin}`}}})()}}function el(){return{localeError:(()=>{let a={string:{unit:"stafi",verb:"a\xf0 hafa"},file:{unit:"b\xe6ti",verb:"a\xf0 hafa"},array:{unit:"hluti",verb:"a\xf0 hafa"},set:{unit:"hluti",verb:"a\xf0 hafa"}},b={regex:"gildi",email:"netfang",url:"vefsl\xf3\xf0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xedmi",date:"ISO dagsetning",time:"ISO t\xedmi",duration:"ISO t\xedmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xf6lugildi",jwt:"JWT",template_literal:"gildi"},c={nan:"NaN",number:"n\xfamer",array:"fylki"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Rangt gildi: \xde\xfa sl\xf3st inn ${e} \xfear sem \xe1 a\xf0 vera instanceof ${d.expected}`;return`Rangt gildi: \xde\xfa sl\xf3st inn ${e} \xfear sem \xe1 a\xf0 vera ${a}`}case"invalid_value":if(1===d.values.length)return`Rangt gildi: gert r\xe1\xf0 fyrir ${ad(d.values[0])}`;return`\xd3gilt val: m\xe1 vera eitt af eftirfarandi ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin??"gildi"} hafi ${b}${d.maximum.toString()} ${c.unit??"hluti"}`;return`Of st\xf3rt: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin??"gildi"} s\xe9 ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin} hafi ${b}${d.minimum.toString()} ${c.unit}`;return`Of l\xedti\xf0: gert er r\xe1\xf0 fyrir a\xf0 ${d.origin} s\xe9 ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 byrja \xe1 "${d.prefix}"`;if("ends_with"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 enda \xe1 "${d.suffix}"`;if("includes"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 innihalda "${d.includes}"`;if("regex"===d.format)return`\xd3gildur strengur: ver\xf0ur a\xf0 fylgja mynstri ${d.pattern}`;return`Rangt ${b[d.format]??d.format}`;case"not_multiple_of":return`R\xf6ng tala: ver\xf0ur a\xf0 vera margfeldi af ${d.divisor}`;case"unrecognized_keys":return`\xd3\xfeekkt ${d.keys.length>1?"ir lyklar":"ur lykill"}: ${B(d.keys,", ")}`;case"invalid_key":return`Rangur lykill \xed ${d.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi \xed ${d.origin}`}}})()}}function em(){return{localeError:(()=>{let a={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}},b={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"numero",array:"vettore"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input non valido: atteso instanceof ${d.expected}, ricevuto ${e}`;return`Input non valido: atteso ${a}, ricevuto ${e}`}case"invalid_value":if(1===d.values.length)return`Input non valido: atteso ${ad(d.values[0])}`;return`Opzione non valida: atteso uno tra ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Troppo grande: ${d.origin??"valore"} deve avere ${b}${d.maximum.toString()} ${c.unit??"elementi"}`;return`Troppo grande: ${d.origin??"valore"} deve essere ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Troppo piccolo: ${d.origin} deve avere ${b}${d.minimum.toString()} ${c.unit}`;return`Troppo piccolo: ${d.origin} deve essere ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Stringa non valida: deve iniziare con "${d.prefix}"`;if("ends_with"===d.format)return`Stringa non valida: deve terminare con "${d.suffix}"`;if("includes"===d.format)return`Stringa non valida: deve includere "${d.includes}"`;if("regex"===d.format)return`Stringa non valida: deve corrispondere al pattern ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${d.divisor}`;case"unrecognized_keys":return`Chiav${d.keys.length>1?"i":"e"} non riconosciut${d.keys.length>1?"e":"a"}: ${B(d.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${d.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${d.origin}`}}})()}}function en(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`: instanceof ${d.expected}${e}`;return`: ${a}${e}`}case"invalid_value":if(1===d.values.length)return`: ${ad(d.values[0])}`;return`: ${B(d.values,"")}`;case"too_big":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin??""}${d.maximum.toString()}${c.unit??""}${b}`;return`: ${d.origin??""}${d.maximum.toString()}${b}`}case"too_small":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin}${d.minimum.toString()}${c.unit}${b}`;return`: ${d.origin}${d.minimum.toString()}${b}`}case"invalid_format":if("starts_with"===d.format)return`: "${d.prefix}"`;if("ends_with"===d.format)return`: "${d.suffix}"`;if("includes"===d.format)return`: "${d.includes}"`;if("regex"===d.format)return`: ${d.pattern}`;return`${b[d.format]??d.format}`;case"not_multiple_of":return`: ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""}: ${B(d.keys,"")}`;case"invalid_key":return`${d.origin}`;case"invalid_union":return"";case"invalid_element":return`${d.origin}`;default:return``}}})()}}function eo(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",string:"",boolean:"",function:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}`;return` :  - ${B(d.values,"|")}-`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :  ${d.origin??""} ${c.verb} ${b}${d.maximum.toString()} ${c.unit}`;return` :  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :  ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return` :  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"-`;if("ends_with"===d.format)return` :   "${d.suffix}"-`;if("includes"===d.format)return` :   "${d.includes}"-`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :   ${d.divisor}- `;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`  ${d.origin}-`;case"invalid_union":return" ";case"invalid_element":return`  ${d.origin}-`;default:return` `}}})()}}function ep(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  instanceof ${d.expected}  ${e}`;return`  ${a}  ${e}`}case"invalid_value":if(1===d.values.length)return`  ${ad(d.values[0])}`;return`  ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`  ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`  ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`  ${d.origin} ${b} ${d.minimum.toString()} ${c.unit}`;return`  ${d.origin} ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`  "${d.prefix}"`;if("ends_with"===d.format)return`  "${d.suffix}"`;if("includes"===d.format)return`  "${d.includes}"`;if("regex"===d.format)return`  ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return`  ${d.divisor}`;case"unrecognized_keys":return` ${B(d.keys,", ")}`;case"invalid_key":return` ${d.origin}`;case"invalid_union":default:return``;case"invalid_element":return` ${d.origin}`}}})()}}function eq(){return ep()}function er(){return{localeError:(()=>{let a={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}},b={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :   instanceof ${d.expected},   ${e}`;return` :   ${a},   ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}  `;return` : ${B(d.values," ")}   `;case"too_big":{let b=d.inclusive?"":"",c=""===b?" ":" ",e=a[d.origin]??null,f=e?.unit??"";if(e)return`${d.origin??""}  : ${d.maximum.toString()}${f} ${b}${c}`;return`${d.origin??""}  : ${d.maximum.toString()} ${b}${c}`}case"too_small":{let b=d.inclusive?"":"",c=""===b?" ":" ",e=a[d.origin]??null,f=e?.unit??"";if(e)return`${d.origin??""}  : ${d.minimum.toString()}${f} ${b}${c}`;return`${d.origin??""}  : ${d.minimum.toString()} ${b}${c}`}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"()  `;if("ends_with"===d.format)return` : "${d.suffix}"()  `;if("includes"===d.format)return` : "${d.includes}"()  `;if("regex"===d.format)return` :  ${d.pattern}   `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}  `;case"unrecognized_keys":return`   : ${B(d.keys,", ")}`;case"invalid_key":return` : ${d.origin}`;case"invalid_union":default:return` `;case"invalid_element":return` : ${d.origin}`}}})()}}let es=a=>a.charAt(0).toUpperCase()+a.slice(1);function et(a){let b=Math.abs(a),c=b%10,d=b%100;return d>=11&&d<=19||0===c?"many":1===c?"one":"few"}function eu(){return{localeError:(()=>{let a={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function b(b,c,d,e){let f=a[b]??null;return null===f?f:{unit:f.unit[c],verb:f.verb[e][d?"inclusive":"notInclusive"]}}let c={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"},d={nan:"NaN",number:"skaiius",bigint:"sveikasis skaiius",string:"eilut",boolean:"login reikm",undefined:"neapibrta reikm",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulin reikm"};return a=>{switch(a.code){case"invalid_type":{let b=d[a.expected]??a.expected,c=au(a.input),e=d[c]??c;if(/^[A-Z]/.test(a.expected))return`Gautas tipas ${e}, o tiktasi - instanceof ${a.expected}`;return`Gautas tipas ${e}, o tiktasi - ${b}`}case"invalid_value":if(1===a.values.length)return`Privalo bti ${ad(a.values[0])}`;return`Privalo bti vienas i ${B(a.values,"|")} pasirinkim`;case"too_big":{let c=d[a.origin]??a.origin,e=b(a.origin,et(Number(a.maximum)),a.inclusive??!1,"smaller");if(e?.verb)return`${es(c??a.origin??"reikm")} ${e.verb} ${a.maximum.toString()} ${e.unit??"element"}`;let f=a.inclusive?"ne didesnis kaip":"maesnis kaip";return`${es(c??a.origin??"reikm")} turi bti ${f} ${a.maximum.toString()} ${e?.unit}`}case"too_small":{let c=d[a.origin]??a.origin,e=b(a.origin,et(Number(a.minimum)),a.inclusive??!1,"bigger");if(e?.verb)return`${es(c??a.origin??"reikm")} ${e.verb} ${a.minimum.toString()} ${e.unit??"element"}`;let f=a.inclusive?"ne maesnis kaip":"didesnis kaip";return`${es(c??a.origin??"reikm")} turi bti ${f} ${a.minimum.toString()} ${e?.unit}`}case"invalid_format":if("starts_with"===a.format)return`Eilut privalo prasidti "${a.prefix}"`;if("ends_with"===a.format)return`Eilut privalo pasibaigti "${a.suffix}"`;if("includes"===a.format)return`Eilut privalo traukti "${a.includes}"`;if("regex"===a.format)return`Eilut privalo atitikti ${a.pattern}`;return`Neteisingas ${c[a.format]??a.format}`;case"not_multiple_of":return`Skaiius privalo bti ${a.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${a.keys.length>1?"i":"as"} rakt${a.keys.length>1?"ai":"as"}: ${B(a.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let b=d[a.origin]??a.origin;return`${es(b??a.origin??"reikm")} turi klaiding vest`}}}})()}}function ev(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :   instanceof ${d.expected},  ${e}`;return` :   ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return`Invalid input: expected ${ad(d.values[0])}`;return` :    ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :   ${d.origin??""}   ${b}${d.maximum.toString()} ${c.unit??""}`;return` :   ${d.origin??""}   ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :   ${d.origin}   ${b}${d.minimum.toString()} ${c.unit}`;return` :   ${d.origin}   ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :     "${d.prefix}"`;if("ends_with"===d.format)return` :     "${d.suffix}"`;if("includes"===d.format)return` :    "${d.includes}"`;if("regex"===d.format)return` :      ${d.pattern}`;return`Invalid ${b[d.format]??d.format}`;case"not_multiple_of":return` :      ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?" ":" "}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return" ";case"invalid_element":return`   ${d.origin}`;default:return` `}}})()}}function ew(){return{localeError:(()=>{let a={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}},b={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"nombor"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Input tidak sah: dijangka instanceof ${d.expected}, diterima ${e}`;return`Input tidak sah: dijangka ${a}, diterima ${e}`}case"invalid_value":if(1===d.values.length)return`Input tidak sah: dijangka ${ad(d.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Terlalu besar: dijangka ${d.origin??"nilai"} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"elemen"}`;return`Terlalu besar: dijangka ${d.origin??"nilai"} adalah ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Terlalu kecil: dijangka ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Terlalu kecil: dijangka ${d.origin} adalah ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`String tidak sah: mesti bermula dengan "${d.prefix}"`;if("ends_with"===d.format)return`String tidak sah: mesti berakhir dengan "${d.suffix}"`;if("includes"===d.format)return`String tidak sah: mesti mengandungi "${d.includes}"`;if("regex"===d.format)return`String tidak sah: mesti sepadan dengan corak ${d.pattern}`;return`${b[d.format]??d.format} tidak sah`;case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${d.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${B(d.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${d.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${d.origin}`}}})()}}function ex(){return{localeError:(()=>{let a={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}},b={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},c={nan:"NaN",number:"getal"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ongeldige invoer: verwacht instanceof ${d.expected}, ontving ${e}`;return`Ongeldige invoer: verwacht ${a}, ontving ${e}`}case"invalid_value":if(1===d.values.length)return`Ongeldige invoer: verwacht ${ad(d.values[0])}`;return`Ongeldige optie: verwacht \xe9\xe9n van ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null,e="date"===d.origin?"laat":"string"===d.origin?"lang":"groot";if(c)return`Te ${e}: verwacht dat ${d.origin??"waarde"} ${b}${d.maximum.toString()} ${c.unit??"elementen"} ${c.verb}`;return`Te ${e}: verwacht dat ${d.origin??"waarde"} ${b}${d.maximum.toString()} is`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null,e="date"===d.origin?"vroeg":"string"===d.origin?"kort":"klein";if(c)return`Te ${e}: verwacht dat ${d.origin} ${b}${d.minimum.toString()} ${c.unit} ${c.verb}`;return`Te ${e}: verwacht dat ${d.origin} ${b}${d.minimum.toString()} is`}case"invalid_format":if("starts_with"===d.format)return`Ongeldige tekst: moet met "${d.prefix}" beginnen`;if("ends_with"===d.format)return`Ongeldige tekst: moet op "${d.suffix}" eindigen`;if("includes"===d.format)return`Ongeldige tekst: moet "${d.includes}" bevatten`;if("regex"===d.format)return`Ongeldige tekst: moet overeenkomen met patroon ${d.pattern}`;return`Ongeldig: ${b[d.format]??d.format}`;case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${d.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${d.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${d.origin}`}}})()}}function ey(){return{localeError:(()=>{let a={string:{unit:"tegn",verb:"\xe5 ha"},file:{unit:"bytes",verb:"\xe5 ha"},array:{unit:"elementer",verb:"\xe5 inneholde"},set:{unit:"elementer",verb:"\xe5 inneholde"}},b={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xe5de",ipv6:"IPv6-omr\xe5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"tall",array:"liste"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ugyldig input: forventet instanceof ${d.expected}, fikk ${e}`;return`Ugyldig input: forventet ${a}, fikk ${e}`}case"invalid_value":if(1===d.values.length)return`Ugyldig verdi: forventet ${ad(d.values[0])}`;return`Ugyldig valg: forventet en av ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`For stor(t): forventet ${d.origin??"value"} til \xe5 ha ${b}${d.maximum.toString()} ${c.unit??"elementer"}`;return`For stor(t): forventet ${d.origin??"value"} til \xe5 ha ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`For lite(n): forventet ${d.origin} til \xe5 ha ${b}${d.minimum.toString()} ${c.unit}`;return`For lite(n): forventet ${d.origin} til \xe5 ha ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ugyldig streng: m\xe5 starte med "${d.prefix}"`;if("ends_with"===d.format)return`Ugyldig streng: m\xe5 ende med "${d.suffix}"`;if("includes"===d.format)return`Ugyldig streng: m\xe5 inneholde "${d.includes}"`;if("regex"===d.format)return`Ugyldig streng: m\xe5 matche m\xf8nsteret ${d.pattern}`;return`Ugyldig ${b[d.format]??d.format}`;case"not_multiple_of":return`Ugyldig tall: m\xe5 v\xe6re et multiplum av ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ukjente n\xf8kler":"Ukjent n\xf8kkel"}: ${B(d.keys,", ")}`;case"invalid_key":return`Ugyldig n\xf8kkel i ${d.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${d.origin}`}}})()}}function ez(){return{localeError:(()=>{let a={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}},b={regex:"giren",email:"epostag\xe2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xe2m",date:"ISO tarihi",time:"ISO zaman",duration:"ISO m\xfcddeti",ipv4:"IPv4 ni\xe2n",ipv6:"IPv6 ni\xe2n",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"},c={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`F\xe2sit giren: umulan instanceof ${d.expected}, alnan ${e}`;return`F\xe2sit giren: umulan ${a}, alnan ${e}`}case"invalid_value":if(1===d.values.length)return`F\xe2sit giren: umulan ${ad(d.values[0])}`;return`F\xe2sit tercih: m\xfbteberler ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Fazla b\xfcy\xfck: ${d.origin??"value"}, ${b}${d.maximum.toString()} ${c.unit??"elements"} sahip olmalyd.`;return`Fazla b\xfcy\xfck: ${d.origin??"value"}, ${b}${d.maximum.toString()} olmalyd.`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Fazla k\xfc\xe7\xfck: ${d.origin}, ${b}${d.minimum.toString()} ${c.unit} sahip olmalyd.`;return`Fazla k\xfc\xe7\xfck: ${d.origin}, ${b}${d.minimum.toString()} olmalyd.`}case"invalid_format":if("starts_with"===d.format)return`F\xe2sit metin: "${d.prefix}" ile balamal.`;if("ends_with"===d.format)return`F\xe2sit metin: "${d.suffix}" ile bitmeli.`;if("includes"===d.format)return`F\xe2sit metin: "${d.includes}" ihtiv\xe2 etmeli.`;if("regex"===d.format)return`F\xe2sit metin: ${d.pattern} nakna uymal.`;return`F\xe2sit ${b[d.format]??d.format}`;case"not_multiple_of":return`F\xe2sit say: ${d.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin} i\xe7in tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${d.origin} i\xe7in tannmayan kymet var.`;default:return`Kymet tannamad.`}}})()}}function eA(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected} ,  ${e}  `;return` :  ${a} ,  ${e}  `}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])} `;return` :    ${B(d.values,"|")}  `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""} `;return` : ${d.origin??""}  ${b}${d.maximum.toString()} `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit} `;return` : ${d.origin}  ${b}${d.minimum.toString()} `}case"invalid_format":if("starts_with"===d.format)return` :   "${d.prefix}"   `;if("ends_with"===d.format)return` :   "${d.suffix}"    `;if("includes"===d.format)return` :  "${d.includes}" `;if("regex"===d.format)return` :   ${d.pattern}   `;return`${b[d.format]??d.format}  `;case"not_multiple_of":return` :   ${d.divisor}  `;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin} `;case"invalid_union":default:return` `;case"invalid_element":return`   ${d.origin} `}}})()}}function eB(){return{localeError:(()=>{let a={string:{unit:"znak\xf3w",verb:"mie"},file:{unit:"bajt\xf3w",verb:"mie"},array:{unit:"element\xf3w",verb:"mie"},set:{unit:"element\xf3w",verb:"mie"}},b={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znak\xf3w zakodowany w formacie base64",base64url:"cig znak\xf3w zakodowany w formacie base64url",json_string:"cig znak\xf3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"},c={nan:"NaN",number:"liczba",array:"tablica"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Nieprawidowe dane wejciowe: oczekiwano instanceof ${d.expected}, otrzymano ${e}`;return`Nieprawidowe dane wejciowe: oczekiwano ${a}, otrzymano ${e}`}case"invalid_value":if(1===d.values.length)return`Nieprawidowe dane wejciowe: oczekiwano ${ad(d.values[0])}`;return`Nieprawidowa opcja: oczekiwano jednej z wartoci ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Za dua warto: oczekiwano, e ${d.origin??"warto"} bdzie mie ${b}${d.maximum.toString()} ${c.unit??"element\xf3w"}`;return`Zbyt du(y/a/e): oczekiwano, e ${d.origin??"warto"} bdzie wynosi ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Za maa warto: oczekiwano, e ${d.origin??"warto"} bdzie mie ${b}${d.minimum.toString()} ${c.unit??"element\xf3w"}`;return`Zbyt ma(y/a/e): oczekiwano, e ${d.origin??"warto"} bdzie wynosi ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Nieprawidowy cig znak\xf3w: musi zaczyna si od "${d.prefix}"`;if("ends_with"===d.format)return`Nieprawidowy cig znak\xf3w: musi koczy si na "${d.suffix}"`;if("includes"===d.format)return`Nieprawidowy cig znak\xf3w: musi zawiera "${d.includes}"`;if("regex"===d.format)return`Nieprawidowy cig znak\xf3w: musi odpowiada wzorcowi ${d.pattern}`;return`Nieprawidow(y/a/e) ${b[d.format]??d.format}`;case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${d.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${d.origin}`;case"invalid_union":return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${d.origin}`;default:return`Nieprawidowe dane wejciowe`}}})()}}function eC(){return{localeError:(()=>{let a={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}},b={regex:"padr\xe3o",email:"endere\xe7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xe7\xe3o ISO",ipv4:"endere\xe7o IPv4",ipv6:"endere\xe7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xfamero E.164",jwt:"JWT",template_literal:"entrada"},c={nan:"NaN",number:"n\xfamero",null:"nulo"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Tipo inv\xe1lido: esperado instanceof ${d.expected}, recebido ${e}`;return`Tipo inv\xe1lido: esperado ${a}, recebido ${e}`}case"invalid_value":if(1===d.values.length)return`Entrada inv\xe1lida: esperado ${ad(d.values[0])}`;return`Op\xe7\xe3o inv\xe1lida: esperada uma das ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Muito grande: esperado que ${d.origin??"valor"} tivesse ${b}${d.maximum.toString()} ${c.unit??"elementos"}`;return`Muito grande: esperado que ${d.origin??"valor"} fosse ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Muito pequeno: esperado que ${d.origin} tivesse ${b}${d.minimum.toString()} ${c.unit}`;return`Muito pequeno: esperado que ${d.origin} fosse ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Texto inv\xe1lido: deve come\xe7ar com "${d.prefix}"`;if("ends_with"===d.format)return`Texto inv\xe1lido: deve terminar com "${d.suffix}"`;if("includes"===d.format)return`Texto inv\xe1lido: deve incluir "${d.includes}"`;if("regex"===d.format)return`Texto inv\xe1lido: deve corresponder ao padr\xe3o ${d.pattern}`;return`${b[d.format]??d.format} inv\xe1lido`;case"not_multiple_of":return`N\xfamero inv\xe1lido: deve ser m\xfaltiplo de ${d.divisor}`;case"unrecognized_keys":return`Chave${d.keys.length>1?"s":""} desconhecida${d.keys.length>1?"s":""}: ${B(d.keys,", ")}`;case"invalid_key":return`Chave inv\xe1lida em ${d.origin}`;case"invalid_union":return"Entrada inv\xe1lida";case"invalid_element":return`Valor inv\xe1lido em ${d.origin}`;default:return`Campo inv\xe1lido`}}})()}}function eD(a,b,c,d){let e=Math.abs(a),f=e%10,g=e%100;return g>=11&&g<=19?d:1===f?b:f>=2&&f<=4?c:d}function eE(){return{localeError:(()=>{let a={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}},b={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}`;return` :    ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c){let a=eD(Number(d.maximum),c.unit.one,c.unit.few,c.unit.many);return`  : ,  ${d.origin??""}   ${b}${d.maximum.toString()} ${a}`}return`  : ,  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c){let a=eD(Number(d.minimum),c.unit.one,c.unit.few,c.unit.many);return`  : ,  ${d.origin}   ${b}${d.minimum.toString()} ${a}`}return`  : ,  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"":""} ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${d.origin}`;default:return`  `}}})()}}function eF(){return{localeError:(()=>{let a={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}},b={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"},c={nan:"NaN",number:"tevilo",array:"tabela"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Neveljaven vnos: priakovano instanceof ${d.expected}, prejeto ${e}`;return`Neveljaven vnos: priakovano ${a}, prejeto ${e}`}case"invalid_value":if(1===d.values.length)return`Neveljaven vnos: priakovano ${ad(d.values[0])}`;return`Neveljavna monost: priakovano eno izmed ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Preveliko: priakovano, da bo ${d.origin??"vrednost"} imelo ${b}${d.maximum.toString()} ${c.unit??"elementov"}`;return`Preveliko: priakovano, da bo ${d.origin??"vrednost"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Premajhno: priakovano, da bo ${d.origin} imelo ${b}${d.minimum.toString()} ${c.unit}`;return`Premajhno: priakovano, da bo ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Neveljaven niz: mora se zaeti z "${d.prefix}"`;if("ends_with"===d.format)return`Neveljaven niz: mora se konati z "${d.suffix}"`;if("includes"===d.format)return`Neveljaven niz: mora vsebovati "${d.includes}"`;if("regex"===d.format)return`Neveljaven niz: mora ustrezati vzorcu ${d.pattern}`;return`Neveljaven ${b[d.format]??d.format}`;case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${d.divisor}`;case"unrecognized_keys":return`Neprepoznan${d.keys.length>1?"i kljui":" klju"}: ${B(d.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${d.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${d.origin}`}}})()}}function eG(){return{localeError:(()=>{let a={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xe5lla"},set:{unit:"objekt",verb:"att inneh\xe5lla"}},b={regex:"regulj\xe4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xe4ng",base64url:"base64url-kodad str\xe4ng",json_string:"JSON-str\xe4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},c={nan:"NaN",number:"antal",array:"lista"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ogiltig inmatning: f\xf6rv\xe4ntat instanceof ${d.expected}, fick ${e}`;return`Ogiltig inmatning: f\xf6rv\xe4ntat ${a}, fick ${e}`}case"invalid_value":if(1===d.values.length)return`Ogiltig inmatning: f\xf6rv\xe4ntat ${ad(d.values[0])}`;return`Ogiltigt val: f\xf6rv\xe4ntade en av ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`F\xf6r stor(t): f\xf6rv\xe4ntade ${d.origin??"v\xe4rdet"} att ha ${b}${d.maximum.toString()} ${c.unit??"element"}`;return`F\xf6r stor(t): f\xf6rv\xe4ntat ${d.origin??"v\xe4rdet"} att ha ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`F\xf6r lite(t): f\xf6rv\xe4ntade ${d.origin??"v\xe4rdet"} att ha ${b}${d.minimum.toString()} ${c.unit}`;return`F\xf6r lite(t): f\xf6rv\xe4ntade ${d.origin??"v\xe4rdet"} att ha ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ogiltig str\xe4ng: m\xe5ste b\xf6rja med "${d.prefix}"`;if("ends_with"===d.format)return`Ogiltig str\xe4ng: m\xe5ste sluta med "${d.suffix}"`;if("includes"===d.format)return`Ogiltig str\xe4ng: m\xe5ste inneh\xe5lla "${d.includes}"`;if("regex"===d.format)return`Ogiltig str\xe4ng: m\xe5ste matcha m\xf6nstret "${d.pattern}"`;return`Ogiltig(t) ${b[d.format]??d.format}`;case"not_multiple_of":return`Ogiltigt tal: m\xe5ste vara en multipel av ${d.divisor}`;case"unrecognized_keys":return`${d.keys.length>1?"Ok\xe4nda nycklar":"Ok\xe4nd nyckel"}: ${B(d.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${d.origin??"v\xe4rdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xe4rde i ${d.origin??"v\xe4rdet"}`}}})()}}function eH(){return{localeError:(()=>{let a={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}},b={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"},c={nan:"NaN",number:"",array:"",null:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` :  instanceof ${d.expected},  ${e}`;return` :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return` :  ${ad(d.values[0])}`;return` :  ${B(d.values,"|")}  `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` :  ${d.origin??""} ${b}${d.maximum.toString()} ${c.unit??""}   `;return` :  ${d.origin??""} ${b}${d.maximum.toString()}   `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` :  ${d.origin} ${b}${d.minimum.toString()} ${c.unit}   `;return` :  ${d.origin} ${b}${d.minimum.toString()}   `}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"   `;if("ends_with"===d.format)return` : "${d.suffix}"   `;if("includes"===d.format)return` : "${d.includes}"   `;if("regex"===d.format)return` : ${d.pattern}   `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}    `;case"unrecognized_keys":return`  ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin}   `;case"invalid_union":return" ";case"invalid_element":return`${d.origin}   `;default:return` `}}})()}}function eI(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""},c={nan:"NaN",number:"",array:" (Array)",null:" (null)"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`:  instanceof ${d.expected}  ${e}`;return`:  ${a}  ${e}`}case"invalid_value":if(1===d.values.length)return`:  ${ad(d.values[0])}`;return`:  ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin??""} ${b} ${d.maximum.toString()} ${c.unit??""}`;return`: ${d.origin??""} ${b} ${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?"":"",c=a[d.origin]??null;if(c)return`: ${d.origin} ${b} ${d.minimum.toString()} ${c.unit}`;return`: ${d.origin} ${b} ${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`:  "${d.prefix}"`;if("ends_with"===d.format)return`:  "${d.suffix}"`;if("includes"===d.format)return`:  "${d.includes}" `;if("regex"===d.format)return`:  ${d.pattern}`;return`: ${b[d.format]??d.format}`;case"not_multiple_of":return`:  ${d.divisor} `;case"unrecognized_keys":return`: ${B(d.keys,", ")}`;case"invalid_key":return` ${d.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${d.origin}`;default:return``}}})()}}function eJ(){return{localeError:(()=>{let a={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"\xf6e",verb:"olmal"},set:{unit:"\xf6e",verb:"olmal"}},b={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xfcre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Ge\xe7ersiz deer: beklenen instanceof ${d.expected}, alnan ${e}`;return`Ge\xe7ersiz deer: beklenen ${a}, alnan ${e}`}case"invalid_value":if(1===d.values.length)return`Ge\xe7ersiz deer: beklenen ${ad(d.values[0])}`;return`Ge\xe7ersiz se\xe7enek: aadakilerden biri olmal: ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`\xc7ok b\xfcy\xfck: beklenen ${d.origin??"deer"} ${b}${d.maximum.toString()} ${c.unit??"\xf6e"}`;return`\xc7ok b\xfcy\xfck: beklenen ${d.origin??"deer"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`\xc7ok k\xfc\xe7\xfck: beklenen ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return`\xc7ok k\xfc\xe7\xfck: beklenen ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Ge\xe7ersiz metin: "${d.prefix}" ile balamal`;if("ends_with"===d.format)return`Ge\xe7ersiz metin: "${d.suffix}" ile bitmeli`;if("includes"===d.format)return`Ge\xe7ersiz metin: "${d.includes}" i\xe7ermeli`;if("regex"===d.format)return`Ge\xe7ersiz metin: ${d.pattern} desenine uymal`;return`Ge\xe7ersiz ${b[d.format]??d.format}`;case"not_multiple_of":return`Ge\xe7ersiz say: ${d.divisor} ile tam b\xf6l\xfcnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${d.keys.length>1?"lar":""}: ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin} i\xe7inde ge\xe7ersiz anahtar`;case"invalid_union":return"Ge\xe7ersiz deer";case"invalid_element":return`${d.origin} i\xe7inde ge\xe7ersiz deer`;default:return`Ge\xe7ersiz deer`}}})()}}function eK(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "},c={nan:"NaN",number:"",array:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  :  instanceof ${d.expected},  ${e}`;return`  :  ${a},  ${e}`}case"invalid_value":if(1===d.values.length)return`  :  ${ad(d.values[0])}`;return` :    ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ,  ${d.origin??""} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??""}`;return` : ,  ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ,  ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return` : ,  ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` :    "${d.prefix}"`;if("ends_with"===d.format)return` :    "${d.suffix}"`;if("includes"===d.format)return` :   "${d.includes}"`;if("regex"===d.format)return` :    ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` :    ${d.divisor}`;case"unrecognized_keys":return` ${d.keys.length>1?"":""}: ${B(d.keys,", ")}`;case"invalid_key":return`   ${d.origin}`;case"invalid_union":return"  ";case"invalid_element":return`   ${d.origin}`;default:return`  `}}})()}}function eL(){return eK()}function eM(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "},c={nan:"NaN",number:"",array:"",null:""};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`  : instanceof ${d.expected}   ${e}  `;return`  : ${a}   ${e}  `}case"invalid_value":if(1===d.values.length)return`  : ${ad(d.values[0])}  `;return` : ${B(d.values,"|")}     `;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` : ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""}   `;return` : ${d.origin??""}  ${b}${d.maximum.toString()}   `}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` : ${d.origin}  ${b}${d.minimum.toString()} ${c.unit}   `;return` : ${d.origin}  ${b}${d.minimum.toString()}   `}case"invalid_format":if("starts_with"===d.format)return` : "${d.prefix}"    `;if("ends_with"===d.format)return` : "${d.suffix}"    `;if("includes"===d.format)return` : "${d.includes}"   `;if("regex"===d.format)return` :  ${d.pattern}    `;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` : ${d.divisor}    `;case"unrecognized_keys":return`   ${d.keys.length>1?"":""}: ${B(d.keys," ")}`;case"invalid_key":return`${d.origin}   `;case"invalid_union":return"  ";case"invalid_element":return`${d.origin}   `;default:return`  `}}})()}}function eN(){return{localeError:(()=>{let a={string:{unit:"belgi",verb:"bolishi kerak"},file:{unit:"bayt",verb:"bolishi kerak"},array:{unit:"element",verb:"bolishi kerak"},set:{unit:"element",verb:"bolishi kerak"}},b={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},c={nan:"NaN",number:"raqam",array:"massiv"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`Notogri kirish: kutilgan instanceof ${d.expected}, qabul qilingan ${e}`;return`Notogri kirish: kutilgan ${a}, qabul qilingan ${e}`}case"invalid_value":if(1===d.values.length)return`Notogri kirish: kutilgan ${ad(d.values[0])}`;return`Notogri variant: quyidagilardan biri kutilgan ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Juda katta: kutilgan ${d.origin??"qiymat"} ${b}${d.maximum.toString()} ${c.unit} ${c.verb}`;return`Juda katta: kutilgan ${d.origin??"qiymat"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Juda kichik: kutilgan ${d.origin} ${b}${d.minimum.toString()} ${c.unit} ${c.verb}`;return`Juda kichik: kutilgan ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Notogri satr: "${d.prefix}" bilan boshlanishi kerak`;if("ends_with"===d.format)return`Notogri satr: "${d.suffix}" bilan tugashi kerak`;if("includes"===d.format)return`Notogri satr: "${d.includes}" ni oz ichiga olishi kerak`;if("regex"===d.format)return`Notogri satr: ${d.pattern} shabloniga mos kelishi kerak`;return`Notogri ${b[d.format]??d.format}`;case"not_multiple_of":return`Notogri raqam: ${d.divisor} ning karralisi bolishi kerak`;case"unrecognized_keys":return`Nomalum kalit${d.keys.length>1?"lar":""}: ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin} dagi kalit notogri`;case"invalid_union":return"Notogri kirish";case"invalid_element":return`${d.origin} da notogri qiymat`;default:return`Notogri kirish`}}})()}}function eO(){return{localeError:(()=>{let a={string:{unit:"k\xfd t",verb:"c\xf3"},file:{unit:"byte",verb:"c\xf3"},array:{unit:"phn t",verb:"c\xf3"},set:{unit:"phn t",verb:"c\xf3"}},b={regex:"u v\xe0o",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xe0y gi ISO",date:"ng\xe0y ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m\xe3 h\xf3a base64",base64url:"chui m\xe3 h\xf3a base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u v\xe0o"},c={nan:"NaN",number:"s",array:"mng"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`u v\xe0o kh\xf4ng hp l: mong i instanceof ${d.expected}, nhn c ${e}`;return`u v\xe0o kh\xf4ng hp l: mong i ${a}, nhn c ${e}`}case"invalid_value":if(1===d.values.length)return`u v\xe0o kh\xf4ng hp l: mong i ${ad(d.values[0])}`;return`T\xf9y chn kh\xf4ng hp l: mong i mt trong c\xe1c gi\xe1 tr ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`Qu\xe1 ln: mong i ${d.origin??"gi\xe1 tr"} ${c.verb} ${b}${d.maximum.toString()} ${c.unit??"phn t"}`;return`Qu\xe1 ln: mong i ${d.origin??"gi\xe1 tr"} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`Qu\xe1 nh: mong i ${d.origin} ${c.verb} ${b}${d.minimum.toString()} ${c.unit}`;return`Qu\xe1 nh: mong i ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return`Chui kh\xf4ng hp l: phi bt u bng "${d.prefix}"`;if("ends_with"===d.format)return`Chui kh\xf4ng hp l: phi kt th\xfac bng "${d.suffix}"`;if("includes"===d.format)return`Chui kh\xf4ng hp l: phi bao gm "${d.includes}"`;if("regex"===d.format)return`Chui kh\xf4ng hp l: phi khp vi mu ${d.pattern}`;return`${b[d.format]??d.format} kh\xf4ng hp l`;case"not_multiple_of":return`S kh\xf4ng hp l: phi l\xe0 bi s ca ${d.divisor}`;case"unrecognized_keys":return`Kh\xf3a kh\xf4ng c nhn dng: ${B(d.keys,", ")}`;case"invalid_key":return`Kh\xf3a kh\xf4ng hp l trong ${d.origin}`;case"invalid_union":return"u v\xe0o kh\xf4ng hp l";case"invalid_element":return`Gi\xe1 tr kh\xf4ng hp l trong ${d.origin}`;default:return`u v\xe0o kh\xf4ng hp l`}}})()}}function eP(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""},c={nan:"NaN",number:"",array:"",null:"(null)"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` instanceof ${d.expected} ${e}`;return` ${a} ${e}`}case"invalid_value":if(1===d.values.length)return` ${ad(d.values[0])}`;return` ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` ${d.origin??""} ${b}${d.maximum.toString()} ${c.unit??""}`;return` ${d.origin??""} ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` ${d.origin} ${b}${d.minimum.toString()} ${c.unit}`;return` ${d.origin} ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` "${d.prefix}" `;if("ends_with"===d.format)return` "${d.suffix}" `;if("includes"===d.format)return` "${d.includes}"`;if("regex"===d.format)return` ${d.pattern}`;return`${b[d.format]??d.format}`;case"not_multiple_of":return` ${d.divisor} `;case"unrecognized_keys":return`(key): ${B(d.keys,", ")}`;case"invalid_key":return`${d.origin} (key)`;case"invalid_union":return"";case"invalid_element":return`${d.origin} (value)`;default:return``}}})()}}function eQ(){return{localeError:(()=>{let a={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}},b={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""},c={nan:"NaN"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return` instanceof ${d.expected} ${e}`;return` ${a} ${e}`}case"invalid_value":if(1===d.values.length)return` ${ad(d.values[0])}`;return` ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return` ${d.origin??""}  ${b}${d.maximum.toString()} ${c.unit??""}`;return` ${d.origin??""}  ${b}${d.maximum.toString()}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return` ${d.origin}  ${b}${d.minimum.toString()} ${c.unit}`;return` ${d.origin}  ${b}${d.minimum.toString()}`}case"invalid_format":if("starts_with"===d.format)return` "${d.prefix}" `;if("ends_with"===d.format)return` "${d.suffix}" `;if("includes"===d.format)return` "${d.includes}"`;if("regex"===d.format)return` ${d.pattern}`;return` ${b[d.format]??d.format}`;case"not_multiple_of":return` ${d.divisor} `;case"unrecognized_keys":return`${d.keys.length>1?"":""}${B(d.keys,"")}`;case"invalid_key":return`${d.origin} `;case"invalid_union":return"";case"invalid_element":return`${d.origin} `;default:return``}}})()}}function eR(){return{localeError:(()=>{let a={string:{unit:"\xe0mi",verb:"n\xed"},file:{unit:"bytes",verb:"n\xed"},array:{unit:"nkan",verb:"n\xed"},set:{unit:"nkan",verb:"n\xed"}},b={regex:"r \xecb\xe1wl\xe9",email:"\xe0d\xedrs\xec \xecml\xec",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xe0k\xf3k\xf2 ISO",date:"j ISO",time:"\xe0k\xf3k\xf2 ISO",duration:"\xe0k\xf3k\xf2 t\xf3 p\xe9 ISO",ipv4:"\xe0d\xedrs\xec IPv4",ipv6:"\xe0d\xedrs\xec IPv6",cidrv4:"\xe0gb\xe8gb\xe8 IPv4",cidrv6:"\xe0gb\xe8gb\xe8 IPv6",base64:"r t\xed a k n\xed base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb\xe0 E.164",jwt:"JWT",template_literal:"r \xecb\xe1wl\xe9"},c={nan:"NaN",number:"nmb\xe0",array:"akop"};return d=>{switch(d.code){case"invalid_type":{let a=c[d.expected]??d.expected,b=au(d.input),e=c[b]??b;if(/^[A-Z]/.test(d.expected))return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi instanceof ${d.expected}, \xe0m a r\xed ${e}`;return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${a}, \xe0m a r\xed ${e}`}case"invalid_value":if(1===d.values.length)return`\xccb\xe1wl\xe9 a\xece: a n\xed l\xe1ti fi ${ad(d.values[0])}`;return`\xc0\xe0y\xe0n a\xece: yan kan l\xe1ra ${B(d.values,"|")}`;case"too_big":{let b=d.inclusive?"<=":"<",c=a[d.origin]??null;if(c)return`T\xf3 p j\xf9: a n\xed l\xe1ti j p\xe9 ${d.origin??"iye"} ${c.verb} ${b}${d.maximum} ${c.unit}`;return`T\xf3 p j\xf9: a n\xed l\xe1ti j ${b}${d.maximum}`}case"too_small":{let b=d.inclusive?">=":">",c=a[d.origin]??null;if(c)return`K\xe9r\xe9 ju: a n\xed l\xe1ti j p\xe9 ${d.origin} ${c.verb} ${b}${d.minimum} ${c.unit}`;return`K\xe9r\xe9 ju: a n\xed l\xe1ti j ${b}${d.minimum}`}case"invalid_format":if("starts_with"===d.format)return`r a\xece: gbd br pl\xfa "${d.prefix}"`;if("ends_with"===d.format)return`r a\xece: gbd par\xed pl\xfa "${d.suffix}"`;if("includes"===d.format)return`r a\xece: gbd n\xed "${d.includes}"`;if("regex"===d.format)return`r a\xece: gbd b\xe1 \xe0pr mu ${d.pattern}`;return`A\xece: ${b[d.format]??d.format}`;case"not_multiple_of":return`Nmb\xe0 a\xece: gbd j \xe8y\xe0 p\xedp\xedn ti ${d.divisor}`;case"unrecognized_keys":return`Bt\xecn\xec \xe0\xecm: ${B(d.keys,", ")}`;case"invalid_key":return`Bt\xecn\xec a\xece n\xedn\xfa ${d.origin}`;case"invalid_union":default:return"\xccb\xe1wl\xe9 a\xece";case"invalid_element":return`Iye a\xece n\xedn\xfa ${d.origin}`}}})()}}let eS=Symbol("ZodOutput"),eT=Symbol("ZodInput");class eU{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];return this._map.set(a,c),c&&"object"==typeof c&&"id"in c&&this._idmap.set(c.id,a),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}function eV(){return new eU}(d=globalThis).__zod_globalRegistry??(d.__zod_globalRegistry=eV());let eW=globalThis.__zod_globalRegistry;function eX(a,b){return new a({type:"string",...ab(b)})}function eY(a,b){return new a({type:"string",coerce:!0,...ab(b)})}function eZ(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...ab(b)})}function e$(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...ab(b)})}function e_(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,...ab(b)})}function e0(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ab(b)})}function e1(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ab(b)})}function e2(a,b){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ab(b)})}function e3(a,b){return new a({type:"string",format:"url",check:"string_format",abort:!1,...ab(b)})}function e4(a,b){return new a({type:"string",format:"emoji",check:"string_format",abort:!1,...ab(b)})}function e5(a,b){return new a({type:"string",format:"nanoid",check:"string_format",abort:!1,...ab(b)})}function e6(a,b){return new a({type:"string",format:"cuid",check:"string_format",abort:!1,...ab(b)})}function e7(a,b){return new a({type:"string",format:"cuid2",check:"string_format",abort:!1,...ab(b)})}function e8(a,b){return new a({type:"string",format:"ulid",check:"string_format",abort:!1,...ab(b)})}function e9(a,b){return new a({type:"string",format:"xid",check:"string_format",abort:!1,...ab(b)})}function fa(a,b){return new a({type:"string",format:"ksuid",check:"string_format",abort:!1,...ab(b)})}function fb(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...ab(b)})}function fc(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...ab(b)})}function fd(a,b){return new a({type:"string",format:"mac",check:"string_format",abort:!1,...ab(b)})}function fe(a,b){return new a({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ab(b)})}function ff(a,b){return new a({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ab(b)})}function fg(a,b){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...ab(b)})}function fh(a,b){return new a({type:"string",format:"base64url",check:"string_format",abort:!1,...ab(b)})}function fi(a,b){return new a({type:"string",format:"e164",check:"string_format",abort:!1,...ab(b)})}function fj(a,b){return new a({type:"string",format:"jwt",check:"string_format",abort:!1,...ab(b)})}let fk={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function fl(a,b){return new a({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ab(b)})}function fm(a,b){return new a({type:"string",format:"date",check:"string_format",...ab(b)})}function fn(a,b){return new a({type:"string",format:"time",check:"string_format",precision:null,...ab(b)})}function fo(a,b){return new a({type:"string",format:"duration",check:"string_format",...ab(b)})}function fp(a,b){return new a({type:"number",checks:[],...ab(b)})}function fq(a,b){return new a({type:"number",coerce:!0,checks:[],...ab(b)})}function fr(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"safeint",...ab(b)})}function fs(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float32",...ab(b)})}function ft(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"float64",...ab(b)})}function fu(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"int32",...ab(b)})}function fv(a,b){return new a({type:"number",check:"number_format",abort:!1,format:"uint32",...ab(b)})}function fw(a,b){return new a({type:"boolean",...ab(b)})}function fx(a,b){return new a({type:"boolean",coerce:!0,...ab(b)})}function fy(a,b){return new a({type:"bigint",...ab(b)})}function fz(a,b){return new a({type:"bigint",coerce:!0,...ab(b)})}function fA(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...ab(b)})}function fB(a,b){return new a({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...ab(b)})}function fC(a,b){return new a({type:"symbol",...ab(b)})}function fD(a,b){return new a({type:"undefined",...ab(b)})}function fE(a,b){return new a({type:"null",...ab(b)})}function fF(a){return new a({type:"any"})}function fG(a){return new a({type:"unknown"})}function fH(a,b){return new a({type:"never",...ab(b)})}function fI(a,b){return new a({type:"void",...ab(b)})}function fJ(a,b){return new a({type:"date",...ab(b)})}function fK(a,b){return new a({type:"date",coerce:!0,...ab(b)})}function fL(a,b){return new a({type:"nan",...ab(b)})}function fM(a,b){return new b8({check:"less_than",...ab(b),value:a,inclusive:!1})}function fN(a,b){return new b8({check:"less_than",...ab(b),value:a,inclusive:!0})}function fO(a,b){return new b9({check:"greater_than",...ab(b),value:a,inclusive:!1})}function fP(a,b){return new b9({check:"greater_than",...ab(b),value:a,inclusive:!0})}function fQ(a){return fO(0,a)}function fR(a){return fM(0,a)}function fS(a){return fN(0,a)}function fT(a){return fP(0,a)}function fU(a,b){return new ca({check:"multiple_of",...ab(b),value:a})}function fV(a,b){return new cd({check:"max_size",...ab(b),maximum:a})}function fW(a,b){return new ce({check:"min_size",...ab(b),minimum:a})}function fX(a,b){return new cf({check:"size_equals",...ab(b),size:a})}function fY(a,b){return new cg({check:"max_length",...ab(b),maximum:a})}function fZ(a,b){return new ch({check:"min_length",...ab(b),minimum:a})}function f$(a,b){return new ci({check:"length_equals",...ab(b),length:a})}function f_(a,b){return new ck({check:"string_format",format:"regex",...ab(b),pattern:a})}function f0(a){return new cl({check:"string_format",format:"lowercase",...ab(a)})}function f1(a){return new cm({check:"string_format",format:"uppercase",...ab(a)})}function f2(a,b){return new cn({check:"string_format",format:"includes",...ab(b),includes:a})}function f3(a,b){return new co({check:"string_format",format:"starts_with",...ab(b),prefix:a})}function f4(a,b){return new cp({check:"string_format",format:"ends_with",...ab(b),suffix:a})}function f5(a,b,c){return new cr({check:"property",property:a,schema:b,...ab(c)})}function f6(a,b){return new cs({check:"mime_type",mime:a,...ab(b)})}function f7(a){return new ct({check:"overwrite",tx:a})}function f8(a){return f7(b=>b.normalize(a))}function f9(){return f7(a=>a.trim())}function ga(){return f7(a=>a.toLowerCase())}function gb(){return f7(a=>a.toUpperCase())}function gc(){return f7(a=>R(a))}function gd(a,b,c){return new a({type:"array",element:b,...ab(c)})}function ge(a,b,c){return new a({type:"union",options:b,...ab(c)})}function gf(a,b,c){return new a({type:"union",options:b,inclusive:!1,...ab(c)})}function gg(a,b,c,d){return new a({type:"union",options:c,discriminator:b,...ab(d)})}function gh(a,b,c){return new a({type:"intersection",left:b,right:c})}function gi(a,b,c,d){let e=c instanceof cw,f=e?d:c;return new a({type:"tuple",items:b,rest:e?c:null,...ab(f)})}function gj(a,b,c,d){return new a({type:"record",keyType:b,valueType:c,...ab(d)})}function gk(a,b,c,d){return new a({type:"map",keyType:b,valueType:c,...ab(d)})}function gl(a,b,c){return new a({type:"set",valueType:b,...ab(c)})}function gm(a,b,c){return new a({type:"enum",entries:Array.isArray(b)?Object.fromEntries(b.map(a=>[a,a])):b,...ab(c)})}function gn(a,b,c){return new a({type:"enum",entries:b,...ab(c)})}function go(a,b,c){return new a({type:"literal",values:Array.isArray(b)?b:[b],...ab(c)})}function gp(a,b){return new a({type:"file",...ab(b)})}function gq(a,b){return new a({type:"transform",transform:b})}function gr(a,b){return new a({type:"optional",innerType:b})}function gs(a,b){return new a({type:"nullable",innerType:b})}function gt(a,b,c){return new a({type:"default",innerType:b,get defaultValue(){return"function"==typeof c?c():W(c)}})}function gu(a,b,c){return new a({type:"nonoptional",innerType:b,...ab(c)})}function gv(a,b){return new a({type:"success",innerType:b})}function gw(a,b,c){return new a({type:"catch",innerType:b,catchValue:"function"==typeof c?c:()=>c})}function gx(a,b,c){return new a({type:"pipe",in:b,out:c})}function gy(a,b){return new a({type:"readonly",innerType:b})}function gz(a,b,c){return new a({type:"template_literal",parts:b,...ab(c)})}function gA(a,b){return new a({type:"lazy",getter:b})}function gB(a,b){return new a({type:"promise",innerType:b})}function gC(a,b,c){let d=ab(c);return d.abort??(d.abort=!0),new a({type:"custom",check:"custom",fn:b,...d})}function gD(a,b,c){return new a({type:"custom",check:"custom",fn:b,...ab(c)})}function gE(a){let b=gF(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(av(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(av(a)))},a(c.value,c)));return b}function gF(a,b){let c=new b6({check:"custom",...ab(b)});return c._zod.check=a,c}function gG(a){let b=new b6({check:"describe"});return b._zod.onattach=[b=>{let c=eW.get(b)??{};eW.add(b,{...c,description:a})}],b._zod.check=()=>{},b}function gH(a){let b=new b6({check:"meta"});return b._zod.onattach=[b=>{let c=eW.get(b)??{};eW.add(b,{...c,...a})}],b._zod.check=()=>{},b}function gI(a,b){let c=ab(b),d=c.truthy??["true","1","yes","on","y","enabled"],e=c.falsy??["false","0","no","off","n","disabled"];"sensitive"!==c.case&&(d=d.map(a=>"string"==typeof a?a.toLowerCase():a),e=e.map(a=>"string"==typeof a?a.toLowerCase():a));let f=new Set(d),g=new Set(e),h=a.Codec??dQ,i=a.Boolean??c1,j=new h({type:"pipe",in:new(a.String??cx)({type:"string",error:c.error}),out:new i({type:"boolean",error:c.error}),transform:(a,b)=>{let d=a;return"sensitive"!==c.case&&(d=d.toLowerCase()),!!f.has(d)||!g.has(d)&&(b.issues.push({code:"invalid_value",expected:"stringbool",values:[...f,...g],input:b.value,inst:j,continue:!1}),{})},reverseTransform:(a,b)=>!0===a?d[0]||"true":e[0]||"false",error:c.error});return j}function gJ(a,b,c,d={}){let e=ab(d),f={...ab(d),check:"string_format",type:"string",format:b,fn:"function"==typeof c?c:a=>c.test(a),...e};return c instanceof RegExp&&(f.pattern=c),new a(f)}function gK(a){let b=a?.target??"draft-2020-12";return"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),{processors:a.processors??{},metadataRegistry:a?.metadata??eW,target:b,unrepresentable:a?.unrepresentable??"throw",override:a?.override??(()=>{}),io:a?.io??"output",counter:0,seen:new Map,cycles:a?.cycles??"ref",reused:a?.reused??"inline",external:a?.external??void 0}}function gL(a,b,c={path:[],schemaPath:[]}){var d;let e=a._zod.def,f=b.seen.get(a);if(f)return f.count++,c.schemaPath.includes(a)&&(f.cycle=c.path),f.schema;let g={schema:{},count:1,cycle:void 0,path:c.path};b.seen.set(a,g);let h=a._zod.toJSONSchema?.();if(h)g.schema=h;else{let d={...c,schemaPath:[...c.schemaPath,a],path:c.path};if(a._zod.processJSONSchema)a._zod.processJSONSchema(b,g.schema,d);else{let c=g.schema,f=b.processors[e.type];if(!f)throw Error(`[toJSONSchema]: Non-representable type encountered: ${e.type}`);f(a,b,c,d)}let f=a._zod.parent;f&&(g.ref||(g.ref=f),gL(f,b,d),b.seen.get(f).isParent=!0)}let i=b.metadataRegistry.get(a);return i&&Object.assign(g.schema,i),"input"===b.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;if("transform"===e.type)return!0;if("array"===e.type)return a(e.element,d);if("set"===e.type)return a(e.valueType,d);if("lazy"===e.type)return a(e.getter(),d);if("promise"===e.type||"optional"===e.type||"nonoptional"===e.type||"nullable"===e.type||"readonly"===e.type||"default"===e.type||"prefault"===e.type)return a(e.innerType,d);if("intersection"===e.type)return a(e.left,d)||a(e.right,d);if("record"===e.type||"map"===e.type)return a(e.keyType,d)||a(e.valueType,d);if("pipe"===e.type)return a(e.in,d)||a(e.out,d);if("object"===e.type){for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1}if("union"===e.type){for(let b of e.options)if(a(b,d))return!0;return!1}if("tuple"===e.type){for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0}return!1}(a)&&(delete g.schema.examples,delete g.schema.default),"input"===b.io&&g.schema._prefault&&((d=g.schema).default??(d.default=g.schema._prefault)),delete g.schema._prefault,b.seen.get(a).schema}function gM(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=new Map;for(let b of a.seen.entries()){let c=a.metadataRegistry.get(b[0])?.id;if(c){let a=d.get(c);if(a&&a!==b[0])throw Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);d.set(c,b[0])}}let e=b=>{if(b[1].schema.$ref)return;let d=b[1],{ref:e,defId:f}=(b=>{let d="draft-2020-12"===a.target?"$defs":"definitions";if(a.external){let c=a.external.registry.get(b[0])?.id,e=a.external.uri??(a=>a);if(c)return{ref:e(c)};let f=b[1].defId??b[1].schema.id??`schema${a.counter++}`;return b[1].defId=f,{defId:f,ref:`${e("__shared")}#/${d}/${f}`}}if(b[1]===c)return{ref:"#"};let e=`#/${d}/`,f=b[1].schema.id??`__schema${a.counter++}`;return{defId:f,ref:e+f}})(b);d.def={...d.schema},f&&(d.defId=f);let g=d.schema;for(let a in g)delete g[a];g.$ref=e};if("throw"===a.cycles)for(let b of a.seen.entries()){let a=b[1];if(a.cycle)throw Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of a.seen.entries()){let d=c[1];if(b===c[0]){e(c);continue}if(a.external){let d=a.external.registry.get(c[0])?.id;if(b!==c[0]&&d){e(c);continue}}if(a.metadataRegistry.get(c[0])?.id||d.cycle||d.count>1&&"ref"===a.reused){e(c);continue}}}function gN(a,b){let c=a.seen.get(b);if(!c)throw Error("Unprocessed schema. This is a bug in Zod.");let d=b=>{let c=a.seen.get(b);if(null===c.ref)return;let e=c.def??c.schema,f={...e},g=c.ref;if(c.ref=null,g){d(g);let c=a.seen.get(g),h=c.schema;if(h.$ref&&("draft-07"===a.target||"draft-04"===a.target||"openapi-3.0"===a.target)?(e.allOf=e.allOf??[],e.allOf.push(h)):Object.assign(e,h),Object.assign(e,f),b._zod.parent===g)for(let a in e)"$ref"!==a&&"allOf"!==a&&(a in f||delete e[a]);if(h.$ref&&c.def)for(let a in e)"$ref"!==a&&"allOf"!==a&&a in c.def&&JSON.stringify(e[a])===JSON.stringify(c.def[a])&&delete e[a]}let h=b._zod.parent;if(h&&h!==g){d(h);let b=a.seen.get(h);if(b?.schema.$ref&&(e.$ref=b.schema.$ref,b.def))for(let a in e)"$ref"!==a&&"allOf"!==a&&a in b.def&&JSON.stringify(e[a])===JSON.stringify(b.def[a])&&delete e[a]}a.override({zodSchema:b,jsonSchema:e,path:c.path??[]})};for(let b of[...a.seen.entries()].reverse())d(b[0]);let e={};if("draft-2020-12"===a.target?e.$schema="https://json-schema.org/draft/2020-12/schema":"draft-07"===a.target?e.$schema="http://json-schema.org/draft-07/schema#":"draft-04"===a.target?e.$schema="http://json-schema.org/draft-04/schema#":a.target,a.external?.uri){let c=a.external.registry.get(b)?.id;if(!c)throw Error("Schema is missing an `id` property");e.$id=a.external.uri(c)}Object.assign(e,c.def??c.schema);let f=a.external?.defs??{};for(let b of a.seen.entries()){let a=b[1];a.def&&a.defId&&(f[a.defId]=a.def)}a.external||Object.keys(f).length>0&&("draft-2020-12"===a.target?e.$defs=f:e.definitions=f);try{let c=JSON.parse(JSON.stringify(e));return Object.defineProperty(c,"~standard",{value:{...b["~standard"],jsonSchema:{input:gP(b,"input",a.processors),output:gP(b,"output",a.processors)}},enumerable:!1,writable:!1}),c}catch(a){throw Error("Error converting schema to JSON.")}}let gO=(a,b={})=>c=>{let d=gK({...c,processors:b});return gL(a,d),gM(d,a),gN(d,a)},gP=(a,b,c={})=>d=>{let{libraryOptions:e,target:f}=d??{},g=gK({...e??{},target:f,io:b,processors:c});return gL(a,g),gM(g,a),gN(g,a)},gQ={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},gR=(a,b,c,d)=>{c.type="string";let{minimum:e,maximum:f,format:g,patterns:h,contentEncoding:i}=a._zod.bag;if("number"==typeof e&&(c.minLength=e),"number"==typeof f&&(c.maxLength=f),g&&(c.format=gQ[g]??g,""===c.format&&delete c.format,"time"===g&&delete c.format),i&&(c.contentEncoding=i),h&&h.size>0){let a=[...h];1===a.length?c.pattern=a[0].source:a.length>1&&(c.allOf=[...a.map(a=>({..."draft-07"===b.target||"draft-04"===b.target||"openapi-3.0"===b.target?{type:"string"}:{},pattern:a.source}))])}},gS=(a,b,c,d)=>{let{minimum:e,maximum:f,format:g,multipleOf:h,exclusiveMaximum:i,exclusiveMinimum:j}=a._zod.bag;"string"==typeof g&&g.includes("int")?c.type="integer":c.type="number","number"==typeof j&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.minimum=j,c.exclusiveMinimum=!0):c.exclusiveMinimum=j),"number"==typeof e&&(c.minimum=e,"number"==typeof j&&"draft-04"!==b.target&&(j>=e?delete c.minimum:delete c.exclusiveMinimum)),"number"==typeof i&&("draft-04"===b.target||"openapi-3.0"===b.target?(c.maximum=i,c.exclusiveMaximum=!0):c.exclusiveMaximum=i),"number"==typeof f&&(c.maximum=f,"number"==typeof i&&"draft-04"!==b.target&&(i<=f?delete c.maximum:delete c.exclusiveMaximum)),"number"==typeof h&&(c.multipleOf=h)},gT=(a,b,c,d)=>{c.type="boolean"},gU=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema")},gV=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema")},gW=(a,b,c,d)=>{"openapi-3.0"===b.target?(c.type="string",c.nullable=!0,c.enum=[null]):c.type="null"},gX=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema")},gY=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Void cannot be represented in JSON Schema")},gZ=(a,b,c,d)=>{c.not={}},g$=(a,b,c,d)=>{},g_=(a,b,c,d)=>{},g0=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Date cannot be represented in JSON Schema")},g1=(a,b,c,d)=>{let e=A(a._zod.def.entries);e.every(a=>"number"==typeof a)&&(c.type="number"),e.every(a=>"string"==typeof a)&&(c.type="string"),c.enum=e},g2=(a,b,c,d)=>{let e=a._zod.def,f=[];for(let a of e.values)if(void 0===a){if("throw"===b.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof a)if("throw"===b.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else f.push(Number(a));else f.push(a);if(0===f.length);else if(1===f.length){let a=f[0];c.type=null===a?"null":typeof a,"draft-04"===b.target||"openapi-3.0"===b.target?c.enum=[a]:c.const=a}else f.every(a=>"number"==typeof a)&&(c.type="number"),f.every(a=>"string"==typeof a)&&(c.type="string"),f.every(a=>"boolean"==typeof a)&&(c.type="boolean"),f.every(a=>null===a)&&(c.type="null"),c.enum=f},g3=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("NaN cannot be represented in JSON Schema")},g4=(a,b,c,d)=>{let e=a._zod.pattern;if(!e)throw Error("Pattern not found in template literal");c.type="string",c.pattern=e.source},g5=(a,b,c,d)=>{let e={type:"string",format:"binary",contentEncoding:"binary"},{minimum:f,maximum:g,mime:h}=a._zod.bag;void 0!==f&&(e.minLength=f),void 0!==g&&(e.maxLength=g),h?1===h.length?(e.contentMediaType=h[0],Object.assign(c,e)):(Object.assign(c,e),c.anyOf=h.map(a=>({contentMediaType:a}))):Object.assign(c,e)},g6=(a,b,c,d)=>{c.type="boolean"},g7=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema")},g8=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")},g9=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema")},ha=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Map cannot be represented in JSON Schema")},hb=(a,b,c,d)=>{if("throw"===b.unrepresentable)throw Error("Set cannot be represented in JSON Schema")},hc=(a,b,c,d)=>{let e=a._zod.def,{minimum:f,maximum:g}=a._zod.bag;"number"==typeof f&&(c.minItems=f),"number"==typeof g&&(c.maxItems=g),c.type="array",c.items=gL(e.element,b,{...d,path:[...d.path,"items"]})},hd=(a,b,c,d)=>{let e=a._zod.def;c.type="object",c.properties={};let f=e.shape;for(let a in f)c.properties[a]=gL(f[a],b,{...d,path:[...d.path,"properties",a]});let g=new Set([...new Set(Object.keys(f))].filter(a=>{let c=e.shape[a]._zod;return"input"===b.io?void 0===c.optin:void 0===c.optout}));g.size>0&&(c.required=Array.from(g)),e.catchall?._zod.def.type==="never"?c.additionalProperties=!1:e.catchall?e.catchall&&(c.additionalProperties=gL(e.catchall,b,{...d,path:[...d.path,"additionalProperties"]})):"output"===b.io&&(c.additionalProperties=!1)},he=(a,b,c,d)=>{let e=a._zod.def,f=!1===e.inclusive,g=e.options.map((a,c)=>gL(a,b,{...d,path:[...d.path,f?"oneOf":"anyOf",c]}));f?c.oneOf=g:c.anyOf=g},hf=(a,b,c,d)=>{let e=a._zod.def,f=gL(e.left,b,{...d,path:[...d.path,"allOf",0]}),g=gL(e.right,b,{...d,path:[...d.path,"allOf",1]}),h=a=>"allOf"in a&&1===Object.keys(a).length;c.allOf=[...h(f)?f.allOf:[f],...h(g)?g.allOf:[g]]},hg=(a,b,c,d)=>{let e=a._zod.def;c.type="array";let f="draft-2020-12"===b.target?"prefixItems":"items",g="draft-2020-12"===b.target||"openapi-3.0"===b.target?"items":"additionalItems",h=e.items.map((a,c)=>gL(a,b,{...d,path:[...d.path,f,c]})),i=e.rest?gL(e.rest,b,{...d,path:[...d.path,g,..."openapi-3.0"===b.target?[e.items.length]:[]]}):null;"draft-2020-12"===b.target?(c.prefixItems=h,i&&(c.items=i)):"openapi-3.0"===b.target?(c.items={anyOf:h},i&&c.items.anyOf.push(i),c.minItems=h.length,i||(c.maxItems=h.length)):(c.items=h,i&&(c.additionalItems=i));let{minimum:j,maximum:k}=a._zod.bag;"number"==typeof j&&(c.minItems=j),"number"==typeof k&&(c.maxItems=k)},hh=(a,b,c,d)=>{let e=a._zod.def;c.type="object";let f=e.keyType,g=f._zod.bag,h=g?.patterns;if("loose"===e.mode&&h&&h.size>0){let a=gL(e.valueType,b,{...d,path:[...d.path,"patternProperties","*"]});for(let b of(c.patternProperties={},h))c.patternProperties[b.source]=a}else("draft-07"===b.target||"draft-2020-12"===b.target)&&(c.propertyNames=gL(e.keyType,b,{...d,path:[...d.path,"propertyNames"]})),c.additionalProperties=gL(e.valueType,b,{...d,path:[...d.path,"additionalProperties"]});let i=f._zod.values;if(i){let a=[...i].filter(a=>"string"==typeof a||"number"==typeof a);a.length>0&&(c.required=a)}},hi=(a,b,c,d)=>{let e=a._zod.def,f=gL(e.innerType,b,d),g=b.seen.get(a);"openapi-3.0"===b.target?(g.ref=e.innerType,c.nullable=!0):c.anyOf=[f,{type:"null"}]},hj=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType},hk=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.default=JSON.parse(JSON.stringify(e.defaultValue))},hl=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType,"input"===b.io&&(c._prefault=JSON.parse(JSON.stringify(e.defaultValue)))},hm=(a,b,c,d)=>{let e,f=a._zod.def;gL(f.innerType,b,d),b.seen.get(a).ref=f.innerType;try{e=f.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}c.default=e},hn=(a,b,c,d)=>{let e=a._zod.def,f="input"===b.io?"transform"===e.in._zod.def.type?e.out:e.in:e.out;gL(f,b,d),b.seen.get(a).ref=f},ho=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType,c.readOnly=!0},hp=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType},hq=(a,b,c,d)=>{let e=a._zod.def;gL(e.innerType,b,d),b.seen.get(a).ref=e.innerType},hr=(a,b,c,d)=>{let e=a._zod.innerType;gL(e,b,d),b.seen.get(a).ref=e},hs={string:gR,number:gS,boolean:gT,bigint:gU,symbol:gV,null:gW,undefined:gX,void:gY,never:gZ,any:g$,unknown:g_,date:g0,enum:g1,literal:g2,nan:g3,template_literal:g4,file:g5,success:g6,custom:g7,function:g8,transform:g9,map:ha,set:hb,array:hc,object:hd,union:he,intersection:hf,tuple:hg,record:hh,nullable:hi,nonoptional:hj,default:hk,prefault:hl,catch:hm,pipe:hn,readonly:ho,promise:hp,optional:hq,lazy:hr};function ht(a,b){if("_idmap"in a){let c=gK({...b,processors:hs}),d={};for(let b of a._idmap.entries()){let[a,d]=b;gL(d,c)}let e={};for(let f of(c.external={registry:a,uri:b?.uri,defs:d},a._idmap.entries())){let[a,b]=f;gM(c,b),e[a]=gN(c,b)}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=gK({...b,processors:hs});return gL(a,c),gM(c,a),gN(c,a)}class hu{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(a){this.ctx.counter=a}get seen(){return this.ctx.seen}constructor(a){let b=a?.target??"draft-2020-12";"draft-4"===b&&(b="draft-04"),"draft-7"===b&&(b="draft-07"),this.ctx=gK({processors:hs,target:b,...a?.metadata&&{metadata:a.metadata},...a?.unrepresentable&&{unrepresentable:a.unrepresentable},...a?.override&&{override:a.override},...a?.io&&{io:a.io}})}process(a,b={path:[],schemaPath:[]}){return gL(a,this.ctx,b)}emit(a,b){b&&(b.cycles&&(this.ctx.cycles=b.cycles),b.reused&&(this.ctx.reused=b.reused),b.external&&(this.ctx.external=b.external)),gM(this.ctx,a);let{"~standard":c,...d}=gN(this.ctx,a);return d}}let hv=p("ZodISODateTime",(a,b)=>{cK.init(a,b),hW.init(a,b)});function hw(a){return fl(hv,a)}let hx=p("ZodISODate",(a,b)=>{cL.init(a,b),hW.init(a,b)});function hy(a){return fm(hx,a)}let hz=p("ZodISOTime",(a,b)=>{cM.init(a,b),hW.init(a,b)});function hA(a){return fn(hz,a)}let hB=p("ZodISODuration",(a,b)=>{cN.init(a,b),hW.init(a,b)});function hC(a){return fo(hB,a)}let hD=(a,b)=>{aF.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>aI(a,b)},flatten:{value:b=>aH(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,C,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,C,2)}},isEmpty:{get:()=>0===a.issues.length}})},hE=p("ZodError",hD),hF=p("ZodError",hD,{Parent:Error}),hG=aM(hF),hH=aO(hF),hI=aQ(hF),hJ=aS(hF),hK=aU(hF),hL=aW(hF),hM=aY(hF),hN=a$(hF),hO=a0(hF),hP=a2(hF),hQ=a4(hF),hR=a6(hF),hS=p("ZodType",(a,b)=>(cw.init(a,b),Object.assign(a["~standard"],{jsonSchema:{input:gP(a,"input"),output:gP(a,"output")}}),a.toJSONSchema=gO(a,{}),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(L(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),a.with=a.check,a.clone=(b,c)=>aa(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>hG(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>hI(a,b,c),a.parseAsync=async(b,c)=>hH(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>hJ(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>hK(a,b,c),a.decode=(b,c)=>hL(a,b,c),a.encodeAsync=async(b,c)=>hM(a,b,c),a.decodeAsync=async(b,c)=>hN(a,b,c),a.safeEncode=(b,c)=>hO(a,b,c),a.safeDecode=(b,c)=>hP(a,b,c),a.safeEncodeAsync=async(b,c)=>hQ(a,b,c),a.safeDecodeAsync=async(b,c)=>hR(a,b,c),a.refine=(b,c)=>a.check(kj(b,c)),a.superRefine=b=>a.check(gE(b)),a.overwrite=b=>a.check(f7(b)),a.optional=()=>jM(a),a.exactOptional=()=>jO(a),a.nullable=()=>jQ(a),a.nullish=()=>jM(jQ(a)),a.nonoptional=b=>jX(a,b),a.array=()=>je(a),a.or=b=>jl([a,b]),a.and=b=>jr(a,b),a.transform=b=>j3(a,jK(b)),a.default=b=>jT(a,b),a.prefault=b=>jV(a,b),a.catch=b=>j_(a,b),a.pipe=b=>j3(a,b),a.readonly=()=>j7(a),a.describe=b=>{let c=a.clone();return eW.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>eW.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return eW.get(a);let c=a.clone();return eW.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a.apply=b=>b(a),a)),hT=p("_ZodString",(a,b)=>{cx.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gR(a,b,c,d);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(f_(...b)),a.includes=(...b)=>a.check(f2(...b)),a.startsWith=(...b)=>a.check(f3(...b)),a.endsWith=(...b)=>a.check(f4(...b)),a.min=(...b)=>a.check(fZ(...b)),a.max=(...b)=>a.check(fY(...b)),a.length=(...b)=>a.check(f$(...b)),a.nonempty=(...b)=>a.check(fZ(1,...b)),a.lowercase=b=>a.check(f0(b)),a.uppercase=b=>a.check(f1(b)),a.trim=()=>a.check(f9()),a.normalize=(...b)=>a.check(f8(...b)),a.toLowerCase=()=>a.check(ga()),a.toUpperCase=()=>a.check(gb()),a.slugify=()=>a.check(gc())}),hU=p("ZodString",(a,b)=>{cx.init(a,b),hT.init(a,b),a.email=b=>a.check(eZ(hX,b)),a.url=b=>a.check(e3(h4,b)),a.jwt=b=>a.check(fj(iD,b)),a.emoji=b=>a.check(e4(h7,b)),a.guid=b=>a.check(e$(hZ,b)),a.uuid=b=>a.check(e_(h_,b)),a.uuidv4=b=>a.check(e0(h_,b)),a.uuidv6=b=>a.check(e1(h_,b)),a.uuidv7=b=>a.check(e2(h_,b)),a.nanoid=b=>a.check(e5(h9,b)),a.guid=b=>a.check(e$(hZ,b)),a.cuid=b=>a.check(e6(ib,b)),a.cuid2=b=>a.check(e7(id,b)),a.ulid=b=>a.check(e8(ig,b)),a.base64=b=>a.check(fg(ix,b)),a.base64url=b=>a.check(fh(iz,b)),a.xid=b=>a.check(e9(ii,b)),a.ksuid=b=>a.check(fa(ik,b)),a.ipv4=b=>a.check(fb(im,b)),a.ipv6=b=>a.check(fc(ir,b)),a.cidrv4=b=>a.check(fe(it,b)),a.cidrv6=b=>a.check(ff(iv,b)),a.e164=b=>a.check(fi(iB,b)),a.datetime=b=>a.check(hw(b)),a.date=b=>a.check(hy(b)),a.time=b=>a.check(hA(b)),a.duration=b=>a.check(hC(b))});function hV(a){return eX(hU,a)}let hW=p("ZodStringFormat",(a,b)=>{cy.init(a,b),hT.init(a,b)}),hX=p("ZodEmail",(a,b)=>{cB.init(a,b),hW.init(a,b)});function hY(a){return eZ(hX,a)}let hZ=p("ZodGUID",(a,b)=>{cz.init(a,b),hW.init(a,b)});function h$(a){return e$(hZ,a)}let h_=p("ZodUUID",(a,b)=>{cA.init(a,b),hW.init(a,b)});function h0(a){return e_(h_,a)}function h1(a){return e0(h_,a)}function h2(a){return e1(h_,a)}function h3(a){return e2(h_,a)}let h4=p("ZodURL",(a,b)=>{cC.init(a,b),hW.init(a,b)});function h5(a){return e3(h4,a)}function h6(a){return e3(h4,{protocol:/^https?$/,hostname:bA,...ab(a)})}let h7=p("ZodEmoji",(a,b)=>{cD.init(a,b),hW.init(a,b)});function h8(a){return e4(h7,a)}let h9=p("ZodNanoID",(a,b)=>{cE.init(a,b),hW.init(a,b)});function ia(a){return e5(h9,a)}let ib=p("ZodCUID",(a,b)=>{cF.init(a,b),hW.init(a,b)});function ic(a){return e6(ib,a)}let id=p("ZodCUID2",(a,b)=>{cG.init(a,b),hW.init(a,b)});function ie(a){return e7(id,a)}let ig=p("ZodULID",(a,b)=>{cH.init(a,b),hW.init(a,b)});function ih(a){return e8(ig,a)}let ii=p("ZodXID",(a,b)=>{cI.init(a,b),hW.init(a,b)});function ij(a){return e9(ii,a)}let ik=p("ZodKSUID",(a,b)=>{cJ.init(a,b),hW.init(a,b)});function il(a){return fa(ik,a)}let im=p("ZodIPv4",(a,b)=>{cO.init(a,b),hW.init(a,b)});function io(a){return fb(im,a)}let ip=p("ZodMAC",(a,b)=>{cQ.init(a,b),hW.init(a,b)});function iq(a){return fd(ip,a)}let ir=p("ZodIPv6",(a,b)=>{cP.init(a,b),hW.init(a,b)});function is(a){return fc(ir,a)}let it=p("ZodCIDRv4",(a,b)=>{cR.init(a,b),hW.init(a,b)});function iu(a){return fe(it,a)}let iv=p("ZodCIDRv6",(a,b)=>{cS.init(a,b),hW.init(a,b)});function iw(a){return ff(iv,a)}let ix=p("ZodBase64",(a,b)=>{cU.init(a,b),hW.init(a,b)});function iy(a){return fg(ix,a)}let iz=p("ZodBase64URL",(a,b)=>{cW.init(a,b),hW.init(a,b)});function iA(a){return fh(iz,a)}let iB=p("ZodE164",(a,b)=>{cX.init(a,b),hW.init(a,b)});function iC(a){return fi(iB,a)}let iD=p("ZodJWT",(a,b)=>{cZ.init(a,b),hW.init(a,b)});function iE(a){return fj(iD,a)}let iF=p("ZodCustomStringFormat",(a,b)=>{c$.init(a,b),hW.init(a,b)});function iG(a,b,c={}){return gJ(iF,a,b,c)}function iH(a){return gJ(iF,"hostname",bz,a)}function iI(a){return gJ(iF,"hex",bQ,a)}function iJ(a,b){let c=b?.enc??"hex",d=`${a}_${c}`,e=g[d];if(!e)throw Error(`Unrecognized hash format: ${d}`);return gJ(iF,d,e,b)}let iK=p("ZodNumber",(a,b)=>{c_.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gS(a,b,c,d),a.gt=(b,c)=>a.check(fO(b,c)),a.gte=(b,c)=>a.check(fP(b,c)),a.min=(b,c)=>a.check(fP(b,c)),a.lt=(b,c)=>a.check(fM(b,c)),a.lte=(b,c)=>a.check(fN(b,c)),a.max=(b,c)=>a.check(fN(b,c)),a.int=b=>a.check(iN(b)),a.safe=b=>a.check(iN(b)),a.positive=b=>a.check(fO(0,b)),a.nonnegative=b=>a.check(fP(0,b)),a.negative=b=>a.check(fM(0,b)),a.nonpositive=b=>a.check(fN(0,b)),a.multipleOf=(b,c)=>a.check(fU(b,c)),a.step=(b,c)=>a.check(fU(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function iL(a){return fp(iK,a)}let iM=p("ZodNumberFormat",(a,b)=>{c0.init(a,b),iK.init(a,b)});function iN(a){return fr(iM,a)}function iO(a){return fs(iM,a)}function iP(a){return ft(iM,a)}function iQ(a){return fu(iM,a)}function iR(a){return fv(iM,a)}let iS=p("ZodBoolean",(a,b)=>{c1.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gT(a,b,c,d)});function iT(a){return fw(iS,a)}let iU=p("ZodBigInt",(a,b)=>{c2.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gU(a,b,c,d),a.gte=(b,c)=>a.check(fP(b,c)),a.min=(b,c)=>a.check(fP(b,c)),a.gt=(b,c)=>a.check(fO(b,c)),a.gte=(b,c)=>a.check(fP(b,c)),a.min=(b,c)=>a.check(fP(b,c)),a.lt=(b,c)=>a.check(fM(b,c)),a.lte=(b,c)=>a.check(fN(b,c)),a.max=(b,c)=>a.check(fN(b,c)),a.positive=b=>a.check(fO(BigInt(0),b)),a.negative=b=>a.check(fM(BigInt(0),b)),a.nonpositive=b=>a.check(fN(BigInt(0),b)),a.nonnegative=b=>a.check(fP(BigInt(0),b)),a.multipleOf=(b,c)=>a.check(fU(b,c));let c=a._zod.bag;a.minValue=c.minimum??null,a.maxValue=c.maximum??null,a.format=c.format??null});function iV(a){return fy(iU,a)}let iW=p("ZodBigIntFormat",(a,b)=>{c3.init(a,b),iU.init(a,b)});function iX(a){return fA(iW,a)}function iY(a){return fB(iW,a)}let iZ=p("ZodSymbol",(a,b)=>{c4.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gV(a,b,c,d)});function i$(a){return fC(iZ,a)}let i_=p("ZodUndefined",(a,b)=>{c5.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gX(a,b,c,d)});function i0(a){return fD(i_,a)}let i1=p("ZodNull",(a,b)=>{c6.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gW(a,b,c,d)});function i2(a){return fE(i1,a)}let i3=p("ZodAny",(a,b)=>{c7.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g$(a,b,c,d)});function i4(){return fF(i3)}let i5=p("ZodUnknown",(a,b)=>{c8.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g_(a,b,c,d)});function i6(){return fG(i5)}let i7=p("ZodNever",(a,b)=>{c9.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gZ(a,b,c,d)});function i8(a){return fH(i7,a)}let i9=p("ZodVoid",(a,b)=>{da.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>gY(a,b,c,d)});function ja(a){return fI(i9,a)}let jb=p("ZodDate",(a,b)=>{db.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g0(a,b,c,d),a.min=(b,c)=>a.check(fP(b,c)),a.max=(b,c)=>a.check(fN(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function jc(a){return fJ(jb,a)}let jd=p("ZodArray",(a,b)=>{dd.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hc(a,b,c,d),a.element=b.element,a.min=(b,c)=>a.check(fZ(b,c)),a.nonempty=b=>a.check(fZ(1,b)),a.max=(b,c)=>a.check(fY(b,c)),a.length=(b,c)=>a.check(f$(b,c)),a.unwrap=()=>a.element});function je(a,b){return gd(jd,a,b)}function jf(a){return jD(Object.keys(a._zod.def.shape))}let jg=p("ZodObject",(a,b)=>{di.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hd(a,b,c,d),I(a,"shape",()=>b.shape),a.keyof=()=>jD(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:i6()}),a.loose=()=>a.clone({...a._zod.def,catchall:i6()}),a.strict=()=>a.clone({...a._zod.def,catchall:i8()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>aj(a,b),a.safeExtend=b=>ak(a,b),a.merge=b=>al(a,b),a.pick=b=>ah(a,b),a.omit=b=>ai(a,b),a.partial=(...b)=>am(jL,a,b[0]),a.required=(...b)=>an(jW,a,b[0])});function jh(a,b){return new jg({type:"object",shape:a??{},...ab(b)})}function ji(a,b){return new jg({type:"object",shape:a,catchall:i8(),...ab(b)})}function jj(a,b){return new jg({type:"object",shape:a,catchall:i6(),...ab(b)})}let jk=p("ZodUnion",(a,b)=>{dk.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>he(a,b,c,d),a.options=b.options});function jl(a,b){return new jk({type:"union",options:a,...ab(b)})}let jm=p("ZodXor",(a,b)=>{jk.init(a,b),dm.init(a,b),a._zod.processJSONSchema=(b,c,d)=>he(a,b,c,d),a.options=b.options});function jn(a,b){return new jm({type:"union",options:a,inclusive:!1,...ab(b)})}let jo=p("ZodDiscriminatedUnion",(a,b)=>{jk.init(a,b),dn.init(a,b)});function jp(a,b,c){return new jo({type:"union",options:b,discriminator:a,...ab(c)})}let jq=p("ZodIntersection",(a,b)=>{dp.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hf(a,b,c,d)});function jr(a,b){return new jq({type:"intersection",left:a,right:b})}let js=p("ZodTuple",(a,b)=>{dr.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hg(a,b,c,d),a.rest=b=>a.clone({...a._zod.def,rest:b})});function jt(a,b,c){let d=b instanceof cw,e=d?c:b;return new js({type:"tuple",items:a,rest:d?b:null,...ab(e)})}let ju=p("ZodRecord",(a,b)=>{dt.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hh(a,b,c,d),a.keyType=b.keyType,a.valueType=b.valueType});function jv(a,b,c){return new ju({type:"record",keyType:a,valueType:b,...ab(c)})}function jw(a,b,c){let d=aa(a);return d._zod.values=void 0,new ju({type:"record",keyType:d,valueType:b,...ab(c)})}function jx(a,b,c){return new ju({type:"record",keyType:a,valueType:b,mode:"loose",...ab(c)})}let jy=p("ZodMap",(a,b)=>{du.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>ha(a,b,c,d),a.keyType=b.keyType,a.valueType=b.valueType,a.min=(...b)=>a.check(fW(...b)),a.nonempty=b=>a.check(fW(1,b)),a.max=(...b)=>a.check(fV(...b)),a.size=(...b)=>a.check(fX(...b))});function jz(a,b,c){return new jy({type:"map",keyType:a,valueType:b,...ab(c)})}let jA=p("ZodSet",(a,b)=>{dw.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hb(a,b,c,d),a.min=(...b)=>a.check(fW(...b)),a.nonempty=b=>a.check(fW(1,b)),a.max=(...b)=>a.check(fV(...b)),a.size=(...b)=>a.check(fX(...b))});function jB(a,b){return new jA({type:"set",valueType:a,...ab(b)})}let jC=p("ZodEnum",(a,b)=>{dy.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g1(a,b,c,d),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new jC({...b,checks:[],...ab(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new jC({...b,checks:[],...ab(d),entries:e})}});function jD(a,b){return new jC({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...ab(b)})}function jE(a,b){return new jC({type:"enum",entries:a,...ab(b)})}let jF=p("ZodLiteral",(a,b)=>{dz.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g2(a,b,c,d),a.values=new Set(b.values),Object.defineProperty(a,"value",{get(){if(b.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return b.values[0]}})});function jG(a,b){return new jF({type:"literal",values:Array.isArray(a)?a:[a],...ab(b)})}let jH=p("ZodFile",(a,b)=>{dA.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g5(a,b,c,d),a.min=(b,c)=>a.check(fW(b,c)),a.max=(b,c)=>a.check(fV(b,c)),a.mime=(b,c)=>a.check(f6(Array.isArray(b)?b:[b],c))});function jI(a){return gp(jH,a)}let jJ=p("ZodTransform",(a,b)=>{dB.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g9(a,b,c,d),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new s(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(av(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(av(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}});function jK(a){return new jJ({type:"transform",transform:a})}let jL=p("ZodOptional",(a,b)=>{dD.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hq(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jM(a){return new jL({type:"optional",innerType:a})}let jN=p("ZodExactOptional",(a,b)=>{dE.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hq(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jO(a){return new jN({type:"optional",innerType:a})}let jP=p("ZodNullable",(a,b)=>{dF.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hi(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jQ(a){return new jP({type:"nullable",innerType:a})}function jR(a){return jM(jQ(a))}let jS=p("ZodDefault",(a,b)=>{dG.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hk(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap});function jT(a,b){return new jS({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():W(b)}})}let jU=p("ZodPrefault",(a,b)=>{dI.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hl(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jV(a,b){return new jU({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():W(b)}})}let jW=p("ZodNonOptional",(a,b)=>{dJ.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hj(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jX(a,b){return new jW({type:"nonoptional",innerType:a,...ab(b)})}let jY=p("ZodSuccess",(a,b)=>{dL.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g6(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function jZ(a){return new jY({type:"success",innerType:a})}let j$=p("ZodCatch",(a,b)=>{dM.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hm(a,b,c,d),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap});function j_(a,b){return new j$({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})}let j0=p("ZodNaN",(a,b)=>{dN.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g3(a,b,c,d)});function j1(a){return fL(j0,a)}let j2=p("ZodPipe",(a,b)=>{dO.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hn(a,b,c,d),a.in=b.in,a.out=b.out});function j3(a,b){return new j2({type:"pipe",in:a,out:b})}let j4=p("ZodCodec",(a,b)=>{j2.init(a,b),dQ.init(a,b)});function j5(a,b,c){return new j4({type:"pipe",in:a,out:b,transform:c.decode,reverseTransform:c.encode})}let j6=p("ZodReadonly",(a,b)=>{dT.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>ho(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function j7(a){return new j6({type:"readonly",innerType:a})}let j8=p("ZodTemplateLiteral",(a,b)=>{dV.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g4(a,b,c,d)});function j9(a,b){return new j8({type:"template_literal",parts:a,...ab(b)})}let ka=p("ZodLazy",(a,b)=>{dY.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hr(a,b,c,d),a.unwrap=()=>a._zod.def.getter()});function kb(a){return new ka({type:"lazy",getter:a})}let kc=p("ZodPromise",(a,b)=>{dX.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>hp(a,b,c,d),a.unwrap=()=>a._zod.def.innerType});function kd(a){return new kc({type:"promise",innerType:a})}let ke=p("ZodFunction",(a,b)=>{dW.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g8(a,b,c,d)});function kf(a){return new ke({type:"function",input:Array.isArray(a?.input)?jt(a?.input):a?.input??je(i6()),output:a?.output??i6()})}let kg=p("ZodCustom",(a,b)=>{dZ.init(a,b),hS.init(a,b),a._zod.processJSONSchema=(b,c,d)=>g7(a,b,c,d)});function kh(a){let b=new b6({check:"custom"});return b._zod.check=a,b}function ki(a,b){return gC(kg,a??(()=>!0),b)}function kj(a,b={}){return gD(kg,a,b)}function kk(a){return gE(a)}let kl=gG,km=gH;function kn(a,b={}){let c=new kg({type:"custom",check:"custom",fn:b=>b instanceof a,abort:!0,...ab(b)});return c._zod.bag.Class=a,c._zod.check=b=>{b.value instanceof a||b.issues.push({code:"invalid_type",expected:a.name,input:b.value,inst:c,path:[...c._zod.def.path??[]]})},c}let ko=(...a)=>gI({Codec:j4,Boolean:iS,String:hU},...a);function kp(a){let b=kb(()=>jl([hV(a),iL(),iT(),i2(),je(b),jv(hV(),b)]));return b}function kq(a,b){return j3(jK(a),b)}let kr={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function ks(a){u({customError:a})}function kt(){return u().customError}e||(e={});let ku={...m,...k,iso:l},kv=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"]);function kw(a,b){if("boolean"==typeof a)return a?ku.any():ku.never();let c={version:function(a,b){let c=a.$schema;return"https://json-schema.org/draft/2020-12/schema"===c?"draft-2020-12":"http://json-schema.org/draft-07/schema#"===c?"draft-7":"http://json-schema.org/draft-04/schema#"===c?"draft-4":b??"draft-2020-12"}(a,b?.defaultTarget),defs:a.$defs||a.definitions||{},refs:new Map,processing:new Set,rootSchema:a,registry:b?.registry??eW};return function a(b,c){if("boolean"==typeof b)return b?ku.any():ku.never();let d=function b(c,d){let e;if(void 0!==c.not){if("object"==typeof c.not&&0===Object.keys(c.not).length)return ku.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if(void 0!==c.unevaluatedItems)throw Error("unevaluatedItems is not supported");if(void 0!==c.unevaluatedProperties)throw Error("unevaluatedProperties is not supported");if(void 0!==c.if||void 0!==c.then||void 0!==c.else)throw Error("Conditional schemas (if/then/else) are not supported");if(void 0!==c.dependentSchemas||void 0!==c.dependentRequired)throw Error("dependentSchemas and dependentRequired are not supported");if(c.$ref){let b=c.$ref;if(d.refs.has(b))return d.refs.get(b);if(d.processing.has(b))return ku.lazy(()=>{if(!d.refs.has(b))throw Error(`Circular reference not resolved: ${b}`);return d.refs.get(b)});d.processing.add(b);let e=a(function(a,b){if(!a.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let c=a.slice(1).split("/").filter(Boolean);if(0===c.length)return b.rootSchema;let d="draft-2020-12"===b.version?"$defs":"definitions";if(c[0]===d){let d=c[1];if(!d||!b.defs[d])throw Error(`Reference not found: ${a}`);return b.defs[d]}throw Error(`Reference not found: ${a}`)}(b,d),d);return d.refs.set(b,e),d.processing.delete(b),e}if(void 0!==c.enum){let a=c.enum;if("openapi-3.0"===d.version&&!0===c.nullable&&1===a.length&&null===a[0])return ku.null();if(0===a.length)return ku.never();if(1===a.length)return ku.literal(a[0]);if(a.every(a=>"string"==typeof a))return ku.enum(a);let b=a.map(a=>ku.literal(a));return b.length<2?b[0]:ku.union([b[0],b[1],...b.slice(2)])}if(void 0!==c.const)return ku.literal(c.const);let f=c.type;if(Array.isArray(f)){let a=f.map(a=>b({...c,type:a},d));return 0===a.length?ku.never():1===a.length?a[0]:ku.union(a)}if(!f)return ku.any();switch(f){case"string":{let a=ku.string();if(c.format){let b=c.format;"email"===b?a=a.check(ku.email()):"uri"===b||"uri-reference"===b?a=a.check(ku.url()):"uuid"===b||"guid"===b?a=a.check(ku.uuid()):"date-time"===b?a=a.check(ku.iso.datetime()):"date"===b?a=a.check(ku.iso.date()):"time"===b?a=a.check(ku.iso.time()):"duration"===b?a=a.check(ku.iso.duration()):"ipv4"===b?a=a.check(ku.ipv4()):"ipv6"===b?a=a.check(ku.ipv6()):"mac"===b?a=a.check(ku.mac()):"cidr"===b?a=a.check(ku.cidrv4()):"cidr-v6"===b?a=a.check(ku.cidrv6()):"base64"===b?a=a.check(ku.base64()):"base64url"===b?a=a.check(ku.base64url()):"e164"===b?a=a.check(ku.e164()):"jwt"===b?a=a.check(ku.jwt()):"emoji"===b?a=a.check(ku.emoji()):"nanoid"===b?a=a.check(ku.nanoid()):"cuid"===b?a=a.check(ku.cuid()):"cuid2"===b?a=a.check(ku.cuid2()):"ulid"===b?a=a.check(ku.ulid()):"xid"===b?a=a.check(ku.xid()):"ksuid"===b&&(a=a.check(ku.ksuid()))}"number"==typeof c.minLength&&(a=a.min(c.minLength)),"number"==typeof c.maxLength&&(a=a.max(c.maxLength)),c.pattern&&(a=a.regex(new RegExp(c.pattern))),e=a;break}case"number":case"integer":{let a="integer"===f?ku.number().int():ku.number();"number"==typeof c.minimum&&(a=a.min(c.minimum)),"number"==typeof c.maximum&&(a=a.max(c.maximum)),"number"==typeof c.exclusiveMinimum?a=a.gt(c.exclusiveMinimum):!0===c.exclusiveMinimum&&"number"==typeof c.minimum&&(a=a.gt(c.minimum)),"number"==typeof c.exclusiveMaximum?a=a.lt(c.exclusiveMaximum):!0===c.exclusiveMaximum&&"number"==typeof c.maximum&&(a=a.lt(c.maximum)),"number"==typeof c.multipleOf&&(a=a.multipleOf(c.multipleOf)),e=a;break}case"boolean":e=ku.boolean();break;case"null":e=ku.null();break;case"object":{let b={},f=c.properties||{},g=new Set(c.required||[]);for(let[c,e]of Object.entries(f)){let f=a(e,d);b[c]=g.has(c)?f:f.optional()}if(c.propertyNames){let f=a(c.propertyNames,d),g=c.additionalProperties&&"object"==typeof c.additionalProperties?a(c.additionalProperties,d):ku.any();if(0===Object.keys(b).length){e=ku.record(f,g);break}let h=ku.object(b).passthrough(),i=ku.looseRecord(f,g);e=ku.intersection(h,i);break}if(c.patternProperties){let f=c.patternProperties,g=Object.keys(f),h=[];for(let b of g){let c=a(f[b],d),e=ku.string().regex(new RegExp(b));h.push(ku.looseRecord(e,c))}let i=[];if(Object.keys(b).length>0&&i.push(ku.object(b).passthrough()),i.push(...h),0===i.length)e=ku.object({}).passthrough();else if(1===i.length)e=i[0];else{let a=ku.intersection(i[0],i[1]);for(let b=2;b<i.length;b++)a=ku.intersection(a,i[b]);e=a}break}let h=ku.object(b);e=!1===c.additionalProperties?h.strict():"object"==typeof c.additionalProperties?h.catchall(a(c.additionalProperties,d)):h.passthrough();break}case"array":{let b=c.prefixItems,f=c.items;if(b&&Array.isArray(b)){let g=b.map(b=>a(b,d)),h=f&&"object"==typeof f&&!Array.isArray(f)?a(f,d):void 0;e=h?ku.tuple(g).rest(h):ku.tuple(g),"number"==typeof c.minItems&&(e=e.check(ku.minLength(c.minItems))),"number"==typeof c.maxItems&&(e=e.check(ku.maxLength(c.maxItems)))}else if(Array.isArray(f)){let b=f.map(b=>a(b,d)),g=c.additionalItems&&"object"==typeof c.additionalItems?a(c.additionalItems,d):void 0;e=g?ku.tuple(b).rest(g):ku.tuple(b),"number"==typeof c.minItems&&(e=e.check(ku.minLength(c.minItems))),"number"==typeof c.maxItems&&(e=e.check(ku.maxLength(c.maxItems)))}else if(void 0!==f){let b=a(f,d),g=ku.array(b);"number"==typeof c.minItems&&(g=g.min(c.minItems)),"number"==typeof c.maxItems&&(g=g.max(c.maxItems)),e=g}else e=ku.array(ku.any());break}default:throw Error(`Unsupported type: ${f}`)}return c.description&&(e=e.describe(c.description)),void 0!==c.default&&(e=e.default(c.default)),e}(b,c),e=b.type||void 0!==b.enum||void 0!==b.const;if(b.anyOf&&Array.isArray(b.anyOf)){let f=b.anyOf.map(b=>a(b,c)),g=ku.union(f);d=e?ku.intersection(d,g):g}if(b.oneOf&&Array.isArray(b.oneOf)){let f=b.oneOf.map(b=>a(b,c)),g=ku.xor(f);d=e?ku.intersection(d,g):g}if(b.allOf&&Array.isArray(b.allOf))if(0===b.allOf.length)d=e?d:ku.any();else{let f=e?d:a(b.allOf[0],c),g=+!e;for(let d=g;d<b.allOf.length;d++)f=ku.intersection(f,a(b.allOf[d],c));d=f}!0===b.nullable&&"openapi-3.0"===c.version&&(d=ku.nullable(d)),!0===b.readOnly&&(d=ku.readonly(d));let f={};for(let a of["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"])a in b&&(f[a]=b[a]);for(let a of["contentEncoding","contentMediaType","contentSchema"])a in b&&(f[a]=b[a]);for(let a of Object.keys(b))kv.has(a)||(f[a]=b[a]);return Object.keys(f).length>0&&c.registry.add(d,f),d}(a,c)}function kx(a){return eY(hU,a)}function ky(a){return fq(iK,a)}function kz(a){return fx(iS,a)}function kA(a){return fz(iU,a)}function kB(a){return fK(jb,a)}u(d8())},51591:(a,b,c)=>{c.d(b,{a:()=>h});var d=c(17793),e=c(53284),f=c(71088),g=c(19795);function h(a,b){var c,h,i,j,k,l,m,n;if(3===b.length){return c=a,h=b[0],i=b[1],j=b[2],d.b.createWithOn(c,(0,g.uJ)(h),(0,e.vC)(i,"=",j))}if(2===b.length){return k=a,l=b[0],(0,b[1])((0,f.GQ)(k,l)).toOperationNode()}if(1===b.length){return m=a,n=b[0],d.b.create(m,(0,g.uJ)(n))}throw Error("not implemented")}},51678:(a,b,c)=>{c.d(b,{sL:()=>k,HX:()=>d.H,d3:()=>m,xA:()=>e.xA,ty:()=>h,vp:()=>n,Qs:()=>e.Qs,uy:()=>j,iD:()=>o});var d=c(59165),e=c(67849),f=c(72168);let g=async()=>{let a=(0,d.Q)();if(!a.context.requestStateAsyncStorage){let b=await (0,f.V)();a.context.requestStateAsyncStorage=new b}return a.context.requestStateAsyncStorage};async function h(){return void 0!==(await g()).getStore()}async function i(){let a=(await g()).getStore();if(!a)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return a}async function j(a,b){return(await g()).run(a,b)}function k(a){let b=Object.freeze({});return{get ref(){return b},async get(){let c=await i();if(!c.has(b)){let d=await a();return c.set(b,d),d}return c.get(b)},async set(a){(await i()).set(b,a)}}}let l=async()=>{let a=(0,d.Q)();if(!a.context.adapterAsyncStorage){let b=await (0,f.V)();a.context.adapterAsyncStorage=new b}return a.context.adapterAsyncStorage},m=async a=>l().then(b=>b.getStore()||a).catch(()=>a),n=async(a,b)=>{let c=!0;return l().then(d=>(c=!0,d.run(a,b))).catch(a=>{if(!c)return b();throw a})},o=async(a,b)=>{let c=!0;return l().then(d=>(c=!0,a.transaction(async a=>d.run(a,b)))).catch(a=>{if(!c)return b();throw a})}},53082:(a,b,c)=>{c.d(b,{B:()=>e});var d=c(33164);function e(a,b){let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new d.T0(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},53284:(a,b,c)=>{c.d(b,{GB:()=>n,KN:()=>r,Ve:()=>q,ds:()=>o,vC:()=>p});var d=c(56112),e=c(60353),f=c(39450),g=c(40659),h=c(2952),i=c(82324),j=c(90350),k=c(55914),l=c(94296),m=c(28244);function n(a){if(3===a.length)return o(a[0],a[1],a[2]);if(1===a.length)return(0,i.$s)(a[0]);throw Error(`invalid arguments: ${JSON.stringify(a)}`)}function o(a,b,c){var e;return("is"===(e=b)||"is not"===e)&&s(c)?d.l.create((0,h.$O)(a),t(b),j.q.createImmediate(c)):d.l.create((0,h.$O)(a),t(b),(0,i.U2)(c))}function p(a,b,c){return d.l.create((0,h.$O)(a),t(b),(0,h.$O)(c))}function q(a,b){return r(Object.entries(a).filter(([,a])=>!(0,e.b0)(a)).map(([a,b])=>o(a,s(b)?"is":"=",b)),b)}function r(a,b,c=!0){let e="and"===b?k.s.create:m.K.create;if(0===a.length)return d.l.create(j.q.createImmediate(1),g.zX.create("="),j.q.createImmediate(+("and"===b)));let f=u(a[0]);for(let b=1;b<a.length;++b)f=e(f,u(a[b]));return a.length>1&&c?l.k.create(f):f}function s(a){return(0,e.kZ)(a)||(0,e.Lm)(a)}function t(a){if((0,e.Kg)(a)&&g.we.includes(a))return g.zX.create(a);if((0,f.N)(a))return a.toOperationNode();throw Error(`invalid operator ${JSON.stringify(a)}`)}function u(a){return(0,f.N)(a)?a.toOperationNode():a}},54315:(a,b,c)=>{c.d(b,{h:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"PrimitiveValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"PrimitiveValueListNode",values:(0,d.CN)([...a])})})},54744:(a,b,c)=>{c.d(b,{o:()=>g});var d=c(60353),e=c(55914),f=c(28244);let g=(0,d.CN)({is:a=>"WhereNode"===a.kind,create:a=>(0,d.CN)({kind:"WhereNode",where:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,where:"And"===b?e.s.create(a.where,c):f.K.create(a.where,c)})})},55649:(a,b,c)=>{c.d(b,{E:()=>o,B:()=>p});var d=c(35537),e=c(62767),f=c(19051),g=c(89875);function h(a,b,c,d){var e;let h,{c:i,dkLen:j,DK:k,PRF:l,PRFSalt:m}=function(a,b,c,d){(0,g.sd)(a);let{c:e,dkLen:h,asyncTick:i}=(0,g.tY)({dkLen:32,asyncTick:10},d);if((0,g.Fe)(e,"c"),(0,g.Fe)(h,"dkLen"),(0,g.Fe)(i,"asyncTick"),e<1)throw Error("iterations (c) must be >= 1");let j=(0,g.K_)(b,"password"),k=(0,g.K_)(c,"salt"),l=new Uint8Array(h),m=f.w.create(a,j),n=m._cloneInto().update(k);return{c:e,dkLen:h,asyncTick:i,DK:l,PRF:m,PRFSalt:n}}(a,b,c,d),n=new Uint8Array(4),o=(0,g.O8)(n),p=new Uint8Array(l.outputLen);for(let a=1,b=0;b<j;a++,b+=l.outputLen){let c=k.subarray(b,b+l.outputLen);o.setInt32(0,a,!1),(h=m._cloneInto(h)).update(n).digestInto(p),c.set(p.subarray(0,c.length));for(let a=1;a<i;a++){l._cloneInto(h).update(p).digestInto(p);for(let a=0;a<c.length;a++)c[a]^=p[a]}}return e=h,l.destroy(),m.destroy(),e&&e.destroy(),(0,g.uH)(p),k}var i=c(69333);function j(a,b,c,d,e,f){let h=a[b++]^c[d++],i=a[b++]^c[d++],j=a[b++]^c[d++],k=a[b++]^c[d++],l=a[b++]^c[d++],m=a[b++]^c[d++],n=a[b++]^c[d++],o=a[b++]^c[d++],p=a[b++]^c[d++],q=a[b++]^c[d++],r=a[b++]^c[d++],s=a[b++]^c[d++],t=a[b++]^c[d++],u=a[b++]^c[d++],v=a[b++]^c[d++],w=a[b++]^c[d++],x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w;for(let a=0;a<8;a+=2)B^=(0,g.aZ)(x+J|0,7),F^=(0,g.aZ)(B+x|0,9),J^=(0,g.aZ)(F+B|0,13),x^=(0,g.aZ)(J+F|0,18),G^=(0,g.aZ)(C+y|0,7),K^=(0,g.aZ)(G+C|0,9),y^=(0,g.aZ)(K+G|0,13),C^=(0,g.aZ)(y+K|0,18),L^=(0,g.aZ)(H+D|0,7),z^=(0,g.aZ)(L+H|0,9),D^=(0,g.aZ)(z+L|0,13),H^=(0,g.aZ)(D+z|0,18),A^=(0,g.aZ)(M+I|0,7),E^=(0,g.aZ)(A+M|0,9),I^=(0,g.aZ)(E+A|0,13),M^=(0,g.aZ)(I+E|0,18),y^=(0,g.aZ)(x+A|0,7),z^=(0,g.aZ)(y+x|0,9),A^=(0,g.aZ)(z+y|0,13),x^=(0,g.aZ)(A+z|0,18),D^=(0,g.aZ)(C+B|0,7),E^=(0,g.aZ)(D+C|0,9),B^=(0,g.aZ)(E+D|0,13),C^=(0,g.aZ)(B+E|0,18),I^=(0,g.aZ)(H+G|0,7),F^=(0,g.aZ)(I+H|0,9),G^=(0,g.aZ)(F+I|0,13),H^=(0,g.aZ)(G+F|0,18),J^=(0,g.aZ)(M+L|0,7),K^=(0,g.aZ)(J+M|0,9),L^=(0,g.aZ)(K+J|0,13),M^=(0,g.aZ)(L+K|0,18);e[f++]=h+x|0,e[f++]=i+y|0,e[f++]=j+z|0,e[f++]=k+A|0,e[f++]=l+B|0,e[f++]=m+C|0,e[f++]=n+D|0,e[f++]=o+E|0,e[f++]=p+F|0,e[f++]=q+G|0,e[f++]=r+H|0,e[f++]=s+I|0,e[f++]=t+J|0,e[f++]=u+K|0,e[f++]=v+L|0,e[f++]=w+M|0}function k(a,b,c,d,e){let f=d+0,g=d+16*e;for(let d=0;d<16;d++)c[g+d]=a[b+(2*e-1)*16+d];for(let d=0;d<e;d++,f+=16,b+=16)j(c,g,a,b,c,f),d>0&&(g+=16),j(c,f,a,b+=16,c,g)}async function l(a,b,c){let{N:d,r:e,p:f,dkLen:j,blockSize32:l,V:m,B32:n,B:o,tmp:p,blockMixCb:q,asyncTick:r}=function(a,b,c){let{N:d,r:e,p:f,dkLen:j,asyncTick:k,maxmem:l,onProgress:m}=(0,g.tY)({dkLen:32,asyncTick:10,maxmem:0x40000400},c);if((0,g.Fe)(d,"N"),(0,g.Fe)(e,"r"),(0,g.Fe)(f,"p"),(0,g.Fe)(j,"dkLen"),(0,g.Fe)(k,"asyncTick"),(0,g.Fe)(l,"maxmem"),void 0!==m&&"function"!=typeof m)throw Error("progressCb must be a function");let n=128*e,o=n/4;if(d<=1||(d&d-1)!=0||d>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(f<1||f>0x1fffffffe0/n)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(j<1||j>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(n*(d+f)>l)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+l);let p=h(i.sc,a,b,{c:1,dkLen:n*f}),q=(0,g.DH)(p),r=(0,g.DH)(new Uint8Array(n*d)),s=(0,g.DH)(new Uint8Array(n)),t=()=>{};if(m){let a=2*d*f,b=Math.max(Math.floor(a/1e4),1),c=0;t=()=>{c++,m&&(!(c%b)||c===a)&&m(c/a)}}return{N:d,r:e,p:f,dkLen:j,blockSize32:o,V:r,B32:q,B:p,tmp:s,blockMixCb:t,asyncTick:k}}(a,b,c);(0,g.fd)(n);for(let a=0;a<f;a++){let b=l*a;for(let a=0;a<l;a++)m[a]=n[b+a];let c=0;await (0,g.$h)(d-1,r,()=>{k(m,c,m,c+=l,e),q()}),k(m,(d-1)*l,n,b,e),q(),await (0,g.$h)(d,r,()=>{let a=(n[b+l-16]&d-1)>>>0;for(let c=0;c<l;c++)p[c]=n[b+c]^m[a*l+c];k(p,0,n,b,e),q()})}(0,g.fd)(n);let s=h(i.sc,a,o,{c:1,dkLen:j});return(0,g.uH)(o,m,p),s}let m={N:16384,r:16,p:1,dkLen:64};async function n(a,b){return await l(a.normalize("NFKC"),b,{N:m.N,p:m.p,r:m.r,dkLen:m.dkLen,maxmem:128*m.N*m.r*2})}let o=async a=>{let b=e.u.encode(crypto.getRandomValues(new Uint8Array(16))),c=await n(a,b);return`${b}:${e.u.encode(c)}`},p=async({hash:a,password:b})=>{let[c,e]=a.split(":");if(!c||!e)throw new d.$("Invalid password hash");return function(a,b){"string"==typeof a&&(a=new TextEncoder().encode(a)),"string"==typeof b&&(b=new TextEncoder().encode(b));let c=new Uint8Array(a),d=new Uint8Array(b),e=c.length^d.length,f=Math.max(c.length,d.length);for(let a=0;a<f;a++)e|=(a<c.length?c[a]:0)^(a<d.length?d[a]:0);return 0===e}(await n(b,c),(0,g.aT)(e))}},55914:(a,b,c)=>{c.d(b,{s:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"AndNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AndNode",left:a,right:b})})},56112:(a,b,c)=>{c.d(b,{l:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"BinaryOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"BinaryOperationNode",leftOperand:a,operator:b,rightOperand:c})})},57105:(a,b,c)=>{c.d(b,{SS:()=>j,YK:()=>h,v0:()=>i});var d=c(70010),e=c(39450),f=c(39281),g=c(60353);function h(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(a)}`)}function i(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(a)}`)}function j(a){return(0,d.B)(a)||(0,d.q)(a)||(0,g.Tn)(a)}},59165:(a,b,c)=>{c.d(b,{H:()=>i,Q:()=>h});let d=Symbol.for("better-auth:global"),e=null,f={},g="1.4.18";function h(){return globalThis[d]||(globalThis[d]={version:g,epoch:1,context:f},e=globalThis[d]),(e=globalThis[d]).version!==g&&(e.version=g,e.epoch++),globalThis[d]}function i(){return h().version}},60353:(a,b,c)=>{function d(a){return void 0===a||void 0===a}function e(a){return"string"==typeof a}function f(a){return"number"==typeof a}function g(a){return"boolean"==typeof a}function h(a){return null===a}function i(a){return a instanceof Date}function j(a){return"bigint"==typeof a}function k(a){return"undefined"!=typeof Buffer&&Buffer.isBuffer(a)}function l(a){return"function"==typeof a}function m(a){return"object"==typeof a&&null!==a}function n(a){return Object.freeze(a)}function o(a){return p(a)?a:[a]}function p(a){return Array.isArray(a)}function q(a){return a}c.d(b,{$P:()=>i,CN:()=>n,Et:()=>f,Gv:()=>m,Kg:()=>e,Lm:()=>g,MH:()=>p,Pe:()=>k,Tn:()=>l,_j:()=>o,b0:()=>d,kZ:()=>h,lQ:()=>q,sI:()=>j}),Object.prototype.toString},61238:(a,b,c)=>{c.d(b,{OU:()=>j});var d=c(77688),e=c(60353),f=c(69079),g=c(33423),h=c(53284),i=c(82324);class j{#s;constructor(a){this.#s=(0,e.CN)(a)}when(...a){return new k({...this.#s,node:f.P.cloneWithWhen(this.#s.node,g.t.create((0,h.GB)(a)))})}}class k{#s;constructor(a){this.#s=(0,e.CN)(a)}then(a){return new l({...this.#s,node:f.P.cloneWithThen(this.#s.node,(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a))})}}class l{#s;constructor(a){this.#s=(0,e.CN)(a)}when(...a){return new k({...this.#s,node:f.P.cloneWithWhen(this.#s.node,g.t.create((0,h.GB)(a)))})}else(a){return new m({...this.#s,node:f.P.cloneWith(this.#s.node,{else:(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a)})})}end(){return new d.Is(f.P.cloneWith(this.#s.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#s.node,{isStatement:!0}))}}class m{#s;constructor(a){this.#s=(0,e.CN)(a)}end(){return new d.Is(f.P.cloneWith(this.#s.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#s.node,{isStatement:!0}))}}},62767:(a,b,c)=>{c.d(b,{u:()=>d});let d={encode:a=>{if("string"==typeof a&&(a=new TextEncoder().encode(a)),0===a.byteLength)return"";let b=new Uint8Array(a),c="";for(let a of b)c+=a.toString(16).padStart(2,"0");return c},decode:a=>{if(!a)return"";if("string"==typeof a){if(a.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(a))throw Error("Invalid hexadecimal string");let b=new Uint8Array(a.length/2);for(let c=0;c<a.length;c+=2)b[c/2]=parseInt(a.slice(c,c+2),16);return new TextDecoder().decode(b)}return new TextDecoder().decode(a)}}},63561:(a,b,c)=>{c.d(b,{$:()=>e});var d=c(94285);let e=a=>(0,d.q)("a-z","A-Z","0-9")(a||32)},64196:(a,b,c)=>{c.d(b,{FA:()=>au,Do:()=>az,lT:()=>ay,RO:()=>av});var d=c(19051),e=c(89875);let f=Uint8Array.of(0),g=Uint8Array.of(),h=(a,b,c,h,i)=>(function(a,b,c,h=32){(0,e.sd)(a),(0,e.Fe)(h,"length");let i=a.outputLen;if(h>255*i)throw Error("Length must be <= 255*HashLen");let j=Math.ceil(h/i);void 0===c?c=g:(0,e.DO)(c,void 0,"info");let k=new Uint8Array(j*i),l=d.w.create(a,b),m=l._cloneInto(),n=new Uint8Array(l.outputLen);for(let a=0;a<j;a++)f[0]=a+1,m.update(0===a?g:n).update(c).update(f).digestInto(n),k.set(n,i*a),l._cloneInto(m);return l.destroy(),m.destroy(),(0,e.uH)(n,f),k.slice(0,h)})(a,function(a,b,c){return(0,e.sd)(a),void 0===c&&(c=new Uint8Array(a.outputLen)),(0,d.w)(a,c,b)}(a,b,c),h,i);var i=c(69333),j=c(73519),k=c(53082),l=c(80193),m=c(34186);async function n(a,b,c){let d=await (0,m.j)(a,b,"sign");return(0,l.O)(a,d),new Uint8Array(await crypto.subtle.sign((0,k.B)(a,d.algorithm),d,c))}var o=c(66719),p=c(33164),q=c(37432),r=c(80053),s=c(17969),t=c(80801);class u{#a;#R;#S;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#a=a}setProtectedHeader(a){if(this.#R)throw TypeError("setProtectedHeader can only be called once");return this.#R=a,this}setUnprotectedHeader(a){if(this.#S)throw TypeError("setUnprotectedHeader can only be called once");return this.#S=a,this}async sign(a,b){let c,d,e,f;if(!this.#R&&!this.#S)throw new p.Ye("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.f)(this.#R,this.#S))throw new p.Ye("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...this.#R,...this.#S},h=(0,s.n)(p.Ye,new Map([["b64",!0]]),b?.crit,this.#R,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=this.#R.b64))throw new p.Ye('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:k}=g;if("string"!=typeof k||!k)throw new p.Ye('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,r.y)(k,a,"sign"),i?(c=(0,j.l)(this.#a),d=(0,q.lF)(c)):(d=this.#a,c=""),this.#R?(e=(0,j.l)(JSON.stringify(this.#R)),f=(0,q.lF)(e)):(e="",f=new Uint8Array);let l=(0,q.xW)(f,(0,q.lF)("."),d),m=await (0,t.l)(a,k),u=await n(k,m,l),v={signature:(0,j.l)(u),payload:c};return this.#S&&(v.header=this.#S),this.#R&&(v.protected=e),v}}class v{#T;constructor(a){this.#T=new u(a)}setProtectedHeader(a){return this.#T.setProtectedHeader(a),this}async sign(a,b){let c=await this.#T.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}var w=c(7448);class x{#R;#U;constructor(a={}){this.#U=new w.cE(a)}setIssuer(a){return this.#U.iss=a,this}setSubject(a){return this.#U.sub=a,this}setAudience(a){return this.#U.aud=a,this}setJti(a){return this.#U.jti=a,this}setNotBefore(a){return this.#U.nbf=a,this}setExpirationTime(a){return this.#U.exp=a,this}setIssuedAt(a){return this.#U.iat=a,this}setProtectedHeader(a){return this.#R=a,this}async sign(a,b){let c=new v(this.#U.data());if(c.setProtectedHeader(this.#R),Array.isArray(this.#R?.crit)&&this.#R.crit.includes("b64")&&!1===this.#R.b64)throw new p.Dp("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}var y=c(1069);async function z(a,b){let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))}var A=c(81316),B=c(33999),C=c(41330);async function D(a){if((0,A.D2)(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:(0,j.l)(a)};if(!(0,A.R7)(a))throw TypeError((0,C.X)(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function E(a){return D(a)}let F=(a,b)=>{if("string"!=typeof a||!a)throw new p._L(`${b} missing or invalid`)};async function G(a,b){let c,d;if((0,B.ll)(a))c=a;else if((0,A.P2)(a))c=await E(a);else throw TypeError((0,C.X)(a,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(c.kty){case"AKP":F(c.alg,'"alg" (Algorithm) Parameter'),F(c.pub,'"pub" (Public key) Parameter'),d={alg:c.alg,kty:c.kty,pub:c.pub};break;case"EC":F(c.crv,'"crv" (Curve) Parameter'),F(c.x,'"x" (X Coordinate) Parameter'),F(c.y,'"y" (Y Coordinate) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x,y:c.y};break;case"OKP":F(c.crv,'"crv" (Subtype of Key Pair) Parameter'),F(c.x,'"x" (Public Key) Parameter'),d={crv:c.crv,kty:c.kty,x:c.x};break;case"RSA":F(c.e,'"e" (Exponent) Parameter'),F(c.n,'"n" (Modulus) Parameter'),d={e:c.e,kty:c.kty,n:c.n};break;case"oct":F(c.k,'"k" (Key Value) Parameter'),d={k:c.k,kty:c.kty};break;default:throw new p.T0('"kty" (Key Type) Parameter missing or unsupported')}let e=(0,q.lF)(JSON.stringify(d));return(0,j.l)(await z(b,e))}let H=Symbol();function I(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new p.T0(`Unsupported JWE Algorithm: ${a}`)}}function J(a,b){if(b.length<<3!==I(a))throw new p.aA("Invalid Initialization Vector length")}function K(a,b){let c=a.byteLength<<3;if(c!==b)throw new p.aA(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)}var L=c(27701);async function M(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError((0,C.X)(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=(0,q.xW)(e,d,i,(0,q.mx)(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function N(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):((0,L.$)(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}async function O(a,b,c,d,e){if(!(0,A.R7)(c)&&!(c instanceof Uint8Array))throw TypeError((0,C.X)(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)J(a,d);else d=crypto.getRandomValues(new Uint8Array(I(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&K(c,parseInt(a.slice(-3),10)),M(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&K(c,parseInt(a.slice(1,4),10)),N(a,b,c,d,e);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}function P(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function Q(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):((0,L.$)(a,b,c),a)}async function R(a,b,c){let d=await Q(b,a,"wrapKey");P(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function S(a,b,c){let d=await Q(b,a,"unwrapKey");P(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}function T(a){return(0,q.xW)((0,q.VS)(a.length),a)}async function U(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set((0,q.VS)(b),0),d.set(a,4),d.set(c,4+a.length);let e=await z("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function V(a,b,c,d,e=new Uint8Array,f=new Uint8Array){var g;(0,L.$)(a,"ECDH"),(0,L.$)(b,"ECDH","deriveBits");let h=T((0,q.lF)(c)),i=T(e),j=T(f),k=(0,q.VS)(d),l=new Uint8Array,m=(0,q.xW)(h,i,j,k,l);return U(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,m)}function W(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function X(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new p.aA("PBES2 Salt Input must be 8 or more octets");let e=(0,q.xW)((0,q.lF)(b),Uint8Array.of(0),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):((0,L.$)(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function Y(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await X(e,a,d,b);return{encryptedKey:await R(a.slice(-6),f,c),p2c:d,p2s:(0,j.l)(e)}}async function Z(a,b,c,d,e){let f=await X(e,a,d,b);return S(a.slice(-6),f,c)}let $=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new p.T0(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function _(a,b,c){return(0,L.$)(b,a,"encrypt"),(0,l.O)(a,b),new Uint8Array(await crypto.subtle.encrypt($(a),b,c))}async function aa(a,b,c){return(0,L.$)(b,a,"decrypt"),(0,l.O)(a,b),new Uint8Array(await crypto.subtle.decrypt($(a),b,c))}function ab(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new p.T0(`Unsupported JWE Algorithm: ${a}`)}}let ac=a=>crypto.getRandomValues(new Uint8Array(ab(a)>>3));async function ad(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function ae(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError((0,C.X)(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=(0,q.xW)(f,d,c,(0,q.mx)(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await ad(e,m)}catch{}if(!g)throw new p.xO;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new p.xO;return h}async function af(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):((0,L.$)(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,(0,q.xW)(c,e)))}catch{throw new p.xO}}async function ag(a,b,c,d,e,f){if(!(0,A.R7)(b)&&!(b instanceof Uint8Array))throw TypeError((0,C.X)(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new p.aA("JWE Initialization Vector missing");if(!e)throw new p.aA("JWE Authentication Tag missing");switch(J(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&K(b,parseInt(a.slice(-3),10)),ae(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&K(b,parseInt(a.slice(1,4),10)),af(a,b,c,d,e,f);default:throw new p.T0("Unsupported JWE Content Encryption Algorithm")}}async function ah(a,b,c,d){let e=a.slice(0,7),f=await O(e,c,b,d,new Uint8Array);return{encryptedKey:f.ciphertext,iv:(0,j.l)(f.iv),tag:(0,j.l)(f.tag)}}async function ai(a,b,c,d,e){return ag(a.slice(0,7),b,c,d,e,new Uint8Array)}async function aj(a,b,c,d,e={}){let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if((0,A.Tz)(c),!W(c))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:k,apv:l}=e;i=e.epk?await (0,t.l)(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:m,y:n,crv:o,kty:q}=await E(i),r=await V(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?ab(b):parseInt(a.slice(-5,-2),10),k,l);if(g={epk:{x:m,crv:o,kty:q}},"EC"===q&&(g.epk.y=n),k&&(g.apu=(0,j.l)(k)),l&&(g.apv=(0,j.l)(l)),"ECDH-ES"===a){h=r;break}h=d||ac(b);let s=a.slice(-6);f=await R(s,r,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||ac(b),(0,A.Tz)(c),f=await _(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||ac(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await Y(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||ac(b),f=await R(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||ac(b);let{iv:i}=e;({encryptedKey:f,...g}=await ah(a,c,h,i));break}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}}class ak{#V;#R;#W;#S;#X;#Y;#Z;#$;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#V=a}setKeyManagementParameters(a){if(this.#$)throw TypeError("setKeyManagementParameters can only be called once");return this.#$=a,this}setProtectedHeader(a){if(this.#R)throw TypeError("setProtectedHeader can only be called once");return this.#R=a,this}setSharedUnprotectedHeader(a){if(this.#W)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#W=a,this}setUnprotectedHeader(a){if(this.#S)throw TypeError("setUnprotectedHeader can only be called once");return this.#S=a,this}setAdditionalAuthenticatedData(a){return this.#X=a,this}setContentEncryptionKey(a){if(this.#Y)throw TypeError("setContentEncryptionKey can only be called once");return this.#Y=a,this}setInitializationVector(a){if(this.#Z)throw TypeError("setInitializationVector can only be called once");return this.#Z=a,this}async encrypt(a,b){let c,d,e,f,g,h;if(!this.#R&&!this.#S&&!this.#W)throw new p.aA("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,o.f)(this.#R,this.#S,this.#W))throw new p.aA("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#R,...this.#S,...this.#W};if((0,s.n)(p.aA,new Map,b?.crit,this.#R,i),void 0!==i.zip)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:k,enc:l}=i;if("string"!=typeof k||!k)throw new p.aA('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof l||!l)throw new p.aA('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#Y&&("dir"===k||"ECDH-ES"===k))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${k}`);(0,r.y)("dir"===k?l:k,a,"encrypt");{let e,f=await (0,t.l)(a,k);({cek:d,encryptedKey:c,parameters:e}=await aj(k,l,f,this.#Y,this.#$)),e&&(b&&H in b?this.#S?this.#S={...this.#S,...e}:this.setUnprotectedHeader(e):this.#R?this.#R={...this.#R,...e}:this.setProtectedHeader(e))}if(this.#R?(f=(0,j.l)(JSON.stringify(this.#R)),g=(0,q.lF)(f)):(f="",g=new Uint8Array),this.#X){h=(0,j.l)(this.#X);let a=(0,q.lF)(h);e=(0,q.xW)(g,(0,q.lF)("."),a)}else e=g;let{ciphertext:m,tag:n,iv:u}=await O(l,this.#V,d,this.#Z,e),v={ciphertext:(0,j.l)(m)};return u&&(v.iv=(0,j.l)(u)),n&&(v.tag=(0,j.l)(n)),c&&(v.encrypted_key=(0,j.l)(c)),h&&(v.aad=h),this.#R&&(v.protected=f),this.#W&&(v.unprotected=this.#W),this.#S&&(v.header=this.#S),v}}class al{#T;constructor(a){this.#T=new ak(a)}setContentEncryptionKey(a){return this.#T.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#T.setInitializationVector(a),this}setProtectedHeader(a){return this.#T.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#T.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#T.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}class am{#Y;#Z;#$;#R;#_;#aa;#ab;#U;constructor(a={}){this.#U=new w.cE(a)}setIssuer(a){return this.#U.iss=a,this}setSubject(a){return this.#U.sub=a,this}setAudience(a){return this.#U.aud=a,this}setJti(a){return this.#U.jti=a,this}setNotBefore(a){return this.#U.nbf=a,this}setExpirationTime(a){return this.#U.exp=a,this}setIssuedAt(a){return this.#U.iat=a,this}setProtectedHeader(a){if(this.#R)throw TypeError("setProtectedHeader can only be called once");return this.#R=a,this}setKeyManagementParameters(a){if(this.#$)throw TypeError("setKeyManagementParameters can only be called once");return this.#$=a,this}setContentEncryptionKey(a){if(this.#Y)throw TypeError("setContentEncryptionKey can only be called once");return this.#Y=a,this}setInitializationVector(a){if(this.#Z)throw TypeError("setInitializationVector can only be called once");return this.#Z=a,this}replicateIssuerAsHeader(){return this.#_=!0,this}replicateSubjectAsHeader(){return this.#aa=!0,this}replicateAudienceAsHeader(){return this.#ab=!0,this}async encrypt(a,b){let c=new al(this.#U.data());return this.#R&&(this.#_||this.#aa||this.#ab)&&(this.#R={...this.#R,iss:this.#_?this.#U.iss:void 0,sub:this.#aa?this.#U.sub:void 0,aud:this.#ab?this.#U.aud:void 0}),c.setProtectedHeader(this.#R),this.#Z&&c.setInitializationVector(this.#Z),this.#Y&&c.setContentEncryptionKey(this.#Y),this.#$&&c.setKeyManagementParameters(this.#$),c.encrypt(a,b)}}var an=c(32712),ao=c(92545);async function ap(a,b,c,d,e){switch(a){case"dir":if(void 0!==c)throw new p.aA("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new p.aA("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!(0,an.G)(d.epk))throw new p.aA('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if((0,A.Tz)(b),!W(b))throw new p.T0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await (0,ao.Og)(d.epk,a);if((0,A.Tz)(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new p.aA('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=(0,j.D)(d.apu)}catch{throw new p.aA("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new p.aA('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=(0,j.D)(d.apv)}catch{throw new p.aA("Failed to base64url decode the apv")}}let h=await V(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?ab(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return S(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return(0,A.Tz)(b),aa(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new p.aA('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new p.aA('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new p.aA('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=(0,j.D)(d.p2s)}catch{throw new p.aA("Failed to base64url decode the p2s")}return Z(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new p.aA("JWE Encrypted Key missing");return S(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new p.aA("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new p.aA('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new p.aA('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=(0,j.D)(d.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}try{f=(0,j.D)(d.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}return ai(a,b,c,e,f)}default:throw new p.T0('Invalid or unsupported "alg" (JWE Algorithm) header value')}}var aq=c(1911);async function ar(a,b,c){let d,e,f,g,h,i,k;if(!(0,an.G)(a))throw new p.aA("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new p.aA("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new p.aA("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new p.aA("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new p.aA("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new p.aA("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new p.aA("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new p.aA("JWE AAD incorrect type");if(void 0!==a.header&&!(0,an.G)(a.header))throw new p.aA("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!(0,an.G)(a.unprotected))throw new p.aA("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=(0,j.D)(a.protected);d=JSON.parse(q.D0.decode(b))}catch{throw new p.aA("JWE Protected Header is invalid")}if(!(0,o.f)(d,a.header,a.unprotected))throw new p.aA("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let l={...d,...a.header,...a.unprotected};if((0,s.n)(p.aA,new Map,c?.crit,d,l),void 0!==l.zip)throw new p.T0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:m,enc:n}=l;if("string"!=typeof m||!m)throw new p.aA("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof n||!n)throw new p.aA("missing JWE Encryption Algorithm (enc) in JWE Header");let u=c&&(0,aq.F)("keyManagementAlgorithms",c.keyManagementAlgorithms),v=c&&(0,aq.F)("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(u&&!u.has(m)||!u&&m.startsWith("PBES2"))throw new p.Rb('"alg" (Algorithm) Header Parameter value not allowed');if(v&&!v.has(n))throw new p.Rb('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=(0,j.D)(a.encrypted_key)}catch{throw new p.aA("Failed to base64url decode the encrypted_key")}let w=!1;"function"==typeof b&&(b=await b(d,a),w=!0),(0,r.y)("dir"===m?n:m,b,"decrypt");let x=await (0,t.l)(b,m);try{f=await ap(m,x,e,l,c)}catch(a){if(a instanceof TypeError||a instanceof p.aA||a instanceof p.T0)throw a;f=ac(n)}if(void 0!==a.iv)try{g=(0,j.D)(a.iv)}catch{throw new p.aA("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=(0,j.D)(a.tag)}catch{throw new p.aA("Failed to base64url decode the tag")}let y=void 0!==a.protected?(0,q.lF)(a.protected):new Uint8Array;i=void 0!==a.aad?(0,q.xW)(y,(0,q.lF)("."),(0,q.lF)(a.aad)):y;try{k=(0,j.D)(a.ciphertext)}catch{throw new p.aA("Failed to base64url decode the ciphertext")}let z={plaintext:await ag(n,f,k,g,h,i)};if(void 0!==a.protected&&(z.protectedHeader=d),void 0!==a.aad)try{z.additionalAuthenticatedData=(0,j.D)(a.aad)}catch{throw new p.aA("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(z.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(z.unprotectedHeader=a.header),w)?{...z,key:x}:z}async function as(a,b,c){if(a instanceof Uint8Array&&(a=q.D0.decode(a)),"string"!=typeof a)throw new p.aA("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new p.aA("Invalid Compact JWE");let j=await ar({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function at(a,b,c){let d=await as(a,b,c),e=(0,w.k6)(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new p.ie('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new p.ie('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new p.ie('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}async function au(a,b,c=3600){return await new x(a).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+c).sign(new TextEncoder().encode(b))}async function av(a,b){try{return(await (0,y.V)(a,new TextEncoder().encode(b))).payload}catch{return null}}let aw=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),ax="A256CBC-HS512";async function ay(a,b,c,d=3600){let e=h(i.sc,new TextEncoder().encode(b),new TextEncoder().encode(c),aw,64),f=await G({kty:"oct",k:j.l(e)},"sha256");return await new am(a).setProtectedHeader({alg:"dir",enc:ax,kid:f}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti(crypto.randomUUID()).encrypt(e)}async function az(a,b,c){if(!a)return null;try{let{payload:d}=await at(a,async({kid:a})=>{let d=h(i.sc,new TextEncoder().encode(b),new TextEncoder().encode(c),aw,64);if(void 0===a||a===await G({kty:"oct",k:j.l(d)},"sha256"))return d;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[ax,"A256GCM"]});return d}catch{return null}}},65582:(a,b,c)=>{c.d(b,{J:()=>n,G:()=>function a(b){return(0,d.Tn)(b)?a(b((0,l.A)())):(0,d.MH)(b)?b.map(a=>m(a)):[m(b)]}});var d=c(60353),e=c(49374),f=c(9005);let g=(0,d.CN)({is:a=>"SelectionNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectionNode",selection:a}),createSelectAll:()=>(0,d.CN)({kind:"SelectionNode",selection:f.U.create()}),createSelectAllFromTable:a=>(0,d.CN)({kind:"SelectionNode",selection:e.q.createSelectAll(a)})});var h=c(2952),i=c(27646),j=c(57105),k=c(19795),l=c(39281);function m(a){return(0,d.Kg)(a)?g.create((0,h.DT)(a)):(0,i.C)(a)?g.create(a.toOperationNode()):g.create((0,j.v0)(a))}function n(a){return a?Array.isArray(a)?a.map(o):[o(a)]:[g.createSelectAll()]}function o(a){if((0,d.Kg)(a))return g.createSelectAllFromTable((0,k.M$)(a));throw Error(`invalid value selectAll expression: ${JSON.stringify(a)}`)}},65966:(a,b,c)=>{c.d(b,{n:()=>an});var d=c(90423),e=c(65582),f=c(31009),g=c(54315),h=c(93159),i=c(60353),j=c(82324);let k=(0,i.CN)({is:a=>"ValuesNode"===a.kind,create:a=>(0,i.CN)({kind:"ValuesNode",values:(0,i.CN)(a)})});var l=c(57105);let m=(0,i.CN)({is:a=>"DefaultInsertValueNode"===a.kind,create:()=>(0,i.CN)({kind:"DefaultInsertValueNode"})});var n=c(39281);function o(a){let b=(0,i.Tn)(a)?a((0,n.A)()):a;var c=(0,i.MH)(b)?b:(0,i.CN)([b]);let d=function(a){let b=new Map;for(let c of a)for(let a of Object.keys(c))b.has(a)||void 0===c[a]||b.set(a,b.size);return b}(c);return[(0,i.CN)([...d.keys()].map(f.Z.create)),k.create(c.map(a=>(function(a,b){let c=Object.keys(a),d=Array.from({length:b.size}),e=!1,f=c.length;for(let g of c){let c=b.get(g);if((0,i.b0)(c)){f--;continue}let h=a[g];((0,i.b0)(h)||(0,l.SS)(h))&&(e=!0),d[c]=h}if(f<b.size||e){let a=m.create();return h.s.create(d.map(b=>(0,i.b0)(b)?a:(0,j.$s)(b)))}return g.h.create(d)})(a,d)))]}var p=c(47467),q=c(4315);let r=(0,i.CN)({is:a=>"ColumnUpdateNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ColumnUpdateNode",column:a,value:b})});var s=c(2952);function t(a){return Object.entries((0,i.Tn)(a)?a((0,n.A)()):a).filter(([a,b])=>void 0!==b).map(([a,b])=>r.create(f.Z.create(a),(0,j.$s)(b)))}let u=(0,i.CN)({is:a=>"OnDuplicateKeyNode"===a.kind,create:a=>(0,i.CN)({kind:"OnDuplicateKeyNode",updates:a})});class v{insertId;numInsertedOrUpdatedRows;constructor(a,b){this.insertId=a,this.numInsertedOrUpdatedRows=b}}var w=c(10106),x=c(81266),y=c(54744);let z=(0,i.CN)({is:a=>"OnConflictNode"===a.kind,create:()=>(0,i.CN)({kind:"OnConflictNode"}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithIndexWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"And",b):y.o.create(b)}),cloneWithIndexOrWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"Or",b):y.o.create(b)}),cloneWithUpdateWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"And",b):y.o.create(b)}),cloneWithUpdateOrWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"Or",b):y.o.create(b)}),cloneWithoutIndexWhere:a=>(0,i.CN)({...a,indexWhere:void 0}),cloneWithoutUpdateWhere:a=>(0,i.CN)({...a,updateWhere:void 0})});var A=c(53284);class B{#s;constructor(a){this.#s=(0,i.CN)(a)}column(a){let b=f.Z.create(a);return new B({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{columns:this.#s.onConflictNode.columns?(0,i.CN)([...this.#s.onConflictNode.columns,b]):(0,i.CN)([b])})})}columns(a){let b=a.map(f.Z.create);return new B({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{columns:this.#s.onConflictNode.columns?(0,i.CN)([...this.#s.onConflictNode.columns,...b]):(0,i.CN)(b)})})}constraint(a){return new B({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{constraint:x.O.create(a)})})}expression(a){return new B({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{indexExpression:a.toOperationNode()})})}where(...a){return new B({...this.#s,onConflictNode:z.cloneWithIndexWhere(this.#s.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new B({...this.#s,onConflictNode:z.cloneWithIndexWhere(this.#s.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new B({...this.#s,onConflictNode:z.cloneWithoutIndexWhere(this.#s.onConflictNode)})}doNothing(){return new C({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{doNothing:!0})})}doUpdateSet(a){return new D({...this.#s,onConflictNode:z.cloneWith(this.#s.onConflictNode,{updates:t(a)})})}$call(a){return a(this)}}class C{#s;constructor(a){this.#s=(0,i.CN)(a)}toOperationNode(){return this.#s.onConflictNode}}class D{#s;constructor(a){this.#s=(0,i.CN)(a)}where(...a){return new D({...this.#s,onConflictNode:z.cloneWithUpdateWhere(this.#s.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new D({...this.#s,onConflictNode:z.cloneWithUpdateWhere(this.#s.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new D({...this.#s,onConflictNode:z.cloneWithoutUpdateWhere(this.#s.onConflictNode)})}$call(a){return a(this)}toOperationNode(){return this.#s.onConflictNode}}var E=c(36903);let F=(0,i.CN)({is:a=>"OrActionNode"===a.kind,create:a=>(0,i.CN)({kind:"OrActionNode",action:a})});class G{#s;constructor(a){this.#s=(0,i.CN)(a)}values(a){let[b,c]=o(a);return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{columns:b,values:c})})}columns(a){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{columns:(0,i.CN)(a.map(f.Z.create))})})}expression(a){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{values:(0,l.YK)(a)})})}defaultValues(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{defaultValues:!0})})}modifyEnd(a){return new G({...this.#s,queryNode:q.L.cloneWithEndModifier(this.#s.queryNode,a.toOperationNode())})}ignore(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("ignore")})})}orIgnore(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("ignore")})})}orAbort(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("abort")})})}orFail(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("fail")})})}orReplace(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("replace")})})}orRollback(){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{orAction:F.create("rollback")})})}top(a,b){return new G({...this.#s,queryNode:q.L.cloneWithTop(this.#s.queryNode,(0,E.f)(a,b))})}onConflict(a){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{onConflict:a(new B({onConflictNode:z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(a){return new G({...this.#s,queryNode:p.o.cloneWith(this.#s.queryNode,{onDuplicateKey:u.create(t(a))})})}returning(a){return new G({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.G)(a))})}returningAll(){return new G({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.J)())})}output(a){return new G({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.G)(a))})}outputAll(a){return new G({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.J)(a))})}clearReturning(){return new G({...this.#s,queryNode:q.L.cloneWithoutReturning(this.#s.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new G({...this.#s})}$castTo(){return new G(this.#s)}$narrowType(){return new G(this.#s)}$assertType(){return new G(this.#s)}withPlugin(a){return new G({...this.#s,executor:this.#s.executor.withPlugin(a)})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.queryNode,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){let a=this.compile(),b=await this.#s.executor.executeQuery(a),{adapter:c}=this.#s.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new v(b.insertId,b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#s.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new G({...this.#s,queryNode:q.L.cloneWithExplain(this.#s.queryNode,a,b)});return await c.execute()}}var H=c(51591),I=c(19795);class J{numDeletedRows;constructor(a){this.numDeletedRows=a}}var K=c(83197),L=c(70020),M=c(68019);class N{#s;constructor(a){this.#s=(0,i.CN)(a)}where(...a){return new N({...this.#s,queryNode:q.L.cloneWithWhere(this.#s.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new N({...this.#s,queryNode:q.L.cloneWithWhere(this.#s.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new N({...this.#s,queryNode:q.L.cloneWithoutWhere(this.#s.queryNode)})}top(a,b){return new N({...this.#s,queryNode:q.L.cloneWithTop(this.#s.queryNode,(0,E.f)(a,b))})}using(a){return new N({...this.#s,queryNode:K.e.cloneWithUsing(this.#s.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#ac("InnerJoin",a)}leftJoin(...a){return this.#ac("LeftJoin",a)}rightJoin(...a){return this.#ac("RightJoin",a)}fullJoin(...a){return this.#ac("FullJoin",a)}#ac(a,b){return new N({...this.#s,queryNode:q.L.cloneWithJoin(this.#s.queryNode,(0,H.a)(a,b))})}returning(a){return new N({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.G)(a))})}returningAll(a){return new N({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.J)(a))})}output(a){return new N({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.G)(a))})}outputAll(a){return new N({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.J)(a))})}clearReturning(){return new N({...this.#s,queryNode:q.L.cloneWithoutReturning(this.#s.queryNode)})}clearLimit(){return new N({...this.#s,queryNode:K.e.cloneWithoutLimit(this.#s.queryNode)})}orderBy(...a){return new N({...this.#s,queryNode:q.L.cloneWithOrderByItems(this.#s.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new N({...this.#s,queryNode:q.L.cloneWithoutOrderBy(this.#s.queryNode)})}limit(a){return new N({...this.#s,queryNode:K.e.cloneWithLimit(this.#s.queryNode,L.a.create((0,j.$s)(a)))})}modifyEnd(a){return new N({...this.#s,queryNode:q.L.cloneWithEndModifier(this.#s.queryNode,a.toOperationNode())})}$call(a){return a(this)}$if(a,b){return a?b(this):new N({...this.#s})}$castTo(){return new N(this.#s)}$narrowType(){return new N(this.#s)}$assertType(){return new N(this.#s)}withPlugin(a){return new N({...this.#s,executor:this.#s.executor.withPlugin(a)})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.queryNode,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){let a=this.compile(),b=await this.#s.executor.executeQuery(a),{adapter:c}=this.#s.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new J(b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#s.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new N({...this.#s,queryNode:q.L.cloneWithExplain(this.#s.queryNode,a,b)});return await c.execute()}}var O=c(93087);class P{numUpdatedRows;numChangedRows;constructor(a,b){this.numUpdatedRows=a,this.numChangedRows=b}}class Q{#s;constructor(a){this.#s=(0,i.CN)(a)}where(...a){return new Q({...this.#s,queryNode:q.L.cloneWithWhere(this.#s.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new Q({...this.#s,queryNode:q.L.cloneWithWhere(this.#s.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new Q({...this.#s,queryNode:q.L.cloneWithoutWhere(this.#s.queryNode)})}top(a,b){return new Q({...this.#s,queryNode:q.L.cloneWithTop(this.#s.queryNode,(0,E.f)(a,b))})}from(a){return new Q({...this.#s,queryNode:O.U.cloneWithFromItems(this.#s.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#ac("InnerJoin",a)}leftJoin(...a){return this.#ac("LeftJoin",a)}rightJoin(...a){return this.#ac("RightJoin",a)}fullJoin(...a){return this.#ac("FullJoin",a)}#ac(a,b){return new Q({...this.#s,queryNode:q.L.cloneWithJoin(this.#s.queryNode,(0,H.a)(a,b))})}orderBy(...a){return new Q({...this.#s,queryNode:q.L.cloneWithOrderByItems(this.#s.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new Q({...this.#s,queryNode:q.L.cloneWithoutOrderBy(this.#s.queryNode)})}limit(a){return new Q({...this.#s,queryNode:O.U.cloneWithLimit(this.#s.queryNode,L.a.create((0,j.$s)(a)))})}set(...a){return new Q({...this.#s,queryNode:O.U.cloneWithUpdates(this.#s.queryNode,function(...a){return 2===a.length?[r.create((0,s.$O)(a[0]),(0,j.$s)(a[1]))]:t(a[0])}(...a))})}returning(a){return new Q({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.G)(a))})}returningAll(a){return new Q({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.J)(a))})}output(a){return new Q({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.G)(a))})}outputAll(a){return new Q({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.J)(a))})}modifyEnd(a){return new Q({...this.#s,queryNode:q.L.cloneWithEndModifier(this.#s.queryNode,a.toOperationNode())})}clearReturning(){return new Q({...this.#s,queryNode:q.L.cloneWithoutReturning(this.#s.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new Q({...this.#s})}$castTo(){return new Q(this.#s)}$narrowType(){return new Q(this.#s)}$assertType(){return new Q(this.#s)}withPlugin(a){return new Q({...this.#s,executor:this.#s.executor.withPlugin(a)})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.queryNode,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){let a=this.compile(),b=await this.#s.executor.executeQuery(a),{adapter:c}=this.#s.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new P(b.numAffectedRows??BigInt(0),b.numChangedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#s.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new Q({...this.#s,queryNode:q.L.cloneWithExplain(this.#s.queryNode,a,b)});return await c.execute()}}var R=c(18804),S=c(69385);let T=(0,i.CN)({is:a=>"CommonTableExpressionNameNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNameNode",table:S.H.create(a),columns:b?(0,i.CN)(b.map(f.Z.create)):void 0})});var U=c(71088);let V=(0,i.CN)({is:a=>"CommonTableExpressionNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNode",name:a,expression:b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class W{#s;constructor(a){this.#s=(0,i.CN)(a)}materialized(){return new W({...this.#s,node:V.cloneWith(this.#s.node,{materialized:!0})})}notMaterialized(){return new W({...this.#s,node:V.cloneWith(this.#s.node,{materialized:!1})})}toOperationNode(){return this.#s.node}}function X(a,b){var c;let d=b((0,U.bl)()).toOperationNode();return(0,i.Tn)(a)?a((c=d,a=>new W({node:V.create(Y(a),c)}))).toOperationNode():V.create(Y(a),d)}function Y(a){if(!a.includes("("))return T.create(a);{let b=a.split(/[\(\)]/),c=b[0],d=b[1].split(",").map(a=>a.trim());return T.create(c,d)}}let Z=(0,i.CN)({is:a=>"WithNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"WithNode",expressions:(0,i.CN)([a]),...b}),cloneWithExpression:(a,b)=>(0,i.CN)({...a,expressions:(0,i.CN)([...a.expressions,b])})});var $=c(31700),_=c(19151),aa=c(24118);let ab=(0,i.CN)({is:a=>"MatchedNode"===a.kind,create:(a,b=!1)=>(0,i.CN)({kind:"MatchedNode",not:a,bySource:b})});var ac=c(39450),ad=c(31575),ae=c(33423);function af(a,b,c){return ae.t.create((0,A.KN)([ab.create(!a.isMatched,a.bySource),...b&&b.length>0?[3===b.length&&c?(0,A.vC)(b[0],b[1],b[2]):(0,A.GB)(b)]:[]],"and",!1))}function ag(a){return(0,i.Kg)(a)?ad.z.create([a],[]):(0,ac.N)(a)?a.toOperationNode():a}var ah=c(22795);class ai{numChangedRows;constructor(a){this.numChangedRows=a}}class aj{#s;constructor(a){this.#s=(0,i.CN)(a)}modifyEnd(a){return new aj({...this.#s,queryNode:q.L.cloneWithEndModifier(this.#s.queryNode,a.toOperationNode())})}top(a,b){return new aj({...this.#s,queryNode:q.L.cloneWithTop(this.#s.queryNode,(0,E.f)(a,b))})}using(...a){return new ak({...this.#s,queryNode:aa.r.cloneWithUsing(this.#s.queryNode,(0,H.a)("Using",a))})}returning(a){return new aj({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.G)(a))})}returningAll(a){return new aj({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.J)(a))})}output(a){return new aj({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.G)(a))})}outputAll(a){return new aj({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.J)(a))})}}class ak{#s;constructor(a){this.#s=(0,i.CN)(a)}modifyEnd(a){return new ak({...this.#s,queryNode:q.L.cloneWithEndModifier(this.#s.queryNode,a.toOperationNode())})}top(a,b){return new ak({...this.#s,queryNode:q.L.cloneWithTop(this.#s.queryNode,(0,E.f)(a,b))})}whenMatched(){return this.#ad([])}whenMatchedAnd(...a){return this.#ad(a)}whenMatchedAndRef(a,b,c){return this.#ad([a,b,c],!0)}#ad(a,b){return new al({...this.#s,queryNode:aa.r.cloneWithWhen(this.#s.queryNode,af({isMatched:!0},a,b))})}whenNotMatched(){return this.#ae([])}whenNotMatchedAnd(...a){return this.#ae(a)}whenNotMatchedAndRef(a,b,c){return this.#ae([a,b,c],!0)}whenNotMatchedBySource(){return this.#ae([],!1,!0)}whenNotMatchedBySourceAnd(...a){return this.#ae(a,!1,!0)}whenNotMatchedBySourceAndRef(a,b,c){return this.#ae([a,b,c],!0,!0)}returning(a){return new ak({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.G)(a))})}returningAll(a){return new ak({...this.#s,queryNode:q.L.cloneWithReturning(this.#s.queryNode,(0,e.J)(a))})}output(a){return new ak({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.G)(a))})}outputAll(a){return new ak({...this.#s,queryNode:q.L.cloneWithOutput(this.#s.queryNode,(0,e.J)(a))})}#ae(a,b=!1,c=!1){let d={...this.#s,queryNode:aa.r.cloneWithWhen(this.#s.queryNode,af({isMatched:!1,bySource:c},a,b))};return new(c?al:am)(d)}$call(a){return a(this)}$if(a,b){return a?b(this):new ak({...this.#s})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.queryNode,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){let a=this.compile(),b=await this.#s.executor.executeQuery(a),{adapter:c}=this.#s.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new ai(b.numAffectedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}}class al{#s;constructor(a){this.#s=(0,i.CN)(a)}thenDelete(){return new ak({...this.#s,queryNode:aa.r.cloneWithThen(this.#s.queryNode,ag("delete"))})}thenDoNothing(){return new ak({...this.#s,queryNode:aa.r.cloneWithThen(this.#s.queryNode,ag("do nothing"))})}thenUpdate(a){return new ak({...this.#s,queryNode:aa.r.cloneWithThen(this.#s.queryNode,ag(a(new Q({queryId:this.#s.queryId,executor:ah.W,queryNode:O.U.createWithoutTable()}))))})}thenUpdateSet(...a){return this.thenUpdate(b=>b.set(...a))}}class am{#s;constructor(a){this.#s=(0,i.CN)(a)}thenDoNothing(){return new ak({...this.#s,queryNode:aa.r.cloneWithThen(this.#s.queryNode,ag("do nothing"))})}thenInsertValues(a){let[b,c]=o(a);return new ak({...this.#s,queryNode:aa.r.cloneWithThen(this.#s.queryNode,ag(p.o.cloneWith(p.o.createWithoutInto(),{columns:b,values:c})))})}}class an{#s;constructor(a){this.#s=(0,i.CN)(a)}selectFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:R.L.createFrom((0,I.JB)(a),this.#s.withNode)})}selectNoFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:R.L.cloneWithSelections(R.L.create(this.#s.withNode),(0,e.G)(a))})}insertInto(a){return new G({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:p.o.create((0,I.M$)(a),this.#s.withNode)})}replaceInto(a){return new G({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:p.o.create((0,I.M$)(a),this.#s.withNode,!0)})}deleteFrom(a){return new N({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:K.e.create((0,I.JB)(a),this.#s.withNode)})}updateTable(a){return new Q({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:O.U.create((0,I.JB)(a),this.#s.withNode)})}mergeInto(a){return new aj({queryId:(0,$.a)(),executor:this.#s.executor,queryNode:aa.r.create((0,I.Xm)(a),this.#s.withNode)})}with(a,b){let c=X(a,b);return new an({...this.#s,withNode:this.#s.withNode?Z.cloneWithExpression(this.#s.withNode,c):Z.create(c)})}withRecursive(a,b){let c=X(a,b);return new an({...this.#s,withNode:this.#s.withNode?Z.cloneWithExpression(this.#s.withNode,c):Z.create(c,{recursive:!0})})}withPlugin(a){return new an({...this.#s,executor:this.#s.executor.withPlugin(a)})}withoutPlugins(){return new an({...this.#s,executor:this.#s.executor.withoutPlugins()})}withSchema(a){return new an({...this.#s,executor:this.#s.executor.withPluginAtFront(new _.B(a))})}}},66719:(a,b,c)=>{c.d(b,{f:()=>d});function d(...a){let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}},67183:(a,b,c)=>{c.d(b,{c:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"JSONPathNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONPathNode",inOperator:a,pathLegs:(0,d.CN)([])}),cloneWithLeg:(a,b)=>(0,d.CN)({...a,pathLegs:(0,d.CN)([...a.pathLegs,b])})})},67849:(a,b,c)=>{c.d(b,{Qs:()=>h,xA:()=>g});var d=c(59165),e=c(72168);let f=async()=>{let a=(0,d.Q)();if(!a.context.endpointContextAsyncStorage){let b=await (0,e.V)();a.context.endpointContextAsyncStorage=new b}return a.context.endpointContextAsyncStorage};async function g(){let a=(await f()).getStore();if(!a)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return a}async function h(a,b){return(await f()).run(a,b)}},68019:(a,b,c)=>{c.d(b,{bE:()=>o,xk:()=>p});var d=c(27646),e=c(70010),f=c(60353);let g=(0,f.CN)({is:a=>"OrderByItemNode"===a.kind,create:(a,b)=>(0,f.CN)({kind:"OrderByItemNode",orderBy:a,direction:b}),cloneWith:(a,b)=>(0,f.CN)({...a,...b})});var h=c(31575),i=c(81266);let j=(0,f.CN)({is:a=>"CollateNode"===a.kind,create:a=>(0,f.CN)({kind:"CollateNode",collation:i.O.create(a)})});class k{#s;constructor(a){this.#s=(0,f.CN)(a)}desc(){return new k({node:g.cloneWith(this.#s.node,{direction:h.z.createWithSql("desc")})})}asc(){return new k({node:g.cloneWith(this.#s.node,{direction:h.z.createWithSql("asc")})})}nullsLast(){return new k({node:g.cloneWith(this.#s.node,{nulls:"last"})})}nullsFirst(){return new k({node:g.cloneWith(this.#s.node,{nulls:"first"})})}collate(a){return new k({node:g.cloneWith(this.#s.node,{collation:j.create(a)})})}toOperationNode(){return this.#s.node}}var l=c(80234),m=c(57105),n=c(2952);function o(a){return"asc"===a||"desc"===a}function p(a){if(2===a.length)return[q(a[0],a[1])];if(1===a.length){let[b]=a;return Array.isArray(b)?((0,l.u)("orderBy(array) is deprecated, use multiple orderBy calls instead."),b.map(a=>q(a))):[q(b)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${a.length}`)}function q(a,b){let c=function(a){if((0,m.SS)(a))return(0,m.YK)(a);if((0,d.C)(a))return a.toOperationNode();let[b,c]=a.split(" ");return c?((0,l.u)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),r((0,n.q5)(b),c)):(0,n.q5)(a)}(a);if(g.is(c)){if(b)throw Error("Cannot specify direction twice!");return c}return r(c,b)}function r(a,b){if("string"==typeof b){if(!o(b))throw Error(`Invalid order by direction: ${b}`);return g.create(a,h.z.createWithSql(b))}if((0,e.B)(b))return(0,l.u)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),g.create(a,b.toOperationNode());let c=g.create(a);return b?b(new k({node:c})).toOperationNode():c}},68558:(a,b,c)=>{c.d(b,{n:()=>p});var d=c(93092),e=c(47467),f=c(60353);class g{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#af=(0,f.CN)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=a=>{this.nodeStack.push(a),this.#af[a.kind](a),this.nodeStack.pop()}}var h=c(40659),i=c(94296),j=c(31575),k=c(88487),l=c(90409),m=c(33423),n=c(80234);let o=/'/g;class p extends g{#ag="";#ah=[];get numParameters(){return this.#ah.length}compileQuery(a,b){return this.#ag="",this.#ah=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(a),(0,f.CN)({query:a,queryId:b,sql:this.getSql(),parameters:[...this.#ah]})}getSql(){return this.#ag}visitSelectQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!e.o.is(this.parentNode)&&!d.B.is(this.parentNode)&&!k.Y.is(this.parentNode)&&!l.i.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("select"),a.distinctOn&&(this.append(" "),this.compileDistinctOn(a.distinctOn)),a.frontModifiers?.length&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.top&&(this.append(" "),this.visitNode(a.top)),a.selections&&(this.append(" "),this.compileList(a.selections)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.groupBy&&(this.append(" "),this.visitNode(a.groupBy)),a.having&&(this.append(" "),this.visitNode(a.having)),a.setOperations&&(this.append(" "),this.compileList(a.setOperations," ")),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.offset&&(this.append(" "),this.visitNode(a.offset)),a.fetch&&(this.append(" "),this.visitNode(a.fetch)),a.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...a.endModifiers])," ")),b&&this.append(")")}visitFrom(a){this.append("from "),this.compileList(a.froms)}visitSelection(a){this.visitNode(a.selection)}visitColumn(a){this.visitNode(a.column)}compileDistinctOn(a){this.append("distinct on ("),this.compileList(a),this.append(")")}compileList(a,b=", "){let c=a.length-1;for(let d=0;d<=c;d++)this.visitNode(a[d]),d<c&&this.append(b)}visitWhere(a){this.append("where "),this.visitNode(a.where)}visitHaving(a){this.append("having "),this.visitNode(a.having)}visitInsertQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode)&&!m.t.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append(a.replace?"replace":"insert"),a.ignore&&((0,n.u)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),a.orAction&&(this.append(" "),this.visitNode(a.orAction)),a.top&&(this.append(" "),this.visitNode(a.top)),a.into&&(this.append(" into "),this.visitNode(a.into)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.output&&(this.append(" "),this.visitNode(a.output)),a.values&&(this.append(" "),this.visitNode(a.values)),a.defaultValues&&(this.append(" "),this.append("default values")),a.onConflict&&(this.append(" "),this.visitNode(a.onConflict)),a.onDuplicateKey&&(this.append(" "),this.visitNode(a.onDuplicateKey)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitValues(a){this.append("values "),this.compileList(a.values)}visitDeleteQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("delete "),a.top&&(this.visitNode(a.top),this.append(" ")),this.visitNode(a.from),a.output&&(this.append(" "),this.visitNode(a.output)),a.using&&(this.append(" "),this.visitNode(a.using)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitReturning(a){this.append("returning "),this.compileList(a.selections)}visitAlias(a){this.visitNode(a.node),this.append(" as "),this.visitNode(a.alias)}visitReference(a){a.table&&(this.visitNode(a.table),this.append(".")),this.visitNode(a.column)}visitSelectAll(a){this.append("*")}visitIdentifier(a){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(a),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(a){if(!(0,f.Kg)(a.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(a.name))}visitAnd(a){this.visitNode(a.left),this.append(" and "),this.visitNode(a.right)}visitOr(a){this.visitNode(a.left),this.append(" or "),this.visitNode(a.right)}visitValue(a){a.immediate?this.appendImmediateValue(a.value):this.appendValue(a.value)}visitValueList(a){this.append("("),this.compileList(a.values),this.append(")")}visitTuple(a){this.append("("),this.compileList(a.values),this.append(")")}visitPrimitiveValueList(a){this.append("(");let{values:b}=a;for(let a=0;a<b.length;++a)this.appendValue(b[a]),a!==b.length-1&&this.append(", ");this.append(")")}visitParens(a){this.append("("),this.visitNode(a.node),this.append(")")}visitJoin(a){this.append(s[a.joinType]),this.append(" "),this.visitNode(a.table),a.on&&(this.append(" "),this.visitNode(a.on))}visitOn(a){this.append("on "),this.visitNode(a.on)}visitRaw(a){let{sqlFragments:b,parameters:c}=a;for(let a=0;a<b.length;++a)this.append(b[a]),c.length>a&&this.visitNode(c[a])}visitOperator(a){this.append(a.operator)}visitTable(a){this.visitNode(a.table)}visitSchemableIdentifier(a){a.schema&&(this.visitNode(a.schema),this.append(".")),this.visitNode(a.identifier)}visitCreateTable(a){this.append("create "),a.frontModifiers&&a.frontModifiers.length>0&&(this.compileList(a.frontModifiers," "),this.append(" ")),a.temporary&&this.append("temporary "),this.append("table "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.table),a.selectQuery?(this.append(" as "),this.visitNode(a.selectQuery)):(this.append(" ("),this.compileList([...a.columns,...a.constraints??[]]),this.append(")"),a.onCommit&&(this.append(" on commit "),this.append(a.onCommit)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," ")))}visitColumnDefinition(a){a.ifNotExists&&this.append("if not exists "),this.visitNode(a.column),this.append(" "),this.visitNode(a.dataType),a.unsigned&&this.append(" unsigned"),a.frontModifiers&&a.frontModifiers.length>0&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.generated&&(this.append(" "),this.visitNode(a.generated)),a.identity&&this.append(" identity"),a.defaultTo&&(this.append(" "),this.visitNode(a.defaultTo)),a.notNull&&this.append(" not null"),a.unique&&this.append(" unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.primaryKey&&this.append(" primary key"),a.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),a.references&&(this.append(" "),this.visitNode(a.references)),a.check&&(this.append(" "),this.visitNode(a.check)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(a){this.append("references "),this.visitNode(a.table),this.append(" ("),this.compileList(a.columns),this.append(")"),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate))}visitDropTable(a){this.append("drop table "),a.ifExists&&this.append("if exists "),this.visitNode(a.table),a.cascade&&this.append(" cascade")}visitDataType(a){this.append(a.dataType)}visitOrderBy(a){this.append("order by "),this.compileList(a.items)}visitOrderByItem(a){this.visitNode(a.orderBy),a.collation&&(this.append(" "),this.visitNode(a.collation)),a.direction&&(this.append(" "),this.visitNode(a.direction)),a.nulls&&(this.append(" nulls "),this.append(a.nulls))}visitGroupBy(a){this.append("group by "),this.compileList(a.items)}visitGroupByItem(a){this.visitNode(a.groupBy)}visitUpdateQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!j.z.is(this.parentNode)&&!m.t.is(this.parentNode);if(void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("update "),a.top&&(this.visitNode(a.top),this.append(" ")),a.table&&(this.visitNode(a.table),this.append(" ")),this.append("set "),a.updates&&this.compileList(a.updates),a.output&&(this.append(" "),this.visitNode(a.output)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins){if(!a.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(a.joins," ")}a.where&&(this.append(" "),this.visitNode(a.where)),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitColumnUpdate(a){this.visitNode(a.column),this.append(" = "),this.visitNode(a.value)}visitLimit(a){this.append("limit "),this.visitNode(a.limit)}visitOffset(a){this.append("offset "),this.visitNode(a.offset)}visitOnConflict(a){this.append("on conflict"),a.columns?(this.append(" ("),this.compileList(a.columns),this.append(")")):a.constraint?(this.append(" on constraint "),this.visitNode(a.constraint)):a.indexExpression&&(this.append(" ("),this.visitNode(a.indexExpression),this.append(")")),a.indexWhere&&(this.append(" "),this.visitNode(a.indexWhere)),!0===a.doNothing?this.append(" do nothing"):a.updates&&(this.append(" do update set "),this.compileList(a.updates),a.updateWhere&&(this.append(" "),this.visitNode(a.updateWhere)))}visitOnDuplicateKey(a){this.append("on duplicate key update "),this.compileList(a.updates)}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.using&&(this.append(" using "),this.visitNode(a.using)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.where&&(this.append(" "),this.visitNode(a.where))}visitDropIndex(a){this.append("drop index "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.cascade&&this.append(" cascade")}visitCreateSchema(a){this.append("create schema "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.schema)}visitDropSchema(a){this.append("drop schema "),a.ifExists&&this.append("if exists "),this.visitNode(a.schema),a.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("primary key ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}buildDeferrable(a){void 0!==a.deferrable&&(a.deferrable?this.append(" deferrable"):this.append(" not deferrable")),void 0!==a.initiallyDeferred&&(a.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}visitCheckConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("check ("),this.visitNode(a.expression),this.append(")")}visitForeignKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("foreign key ("),this.compileList(a.columns),this.append(") "),this.visitNode(a.references),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate)),this.buildDeferrable(a)}visitList(a){this.compileList(a.items)}visitWith(a){this.append("with "),a.recursive&&this.append("recursive "),this.compileList(a.expressions)}visitCommonTableExpression(a){this.visitNode(a.name),this.append(" as "),(0,f.Lm)(a.materialized)&&(a.materialized||this.append("not "),this.append("materialized ")),this.visitNode(a.expression)}visitCommonTableExpressionName(a){this.visitNode(a.table),a.columns&&(this.append("("),this.compileList(a.columns),this.append(")"))}visitAlterTable(a){this.append("alter table "),this.visitNode(a.table),this.append(" "),a.renameTo&&(this.append("rename to "),this.visitNode(a.renameTo)),a.setSchema&&(this.append("set schema "),this.visitNode(a.setSchema)),a.addConstraint&&this.visitNode(a.addConstraint),a.dropConstraint&&this.visitNode(a.dropConstraint),a.renameConstraint&&this.visitNode(a.renameConstraint),a.columnAlterations&&this.compileColumnAlterations(a.columnAlterations),a.addIndex&&this.visitNode(a.addIndex),a.dropIndex&&this.visitNode(a.dropIndex)}visitAddColumn(a){this.append("add column "),this.visitNode(a.column)}visitRenameColumn(a){this.append("rename column "),this.visitNode(a.column),this.append(" to "),this.visitNode(a.renameTo)}visitDropColumn(a){this.append("drop column "),this.visitNode(a.column)}visitAlterColumn(a){this.append("alter column "),this.visitNode(a.column),this.append(" "),a.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(a.dataType),a.dataTypeExpression&&(this.append("using "),this.visitNode(a.dataTypeExpression))),a.setDefault&&(this.append("set default "),this.visitNode(a.setDefault)),a.dropDefault&&this.append("drop default"),a.setNotNull&&this.append("set not null"),a.dropNotNull&&this.append("drop not null")}visitModifyColumn(a){this.append("modify column "),this.visitNode(a.column)}visitAddConstraint(a){this.append("add "),this.visitNode(a.constraint)}visitDropConstraint(a){this.append("drop constraint "),a.ifExists&&this.append("if exists "),this.visitNode(a.constraintName),"cascade"===a.modifier?this.append(" cascade"):"restrict"===a.modifier&&this.append(" restrict")}visitRenameConstraint(a){this.append("rename constraint "),this.visitNode(a.oldName),this.append(" to "),this.visitNode(a.newName)}visitSetOperation(a){this.append(a.operator),this.append(" "),a.all&&this.append("all "),this.visitNode(a.expression)}visitCreateView(a){this.append("create "),a.orReplace&&this.append("or replace "),a.materialized&&this.append("materialized "),a.temporary&&this.append("temporary "),this.append("view "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),this.append(" "),a.columns&&(this.append("("),this.compileList(a.columns),this.append(") ")),a.as&&(this.append("as "),this.visitNode(a.as))}visitRefreshMaterializedView(a){this.append("refresh materialized view "),a.concurrently&&this.append("concurrently "),this.visitNode(a.name),a.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(a){this.append("drop "),a.materialized&&this.append("materialized "),this.append("view "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.cascade&&this.append(" cascade")}visitGenerated(a){this.append("generated "),a.always&&this.append("always "),a.byDefault&&this.append("by default "),this.append("as "),a.identity&&this.append("identity"),a.expression&&(this.append("("),this.visitNode(a.expression),this.append(")")),a.stored&&this.append(" stored")}visitDefaultValue(a){this.append("default "),this.visitNode(a.defaultValue)}visitSelectModifier(a){a.rawModifier?this.visitNode(a.rawModifier):this.append(q[a.modifier]),a.of&&(this.append(" of "),this.compileList(a.of,", "))}visitCreateType(a){this.append("create type "),this.visitNode(a.name),a.enum&&(this.append(" as enum "),this.visitNode(a.enum))}visitDropType(a){this.append("drop type "),a.ifExists&&this.append("if exists "),this.visitNode(a.name)}visitExplain(a){this.append("explain"),(a.options||a.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),a.options&&(this.visitNode(a.options),a.format&&this.append(this.getExplainOptionsDelimiter())),a.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(a.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(a){this.append("default")}visitAggregateFunction(a){this.append(a.func),this.append("("),a.distinct&&this.append("distinct "),this.compileList(a.aggregated),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),this.append(")"),a.withinGroup&&(this.append(" within group ("),this.visitNode(a.withinGroup),this.append(")")),a.filter&&(this.append(" filter("),this.visitNode(a.filter),this.append(")")),a.over&&(this.append(" "),this.visitNode(a.over))}visitOver(a){this.append("over("),a.partitionBy&&(this.visitNode(a.partitionBy),a.orderBy&&this.append(" ")),a.orderBy&&this.visitNode(a.orderBy),this.append(")")}visitPartitionBy(a){this.append("partition by "),this.compileList(a.items)}visitPartitionByItem(a){this.visitNode(a.partitionBy)}visitBinaryOperation(a){this.visitNode(a.leftOperand),this.append(" "),this.visitNode(a.operator),this.append(" "),this.visitNode(a.rightOperand)}visitUnaryOperation(a){this.visitNode(a.operator),this.isMinusOperator(a.operator)||this.append(" "),this.visitNode(a.operand)}isMinusOperator(a){return h.zX.is(a)&&"-"===a.operator}visitUsing(a){this.append("using "),this.compileList(a.tables)}visitFunction(a){this.append(a.func),this.append("("),this.compileList(a.arguments),this.append(")")}visitCase(a){this.append("case"),a.value&&(this.append(" "),this.visitNode(a.value)),a.when&&(this.append(" "),this.compileList(a.when," ")),a.else&&(this.append(" else "),this.visitNode(a.else)),this.append(" end"),a.isStatement&&this.append(" case")}visitWhen(a){this.append("when "),this.visitNode(a.condition),a.result&&(this.append(" then "),this.visitNode(a.result))}visitJSONReference(a){this.visitNode(a.reference),this.visitNode(a.traversal)}visitJSONPath(a){for(let b of(a.inOperator&&this.visitNode(a.inOperator),this.append("'$"),a.pathLegs))this.visitNode(b);this.append("'")}visitJSONPathLeg(a){let b="ArrayLocation"===a.type;this.append(b?"[":"."),this.append(String(a.value)),b&&this.append("]")}visitJSONOperatorChain(a){for(let b=0,c=a.values.length;b<c;b++)b===c-1?this.visitNode(a.operator):this.append("->"),this.visitNode(a.values[b])}visitMergeQuery(a){a.with&&(this.visitNode(a.with),this.append(" ")),this.append("merge "),a.top&&(this.visitNode(a.top),this.append(" ")),this.append("into "),this.visitNode(a.into),a.using&&(this.append(" "),this.visitNode(a.using)),a.whens&&(this.append(" "),this.compileList(a.whens," ")),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.output&&(this.append(" "),this.visitNode(a.output)),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitMatched(a){a.not&&this.append("not "),this.append("matched"),a.bySource&&this.append(" by source")}visitAddIndex(a){this.append("add "),a.unique&&this.append("unique "),this.append("index "),this.visitNode(a.name),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.using&&(this.append(" using "),this.visitNode(a.using))}visitCast(a){this.append("cast("),this.visitNode(a.expression),this.append(" as "),this.visitNode(a.dataType),this.append(")")}visitFetch(a){this.append("fetch next "),this.visitNode(a.rowCount),this.append(` rows ${a.modifier}`)}visitOutput(a){this.append("output "),this.compileList(a.selections)}visitTop(a){this.append(`top(${a.expression})`),a.modifiers&&this.append(` ${a.modifiers}`)}visitOrAction(a){this.append(a.action)}visitCollate(a){this.append("collate "),this.visitNode(a.collation)}append(a){this.#ag+=a}appendValue(a){this.addParameter(a),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(a){let b=this.getLeftIdentifierWrapper(),c=this.getRightIdentifierWrapper(),d="";for(let e of a)d+=e,e===b?d+=b:e===c&&(d+=c);return d}sanitizeStringLiteral(a){return a.replace(o,"''")}addParameter(a){this.#ah.push(a)}appendImmediateValue(a){if((0,f.Kg)(a))this.appendStringLiteral(a);else if((0,f.Et)(a)||(0,f.Lm)(a)||(0,f.sI)(a))this.append(a.toString());else if((0,f.kZ)(a))this.append("null");else if((0,f.$P)(a))this.appendImmediateValue(a.toISOString());else throw Error(`invalid immediate value ${a}`)}appendStringLiteral(a){this.append("'"),this.append(this.sanitizeStringLiteral(a)),this.append("'")}sortSelectModifiers(a){return a.sort((a,b)=>a.modifier&&b.modifier?r[a.modifier]-r[b.modifier]:1),(0,f.CN)(a)}compileColumnAlterations(a){this.compileList(a)}announcesNewColumnDataType(){return!0}}let q=(0,f.CN)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),r=(0,f.CN)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),s=(0,f.CN)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})},69079:(a,b,c)=>{c.d(b,{P:()=>f});var d=c(60353),e=c(33423);let f=(0,d.CN)({is:a=>"CaseNode"===a.kind,create:a=>(0,d.CN)({kind:"CaseNode",value:a}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,when:(0,d.CN)(a.when?[...a.when,b]:[b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,when:a.when?(0,d.CN)([...a.when.slice(0,-1),e.t.cloneWithResult(a.when[a.when.length-1],b)]):void 0}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},69333:(a,b,c)=>{c.d(b,{sc:()=>r});var d=c(89875);class e{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(a,b,c,e){this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=e,this.buffer=new Uint8Array(a),this.view=(0,d.O8)(this.buffer)}update(a){(0,d.CC)(this),(0,d.DO)(a);let{view:b,buffer:c,blockLen:e}=this,f=a.length;for(let g=0;g<f;){let h=Math.min(e-this.pos,f-g);if(h===e){let b=(0,d.O8)(a);for(;e<=f-g;g+=e)this.process(b,g);continue}c.set(a.subarray(g,g+h),this.pos),this.pos+=h,g+=h,this.pos===e&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){(0,d.CC)(this),(0,d.Ht)(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:e,isLE:f}=this,{pos:g}=this;b[g++]=128,(0,d.uH)(this.buffer.subarray(g)),this.padOffset>e-g&&(this.process(c,0),g=0);for(let a=g;a<e;a++)b[a]=0;c.setBigUint64(e-8,BigInt(8*this.length),f),this.process(c,0);let h=(0,d.O8)(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen must be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){(a||=new this.constructor).set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let f=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),g=BigInt(0x100000000-1),h=BigInt(32),i=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),j=new Uint32Array(64);class k extends e{constructor(a){super(64,a,8,!1)}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)j[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=j[a-15],c=j[a-2],e=(0,d.Ow)(b,7)^(0,d.Ow)(b,18)^b>>>3,f=(0,d.Ow)(c,17)^(0,d.Ow)(c,19)^c>>>10;j[a]=f+j[a-7]+e+j[a-16]|0}let{A:c,B:e,C:f,D:g,E:h,F:k,G:l,H:m}=this;for(let a=0;a<64;a++){var n,o,p,q;let b=m+((0,d.Ow)(h,6)^(0,d.Ow)(h,11)^(0,d.Ow)(h,25))+((n=h)&k^~n&l)+i[a]+j[a]|0,r=((0,d.Ow)(c,2)^(0,d.Ow)(c,13)^(0,d.Ow)(c,22))+((o=c)&(p=e)^o&(q=f)^p&q)|0;m=l,l=k,k=h,h=g+b|0,g=f,f=e,e=c,c=b+r|0}c=c+this.A|0,e=e+this.B|0,f=f+this.C|0,g=g+this.D|0,h=h+this.E|0,k=k+this.F|0,l=l+this.G|0,m=m+this.H|0,this.set(c,e,f,g,h,k,l,m)}roundClean(){(0,d.uH)(j)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,d.uH)(this.buffer)}}class l extends k{A=0|f[0];B=0|f[1];C=0|f[2];D=0|f[3];E=0|f[4];F=0|f[5];G=0|f[6];H=0|f[7];constructor(){super(32)}}let m=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:i}=function(a,b=!1){return b?{h:Number(a&g),l:Number(a>>h&g)}:{h:0|Number(a>>h&g),l:0|Number(a&g)}}(a[f],b);[d[f],e[f]]=[c,i]}return[d,e]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),n=m[0],o=m[1],p=new Uint32Array(80),q=new Uint32Array(80);let r=(0,d.qj)(()=>new l,(0,d.nx)(1))},69385:(a,b,c)=>{c.d(b,{H:()=>f});var d=c(60353),e=c(36923);let f=(0,d.CN)({is:a=>"TableNode"===a.kind,create:a=>(0,d.CN)({kind:"TableNode",table:e.y.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"TableNode",table:e.y.createWithSchema(a,b)})})},69744:(a,b,c)=>{c.d(b,{n:()=>f});var d=c(5109),e=c(40016);function f(a,b){return{digest:async c=>{let f=new TextEncoder,g="string"==typeof c?f.encode(c):c,h=await (0,e.N)().digest(a,g);return"hex"===b?Array.from(new Uint8Array(h)).map(a=>a.toString(16).padStart(2,"0")).join(""):"base64"===b||"base64url"===b||"base64urlnopad"===b?b.includes("url")?d.z.encode(h,{padding:"base64urlnopad"!==b}):d.K.encode(h):h}}}},70010:(a,b,c)=>{c.d(b,{B:()=>f,q:()=>g});var d=c(39450),e=c(60353);function f(a){return(0,e.Gv)(a)&&"expressionType"in a&&(0,d.N)(a)}function g(a){return(0,e.Gv)(a)&&"expression"in a&&(0,e.Kg)(a.alias)&&(0,d.N)(a)}},70020:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"LimitNode"===a.kind,create:a=>(0,d.CN)({kind:"LimitNode",limit:a})})},71088:(a,b,c)=>{c.d(b,{GQ:()=>u,EQ:()=>v,bl:()=>t});var d=c(17793),e=c(60353),f=c(47777);let g=(0,e.CN)({is:a=>"PartitionByNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByNode",items:(0,e.CN)(a)}),cloneWithItems:(a,b)=>(0,e.CN)({...a,items:(0,e.CN)([...a.items,...b])})}),h=(0,e.CN)({is:a=>"OverNode"===a.kind,create:()=>(0,e.CN)({kind:"OverNode"}),cloneWithOrderByItems:(a,b)=>(0,e.CN)({...a,orderBy:a.orderBy?f.O.cloneWithItems(a.orderBy,b):f.O.create(b)}),cloneWithPartitionByItems:(a,b)=>(0,e.CN)({...a,partitionBy:a.partitionBy?g.cloneWithItems(a.partitionBy,b):g.create(b)})});var i=c(31575),j=c(53284);class k{#s;constructor(a){this.#s=(0,e.CN)(a)}on(...a){return new k({...this.#s,joinNode:d.b.cloneWithOn(this.#s.joinNode,(0,j.GB)(a))})}onRef(a,b,c){return new k({...this.#s,joinNode:d.b.cloneWithOn(this.#s.joinNode,(0,j.vC)(a,b,c))})}onTrue(){return new k({...this.#s,joinNode:d.b.cloneWithOn(this.#s.joinNode,i.z.createWithSql("true"))})}$call(a){return a(this)}toOperationNode(){return this.#s.joinNode}}var l=c(4315),m=c(68019);let n=(0,e.CN)({is:a=>"PartitionByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByItemNode",partitionBy:a})});var o=c(2952);class p{#s;constructor(a){this.#s=(0,e.CN)(a)}orderBy(...a){return new p({overNode:h.cloneWithOrderByItems(this.#s.overNode,(0,m.xk)(a))})}clearOrderBy(){return new p({overNode:l.L.cloneWithoutOrderBy(this.#s.overNode)})}partitionBy(a){return new p({overNode:h.cloneWithPartitionByItems(this.#s.overNode,(0,o.kU)(a).map(n.create))})}$call(a){return a(this)}toOperationNode(){return this.#s.overNode}}var q=c(65966),r=c(22795),s=c(19795);function t(){return new q.n({executor:r.W})}function u(a,b){return new k({joinNode:d.b.create(a,(0,s.uJ)(b))})}function v(){return new p({overNode:h.create()})}},71644:(a,b,c)=>{c.d(b,{t:()=>u});var d=c(77688),e=c(60353),f=c(54744),g=c(47777);let h=(0,e.CN)({is:a=>"AggregateFunctionNode"===a.kind,create:(a,b=[])=>(0,e.CN)({kind:"AggregateFunctionNode",func:a,aggregated:b}),cloneWithDistinct:a=>(0,e.CN)({...a,distinct:!0}),cloneWithOrderBy(a,b,c=!1){let d=c?"withinGroup":"orderBy";return(0,e.CN)({...a,[d]:a[d]?g.O.cloneWithItems(a[d],b):g.O.create(b)})},cloneWithFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"And",b):f.o.create(b)}),cloneWithOrFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"Or",b):f.o.create(b)}),cloneWithOver:(a,b)=>(0,e.CN)({...a,over:b})}),i=(0,e.CN)({is:a=>"FunctionNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"FunctionNode",func:a,arguments:b})});var j=c(2952),k=c(65582),l=c(44625),m=c(81266),n=c(71088),o=c(53284),p=c(68019),q=c(4315);class r{#s;constructor(a){this.#s=(0,e.CN)(a)}get expressionType(){}as(a){return new s(this,a)}distinct(){return new r({...this.#s,aggregateFunctionNode:h.cloneWithDistinct(this.#s.aggregateFunctionNode)})}orderBy(...a){return new r({...this.#s,aggregateFunctionNode:q.L.cloneWithOrderByItems(this.#s.aggregateFunctionNode,(0,p.xk)(a))})}clearOrderBy(){return new r({...this.#s,aggregateFunctionNode:q.L.cloneWithoutOrderBy(this.#s.aggregateFunctionNode)})}withinGroupOrderBy(...a){return new r({...this.#s,aggregateFunctionNode:h.cloneWithOrderBy(this.#s.aggregateFunctionNode,(0,p.xk)(a),!0)})}filterWhere(...a){return new r({...this.#s,aggregateFunctionNode:h.cloneWithFilter(this.#s.aggregateFunctionNode,(0,o.GB)(a))})}filterWhereRef(a,b,c){return new r({...this.#s,aggregateFunctionNode:h.cloneWithFilter(this.#s.aggregateFunctionNode,(0,o.vC)(a,b,c))})}over(a){let b=(0,n.EQ)();return new r({...this.#s,aggregateFunctionNode:h.cloneWithOver(this.#s.aggregateFunctionNode,(a?a(b):b).toOperationNode())})}$call(a){return a(this)}$castTo(){return new r(this.#s)}$notNull(){return new r(this.#s)}toOperationNode(){return this.#s.aggregateFunctionNode}}class s{#ai;#p;constructor(a,b){this.#ai=a,this.#p=b}get expression(){return this.#ai}get alias(){return this.#p}toOperationNode(){return l.N.create(this.#ai.toOperationNode(),m.O.create(this.#p))}}var t=c(19795);function u(){let a=(a,b)=>new d.Is(i.create(a,(0,j.kU)(b??[]))),b=(a,b)=>new r({aggregateFunctionNode:h.create(a,b?(0,j.kU)(b):void 0)});return Object.assign(a,{agg:b,avg:a=>b("avg",[a]),coalesce:(...b)=>a("coalesce",b),count:a=>b("count",[a]),countAll:a=>new r({aggregateFunctionNode:h.create("count",(0,k.J)(a))}),max:a=>b("max",[a]),min:a=>b("min",[a]),sum:a=>b("sum",[a]),any:b=>a("any",[b]),jsonAgg:a=>new r({aggregateFunctionNode:h.create("json_agg",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()])}),toJson:a=>new d.Is(i.create("to_json",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()]))})}},72168:(a,b,c)=>{c.d(b,{V:()=>e});let d=import("node:async_hooks").then(a=>a.AsyncLocalStorage).catch(a=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;if("undefined"!=typeof window)return null;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),a});async function e(){let a=await d;if(null!==a)return a;throw Error("getAsyncLocalStorage is only available in server code")}},73519:(a,b,c)=>{c.d(b,{D:()=>e,l:()=>f});var d=c(37432);function e(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:d.D0.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=d.D0.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function f(a){let b=a;return("string"==typeof b&&(b=d.Rd.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},74021:(a,b,c)=>{c.d(b,{x:()=>bQ,d:()=>bP});var d=c(18804),e=c(81266),f=c(31575);function g(a,b){return f.z.createWithChildren([f.z.createWithSql(`${a} `),e.O.create(b)])}var h=c(23090),i=c(60353),j=c(31700);class k{#aj;#ak=new m;#al;#am;constructor(a){this.#aj=(0,i.CN)({...a})}async init(){this.#al=(0,i.Tn)(this.#aj.database)?await this.#aj.database():this.#aj.database,this.#am=new l(this.#al),this.#aj.onCreateConnection&&await this.#aj.onCreateConnection(this.#am)}async acquireConnection(){return await this.#ak.lock(),this.#am}async beginTransaction(a){await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release",b),(0,j.a)()))}async releaseConnection(){this.#ak.unlock()}async destroy(){this.#al?.close()}}class l{#al;constructor(a){this.#al=a}executeQuery(a){let{sql:b,parameters:c}=a,d=this.#al.prepare(b);if(d.reader)return Promise.resolve({rows:d.all(c)});let{changes:e,lastInsertRowid:f}=d.run(c);return Promise.resolve({numAffectedRows:null!=e?BigInt(e):void 0,insertId:null!=f?BigInt(f):void 0,rows:[]})}async *streamQuery(a,b){let{sql:c,parameters:e,query:f}=a,g=this.#al.prepare(c);if(d.L.is(f))for(let a of g.iterate(e))yield{rows:[a]};else throw Error("Sqlite driver only supports streaming of select queries")}}class m{#J;#K;async lock(){for(;this.#J;)await this.#J;this.#J=new Promise(a=>{this.#K=a})}unlock(){let a=this.#K;this.#J=void 0,this.#K=void 0,a?.()}}var n=c(68558);let o=/"/g;class p extends n.n{visitOrAction(a){this.append("or "),this.append(a.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(a){return a.replace(o,'""')}visitDefaultInsertValue(a){this.append("null")}}var q=c(78329),r=c(34220);class s{#al;constructor(a){this.#al=a}async getSchemas(){return[]}async getTables(a={withInternalKyselyTables:!1}){return await this.#an(a)}async getMetadata(a){return{tables:await this.getTables(a)}}#ao(a,b){let c=a.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return b.withInternalKyselyTables||(c=c.where("name","!=",q.kQ).where("name","!=",q.sy)),c}async #an(a){let b=await this.#ao(this.#al,a).execute(),c=await this.#al.with("table_list",b=>this.#ao(b,a)).selectFrom(["table_list as tl",(0,r.l)`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),d={};for(let a of c)d[a.table]??=[],d[a.table].push(a);return b.map(({name:a,sql:b,type:c})=>{let e=b?.split(/[\(\),]/)?.find(a=>a.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),f=d[a]??[];if(!e){let a=f.filter(a=>a.pk>0);1===a.length&&"integer"===a[0].type.toLowerCase()&&(e=a[0].name)}return{name:a,isView:"view"===c,columns:f.map(a=>({name:a.name,dataType:a.type,isNullable:!a.notnull,isAutoIncrementing:a.name===e,hasDefaultValue:null!=a.dflt_value,comment:void 0}))}})}}class t{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class u extends t{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(a,b){}async releaseMigrationLock(a,b){}}class v{#aj;constructor(a){this.#aj=(0,i.CN)({...a})}createDriver(){return new k(this.#aj)}createQueryCompiler(){return new p}createAdapter(){return new u}createIntrospector(a){return new s(a)}}function w(a,b){var c;if(c=a,(0,i.Gv)(c)&&(0,i.Kg)(c.stack)&&b.stack){let c=b.stack.split("\n").slice(1).join("\n");a.stack+=`
${c}`}return a}let x=Symbol();class y{#aj;#ap=new WeakMap;#aq;constructor(a){this.#aj=(0,i.CN)({...a})}async init(){this.#aq=(0,i.Tn)(this.#aj.pool)?await this.#aj.pool():this.#aj.pool}async acquireConnection(){let a=await this.#ar(),b=this.#ap.get(a);return!b&&(b=new z(a),this.#ap.set(a,b),this.#aj?.onCreateConnection&&await this.#aj.onCreateConnection(b)),this.#aj?.onReserveConnection&&await this.#aj.onReserveConnection(b),b}async #ar(){return new Promise((a,b)=>{this.#aq.getConnection(async(c,d)=>{c?b(c):a(d)})})}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c=[];b.isolationLevel&&c.push(`isolation level ${b.isolationLevel}`),b.accessMode&&c.push(b.accessMode);let d=`set transaction ${c.join(", ")}`;await a.executeQuery(h.E.raw(d))}await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release savepoint",b),(0,j.a)()))}async releaseConnection(a){a[x]()}async destroy(){return new Promise((a,b)=>{this.#aq.end(c=>{c?b(c):a()})})}}class z{#as;constructor(a){this.#as=a}async executeQuery(a){try{let b=await this.#at(a);if((0,i.Gv)(b)&&"insertId"in b&&"affectedRows"in b){let{insertId:a,affectedRows:c,changedRows:d}=b;return{insertId:null!=a&&"0"!==a.toString()?BigInt(a):void 0,numAffectedRows:null!=c?BigInt(c):void 0,numChangedRows:null!=d?BigInt(d):void 0,rows:[]}}if(Array.isArray(b))return{rows:b};return{rows:[]}}catch(a){throw w(a,Error())}}#at(a){return new Promise((b,c)=>{this.#as.query(a.sql,a.parameters,(a,d)=>{a?c(a):b(d)})})}async *streamQuery(a,b){let c=this.#as.query(a.sql,a.parameters).stream({objectMode:!0});try{for await(let a of c)yield{rows:[a]}}catch(a){if(a&&"object"==typeof a&&"code"in a&&"ERR_STREAM_PREMATURE_CLOSE"===a.code)return;throw a}}[x](){this.#as.release()}}let A=/`/g;class B extends n.n{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(a){return a.replace(A,"``")}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.using&&(this.append(" using "),this.visitNode(a.using)),a.table&&(this.append(" on "),this.visitNode(a.table)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.where&&(this.append(" "),this.visitNode(a.where))}}class C{#al;constructor(a){this.#al=a}async getSchemas(){return(await this.#al.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(a=>({name:a.SCHEMA_NAME}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#al.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",a=>a.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",(0,r.l)`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();a.withInternalKyselyTables||(b=b.where("columns.TABLE_NAME","!=",q.kQ).where("columns.TABLE_NAME","!=",q.sy));let c=await b.execute();return this.#au(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#au(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.TABLE_NAME);return c||(c=(0,i.CN)({name:b.TABLE_NAME,isView:"VIEW"===b.TABLE_TYPE,schema:b.TABLE_SCHEMA,columns:[]}),a.push(c)),c.columns.push((0,i.CN)({name:b.COLUMN_NAME,dataType:b.DATA_TYPE,isNullable:"YES"===b.IS_NULLABLE,isAutoIncrementing:b.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:null!==b.COLUMN_DEFAULT,comment:""===b.COLUMN_COMMENT?void 0:b.COLUMN_COMMENT})),a},[])}}let D="ea586330-2c93-47c8-908d-981d9d270f9d";class E extends t{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(a,b){await (0,r.l)`select get_lock(${r.l.lit(D)}, ${r.l.lit(3600)})`.execute(a)}async releaseMigrationLock(a,b){await (0,r.l)`select release_lock(${r.l.lit(D)})`.execute(a)}}class F{#aj;constructor(a){this.#aj=a}createDriver(){return new y(this.#aj)}createQueryCompiler(){return new B}createAdapter(){return new E}createIntrospector(a){return new C(a)}}let G=Symbol();class H{#aj;#ap=new WeakMap;#aq;constructor(a){this.#aj=(0,i.CN)({...a})}async init(){this.#aq=(0,i.Tn)(this.#aj.pool)?await this.#aj.pool():this.#aj.pool}async acquireConnection(){let a=await this.#aq.connect(),b=this.#ap.get(a);return!b&&(b=new I(a,{cursor:this.#aj.cursor??null}),this.#ap.set(a,b),this.#aj.onCreateConnection&&await this.#aj.onCreateConnection(b)),this.#aj.onReserveConnection&&await this.#aj.onReserveConnection(b),b}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c="start transaction";b.isolationLevel&&(c+=` isolation level ${b.isolationLevel}`),b.accessMode&&(c+=` ${b.accessMode}`),await a.executeQuery(h.E.raw(c))}else await a.executeQuery(h.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(h.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(h.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(g("savepoint",b),(0,j.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(g("rollback to",b),(0,j.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(g("release",b),(0,j.a)()))}async releaseConnection(a){a[G]()}async destroy(){if(this.#aq){let a=this.#aq;this.#aq=void 0,await a.end()}}}class I{#av;#aw;constructor(a,b){this.#av=a,this.#aw=b}async executeQuery(a){try{let{command:b,rowCount:c,rows:d}=await this.#av.query(a.sql,[...a.parameters]);return{numAffectedRows:"INSERT"===b||"UPDATE"===b||"DELETE"===b||"MERGE"===b?BigInt(c):void 0,rows:d??[]}}catch(a){throw w(a,Error())}}async *streamQuery(a,b){if(!this.#aw.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=this.#av.query(new this.#aw.cursor(a.sql,a.parameters.slice()));try{for(;;){let a=await c.read(b);if(0===a.length)break;yield{rows:a}}}finally{await c.close()}}[G](){this.#av.release()}}class J{#al;constructor(a){this.#al=a}async getSchemas(){return(await this.#al.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(a=>({name:a.nspname}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#al.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,r.l)`col_description(a.attrelid, a.attnum)`.as("column_description"),(0,r.l)`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where((0,r.l)`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();a.withInternalKyselyTables||(b=b.where("c.relname","!=",q.kQ).where("c.relname","!=",q.sy));let c=await b.execute();return this.#au(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#au(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.table&&a.schema===b.schema);return c||(c=(0,i.CN)({name:b.table,isView:"v"===b.table_type,schema:b.schema,columns:[]}),a.push(c)),c.columns.push((0,i.CN)({name:b.column,dataType:b.type,dataTypeSchema:b.type_schema,isNullable:!b.not_null,isAutoIncrementing:null!==b.auto_incrementing,hasDefaultValue:b.has_default,comment:b.column_description??void 0})),a},[])}}let K=/"/g;class L extends n.n{sanitizeIdentifier(a){return a.replace(K,'""')}}let M=BigInt("3853314791062309107");class N extends t{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(a,b){await (0,r.l)`select pg_advisory_xact_lock(${r.l.lit(M)})`.execute(a)}async releaseMigrationLock(a,b){}}class O{#aj;constructor(a){this.#aj=a}createDriver(){return new H(this.#aj)}createQueryCompiler(){return new L}createAdapter(){return new N}createIntrospector(a){return new J(a)}}class P extends t{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(a){await (0,r.l)`exec sp_getapplock @DbPrincipal = ${r.l.lit("dbo")}, @Resource = ${r.l.lit(q.kQ)}, @LockMode = ${r.l.lit("Exclusive")}`.execute(a)}async releaseMigrationLock(){}}var Q=c(96931),R=c(37381);let S=Symbol(),T=Symbol(),U=Symbol();class V{#aj;#aq;constructor(a){this.#aj=(0,i.CN)({...a});let{tarn:b,tedious:c,validateConnections:d}=this.#aj,{validateConnections:e,...f}=b.options;this.#aq=new b.Pool({...f,create:async()=>{let a=await c.connectionFactory();return await new W(a,c).connect()},destroy:async a=>{await a[T]()},validate:!1===d||!1===e?void 0:a=>a[U]()})}async init(){}async acquireConnection(){return await this.#aq.acquire().promise}async beginTransaction(a,b){await a.beginTransaction(b)}async commitTransaction(a){await a.commitTransaction()}async rollbackTransaction(a){await a.rollbackTransaction()}async savepoint(a,b){await a.savepoint(b)}async rollbackToSavepoint(a,b){await a.rollbackTransaction(b)}async releaseConnection(a){(this.#aj.resetConnectionsOnRelease||this.#aj.tedious.resetConnectionOnRelease)&&await a[S](),this.#aq.release(a)}async destroy(){await this.#aq.destroy()}}class W{#am;#ax;#ay;constructor(a,b){this.#am=a,this.#ax=!1,this.#ay=b}async beginTransaction(a){let{isolationLevel:b}=a;await new Promise((a,c)=>this.#am.beginTransaction(b=>{b?c(b):a(void 0)},b?(0,Q.D)(8):void 0,b?this.#az(b):void 0))}async commitTransaction(){await new Promise((a,b)=>this.#am.commitTransaction(c=>{c?b(c):a(void 0)}))}async connect(){let{promise:a,reject:b,resolve:c}=new R.c;function d(){b(Error("The connection ended without ever completing the connection"))}return this.#am.connect(a=>{if(a)return b(a);c()}),this.#am.on("error",a=>{a instanceof Error&&"code"in a&&"ESOCKET"===a.code&&(this.#ax=!0),console.error(a),b(a)}),this.#am.once("end",d),await a,this.#am.off("end",d),this}async executeQuery(a){try{let b=new R.c,c=new X({compiledQuery:a,tedious:this.#ay,onDone:b});this.#am.execSql(c.request);let{rowCount:d,rows:e}=await b.promise;return{numAffectedRows:void 0!==d?BigInt(d):void 0,rows:e}}catch(a){throw w(a,Error())}}async rollbackTransaction(a){await new Promise((b,c)=>this.#am.rollbackTransaction(a=>{a?c(a):b(void 0)},a))}async savepoint(a){await new Promise((b,c)=>this.#am.saveTransaction(a=>{a?c(a):b(void 0)},a))}async *streamQuery(a,b){if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=new X({compiledQuery:a,streamChunkSize:b,tedious:this.#ay});this.#am.execSql(c.request);try{for(;;){let a=await c.readChunk();if(0===a.length||(yield{rows:a},a.length<b))break}}finally{await this.#aA(c)}}#az(a){let{ISOLATION_LEVEL:b}=this.#ay,c={"read committed":b.READ_COMMITTED,"read uncommitted":b.READ_UNCOMMITTED,"repeatable read":b.REPEATABLE_READ,serializable:b.SERIALIZABLE,snapshot:b.SNAPSHOT}[a];if(void 0===c)throw Error(`Unknown isolation level: ${a}`);return c}#aA(a){return new Promise(b=>{a.request.once("requestCompleted",b),this.#am.cancel()||(a.request.off("requestCompleted",b),b())})}[T](){return"closed"in this.#am&&this.#am.closed?Promise.resolve():new Promise(a=>{this.#am.once("end",a),this.#am.close()})}async [S](){await new Promise((a,b)=>{this.#am.reset(c=>{if(c)return b(c);a()})})}async [U](){if(this.#ax||this.#aB())return!1;try{let a=new R.c,b=new X({compiledQuery:h.E.raw("select 1"),onDone:a,tedious:this.#ay});return this.#am.execSql(b.request),await a.promise,!0}catch{return!1}}#aB(){return"closed"in this.#am&&!!this.#am.closed}}class X{#aC;#aD;#aE;#aF;#ay;#aG;constructor(a){let{compiledQuery:b,onDone:c,streamChunkSize:d,tedious:e}=a;if(this.#aD=[],this.#aE=d,this.#aF={},this.#ay=e,c){let a="onDone";this.#aF[a]=(b,d)=>{if("chunkReady"!==b){if(delete this.#aF[a],"error"===b)return c.reject(d);c.resolve({rowCount:this.#aG,rows:this.#aD})}}}this.#aC=new this.#ay.Request(b.sql,(a,b)=>{if(a)return Object.values(this.#aF).forEach(b=>b("error",a instanceof AggregateError?a.errors:a));this.#aG=b}),this.#aH(b.parameters),this.#aI()}get request(){return this.#aC}readChunk(){let a=this.readChunk.name;return new Promise((b,c)=>{this.#aF[a]=(d,e)=>{if(delete this.#aF[a],"error"===d)return c(e);b(this.#aD.splice(0,this.#aE))},this.#aC.resume()})}#aH(a){for(let b=0;b<a.length;b++){let c=a[b];this.#aC.addParameter(String(b+1),this.#aJ(c),c)}}#aI(){let a=this.#aE?()=>{this.#aE<=this.#aD.length&&(this.#aC.pause(),Object.values(this.#aF).forEach(a=>a("chunkReady")))}:()=>{},b=b=>{let c={};for(let a of b)c[a.metadata.colName]=a.value;this.#aD.push(c),a()};this.#aC.on("row",b),this.#aC.once("requestCompleted",()=>{Object.values(this.#aF).forEach(a=>a("completed")),this.#aC.off("row",b)})}#aJ(a){if((0,i.kZ)(a)||(0,i.b0)(a)||(0,i.Kg)(a))return this.#ay.TYPES.NVarChar;if((0,i.sI)(a)||(0,i.Et)(a)&&a%1==0)if(a<-0x80000000||a>0x7fffffff)return this.#ay.TYPES.BigInt;else return this.#ay.TYPES.Int;return(0,i.Et)(a)?this.#ay.TYPES.Float:(0,i.Lm)(a)?this.#ay.TYPES.Bit:(0,i.$P)(a)?this.#ay.TYPES.DateTime:(0,i.Pe)(a)?this.#ay.TYPES.VarBinary:this.#ay.TYPES.NVarChar}}class Y{#al;constructor(a){this.#al=a}async getSchemas(){return await this.#al.selectFrom("sys.schemas").select("name").execute()}async getTables(a={withInternalKyselyTables:!1}){let b=await this.#al.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!a.withInternalKyselyTables,a=>a.where("tables.name","!=",q.kQ).where("tables.name","!=",q.sy)).select(["tables.name as table_name",a=>a.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#al.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),c={};for(let a of b){let b=`${a.table_schema_name}.${a.table_name}`;(c[b]=c[b]||(0,i.CN)({columns:[],isView:"V "===a.table_type,name:a.table_name,schema:a.table_schema_name??void 0})).columns.push((0,i.CN)({dataType:a.type_name,dataTypeSchema:a.type_schema_name??void 0,hasDefaultValue:a.column_default_object_id>0||"NOT_APPLICABLE"!==a.column_generated_always_type||a.column_is_identity||a.column_is_computed||a.column_is_rowguidcol,isAutoIncrementing:a.column_is_identity,isNullable:a.column_is_nullable&&a.type_is_nullable,name:a.column_name,comment:a.column_comment??void 0}))}return Object.values(c)}async getMetadata(a){return{tables:await this.getTables(a)}}}let Z=/^[a-z0-9_]$/i;class $ extends n.n{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(a){super.visitOffset(a),this.append(" rows")}compileColumnAlterations(a){let b={};for(let c of a)b[c.kind]||(b[c.kind]=[]),b[c.kind].push(c);let c=!0;b.AddColumnNode&&(this.append("add "),this.compileList(b.AddColumnNode),c=!1),b.AlterColumnNode&&(c||this.append(", "),this.compileList(b.AlterColumnNode)),b.DropColumnNode&&(c||this.append(", "),this.append("drop column "),this.compileList(b.DropColumnNode)),b.ModifyColumnNode&&(c||this.append(", "),this.compileList(b.ModifyColumnNode)),b.RenameColumnNode&&(c||this.append(", "),this.compileList(b.RenameColumnNode))}visitAddColumn(a){this.visitNode(a.column)}visitDropColumn(a){this.visitNode(a.column)}visitMergeQuery(a){super.visitMergeQuery(a),this.append(";")}visitCollate(a){this.append("collate ");let{name:b}=a.collation;for(let a of b)if(!Z.test(a))throw Error(`Invalid collation: ${b}`);this.append(b)}announcesNewColumnDataType(){return!1}}class _{#aj;constructor(a){this.#aj=a}createDriver(){return new V(this.#aj)}createQueryCompiler(){return new $}createAdapter(){return new P}createIntrospector(a){return new Y(a)}}let aa=(0,i.CN)({is:a=>"AlterTableNode"===a.kind,create:a=>(0,i.CN)({kind:"AlterTableNode",table:a}),cloneWithTableProps:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumnAlteration:(a,b)=>(0,i.CN)({...a,columnAlterations:a.columnAlterations?[...a.columnAlterations,b]:[b]})}),ab=(0,i.CN)({is:a=>"CreateIndexNode"===a.kind,create:a=>(0,i.CN)({kind:"CreateIndexNode",name:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,i.CN)({...a,columns:[...a.columns||[],...b]})}),ac=(0,i.CN)({is:a=>"CreateSchemaNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CreateSchemaNode",schema:e.O.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});var ad=c(93092),ae=c(36923);let af=(0,i.CN)({is:a=>"DropIndexNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropIndexNode",name:ae.y.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ag=(0,i.CN)({is:a=>"DropSchemaNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropSchemaNode",schema:e.O.create(a),...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ah=(0,i.CN)({is:a=>"DropTableNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"DropTableNode",table:a,...b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});var ai=c(19795);let aj=(0,i.CN)({is:a=>"AddColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"AddColumnNode",column:a})});var ak=c(31009);let al=(0,i.CN)({is:a=>"ColumnDefinitionNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ColumnDefinitionNode",column:ak.Z.create(a),dataType:b}),cloneWithFrontModifier:(a,b)=>(0,i.CN)({...a,frontModifiers:a.frontModifiers?(0,i.CN)([...a.frontModifiers,b]):[b]}),cloneWithEndModifier:(a,b)=>(0,i.CN)({...a,endModifiers:a.endModifiers?(0,i.CN)([...a.endModifiers,b]):[b]}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),am=(0,i.CN)({is:a=>"DropColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"DropColumnNode",column:ak.Z.create(a)})}),an=(0,i.CN)({is:a=>"RenameColumnNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"RenameColumnNode",column:ak.Z.create(a),renameTo:ak.Z.create(b)})}),ao=(0,i.CN)({is:a=>"CheckConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CheckConstraintNode",expression:a,name:b?e.O.create(b):void 0})}),ap=["no action","restrict","cascade","set null","set default"],aq=(0,i.CN)({is:a=>"ReferencesNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ReferencesNode",table:a,columns:(0,i.CN)([...b])}),cloneWithOnDelete:(a,b)=>(0,i.CN)({...a,onDelete:b}),cloneWithOnUpdate:(a,b)=>(0,i.CN)({...a,onUpdate:b})});var ar=c(9005),as=c(2952),at=c(39450),au=c(90350);function av(a){return(0,at.N)(a)?a.toOperationNode():au.q.createImmediate(a)}let aw=(0,i.CN)({is:a=>"GeneratedNode"===a.kind,create:a=>(0,i.CN)({kind:"GeneratedNode",...a}),createWithExpression:a=>(0,i.CN)({kind:"GeneratedNode",always:!0,expression:a}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),ax=(0,i.CN)({is:a=>"DefaultValueNode"===a.kind,create:a=>(0,i.CN)({kind:"DefaultValueNode",defaultValue:a})});function ay(a){if(ap.includes(a))return a;throw Error(`invalid OnModifyForeignAction ${a}`)}class az{#M;constructor(a){this.#M=a}autoIncrement(){return new az(al.cloneWith(this.#M,{autoIncrement:!0}))}identity(){return new az(al.cloneWith(this.#M,{identity:!0}))}primaryKey(){return new az(al.cloneWith(this.#M,{primaryKey:!0}))}references(a){let b=(0,as.q5)(a);if(!b.table||ar.U.is(b.column))throw Error(`invalid call references('${a}'). The reference must have format table.column or schema.table.column`);return new az(al.cloneWith(this.#M,{references:aq.create(b.table,[b.column])}))}onDelete(a){if(!this.#M.references)throw Error("on delete constraint can only be added for foreign keys");return new az(al.cloneWith(this.#M,{references:aq.cloneWithOnDelete(this.#M.references,ay(a))}))}onUpdate(a){if(!this.#M.references)throw Error("on update constraint can only be added for foreign keys");return new az(al.cloneWith(this.#M,{references:aq.cloneWithOnUpdate(this.#M.references,ay(a))}))}unique(){return new az(al.cloneWith(this.#M,{unique:!0}))}notNull(){return new az(al.cloneWith(this.#M,{notNull:!0}))}unsigned(){return new az(al.cloneWith(this.#M,{unsigned:!0}))}defaultTo(a){return new az(al.cloneWith(this.#M,{defaultTo:ax.create(av(a))}))}check(a){return new az(al.cloneWith(this.#M,{check:ao.create(a.toOperationNode())}))}generatedAlwaysAs(a){return new az(al.cloneWith(this.#M,{generated:aw.createWithExpression(a.toOperationNode())}))}generatedAlwaysAsIdentity(){return new az(al.cloneWith(this.#M,{generated:aw.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new az(al.cloneWith(this.#M,{generated:aw.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#M.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new az(al.cloneWith(this.#M,{generated:aw.cloneWith(this.#M.generated,{stored:!0})}))}modifyFront(a){return new az(al.cloneWithFrontModifier(this.#M,a.toOperationNode()))}nullsNotDistinct(){return new az(al.cloneWith(this.#M,{nullsNotDistinct:!0}))}ifNotExists(){return new az(al.cloneWith(this.#M,{ifNotExists:!0}))}modifyEnd(a){return new az(al.cloneWithEndModifier(this.#M,a.toOperationNode()))}$call(a){return a(this)}toOperationNode(){return this.#M}}let aA=(0,i.CN)({is:a=>"ModifyColumnNode"===a.kind,create:a=>(0,i.CN)({kind:"ModifyColumnNode",column:a})});var aB=c(43926);let aC=(0,i.CN)({is:a=>"ForeignKeyConstraintNode"===a.kind,create:(a,b,c,d)=>(0,i.CN)({kind:"ForeignKeyConstraintNode",columns:a,references:aq.create(b,c),name:d?e.O.create(d):void 0}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class aD{#M;constructor(a){this.#M=a}onDelete(a){return new aD(aC.cloneWith(this.#M,{onDelete:ay(a)}))}onUpdate(a){return new aD(aC.cloneWith(this.#M,{onUpdate:ay(a)}))}deferrable(){return new aD(aC.cloneWith(this.#M,{deferrable:!0}))}notDeferrable(){return new aD(aC.cloneWith(this.#M,{deferrable:!1}))}initiallyDeferred(){return new aD(aC.cloneWith(this.#M,{initiallyDeferred:!0}))}initiallyImmediate(){return new aD(aC.cloneWith(this.#M,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#M}}let aE=(0,i.CN)({is:a=>"AddConstraintNode"===a.kind,create:a=>(0,i.CN)({kind:"AddConstraintNode",constraint:a})}),aF=(0,i.CN)({is:a=>"UniqueConstraintNode"===a.kind,create:(a,b,c)=>(0,i.CN)({kind:"UniqueConstraintNode",columns:(0,i.CN)(a.map(ak.Z.create)),name:b?e.O.create(b):void 0,nullsNotDistinct:c}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aG=(0,i.CN)({is:a=>"DropConstraintNode"===a.kind,create:a=>(0,i.CN)({kind:"DropConstraintNode",constraintName:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aH=(0,i.CN)({is:a=>"AlterColumnNode"===a.kind,create:(a,b,c)=>(0,i.CN)({kind:"AlterColumnNode",column:ak.Z.create(a),[b]:c})});class aI{#aK;constructor(a){this.#aK=a}setDataType(a){return new aJ(aH.create(this.#aK,"dataType",(0,aB.Q)(a)))}setDefault(a){return new aJ(aH.create(this.#aK,"setDefault",av(a)))}dropDefault(){return new aJ(aH.create(this.#aK,"dropDefault",!0))}setNotNull(){return new aJ(aH.create(this.#aK,"setNotNull",!0))}dropNotNull(){return new aJ(aH.create(this.#aK,"dropNotNull",!0))}$call(a){return a(this)}}class aJ{#aL;constructor(a){this.#aL=a}toOperationNode(){return this.#aL}}class aK{#s;constructor(a){this.#s=(0,i.CN)(a)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class aL{#s;constructor(a){this.#s=(0,i.CN)(a)}onDelete(a){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.onDelete(a)})}onUpdate(a){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.onUpdate(a)})}deferrable(){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.deferrable()})}notDeferrable(){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new aL({...this.#s,constraintBuilder:this.#s.constraintBuilder.initiallyImmediate()})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(aa.cloneWithTableProps(this.#s.node,{addConstraint:aE.create(this.#s.constraintBuilder.toOperationNode())}),this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class aM{#s;constructor(a){this.#s=(0,i.CN)(a)}ifExists(){return new aM({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{dropConstraint:aG.cloneWith(this.#s.node.dropConstraint,{ifExists:!0})})})}cascade(){return new aM({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{dropConstraint:aG.cloneWith(this.#s.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new aM({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{dropConstraint:aG.cloneWith(this.#s.node.dropConstraint,{modifier:"restrict"})})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}let aN=(0,i.CN)({is:a=>"PrimaryKeyConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"PrimaryKeyConstraintNode",columns:(0,i.CN)(a.map(ak.Z.create)),name:b?e.O.create(b):void 0}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})}),aO=(0,i.CN)({is:a=>"AddIndexNode"===a.kind,create:a=>(0,i.CN)({kind:"AddIndexNode",name:e.O.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,i.CN)({...a,columns:[...a.columns||[],...b]})});class aP{#s;constructor(a){this.#s=(0,i.CN)(a)}unique(){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.cloneWith(this.#s.node.addIndex,{unique:!0})})})}column(a){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.cloneWithColumns(this.#s.node.addIndex,[(0,as.Ow)(a)])})})}columns(a){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.cloneWithColumns(this.#s.node.addIndex,a.map(as.Ow))})})}expression(a){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.cloneWithColumns(this.#s.node.addIndex,[a.toOperationNode()])})})}using(a){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.cloneWith(this.#s.node.addIndex,{using:f.z.createWithSql(a)})})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class aQ{#M;constructor(a){this.#M=a}nullsNotDistinct(){return new aQ(aF.cloneWith(this.#M,{nullsNotDistinct:!0}))}deferrable(){return new aQ(aF.cloneWith(this.#M,{deferrable:!0}))}notDeferrable(){return new aQ(aF.cloneWith(this.#M,{deferrable:!1}))}initiallyDeferred(){return new aQ(aF.cloneWith(this.#M,{initiallyDeferred:!0}))}initiallyImmediate(){return new aQ(aF.cloneWith(this.#M,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#M}}class aR{#M;constructor(a){this.#M=a}deferrable(){return new aR(aN.cloneWith(this.#M,{deferrable:!0}))}notDeferrable(){return new aR(aN.cloneWith(this.#M,{deferrable:!1}))}initiallyDeferred(){return new aR(aN.cloneWith(this.#M,{initiallyDeferred:!0}))}initiallyImmediate(){return new aR(aN.cloneWith(this.#M,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#M}}class aS{#M;constructor(a){this.#M=a}$call(a){return a(this)}toOperationNode(){return this.#M}}let aT=(0,i.CN)({is:a=>"RenameConstraintNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"RenameConstraintNode",oldName:e.O.create(a),newName:e.O.create(b)})});class aU{#s;constructor(a){this.#s=(0,i.CN)(a)}renameTo(a){return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{renameTo:(0,ai.M$)(a)})})}setSchema(a){return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{setSchema:e.O.create(a)})})}alterColumn(a,b){let c=b(new aI(a));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,c.toOperationNode())})}dropColumn(a){return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,am.create(a))})}renameColumn(a,b){return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,an.create(a,b))})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,aj.create(d.toOperationNode()))})}modifyColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,aA.create(d.toOperationNode()))})}addUniqueConstraint(a,b,c=i.lQ){let d=c(new aQ(aF.create(b,a)));return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addConstraint:aE.create(d.toOperationNode())})})}addCheckConstraint(a,b,c=i.lQ){let d=c(new aS(ao.create(b.toOperationNode(),a)));return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addConstraint:aE.create(d.toOperationNode())})})}addForeignKeyConstraint(a,b,c,d,e=i.lQ){let f=e(new aD(aC.create(b.map(ak.Z.create),(0,ai.M$)(c),d.map(ak.Z.create),a)));return new aL({...this.#s,constraintBuilder:f})}addPrimaryKeyConstraint(a,b,c=i.lQ){let d=c(new aR(aN.create(b,a)));return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addConstraint:aE.create(d.toOperationNode())})})}dropConstraint(a){return new aM({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{dropConstraint:aG.create(a)})})}renameConstraint(a,b){return new aM({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{renameConstraint:aT.create(a,b)})})}addIndex(a){return new aP({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{addIndex:aO.create(a)})})}dropIndex(a){return new aK({...this.#s,node:aa.cloneWithTableProps(this.#s.node,{dropIndex:af.create(a)})})}$call(a){return a(this)}}class aV{#s;constructor(a){this.#s=(0,i.CN)(a)}alterColumn(a,b){let c=b(new aI(a));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,c.toOperationNode())})}dropColumn(a){return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,am.create(a))})}renameColumn(a,b){return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,an.create(a,b))})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,aj.create(d.toOperationNode()))})}modifyColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new aV({...this.#s,node:aa.cloneWithColumnAlteration(this.#s.node,aA.create(d.toOperationNode()))})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}var aW=c(53284),aX=c(4315),aY=c(42437),aZ=c(93159);class a$ extends aY.V{transformPrimitiveValueList(a){return aZ.s.create(a.values.map(au.q.createImmediate))}transformValue(a){return au.q.createImmediate(a.value)}}class a_{#s;constructor(a){this.#s=(0,i.CN)(a)}ifNotExists(){return new a_({...this.#s,node:ab.cloneWith(this.#s.node,{ifNotExists:!0})})}unique(){return new a_({...this.#s,node:ab.cloneWith(this.#s.node,{unique:!0})})}nullsNotDistinct(){return new a_({...this.#s,node:ab.cloneWith(this.#s.node,{nullsNotDistinct:!0})})}on(a){return new a_({...this.#s,node:ab.cloneWith(this.#s.node,{table:(0,ai.M$)(a)})})}column(a){return new a_({...this.#s,node:ab.cloneWithColumns(this.#s.node,[(0,as.Ow)(a)])})}columns(a){return new a_({...this.#s,node:ab.cloneWithColumns(this.#s.node,a.map(as.Ow))})}expression(a){return new a_({...this.#s,node:ab.cloneWithColumns(this.#s.node,[a.toOperationNode()])})}using(a){return new a_({...this.#s,node:ab.cloneWith(this.#s.node,{using:f.z.createWithSql(a)})})}where(...a){let b=new a$;return new a_({...this.#s,node:aX.L.cloneWithWhere(this.#s.node,b.transformNode((0,aW.GB)(a),this.#s.queryId))})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class a0{#s;constructor(a){this.#s=(0,i.CN)(a)}ifNotExists(){return new a0({...this.#s,node:ac.cloneWith(this.#s.node,{ifNotExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}var a1=c(57105);class a2{#s;constructor(a){this.#s=(0,i.CN)(a)}temporary(){return new a2({...this.#s,node:ad.B.cloneWith(this.#s.node,{temporary:!0})})}onCommit(a){return new a2({...this.#s,node:ad.B.cloneWith(this.#s.node,{onCommit:function(a){if(ad.o.includes(a))return a;throw Error(`invalid OnCommitAction ${a}`)}(a)})})}ifNotExists(){return new a2({...this.#s,node:ad.B.cloneWith(this.#s.node,{ifNotExists:!0})})}addColumn(a,b,c=i.lQ){let d=c(new az(al.create(a,(0,aB.Q)(b))));return new a2({...this.#s,node:ad.B.cloneWithColumn(this.#s.node,d.toOperationNode())})}addPrimaryKeyConstraint(a,b,c=i.lQ){let d=c(new aR(aN.create(b,a)));return new a2({...this.#s,node:ad.B.cloneWithConstraint(this.#s.node,d.toOperationNode())})}addUniqueConstraint(a,b,c=i.lQ){let d=c(new aQ(aF.create(b,a)));return new a2({...this.#s,node:ad.B.cloneWithConstraint(this.#s.node,d.toOperationNode())})}addCheckConstraint(a,b,c=i.lQ){let d=c(new aS(ao.create(b.toOperationNode(),a)));return new a2({...this.#s,node:ad.B.cloneWithConstraint(this.#s.node,d.toOperationNode())})}addForeignKeyConstraint(a,b,c,d,e=i.lQ){let f=e(new aD(aC.create(b.map(ak.Z.create),(0,ai.M$)(c),d.map(ak.Z.create),a)));return new a2({...this.#s,node:ad.B.cloneWithConstraint(this.#s.node,f.toOperationNode())})}modifyFront(a){return new a2({...this.#s,node:ad.B.cloneWithFrontModifier(this.#s.node,a.toOperationNode())})}modifyEnd(a){return new a2({...this.#s,node:ad.B.cloneWithEndModifier(this.#s.node,a.toOperationNode())})}as(a){return new a2({...this.#s,node:ad.B.cloneWith(this.#s.node,{selectQuery:(0,a1.YK)(a)})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class a3{#s;constructor(a){this.#s=(0,i.CN)(a)}on(a){return new a3({...this.#s,node:af.cloneWith(this.#s.node,{table:(0,ai.M$)(a)})})}ifExists(){return new a3({...this.#s,node:af.cloneWith(this.#s.node,{ifExists:!0})})}cascade(){return new a3({...this.#s,node:af.cloneWith(this.#s.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class a4{#s;constructor(a){this.#s=(0,i.CN)(a)}ifExists(){return new a4({...this.#s,node:ag.cloneWith(this.#s.node,{ifExists:!0})})}cascade(){return new a4({...this.#s,node:ag.cloneWith(this.#s.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class a5{#s;constructor(a){this.#s=(0,i.CN)(a)}ifExists(){return new a5({...this.#s,node:ah.cloneWith(this.#s.node,{ifExists:!0})})}cascade(){return new a5({...this.#s,node:ah.cloneWith(this.#s.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}var a6=c(19151),a7=c(88487);class a8{#n=new a$;transformQuery(a){return this.#n.transformNode(a.node,a.queryId)}transformResult(a){return Promise.resolve(a.result)}}class a9{#s;constructor(a){this.#s=(0,i.CN)(a)}temporary(){return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{temporary:!0})})}materialized(){return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{materialized:!0})})}ifNotExists(){return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{ifNotExists:!0})})}orReplace(){return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{orReplace:!0})})}columns(a){return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{columns:a.map(as.RY)})})}as(a){let b=a.withPlugin(new a8).toOperationNode();return new a9({...this.#s,node:a7.Y.cloneWith(this.#s.node,{as:b})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}let ba=(0,i.CN)({is:a=>"DropViewNode"===a.kind,create:a=>(0,i.CN)({kind:"DropViewNode",name:ae.y.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bb{#s;constructor(a){this.#s=(0,i.CN)(a)}materialized(){return new bb({...this.#s,node:ba.cloneWith(this.#s.node,{materialized:!0})})}ifExists(){return new bb({...this.#s,node:ba.cloneWith(this.#s.node,{ifExists:!0})})}cascade(){return new bb({...this.#s,node:ba.cloneWith(this.#s.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}let bc=(0,i.CN)({is:a=>"CreateTypeNode"===a.kind,create:a=>(0,i.CN)({kind:"CreateTypeNode",name:a}),cloneWithEnum:(a,b)=>(0,i.CN)({...a,enum:aZ.s.create(b.map(au.q.createImmediate))})});class bd{#s;constructor(a){this.#s=(0,i.CN)(a)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}asEnum(a){return new bd({...this.#s,node:bc.cloneWithEnum(this.#s.node,a)})}$call(a){return a(this)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}let be=(0,i.CN)({is:a=>"DropTypeNode"===a.kind,create:a=>(0,i.CN)({kind:"DropTypeNode",name:a}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bf{#s;constructor(a){this.#s=(0,i.CN)(a)}ifExists(){return new bf({...this.#s,node:be.cloneWith(this.#s.node,{ifExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}function bg(a){if(!a.includes("."))return ae.y.create(a);{let b=a.split(".").map(bh);if(2===b.length)return ae.y.createWithSchema(b[0],b[1]);throw Error(`invalid schemable identifier ${a}`)}}function bh(a){return a.trim()}let bi=(0,i.CN)({is:a=>"RefreshMaterializedViewNode"===a.kind,create:a=>(0,i.CN)({kind:"RefreshMaterializedViewNode",name:ae.y.create(a)}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class bj{#s;constructor(a){this.#s=(0,i.CN)(a)}concurrently(){return new bj({...this.#s,node:bi.cloneWith(this.#s.node,{concurrently:!0,withNoData:!1})})}withData(){return new bj({...this.#s,node:bi.cloneWith(this.#s.node,{withNoData:!1})})}withNoData(){return new bj({...this.#s,node:bi.cloneWith(this.#s.node,{withNoData:!0,concurrently:!1})})}$call(a){return a(this)}toOperationNode(){return this.#s.executor.transformQuery(this.#s.node,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){await this.#s.executor.executeQuery(this.compile())}}class bk{#aM;constructor(a){this.#aM=a}createTable(a){return new a2({queryId:(0,j.a)(),executor:this.#aM,node:ad.B.create((0,ai.M$)(a))})}dropTable(a){return new a5({queryId:(0,j.a)(),executor:this.#aM,node:ah.create((0,ai.M$)(a))})}createIndex(a){return new a_({queryId:(0,j.a)(),executor:this.#aM,node:ab.create(a)})}dropIndex(a){return new a3({queryId:(0,j.a)(),executor:this.#aM,node:af.create(a)})}createSchema(a){return new a0({queryId:(0,j.a)(),executor:this.#aM,node:ac.create(a)})}dropSchema(a){return new a4({queryId:(0,j.a)(),executor:this.#aM,node:ag.create(a)})}alterTable(a){return new aU({queryId:(0,j.a)(),executor:this.#aM,node:aa.create((0,ai.M$)(a))})}createView(a){return new a9({queryId:(0,j.a)(),executor:this.#aM,node:a7.Y.create(a)})}refreshMaterializedView(a){return new bj({queryId:(0,j.a)(),executor:this.#aM,node:bi.create(a)})}dropView(a){return new bb({queryId:(0,j.a)(),executor:this.#aM,node:ba.create(a)})}createType(a){return new bd({queryId:(0,j.a)(),executor:this.#aM,node:bc.create(bg(a))})}dropType(a){return new bf({queryId:(0,j.a)(),executor:this.#aM,node:be.create(bg(a))})}withPlugin(a){return new bk(this.#aM.withPlugin(a))}withoutPlugins(){return new bk(this.#aM.withoutPlugins())}withSchema(a){return new bk(this.#aM.withPluginAtFront(new a6.B(a)))}}var bl=c(27646),bm=c(20527);class bn{ref(a){return new bl.g(a)}table(a){return new bm.bj(a)}}class bo{#aN;constructor(a){this.#aN=a}async provideConnection(a){let b=await this.#aN.acquireConnection();try{return await a(b)}finally{await this.#aN.releaseConnection(b)}}}var bp=c(65966),bq=c(12034);class br extends bq.R{#aO;#aP;#aQ;constructor(a,b,c,d=[]){super(d),this.#aO=a,this.#aP=b,this.#aQ=c}get adapter(){return this.#aP}compileQuery(a,b){return this.#aO.compileQuery(a,b)}provideConnection(a){return this.#aQ.provideConnection(a)}withPlugins(a){return new br(this.#aO,this.#aP,this.#aQ,[...this.plugins,...a])}withPlugin(a){return new br(this.#aO,this.#aP,this.#aQ,[...this.plugins,a])}withPluginAtFront(a){return new br(this.#aO,this.#aP,this.#aQ,[a,...this.plugins])}withConnectionProvider(a){return new br(this.#aO,this.#aP,a,[...this.plugins])}withoutPlugins(){return new br(this.#aO,this.#aP,this.#aQ,[])}}function bs(){return"undefined"!=typeof performance&&(0,i.Tn)(performance.now)?performance.now():Date.now()}class bt{#aN;#aR;#aS;#aT;#aU;#ap=new WeakSet;constructor(a,b){this.#aT=!1,this.#aN=a,this.#aR=b}async init(){if(this.#aU)throw Error("driver has already been destroyed");this.#aS||(this.#aS=this.#aN.init().then(()=>{this.#aT=!0}).catch(a=>(this.#aS=void 0,Promise.reject(a)))),await this.#aS}async acquireConnection(){if(this.#aU)throw Error("driver has already been destroyed");this.#aT||await this.init();let a=await this.#aN.acquireConnection();return this.#ap.has(a)||(this.#aV()&&this.#aW(a),this.#ap.add(a)),a}async releaseConnection(a){await this.#aN.releaseConnection(a)}beginTransaction(a,b){return this.#aN.beginTransaction(a,b)}commitTransaction(a){return this.#aN.commitTransaction(a)}rollbackTransaction(a){return this.#aN.rollbackTransaction(a)}savepoint(a,b,c){if(this.#aN.savepoint)return this.#aN.savepoint(a,b,c);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(a,b,c){if(this.#aN.rollbackToSavepoint)return this.#aN.rollbackToSavepoint(a,b,c);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(a,b,c){if(this.#aN.releaseSavepoint)return this.#aN.releaseSavepoint(a,b,c);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#aS&&(await this.#aS,this.#aU||(this.#aU=this.#aN.destroy().catch(a=>(this.#aU=void 0,Promise.reject(a)))),await this.#aU)}#aV(){return this.#aR.isLevelEnabled("query")||this.#aR.isLevelEnabled("error")}#aW(a){let b=a.executeQuery,c=a.streamQuery,d=this;a.executeQuery=async c=>{let e,f=bs();try{return await b.call(a,c)}catch(a){throw e=a,await d.#aX(a,c,f),a}finally{e||await d.#aY(c,f)}},a.streamQuery=async function*(b,e){let f,g=bs();try{for await(let d of c.call(a,b,e))yield d}catch(a){throw f=a,await d.#aX(a,b,g),a}finally{f||await d.#aY(b,g,!0)}}}async #aX(a,b,c){await this.#aR.error(()=>({level:"error",error:a,query:b,queryDurationMillis:this.#aZ(c)}))}async #aY(a,b,c=!1){await this.#aR.query(()=>({level:"query",isStream:c,query:a,queryDurationMillis:this.#aZ(b)}))}#aZ(a){return bs()-a}}let bu=()=>{};class bv{#am;#a$;constructor(a){this.#am=a}async provideConnection(a){for(;this.#a$;)await this.#a$.catch(bu);return this.#a$=this.#a_(a).finally(()=>{this.#a$=void 0}),this.#a$}async #a_(a){return await a(this.#am)}}let bw=["read only","read write"],bx=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function by(a){if(a.accessMode&&!bw.includes(a.accessMode))throw Error(`invalid transaction access mode ${a.accessMode}`);if(a.isolationLevel&&!bx.includes(a.isolationLevel))throw Error(`invalid transaction isolation level ${a.isolationLevel}`)}var bz=c(71644);(0,i.CN)(["query","error"]);class bA{#a0;#a1;constructor(a){(0,i.Tn)(a)?(this.#a1=a,this.#a0=(0,i.CN)({query:!0,error:!0})):(this.#a1=bB,this.#a0=(0,i.CN)({query:a.includes("query"),error:a.includes("error")}))}isLevelEnabled(a){return this.#a0[a]}async query(a){this.#a0.query&&await this.#a1(a())}async error(a){this.#a0.error&&await this.#a1(a())}}function bB(a){if("query"===a.level){let b=`kysely:query:${a.isStream?"stream:":""}`;console.log(`${b} ${a.query.sql}`),console.log(`${b} duration: ${a.queryDurationMillis.toFixed(1)}ms`)}else"error"===a.level&&(a.error instanceof Error?console.error(`kysely:error: ${a.error.stack??a.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:a.error,query:a.query.sql,queryDurationMillis:a.queryDurationMillis})}`))}var bC=c(61238),bD=c(69079),bE=c(48137),bF=c(80234);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class bG extends bp.n{#s;constructor(a){let b,c;if(function(a){return(0,i.Gv)(a)&&(0,i.Gv)(a.config)&&(0,i.Gv)(a.driver)&&(0,i.Gv)(a.executor)&&(0,i.Gv)(a.dialect)}(a))b={executor:a.executor},c={...a};else{let d=a.dialect,e=d.createDriver(),f=d.createQueryCompiler(),g=d.createAdapter(),h=new bt(e,new bA(a.log??[])),i=new br(f,g,new bo(h),a.plugins??[]);b={executor:i},c={config:a,executor:i,dialect:d,driver:h}}super(b),this.#s=(0,i.CN)(c)}get schema(){return new bk(this.#s.executor)}get dynamic(){return new bn}get introspection(){return this.#s.dialect.createIntrospector(this.withoutPlugins())}case(a){return new bC.OU({node:bD.P.create((0,i.b0)(a)?void 0:(0,a1.YK)(a))})}get fn(){return(0,bz.t)()}transaction(){return new bJ({...this.#s})}startTransaction(){return new bK({...this.#s})}connection(){return new bI({...this.#s})}withPlugin(a){return new bG({...this.#s,executor:this.#s.executor.withPlugin(a)})}withoutPlugins(){return new bG({...this.#s,executor:this.#s.executor.withoutPlugins()})}withSchema(a){return new bG({...this.#s,executor:this.#s.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bG({...this.#s})}async destroy(){await this.#s.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#s.executor}executeQuery(a,b){void 0!==b&&(0,bF.u)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let c=(0,i.Gv)(a)&&(0,i.Tn)(a.compile)?a.compile():a;return this.getExecutor().executeQuery(c)}async [Symbol.asyncDispose](){await this.destroy()}}class bH extends bG{#s;constructor(a){super(a),this.#s=a}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(a){return new bH({...this.#s,executor:this.#s.executor.withPlugin(a)})}withoutPlugins(){return new bH({...this.#s,executor:this.#s.executor.withoutPlugins()})}withSchema(a){return new bH({...this.#s,executor:this.#s.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bH({...this.#s})}}class bI{#s;constructor(a){this.#s=(0,i.CN)(a)}async execute(a){return this.#s.executor.provideConnection(async b=>{let c=this.#s.executor.withConnectionProvider(new bv(b)),d=new bG({...this.#s,executor:c});return await a(d)})}}class bJ{#s;constructor(a){this.#s=(0,i.CN)(a)}setAccessMode(a){return new bJ({...this.#s,accessMode:a})}setIsolationLevel(a){return new bJ({...this.#s,isolationLevel:a})}async execute(a){let{isolationLevel:b,accessMode:c,...d}=this.#s,e={isolationLevel:b,accessMode:c};return by(e),this.#s.executor.provideConnection(async b=>{let c={isCommitted:!1,isRolledBack:!1},f=new bO(this.#s.executor.withConnectionProvider(new bv(b)),c),g=new bH({...d,executor:f}),h=!1;try{await this.#s.driver.beginTransaction(b,e),h=!0;let d=await a(g);return await this.#s.driver.commitTransaction(b),c.isCommitted=!0,d}catch(a){throw h&&(await this.#s.driver.rollbackTransaction(b),c.isRolledBack=!0),a}})}}class bK{#s;constructor(a){this.#s=(0,i.CN)(a)}setAccessMode(a){return new bK({...this.#s,accessMode:a})}setIsolationLevel(a){return new bK({...this.#s,isolationLevel:a})}async execute(){let{isolationLevel:a,accessMode:b,...c}=this.#s,d={isolationLevel:a,accessMode:b};by(d);let e=await (0,bE.G)(this.#s.executor);return await this.#s.driver.beginTransaction(e.connection,d),new bL({...c,connection:e,executor:this.#s.executor.withConnectionProvider(new bv(e.connection))})}}class bL extends bH{#s;#a2;#a3;constructor(a){let b={isCommitted:!1,isRolledBack:!1},{connection:c,...d}=a={...a,executor:new bO(a.executor,b)};super(d),this.#s=(0,i.CN)(a),this.#a3=b;let e=(0,j.a)();this.#a2=b=>a.executor.compileQuery(b,e)}get isCommitted(){return this.#a3.isCommitted}get isRolledBack(){return this.#a3.isRolledBack}commit(){return bN(this.#a3),new bM(async()=>{await this.#s.driver.commitTransaction(this.#s.connection.connection),this.#a3.isCommitted=!0,this.#s.connection.release()})}rollback(){return bN(this.#a3),new bM(async()=>{await this.#s.driver.rollbackTransaction(this.#s.connection.connection),this.#a3.isRolledBack=!0,this.#s.connection.release()})}savepoint(a){return bN(this.#a3),new bM(async()=>(await this.#s.driver.savepoint?.(this.#s.connection.connection,a,this.#a2),new bL({...this.#s})))}rollbackToSavepoint(a){return bN(this.#a3),new bM(async()=>(await this.#s.driver.rollbackToSavepoint?.(this.#s.connection.connection,a,this.#a2),new bL({...this.#s})))}releaseSavepoint(a){return bN(this.#a3),new bM(async()=>(await this.#s.driver.releaseSavepoint?.(this.#s.connection.connection,a,this.#a2),new bL({...this.#s})))}withPlugin(a){return new bL({...this.#s,executor:this.#s.executor.withPlugin(a)})}withoutPlugins(){return new bL({...this.#s,executor:this.#s.executor.withoutPlugins()})}withSchema(a){return new bL({...this.#s,executor:this.#s.executor.withPluginAtFront(new a6.B(a))})}withTables(){return new bL({...this.#s})}}class bM{#a4;constructor(a){this.#a4=a}async execute(){return await this.#a4()}}function bN(a){if(a.isCommitted)throw Error("Transaction is already committed");if(a.isRolledBack)throw Error("Transaction is already rolled back")}class bO{#aM;#a3;constructor(a,b){a instanceof bO?this.#aM=a.#aM:this.#aM=a,this.#a3=b}get adapter(){return this.#aM.adapter}get plugins(){return this.#aM.plugins}transformQuery(a,b){return this.#aM.transformQuery(a,b)}compileQuery(a,b){return this.#aM.compileQuery(a,b)}provideConnection(a){return this.#aM.provideConnection(a)}executeQuery(a){return bN(this.#a3),this.#aM.executeQuery(a)}stream(a,b){return bN(this.#a3),this.#aM.stream(a,b)}withConnectionProvider(a){return new bO(this.#aM.withConnectionProvider(a),this.#a3)}withPlugin(a){return new bO(this.#aM.withPlugin(a),this.#a3)}withPlugins(a){return new bO(this.#aM.withPlugins(a),this.#a3)}withPluginAtFront(a){return new bO(this.#aM.withPluginAtFront(a),this.#a3)}withoutPlugins(){return new bO(this.#aM.withoutPlugins(),this.#a3)}}function bP(a){if(!a)return null;if("dialect"in a)return bP(a.dialect);if("createDriver"in a){if(a instanceof v)return"sqlite";if(a instanceof F)return"mysql";if(a instanceof O)return"postgres";if(a instanceof _)return"mssql"}return"aggregate"in a?"sqlite":"getConnection"in a?"mysql":"connect"in a?"postgres":"fileControl"in a||"open"in a&&"close"in a&&"prepare"in a?"sqlite":null}let bQ=async a=>{let b,d=a.database;if(!d)return{kysely:null,databaseType:null,transaction:void 0};if("db"in d)return{kysely:d.db,databaseType:d.type,transaction:d.transaction};if("dialect"in d)return{kysely:new bG({dialect:d.dialect}),databaseType:d.type,transaction:d.transaction};let e=bP(d);if("createDriver"in d&&(b=d),"aggregate"in d&&!("createSession"in d)&&(b=new v({database:d})),"getConnection"in d&&(b=new F(d)),"connect"in d&&(b=new O({pool:d})),"fileControl"in d){let{BunSqliteDialect:a}=await c.e(98).then(c.bind(c,19098));b=new a({database:d})}if("createSession"in d){let a;try{({DatabaseSync:a}=await import("node:sqlite"))}catch(a){if(null!==a&&"object"==typeof a&&"code"in a&&"ERR_UNKNOWN_BUILTIN_MODULE"!==a.code)throw a}if(a&&d instanceof a){let{NodeSqliteDialect:a}=await c.e(838).then(c.bind(c,3457));b=new a({database:d})}}return{kysely:b?new bG({dialect:b}):null,databaseType:e,transaction:void 0}}},75227:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"FromNode"===a.kind,create:a=>(0,d.CN)({kind:"FromNode",froms:(0,d.CN)(a)}),cloneWithFroms:(a,b)=>(0,d.CN)({...a,froms:(0,d.CN)([...a.froms,...b])})})},75544:(a,b,c)=>{c.d(b,{$:()=>e});var d=c(15560);function e(a){try{if("string"!=typeof a)return a;return JSON.parse(a,function(a,b){if("string"==typeof b&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(b)){let a=new Date(b);if(!isNaN(a.getTime()))return a}return b})}catch(a){return d.vF.error("Error parsing JSON",{error:a}),null}}c(97960)},76884:(a,b,c)=>{c.d(b,{x:()=>e});var d=c(33164);async function e(a){if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new d.T0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new d.T0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),e={...a};return"AKP"!==e.kty&&delete e.alg,delete e.use,crypto.subtle.importKey("jwk",e,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)}},77688:(a,b,c)=>{c.d(b,{Is:()=>k});var d=c(44625),e=c(55914),f=c(81266),g=c(39450),h=c(28244),i=c(94296),j=c(53284);class k{#M;constructor(a){this.#M=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#M,(0,j.GB)(a)))}and(...a){return new n(e.s.create(this.#M,(0,j.GB)(a)))}$castTo(){return new k(this.#M)}$notNull(){return new k(this.#M)}toOperationNode(){return this.#M}}class l{#a5;#p;constructor(a,b){this.#a5=a,this.#p=b}get expression(){return this.#a5}get alias(){return this.#p}toOperationNode(){return d.N.create(this.#a5.toOperationNode(),(0,g.N)(this.#p)?this.#p.toOperationNode():f.O.create(this.#p))}}class m{#M;constructor(a){this.#M=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#M,(0,j.GB)(a)))}$castTo(){return new m(this.#M)}toOperationNode(){return i.k.create(this.#M)}}class n{#M;constructor(a){this.#M=a}get expressionType(){}as(a){return new l(this,a)}and(...a){return new n(e.s.create(this.#M,(0,j.GB)(a)))}$castTo(){return new n(this.#M)}toOperationNode(){return i.k.create(this.#M)}}},78329:(a,b,c)=>{c.d(b,{kQ:()=>e,sy:()=>f});var d=c(60353);let e="kysely_migration",f="kysely_migration_lock";(0,d.CN)({__noMigrations__:!0})},80053:(a,b,c)=>{c.d(b,{y:()=>i});var d=c(41330),e=c(81316),f=c(33999);let g=a=>a?.[Symbol.toStringTag],h=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0};function i(a,b,c){switch(a.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((a,b,c)=>{if(!(b instanceof Uint8Array)){if(f.ll(b)){if(f.t9(b)&&h(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!(0,e.P2)(b))throw TypeError((0,d.t)(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${g(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c);break;default:((a,b,c)=>{if(f.ll(b))switch(c){case"decrypt":case"sign":if(f.W2(b)&&h(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(f.M3(b)&&h(a,b,c))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!(0,e.P2)(b))throw TypeError((0,d.t)(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${g(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${g(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${g(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${g(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${g(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)}}},80193:(a,b,c)=>{c.d(b,{O:()=>d});function d(a,b){if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}}},80234:(a,b,c)=>{c.d(b,{u:()=>e});let d=new Set;function e(a){d.has(a)||(d.add(a),console.log(a))}},80801:(a,b,c)=>{let d;c.d(b,{l:()=>j});var e=c(33999),f=c(73519),g=c(76884),h=c(81316);let i=async(a,b,c,e=!1)=>{let f=(d||=new WeakMap).get(a);if(f?.[c])return f[c];let h=await (0,g.x)({...b,alg:c});return e&&Object.freeze(a),f?f[c]=h:d.set(a,{[c]:h}),h};async function j(a,b){if(a instanceof Uint8Array||(0,h.R7)(a))return a;if((0,h.D2)(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,e=(d||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,f?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,f?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=c:d.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return i(a,c,b)}if((0,e.ll)(a))return a.k?(0,f.D)(a.k):i(a,a,b,!0);throw Error("unreachable")}},80906:(a,b,c)=>{c.d(b,{k:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"JSONOperatorChainNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONOperatorChainNode",operator:a,values:(0,d.CN)([])}),cloneWithValue:(a,b)=>(0,d.CN)({...a,values:(0,d.CN)([...a.values,b])})})},81266:(a,b,c)=>{c.d(b,{O:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"IdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"IdentifierNode",name:a})})},81316:(a,b,c)=>{function d(a){if(!e(a))throw Error("CryptoKey instance expected")}c.d(b,{D2:()=>f,P2:()=>g,R7:()=>e,Tz:()=>d});let e=a=>{if(a?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return a instanceof CryptoKey}catch{return!1}},f=a=>a?.[Symbol.toStringTag]==="KeyObject",g=a=>e(a)||f(a)},82324:(a,b,c)=>{c.d(b,{$s:()=>j,U2:()=>i,dJ:()=>l,qH:()=>k});var d=c(54315),e=c(93159),f=c(90350),g=c(60353),h=c(57105);function i(a){var b;return(0,g.MH)(a)?(b=a).some(h.SS)?e.s.create(b.map(a=>j(a))):d.h.create(b):j(a)}function j(a){return(0,h.SS)(a)?(0,h.YK)(a):f.q.create(a)}function k(a){return(0,g.Et)(a)||(0,g.Lm)(a)||(0,g.kZ)(a)}function l(a){if(!k(a))throw Error(`unsafe immediate value ${JSON.stringify(a)}`);return f.q.createImmediate(a)}},82587:(a,b,c)=>{c.d(b,{y:()=>d});let d=a=>{let b=(a.plugins??[]).reduce((a,b)=>{let c=b.schema;if(!c)return a;for(let[b,d]of Object.entries(c))a[b]={fields:{...a[b]?.fields,...d.fields},modelName:d.modelName||b};return a},{}),c=a.rateLimit?.storage==="database",d={rateLimit:{modelName:a.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:a.rateLimit?.fields?.key||"key"},count:{type:"number",required:!0,fieldName:a.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,required:!0,fieldName:a.rateLimit?.fields?.lastRequest||"lastRequest",defaultValue:()=>Date.now()}}}},{user:e,session:f,account:g,verification:h,...i}=b,j={session:{modelName:a.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:a.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:a.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:a.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:a.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:a.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:a.session?.fields?.userId||"userId",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...f?.fields,...a.session?.additionalFields},order:2}};return{user:{modelName:a.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:a.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:a.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:a.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:a.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:a.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:a.user?.fields?.updatedAt||"updatedAt"},...e?.fields,...a.user?.additionalFields},order:1},...!a.secondaryStorage||a.session?.storeSessionInDatabase?j:{},account:{modelName:a.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:a.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:a.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:a.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,returned:!1,fieldName:a.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,returned:!1,fieldName:a.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,returned:!1,fieldName:a.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:a.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:a.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:a.account?.fields?.scope||"scope"},password:{type:"string",required:!1,returned:!1,fieldName:a.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:a.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...g?.fields,...a.account?.additionalFields},order:3},verification:{modelName:a.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:a.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:a.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:a.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:a.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:a.verification?.fields?.updatedAt||"updatedAt"},...h?.fields,...a.verification?.additionalFields},order:4},...i,...c?d:{}}}},83197:(a,b,c)=>{c.d(b,{e:()=>h});var d=c(60353),e=c(75227),f=c(84161),g=c(4315);let h=(0,d.CN)({is:a=>"DeleteQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"DeleteQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithOrderByItems:(a,b)=>g.L.cloneWithOrderByItems(a,b),cloneWithoutOrderBy:a=>g.L.cloneWithoutOrderBy(a),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:void 0!==a.using?f.f.cloneWithTables(a.using,b):f.f.create(b)})})},84161:(a,b,c)=>{c.d(b,{f:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"UsingNode"===a.kind,create:a=>(0,d.CN)({kind:"UsingNode",tables:(0,d.CN)(a)}),cloneWithTables:(a,b)=>(0,d.CN)({...a,tables:(0,d.CN)([...a.tables,...b])})})},84981:(a,b,c)=>{c.d(b,{t:()=>h});var d=c(9576);let e={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},f=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),g=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function h(){if(void 0!==(0,d.lh)("FORCE_COLOR"))switch((0,d.lh)("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==(0,d.lh)("NODE_DISABLE_COLORS")&&""!==(0,d.lh)("NODE_DISABLE_COLORS")||void 0!==(0,d.lh)("NO_COLOR")&&""!==(0,d.lh)("NO_COLOR")||"dumb"===(0,d.lh)("TERM"))return 1;if((0,d.lh)("TMUX"))return 24;if("TF_BUILD"in d._K&&"AGENT_NAME"in d._K)return 4;if("CI"in d._K){for(let{0:a,1:b}of f)if(a in d._K)return b;return"codeship"===(0,d.lh)("CI_NAME")?8:1}if("TEAMCITY_VERSION"in d._K)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec((0,d.lh)("TEAMCITY_VERSION"))?4:1;switch((0,d.lh)("TERM_PROGRAM")){case"iTerm.app":if(!(0,d.lh)("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec((0,d.lh)("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===(0,d.lh)("COLORTERM")||"24bit"===(0,d.lh)("COLORTERM"))return 24;if((0,d.lh)("TERM")){if(null!==/truecolor/.exec((0,d.lh)("TERM")))return 24;if(null!==/^xterm-256/.exec((0,d.lh)("TERM")))return 8;let a=(0,d.lh)("TERM").toLowerCase();if(e[a])return e[a];if(g.some(b=>null!==b.exec(a)))return 4}return(0,d.lh)("COLORTERM")?4:1}},88487:(a,b,c)=>{c.d(b,{Y:()=>f});var d=c(60353),e=c(36923);let f=(0,d.CN)({is:a=>"CreateViewNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateViewNode",name:e.y.create(a)}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},89875:(a,b,c)=>{function d(a,b=""){if(!Number.isSafeInteger(a)||a<0){let c=b&&`"${b}" `;throw Error(`${c}expected integer >= 0, got ${a}`)}}function e(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,f=a?.length,g=void 0!==b;if(!d||g&&f!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(g?` of length ${b}`:"")+", got "+(d?`length=${f}`:`type=${typeof a}`));return a}function f(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash must wrapped by utils.createHasher");d(a.outputLen),d(a.blockLen)}function g(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function h(a,b){e(a,void 0,"digestInto() output");let c=b.outputLen;if(a.length<c)throw Error('"digestInto() output" expected to be of length >='+c)}function i(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function j(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function k(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function l(a,b){return a<<32-b|a>>>b}function m(a,b){return a<<b|a>>>32-b>>>0}c.d(b,{$h:()=>t,CC:()=>g,DH:()=>i,DO:()=>e,Fe:()=>d,Ht:()=>h,K_:()=>u,O8:()=>k,Ow:()=>l,aT:()=>r,aZ:()=>m,fd:()=>n,nx:()=>x,qj:()=>w,sd:()=>f,tY:()=>v,uH:()=>j});let n=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a},o="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,p={_0:48,_9:57,A:65,F:70,a:97,f:102};function q(a){return a>=p._0&&a<=p._9?a-p._0:a>=p.A&&a<=p.F?a-(p.A-10):a>=p.a&&a<=p.f?a-(p.a-10):void 0}function r(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(o)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=q(a.charCodeAt(e)),f=q(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}let s=async()=>{};async function t(a,b,c){let d=Date.now();for(let e=0;e<a;e++){c(e);let a=Date.now()-d;a>=0&&a<b||(await s(),d+=a)}}function u(a,b=""){if("string"==typeof a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}return e(a,void 0,b)}function v(a,b){if(void 0!==b&&"[object Object]"!==({}).toString.call(b))throw Error("options must be object or undefined");return Object.assign(a,b)}function w(a,b={}){let c=(b,c)=>a(c).update(b).digest(),d=a(void 0);return c.outputLen=d.outputLen,c.blockLen=d.blockLen,c.create=b=>a(b),Object.assign(c,b),Object.freeze(c)}let x=a=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,a])})},90350:(a,b,c)=>{c.d(b,{q:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"ValueNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueNode",value:a}),createImmediate:a=>(0,d.CN)({kind:"ValueNode",value:a,immediate:!0})})},90409:(a,b,c)=>{c.d(b,{i:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"SetOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"SetOperationNode",operator:a,expression:b,all:c})})},90423:(a,b,c)=>{c.d(b,{c:()=>D});var d=c(44625),e=c(60353);let f=(0,e.CN)({is:a=>"SelectModifierNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"SelectModifierNode",modifier:a,of:b}),createWithExpression:a=>(0,e.CN)({kind:"SelectModifierNode",rawModifier:a})});var g=c(51591),h=c(19795),i=c(65582),j=c(2952),k=c(18804),l=c(4315),m=c(68019),n=c(70020);let o=(0,e.CN)({is:a=>"OffsetNode"===a.kind,create:a=>(0,e.CN)({kind:"OffsetNode",offset:a})}),p=(0,e.CN)({is:a=>"GroupByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"GroupByItemNode",groupBy:a})});var q=c(39281),r=c(10106),s=c(81266),t=c(90409),u=c(57105);function v(a,b,c){return(0,e.Tn)(b)&&(b=b((0,q.O)())),(0,e.MH)(b)||(b=[b]),b.map(b=>t.i.create(a,(0,u.YK)(b),c))}var w=c(53284),x=c(77688),y=c(82324),z=c(90350);let A=(0,e.CN)({is:a=>"FetchNode"===a.kind,create:(a,b)=>({kind:"FetchNode",rowCount:z.q.create(a),modifier:b})});var B=c(36903);class C{#s;constructor(a){this.#s=(0,e.CN)(a)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...a){return new C({...this.#s,queryNode:l.L.cloneWithWhere(this.#s.queryNode,(0,w.GB)(a))})}whereRef(a,b,c){return new C({...this.#s,queryNode:l.L.cloneWithWhere(this.#s.queryNode,(0,w.vC)(a,b,c))})}having(...a){return new C({...this.#s,queryNode:k.L.cloneWithHaving(this.#s.queryNode,(0,w.GB)(a))})}havingRef(a,b,c){return new C({...this.#s,queryNode:k.L.cloneWithHaving(this.#s.queryNode,(0,w.vC)(a,b,c))})}select(a){return new C({...this.#s,queryNode:k.L.cloneWithSelections(this.#s.queryNode,(0,i.G)(a))})}distinctOn(a){return new C({...this.#s,queryNode:k.L.cloneWithDistinctOn(this.#s.queryNode,(0,j.kU)(a))})}modifyFront(a){return new C({...this.#s,queryNode:k.L.cloneWithFrontModifier(this.#s.queryNode,f.createWithExpression(a.toOperationNode()))})}modifyEnd(a){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.createWithExpression(a.toOperationNode()))})}distinct(){return new C({...this.#s,queryNode:k.L.cloneWithFrontModifier(this.#s.queryNode,f.create("Distinct"))})}forUpdate(a){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("ForUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}forShare(a){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("ForShare",a?(0,e._j)(a).map(h.M$):void 0))})}forKeyShare(a){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("ForKeyShare",a?(0,e._j)(a).map(h.M$):void 0))})}forNoKeyUpdate(a){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("ForNoKeyUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}skipLocked(){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("SkipLocked"))})}noWait(){return new C({...this.#s,queryNode:l.L.cloneWithEndModifier(this.#s.queryNode,f.create("NoWait"))})}selectAll(a){return new C({...this.#s,queryNode:k.L.cloneWithSelections(this.#s.queryNode,(0,i.J)(a))})}innerJoin(...a){return this.#ac("InnerJoin",a)}leftJoin(...a){return this.#ac("LeftJoin",a)}rightJoin(...a){return this.#ac("RightJoin",a)}fullJoin(...a){return this.#ac("FullJoin",a)}crossJoin(...a){return this.#ac("CrossJoin",a)}innerJoinLateral(...a){return this.#ac("LateralInnerJoin",a)}leftJoinLateral(...a){return this.#ac("LateralLeftJoin",a)}crossJoinLateral(...a){return this.#ac("LateralCrossJoin",a)}crossApply(...a){return this.#ac("CrossApply",a)}outerApply(...a){return this.#ac("OuterApply",a)}#ac(a,b){return new C({...this.#s,queryNode:l.L.cloneWithJoin(this.#s.queryNode,(0,g.a)(a,b))})}orderBy(...a){return new C({...this.#s,queryNode:l.L.cloneWithOrderByItems(this.#s.queryNode,(0,m.xk)(a))})}groupBy(a){var b;return new C({...this.#s,queryNode:k.L.cloneWithGroupByItems(this.#s.queryNode,(b=a,b=(0,e.Tn)(b)?b((0,q.A)()):b,(0,j.kU)(b).map(p.create)))})}limit(a){return new C({...this.#s,queryNode:k.L.cloneWithLimit(this.#s.queryNode,n.a.create((0,y.$s)(a)))})}offset(a){return new C({...this.#s,queryNode:k.L.cloneWithOffset(this.#s.queryNode,o.create((0,y.$s)(a)))})}fetch(a,b="only"){return new C({...this.#s,queryNode:k.L.cloneWithFetch(this.#s.queryNode,function(a,b){var c;if(!(0,e.Et)(a)&&!(0,e.sI)(a))throw Error(`Invalid fetch row count: ${a}`);if("only"!==(c=b)&&"with ties"!==c)throw Error(`Invalid fetch modifier: ${b}`);return A.create(a,b)}(a,b))})}top(a,b){return new C({...this.#s,queryNode:l.L.cloneWithTop(this.#s.queryNode,(0,B.f)(a,b))})}union(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("union",a,!1))})}unionAll(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("union",a,!0))})}intersect(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("intersect",a,!1))})}intersectAll(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("intersect",a,!0))})}except(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("except",a,!1))})}exceptAll(a){return new C({...this.#s,queryNode:k.L.cloneWithSetOperations(this.#s.queryNode,v("except",a,!0))})}as(a){return new E(this,a)}clearSelect(){return new C({...this.#s,queryNode:k.L.cloneWithoutSelections(this.#s.queryNode)})}clearWhere(){return new C({...this.#s,queryNode:l.L.cloneWithoutWhere(this.#s.queryNode)})}clearLimit(){return new C({...this.#s,queryNode:k.L.cloneWithoutLimit(this.#s.queryNode)})}clearOffset(){return new C({...this.#s,queryNode:k.L.cloneWithoutOffset(this.#s.queryNode)})}clearOrderBy(){return new C({...this.#s,queryNode:l.L.cloneWithoutOrderBy(this.#s.queryNode)})}clearGroupBy(){return new C({...this.#s,queryNode:k.L.cloneWithoutGroupBy(this.#s.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new C({...this.#s})}$castTo(){return new C(this.#s)}$narrowType(){return new C(this.#s)}$assertType(){return new C(this.#s)}$asTuple(){return new x.Is(this.toOperationNode())}$asScalar(){return new x.Is(this.toOperationNode())}withPlugin(a){return new C({...this.#s,executor:this.#s.executor.withPlugin(a)})}toOperationNode(){return this.#s.executor.transformQuery(this.#s.queryNode,this.#s.queryId)}compile(){return this.#s.executor.compileQuery(this.toOperationNode(),this.#s.queryId)}async execute(){let a=this.compile();return(await this.#s.executor.executeQuery(a)).rows}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=r.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,r.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#s.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new C({...this.#s,queryNode:l.L.cloneWithExplain(this.#s.queryNode,a,b)});return await c.execute()}}function D(a){return new C(a)}class E{#a6;#p;constructor(a,b){this.#a6=a,this.#p=b}get expression(){return this.#a6}get alias(){return this.#p}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return d.N.create(this.#a6.toOperationNode(),s.O.create(this.#p))}}},92545:(a,b,c)=>{c.d(b,{Og:()=>h});var d=c(73519),e=c(76884),f=c(33164),g=c(32712);async function h(a,b,c){let h;if(!(0,g.G)(a))throw TypeError("JWK must be an object");switch(b??=a.alg,h??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,d.D)(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new f.T0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return(0,e.x)({...a,alg:b,ext:h});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return(0,e.x)({...a,ext:h});case"EC":case"OKP":return(0,e.x)({...a,alg:b,ext:h});default:throw new f.T0('Unsupported "kty" (Key Type) Parameter value')}}},93087:(a,b,c)=>{c.d(b,{U:()=>g});var d=c(60353),e=c(75227),f=c(97831);let g=(0,d.CN)({is:a=>"UpdateQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"UpdateQueryNode",table:1===a.length?a[0]:f.v.create(a),...b&&{with:b}}),createWithoutTable:()=>(0,d.CN)({kind:"UpdateQueryNode"}),cloneWithFromItems:(a,b)=>(0,d.CN)({...a,from:a.from?e.N.cloneWithFroms(a.from,b):e.N.create(b)}),cloneWithUpdates:(a,b)=>(0,d.CN)({...a,updates:a.updates?(0,d.CN)([...a.updates,...b]):b}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b})})},93092:(a,b,c)=>{c.d(b,{B:()=>f,o:()=>e});var d=c(60353);let e=["preserve rows","delete rows","drop"],f=(0,d.CN)({is:a=>"CreateTableNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateTableNode",table:a,columns:(0,d.CN)([])}),cloneWithColumn:(a,b)=>(0,d.CN)({...a,columns:(0,d.CN)([...a.columns,b])}),cloneWithConstraint:(a,b)=>(0,d.CN)({...a,constraints:a.constraints?(0,d.CN)([...a.constraints,b]):(0,d.CN)([b])}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithEndModifier:(a,b)=>(0,d.CN)({...a,endModifiers:a.endModifiers?(0,d.CN)([...a.endModifiers,b]):(0,d.CN)([b])}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},93159:(a,b,c)=>{c.d(b,{s:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"ValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueListNode",values:(0,d.CN)(a)})})},94285:(a,b,c)=>{function d(a){switch(a){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${a}`)}}function e(...a){let b=a.map(d).join("");if(0===b.length)throw Error("No valid characters provided for random string generation.");let c=b.length;return(a,...e)=>{let f;if(a<=0)throw Error("Length must be a positive integer.");let g=b,h=c;e.length>0&&(h=(g=e.map(d).join("")).length);let i=Math.floor(256/h)*h,j=new Uint8Array(2*a),k=j.length,l="",m=k;for(;l.length<a;)m>=k&&(crypto.getRandomValues(j),m=0),(f=j[m++])<i&&(l+=g[f%h]);return l}}c.d(b,{q:()=>e})},94296:(a,b,c)=>{c.d(b,{k:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"ParensNode"===a.kind,create:a=>(0,d.CN)({kind:"ParensNode",node:a})})},96931:(a,b,c)=>{c.d(b,{D:()=>e});let d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function e(a){let b="";for(let c=0;c<a;++c)b+=d[~~(Math.random()*d.length)];return b}},97831:(a,b,c)=>{c.d(b,{v:()=>e});var d=c(60353);let e=(0,d.CN)({is:a=>"ListNode"===a.kind,create:a=>(0,d.CN)({kind:"ListNode",items:(0,d.CN)(a)})})},97960:(a,b,c)=>{c.d(b,{$F:()=>d.$F,KV:()=>d.KV,Km:()=>d.Km,Nu:()=>d.Nu,_K:()=>d._K,h:()=>e.h,lh:()=>d.lh,p8:()=>e.p8,vF:()=>e.vF,yz:()=>d.yz});var d=c(9576);c(84981);var e=c(15560)}};