"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/better-auth";
exports.ids = ["vendor-chunks/better-auth"];
exports.modules = {

/***/ "(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __reExport: () => (/* binding */ __reExport)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") {\n\t\tfor (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\t\tkey = keys[i];\n\t\t\tif (!__hasOwnProp.call(to, key) && key !== except) {\n\t\t\t\t__defProp(to, key, {\n\t\t\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn to;\n};\nvar __reExport = (target, mod, secondTarget, symbols) => {\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t\tsecondTarget && __defProp(secondTarget, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\t__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\");\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxPQUFPO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsaUJBQWlCO0FBQzNELGdFQUFnRSxpQkFBaUI7QUFDakY7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcX3ZpcnR1YWxcXHJvbGxkb3duX3J1bnRpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiByb2xsZG93bjpydW50aW1lXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9IChhbGwsIHN5bWJvbHMpID0+IHtcblx0bGV0IHRhcmdldCA9IHt9O1xuXHRmb3IgKHZhciBuYW1lIGluIGFsbCkge1xuXHRcdF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHtcblx0XHRcdGdldDogYWxsW25hbWVdLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHR9XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHR9XG5cdHJldHVybiB0YXJnZXQ7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcblx0aWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdGZvciAodmFyIGtleXMgPSBfX2dldE93blByb3BOYW1lcyhmcm9tKSwgaSA9IDAsIG4gPSBrZXlzLmxlbmd0aCwga2V5OyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRrZXkgPSBrZXlzW2ldO1xuXHRcdFx0aWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdCkge1xuXHRcdFx0XHRfX2RlZlByb3AodG8sIGtleSwge1xuXHRcdFx0XHRcdGdldDogKChrKSA9PiBmcm9tW2tdKS5iaW5kKG51bGwsIGtleSksXG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0bztcbn07XG52YXIgX19yZUV4cG9ydCA9ICh0YXJnZXQsIG1vZCwgc2Vjb25kVGFyZ2V0LCBzeW1ib2xzKSA9PiB7XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHRcdHNlY29uZFRhcmdldCAmJiBfX2RlZlByb3Aoc2Vjb25kVGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdH1cblx0X19jb3B5UHJvcHModGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKSwgc2Vjb25kVGFyZ2V0ICYmIF9fY29weVByb3BzKHNlY29uZFRhcmdldCwgbW9kLCBcImRlZmF1bHRcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BunSqliteDialect: () => (/* binding */ BunSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/bun-sqlite-dialect.ts\nvar BunSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar BunSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new BunSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar BunSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst stmt = this.#db.prepare(sql$1);\n\t\treturn Promise.resolve({ rows: stmt.all(parameters) });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar BunSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar BunSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar BunSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new BunSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new BunSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new BunSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new BunSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=bun-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9idW4tc3FsaXRlLWRpYWxlY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlIOztBQUV6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBLDJCQUEyQiw0QkFBNEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBLDJFQUEyRSwyREFBdUIsc0JBQXNCLGdFQUE0QjtBQUNwSjtBQUNBLG1DQUFtQyxNQUFNO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJDQUFHLHFCQUFxQixNQUFNO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdEQUFvQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGt5c2VseS1hZGFwdGVyXFxidW4tc3FsaXRlLWRpYWxlY3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBpbGVkUXVlcnksIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFLCBEZWZhdWx0UXVlcnlDb21waWxlciwgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2J1bi1zcWxpdGUtZGlhbGVjdC50c1xudmFyIEJ1blNxbGl0ZUFkYXB0ZXIgPSBjbGFzcyB7XG5cdGdldCBzdXBwb3J0c0NyZWF0ZUlmTm90RXhpc3RzKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGdldCBzdXBwb3J0c1RyYW5zYWN0aW9uYWxEZGwoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGdldCBzdXBwb3J0c1JldHVybmluZygpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRhc3luYyBhY3F1aXJlTWlncmF0aW9uTG9jaygpIHt9XG5cdGFzeW5jIHJlbGVhc2VNaWdyYXRpb25Mb2NrKCkge31cblx0Z2V0IHN1cHBvcnRzT3V0cHV0KCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZURyaXZlciA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0I2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcblx0I2RiO1xuXHQjY29ubmVjdGlvbjtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRhc3luYyBpbml0KCkge1xuXHRcdHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgQnVuU3FsaXRlQ29ubmVjdGlvbih0aGlzLiNkYik7XG5cdFx0aWYgKHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24pIGF3YWl0IHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24odGhpcy4jY29ubmVjdGlvbik7XG5cdH1cblx0YXN5bmMgYWNxdWlyZUNvbm5lY3Rpb24oKSB7XG5cdFx0YXdhaXQgdGhpcy4jY29ubmVjdGlvbk11dGV4LmxvY2soKTtcblx0XHRyZXR1cm4gdGhpcy4jY29ubmVjdGlvbjtcblx0fVxuXHRhc3luYyBiZWdpblRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImJlZ2luXCIpKTtcblx0fVxuXHRhc3luYyBjb21taXRUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJjb21taXRcIikpO1xuXHR9XG5cdGFzeW5jIHJvbGxiYWNrVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwicm9sbGJhY2tcIikpO1xuXHR9XG5cdGFzeW5jIHJlbGVhc2VDb25uZWN0aW9uKCkge1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb25NdXRleC51bmxvY2soKTtcblx0fVxuXHRhc3luYyBkZXN0cm95KCkge1xuXHRcdHRoaXMuI2RiPy5jbG9zZSgpO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZUNvbm5lY3Rpb24gPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGV4ZWN1dGVRdWVyeShjb21waWxlZFF1ZXJ5KSB7XG5cdFx0Y29uc3QgeyBzcWw6IHNxbCQxLCBwYXJhbWV0ZXJzIH0gPSBjb21waWxlZFF1ZXJ5O1xuXHRcdGNvbnN0IHN0bXQgPSB0aGlzLiNkYi5wcmVwYXJlKHNxbCQxKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcm93czogc3RtdC5hbGwocGFyYW1ldGVycykgfSk7XG5cdH1cblx0YXN5bmMgKnN0cmVhbVF1ZXJ5KCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlN0cmVhbWluZyBxdWVyeSBpcyBub3Qgc3VwcG9ydGVkIGJ5IFNRTGl0ZSBkcml2ZXIuXCIpO1xuXHR9XG59O1xudmFyIENvbm5lY3Rpb25NdXRleCA9IGNsYXNzIHtcblx0I3Byb21pc2U7XG5cdCNyZXNvbHZlO1xuXHRhc3luYyBsb2NrKCkge1xuXHRcdHdoaWxlIChhd2FpdCB0aGlzLiNwcm9taXNlKSBhd2FpdCB0aGlzLiNwcm9taXNlO1xuXHRcdHRoaXMuI3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0dGhpcy4jcmVzb2x2ZSA9IHJlc29sdmU7XG5cdFx0fSk7XG5cdH1cblx0dW5sb2NrKCkge1xuXHRcdGNvbnN0IHJlc29sdmUgPSB0aGlzLiNyZXNvbHZlO1xuXHRcdHRoaXMuI3Byb21pc2UgPSB2b2lkIDA7XG5cdFx0dGhpcy4jcmVzb2x2ZSA9IHZvaWQgMDtcblx0XHRyZXNvbHZlPy4oKTtcblx0fVxufTtcbnZhciBCdW5TcWxpdGVJbnRyb3NwZWN0b3IgPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGFzeW5jIGdldFNjaGVtYXMoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcblx0XHRsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcblx0XHRpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcblx0XHRjb25zdCB0YWJsZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHRhYmxlcy5tYXAoKHsgbmFtZSB9KSA9PiB0aGlzLiNnZXRUYWJsZU1ldGFkYXRhKG5hbWUpKSk7XG5cdH1cblx0YXN5bmMgZ2V0TWV0YWRhdGEob3B0aW9ucykge1xuXHRcdHJldHVybiB7IHRhYmxlczogYXdhaXQgdGhpcy5nZXRUYWJsZXMob3B0aW9ucykgfTtcblx0fVxuXHRhc3luYyAjZ2V0VGFibGVNZXRhZGF0YSh0YWJsZSkge1xuXHRcdGNvbnN0IGRiID0gdGhpcy4jZGI7XG5cdFx0Y29uc3QgYXV0b0luY3JlbWVudENvbCA9IChhd2FpdCBkYi5zZWxlY3RGcm9tKFwic3FsaXRlX21hc3RlclwiKS53aGVyZShcIm5hbWVcIiwgXCI9XCIsIHRhYmxlKS5zZWxlY3QoXCJzcWxcIikuJGNhc3RUbygpLmV4ZWN1dGUoKSlbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0YWJsZSxcblx0XHRcdGNvbHVtbnM6IChhd2FpdCBkYi5zZWxlY3RGcm9tKHNxbGBwcmFnbWFfdGFibGVfaW5mbygke3RhYmxlfSlgLmFzKFwidGFibGVfaW5mb1wiKSkuc2VsZWN0KFtcblx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFwidHlwZVwiLFxuXHRcdFx0XHRcIm5vdG51bGxcIixcblx0XHRcdFx0XCJkZmx0X3ZhbHVlXCJcblx0XHRcdF0pLmV4ZWN1dGUoKSkubWFwKChjb2wpID0+ICh7XG5cdFx0XHRcdG5hbWU6IGNvbC5uYW1lLFxuXHRcdFx0XHRkYXRhVHlwZTogY29sLnR5cGUsXG5cdFx0XHRcdGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcblx0XHRcdFx0aXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcblx0XHRcdFx0aGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG5cdFx0XHR9KSksXG5cdFx0XHRpc1ZpZXc6IHRydWVcblx0XHR9O1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZVF1ZXJ5Q29tcGlsZXIgPSBjbGFzcyBleHRlbmRzIERlZmF1bHRRdWVyeUNvbXBpbGVyIHtcblx0Z2V0Q3VycmVudFBhcmFtZXRlclBsYWNlaG9sZGVyKCkge1xuXHRcdHJldHVybiBcIj9cIjtcblx0fVxuXHRnZXRMZWZ0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldFJpZ2h0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldEF1dG9JbmNyZW1lbnQoKSB7XG5cdFx0cmV0dXJuIFwiYXV0b2luY3JlbWVudFwiO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZURpYWxlY3QgPSBjbGFzcyB7XG5cdCNjb25maWc7XG5cdGNvbnN0cnVjdG9yKGNvbmZpZykge1xuXHRcdHRoaXMuI2NvbmZpZyA9IHsgLi4uY29uZmlnIH07XG5cdH1cblx0Y3JlYXRlRHJpdmVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlRHJpdmVyKHRoaXMuI2NvbmZpZyk7XG5cdH1cblx0Y3JlYXRlUXVlcnlDb21waWxlcigpIHtcblx0XHRyZXR1cm4gbmV3IEJ1blNxbGl0ZVF1ZXJ5Q29tcGlsZXIoKTtcblx0fVxuXHRjcmVhdGVBZGFwdGVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlQWRhcHRlcigpO1xuXHR9XG5cdGNyZWF0ZUludHJvc3BlY3RvcihkYikge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlSW50cm9zcGVjdG9yKGRiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBCdW5TcWxpdGVEaWFsZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idW4tc3FsaXRlLWRpYWxlY3QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* binding */ createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* binding */ getKyselyDatabaseType)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/sqlite/sqlite-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mysql/mysql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/postgres/postgres-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mssql/mssql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/kysely.js\");\n\n\n//#region src/adapters/kysely-adapter/dialect.ts\nfunction getKyselyDatabaseType(db) {\n\tif (!db) return null;\n\tif (\"dialect\" in db) return getKyselyDatabaseType(db.dialect);\n\tif (\"createDriver\" in db) {\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect) return \"sqlite\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect) return \"mysql\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect) return \"postgres\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_3__.MssqlDialect) return \"mssql\";\n\t}\n\tif (\"aggregate\" in db) return \"sqlite\";\n\tif (\"getConnection\" in db) return \"mysql\";\n\tif (\"connect\" in db) return \"postgres\";\n\tif (\"fileControl\" in db) return \"sqlite\";\n\tif (\"open\" in db && \"close\" in db && \"prepare\" in db) return \"sqlite\";\n\treturn null;\n}\nconst createKyselyAdapter = async (config) => {\n\tconst db = config.database;\n\tif (!db) return {\n\t\tkysely: null,\n\t\tdatabaseType: null,\n\t\ttransaction: void 0\n\t};\n\tif (\"db\" in db) return {\n\t\tkysely: db.db,\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tif (\"dialect\" in db) return {\n\t\tkysely: new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect: db.dialect }),\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tlet dialect = void 0;\n\tconst databaseType = getKyselyDatabaseType(db);\n\tif (\"createDriver\" in db) dialect = db;\n\tif (\"aggregate\" in db && !(\"createSession\" in db)) dialect = new kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect({ database: db });\n\tif (\"getConnection\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect(db);\n\tif (\"connect\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect({ pool: db });\n\tif (\"fileControl\" in db) {\n\t\tconst { BunSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ./bun-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\"));\n\t\tdialect = new BunSqliteDialect({ database: db });\n\t}\n\tif (\"createSession\" in db) {\n\t\tlet DatabaseSync = void 0;\n\t\ttry {\n\t\t\tconst nodeSqlite = \"node:sqlite\";\n\t\t\t({DatabaseSync} = await import(\n\t\t\t\t/* @vite-ignore */\n\t\t\t\t/* webpackIgnore: true */\n\t\t\t\tnodeSqlite\n));\n\t\t} catch (error) {\n\t\t\tif (error !== null && typeof error === \"object\" && \"code\" in error && error.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\") throw error;\n\t\t}\n\t\tif (DatabaseSync && db instanceof DatabaseSync) {\n\t\t\tconst { NodeSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ./node-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\"));\n\t\t\tdialect = new NodeSqliteDialect({ database: db });\n\t\t}\n\t}\n\treturn {\n\t\tkysely: dialect ? new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect }) : null,\n\t\tdatabaseType,\n\t\ttransaction: void 0\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRGOztBQUU1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFhO0FBQ2pDLG9CQUFvQixnREFBWTtBQUNoQyxvQkFBb0IsbURBQWU7QUFDbkMsb0JBQW9CLGdEQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQU0sR0FBRyxxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGlEQUFhLEdBQUcsY0FBYztBQUNoRywwQ0FBMEMsZ0RBQVk7QUFDdEQsb0NBQW9DLG1EQUFlLEdBQUcsVUFBVTtBQUNoRTtBQUNBLFVBQVUsbUJBQW1CLFFBQVEsOE9BQWtDO0FBQ3ZFLG1DQUFtQyxjQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGNBQWM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvQkFBb0IsUUFBUSxnUEFBbUM7QUFDMUUscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUFNLEdBQUcsU0FBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNzRDtBQUN0RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxreXNlbHktYWRhcHRlclxcZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS3lzZWx5LCBNc3NxbERpYWxlY3QsIE15c3FsRGlhbGVjdCwgUG9zdGdyZXNEaWFsZWN0LCBTcWxpdGVEaWFsZWN0IH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2RpYWxlY3QudHNcbmZ1bmN0aW9uIGdldEt5c2VseURhdGFiYXNlVHlwZShkYikge1xuXHRpZiAoIWRiKSByZXR1cm4gbnVsbDtcblx0aWYgKFwiZGlhbGVjdFwiIGluIGRiKSByZXR1cm4gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiLmRpYWxlY3QpO1xuXHRpZiAoXCJjcmVhdGVEcml2ZXJcIiBpbiBkYikge1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIFNxbGl0ZURpYWxlY3QpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIE15c3FsRGlhbGVjdCkgcmV0dXJuIFwibXlzcWxcIjtcblx0XHRpZiAoZGIgaW5zdGFuY2VvZiBQb3N0Z3Jlc0RpYWxlY3QpIHJldHVybiBcInBvc3RncmVzXCI7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgTXNzcWxEaWFsZWN0KSByZXR1cm4gXCJtc3NxbFwiO1xuXHR9XG5cdGlmIChcImFnZ3JlZ2F0ZVwiIGluIGRiKSByZXR1cm4gXCJzcWxpdGVcIjtcblx0aWYgKFwiZ2V0Q29ubmVjdGlvblwiIGluIGRiKSByZXR1cm4gXCJteXNxbFwiO1xuXHRpZiAoXCJjb25uZWN0XCIgaW4gZGIpIHJldHVybiBcInBvc3RncmVzXCI7XG5cdGlmIChcImZpbGVDb250cm9sXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRpZiAoXCJvcGVuXCIgaW4gZGIgJiYgXCJjbG9zZVwiIGluIGRiICYmIFwicHJlcGFyZVwiIGluIGRiKSByZXR1cm4gXCJzcWxpdGVcIjtcblx0cmV0dXJuIG51bGw7XG59XG5jb25zdCBjcmVhdGVLeXNlbHlBZGFwdGVyID0gYXN5bmMgKGNvbmZpZykgPT4ge1xuXHRjb25zdCBkYiA9IGNvbmZpZy5kYXRhYmFzZTtcblx0aWYgKCFkYikgcmV0dXJuIHtcblx0XHRreXNlbHk6IG51bGwsXG5cdFx0ZGF0YWJhc2VUeXBlOiBudWxsLFxuXHRcdHRyYW5zYWN0aW9uOiB2b2lkIDBcblx0fTtcblx0aWYgKFwiZGJcIiBpbiBkYikgcmV0dXJuIHtcblx0XHRreXNlbHk6IGRiLmRiLFxuXHRcdGRhdGFiYXNlVHlwZTogZGIudHlwZSxcblx0XHR0cmFuc2FjdGlvbjogZGIudHJhbnNhY3Rpb25cblx0fTtcblx0aWYgKFwiZGlhbGVjdFwiIGluIGRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogbmV3IEt5c2VseSh7IGRpYWxlY3Q6IGRiLmRpYWxlY3QgfSksXG5cdFx0ZGF0YWJhc2VUeXBlOiBkYi50eXBlLFxuXHRcdHRyYW5zYWN0aW9uOiBkYi50cmFuc2FjdGlvblxuXHR9O1xuXHRsZXQgZGlhbGVjdCA9IHZvaWQgMDtcblx0Y29uc3QgZGF0YWJhc2VUeXBlID0gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiKTtcblx0aWYgKFwiY3JlYXRlRHJpdmVyXCIgaW4gZGIpIGRpYWxlY3QgPSBkYjtcblx0aWYgKFwiYWdncmVnYXRlXCIgaW4gZGIgJiYgIShcImNyZWF0ZVNlc3Npb25cIiBpbiBkYikpIGRpYWxlY3QgPSBuZXcgU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0aWYgKFwiZ2V0Q29ubmVjdGlvblwiIGluIGRiKSBkaWFsZWN0ID0gbmV3IE15c3FsRGlhbGVjdChkYik7XG5cdGlmIChcImNvbm5lY3RcIiBpbiBkYikgZGlhbGVjdCA9IG5ldyBQb3N0Z3Jlc0RpYWxlY3QoeyBwb29sOiBkYiB9KTtcblx0aWYgKFwiZmlsZUNvbnRyb2xcIiBpbiBkYikge1xuXHRcdGNvbnN0IHsgQnVuU3FsaXRlRGlhbGVjdCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9idW4tc3FsaXRlLWRpYWxlY3QubWpzXCIpO1xuXHRcdGRpYWxlY3QgPSBuZXcgQnVuU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0fVxuXHRpZiAoXCJjcmVhdGVTZXNzaW9uXCIgaW4gZGIpIHtcblx0XHRsZXQgRGF0YWJhc2VTeW5jID0gdm9pZCAwO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBub2RlU3FsaXRlID0gXCJub2RlOnNxbGl0ZVwiO1xuXHRcdFx0KHtEYXRhYmFzZVN5bmN9ID0gYXdhaXQgaW1wb3J0KFxuXHRcdFx0XHQvKiBAdml0ZS1pZ25vcmUgKi9cblx0XHRcdFx0Lyogd2VicGFja0lnbm9yZTogdHJ1ZSAqL1xuXHRcdFx0XHRub2RlU3FsaXRlXG4pKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yICE9PSBudWxsICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcImNvZGVcIiBpbiBlcnJvciAmJiBlcnJvci5jb2RlICE9PSBcIkVSUl9VTktOT1dOX0JVSUxUSU5fTU9EVUxFXCIpIHRocm93IGVycm9yO1xuXHRcdH1cblx0XHRpZiAoRGF0YWJhc2VTeW5jICYmIGRiIGluc3RhbmNlb2YgRGF0YWJhc2VTeW5jKSB7XG5cdFx0XHRjb25zdCB7IE5vZGVTcWxpdGVEaWFsZWN0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL25vZGUtc3FsaXRlLWRpYWxlY3QubWpzXCIpO1xuXHRcdFx0ZGlhbGVjdCA9IG5ldyBOb2RlU3FsaXRlRGlhbGVjdCh7IGRhdGFiYXNlOiBkYiB9KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHRreXNlbHk6IGRpYWxlY3QgPyBuZXcgS3lzZWx5KHsgZGlhbGVjdCB9KSA6IG51bGwsXG5cdFx0ZGF0YWJhc2VUeXBlLFxuXHRcdHRyYW5zYWN0aW9uOiB2b2lkIDBcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlS3lzZWx5QWRhcHRlciwgZ2V0S3lzZWx5RGF0YWJhc2VUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaWFsZWN0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType),\n/* harmony export */   kyselyAdapter: () => (/* reexport safe */ _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__.kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kysely-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkU7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyLCBnZXRLeXNlbHlEYXRhYmFzZVR5cGUgfSBmcm9tIFwiLi9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsga3lzZWx5QWRhcHRlciB9IGZyb20gXCIuL2t5c2VseS1hZGFwdGVyLm1qc1wiO1xuXG5leHBvcnQgeyBjcmVhdGVLeXNlbHlBZGFwdGVyLCBnZXRLeXNlbHlEYXRhYmFzZVR5cGUsIGt5c2VseUFkYXB0ZXIgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kyselyAdapter: () => (/* binding */ kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/kysely-adapter/kysely-adapter.ts\nconst kyselyAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => {\n\t\treturn ({ getFieldName, schema, getDefaultFieldName, getDefaultModelName, getFieldAttributes, getModelName }) => {\n\t\t\tconst selectAllJoins = (join) => {\n\t\t\t\tconst allSelects = [];\n\t\t\t\tconst allSelectsStr = [];\n\t\t\t\tif (join) for (const [joinModel, _] of Object.entries(join)) {\n\t\t\t\t\tconst fields = schema[getDefaultModelName(joinModel)]?.fields;\n\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\tif (!fields) continue;\n\t\t\t\t\tfields.id = { type: \"string\" };\n\t\t\t\t\tfor (const [field, fieldAttr] of Object.entries(fields)) {\n\t\t\t\t\t\tallSelects.push((0,kysely__WEBPACK_IMPORTED_MODULE_1__.sql)`${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`join_${joinModelName}`)}.${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(fieldAttr.fieldName || field)} as ${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`_joined_${joinModelName}_${fieldAttr.fieldName || field}`)}`);\n\t\t\t\t\t\tallSelectsStr.push({\n\t\t\t\t\t\t\tjoinModel,\n\t\t\t\t\t\t\tjoinModelRef: joinModelName,\n\t\t\t\t\t\t\tfieldName: fieldAttr.fieldName || field\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tallSelectsStr,\n\t\t\t\t\tallSelects\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst withReturning = async (values, builder, model, where) => {\n\t\t\t\tlet res;\n\t\t\t\tif (config?.type === \"mysql\") {\n\t\t\t\t\tawait builder.execute();\n\t\t\t\t\tconst field = values.id ? \"id\" : where.length > 0 && where[0]?.field ? where[0].field : \"id\";\n\t\t\t\t\tif (!values.id && where.length === 0) {\n\t\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t}), \"desc\").limit(1).executeTakeFirst();\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = values[field] || where[0]?.value;\n\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"desc\").where(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"=\", value).limit(1).executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\tres = await builder.outputAll(\"inserted\").executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tres = await builder.returningAll().executeTakeFirst();\n\t\t\t\treturn res;\n\t\t\t};\n\t\t\tfunction convertWhereClause(model, w) {\n\t\t\t\tif (!w) return {\n\t\t\t\t\tand: null,\n\t\t\t\t\tor: null\n\t\t\t\t};\n\t\t\t\tconst conditions = {\n\t\t\t\t\tand: [],\n\t\t\t\t\tor: []\n\t\t\t\t};\n\t\t\t\tw.forEach((condition) => {\n\t\t\t\t\tconst { field: _field, value: _value, operator = \"=\", connector = \"AND\" } = condition;\n\t\t\t\t\tconst value = _value;\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: _field\n\t\t\t\t\t});\n\t\t\t\t\tconst expr = (eb) => {\n\t\t\t\t\t\tconst f = `${model}.${field}`;\n\t\t\t\t\t\tif (operator.toLowerCase() === \"in\") return eb(f, \"in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator.toLowerCase() === \"not_in\") return eb(f, \"not in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator === \"contains\") return eb(f, \"like\", `%${value}%`);\n\t\t\t\t\t\tif (operator === \"starts_with\") return eb(f, \"like\", `${value}%`);\n\t\t\t\t\t\tif (operator === \"ends_with\") return eb(f, \"like\", `%${value}`);\n\t\t\t\t\t\tif (operator === \"eq\") return eb(f, \"=\", value);\n\t\t\t\t\t\tif (operator === \"ne\") return eb(f, \"<>\", value);\n\t\t\t\t\t\tif (operator === \"gt\") return eb(f, \">\", value);\n\t\t\t\t\t\tif (operator === \"gte\") return eb(f, \">=\", value);\n\t\t\t\t\t\tif (operator === \"lt\") return eb(f, \"<\", value);\n\t\t\t\t\t\tif (operator === \"lte\") return eb(f, \"<=\", value);\n\t\t\t\t\t\treturn eb(f, operator, value);\n\t\t\t\t\t};\n\t\t\t\t\tif (connector === \"OR\") conditions.or.push(expr);\n\t\t\t\t\telse conditions.and.push(expr);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tand: conditions.and.length ? conditions.and : null,\n\t\t\t\t\tor: conditions.or.length ? conditions.or : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction processJoinedResults(rows, joinConfig, allSelectsStr) {\n\t\t\t\tif (!joinConfig || !rows.length) return rows;\n\t\t\t\tconst groupedByMainId = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const currentRow of rows) {\n\t\t\t\t\tconst mainModelFields = {};\n\t\t\t\t\tconst joinedModelFields = {};\n\t\t\t\t\tfor (const [joinModel] of Object.entries(joinConfig)) joinedModelFields[getModelName(joinModel)] = {};\n\t\t\t\t\tfor (const [key, value] of Object.entries(currentRow)) {\n\t\t\t\t\t\tconst keyStr = String(key);\n\t\t\t\t\t\tlet assigned = false;\n\t\t\t\t\t\tfor (const { joinModel, fieldName, joinModelRef } of allSelectsStr) if (keyStr === `_joined_${joinModelRef}_${fieldName}`) {\n\t\t\t\t\t\t\tjoinedModelFields[getModelName(joinModel)][getFieldName({\n\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\tfield: fieldName\n\t\t\t\t\t\t\t})] = value;\n\t\t\t\t\t\t\tassigned = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!assigned) mainModelFields[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tconst mainId = mainModelFields.id;\n\t\t\t\t\tif (!mainId) continue;\n\t\t\t\t\tif (!groupedByMainId.has(mainId)) {\n\t\t\t\t\t\tconst entry$1 = { ...mainModelFields };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) entry$1[getModelName(joinModel)] = joinAttr.relation === \"one-to-one\" ? null : [];\n\t\t\t\t\t\tgroupedByMainId.set(mainId, entry$1);\n\t\t\t\t\t}\n\t\t\t\t\tconst entry = groupedByMainId.get(mainId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) {\n\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tconst joinedObj = joinedModelFields[getModelName(joinModel)];\n\t\t\t\t\t\tconst hasData = joinedObj && Object.keys(joinedObj).length > 0 && Object.values(joinedObj).some((value) => value !== null && value !== void 0);\n\t\t\t\t\t\tif (isUnique) entry[getModelName(joinModel)] = hasData ? joinedObj : null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (Array.isArray(entry[joinModelName]) && hasData) {\n\t\t\t\t\t\t\t\tif (entry[joinModelName].length >= limit) continue;\n\t\t\t\t\t\t\t\tconst idFieldName = getFieldName({\n\t\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconst joinedId = joinedObj[idFieldName];\n\t\t\t\t\t\t\t\tif (joinedId) {\n\t\t\t\t\t\t\t\t\tif (!entry[joinModelName].some((item) => item[idFieldName] === joinedId) && entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t\t} else if (entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst result = Array.from(groupedByMainId.values());\n\t\t\t\tfor (const entry of result) for (const [joinModel, joinAttr] of Object.entries(joinConfig)) if (joinAttr.relation !== \"one-to-one\") {\n\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\tif (Array.isArray(entry[joinModelName])) {\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tif (entry[joinModelName].length > limit) entry[joinModelName] = entry[joinModelName].slice(0, limit);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tasync create({ data, model }) {\n\t\t\t\t\treturn await withReturning(data, db$1.insertInto(model).values(data), model, []);\n\t\t\t\t},\n\t\t\t\tasync findOne({ model, where, select, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res || !Array.isArray(res) || res.length === 0) return null;\n\t\t\t\t\tconst row = res[0];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr)[0];\n\t\t\t\t\treturn row;\n\t\t\t\t},\n\t\t\t\tasync findMany({ model, where, limit, offset, sortBy, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\t\t\tif (offset !== void 0) {\n\t\t\t\t\t\t\t\tif (!sortBy) b = b.orderBy(getFieldName({\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tb = b.offset(offset).fetch(limit || 100);\n\t\t\t\t\t\t\t} else if (limit !== void 0) b = b.top(limit);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (limit !== void 0) b = b.limit(limit);\n\t\t\t\t\t\t\tif (offset !== void 0) b = b.offset(offset);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sortBy?.field) b = b.orderBy(`${getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tif (sortBy?.field) query = query.orderBy(`${getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res) return [];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\t\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\treturn await withReturning(values, query, model, where);\n\t\t\t\t},\n\t\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numUpdatedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\tasync count({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom(model).select(db$1.fn.count(\"id\").as(\"count\"));\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (typeof res[0].count === \"number\") return res[0].count;\n\t\t\t\t\tif (typeof res[0].count === \"bigint\") return Number(res[0].count);\n\t\t\t\t\treturn parseInt(res[0].count);\n\t\t\t\t},\n\t\t\t\tasync delete({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tawait query.execute();\n\t\t\t\t},\n\t\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numDeletedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\toptions: config\n\t\t\t};\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"kysely\",\n\t\t\tadapterName: \"Kysely Adapter\",\n\t\t\tusePlural: config?.usePlural,\n\t\t\tdebugLogs: config?.debugLogs,\n\t\t\tsupportsBooleans: config?.type === \"sqlite\" || config?.type === \"mssql\" || config?.type === \"mysql\" || !config?.type ? false : true,\n\t\t\tsupportsDates: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n\t\t\tsupportsJSON: config?.type === \"postgres\" ? true : false,\n\t\t\tsupportsArrays: false,\n\t\t\tsupportsUUIDs: config?.type === \"postgres\" ? true : false,\n\t\t\ttransaction: config?.transaction ? (cb) => db.transaction().execute((trx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(trx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=kysely-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9reXNlbHktYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBQ3VDOztBQUVwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0dBQWtHO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0Esc0JBQXNCLDJDQUFHLEdBQUcsdUNBQUcsYUFBYSxjQUFjLEdBQUcsR0FBRyx1Q0FBRyxvQ0FBb0MsS0FBSyx1Q0FBRyxnQkFBZ0IsY0FBYyxHQUFHLDZCQUE2QixHQUFHO0FBQ2hMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRUFBa0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxtQkFBbUIsTUFBTSxHQUFHLE1BQU07QUFDbEM7QUFDQTtBQUNBLDREQUE0RCxNQUFNO0FBQ2xFLDhEQUE4RCxNQUFNO0FBQ3BFLDZEQUE2RCxNQUFNO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxQ0FBcUMsNENBQTRDLGFBQWEsR0FBRyxVQUFVO0FBQzlIO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDO0FBQ0EsS0FBSztBQUNMLG9CQUFvQiw0QkFBNEI7QUFDaEQsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGdDQUFnQyxXQUFXLFVBQVUsY0FBYyxvQ0FBb0MsY0FBYyxHQUFHLGVBQWUsbUJBQW1CLGlCQUFpQjtBQUMzSztBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsMkNBQTJDO0FBQ2hFLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSxPQUFPLEVBQUU7QUFDVDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGdDQUFnQyxXQUFXLFVBQVUsY0FBYyxvQ0FBb0MsY0FBYyxHQUFHLGVBQWUsbUJBQW1CLGlCQUFpQjtBQUMzSztBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSxNQUFNLEVBQUU7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsOEJBQThCO0FBQ2pELGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsOEJBQThCO0FBQ3JELGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGtCQUFrQixjQUFjO0FBQ2hDLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsY0FBYztBQUNqQyxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLGNBQWM7QUFDckMsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0ZBQW9CO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLGtGQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYWRhcHRlcnNcXGt5c2VseS1hZGFwdGVyXFxreXNlbHktYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuaW1wb3J0IHsgY3JlYXRlQWRhcHRlckZhY3RvcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2t5c2VseS1hZGFwdGVyLnRzXG5jb25zdCBreXNlbHlBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IHtcblx0bGV0IGxhenlPcHRpb25zID0gbnVsbDtcblx0Y29uc3QgY3JlYXRlQ3VzdG9tQWRhcHRlciA9IChkYiQxKSA9PiB7XG5cdFx0cmV0dXJuICh7IGdldEZpZWxkTmFtZSwgc2NoZW1hLCBnZXREZWZhdWx0RmllbGROYW1lLCBnZXREZWZhdWx0TW9kZWxOYW1lLCBnZXRGaWVsZEF0dHJpYnV0ZXMsIGdldE1vZGVsTmFtZSB9KSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3RBbGxKb2lucyA9IChqb2luKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGFsbFNlbGVjdHMgPSBbXTtcblx0XHRcdFx0Y29uc3QgYWxsU2VsZWN0c1N0ciA9IFtdO1xuXHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBfXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkcyA9IHNjaGVtYVtnZXREZWZhdWx0TW9kZWxOYW1lKGpvaW5Nb2RlbCldPy5maWVsZHM7XG5cdFx0XHRcdFx0Y29uc3QgW19qb2luTW9kZWxTY2hlbWEsIGpvaW5Nb2RlbE5hbWVdID0gam9pbk1vZGVsLmluY2x1ZGVzKFwiLlwiKSA/IGpvaW5Nb2RlbC5zcGxpdChcIi5cIikgOiBbdm9pZCAwLCBqb2luTW9kZWxdO1xuXHRcdFx0XHRcdGlmICghZmllbGRzKSBjb250aW51ZTtcblx0XHRcdFx0XHRmaWVsZHMuaWQgPSB7IHR5cGU6IFwic3RyaW5nXCIgfTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtmaWVsZCwgZmllbGRBdHRyXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMpKSB7XG5cdFx0XHRcdFx0XHRhbGxTZWxlY3RzLnB1c2goc3FsYCR7c3FsLnJlZihgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCl9LiR7c3FsLnJlZihmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkKX0gYXMgJHtzcWwucmVmKGBfam9pbmVkXyR7am9pbk1vZGVsTmFtZX1fJHtmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkfWApfWApO1xuXHRcdFx0XHRcdFx0YWxsU2VsZWN0c1N0ci5wdXNoKHtcblx0XHRcdFx0XHRcdFx0am9pbk1vZGVsLFxuXHRcdFx0XHRcdFx0XHRqb2luTW9kZWxSZWY6IGpvaW5Nb2RlbE5hbWUsXG5cdFx0XHRcdFx0XHRcdGZpZWxkTmFtZTogZmllbGRBdHRyLmZpZWxkTmFtZSB8fCBmaWVsZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YWxsU2VsZWN0c1N0cixcblx0XHRcdFx0XHRhbGxTZWxlY3RzXG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3Qgd2l0aFJldHVybmluZyA9IGFzeW5jICh2YWx1ZXMsIGJ1aWxkZXIsIG1vZGVsLCB3aGVyZSkgPT4ge1xuXHRcdFx0XHRsZXQgcmVzO1xuXHRcdFx0XHRpZiAoY29uZmlnPy50eXBlID09PSBcIm15c3FsXCIpIHtcblx0XHRcdFx0XHRhd2FpdCBidWlsZGVyLmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRjb25zdCBmaWVsZCA9IHZhbHVlcy5pZCA/IFwiaWRcIiA6IHdoZXJlLmxlbmd0aCA+IDAgJiYgd2hlcmVbMF0/LmZpZWxkID8gd2hlcmVbMF0uZmllbGQgOiBcImlkXCI7XG5cdFx0XHRcdFx0aWYgKCF2YWx1ZXMuaWQgJiYgd2hlcmUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXMgPSBhd2FpdCBkYiQxLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpLm9yZGVyQnkoZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0XHR9KSwgXCJkZXNjXCIpLmxpbWl0KDEpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gdmFsdWVzW2ZpZWxkXSB8fCB3aGVyZVswXT8udmFsdWU7XG5cdFx0XHRcdFx0cmVzID0gYXdhaXQgZGIkMS5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3RBbGwoKS5vcmRlckJ5KGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0fSksIFwiZGVzY1wiKS53aGVyZShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZFxuXHRcdFx0XHRcdH0pLCBcIj1cIiwgdmFsdWUpLmxpbWl0KDEpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuXHRcdFx0XHRcdHJlcyA9IGF3YWl0IGJ1aWxkZXIub3V0cHV0QWxsKFwiaW5zZXJ0ZWRcIikuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVzID0gYXdhaXQgYnVpbGRlci5yZXR1cm5pbmdBbGwoKS5leGVjdXRlVGFrZUZpcnN0KCk7XG5cdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHR9O1xuXHRcdFx0ZnVuY3Rpb24gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3KSB7XG5cdFx0XHRcdGlmICghdykgcmV0dXJuIHtcblx0XHRcdFx0XHRhbmQ6IG51bGwsXG5cdFx0XHRcdFx0b3I6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgY29uZGl0aW9ucyA9IHtcblx0XHRcdFx0XHRhbmQ6IFtdLFxuXHRcdFx0XHRcdG9yOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR3LmZvckVhY2goKGNvbmRpdGlvbikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHsgZmllbGQ6IF9maWVsZCwgdmFsdWU6IF92YWx1ZSwgb3BlcmF0b3IgPSBcIj1cIiwgY29ubmVjdG9yID0gXCJBTkRcIiB9ID0gY29uZGl0aW9uO1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gX3ZhbHVlO1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IF9maWVsZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGV4cHIgPSAoZWIpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGYgPSBgJHttb2RlbH0uJHtmaWVsZH1gO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5cIikgcmV0dXJuIGViKGYsIFwiaW5cIiwgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0pO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yLnRvTG93ZXJDYXNlKCkgPT09IFwibm90X2luXCIpIHJldHVybiBlYihmLCBcIm5vdCBpblwiLCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiY29udGFpbnNcIikgcmV0dXJuIGViKGYsIFwibGlrZVwiLCBgJSR7dmFsdWV9JWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcInN0YXJ0c193aXRoXCIpIHJldHVybiBlYihmLCBcImxpa2VcIiwgYCR7dmFsdWV9JWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImVuZHNfd2l0aFwiKSByZXR1cm4gZWIoZiwgXCJsaWtlXCIsIGAlJHt2YWx1ZX1gKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJlcVwiKSByZXR1cm4gZWIoZiwgXCI9XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJuZVwiKSByZXR1cm4gZWIoZiwgXCI8PlwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZ3RcIikgcmV0dXJuIGViKGYsIFwiPlwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZ3RlXCIpIHJldHVybiBlYihmLCBcIj49XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJsdFwiKSByZXR1cm4gZWIoZiwgXCI8XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJsdGVcIikgcmV0dXJuIGViKGYsIFwiPD1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGViKGYsIG9wZXJhdG9yLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAoY29ubmVjdG9yID09PSBcIk9SXCIpIGNvbmRpdGlvbnMub3IucHVzaChleHByKTtcblx0XHRcdFx0XHRlbHNlIGNvbmRpdGlvbnMuYW5kLnB1c2goZXhwcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGFuZDogY29uZGl0aW9ucy5hbmQubGVuZ3RoID8gY29uZGl0aW9ucy5hbmQgOiBudWxsLFxuXHRcdFx0XHRcdG9yOiBjb25kaXRpb25zLm9yLmxlbmd0aCA/IGNvbmRpdGlvbnMub3IgOiBudWxsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiBwcm9jZXNzSm9pbmVkUmVzdWx0cyhyb3dzLCBqb2luQ29uZmlnLCBhbGxTZWxlY3RzU3RyKSB7XG5cdFx0XHRcdGlmICgham9pbkNvbmZpZyB8fCAhcm93cy5sZW5ndGgpIHJldHVybiByb3dzO1xuXHRcdFx0XHRjb25zdCBncm91cGVkQnlNYWluSWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGN1cnJlbnRSb3cgb2Ygcm93cykge1xuXHRcdFx0XHRcdGNvbnN0IG1haW5Nb2RlbEZpZWxkcyA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGpvaW5lZE1vZGVsRmllbGRzID0ge307XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgam9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0ge307XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY3VycmVudFJvdykpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGtleVN0ciA9IFN0cmluZyhrZXkpO1xuXHRcdFx0XHRcdFx0bGV0IGFzc2lnbmVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IHsgam9pbk1vZGVsLCBmaWVsZE5hbWUsIGpvaW5Nb2RlbFJlZiB9IG9mIGFsbFNlbGVjdHNTdHIpIGlmIChrZXlTdHIgPT09IGBfam9pbmVkXyR7am9pbk1vZGVsUmVmfV8ke2ZpZWxkTmFtZX1gKSB7XG5cdFx0XHRcdFx0XHRcdGpvaW5lZE1vZGVsRmllbGRzW2dldE1vZGVsTmFtZShqb2luTW9kZWwpXVtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRcdG1vZGVsOiBqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0ZmllbGQ6IGZpZWxkTmFtZVxuXHRcdFx0XHRcdFx0XHR9KV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXNzaWduZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghYXNzaWduZWQpIG1haW5Nb2RlbEZpZWxkc1trZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IG1haW5JZCA9IG1haW5Nb2RlbEZpZWxkcy5pZDtcblx0XHRcdFx0XHRpZiAoIW1haW5JZCkgY29udGludWU7XG5cdFx0XHRcdFx0aWYgKCFncm91cGVkQnlNYWluSWQuaGFzKG1haW5JZCkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGVudHJ5JDEgPSB7IC4uLm1haW5Nb2RlbEZpZWxkcyB9O1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbkNvbmZpZykpIGVudHJ5JDFbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0gam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiID8gbnVsbCA6IFtdO1xuXHRcdFx0XHRcdFx0Z3JvdXBlZEJ5TWFpbklkLnNldChtYWluSWQsIGVudHJ5JDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBlbnRyeSA9IGdyb3VwZWRCeU1haW5JZC5nZXQobWFpbklkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgaXNVbmlxdWUgPSBqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCI7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW1pdCA9IGpvaW5BdHRyLmxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdGNvbnN0IGpvaW5lZE9iaiA9IGpvaW5lZE1vZGVsRmllbGRzW2dldE1vZGVsTmFtZShqb2luTW9kZWwpXTtcblx0XHRcdFx0XHRcdGNvbnN0IGhhc0RhdGEgPSBqb2luZWRPYmogJiYgT2JqZWN0LmtleXMoam9pbmVkT2JqKS5sZW5ndGggPiAwICYmIE9iamVjdC52YWx1ZXMoam9pbmVkT2JqKS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCk7XG5cdFx0XHRcdFx0XHRpZiAoaXNVbmlxdWUpIGVudHJ5W2dldE1vZGVsTmFtZShqb2luTW9kZWwpXSA9IGhhc0RhdGEgPyBqb2luZWRPYmogOiBudWxsO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGpvaW5Nb2RlbE5hbWUgPSBnZXRNb2RlbE5hbWUoam9pbk1vZGVsKTtcblx0XHRcdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkoZW50cnlbam9pbk1vZGVsTmFtZV0pICYmIGhhc0RhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoID49IGxpbWl0KSBjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBpZEZpZWxkTmFtZSA9IGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlbDogam9pbk1vZGVsLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGpvaW5lZElkID0gam9pbmVkT2JqW2lkRmllbGROYW1lXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoam9pbmVkSWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghZW50cnlbam9pbk1vZGVsTmFtZV0uc29tZSgoaXRlbSkgPT4gaXRlbVtpZEZpZWxkTmFtZV0gPT09IGpvaW5lZElkKSAmJiBlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPCBsaW1pdCkgZW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChqb2luZWRPYmopO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoIDwgbGltaXQpIGVudHJ5W2pvaW5Nb2RlbE5hbWVdLnB1c2goam9pbmVkT2JqKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKGdyb3VwZWRCeU1haW5JZC52YWx1ZXMoKSk7XG5cdFx0XHRcdGZvciAoY29uc3QgZW50cnkgb2YgcmVzdWx0KSBmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgaWYgKGpvaW5BdHRyLnJlbGF0aW9uICE9PSBcIm9uZS10by1vbmVcIikge1xuXHRcdFx0XHRcdGNvbnN0IGpvaW5Nb2RlbE5hbWUgPSBnZXRNb2RlbE5hbWUoam9pbk1vZGVsKTtcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShlbnRyeVtqb2luTW9kZWxOYW1lXSkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkF0dHIubGltaXQgPz8gMTAwO1xuXHRcdFx0XHRcdFx0aWYgKGVudHJ5W2pvaW5Nb2RlbE5hbWVdLmxlbmd0aCA+IGxpbWl0KSBlbnRyeVtqb2luTW9kZWxOYW1lXSA9IGVudHJ5W2pvaW5Nb2RlbE5hbWVdLnNsaWNlKDAsIGxpbWl0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGFzeW5jIGNyZWF0ZSh7IGRhdGEsIG1vZGVsIH0pIHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyhkYXRhLCBkYiQxLmluc2VydEludG8obW9kZWwpLnZhbHVlcyhkYXRhKSwgbW9kZWwsIFtdKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZmluZE9uZSh7IG1vZGVsLCB3aGVyZSwgc2VsZWN0LCBqb2luIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuc2VsZWN0RnJvbSgoZWIpID0+IHtcblx0XHRcdFx0XHRcdGxldCBiID0gZWIuc2VsZWN0RnJvbShtb2RlbCk7XG5cdFx0XHRcdFx0XHRpZiAoYW5kKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYiQxKSkpKTtcblx0XHRcdFx0XHRcdGlmIChvcikgYiA9IGIud2hlcmUoKGViJDEpID0+IGViJDEub3Iob3IubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGIuc2VsZWN0QWxsKCkuYXMoXCJwcmltYXJ5XCIpO1xuXHRcdFx0XHRcdH0pLnNlbGVjdEFsbChcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0aWYgKGpvaW4pIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LmxlZnRKb2luKGAke2pvaW5Nb2RlbH0gYXMgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCwgKGpvaW4kMSkgPT4gam9pbiQxLm9uUmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX0uJHtqb2luQXR0ci5vbi50b31gLCBcIj1cIiwgYHByaW1hcnkuJHtqb2luQXR0ci5vbi5mcm9tfWApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgeyBhbGxTZWxlY3RzU3RyLCBhbGxTZWxlY3RzIH0gPSBzZWxlY3RBbGxKb2lucyhqb2luKTtcblx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LnNlbGVjdChhbGxTZWxlY3RzKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKCFyZXMgfHwgIUFycmF5LmlzQXJyYXkocmVzKSB8fCByZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCByb3cgPSByZXNbMF07XG5cdFx0XHRcdFx0aWYgKGpvaW4pIHJldHVybiBwcm9jZXNzSm9pbmVkUmVzdWx0cyhyZXMsIGpvaW4sIGFsbFNlbGVjdHNTdHIpWzBdO1xuXHRcdFx0XHRcdHJldHVybiByb3c7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGZpbmRNYW55KHsgbW9kZWwsIHdoZXJlLCBsaW1pdCwgb2Zmc2V0LCBzb3J0QnksIGpvaW4gfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKChlYikgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGIgPSBlYi5zZWxlY3RGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIikge1xuXHRcdFx0XHRcdFx0XHRpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNvcnRCeSkgYiA9IGIub3JkZXJCeShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdFx0XHRcdGIgPSBiLm9mZnNldChvZmZzZXQpLmZldGNoKGxpbWl0IHx8IDEwMCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobGltaXQgIT09IHZvaWQgMCkgYiA9IGIudG9wKGxpbWl0KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSBiID0gYi5saW1pdChsaW1pdCk7XG5cdFx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgYiA9IGIub2Zmc2V0KG9mZnNldCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgYiA9IGIub3JkZXJCeShgJHtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdFx0fSl9YCwgc29ydEJ5LmRpcmVjdGlvbik7XG5cdFx0XHRcdFx0XHRpZiAoYW5kKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYiQxKSkpKTtcblx0XHRcdFx0XHRcdGlmIChvcikgYiA9IGIud2hlcmUoKGViJDEpID0+IGViJDEub3Iob3IubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGIuc2VsZWN0QWxsKCkuYXMoXCJwcmltYXJ5XCIpO1xuXHRcdFx0XHRcdH0pLnNlbGVjdEFsbChcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0aWYgKGpvaW4pIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LmxlZnRKb2luKGAke2pvaW5Nb2RlbH0gYXMgam9pbl8ke2pvaW5Nb2RlbE5hbWV9YCwgKGpvaW4kMSkgPT4gam9pbiQxLm9uUmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX0uJHtqb2luQXR0ci5vbi50b31gLCBcIj1cIiwgYHByaW1hcnkuJHtqb2luQXR0ci5vbi5mcm9tfWApKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgeyBhbGxTZWxlY3RzU3RyLCBhbGxTZWxlY3RzIH0gPSBzZWxlY3RBbGxKb2lucyhqb2luKTtcblx0XHRcdFx0XHRxdWVyeSA9IHF1ZXJ5LnNlbGVjdChhbGxTZWxlY3RzKTtcblx0XHRcdFx0XHRpZiAoc29ydEJ5Py5maWVsZCkgcXVlcnkgPSBxdWVyeS5vcmRlckJ5KGAke2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkOiBzb3J0QnkuZmllbGRcblx0XHRcdFx0XHR9KX1gLCBzb3J0QnkuZGlyZWN0aW9uKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKCFyZXMpIHJldHVybiBbXTtcblx0XHRcdFx0XHRpZiAoam9pbikgcmV0dXJuIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJlcywgam9pbiwgYWxsU2VsZWN0c1N0cik7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgdXBkYXRlKHsgbW9kZWwsIHdoZXJlLCB1cGRhdGU6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnVwZGF0ZVRhYmxlKG1vZGVsKS5zZXQodmFsdWVzKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHdpdGhSZXR1cm5pbmcodmFsdWVzLCBxdWVyeSwgbW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgdXBkYXRlTWFueSh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlOiB2YWx1ZXMgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS51cGRhdGVUYWJsZShtb2RlbCkuc2V0KHZhbHVlcyk7XG5cdFx0XHRcdFx0aWYgKGFuZCkgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRpZiAob3IpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IChhd2FpdCBxdWVyeS5leGVjdXRlVGFrZUZpcnN0KCkpLm51bVVwZGF0ZWRSb3dzO1xuXHRcdFx0XHRcdHJldHVybiByZXMgPiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIDogTnVtYmVyKHJlcyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGNvdW50KHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuc2VsZWN0RnJvbShtb2RlbCkuc2VsZWN0KGRiJDEuZm4uY291bnQoXCJpZFwiKS5hcyhcImNvdW50XCIpKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gYXdhaXQgcXVlcnkuZXhlY3V0ZSgpO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzWzBdLmNvdW50ID09PSBcIm51bWJlclwiKSByZXR1cm4gcmVzWzBdLmNvdW50O1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcmVzWzBdLmNvdW50ID09PSBcImJpZ2ludFwiKSByZXR1cm4gTnVtYmVyKHJlc1swXS5jb3VudCk7XG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KHJlc1swXS5jb3VudCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGRlbGV0ZSh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLmRlbGV0ZUZyb20obW9kZWwpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIGRlbGV0ZU1hbnkoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5kZWxldGVGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gKGF3YWl0IHF1ZXJ5LmV4ZWN1dGVUYWtlRmlyc3QoKSkubnVtRGVsZXRlZFJvd3M7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiBOdW1iZXIocmVzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0b3B0aW9uczogY29uZmlnXG5cdFx0XHR9O1xuXHRcdH07XG5cdH07XG5cdGxldCBhZGFwdGVyT3B0aW9ucyA9IG51bGw7XG5cdGFkYXB0ZXJPcHRpb25zID0ge1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0YWRhcHRlcklkOiBcImt5c2VseVwiLFxuXHRcdFx0YWRhcHRlck5hbWU6IFwiS3lzZWx5IEFkYXB0ZXJcIixcblx0XHRcdHVzZVBsdXJhbDogY29uZmlnPy51c2VQbHVyYWwsXG5cdFx0XHRkZWJ1Z0xvZ3M6IGNvbmZpZz8uZGVidWdMb2dzLFxuXHRcdFx0c3VwcG9ydHNCb29sZWFuczogY29uZmlnPy50eXBlID09PSBcInNxbGl0ZVwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiIHx8IGNvbmZpZz8udHlwZSA9PT0gXCJteXNxbFwiIHx8ICFjb25maWc/LnR5cGUgPyBmYWxzZSA6IHRydWUsXG5cdFx0XHRzdXBwb3J0c0RhdGVzOiBjb25maWc/LnR5cGUgPT09IFwic3FsaXRlXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm1zc3FsXCIgfHwgIWNvbmZpZz8udHlwZSA/IGZhbHNlIDogdHJ1ZSxcblx0XHRcdHN1cHBvcnRzSlNPTjogY29uZmlnPy50eXBlID09PSBcInBvc3RncmVzXCIgPyB0cnVlIDogZmFsc2UsXG5cdFx0XHRzdXBwb3J0c0FycmF5czogZmFsc2UsXG5cdFx0XHRzdXBwb3J0c1VVSURzOiBjb25maWc/LnR5cGUgPT09IFwicG9zdGdyZXNcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHRyYW5zYWN0aW9uOiBjb25maWc/LnRyYW5zYWN0aW9uID8gKGNiKSA9PiBkYi50cmFuc2FjdGlvbigpLmV4ZWN1dGUoKHRyeCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gY2IoY3JlYXRlQWRhcHRlckZhY3Rvcnkoe1xuXHRcdFx0XHRcdGNvbmZpZzogYWRhcHRlck9wdGlvbnMuY29uZmlnLFxuXHRcdFx0XHRcdGFkYXB0ZXI6IGNyZWF0ZUN1c3RvbUFkYXB0ZXIodHJ4KVxuXHRcdFx0XHR9KShsYXp5T3B0aW9ucykpO1xuXHRcdFx0fSkgOiBmYWxzZVxuXHRcdH0sXG5cdFx0YWRhcHRlcjogY3JlYXRlQ3VzdG9tQWRhcHRlcihkYilcblx0fTtcblx0Y29uc3QgYWRhcHRlciA9IGNyZWF0ZUFkYXB0ZXJGYWN0b3J5KGFkYXB0ZXJPcHRpb25zKTtcblx0cmV0dXJuIChvcHRpb25zKSA9PiB7XG5cdFx0bGF6eU9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHJldHVybiBhZGFwdGVyKG9wdGlvbnMpO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBreXNlbHlBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1reXNlbHktYWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeSqliteDialect: () => (/* binding */ NodeSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/node-sqlite-dialect.ts\nvar NodeSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar NodeSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new NodeSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar NodeSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst rows = this.#db.prepare(sql$1).all(...parameters);\n\t\treturn Promise.resolve({ rows });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (await this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar NodeSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar NodeSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar NodeSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new NodeSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new NodeSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new NodeSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new NodeSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=node-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9ub2RlLXNxbGl0ZS1kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5SDs7QUFFekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5QkFBeUI7QUFDbkM7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0EsMkVBQTJFLDJEQUF1QixzQkFBc0IsZ0VBQTRCO0FBQ3BKO0FBQ0EsbUNBQW1DLE1BQU07QUFDekM7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkNBQUcscUJBQXFCLE1BQU07QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0RBQW9CO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xca3lzZWx5LWFkYXB0ZXJcXG5vZGUtc3FsaXRlLWRpYWxlY3QubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBpbGVkUXVlcnksIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFLCBEZWZhdWx0UXVlcnlDb21waWxlciwgc3FsIH0gZnJvbSBcImt5c2VseVwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL25vZGUtc3FsaXRlLWRpYWxlY3QudHNcbnZhciBOb2RlU3FsaXRlQWRhcHRlciA9IGNsYXNzIHtcblx0Z2V0IHN1cHBvcnRzQ3JlYXRlSWZOb3RFeGlzdHMoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0Z2V0IHN1cHBvcnRzVHJhbnNhY3Rpb25hbERkbCgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Z2V0IHN1cHBvcnRzUmV0dXJuaW5nKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVNaWdyYXRpb25Mb2NrKCkge31cblx0YXN5bmMgcmVsZWFzZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRnZXQgc3VwcG9ydHNPdXRwdXQoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZURyaXZlciA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0I2Nvbm5lY3Rpb25NdXRleCA9IG5ldyBDb25uZWN0aW9uTXV0ZXgoKTtcblx0I2RiO1xuXHQjY29ubmVjdGlvbjtcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRhc3luYyBpbml0KCkge1xuXHRcdHRoaXMuI2RiID0gdGhpcy4jY29uZmlnLmRhdGFiYXNlO1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb24gPSBuZXcgTm9kZVNxbGl0ZUNvbm5lY3Rpb24odGhpcy4jZGIpO1xuXHRcdGlmICh0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKSBhd2FpdCB0aGlzLiNjb25maWcub25DcmVhdGVDb25uZWN0aW9uKHRoaXMuI2Nvbm5lY3Rpb24pO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVDb25uZWN0aW9uKCkge1xuXHRcdGF3YWl0IHRoaXMuI2Nvbm5lY3Rpb25NdXRleC5sb2NrKCk7XG5cdFx0cmV0dXJuIHRoaXMuI2Nvbm5lY3Rpb247XG5cdH1cblx0YXN5bmMgYmVnaW5UcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJiZWdpblwiKSk7XG5cdH1cblx0YXN5bmMgY29tbWl0VHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiY29tbWl0XCIpKTtcblx0fVxuXHRhc3luYyByb2xsYmFja1RyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcInJvbGxiYWNrXCIpKTtcblx0fVxuXHRhc3luYyByZWxlYXNlQ29ubmVjdGlvbigpIHtcblx0XHR0aGlzLiNjb25uZWN0aW9uTXV0ZXgudW5sb2NrKCk7XG5cdH1cblx0YXN5bmMgZGVzdHJveSgpIHtcblx0XHR0aGlzLiNkYj8uY2xvc2UoKTtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlQ29ubmVjdGlvbiA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0ZXhlY3V0ZVF1ZXJ5KGNvbXBpbGVkUXVlcnkpIHtcblx0XHRjb25zdCB7IHNxbDogc3FsJDEsIHBhcmFtZXRlcnMgfSA9IGNvbXBpbGVkUXVlcnk7XG5cdFx0Y29uc3Qgcm93cyA9IHRoaXMuI2RiLnByZXBhcmUoc3FsJDEpLmFsbCguLi5wYXJhbWV0ZXJzKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcm93cyB9KTtcblx0fVxuXHRhc3luYyAqc3RyZWFtUXVlcnkoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtaW5nIHF1ZXJ5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgU1FMaXRlIGRyaXZlci5cIik7XG5cdH1cbn07XG52YXIgQ29ubmVjdGlvbk11dGV4ID0gY2xhc3Mge1xuXHQjcHJvbWlzZTtcblx0I3Jlc29sdmU7XG5cdGFzeW5jIGxvY2soKSB7XG5cdFx0d2hpbGUgKGF3YWl0IHRoaXMuI3Byb21pc2UpIGF3YWl0IHRoaXMuI3Byb21pc2U7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLiNyZXNvbHZlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0fVxuXHR1bmxvY2soKSB7XG5cdFx0Y29uc3QgcmVzb2x2ZSA9IHRoaXMuI3Jlc29sdmU7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IHZvaWQgMDtcblx0XHR0aGlzLiNyZXNvbHZlID0gdm9pZCAwO1xuXHRcdHJlc29sdmU/LigpO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVJbnRyb3NwZWN0b3IgPSBjbGFzcyB7XG5cdCNkYjtcblx0Y29uc3RydWN0b3IoZGIpIHtcblx0XHR0aGlzLiNkYiA9IGRiO1xuXHR9XG5cdGFzeW5jIGdldFNjaGVtYXMoKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGFzeW5jIGdldFRhYmxlcyhvcHRpb25zID0geyB3aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXM6IGZhbHNlIH0pIHtcblx0XHRsZXQgcXVlcnkgPSB0aGlzLiNkYi5zZWxlY3RGcm9tKFwic3FsaXRlX3NjaGVtYVwiKS53aGVyZShcInR5cGVcIiwgXCI9XCIsIFwidGFibGVcIikud2hlcmUoXCJuYW1lXCIsIFwibm90IGxpa2VcIiwgXCJzcWxpdGVfJVwiKS5zZWxlY3QoXCJuYW1lXCIpLiRjYXN0VG8oKTtcblx0XHRpZiAoIW9wdGlvbnMud2l0aEludGVybmFsS3lzZWx5VGFibGVzKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX1RBQkxFKS53aGVyZShcIm5hbWVcIiwgXCIhPVwiLCBERUZBVUxUX01JR1JBVElPTl9MT0NLX1RBQkxFKTtcblx0XHRjb25zdCB0YWJsZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKHRhYmxlcy5tYXAoKHsgbmFtZSB9KSA9PiB0aGlzLiNnZXRUYWJsZU1ldGFkYXRhKG5hbWUpKSk7XG5cdH1cblx0YXN5bmMgZ2V0TWV0YWRhdGEob3B0aW9ucykge1xuXHRcdHJldHVybiB7IHRhYmxlczogYXdhaXQgdGhpcy5nZXRUYWJsZXMob3B0aW9ucykgfTtcblx0fVxuXHRhc3luYyAjZ2V0VGFibGVNZXRhZGF0YSh0YWJsZSkge1xuXHRcdGNvbnN0IGRiID0gdGhpcy4jZGI7XG5cdFx0Y29uc3QgYXV0b0luY3JlbWVudENvbCA9IChhd2FpdCBkYi5zZWxlY3RGcm9tKFwic3FsaXRlX21hc3RlclwiKS53aGVyZShcIm5hbWVcIiwgXCI9XCIsIHRhYmxlKS5zZWxlY3QoXCJzcWxcIikuJGNhc3RUbygpLmV4ZWN1dGUoKSlbMF0/LnNxbD8uc3BsaXQoL1tcXChcXCksXS8pPy5maW5kKChpdCkgPT4gaXQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dG9pbmNyZW1lbnRcIikpPy5zcGxpdCgvXFxzKy8pPy5bMF0/LnJlcGxhY2UoL1tcImBdL2csIFwiXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0YWJsZSxcblx0XHRcdGNvbHVtbnM6IChhd2FpdCBkYi5zZWxlY3RGcm9tKHNxbGBwcmFnbWFfdGFibGVfaW5mbygke3RhYmxlfSlgLmFzKFwidGFibGVfaW5mb1wiKSkuc2VsZWN0KFtcblx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFwidHlwZVwiLFxuXHRcdFx0XHRcIm5vdG51bGxcIixcblx0XHRcdFx0XCJkZmx0X3ZhbHVlXCJcblx0XHRcdF0pLmV4ZWN1dGUoKSkubWFwKChjb2wpID0+ICh7XG5cdFx0XHRcdG5hbWU6IGNvbC5uYW1lLFxuXHRcdFx0XHRkYXRhVHlwZTogY29sLnR5cGUsXG5cdFx0XHRcdGlzTnVsbGFibGU6ICFjb2wubm90bnVsbCxcblx0XHRcdFx0aXNBdXRvSW5jcmVtZW50aW5nOiBjb2wubmFtZSA9PT0gYXV0b0luY3JlbWVudENvbCxcblx0XHRcdFx0aGFzRGVmYXVsdFZhbHVlOiBjb2wuZGZsdF92YWx1ZSAhPSBudWxsXG5cdFx0XHR9KSksXG5cdFx0XHRpc1ZpZXc6IHRydWVcblx0XHR9O1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVRdWVyeUNvbXBpbGVyID0gY2xhc3MgZXh0ZW5kcyBEZWZhdWx0UXVlcnlDb21waWxlciB7XG5cdGdldEN1cnJlbnRQYXJhbWV0ZXJQbGFjZWhvbGRlcigpIHtcblx0XHRyZXR1cm4gXCI/XCI7XG5cdH1cblx0Z2V0TGVmdElkZW50aWZpZXJXcmFwcGVyKCkge1xuXHRcdHJldHVybiBcIlxcXCJcIjtcblx0fVxuXHRnZXRSaWdodElkZW50aWZpZXJXcmFwcGVyKCkge1xuXHRcdHJldHVybiBcIlxcXCJcIjtcblx0fVxuXHRnZXRBdXRvSW5jcmVtZW50KCkge1xuXHRcdHJldHVybiBcImF1dG9pbmNyZW1lbnRcIjtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlRGlhbGVjdCA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRjcmVhdGVEcml2ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBOb2RlU3FsaXRlRHJpdmVyKHRoaXMuI2NvbmZpZyk7XG5cdH1cblx0Y3JlYXRlUXVlcnlDb21waWxlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVRdWVyeUNvbXBpbGVyKCk7XG5cdH1cblx0Y3JlYXRlQWRhcHRlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVBZGFwdGVyKCk7XG5cdH1cblx0Y3JlYXRlSW50cm9zcGVjdG9yKGRiKSB7XG5cdFx0cmV0dXJuIG5ldyBOb2RlU3FsaXRlSW50cm9zcGVjdG9yKGRiKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBOb2RlU3FsaXRlRGlhbGVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9kZS1zcWxpdGUtZGlhbGVjdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* reexport safe */ _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./memory-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhZGFwdGVyc1xcbWVtb3J5LWFkYXB0ZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZW1vcnlBZGFwdGVyIH0gZnJvbSBcIi4vbWVtb3J5LWFkYXB0ZXIubWpzXCI7XG5cbmV4cG9ydCB7IG1lbW9yeUFkYXB0ZXIgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* binding */ memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/memory-adapter/memory-adapter.ts\nconst memoryAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst adapterCreator = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__.createAdapterFactory)({\n\t\tconfig: {\n\t\t\tadapterId: \"memory\",\n\t\t\tadapterName: \"Memory Adapter\",\n\t\t\tusePlural: false,\n\t\t\tdebugLogs: config?.debugLogs || false,\n\t\t\tsupportsArrays: true,\n\t\t\tcustomTransformInput(props) {\n\t\t\t\tif ((props.options.advanced?.database?.useNumberId || props.options.advanced?.database?.generateId === \"serial\") && props.field === \"id\" && props.action === \"create\") return db[props.model].length + 1;\n\t\t\t\treturn props.data;\n\t\t\t},\n\t\t\ttransaction: async (cb) => {\n\t\t\t\tconst clone = structuredClone(db);\n\t\t\t\ttry {\n\t\t\t\t\treturn await cb(adapterCreator(lazyOptions));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tObject.keys(db).forEach((key) => {\n\t\t\t\t\t\tdb[key] = clone[key];\n\t\t\t\t\t});\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadapter: ({ getFieldName, options, getModelName }) => {\n\t\t\tconst applySortToRecords = (records, sortBy, model) => {\n\t\t\t\tif (!sortBy) return records;\n\t\t\t\treturn records.sort((a, b) => {\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t});\n\t\t\t\t\tconst aValue = a[field];\n\t\t\t\t\tconst bValue = b[field];\n\t\t\t\t\tlet comparison = 0;\n\t\t\t\t\tif (aValue == null && bValue == null) comparison = 0;\n\t\t\t\t\telse if (aValue == null) comparison = -1;\n\t\t\t\t\telse if (bValue == null) comparison = 1;\n\t\t\t\t\telse if (typeof aValue === \"string\" && typeof bValue === \"string\") comparison = aValue.localeCompare(bValue);\n\t\t\t\t\telse if (aValue instanceof Date && bValue instanceof Date) comparison = aValue.getTime() - bValue.getTime();\n\t\t\t\t\telse if (typeof aValue === \"number\" && typeof bValue === \"number\") comparison = aValue - bValue;\n\t\t\t\t\telse if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") comparison = aValue === bValue ? 0 : aValue ? 1 : -1;\n\t\t\t\t\telse comparison = String(aValue).localeCompare(String(bValue));\n\t\t\t\t\treturn sortBy.direction === \"asc\" ? comparison : -comparison;\n\t\t\t\t});\n\t\t\t};\n\t\t\tfunction convertWhereClause(where, model, join) {\n\t\t\t\tconst execute = (where$1, model$1) => {\n\t\t\t\t\tconst table = db[model$1];\n\t\t\t\t\tif (!table) {\n\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] Model ${model$1} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\tthrow new Error(`Model ${model$1} not found`);\n\t\t\t\t\t}\n\t\t\t\t\tconst evalClause = (record, clause) => {\n\t\t\t\t\t\tconst { field, value, operator } = clause;\n\t\t\t\t\t\tswitch (operator) {\n\t\t\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"not_in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn !value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"contains\": return record[field].includes(value);\n\t\t\t\t\t\t\tcase \"starts_with\": return record[field].startsWith(value);\n\t\t\t\t\t\t\tcase \"ends_with\": return record[field].endsWith(value);\n\t\t\t\t\t\t\tcase \"ne\": return record[field] !== value;\n\t\t\t\t\t\t\tcase \"gt\": return value != null && Boolean(record[field] > value);\n\t\t\t\t\t\t\tcase \"gte\": return value != null && Boolean(record[field] >= value);\n\t\t\t\t\t\t\tcase \"lt\": return value != null && Boolean(record[field] < value);\n\t\t\t\t\t\t\tcase \"lte\": return value != null && Boolean(record[field] <= value);\n\t\t\t\t\t\t\tdefault: return record[field] === value;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treturn table.filter((record) => {\n\t\t\t\t\t\tif (!where$1.length || where$1.length === 0) return true;\n\t\t\t\t\t\tlet result = evalClause(record, where$1[0]);\n\t\t\t\t\t\tfor (const clause of where$1) {\n\t\t\t\t\t\t\tconst clauseResult = evalClause(record, clause);\n\t\t\t\t\t\t\tif (clause.connector === \"OR\") result = result || clauseResult;\n\t\t\t\t\t\t\telse result = result && clauseResult;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tif (!join) return execute(where, model);\n\t\t\t\tconst baseRecords = execute(where, model);\n\t\t\t\tconst grouped = /* @__PURE__ */ new Map();\n\t\t\t\tconst seenIds = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const baseRecord of baseRecords) {\n\t\t\t\t\tconst baseId = String(baseRecord.id);\n\t\t\t\t\tif (!grouped.has(baseId)) {\n\t\t\t\t\t\tconst nested = { ...baseRecord };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nested[joinModelName] = null;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnested[joinModelName] = [];\n\t\t\t\t\t\t\t\tseenIds.set(`${baseId}-${joinModel}`, /* @__PURE__ */ new Set());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgrouped.set(baseId, nested);\n\t\t\t\t\t}\n\t\t\t\t\tconst nestedEntry = grouped.get(baseId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\tconst joinTable = db[joinModelName];\n\t\t\t\t\t\tif (!joinTable) {\n\t\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] JoinOption model ${joinModelName} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\t\tthrow new Error(`JoinOption model ${joinModelName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst matchingRecords = joinTable.filter((joinRecord) => joinRecord[joinAttr.on.to] === baseRecord[joinAttr.on.from]);\n\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nestedEntry[joinModelName] = matchingRecords[0] || null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst seenSet = seenIds.get(`${baseId}-${joinModel}`);\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\t\tfor (const matchingRecord of matchingRecords) {\n\t\t\t\t\t\t\t\tif (count >= limit) break;\n\t\t\t\t\t\t\t\tif (!seenSet.has(matchingRecord.id)) {\n\t\t\t\t\t\t\t\t\tnestedEntry[joinModelName].push(matchingRecord);\n\t\t\t\t\t\t\t\t\tseenSet.add(matchingRecord.id);\n\t\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Array.from(grouped.values());\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcreate: async ({ model, data }) => {\n\t\t\t\t\tif (options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\") data.id = db[getModelName(model)].length + 1;\n\t\t\t\t\tif (!db[model]) db[model] = [];\n\t\t\t\t\tdb[model].push(data);\n\t\t\t\t\treturn data;\n\t\t\t\t},\n\t\t\t\tfindOne: async ({ model, where, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return null;\n\t\t\t\t\t\treturn resArray[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tfindMany: async ({ model, where, sortBy, limit, offset, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where || [], model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return [];\n\t\t\t\t\t\tapplySortToRecords(resArray, sortBy, model);\n\t\t\t\t\t\tlet paginatedRecords = resArray;\n\t\t\t\t\t\tif (offset !== void 0) paginatedRecords = paginatedRecords.slice(offset);\n\t\t\t\t\t\tif (limit !== void 0) paginatedRecords = paginatedRecords.slice(0, limit);\n\t\t\t\t\t\treturn paginatedRecords;\n\t\t\t\t\t}\n\t\t\t\t\tlet table = applySortToRecords(res, sortBy, model);\n\t\t\t\t\tif (offset !== void 0) table = table.slice(offset);\n\t\t\t\t\tif (limit !== void 0) table = table.slice(0, limit);\n\t\t\t\t\treturn table || [];\n\t\t\t\t},\n\t\t\t\tcount: async ({ model, where }) => {\n\t\t\t\t\tif (where) return convertWhereClause(where, model).length;\n\t\t\t\t\treturn db[model].length;\n\t\t\t\t},\n\t\t\t\tupdate: async ({ model, where, update }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tdelete: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tdb[model] = table.filter((record) => !res.includes(record));\n\t\t\t\t},\n\t\t\t\tdeleteMany: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tdb[model] = table.filter((record) => {\n\t\t\t\t\t\tif (res.includes(record)) {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn !res.includes(record);\n\t\t\t\t\t});\n\t\t\t\t\treturn count;\n\t\t\t\t},\n\t\t\t\tupdateMany({ model, where, update }) {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapterCreator(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=memory-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9tZW1vcnktYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ3FCOztBQUVwRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0ZBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxjQUFjLHFDQUFxQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFNLGdDQUFnQyxTQUFTO0FBQ3JELCtCQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQSxjQUFjLHlCQUF5QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU8sR0FBRyxVQUFVO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8seURBQU0sMkNBQTJDLGVBQWU7QUFDdkUsMkNBQTJDLGVBQWU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTyxHQUFHLFVBQVU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxzQkFBc0Isb0JBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QiwyQ0FBMkM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx5QkFBeUIsY0FBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0wsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFkYXB0ZXJzXFxtZW1vcnktYWRhcHRlclxcbWVtb3J5LWFkYXB0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IGNyZWF0ZUFkYXB0ZXJGYWN0b3J5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiL2FkYXB0ZXJcIjtcblxuLy8jcmVnaW9uIHNyYy9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9tZW1vcnktYWRhcHRlci50c1xuY29uc3QgbWVtb3J5QWRhcHRlciA9IChkYiwgY29uZmlnKSA9PiB7XG5cdGxldCBsYXp5T3B0aW9ucyA9IG51bGw7XG5cdGNvbnN0IGFkYXB0ZXJDcmVhdG9yID0gY3JlYXRlQWRhcHRlckZhY3Rvcnkoe1xuXHRcdGNvbmZpZzoge1xuXHRcdFx0YWRhcHRlcklkOiBcIm1lbW9yeVwiLFxuXHRcdFx0YWRhcHRlck5hbWU6IFwiTWVtb3J5IEFkYXB0ZXJcIixcblx0XHRcdHVzZVBsdXJhbDogZmFsc2UsXG5cdFx0XHRkZWJ1Z0xvZ3M6IGNvbmZpZz8uZGVidWdMb2dzIHx8IGZhbHNlLFxuXHRcdFx0c3VwcG9ydHNBcnJheXM6IHRydWUsXG5cdFx0XHRjdXN0b21UcmFuc2Zvcm1JbnB1dChwcm9wcykge1xuXHRcdFx0XHRpZiAoKHByb3BzLm9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBwcm9wcy5vcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIikgJiYgcHJvcHMuZmllbGQgPT09IFwiaWRcIiAmJiBwcm9wcy5hY3Rpb24gPT09IFwiY3JlYXRlXCIpIHJldHVybiBkYltwcm9wcy5tb2RlbF0ubGVuZ3RoICsgMTtcblx0XHRcdFx0cmV0dXJuIHByb3BzLmRhdGE7XG5cdFx0XHR9LFxuXHRcdFx0dHJhbnNhY3Rpb246IGFzeW5jIChjYikgPT4ge1xuXHRcdFx0XHRjb25zdCBjbG9uZSA9IHN0cnVjdHVyZWRDbG9uZShkYik7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IGNiKGFkYXB0ZXJDcmVhdG9yKGxhenlPcHRpb25zKSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0T2JqZWN0LmtleXMoZGIpLmZvckVhY2goKGtleSkgPT4ge1xuXHRcdFx0XHRcdFx0ZGJba2V5XSA9IGNsb25lW2tleV07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGFkYXB0ZXI6ICh7IGdldEZpZWxkTmFtZSwgb3B0aW9ucywgZ2V0TW9kZWxOYW1lIH0pID0+IHtcblx0XHRcdGNvbnN0IGFwcGx5U29ydFRvUmVjb3JkcyA9IChyZWNvcmRzLCBzb3J0QnksIG1vZGVsKSA9PiB7XG5cdFx0XHRcdGlmICghc29ydEJ5KSByZXR1cm4gcmVjb3Jkcztcblx0XHRcdFx0cmV0dXJuIHJlY29yZHMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGFWYWx1ZSA9IGFbZmllbGRdO1xuXHRcdFx0XHRcdGNvbnN0IGJWYWx1ZSA9IGJbZmllbGRdO1xuXHRcdFx0XHRcdGxldCBjb21wYXJpc29uID0gMDtcblx0XHRcdFx0XHRpZiAoYVZhbHVlID09IG51bGwgJiYgYlZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAwO1xuXHRcdFx0XHRcdGVsc2UgaWYgKGFWYWx1ZSA9PSBudWxsKSBjb21wYXJpc29uID0gLTE7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYlZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAxO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBhVmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gXCJzdHJpbmdcIikgY29tcGFyaXNvbiA9IGFWYWx1ZS5sb2NhbGVDb21wYXJlKGJWYWx1ZSk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYVZhbHVlIGluc3RhbmNlb2YgRGF0ZSAmJiBiVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSBjb21wYXJpc29uID0gYVZhbHVlLmdldFRpbWUoKSAtIGJWYWx1ZS5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgYlZhbHVlID09PSBcIm51bWJlclwiKSBjb21wYXJpc29uID0gYVZhbHVlIC0gYlZhbHVlO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBhVmFsdWUgPT09IFwiYm9vbGVhblwiICYmIHR5cGVvZiBiVmFsdWUgPT09IFwiYm9vbGVhblwiKSBjb21wYXJpc29uID0gYVZhbHVlID09PSBiVmFsdWUgPyAwIDogYVZhbHVlID8gMSA6IC0xO1xuXHRcdFx0XHRcdGVsc2UgY29tcGFyaXNvbiA9IFN0cmluZyhhVmFsdWUpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGJWYWx1ZSkpO1xuXHRcdFx0XHRcdHJldHVybiBzb3J0QnkuZGlyZWN0aW9uID09PSBcImFzY1wiID8gY29tcGFyaXNvbiA6IC1jb21wYXJpc29uO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsLCBqb2luKSB7XG5cdFx0XHRcdGNvbnN0IGV4ZWN1dGUgPSAod2hlcmUkMSwgbW9kZWwkMSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRhYmxlID0gZGJbbW9kZWwkMV07XG5cdFx0XHRcdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0XHRcdFx0bG9nZ2VyLmVycm9yKGBbTWVtb3J5QWRhcHRlcl0gTW9kZWwgJHttb2RlbCQxfSBub3QgZm91bmQgaW4gdGhlIERCYCwgT2JqZWN0LmtleXMoZGIpKTtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgTW9kZWwgJHttb2RlbCQxfSBub3QgZm91bmRgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgZXZhbENsYXVzZSA9IChyZWNvcmQsIGNsYXVzZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgeyBmaWVsZCwgdmFsdWUsIG9wZXJhdG9yIH0gPSBjbGF1c2U7XG5cdFx0XHRcdFx0XHRzd2l0Y2ggKG9wZXJhdG9yKSB7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJpblwiOlxuXHRcdFx0XHRcdFx0XHRcdGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHRocm93IG5ldyBFcnJvcihcIlZhbHVlIG11c3QgYmUgYW4gYXJyYXlcIik7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlLmluY2x1ZGVzKHJlY29yZFtmaWVsZF0pO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwibm90X2luXCI6XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgbXVzdCBiZSBhbiBhcnJheVwiKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gIXZhbHVlLmluY2x1ZGVzKHJlY29yZFtmaWVsZF0pO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiY29udGFpbnNcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uaW5jbHVkZXModmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwic3RhcnRzX3dpdGhcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uc3RhcnRzV2l0aCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJlbmRzX3dpdGhcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0uZW5kc1dpdGgodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwibmVcIjogcmV0dXJuIHJlY29yZFtmaWVsZF0gIT09IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3RcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdID4gdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiZ3RlXCI6IHJldHVybiB2YWx1ZSAhPSBudWxsICYmIEJvb2xlYW4ocmVjb3JkW2ZpZWxkXSA+PSB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJsdFwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJsdGVcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdIDw9IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIHJlY29yZFtmaWVsZF0gPT09IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIHRhYmxlLmZpbHRlcigocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXdoZXJlJDEubGVuZ3RoIHx8IHdoZXJlJDEubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdGxldCByZXN1bHQgPSBldmFsQ2xhdXNlKHJlY29yZCwgd2hlcmUkMVswXSk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGNsYXVzZSBvZiB3aGVyZSQxKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNsYXVzZVJlc3VsdCA9IGV2YWxDbGF1c2UocmVjb3JkLCBjbGF1c2UpO1xuXHRcdFx0XHRcdFx0XHRpZiAoY2xhdXNlLmNvbm5lY3RvciA9PT0gXCJPUlwiKSByZXN1bHQgPSByZXN1bHQgfHwgY2xhdXNlUmVzdWx0O1xuXHRcdFx0XHRcdFx0XHRlbHNlIHJlc3VsdCA9IHJlc3VsdCAmJiBjbGF1c2VSZXN1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoIWpvaW4pIHJldHVybiBleGVjdXRlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGJhc2VSZWNvcmRzID0gZXhlY3V0ZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRjb25zdCBncm91cGVkID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRcdFx0Y29uc3Qgc2VlbklkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgYmFzZVJlY29yZCBvZiBiYXNlUmVjb3Jkcykge1xuXHRcdFx0XHRcdGNvbnN0IGJhc2VJZCA9IFN0cmluZyhiYXNlUmVjb3JkLmlkKTtcblx0XHRcdFx0XHRpZiAoIWdyb3VwZWQuaGFzKGJhc2VJZCkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5lc3RlZCA9IHsgLi4uYmFzZVJlY29yZCB9O1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0XHRpZiAoam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiKSBuZXN0ZWRbam9pbk1vZGVsTmFtZV0gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRuZXN0ZWRbam9pbk1vZGVsTmFtZV0gPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRzZWVuSWRzLnNldChgJHtiYXNlSWR9LSR7am9pbk1vZGVsfWAsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRncm91cGVkLnNldChiYXNlSWQsIG5lc3RlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IG5lc3RlZEVudHJ5ID0gZ3JvdXBlZC5nZXQoYmFzZUlkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pblRhYmxlID0gZGJbam9pbk1vZGVsTmFtZV07XG5cdFx0XHRcdFx0XHRpZiAoIWpvaW5UYWJsZSkge1xuXHRcdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFtNZW1vcnlBZGFwdGVyXSBKb2luT3B0aW9uIG1vZGVsICR7am9pbk1vZGVsTmFtZX0gbm90IGZvdW5kIGluIHRoZSBEQmAsIE9iamVjdC5rZXlzKGRiKSk7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihgSm9pbk9wdGlvbiBtb2RlbCAke2pvaW5Nb2RlbE5hbWV9IG5vdCBmb3VuZGApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3QgbWF0Y2hpbmdSZWNvcmRzID0gam9pblRhYmxlLmZpbHRlcigoam9pblJlY29yZCkgPT4gam9pblJlY29yZFtqb2luQXR0ci5vbi50b10gPT09IGJhc2VSZWNvcmRbam9pbkF0dHIub24uZnJvbV0pO1xuXHRcdFx0XHRcdFx0aWYgKGpvaW5BdHRyLnJlbGF0aW9uID09PSBcIm9uZS10by1vbmVcIikgbmVzdGVkRW50cnlbam9pbk1vZGVsTmFtZV0gPSBtYXRjaGluZ1JlY29yZHNbMF0gfHwgbnVsbDtcblx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzZWVuU2V0ID0gc2Vlbklkcy5nZXQoYCR7YmFzZUlkfS0ke2pvaW5Nb2RlbH1gKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGltaXQgPSBqb2luQXR0ci5saW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRcdGxldCBjb3VudCA9IDA7XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgbWF0Y2hpbmdSZWNvcmQgb2YgbWF0Y2hpbmdSZWNvcmRzKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNvdW50ID49IGxpbWl0KSBicmVhaztcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXNlZW5TZXQuaGFzKG1hdGNoaW5nUmVjb3JkLmlkKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmVzdGVkRW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChtYXRjaGluZ1JlY29yZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWVuU2V0LmFkZChtYXRjaGluZ1JlY29yZC5pZCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLnZhbHVlcygpKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNyZWF0ZTogYXN5bmMgKHsgbW9kZWwsIGRhdGEgfSkgPT4ge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIpIGRhdGEuaWQgPSBkYltnZXRNb2RlbE5hbWUobW9kZWwpXS5sZW5ndGggKyAxO1xuXHRcdFx0XHRcdGlmICghZGJbbW9kZWxdKSBkYlttb2RlbF0gPSBbXTtcblx0XHRcdFx0XHRkYlttb2RlbF0ucHVzaChkYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZE9uZTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlLCBqb2luIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsLCBqb2luKTtcblx0XHRcdFx0XHRpZiAoam9pbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzQXJyYXkgPSByZXM7XG5cdFx0XHRcdFx0XHRpZiAoIXJlc0FycmF5Lmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzQXJyYXlbMF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiByZXNbMF0gfHwgbnVsbDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZE1hbnk6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSwgc29ydEJ5LCBsaW1pdCwgb2Zmc2V0LCBqb2luIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUgfHwgW10sIG1vZGVsLCBqb2luKTtcblx0XHRcdFx0XHRpZiAoam9pbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzQXJyYXkgPSByZXM7XG5cdFx0XHRcdFx0XHRpZiAoIXJlc0FycmF5Lmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRcdFx0XHRcdFx0YXBwbHlTb3J0VG9SZWNvcmRzKHJlc0FycmF5LCBzb3J0QnksIG1vZGVsKTtcblx0XHRcdFx0XHRcdGxldCBwYWdpbmF0ZWRSZWNvcmRzID0gcmVzQXJyYXk7XG5cdFx0XHRcdFx0XHRpZiAob2Zmc2V0ICE9PSB2b2lkIDApIHBhZ2luYXRlZFJlY29yZHMgPSBwYWdpbmF0ZWRSZWNvcmRzLnNsaWNlKG9mZnNldCk7XG5cdFx0XHRcdFx0XHRpZiAobGltaXQgIT09IHZvaWQgMCkgcGFnaW5hdGVkUmVjb3JkcyA9IHBhZ2luYXRlZFJlY29yZHMuc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhZ2luYXRlZFJlY29yZHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCB0YWJsZSA9IGFwcGx5U29ydFRvUmVjb3JkcyhyZXMsIHNvcnRCeSwgbW9kZWwpO1xuXHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgdGFibGUgPSB0YWJsZS5zbGljZShvZmZzZXQpO1xuXHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSB0YWJsZSA9IHRhYmxlLnNsaWNlKDAsIGxpbWl0KTtcblx0XHRcdFx0XHRyZXR1cm4gdGFibGUgfHwgW107XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvdW50OiBhc3luYyAoeyBtb2RlbCwgd2hlcmUgfSkgPT4ge1xuXHRcdFx0XHRcdGlmICh3aGVyZSkgcmV0dXJuIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpLmxlbmd0aDtcblx0XHRcdFx0XHRyZXR1cm4gZGJbbW9kZWxdLmxlbmd0aDtcblx0XHRcdFx0fSxcblx0XHRcdFx0dXBkYXRlOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0cmVzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihyZWNvcmQsIHVwZGF0ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZWxldGU6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbF07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0ZGJbbW9kZWxdID0gdGFibGUuZmlsdGVyKChyZWNvcmQpID0+ICFyZXMuaW5jbHVkZXMocmVjb3JkKSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGV0ZU1hbnk6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbF07XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0bGV0IGNvdW50ID0gMDtcblx0XHRcdFx0XHRkYlttb2RlbF0gPSB0YWJsZS5maWx0ZXIoKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHJlcy5pbmNsdWRlcyhyZWNvcmQpKSB7XG5cdFx0XHRcdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiAhcmVzLmluY2x1ZGVzKHJlY29yZCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIGNvdW50O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cGRhdGVNYW55KHsgbW9kZWwsIHdoZXJlLCB1cGRhdGUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwpO1xuXHRcdFx0XHRcdHJlcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcblx0XHRcdFx0XHRcdE9iamVjdC5hc3NpZ24ocmVjb3JkLCB1cGRhdGUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJldHVybiByZXNbMF0gfHwgbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gKG9wdGlvbnMpID0+IHtcblx0XHRsYXp5T3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIGFkYXB0ZXJDcmVhdG9yKG9wdGlvbnMpO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZW1vcnlBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZW1vcnktYWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/index.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/api/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_20__.APIError),\n/* harmony export */   accountInfo: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo),\n/* harmony export */   callbackOAuth: () => (/* reexport safe */ _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth),\n/* harmony export */   changeEmail: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail),\n/* harmony export */   changePassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword),\n/* harmony export */   checkEndpointConflicts: () => (/* binding */ checkEndpointConflicts),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.createAuthMiddleware),\n/* harmony export */   createEmailVerificationToken: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.createEmailVerificationToken),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback),\n/* harmony export */   error: () => (/* reexport safe */ _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error),\n/* harmony export */   formCsrfMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware),\n/* harmony export */   freshSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.freshSessionMiddleware),\n/* harmony export */   getAccessToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken),\n/* harmony export */   getEndpoints: () => (/* binding */ getEndpoints),\n/* harmony export */   getIp: () => (/* reexport safe */ _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp),\n/* harmony export */   getOAuthState: () => (/* reexport safe */ _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__.getOAuthState),\n/* harmony export */   getSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession),\n/* harmony export */   getSessionFromCtx: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx),\n/* harmony export */   linkSocialAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount),\n/* harmony export */   listSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions),\n/* harmony export */   listUserAccounts: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts),\n/* harmony export */   ok: () => (/* reexport safe */ _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__.optionsMiddleware),\n/* harmony export */   originCheck: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.requestOnlySessionMiddleware),\n/* harmony export */   requestPasswordReset: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword),\n/* harmony export */   revokeOtherSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession),\n/* harmony export */   revokeSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions),\n/* harmony export */   router: () => (/* binding */ router),\n/* harmony export */   sendVerificationEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmailFn),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sessionMiddleware),\n/* harmony export */   setPassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword),\n/* harmony export */   signInEmail: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail),\n/* harmony export */   signInSocial: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial),\n/* harmony export */   signOut: () => (/* reexport safe */ _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut),\n/* harmony export */   signUpEmail: () => (/* reexport safe */ _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail),\n/* harmony export */   unlinkAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount),\n/* harmony export */   updateUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser),\n/* harmony export */   verifyEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./middlewares/oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rate-limiter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs\");\n/* harmony import */ var _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/account.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/callback.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./routes/email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/error.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./routes/ok.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./routes/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./routes/sign-in.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./routes/sign-out.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./routes/sign-up.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./routes/update-user.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\");\n/* harmony import */ var _routes_index_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./routes/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs\");\n/* harmony import */ var _to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./to-auth-endpoints.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/index.ts\nfunction checkEndpointConflicts(options, logger$1) {\n\tconst endpointRegistry = /* @__PURE__ */ new Map();\n\toptions.plugins?.forEach((plugin) => {\n\t\tif (plugin.endpoints) {\n\t\t\tfor (const [key, endpoint] of Object.entries(plugin.endpoints)) if (endpoint && \"path\" in endpoint && typeof endpoint.path === \"string\") {\n\t\t\t\tconst path = endpoint.path;\n\t\t\t\tlet methods = [];\n\t\t\t\tif (endpoint.options && \"method\" in endpoint.options) {\n\t\t\t\t\tif (Array.isArray(endpoint.options.method)) methods = endpoint.options.method;\n\t\t\t\t\telse if (typeof endpoint.options.method === \"string\") methods = [endpoint.options.method];\n\t\t\t\t}\n\t\t\t\tif (methods.length === 0) methods = [\"*\"];\n\t\t\t\tif (!endpointRegistry.has(path)) endpointRegistry.set(path, []);\n\t\t\t\tendpointRegistry.get(path).push({\n\t\t\t\t\tpluginId: plugin.id,\n\t\t\t\t\tendpointKey: key,\n\t\t\t\t\tmethods\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tconst conflicts = [];\n\tfor (const [path, entries] of endpointRegistry.entries()) if (entries.length > 1) {\n\t\tconst methodMap = /* @__PURE__ */ new Map();\n\t\tlet hasConflict = false;\n\t\tfor (const entry of entries) for (const method of entry.methods) {\n\t\t\tif (!methodMap.has(method)) methodMap.set(method, []);\n\t\t\tmethodMap.get(method).push(entry.pluginId);\n\t\t\tif (methodMap.get(method).length > 1) hasConflict = true;\n\t\t\tif (method === \"*\" && entries.length > 1) hasConflict = true;\n\t\t\telse if (method !== \"*\" && methodMap.has(\"*\")) hasConflict = true;\n\t\t}\n\t\tif (hasConflict) {\n\t\t\tconst uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n\t\t\tconst conflictingMethods = [];\n\t\t\tfor (const [method, plugins] of methodMap.entries()) if (plugins.length > 1 || method === \"*\" && entries.length > 1 || method !== \"*\" && methodMap.has(\"*\")) conflictingMethods.push(method);\n\t\t\tconflicts.push({\n\t\t\t\tpath,\n\t\t\t\tplugins: uniquePlugins,\n\t\t\t\tconflictingMethods\n\t\t\t});\n\t\t}\n\t}\n\tif (conflicts.length > 0) {\n\t\tconst conflictMessages = conflicts.map((conflict) => `  - \"${conflict.path}\" [${conflict.conflictingMethods.join(\", \")}] used by plugins: ${conflict.plugins.join(\", \")}`).join(\"\\n\");\n\t\tlogger$1.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n\t3. Ensure plugins use different HTTP methods for the same path\n`);\n\t}\n}\nfunction getEndpoints(ctx, options) {\n\tconst pluginEndpoints = options.plugins?.reduce((acc, plugin) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t...plugin.endpoints\n\t\t};\n\t}, {}) ?? {};\n\tconst middlewares = options.plugins?.map((plugin) => plugin.middlewares?.map((m) => {\n\t\tconst middleware = (async (context) => {\n\t\t\tconst authContext = await ctx;\n\t\t\treturn m.middleware({\n\t\t\t\t...context,\n\t\t\t\tcontext: {\n\t\t\t\t\t...authContext,\n\t\t\t\t\t...context.context\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tmiddleware.options = m.middleware.options;\n\t\treturn {\n\t\t\tpath: m.path,\n\t\t\tmiddleware\n\t\t};\n\t})).filter((plugin) => plugin !== void 0).flat() || [];\n\treturn {\n\t\tapi: (0,_to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__.toAuthEndpoints)({\n\t\t\tsignInSocial: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial)(),\n\t\t\tcallbackOAuth: _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth,\n\t\t\tgetSession: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession)(),\n\t\t\tsignOut: _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut,\n\t\t\tsignUpEmail: (0,_routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail)(),\n\t\t\tsignInEmail: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail)(),\n\t\t\tresetPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword,\n\t\t\tverifyPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword,\n\t\t\tverifyEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail,\n\t\t\tsendVerificationEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail,\n\t\t\tchangeEmail: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail,\n\t\t\tchangePassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword,\n\t\t\tsetPassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword,\n\t\t\tupdateUser: (0,_routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser)(),\n\t\t\tdeleteUser: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser,\n\t\t\trequestPasswordReset: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset,\n\t\t\trequestPasswordResetCallback: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback,\n\t\t\tlistSessions: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions)(),\n\t\t\trevokeSession: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession,\n\t\t\trevokeSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions,\n\t\t\trevokeOtherSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions,\n\t\t\tlinkSocialAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount,\n\t\t\tlistUserAccounts: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts,\n\t\t\tdeleteUserCallback: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback,\n\t\t\tunlinkAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount,\n\t\t\trefreshToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken,\n\t\t\tgetAccessToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken,\n\t\t\taccountInfo: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo,\n\t\t\t...pluginEndpoints,\n\t\t\tok: _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok,\n\t\t\terror: _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error\n\t\t}, ctx),\n\t\tmiddlewares\n\t};\n}\nconst router = (ctx, options) => {\n\tconst { api, middlewares } = getEndpoints(ctx, options);\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\treturn (0,better_call__WEBPACK_IMPORTED_MODULE_20__.createRouter)(api, {\n\t\trouterContext: ctx,\n\t\topenapi: { disabled: true },\n\t\tbasePath,\n\t\trouterMiddleware: [{\n\t\t\tpath: \"/**\",\n\t\t\tmiddleware: _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware\n\t\t}, ...middlewares],\n\t\tallowedMediaTypes: [\"application/json\"],\n\t\tskipTrailingSlashes: options.advanced?.skipTrailingSlashes ?? false,\n\t\tasync onRequest(req) {\n\t\t\tconst disabledPaths = ctx.options.disabledPaths || [];\n\t\t\tconst normalizedPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_19__.normalizePathname)(req.url, basePath);\n\t\t\tif (disabledPaths.includes(normalizedPath)) return new Response(\"Not Found\", { status: 404 });\n\t\t\tlet currentRequest = req;\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onRequest) {\n\t\t\t\tconst response = await plugin.onRequest(currentRequest, ctx);\n\t\t\t\tif (response && \"response\" in response) return response.response;\n\t\t\t\tif (response && \"request\" in response) currentRequest = response.request;\n\t\t\t}\n\t\t\tconst rateLimitResponse = await (0,_rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__.onRequestRateLimit)(currentRequest, ctx);\n\t\t\tif (rateLimitResponse) return rateLimitResponse;\n\t\t\treturn currentRequest;\n\t\t},\n\t\tasync onResponse(res) {\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onResponse) {\n\t\t\t\tconst response = await plugin.onResponse(res, ctx);\n\t\t\t\tif (response) return response.response;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tonError(e) {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError && e.status === \"FOUND\") return;\n\t\t\tif (options.onAPIError?.throw) throw e;\n\t\t\tif (options.onAPIError?.onError) {\n\t\t\t\toptions.onAPIError.onError(e, ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst optLogLevel = options.logger?.level;\n\t\t\tconst log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__.logger : void 0;\n\t\t\tif (options.logger?.disabled !== true) {\n\t\t\t\tif (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n\t\t\t\t\tif (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n\t\t\t\t\t\tctx.logger?.error(e.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_20__.APIError) {\n\t\t\t\t\tif (e.status === \"INTERNAL_SERVER_ERROR\") ctx.logger.error(e.status, e);\n\t\t\t\t\tlog?.error(e.message);\n\t\t\t\t} else ctx.logger?.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t}\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0k7QUFDZ0Q7QUFDdkU7QUFDNkI7QUFDOEs7QUFDdkc7QUFDL0U7QUFDc0Y7QUFDakc7QUFDTjtBQUNxRjtBQUN6RDtBQUNqQjtBQUNHO0FBQzZFO0FBQ3BHO0FBQzhCO0FBQ1g7QUFDYTtBQUNpQjtBQUN1Qjs7QUFFcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGNBQWMsS0FBSyx1Q0FBdUMscUJBQXFCLDRCQUE0QjtBQUMxSztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUk7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxPQUFPLHdFQUFlO0FBQ3RCLGlCQUFpQixrRUFBWTtBQUM3QixnQkFBZ0I7QUFDaEIsZUFBZSwrREFBVTtBQUN6QixVQUFVO0FBQ1YsZ0JBQWdCLGlFQUFXO0FBQzNCLGdCQUFnQixpRUFBVztBQUMzQixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCx3QkFBd0I7QUFDeEIsY0FBYztBQUNkLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2QsZUFBZSxvRUFBVTtBQUN6QixhQUFhO0FBQ2IsdUJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQixpQkFBaUIsaUVBQVk7QUFDN0IsZ0JBQWdCO0FBQ2hCLGlCQUFpQjtBQUNqQixzQkFBc0I7QUFDdEIsb0JBQW9CO0FBQ3BCLG1CQUFtQjtBQUNuQixxQkFBcUI7QUFDckIsZ0JBQWdCO0FBQ2hCLGVBQWU7QUFDZixpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0EsS0FBSztBQUNMLFFBQVE7QUFDUixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFtQjtBQUM1QjtBQUNBLFFBQVEsMERBQVk7QUFDcEI7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdGQUFxQjtBQUNwQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkVBQWlCO0FBQzNDLGtGQUFrRixhQUFhO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywyRUFBa0I7QUFDckQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQkFBb0Isa0RBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLDBEQUFNO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtEQUFVO0FBQy9CO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNpMEI7QUFDajBCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyBnZXRPQXV0aFN0YXRlIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvb2F1dGgubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgb25SZXF1ZXN0UmF0ZUxpbWl0IH0gZnJvbSBcIi4vcmF0ZS1saW1pdGVyL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZnJlc2hTZXNzaW9uTWlkZGxld2FyZSwgZ2V0U2Vzc2lvbiwgZ2V0U2Vzc2lvbkZyb21DdHgsIGxpc3RTZXNzaW9ucywgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSwgcmV2b2tlT3RoZXJTZXNzaW9ucywgcmV2b2tlU2Vzc2lvbiwgcmV2b2tlU2Vzc2lvbnMsIHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlLCBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH0gZnJvbSBcIi4vcm91dGVzL2FjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja09BdXRoIH0gZnJvbSBcIi4vcm91dGVzL2NhbGxiYWNrLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsLCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbiwgdmVyaWZ5RW1haWwgfSBmcm9tIFwiLi9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZXJyb3IgfSBmcm9tIFwiLi9yb3V0ZXMvZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBvayB9IGZyb20gXCIuL3JvdXRlcy9vay5tanNcIjtcbmltcG9ydCB7IHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuL3JvdXRlcy9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfSBmcm9tIFwiLi9yb3V0ZXMvc2lnbi1pbi5tanNcIjtcbmltcG9ydCB7IHNpZ25PdXQgfSBmcm9tIFwiLi9yb3V0ZXMvc2lnbi1vdXQubWpzXCI7XG5pbXBvcnQgeyBzaWduVXBFbWFpbCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLXVwLm1qc1wiO1xuaW1wb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH0gZnJvbSBcIi4vcm91dGVzL3VwZGF0ZS11c2VyLm1qc1wiO1xuaW1wb3J0IFwiLi9yb3V0ZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b0F1dGhFbmRwb2ludHMgfSBmcm9tIFwiLi90by1hdXRoLWVuZHBvaW50cy5tanNcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVBhdGhuYW1lIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBBUElFcnJvciwgQVBJRXJyb3IgYXMgQVBJRXJyb3IkMSwgY3JlYXRlUm91dGVyIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBvcHRpb25zTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvaW5kZXgudHNcbmZ1bmN0aW9uIGNoZWNrRW5kcG9pbnRDb25mbGljdHMob3B0aW9ucywgbG9nZ2VyJDEpIHtcblx0Y29uc3QgZW5kcG9pbnRSZWdpc3RyeSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdG9wdGlvbnMucGx1Z2lucz8uZm9yRWFjaCgocGx1Z2luKSA9PiB7XG5cdFx0aWYgKHBsdWdpbi5lbmRwb2ludHMpIHtcblx0XHRcdGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKHBsdWdpbi5lbmRwb2ludHMpKSBpZiAoZW5kcG9pbnQgJiYgXCJwYXRoXCIgaW4gZW5kcG9pbnQgJiYgdHlwZW9mIGVuZHBvaW50LnBhdGggPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGVuZHBvaW50LnBhdGg7XG5cdFx0XHRcdGxldCBtZXRob2RzID0gW107XG5cdFx0XHRcdGlmIChlbmRwb2ludC5vcHRpb25zICYmIFwibWV0aG9kXCIgaW4gZW5kcG9pbnQub3B0aW9ucykge1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGVuZHBvaW50Lm9wdGlvbnMubWV0aG9kKSkgbWV0aG9kcyA9IGVuZHBvaW50Lm9wdGlvbnMubWV0aG9kO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBlbmRwb2ludC5vcHRpb25zLm1ldGhvZCA9PT0gXCJzdHJpbmdcIikgbWV0aG9kcyA9IFtlbmRwb2ludC5vcHRpb25zLm1ldGhvZF07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG1ldGhvZHMubGVuZ3RoID09PSAwKSBtZXRob2RzID0gW1wiKlwiXTtcblx0XHRcdFx0aWYgKCFlbmRwb2ludFJlZ2lzdHJ5LmhhcyhwYXRoKSkgZW5kcG9pbnRSZWdpc3RyeS5zZXQocGF0aCwgW10pO1xuXHRcdFx0XHRlbmRwb2ludFJlZ2lzdHJ5LmdldChwYXRoKS5wdXNoKHtcblx0XHRcdFx0XHRwbHVnaW5JZDogcGx1Z2luLmlkLFxuXHRcdFx0XHRcdGVuZHBvaW50S2V5OiBrZXksXG5cdFx0XHRcdFx0bWV0aG9kc1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXHRjb25zdCBjb25mbGljdHMgPSBbXTtcblx0Zm9yIChjb25zdCBbcGF0aCwgZW50cmllc10gb2YgZW5kcG9pbnRSZWdpc3RyeS5lbnRyaWVzKCkpIGlmIChlbnRyaWVzLmxlbmd0aCA+IDEpIHtcblx0XHRjb25zdCBtZXRob2RNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdGxldCBoYXNDb25mbGljdCA9IGZhbHNlO1xuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykgZm9yIChjb25zdCBtZXRob2Qgb2YgZW50cnkubWV0aG9kcykge1xuXHRcdFx0aWYgKCFtZXRob2RNYXAuaGFzKG1ldGhvZCkpIG1ldGhvZE1hcC5zZXQobWV0aG9kLCBbXSk7XG5cdFx0XHRtZXRob2RNYXAuZ2V0KG1ldGhvZCkucHVzaChlbnRyeS5wbHVnaW5JZCk7XG5cdFx0XHRpZiAobWV0aG9kTWFwLmdldChtZXRob2QpLmxlbmd0aCA+IDEpIGhhc0NvbmZsaWN0ID0gdHJ1ZTtcblx0XHRcdGlmIChtZXRob2QgPT09IFwiKlwiICYmIGVudHJpZXMubGVuZ3RoID4gMSkgaGFzQ29uZmxpY3QgPSB0cnVlO1xuXHRcdFx0ZWxzZSBpZiAobWV0aG9kICE9PSBcIipcIiAmJiBtZXRob2RNYXAuaGFzKFwiKlwiKSkgaGFzQ29uZmxpY3QgPSB0cnVlO1xuXHRcdH1cblx0XHRpZiAoaGFzQ29uZmxpY3QpIHtcblx0XHRcdGNvbnN0IHVuaXF1ZVBsdWdpbnMgPSBbLi4ubmV3IFNldChlbnRyaWVzLm1hcCgoZSkgPT4gZS5wbHVnaW5JZCkpXTtcblx0XHRcdGNvbnN0IGNvbmZsaWN0aW5nTWV0aG9kcyA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBbbWV0aG9kLCBwbHVnaW5zXSBvZiBtZXRob2RNYXAuZW50cmllcygpKSBpZiAocGx1Z2lucy5sZW5ndGggPiAxIHx8IG1ldGhvZCA9PT0gXCIqXCIgJiYgZW50cmllcy5sZW5ndGggPiAxIHx8IG1ldGhvZCAhPT0gXCIqXCIgJiYgbWV0aG9kTWFwLmhhcyhcIipcIikpIGNvbmZsaWN0aW5nTWV0aG9kcy5wdXNoKG1ldGhvZCk7XG5cdFx0XHRjb25mbGljdHMucHVzaCh7XG5cdFx0XHRcdHBhdGgsXG5cdFx0XHRcdHBsdWdpbnM6IHVuaXF1ZVBsdWdpbnMsXG5cdFx0XHRcdGNvbmZsaWN0aW5nTWV0aG9kc1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGlmIChjb25mbGljdHMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGNvbmZsaWN0TWVzc2FnZXMgPSBjb25mbGljdHMubWFwKChjb25mbGljdCkgPT4gYCAgLSBcIiR7Y29uZmxpY3QucGF0aH1cIiBbJHtjb25mbGljdC5jb25mbGljdGluZ01ldGhvZHMuam9pbihcIiwgXCIpfV0gdXNlZCBieSBwbHVnaW5zOiAke2NvbmZsaWN0LnBsdWdpbnMuam9pbihcIiwgXCIpfWApLmpvaW4oXCJcXG5cIik7XG5cdFx0bG9nZ2VyJDEuZXJyb3IoYEVuZHBvaW50IHBhdGggY29uZmxpY3RzIGRldGVjdGVkISBNdWx0aXBsZSBwbHVnaW5zIGFyZSB0cnlpbmcgdG8gdXNlIHRoZSBzYW1lIGVuZHBvaW50IHBhdGhzIHdpdGggY29uZmxpY3RpbmcgSFRUUCBtZXRob2RzOlxuJHtjb25mbGljdE1lc3NhZ2VzfVxuXG5UbyByZXNvbHZlIHRoaXMsIHlvdSBjYW46XG5cdDEuIFVzZSBvbmx5IG9uZSBvZiB0aGUgY29uZmxpY3RpbmcgcGx1Z2luc1xuXHQyLiBDb25maWd1cmUgdGhlIHBsdWdpbnMgdG8gdXNlIGRpZmZlcmVudCBwYXRocyAoaWYgc3VwcG9ydGVkKVxuXHQzLiBFbnN1cmUgcGx1Z2lucyB1c2UgZGlmZmVyZW50IEhUVFAgbWV0aG9kcyBmb3IgdGhlIHNhbWUgcGF0aFxuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEVuZHBvaW50cyhjdHgsIG9wdGlvbnMpIHtcblx0Y29uc3QgcGx1Z2luRW5kcG9pbnRzID0gb3B0aW9ucy5wbHVnaW5zPy5yZWR1Y2UoKGFjYywgcGx1Z2luKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLmFjYyxcblx0XHRcdC4uLnBsdWdpbi5lbmRwb2ludHNcblx0XHR9O1xuXHR9LCB7fSkgPz8ge307XG5cdGNvbnN0IG1pZGRsZXdhcmVzID0gb3B0aW9ucy5wbHVnaW5zPy5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLm1pZGRsZXdhcmVzPy5tYXAoKG0pID0+IHtcblx0XHRjb25zdCBtaWRkbGV3YXJlID0gKGFzeW5jIChjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBhdXRoQ29udGV4dCA9IGF3YWl0IGN0eDtcblx0XHRcdHJldHVybiBtLm1pZGRsZXdhcmUoe1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHRjb250ZXh0OiB7XG5cdFx0XHRcdFx0Li4uYXV0aENvbnRleHQsXG5cdFx0XHRcdFx0Li4uY29udGV4dC5jb250ZXh0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdG1pZGRsZXdhcmUub3B0aW9ucyA9IG0ubWlkZGxld2FyZS5vcHRpb25zO1xuXHRcdHJldHVybiB7XG5cdFx0XHRwYXRoOiBtLnBhdGgsXG5cdFx0XHRtaWRkbGV3YXJlXG5cdFx0fTtcblx0fSkpLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4gIT09IHZvaWQgMCkuZmxhdCgpIHx8IFtdO1xuXHRyZXR1cm4ge1xuXHRcdGFwaTogdG9BdXRoRW5kcG9pbnRzKHtcblx0XHRcdHNpZ25JblNvY2lhbDogc2lnbkluU29jaWFsKCksXG5cdFx0XHRjYWxsYmFja09BdXRoLFxuXHRcdFx0Z2V0U2Vzc2lvbjogZ2V0U2Vzc2lvbigpLFxuXHRcdFx0c2lnbk91dCxcblx0XHRcdHNpZ25VcEVtYWlsOiBzaWduVXBFbWFpbCgpLFxuXHRcdFx0c2lnbkluRW1haWw6IHNpZ25JbkVtYWlsKCksXG5cdFx0XHRyZXNldFBhc3N3b3JkLFxuXHRcdFx0dmVyaWZ5UGFzc3dvcmQsXG5cdFx0XHR2ZXJpZnlFbWFpbCxcblx0XHRcdHNlbmRWZXJpZmljYXRpb25FbWFpbCxcblx0XHRcdGNoYW5nZUVtYWlsLFxuXHRcdFx0Y2hhbmdlUGFzc3dvcmQsXG5cdFx0XHRzZXRQYXNzd29yZCxcblx0XHRcdHVwZGF0ZVVzZXI6IHVwZGF0ZVVzZXIoKSxcblx0XHRcdGRlbGV0ZVVzZXIsXG5cdFx0XHRyZXF1ZXN0UGFzc3dvcmRSZXNldCxcblx0XHRcdHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssXG5cdFx0XHRsaXN0U2Vzc2lvbnM6IGxpc3RTZXNzaW9ucygpLFxuXHRcdFx0cmV2b2tlU2Vzc2lvbixcblx0XHRcdHJldm9rZVNlc3Npb25zLFxuXHRcdFx0cmV2b2tlT3RoZXJTZXNzaW9ucyxcblx0XHRcdGxpbmtTb2NpYWxBY2NvdW50LFxuXHRcdFx0bGlzdFVzZXJBY2NvdW50cyxcblx0XHRcdGRlbGV0ZVVzZXJDYWxsYmFjayxcblx0XHRcdHVubGlua0FjY291bnQsXG5cdFx0XHRyZWZyZXNoVG9rZW4sXG5cdFx0XHRnZXRBY2Nlc3NUb2tlbixcblx0XHRcdGFjY291bnRJbmZvLFxuXHRcdFx0Li4ucGx1Z2luRW5kcG9pbnRzLFxuXHRcdFx0b2ssXG5cdFx0XHRlcnJvclxuXHRcdH0sIGN0eCksXG5cdFx0bWlkZGxld2FyZXNcblx0fTtcbn1cbmNvbnN0IHJvdXRlciA9IChjdHgsIG9wdGlvbnMpID0+IHtcblx0Y29uc3QgeyBhcGksIG1pZGRsZXdhcmVzIH0gPSBnZXRFbmRwb2ludHMoY3R4LCBvcHRpb25zKTtcblx0Y29uc3QgYmFzZVBhdGggPSBuZXcgVVJMKGN0eC5iYXNlVVJMKS5wYXRobmFtZTtcblx0cmV0dXJuIGNyZWF0ZVJvdXRlcihhcGksIHtcblx0XHRyb3V0ZXJDb250ZXh0OiBjdHgsXG5cdFx0b3BlbmFwaTogeyBkaXNhYmxlZDogdHJ1ZSB9LFxuXHRcdGJhc2VQYXRoLFxuXHRcdHJvdXRlck1pZGRsZXdhcmU6IFt7XG5cdFx0XHRwYXRoOiBcIi8qKlwiLFxuXHRcdFx0bWlkZGxld2FyZTogb3JpZ2luQ2hlY2tNaWRkbGV3YXJlXG5cdFx0fSwgLi4ubWlkZGxld2FyZXNdLFxuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdHNraXBUcmFpbGluZ1NsYXNoZXM6IG9wdGlvbnMuYWR2YW5jZWQ/LnNraXBUcmFpbGluZ1NsYXNoZXMgPz8gZmFsc2UsXG5cdFx0YXN5bmMgb25SZXF1ZXN0KHJlcSkge1xuXHRcdFx0Y29uc3QgZGlzYWJsZWRQYXRocyA9IGN0eC5vcHRpb25zLmRpc2FibGVkUGF0aHMgfHwgW107XG5cdFx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKHJlcS51cmwsIGJhc2VQYXRoKTtcblx0XHRcdGlmIChkaXNhYmxlZFBhdGhzLmluY2x1ZGVzKG5vcm1hbGl6ZWRQYXRoKSkgcmV0dXJuIG5ldyBSZXNwb25zZShcIk5vdCBGb3VuZFwiLCB7IHN0YXR1czogNDA0IH0pO1xuXHRcdFx0bGV0IGN1cnJlbnRSZXF1ZXN0ID0gcmVxO1xuXHRcdFx0Zm9yIChjb25zdCBwbHVnaW4gb2YgY3R4Lm9wdGlvbnMucGx1Z2lucyB8fCBbXSkgaWYgKHBsdWdpbi5vblJlcXVlc3QpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXF1ZXN0KGN1cnJlbnRSZXF1ZXN0LCBjdHgpO1xuXHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgXCJyZXNwb25zZVwiIGluIHJlc3BvbnNlKSByZXR1cm4gcmVzcG9uc2UucmVzcG9uc2U7XG5cdFx0XHRcdGlmIChyZXNwb25zZSAmJiBcInJlcXVlc3RcIiBpbiByZXNwb25zZSkgY3VycmVudFJlcXVlc3QgPSByZXNwb25zZS5yZXF1ZXN0O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmF0ZUxpbWl0UmVzcG9uc2UgPSBhd2FpdCBvblJlcXVlc3RSYXRlTGltaXQoY3VycmVudFJlcXVlc3QsIGN0eCk7XG5cdFx0XHRpZiAocmF0ZUxpbWl0UmVzcG9uc2UpIHJldHVybiByYXRlTGltaXRSZXNwb25zZTtcblx0XHRcdHJldHVybiBjdXJyZW50UmVxdWVzdDtcblx0XHR9LFxuXHRcdGFzeW5jIG9uUmVzcG9uc2UocmVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSBpZiAocGx1Z2luLm9uUmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXNwb25zZShyZXMsIGN0eCk7XG5cdFx0XHRcdGlmIChyZXNwb25zZSkgcmV0dXJuIHJlc3BvbnNlLnJlc3BvbnNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlcztcblx0XHR9LFxuXHRcdG9uRXJyb3IoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciQxICYmIGUuc3RhdHVzID09PSBcIkZPVU5EXCIpIHJldHVybjtcblx0XHRcdGlmIChvcHRpb25zLm9uQVBJRXJyb3I/LnRocm93KSB0aHJvdyBlO1xuXHRcdFx0aWYgKG9wdGlvbnMub25BUElFcnJvcj8ub25FcnJvcikge1xuXHRcdFx0XHRvcHRpb25zLm9uQVBJRXJyb3Iub25FcnJvcihlLCBjdHgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBvcHRMb2dMZXZlbCA9IG9wdGlvbnMubG9nZ2VyPy5sZXZlbDtcblx0XHRcdGNvbnN0IGxvZyA9IG9wdExvZ0xldmVsID09PSBcImVycm9yXCIgfHwgb3B0TG9nTGV2ZWwgPT09IFwid2FyblwiIHx8IG9wdExvZ0xldmVsID09PSBcImRlYnVnXCIgPyBsb2dnZXIgOiB2b2lkIDA7XG5cdFx0XHRpZiAob3B0aW9ucy5sb2dnZXI/LmRpc2FibGVkICE9PSB0cnVlKSB7XG5cdFx0XHRcdGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGUgJiYgdHlwZW9mIGUubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGlmIChlLm1lc3NhZ2UuaW5jbHVkZXMoXCJubyBjb2x1bW5cIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwiY29sdW1uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInJlbGF0aW9uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInRhYmxlXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG5cdFx0XHRcdFx0XHRjdHgubG9nZ2VyPy5lcnJvcihlLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yJDEpIHtcblx0XHRcdFx0XHRpZiAoZS5zdGF0dXMgPT09IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpIGN0eC5sb2dnZXIuZXJyb3IoZS5zdGF0dXMsIGUpO1xuXHRcdFx0XHRcdGxvZz8uZXJyb3IoZS5tZXNzYWdlKTtcblx0XHRcdFx0fSBlbHNlIGN0eC5sb2dnZXI/LmVycm9yKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZSA/IGUubmFtZSA6IFwiXCIsIGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFQSUVycm9yLCBhY2NvdW50SW5mbywgY2FsbGJhY2tPQXV0aCwgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBjaGVja0VuZHBvaW50Q29uZmxpY3RzLCBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIGVycm9yLCBmb3JtQ3NyZk1pZGRsZXdhcmUsIGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldEFjY2Vzc1Rva2VuLCBnZXRFbmRwb2ludHMsIGdldElwLCBnZXRPQXV0aFN0YXRlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlua1NvY2lhbEFjY291bnQsIGxpc3RTZXNzaW9ucywgbGlzdFVzZXJBY2NvdW50cywgb2ssIG9wdGlvbnNNaWRkbGV3YXJlLCBvcmlnaW5DaGVjaywgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlLCByZWZyZXNoVG9rZW4sIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgcm91dGVyLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUsIHNldFBhc3N3b3JkLCBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsLCBzaWduT3V0LCBzaWduVXBFbWFpbCwgdW5saW5rQWNjb3VudCwgdXBkYXRlVXNlciwgdmVyaWZ5RW1haWwsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7OztBQUE0QztBQUNnRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxcbWlkZGxld2FyZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRPQXV0aFN0YXRlIH0gZnJvbSBcIi4vb2F1dGgubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfSBmcm9tIFwiLi9vcmlnaW4tY2hlY2subWpzXCI7XG5cbmV4cG9ydCB7ICB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/oauth.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOAuthState: () => (/* binding */ getOAuthState),\n/* harmony export */   setOAuthState: () => (/* binding */ setOAuthState)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/api/middlewares/oauth.ts\nconst { get: getOAuthState, set: setOAuthState } = (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.defineRequestState)(() => null);\n\n//#endregion\n\n//# sourceMappingURL=oauth.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvb2F1dGgubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErRDs7QUFFL0Q7QUFDQSxRQUFRLHlDQUF5QyxFQUFFLDZFQUFrQjs7QUFFckU7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXG1pZGRsZXdhcmVzXFxvYXV0aC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lUmVxdWVzdFN0YXRlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvbWlkZGxld2FyZXMvb2F1dGgudHNcbmNvbnN0IHsgZ2V0OiBnZXRPQXV0aFN0YXRlLCBzZXQ6IHNldE9BdXRoU3RhdGUgfSA9IGRlZmluZVJlcXVlc3RTdGF0ZSgoKSA9PiBudWxsKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRPQXV0aFN0YXRlLCBzZXRPQXV0aFN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYXV0aC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/origin-check.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formCsrfMiddleware: () => (/* binding */ formCsrfMiddleware),\n/* harmony export */   originCheck: () => (/* binding */ originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* binding */ originCheckMiddleware)\n/* harmony export */ });\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/api/middlewares/origin-check.ts\n/**\n* Checks if CSRF should be skipped for backward compatibility.\n* Previously, disableOriginCheck also disabled CSRF checks.\n* This maintains that behavior when disableCSRFCheck isn't explicitly set.\n* Only triggers for skipOriginCheck === true, not for path arrays.\n*/\nfunction shouldSkipCSRFForBackwardCompat(ctx) {\n\treturn ctx.context.skipOriginCheck === true && ctx.context.options.advanced?.disableCSRFCheck === void 0;\n}\n/**\n* Logs deprecation warning for users relying on coupled behavior.\n* Only logs if user explicitly set disableOriginCheck (not test environment default).\n*/\nconst logBackwardCompatWarning = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.deprecate)(function logBackwardCompatWarning$1() {}, \"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config.\");\n/**\n* A middleware to validate callbackURL and origin against trustedOrigins.\n* Also handles CSRF protection using Fetch Metadata for first-login scenarios.\n*/\nconst originCheckMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (ctx.request?.method === \"GET\" || ctx.request?.method === \"OPTIONS\" || ctx.request?.method === \"HEAD\" || !ctx.request) return;\n\tawait validateOrigin(ctx);\n\tif (ctx.context.skipOriginCheck) return;\n\tconst { body, query } = ctx;\n\tconst callbackURL = body?.callbackURL || query?.callbackURL;\n\tconst redirectURL = body?.redirectTo;\n\tconst errorCallbackURL = body?.errorCallbackURL;\n\tconst newUserCallbackURL = body?.newUserCallbackURL;\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tcallbackURL && validateURL(callbackURL, \"callbackURL\");\n\tredirectURL && validateURL(redirectURL, \"redirectURL\");\n\terrorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n\tnewUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tif (ctx.context.skipOriginCheck) return;\n\tconst callbackURL = getValue(ctx);\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tconst callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n\tfor (const url of callbacks) validateURL(url, \"callbackURL\");\n});\n/**\n* Validates origin header against trusted origins.\n* @param ctx - The endpoint context\n* @param forceValidate - If true, always validate origin regardless of cookies/skip flags\n*/\nasync function validateOrigin(ctx, forceValidate = false) {\n\tconst headers = ctx.request?.headers;\n\tif (!headers || !ctx.request) return;\n\tconst originHeader = headers.get(\"origin\") || headers.get(\"referer\") || \"\";\n\tconst useCookies = headers.has(\"cookie\");\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) {\n\t\tctx.context.options.advanced?.disableOriginCheck === true && logBackwardCompatWarning();\n\t\treturn;\n\t}\n\tconst skipOriginCheck = ctx.context.skipOriginCheck;\n\tif (Array.isArray(skipOriginCheck)) try {\n\t\tconst basePath = new URL(ctx.context.baseURL).pathname;\n\t\tconst currentPath = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(ctx.request.url, basePath);\n\t\tif (skipOriginCheck.some((skipPath) => currentPath.startsWith(skipPath))) return;\n\t} catch {}\n\tif (!(forceValidate || useCookies)) return;\n\tif (!originHeader || originHeader === \"null\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.MISSING_OR_NULL_ORIGIN });\n\tconst trustedOrigins = Array.isArray(ctx.context.options.trustedOrigins) ? ctx.context.trustedOrigins : [...ctx.context.trustedOrigins, ...(await ctx.context.options.trustedOrigins?.(ctx.request))?.filter((v) => Boolean(v)) || []];\n\tif (!trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__.matchesOriginPattern)(originHeader, origin))) {\n\t\tctx.context.logger.error(`Invalid origin: ${originHeader}`);\n\t\tctx.context.logger.info(`If it's a valid URL, please add ${originHeader} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: \"Invalid origin\" });\n\t}\n}\n/**\n* Middleware for CSRF protection using Fetch Metadata headers.\n* This prevents cross-site navigation login attacks while supporting progressive enhancement.\n*/\nconst formCsrfMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tawait validateFormCsrf(ctx);\n});\n/**\n* Validates CSRF protection for first-login scenarios using Fetch Metadata headers.\n* This prevents cross-site form submission attacks while supporting progressive enhancement.\n*/\nasync function validateFormCsrf(ctx) {\n\tconst req = ctx.request;\n\tif (!req) return;\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) return;\n\tconst headers = req.headers;\n\tif (headers.has(\"cookie\")) return await validateOrigin(ctx);\n\tconst site = headers.get(\"Sec-Fetch-Site\");\n\tconst mode = headers.get(\"Sec-Fetch-Mode\");\n\tconst dest = headers.get(\"Sec-Fetch-Dest\");\n\tif (Boolean(site && site.trim() || mode && mode.trim() || dest && dest.trim())) {\n\t\tif (site === \"cross-site\" && mode === \"navigate\") {\n\t\t\tctx.context.logger.error(\"Blocked cross-site navigation login attempt (CSRF protection)\", {\n\t\t\t\tsecFetchSite: site,\n\t\t\t\tsecFetchMode: mode,\n\t\t\t\tsecFetchDest: dest\n\t\t\t});\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED });\n\t\t}\n\t\treturn await validateOrigin(ctx, true);\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=origin-check.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRTtBQUNYO0FBQ1k7QUFDaEM7QUFDc0I7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsa0VBQVMseUNBQXlDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJFQUFvQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdDQUF3QztBQUNsRix1Q0FBdUMsTUFBTSxJQUFJLElBQUk7QUFDckQsOERBQThELEtBQUssNkVBQTZFLDJCQUEyQjtBQUMzSyxhQUFhLGlEQUFRLGdCQUFnQixvQkFBb0IsTUFBTSxHQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQ0FBa0MsMkVBQW9CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsd0NBQXdDO0FBQ2xGLHVDQUF1QyxNQUFNLElBQUksSUFBSTtBQUNyRCw4REFBOEQsS0FBSyw2RUFBNkUsMkJBQTJCO0FBQzNLLGFBQWEsaURBQVEsZ0JBQWdCLG9CQUFvQixNQUFNLEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBFQUFpQjtBQUN2QztBQUNBLEdBQUc7QUFDSDtBQUNBLHlEQUF5RCxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IseUJBQXlCO0FBQ25JO0FBQ0Esc0NBQXNDLCtFQUFvQjtBQUMxRCw4Q0FBOEMsYUFBYTtBQUMzRCw2REFBNkQsY0FBYyw2RUFBNkUsZUFBZTtBQUN2SyxZQUFZLGlEQUFRLGdCQUFnQiwyQkFBMkI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJFQUFvQjtBQUMvQztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0Isc0NBQXNDO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2tFO0FBQ2xFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxtaWRkbGV3YXJlc1xcb3JpZ2luLWNoZWNrLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9IGZyb20gXCIuLi8uLi9hdXRoL3RydXN0ZWQtb3JpZ2lucy5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGRlcHJlY2F0ZSwgbm9ybWFsaXplUGF0aG5hbWUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLnRzXG4vKipcbiogQ2hlY2tzIGlmIENTUkYgc2hvdWxkIGJlIHNraXBwZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXG4qIFByZXZpb3VzbHksIGRpc2FibGVPcmlnaW5DaGVjayBhbHNvIGRpc2FibGVkIENTUkYgY2hlY2tzLlxuKiBUaGlzIG1haW50YWlucyB0aGF0IGJlaGF2aW9yIHdoZW4gZGlzYWJsZUNTUkZDaGVjayBpc24ndCBleHBsaWNpdGx5IHNldC5cbiogT25seSB0cmlnZ2VycyBmb3Igc2tpcE9yaWdpbkNoZWNrID09PSB0cnVlLCBub3QgZm9yIHBhdGggYXJyYXlzLlxuKi9cbmZ1bmN0aW9uIHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSB7XG5cdHJldHVybiBjdHguY29udGV4dC5za2lwT3JpZ2luQ2hlY2sgPT09IHRydWUgJiYgY3R4LmNvbnRleHQub3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayA9PT0gdm9pZCAwO1xufVxuLyoqXG4qIExvZ3MgZGVwcmVjYXRpb24gd2FybmluZyBmb3IgdXNlcnMgcmVseWluZyBvbiBjb3VwbGVkIGJlaGF2aW9yLlxuKiBPbmx5IGxvZ3MgaWYgdXNlciBleHBsaWNpdGx5IHNldCBkaXNhYmxlT3JpZ2luQ2hlY2sgKG5vdCB0ZXN0IGVudmlyb25tZW50IGRlZmF1bHQpLlxuKi9cbmNvbnN0IGxvZ0JhY2t3YXJkQ29tcGF0V2FybmluZyA9IGRlcHJlY2F0ZShmdW5jdGlvbiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmckMSgpIHt9LCBcImRpc2FibGVPcmlnaW5DaGVjazogdHJ1ZSBjdXJyZW50bHkgYWxzbyBkaXNhYmxlcyBDU1JGIGNoZWNrcy4gSW4gYSBmdXR1cmUgdmVyc2lvbiwgZGlzYWJsZU9yaWdpbkNoZWNrIHdpbGwgT05MWSBkaXNhYmxlIFVSTCB2YWxpZGF0aW9uLiBUbyBrZWVwIENTUkYgZGlzYWJsZWQsIGFkZCBkaXNhYmxlQ1NSRkNoZWNrOiB0cnVlIHRvIHlvdXIgY29uZmlnLlwiKTtcbi8qKlxuKiBBIG1pZGRsZXdhcmUgdG8gdmFsaWRhdGUgY2FsbGJhY2tVUkwgYW5kIG9yaWdpbiBhZ2FpbnN0IHRydXN0ZWRPcmlnaW5zLlxuKiBBbHNvIGhhbmRsZXMgQ1NSRiBwcm90ZWN0aW9uIHVzaW5nIEZldGNoIE1ldGFkYXRhIGZvciBmaXJzdC1sb2dpbiBzY2VuYXJpb3MuXG4qL1xuY29uc3Qgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoY3R4LnJlcXVlc3Q/Lm1ldGhvZCA9PT0gXCJHRVRcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIk9QVElPTlNcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIkhFQURcIiB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0YXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4KTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCB7IGJvZHksIHF1ZXJ5IH0gPSBjdHg7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keT8uY2FsbGJhY2tVUkwgfHwgcXVlcnk/LmNhbGxiYWNrVVJMO1xuXHRjb25zdCByZWRpcmVjdFVSTCA9IGJvZHk/LnJlZGlyZWN0VG87XG5cdGNvbnN0IGVycm9yQ2FsbGJhY2tVUkwgPSBib2R5Py5lcnJvckNhbGxiYWNrVVJMO1xuXHRjb25zdCBuZXdVc2VyQ2FsbGJhY2tVUkwgPSBib2R5Py5uZXdVc2VyQ2FsbGJhY2tVUkw7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwoY2FsbGJhY2tVUkwsIFwiY2FsbGJhY2tVUkxcIik7XG5cdHJlZGlyZWN0VVJMICYmIHZhbGlkYXRlVVJMKHJlZGlyZWN0VVJMLCBcInJlZGlyZWN0VVJMXCIpO1xuXHRlcnJvckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKGVycm9yQ2FsbGJhY2tVUkwsIFwiZXJyb3JDYWxsYmFja1VSTFwiKTtcblx0bmV3VXNlckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKG5ld1VzZXJDYWxsYmFja1VSTCwgXCJuZXdVc2VyQ2FsbGJhY2tVUkxcIik7XG59KTtcbmNvbnN0IG9yaWdpbkNoZWNrID0gKGdldFZhbHVlKSA9PiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LnJlcXVlc3QpIHJldHVybjtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCBjYWxsYmFja1VSTCA9IGdldFZhbHVlKGN0eCk7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgY2FsbGJhY2tzID0gQXJyYXkuaXNBcnJheShjYWxsYmFja1VSTCkgPyBjYWxsYmFja1VSTCA6IFtjYWxsYmFja1VSTF07XG5cdGZvciAoY29uc3QgdXJsIG9mIGNhbGxiYWNrcykgdmFsaWRhdGVVUkwodXJsLCBcImNhbGxiYWNrVVJMXCIpO1xufSk7XG4vKipcbiogVmFsaWRhdGVzIG9yaWdpbiBoZWFkZXIgYWdhaW5zdCB0cnVzdGVkIG9yaWdpbnMuXG4qIEBwYXJhbSBjdHggLSBUaGUgZW5kcG9pbnQgY29udGV4dFxuKiBAcGFyYW0gZm9yY2VWYWxpZGF0ZSAtIElmIHRydWUsIGFsd2F5cyB2YWxpZGF0ZSBvcmlnaW4gcmVnYXJkbGVzcyBvZiBjb29raWVzL3NraXAgZmxhZ3NcbiovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZU9yaWdpbihjdHgsIGZvcmNlVmFsaWRhdGUgPSBmYWxzZSkge1xuXHRjb25zdCBoZWFkZXJzID0gY3R4LnJlcXVlc3Q/LmhlYWRlcnM7XG5cdGlmICghaGVhZGVycyB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0Y29uc3Qgb3JpZ2luSGVhZGVyID0gaGVhZGVycy5nZXQoXCJvcmlnaW5cIikgfHwgaGVhZGVycy5nZXQoXCJyZWZlcmVyXCIpIHx8IFwiXCI7XG5cdGNvbnN0IHVzZUNvb2tpZXMgPSBoZWFkZXJzLmhhcyhcImNvb2tpZVwiKTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBDU1JGQ2hlY2spIHJldHVybjtcblx0aWYgKHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSkge1xuXHRcdGN0eC5jb250ZXh0Lm9wdGlvbnMuYWR2YW5jZWQ/LmRpc2FibGVPcmlnaW5DaGVjayA9PT0gdHJ1ZSAmJiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmcoKTtcblx0XHRyZXR1cm47XG5cdH1cblx0Y29uc3Qgc2tpcE9yaWdpbkNoZWNrID0gY3R4LmNvbnRleHQuc2tpcE9yaWdpbkNoZWNrO1xuXHRpZiAoQXJyYXkuaXNBcnJheShza2lwT3JpZ2luQ2hlY2spKSB0cnkge1xuXHRcdGNvbnN0IGJhc2VQYXRoID0gbmV3IFVSTChjdHguY29udGV4dC5iYXNlVVJMKS5wYXRobmFtZTtcblx0XHRjb25zdCBjdXJyZW50UGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKGN0eC5yZXF1ZXN0LnVybCwgYmFzZVBhdGgpO1xuXHRcdGlmIChza2lwT3JpZ2luQ2hlY2suc29tZSgoc2tpcFBhdGgpID0+IGN1cnJlbnRQYXRoLnN0YXJ0c1dpdGgoc2tpcFBhdGgpKSkgcmV0dXJuO1xuXHR9IGNhdGNoIHt9XG5cdGlmICghKGZvcmNlVmFsaWRhdGUgfHwgdXNlQ29va2llcykpIHJldHVybjtcblx0aWYgKCFvcmlnaW5IZWFkZXIgfHwgb3JpZ2luSGVhZGVyID09PSBcIm51bGxcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5NSVNTSU5HX09SX05VTExfT1JJR0lOIH0pO1xuXHRjb25zdCB0cnVzdGVkT3JpZ2lucyA9IEFycmF5LmlzQXJyYXkoY3R4LmNvbnRleHQub3B0aW9ucy50cnVzdGVkT3JpZ2lucykgPyBjdHguY29udGV4dC50cnVzdGVkT3JpZ2lucyA6IFsuLi5jdHguY29udGV4dC50cnVzdGVkT3JpZ2lucywgLi4uKGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMudHJ1c3RlZE9yaWdpbnM/LihjdHgucmVxdWVzdCkpPy5maWx0ZXIoKHYpID0+IEJvb2xlYW4odikpIHx8IFtdXTtcblx0aWYgKCF0cnVzdGVkT3JpZ2lucy5zb21lKChvcmlnaW4pID0+IG1hdGNoZXNPcmlnaW5QYXR0ZXJuKG9yaWdpbkhlYWRlciwgb3JpZ2luKSkpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgb3JpZ2luOiAke29yaWdpbkhlYWRlcn1gKTtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgSWYgaXQncyBhIHZhbGlkIFVSTCwgcGxlYXNlIGFkZCAke29yaWdpbkhlYWRlcn0gdG8gdHJ1c3RlZE9yaWdpbnMgaW4geW91ciBhdXRoIGNvbmZpZ1xcbmAsIGBDdXJyZW50IGxpc3Qgb2YgdHJ1c3RlZE9yaWdpbnM6ICR7dHJ1c3RlZE9yaWdpbnN9YCk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogXCJJbnZhbGlkIG9yaWdpblwiIH0pO1xuXHR9XG59XG4vKipcbiogTWlkZGxld2FyZSBmb3IgQ1NSRiBwcm90ZWN0aW9uIHVzaW5nIEZldGNoIE1ldGFkYXRhIGhlYWRlcnMuXG4qIFRoaXMgcHJldmVudHMgY3Jvc3Mtc2l0ZSBuYXZpZ2F0aW9uIGxvZ2luIGF0dGFja3Mgd2hpbGUgc3VwcG9ydGluZyBwcm9ncmVzc2l2ZSBlbmhhbmNlbWVudC5cbiovXG5jb25zdCBmb3JtQ3NyZk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LnJlcXVlc3QpIHJldHVybjtcblx0YXdhaXQgdmFsaWRhdGVGb3JtQ3NyZihjdHgpO1xufSk7XG4vKipcbiogVmFsaWRhdGVzIENTUkYgcHJvdGVjdGlvbiBmb3IgZmlyc3QtbG9naW4gc2NlbmFyaW9zIHVzaW5nIEZldGNoIE1ldGFkYXRhIGhlYWRlcnMuXG4qIFRoaXMgcHJldmVudHMgY3Jvc3Mtc2l0ZSBmb3JtIHN1Ym1pc3Npb24gYXR0YWNrcyB3aGlsZSBzdXBwb3J0aW5nIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LlxuKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlRm9ybUNzcmYoY3R4KSB7XG5cdGNvbnN0IHJlcSA9IGN0eC5yZXF1ZXN0O1xuXHRpZiAoIXJlcSkgcmV0dXJuO1xuXHRpZiAoY3R4LmNvbnRleHQuc2tpcENTUkZDaGVjaykgcmV0dXJuO1xuXHRpZiAoc2hvdWxkU2tpcENTUkZGb3JCYWNrd2FyZENvbXBhdChjdHgpKSByZXR1cm47XG5cdGNvbnN0IGhlYWRlcnMgPSByZXEuaGVhZGVycztcblx0aWYgKGhlYWRlcnMuaGFzKFwiY29va2llXCIpKSByZXR1cm4gYXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4KTtcblx0Y29uc3Qgc2l0ZSA9IGhlYWRlcnMuZ2V0KFwiU2VjLUZldGNoLVNpdGVcIik7XG5cdGNvbnN0IG1vZGUgPSBoZWFkZXJzLmdldChcIlNlYy1GZXRjaC1Nb2RlXCIpO1xuXHRjb25zdCBkZXN0ID0gaGVhZGVycy5nZXQoXCJTZWMtRmV0Y2gtRGVzdFwiKTtcblx0aWYgKEJvb2xlYW4oc2l0ZSAmJiBzaXRlLnRyaW0oKSB8fCBtb2RlICYmIG1vZGUudHJpbSgpIHx8IGRlc3QgJiYgZGVzdC50cmltKCkpKSB7XG5cdFx0aWYgKHNpdGUgPT09IFwiY3Jvc3Mtc2l0ZVwiICYmIG1vZGUgPT09IFwibmF2aWdhdGVcIikge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQmxvY2tlZCBjcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYXR0ZW1wdCAoQ1NSRiBwcm90ZWN0aW9uKVwiLCB7XG5cdFx0XHRcdHNlY0ZldGNoU2l0ZTogc2l0ZSxcblx0XHRcdFx0c2VjRmV0Y2hNb2RlOiBtb2RlLFxuXHRcdFx0XHRzZWNGZXRjaERlc3Q6IGRlc3Rcblx0XHRcdH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5DUk9TU19TSVRFX05BVklHQVRJT05fTE9HSU5fQkxPQ0tFRCB9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGF3YWl0IHZhbGlkYXRlT3JpZ2luKGN0eCwgdHJ1ZSk7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUsIG9yaWdpbkNoZWNrLCBvcmlnaW5DaGVja01pZGRsZXdhcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWdpbi1jaGVjay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/rate-limiter/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onRequestRateLimit: () => (/* binding */ onRequestRateLimit)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/wildcard.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/api/rate-limiter/index.ts\nconst memory = /* @__PURE__ */ new Map();\nfunction shouldRateLimit(max, window, rateLimitData) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn now - rateLimitData.lastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n\treturn new Response(JSON.stringify({ message: \"Too many requests. Please try again later.\" }), {\n\t\tstatus: 429,\n\t\tstatusText: \"Too Many Requests\",\n\t\theaders: { \"X-Retry-After\": retryAfter.toString() }\n\t});\n}\nfunction getRetryAfter(lastRequest, window) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDatabaseStorageWrapper(ctx) {\n\tconst model = \"rateLimit\";\n\tconst db = ctx.adapter;\n\treturn {\n\t\tget: async (key) => {\n\t\t\tconst data = (await db.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"key\",\n\t\t\t\t\tvalue: key\n\t\t\t\t}]\n\t\t\t}))[0];\n\t\t\tif (typeof data?.lastRequest === \"bigint\") data.lastRequest = Number(data.lastRequest);\n\t\t\treturn data;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\ttry {\n\t\t\t\tif (_update) await db.updateMany({\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"key\",\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\telse await db.create({\n\t\t\t\t\tmodel,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.logger.error(\"Error setting rate limit\", e);\n\t\t\t}\n\t\t}\n\t};\n}\nfunction getRateLimitStorage(ctx, rateLimitSettings) {\n\tif (ctx.options.rateLimit?.customStorage) return ctx.options.rateLimit.customStorage;\n\tconst storage = ctx.rateLimit.storage;\n\tif (storage === \"secondary-storage\") return {\n\t\tget: async (key) => {\n\t\t\tconst data = await ctx.options.secondaryStorage?.get(key);\n\t\t\treturn data ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(data) : null;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tawait ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value), ttl);\n\t\t}\n\t};\n\telse if (storage === \"memory\") return {\n\t\tasync get(key) {\n\t\t\tconst entry = memory.get(key);\n\t\t\tif (!entry) return null;\n\t\t\tif (Date.now() >= entry.expiresAt) {\n\t\t\t\tmemory.delete(key);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn entry.data;\n\t\t},\n\t\tasync set(key, value, _update) {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tconst expiresAt = Date.now() + ttl * 1e3;\n\t\t\tmemory.set(key, {\n\t\t\t\tdata: value,\n\t\t\t\texpiresAt\n\t\t\t});\n\t\t}\n\t};\n\treturn createDatabaseStorageWrapper(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n\tif (!ctx.rateLimit.enabled) return;\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\tconst path = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.normalizePathname)(req.url, basePath);\n\tlet currentWindow = ctx.rateLimit.window;\n\tlet currentMax = ctx.rateLimit.max;\n\tconst ip = (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp)(req, ctx.options);\n\tif (!ip) return;\n\tconst key = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.createRateLimitKey)(ip, path);\n\tconst specialRule = getDefaultSpecialRules().find((rule) => rule.pathMatcher(path));\n\tif (specialRule) {\n\t\tcurrentWindow = specialRule.window;\n\t\tcurrentMax = specialRule.max;\n\t}\n\tfor (const plugin of ctx.options.plugins || []) if (plugin.rateLimit) {\n\t\tconst matchedRule = plugin.rateLimit.find((rule) => rule.pathMatcher(path));\n\t\tif (matchedRule) {\n\t\t\tcurrentWindow = matchedRule.window;\n\t\t\tcurrentMax = matchedRule.max;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (ctx.rateLimit.customRules) {\n\t\tconst _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n\t\t\tif (p.includes(\"*\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(p)(path);\n\t\t\treturn p === path;\n\t\t});\n\t\tif (_path) {\n\t\t\tconst customRule = ctx.rateLimit.customRules[_path];\n\t\t\tconst resolved = typeof customRule === \"function\" ? await customRule(req, {\n\t\t\t\twindow: currentWindow,\n\t\t\t\tmax: currentMax\n\t\t\t}) : customRule;\n\t\t\tif (resolved) {\n\t\t\t\tcurrentWindow = resolved.window;\n\t\t\t\tcurrentMax = resolved.max;\n\t\t\t}\n\t\t\tif (resolved === false) return;\n\t\t}\n\t}\n\tconst storage = getRateLimitStorage(ctx, { window: currentWindow });\n\tconst data = await storage.get(key);\n\tconst now = Date.now();\n\tif (!data) await storage.set(key, {\n\t\tkey,\n\t\tcount: 1,\n\t\tlastRequest: now\n\t});\n\telse {\n\t\tconst timeSinceLastRequest = now - data.lastRequest;\n\t\tif (shouldRateLimit(currentMax, currentWindow, data)) return rateLimitResponse(getRetryAfter(data.lastRequest, currentWindow));\n\t\telse if (timeSinceLastRequest > currentWindow * 1e3) await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t\telse await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: data.count + 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t}\n}\nfunction getDefaultSpecialRules() {\n\treturn [{\n\t\tpathMatcher(path) {\n\t\t\treturn path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n\t\t},\n\t\twindow: 10,\n\t\tmax: 3\n\t}];\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcmF0ZS1saW1pdGVyL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ0U7QUFDc0M7O0FBRS9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsdURBQXVEO0FBQzdGO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNFQUFhO0FBQzlCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMEVBQWlCO0FBQy9CO0FBQ0E7QUFDQSxZQUFZLGdFQUFLO0FBQ2pCO0FBQ0EsYUFBYSwyRUFBa0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGtFQUFhO0FBQzVDO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdUJBQXVCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccmF0ZS1saW1pdGVyXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyB3aWxkY2FyZE1hdGNoIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3dpbGRjYXJkLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlUmF0ZUxpbWl0S2V5LCBub3JtYWxpemVQYXRobmFtZSwgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yYXRlLWxpbWl0ZXIvaW5kZXgudHNcbmNvbnN0IG1lbW9yeSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5mdW5jdGlvbiBzaG91bGRSYXRlTGltaXQobWF4LCB3aW5kb3csIHJhdGVMaW1pdERhdGEpIHtcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0Y29uc3Qgd2luZG93SW5NcyA9IHdpbmRvdyAqIDFlMztcblx0cmV0dXJuIG5vdyAtIHJhdGVMaW1pdERhdGEubGFzdFJlcXVlc3QgPCB3aW5kb3dJbk1zICYmIHJhdGVMaW1pdERhdGEuY291bnQgPj0gbWF4O1xufVxuZnVuY3Rpb24gcmF0ZUxpbWl0UmVzcG9uc2UocmV0cnlBZnRlcikge1xuXHRyZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZTogXCJUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiB9KSwge1xuXHRcdHN0YXR1czogNDI5LFxuXHRcdHN0YXR1c1RleHQ6IFwiVG9vIE1hbnkgUmVxdWVzdHNcIixcblx0XHRoZWFkZXJzOiB7IFwiWC1SZXRyeS1BZnRlclwiOiByZXRyeUFmdGVyLnRvU3RyaW5nKCkgfVxuXHR9KTtcbn1cbmZ1bmN0aW9uIGdldFJldHJ5QWZ0ZXIobGFzdFJlcXVlc3QsIHdpbmRvdykge1xuXHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRjb25zdCB3aW5kb3dJbk1zID0gd2luZG93ICogMWUzO1xuXHRyZXR1cm4gTWF0aC5jZWlsKChsYXN0UmVxdWVzdCArIHdpbmRvd0luTXMgLSBub3cpIC8gMWUzKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURhdGFiYXNlU3RvcmFnZVdyYXBwZXIoY3R4KSB7XG5cdGNvbnN0IG1vZGVsID0gXCJyYXRlTGltaXRcIjtcblx0Y29uc3QgZGIgPSBjdHguYWRhcHRlcjtcblx0cmV0dXJuIHtcblx0XHRnZXQ6IGFzeW5jIChrZXkpID0+IHtcblx0XHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgZGIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0dmFsdWU6IGtleVxuXHRcdFx0XHR9XVxuXHRcdFx0fSkpWzBdO1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhPy5sYXN0UmVxdWVzdCA9PT0gXCJiaWdpbnRcIikgZGF0YS5sYXN0UmVxdWVzdCA9IE51bWJlcihkYXRhLmxhc3RSZXF1ZXN0KTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0sXG5cdFx0c2V0OiBhc3luYyAoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKF91cGRhdGUpIGF3YWl0IGRiLnVwZGF0ZU1hbnkoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0XHR2YWx1ZToga2V5XG5cdFx0XHRcdFx0fV0sXG5cdFx0XHRcdFx0dXBkYXRlOiB7XG5cdFx0XHRcdFx0XHRjb3VudDogdmFsdWUuY291bnQsXG5cdFx0XHRcdFx0XHRsYXN0UmVxdWVzdDogdmFsdWUubGFzdFJlcXVlc3Rcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbHNlIGF3YWl0IGRiLmNyZWF0ZSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0Y291bnQ6IHZhbHVlLmNvdW50LFxuXHRcdFx0XHRcdFx0bGFzdFJlcXVlc3Q6IHZhbHVlLmxhc3RSZXF1ZXN0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y3R4LmxvZ2dlci5lcnJvcihcIkVycm9yIHNldHRpbmcgcmF0ZSBsaW1pdFwiLCBlKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5mdW5jdGlvbiBnZXRSYXRlTGltaXRTdG9yYWdlKGN0eCwgcmF0ZUxpbWl0U2V0dGluZ3MpIHtcblx0aWYgKGN0eC5vcHRpb25zLnJhdGVMaW1pdD8uY3VzdG9tU3RvcmFnZSkgcmV0dXJuIGN0eC5vcHRpb25zLnJhdGVMaW1pdC5jdXN0b21TdG9yYWdlO1xuXHRjb25zdCBzdG9yYWdlID0gY3R4LnJhdGVMaW1pdC5zdG9yYWdlO1xuXHRpZiAoc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiKSByZXR1cm4ge1xuXHRcdGdldDogYXN5bmMgKGtleSkgPT4ge1xuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGN0eC5vcHRpb25zLnNlY29uZGFyeVN0b3JhZ2U/LmdldChrZXkpO1xuXHRcdFx0cmV0dXJuIGRhdGEgPyBzYWZlSlNPTlBhcnNlKGRhdGEpIDogbnVsbDtcblx0XHR9LFxuXHRcdHNldDogYXN5bmMgKGtleSwgdmFsdWUsIF91cGRhdGUpID0+IHtcblx0XHRcdGNvbnN0IHR0bCA9IHJhdGVMaW1pdFNldHRpbmdzPy53aW5kb3cgPz8gY3R4Lm9wdGlvbnMucmF0ZUxpbWl0Py53aW5kb3cgPz8gMTA7XG5cdFx0XHRhd2FpdCBjdHgub3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlPy5zZXQ/LihrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdHRsKTtcblx0XHR9XG5cdH07XG5cdGVsc2UgaWYgKHN0b3JhZ2UgPT09IFwibWVtb3J5XCIpIHJldHVybiB7XG5cdFx0YXN5bmMgZ2V0KGtleSkge1xuXHRcdFx0Y29uc3QgZW50cnkgPSBtZW1vcnkuZ2V0KGtleSk7XG5cdFx0XHRpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcblx0XHRcdGlmIChEYXRlLm5vdygpID49IGVudHJ5LmV4cGlyZXNBdCkge1xuXHRcdFx0XHRtZW1vcnkuZGVsZXRlKGtleSk7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVudHJ5LmRhdGE7XG5cdFx0fSxcblx0XHRhc3luYyBzZXQoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkge1xuXHRcdFx0Y29uc3QgdHRsID0gcmF0ZUxpbWl0U2V0dGluZ3M/LndpbmRvdyA/PyBjdHgub3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyA/PyAxMDtcblx0XHRcdGNvbnN0IGV4cGlyZXNBdCA9IERhdGUubm93KCkgKyB0dGwgKiAxZTM7XG5cdFx0XHRtZW1vcnkuc2V0KGtleSwge1xuXHRcdFx0XHRkYXRhOiB2YWx1ZSxcblx0XHRcdFx0ZXhwaXJlc0F0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdHJldHVybiBjcmVhdGVEYXRhYmFzZVN0b3JhZ2VXcmFwcGVyKGN0eCk7XG59XG5hc3luYyBmdW5jdGlvbiBvblJlcXVlc3RSYXRlTGltaXQocmVxLCBjdHgpIHtcblx0aWYgKCFjdHgucmF0ZUxpbWl0LmVuYWJsZWQpIHJldHVybjtcblx0Y29uc3QgYmFzZVBhdGggPSBuZXcgVVJMKGN0eC5iYXNlVVJMKS5wYXRobmFtZTtcblx0Y29uc3QgcGF0aCA9IG5vcm1hbGl6ZVBhdGhuYW1lKHJlcS51cmwsIGJhc2VQYXRoKTtcblx0bGV0IGN1cnJlbnRXaW5kb3cgPSBjdHgucmF0ZUxpbWl0LndpbmRvdztcblx0bGV0IGN1cnJlbnRNYXggPSBjdHgucmF0ZUxpbWl0Lm1heDtcblx0Y29uc3QgaXAgPSBnZXRJcChyZXEsIGN0eC5vcHRpb25zKTtcblx0aWYgKCFpcCkgcmV0dXJuO1xuXHRjb25zdCBrZXkgPSBjcmVhdGVSYXRlTGltaXRLZXkoaXAsIHBhdGgpO1xuXHRjb25zdCBzcGVjaWFsUnVsZSA9IGdldERlZmF1bHRTcGVjaWFsUnVsZXMoKS5maW5kKChydWxlKSA9PiBydWxlLnBhdGhNYXRjaGVyKHBhdGgpKTtcblx0aWYgKHNwZWNpYWxSdWxlKSB7XG5cdFx0Y3VycmVudFdpbmRvdyA9IHNwZWNpYWxSdWxlLndpbmRvdztcblx0XHRjdXJyZW50TWF4ID0gc3BlY2lhbFJ1bGUubWF4O1xuXHR9XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIGN0eC5vcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4ucmF0ZUxpbWl0KSB7XG5cdFx0Y29uc3QgbWF0Y2hlZFJ1bGUgPSBwbHVnaW4ucmF0ZUxpbWl0LmZpbmQoKHJ1bGUpID0+IHJ1bGUucGF0aE1hdGNoZXIocGF0aCkpO1xuXHRcdGlmIChtYXRjaGVkUnVsZSkge1xuXHRcdFx0Y3VycmVudFdpbmRvdyA9IG1hdGNoZWRSdWxlLndpbmRvdztcblx0XHRcdGN1cnJlbnRNYXggPSBtYXRjaGVkUnVsZS5tYXg7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblx0aWYgKGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXMpIHtcblx0XHRjb25zdCBfcGF0aCA9IE9iamVjdC5rZXlzKGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXMpLmZpbmQoKHApID0+IHtcblx0XHRcdGlmIChwLmluY2x1ZGVzKFwiKlwiKSkgcmV0dXJuIHdpbGRjYXJkTWF0Y2gocCkocGF0aCk7XG5cdFx0XHRyZXR1cm4gcCA9PT0gcGF0aDtcblx0XHR9KTtcblx0XHRpZiAoX3BhdGgpIHtcblx0XHRcdGNvbnN0IGN1c3RvbVJ1bGUgPSBjdHgucmF0ZUxpbWl0LmN1c3RvbVJ1bGVzW19wYXRoXTtcblx0XHRcdGNvbnN0IHJlc29sdmVkID0gdHlwZW9mIGN1c3RvbVJ1bGUgPT09IFwiZnVuY3Rpb25cIiA/IGF3YWl0IGN1c3RvbVJ1bGUocmVxLCB7XG5cdFx0XHRcdHdpbmRvdzogY3VycmVudFdpbmRvdyxcblx0XHRcdFx0bWF4OiBjdXJyZW50TWF4XG5cdFx0XHR9KSA6IGN1c3RvbVJ1bGU7XG5cdFx0XHRpZiAocmVzb2x2ZWQpIHtcblx0XHRcdFx0Y3VycmVudFdpbmRvdyA9IHJlc29sdmVkLndpbmRvdztcblx0XHRcdFx0Y3VycmVudE1heCA9IHJlc29sdmVkLm1heDtcblx0XHRcdH1cblx0XHRcdGlmIChyZXNvbHZlZCA9PT0gZmFsc2UpIHJldHVybjtcblx0XHR9XG5cdH1cblx0Y29uc3Qgc3RvcmFnZSA9IGdldFJhdGVMaW1pdFN0b3JhZ2UoY3R4LCB7IHdpbmRvdzogY3VycmVudFdpbmRvdyB9KTtcblx0Y29uc3QgZGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0KGtleSk7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdGlmICghZGF0YSkgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG5cdFx0a2V5LFxuXHRcdGNvdW50OiAxLFxuXHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0fSk7XG5cdGVsc2Uge1xuXHRcdGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gZGF0YS5sYXN0UmVxdWVzdDtcblx0XHRpZiAoc2hvdWxkUmF0ZUxpbWl0KGN1cnJlbnRNYXgsIGN1cnJlbnRXaW5kb3csIGRhdGEpKSByZXR1cm4gcmF0ZUxpbWl0UmVzcG9uc2UoZ2V0UmV0cnlBZnRlcihkYXRhLmxhc3RSZXF1ZXN0LCBjdXJyZW50V2luZG93KSk7XG5cdFx0ZWxzZSBpZiAodGltZVNpbmNlTGFzdFJlcXVlc3QgPiBjdXJyZW50V2luZG93ICogMWUzKSBhd2FpdCBzdG9yYWdlLnNldChrZXksIHtcblx0XHRcdC4uLmRhdGEsXG5cdFx0XHRjb3VudDogMSxcblx0XHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0XHR9LCB0cnVlKTtcblx0XHRlbHNlIGF3YWl0IHN0b3JhZ2Uuc2V0KGtleSwge1xuXHRcdFx0Li4uZGF0YSxcblx0XHRcdGNvdW50OiBkYXRhLmNvdW50ICsgMSxcblx0XHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0XHR9LCB0cnVlKTtcblx0fVxufVxuZnVuY3Rpb24gZ2V0RGVmYXVsdFNwZWNpYWxSdWxlcygpIHtcblx0cmV0dXJuIFt7XG5cdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0cmV0dXJuIHBhdGguc3RhcnRzV2l0aChcIi9zaWduLWluXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9zaWduLXVwXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcIi9jaGFuZ2UtcGFzc3dvcmRcIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL2NoYW5nZS1lbWFpbFwiKTtcblx0XHR9LFxuXHRcdHdpbmRvdzogMTAsXG5cdFx0bWF4OiAzXG5cdH1dO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG9uUmVxdWVzdFJhdGVMaW1pdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/account.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountInfo: () => (/* binding */ accountInfo),\n/* harmony export */   getAccessToken: () => (/* binding */ getAccessToken),\n/* harmony export */   linkSocialAccount: () => (/* binding */ linkSocialAccount),\n/* harmony export */   listUserAccounts: () => (/* binding */ listUserAccounts),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken),\n/* harmony export */   unlinkAccount: () => (/* binding */ unlinkAccount)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/account.ts\nconst listUserAccounts = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/list-accounts\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserAccounts\",\n\t\tdescription: \"List all accounts linked to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tproviderId: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccountId: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\tscopes: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"providerId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"accountId\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"scopes\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst accounts = await c.context.internalAdapter.findAccounts(session.user.id);\n\treturn c.json(accounts.map((a) => {\n\t\tconst { scope, ...parsed } = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseAccountOutput)(c.context.options, a);\n\t\treturn {\n\t\t\t...parsed,\n\t\t\tscopes: scope?.split(\",\") || []\n\t\t};\n\t}));\n});\nconst linkSocialAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/link-social\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after the user has signed in\" }).optional(),\n\t\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__.SocialProviderListEnum,\n\t\tidToken: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).optional()\n\t\t}).optional(),\n\t\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional(),\n\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).meta({ description: \"Additional scopes to request from the provider\" }).optional(),\n\t\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional(),\n\t\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\t\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link a social account to the user\",\n\t\toperationId: \"linkSocialAccount\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the user should be redirected to the authorization URL\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: { type: \"boolean\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst linkingUserInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!linkingUserInfo || !linkingUserInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tconst linkingUserId = String(linkingUserInfo.user.id);\n\t\tif (!linkingUserInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tif ((await c.context.internalAdapter.findAccounts(session.user.id)).find((a) => a.providerId === provider.id && a.accountId === linkingUserId)) return c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - linking not allowed\" });\n\t\tif (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - different emails not allowed\" });\n\t\ttry {\n\t\t\tawait c.context.internalAdapter.createAccount({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: linkingUserId,\n\t\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\t\tidToken: token,\n\t\t\t\trefreshToken: c.body.idToken.refreshToken,\n\t\t\t\tscope: c.body.idToken.scopes?.join(\",\")\n\t\t\t});\n\t\t} catch {\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"EXPECTATION_FAILED\", { message: \"Account not linked - unable to create account\" });\n\t\t}\n\t\tif (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) try {\n\t\t\tawait c.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t\tname: linkingUserInfo.user?.name,\n\t\t\t\timage: linkingUserInfo.user?.image\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Could not update user - \" + e.toString());\n\t\t}\n\t\treturn c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t}\n\tconst state = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__.generateState)(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate: state.state,\n\t\tcodeVerifier: state.codeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst unlinkAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/unlink-account\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.freshSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Unlink an account\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId } = ctx.body;\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(ctx.context.session.user.id);\n\tif (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT });\n\tconst accountExist = accounts.find((account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId);\n\tif (!accountExist) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND });\n\tawait ctx.context.internalAdapter.deleteAccount(accountExist.id);\n\treturn ctx.json({ status: true });\n});\nconst getAccessToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/get-access-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get a valid access token, doing a refresh if needed\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"A Valid access token\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body || {};\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw ctx.error(\"UNAUTHORIZED\");\n\tif (!ctx.context.socialProviders.find((p) => p.id === providerId)) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} is not supported.` });\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tlet account = void 0;\n\tif (accountData && providerId === accountData.providerId && (!accountId || accountData.id === accountId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\ttry {\n\t\tlet newTokens = null;\n\t\tconst accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n\t\tif (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n\t\t\tconst refreshToken$1 = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.refreshToken, ctx.context);\n\t\t\tnewTokens = await provider.refreshAccessToken(refreshToken$1);\n\t\t\tconst updatedData = {\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.accessToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.refreshToken, ctx.context),\n\t\t\t\trefreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n\t\t\t};\n\t\t\tlet updatedAccount = null;\n\t\t\tif (account.id) updatedAccount = await ctx.context.internalAdapter.updateAccount(account.id, updatedData);\n\t\t\tif (ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t\t...account,\n\t\t\t\t...updatedAccount ?? updatedData\n\t\t\t});\n\t\t}\n\t\tconst accessTokenExpiresAt = (() => {\n\t\t\tif (newTokens?.accessTokenExpiresAt) {\n\t\t\t\tif (typeof newTokens.accessTokenExpiresAt === \"string\") return new Date(newTokens.accessTokenExpiresAt);\n\t\t\t\treturn newTokens.accessTokenExpiresAt;\n\t\t\t}\n\t\t\tif (account.accessTokenExpiresAt) {\n\t\t\t\tif (typeof account.accessTokenExpiresAt === \"string\") return new Date(account.accessTokenExpiresAt);\n\t\t\t\treturn account.accessTokenExpiresAt;\n\t\t\t}\n\t\t})();\n\t\tconst tokens = {\n\t\t\taccessToken: newTokens?.accessToken ?? await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.accessToken ?? \"\", ctx.context),\n\t\t\taccessTokenExpiresAt,\n\t\t\tscopes: account.scope?.split(\",\") ?? [],\n\t\t\tidToken: newTokens?.idToken ?? account.idToken ?? void 0\n\t\t};\n\t\treturn ctx.json(tokens);\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to get a valid access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst refreshToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/refresh-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Refresh the access token using a refresh token\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Access token refreshed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body;\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Either userId or session is required` });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\tif (!provider.refreshAccessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} does not support token refreshing.` });\n\tlet account = void 0;\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tif (accountData && (!providerId || providerId === accountData?.providerId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tlet refreshToken$1 = void 0;\n\tif (accountData && providerId === accountData.providerId) refreshToken$1 = accountData.refreshToken ?? void 0;\n\telse refreshToken$1 = account.refreshToken ?? void 0;\n\tif (!refreshToken$1) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Refresh token not found\" });\n\ttry {\n\t\tconst decryptedRefreshToken = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(refreshToken$1, ctx.context);\n\t\tconst tokens = await provider.refreshAccessToken(decryptedRefreshToken);\n\t\tif (account.id) {\n\t\t\tconst updateData = {\n\t\t\t\t...account || {},\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\t\tidToken: tokens.idToken || account.idToken\n\t\t\t};\n\t\t\tawait ctx.context.internalAdapter.updateAccount(account.id, updateData);\n\t\t}\n\t\tif (accountData && providerId === accountData.providerId && ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t...accountData,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || accountData.scope,\n\t\t\tidToken: tokens.idToken || accountData.idToken\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccessToken: tokens.accessToken,\n\t\t\trefreshToken: tokens.refreshToken,\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\tidToken: tokens.idToken || account.idToken,\n\t\t\tproviderId: account.providerId,\n\t\t\taccountId: account.accountId\n\t\t});\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to refresh access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst accountInfoQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.optional(zod__WEBPACK_IMPORTED_MODULE_9__.object({ accountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider given account id for which to get the account info\" }).optional() }));\nconst accountInfo = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/account-info\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the account info provided by the provider\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tname: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\timage: { type: \"string\" },\n\t\t\t\t\t\t\temailVerified: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"id\", \"emailVerified\"]\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\tadditionalProperties: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"data\"],\n\t\t\t\tadditionalProperties: false\n\t\t\t} } }\n\t\t} }\n\t} },\n\tquery: accountInfoQuerySchema\n}, async (ctx) => {\n\tconst providedAccountId = ctx.query?.accountId;\n\tlet account = void 0;\n\tif (!providedAccountId) {\n\t\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\t\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\t\t\tif (accountData) account = accountData;\n\t\t}\n\t} else {\n\t\tconst accountData = await ctx.context.internalAdapter.findAccount(providedAccountId);\n\t\tif (accountData) account = accountData;\n\t}\n\tif (!account || account.userId !== ctx.context.session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === account.providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `Provider account provider is ${account.providerId} but it is not configured` });\n\tconst tokens = await getAccessToken({\n\t\t...ctx,\n\t\tmethod: \"POST\",\n\t\tbody: {\n\t\t\taccountId: account.id,\n\t\t\tproviderId: account.providerId\n\t\t},\n\t\treturnHeaders: false,\n\t\treturnStatus: false\n\t});\n\tif (!tokens.accessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Access token not found\" });\n\tconst info = await provider.getUserInfo({\n\t\t...tokens,\n\t\taccessToken: tokens.accessToken\n\t});\n\treturn ctx.json(info);\n});\n\n//#endregion\n\n//# sourceMappingURL=account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2FjY291bnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDNEI7QUFDOUI7QUFDa0I7QUFDb0I7QUFDbEM7QUFDcEI7QUFDZDtBQUNtRDtBQUNqQjs7QUFFM0Q7QUFDQSx5QkFBeUIseUVBQWtCO0FBQzNDO0FBQ0EsT0FBTywyREFBaUI7QUFDeEIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxtQkFBbUIsZ0JBQWdCO0FBQ25DLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQixFQUFFLGtFQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsMEJBQTBCLHlFQUFrQjtBQUM1QztBQUNBO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGVBQWUsdUNBQVEsVUFBVSxvRUFBb0U7QUFDckcsWUFBWSxzRkFBc0I7QUFDbEMsV0FBVyx1Q0FBUTtBQUNuQixVQUFVLHVDQUFRO0FBQ2xCLFVBQVUsdUNBQVE7QUFDbEIsZ0JBQWdCLHVDQUFRO0FBQ3hCLGlCQUFpQix1Q0FBUTtBQUN6QixXQUFXLHNDQUFPLENBQUMsdUNBQVE7QUFDM0IsR0FBRztBQUNILGlCQUFpQix3Q0FBUztBQUMxQixVQUFVLHNDQUFPLENBQUMsdUNBQVEsV0FBVywrREFBK0Q7QUFDcEcsb0JBQW9CLHVDQUFRLFVBQVUsb0ZBQW9GO0FBQzFILG1CQUFtQix3Q0FBUyxVQUFVLDRHQUE0RztBQUNsSixrQkFBa0IsdUNBQVEsQ0FBQyx1Q0FBUSxJQUFJLG9DQUFLO0FBQzVDLEVBQUU7QUFDRixPQUFPLDJEQUFpQjtBQUN4QixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGVBQWU7QUFDZixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLDJCQUEyQjtBQUMvSCxZQUFZLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDJCQUEyQjtBQUMxRyxhQUFhLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDdkY7QUFDQSxVQUFVLGVBQWU7QUFDekI7QUFDQSxnREFBZ0QsMkJBQTJCO0FBQzNFLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdURBQXVELDJCQUEyQjtBQUNsRixhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiwwQkFBMEI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELDJCQUEyQjtBQUMvRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQix1QkFBdUI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw4TUFBOE0saURBQVEsbUJBQW1CLHFEQUFxRDtBQUM5UiwrSUFBK0ksaURBQVEsbUJBQW1CLDhEQUE4RDtBQUN4TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKLGFBQWEsaURBQVEseUJBQXlCLDBEQUEwRDtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQkFBcUIsZ0VBQWE7QUFDbEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLFlBQVksWUFBWTtBQUM1RDtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Qsc0JBQXNCLHlFQUFrQjtBQUN4QztBQUNBLE9BQU8sdUNBQVE7QUFDZixjQUFjLHVDQUFRO0FBQ3RCLGFBQWEsdUNBQVE7QUFDckIsRUFBRTtBQUNGLE9BQU8sZ0VBQXNCO0FBQzdCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsd0JBQXdCO0FBQ2pDO0FBQ0EseUdBQXlHLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQ0FBZ0M7QUFDNUw7QUFDQSw4QkFBOEIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNyRztBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCx1QkFBdUIseUVBQWtCO0FBQ3pDO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGNBQWMsdUNBQVEsVUFBVSx1REFBdUQ7QUFDdkYsYUFBYSx1Q0FBUSxVQUFVLGlFQUFpRTtBQUNoRyxVQUFVLHVDQUFRLFVBQVUsd0RBQXdEO0FBQ3BGLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDLHFCQUFxQixnQkFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVU7QUFDVjtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsZ0NBQWdDO0FBQ3pDO0FBQ0EsdUJBQXVCLCtEQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLG9CQUFvQjtBQUM3SiwyQkFBMkIsNEVBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpREFBUSxrQkFBa0IsOEJBQThCO0FBQ2pGO0FBQ0EsMEJBQTBCLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxhQUFhO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG9FQUFpQjtBQUNqRDtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0Esd0JBQXdCLCtEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELDRFQUFnQjtBQUM5RTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0RBQWdELG9FQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRCxxQkFBcUIseUVBQWtCO0FBQ3ZDO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGNBQWMsdUNBQVEsVUFBVSx1REFBdUQ7QUFDdkYsYUFBYSx1Q0FBUSxVQUFVLGlFQUFpRTtBQUNoRyxVQUFVLHVDQUFRLFVBQVUsd0RBQXdEO0FBQ3BGLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDLHFCQUFxQixnQkFBZ0I7QUFDckMsc0JBQXNCLGdCQUFnQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVU7QUFDVjtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsZ0NBQWdDO0FBQ3pDO0FBQ0EsdUJBQXVCLCtEQUFpQjtBQUN4QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLGtCQUFrQixpREFBaUQ7QUFDM0c7QUFDQSwwQkFBMEIsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLGFBQWE7QUFDbEcsNkNBQTZDLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxxQ0FBcUM7QUFDN0k7QUFDQSwyQkFBMkIsNEVBQWdCO0FBQzNDO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsa0JBQWtCLG9DQUFvQztBQUM5RjtBQUNBLHNDQUFzQyxvRUFBaUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLHVCQUF1QiwrREFBWTtBQUNuQyx3QkFBd0IsK0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSEFBcUgsNEVBQWdCO0FBQ3JJO0FBQ0Esc0JBQXNCLCtEQUFZO0FBQ2xDLHVCQUF1QiwrREFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNILFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRCwrQkFBK0IseUNBQVUsQ0FBQyx1Q0FBUSxHQUFHLFdBQVcsdUNBQVEsVUFBVSxnRkFBZ0YsY0FBYztBQUNoTCxvQkFBb0IseUVBQWtCO0FBQ3RDO0FBQ0EsT0FBTywyREFBaUI7QUFDeEIsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWUsZ0JBQWdCO0FBQy9CLGdCQUFnQixnQkFBZ0I7QUFDaEMsZ0JBQWdCLGdCQUFnQjtBQUNoQyx3QkFBd0I7QUFDeEIsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RUFBZ0I7QUFDN0M7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNuSTtBQUNBLDBCQUEwQixpREFBUSw0QkFBNEIseUNBQXlDLG9CQUFvQiwyQkFBMkI7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysb0NBQW9DLGlEQUFRLGtCQUFrQixtQ0FBbUM7QUFDakc7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDtBQUN5RztBQUN6RyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxhY2NvdW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZUFjY291bnRPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWNjb3VudENvb2tpZSwgc2V0QWNjb3VudENvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IGRlY3J5cHRPQXV0aFRva2VuLCBzZXRUb2tlblV0aWwgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZnJlc2hTZXNzaW9uTWlkZGxld2FyZSwgZ2V0U2Vzc2lvbkZyb21DdHgsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvc29jaWFsLXByb3ZpZGVyc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvYWNjb3VudC50c1xuY29uc3QgbGlzdFVzZXJBY2NvdW50cyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9saXN0LWFjY291bnRzXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJsaXN0VXNlckFjY291bnRzXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgYWNjb3VudHMgbGlua2VkIHRvIHRoZSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRhY2NvdW50SWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0dXNlcklkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHNjb3Blczoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdFx0XHRcdGl0ZW1zOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwicHJvdmlkZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VySWRcIixcblx0XHRcdFx0XHRcdFwic2NvcGVzXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGMpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGMuY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhY2NvdW50cyA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCk7XG5cdHJldHVybiBjLmpzb24oYWNjb3VudHMubWFwKChhKSA9PiB7XG5cdFx0Y29uc3QgeyBzY29wZSwgLi4ucGFyc2VkIH0gPSBwYXJzZUFjY291bnRPdXRwdXQoYy5jb250ZXh0Lm9wdGlvbnMsIGEpO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5wYXJzZWQsXG5cdFx0XHRzY29wZXM6IHNjb3BlPy5zcGxpdChcIixcIikgfHwgW11cblx0XHR9O1xuXHR9KSk7XG59KTtcbmNvbnN0IGxpbmtTb2NpYWxBY2NvdW50ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2xpbmstc29jaWFsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciB0aGUgdXNlciBoYXMgc2lnbmVkIGluXCIgfSkub3B0aW9uYWwoKSxcblx0XHRwcm92aWRlcjogU29jaWFsUHJvdmlkZXJMaXN0RW51bSxcblx0XHRpZFRva2VuOiB6Lm9iamVjdCh7XG5cdFx0XHR0b2tlbjogei5zdHJpbmcoKSxcblx0XHRcdG5vbmNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRhY2Nlc3NUb2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKVxuXHRcdH0pLm9wdGlvbmFsKCksXG5cdFx0cmVxdWVzdFNpZ25VcDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcblx0XHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFkZGl0aW9uYWwgc2NvcGVzIHRvIHJlcXVlc3QgZnJvbSB0aGUgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGVycm9yQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gaWYgdGhlcmUgaXMgYW4gZXJyb3IgZHVyaW5nIHRoZSBsaW5rIHByb2Nlc3NcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGRpc2FibGVSZWRpcmVjdDogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgYXV0b21hdGljIHJlZGlyZWN0aW9uIHRvIHRoZSBwcm92aWRlci4gVXNlZnVsIGZvciBoYW5kbGluZyB0aGUgcmVkaXJlY3Rpb24geW91cnNlbGZcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGFkZGl0aW9uYWxEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJMaW5rIGEgc29jaWFsIGFjY291bnQgdG8gdGhlIHVzZXJcIixcblx0XHRvcGVyYXRpb25JZDogXCJsaW5rU29jaWFsQWNjb3VudFwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXJsOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGF1dGhvcml6YXRpb24gVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlZGlyZWN0OiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgdXNlciBzaG91bGQgYmUgcmVkaXJlY3RlZCB0byB0aGUgYXV0aG9yaXphdGlvbiBVUkxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInJlZGlyZWN0XCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjLmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgcHJvdmlkZXIgPSBjLmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IGMuYm9keS5wcm92aWRlcik7XG5cdGlmICghcHJvdmlkZXIpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgbm90IGZvdW5kLiBNYWtlIHN1cmUgdG8gYWRkIHRoZSBwcm92aWRlciBpbiB5b3VyIGF1dGggY29uZmlnXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBST1ZJREVSX05PVF9GT1VORCB9KTtcblx0fVxuXHRpZiAoYy5ib2R5LmlkVG9rZW4pIHtcblx0XHRpZiAoIXByb3ZpZGVyLnZlcmlmeUlkVG9rZW4pIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBkb2VzIG5vdCBzdXBwb3J0IGlkIHRva2VuIHZlcmlmaWNhdGlvblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklEX1RPS0VOX05PVF9TVVBQT1JURUQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IHsgdG9rZW4sIG5vbmNlIH0gPSBjLmJvZHkuaWRUb2tlbjtcblx0XHRpZiAoIWF3YWl0IHByb3ZpZGVyLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkludmFsaWQgaWQgdG9rZW5cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRcdH1cblx0XHRjb25zdCBsaW5raW5nVXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuXG5cdFx0fSk7XG5cdFx0aWYgKCFsaW5raW5nVXNlckluZm8gfHwgIWxpbmtpbmdVc2VySW5mbz8udXNlcikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBnZXQgdXNlciBpbmZvXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9VU0VSX0lORk8gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IGxpbmtpbmdVc2VySWQgPSBTdHJpbmcobGlua2luZ1VzZXJJbmZvLnVzZXIuaWQpO1xuXHRcdGlmICghbGlua2luZ1VzZXJJbmZvLnVzZXIuZW1haWwpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfRU1BSUxfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRpZiAoKGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXIuaWQgJiYgYS5hY2NvdW50SWQgPT09IGxpbmtpbmdVc2VySWQpKSByZXR1cm4gYy5qc29uKHtcblx0XHRcdHVybDogXCJcIixcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHJlZGlyZWN0OiBmYWxzZVxuXHRcdH0pO1xuXHRcdGlmICghKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzKT8uaW5jbHVkZXMocHJvdmlkZXIuaWQpICYmICFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbFZlcmlmaWVkIHx8IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBsaW5rZWQgLSBsaW5raW5nIG5vdCBhbGxvd2VkXCIgfSk7XG5cdFx0aWYgKGxpbmtpbmdVc2VySW5mby51c2VyLmVtYWlsICE9PSBzZXNzaW9uLnVzZXIuZW1haWwgJiYgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIGRpZmZlcmVudCBlbWFpbHMgbm90IGFsbG93ZWRcIiB9KTtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IGxpbmtpbmdVc2VySWQsXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdFx0aWRUb2tlbjogdG9rZW4sXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuLFxuXHRcdFx0XHRzY29wZTogYy5ib2R5LmlkVG9rZW4uc2NvcGVzPy5qb2luKFwiLFwiKVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJFWFBFQ1RBVElPTl9GQUlMRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIHVuYWJsZSB0byBjcmVhdGUgYWNjb3VudFwiIH0pO1xuXHRcdH1cblx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnVwZGF0ZVVzZXJJbmZvT25MaW5rID09PSB0cnVlKSB0cnkge1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKHNlc3Npb24udXNlci5pZCwge1xuXHRcdFx0XHRuYW1lOiBsaW5raW5nVXNlckluZm8udXNlcj8ubmFtZSxcblx0XHRcdFx0aW1hZ2U6IGxpbmtpbmdVc2VySW5mby51c2VyPy5pbWFnZVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiQ291bGQgbm90IHVwZGF0ZSB1c2VyIC0gXCIgKyBlLnRvU3RyaW5nKCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gYy5qc29uKHtcblx0XHRcdHVybDogXCJcIixcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHJlZGlyZWN0OiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IHN0YXRlID0gYXdhaXQgZ2VuZXJhdGVTdGF0ZShjLCB7XG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0ZW1haWw6IHNlc3Npb24udXNlci5lbWFpbFxuXHR9LCBjLmJvZHkuYWRkaXRpb25hbERhdGEpO1xuXHRjb25zdCB1cmwgPSBhd2FpdCBwcm92aWRlci5jcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRzdGF0ZTogc3RhdGUuc3RhdGUsXG5cdFx0Y29kZVZlcmlmaWVyOiBzdGF0ZS5jb2RlVmVyaWZpZXIsXG5cdFx0cmVkaXJlY3RVUkk6IGAke2MuY29udGV4dC5iYXNlVVJMfS9jYWxsYmFjay8ke3Byb3ZpZGVyLmlkfWAsXG5cdFx0c2NvcGVzOiBjLmJvZHkuc2NvcGVzXG5cdH0pO1xuXHRpZiAoIWMuYm9keS5kaXNhYmxlUmVkaXJlY3QpIGMuc2V0SGVhZGVyKFwiTG9jYXRpb25cIiwgdXJsLnRvU3RyaW5nKCkpO1xuXHRyZXR1cm4gYy5qc29uKHtcblx0XHR1cmw6IHVybC50b1N0cmluZygpLFxuXHRcdHJlZGlyZWN0OiAhYy5ib2R5LmRpc2FibGVSZWRpcmVjdFxuXHR9KTtcbn0pO1xuY29uc3QgdW5saW5rQWNjb3VudCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi91bmxpbmstYWNjb3VudFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRwcm92aWRlcklkOiB6LnN0cmluZygpLFxuXHRcdGFjY291bnRJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtmcmVzaFNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlVubGluayBhbiBhY2NvdW50XCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkIH0gPSBjdHguYm9keTtcblx0Y29uc3QgYWNjb3VudHMgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCk7XG5cdGlmIChhY2NvdW50cy5sZW5ndGggPT09IDEgJiYgIWN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93VW5saW5raW5nQWxsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX1VOTElOS19MQVNUX0FDQ09VTlQgfSk7XG5cdGNvbnN0IGFjY291bnRFeGlzdCA9IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnRJZCA/IGFjY291bnQuYWNjb3VudElkID09PSBhY2NvdW50SWQgJiYgYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjb3VudC5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFhY2NvdW50RXhpc3QpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZUFjY291bnQoYWNjb3VudEV4aXN0LmlkKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5jb25zdCBnZXRBY2Nlc3NUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9nZXQtYWNjZXNzLXRva2VuXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBJRCBmb3IgdGhlIE9BdXRoIHByb3ZpZGVyXCIgfSksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgYWNjb3VudCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZnJlc2ggdG9rZW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHVzZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBhY2NvdW50XCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkdldCBhIHZhbGlkIGFjY2VzcyB0b2tlbiwgZG9pbmcgYSByZWZyZXNoIGlmIG5lZWRlZFwiLFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0MjAwOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkEgVmFsaWQgYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR0b2tlblR5cGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0aWRUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcmVmcmVzaCB0b2tlbiBvciBwcm92aWRlciBjb25maWd1cmF0aW9uXCIgfVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkLCB1c2VySWQgfSA9IGN0eC5ib2R5IHx8IHt9O1xuXHRjb25zdCByZXEgPSBjdHgucmVxdWVzdDtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmIChyZXEgJiYgIXNlc3Npb24pIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3QgcmVzb2x2ZWRVc2VySWQgPSBzZXNzaW9uPy51c2VyPy5pZCB8fCB1c2VySWQ7XG5cdGlmICghcmVzb2x2ZWRVc2VySWQpIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0aWYgKCFjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gaXMgbm90IHN1cHBvcnRlZC5gIH0pO1xuXHRjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IGdldEFjY291bnRDb29raWUoY3R4KTtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkICYmICghYWNjb3VudElkIHx8IGFjY291bnREYXRhLmlkID09PSBhY2NvdW50SWQpKSBhY2NvdW50ID0gYWNjb3VudERhdGE7XG5cdGVsc2UgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHJlc29sdmVkVXNlcklkKSkuZmluZCgoYWNjKSA9PiBhY2NvdW50SWQgPyBhY2MuaWQgPT09IGFjY291bnRJZCAmJiBhY2MucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCA6IGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFhY2NvdW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgcHJvdmlkZXIgPSBjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCk7XG5cdGlmICghcHJvdmlkZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gbm90IGZvdW5kLmAgfSk7XG5cdHRyeSB7XG5cdFx0bGV0IG5ld1Rva2VucyA9IG51bGw7XG5cdFx0Y29uc3QgYWNjZXNzVG9rZW5FeHBpcmVkID0gYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCAmJiBuZXcgRGF0ZShhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KS5nZXRUaW1lKCkgLSBEYXRlLm5vdygpIDwgNWUzO1xuXHRcdGlmIChhY2NvdW50LnJlZnJlc2hUb2tlbiAmJiBhY2Nlc3NUb2tlbkV4cGlyZWQgJiYgcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuKSB7XG5cdFx0XHRjb25zdCByZWZyZXNoVG9rZW4kMSA9IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKGFjY291bnQucmVmcmVzaFRva2VuLCBjdHguY29udGV4dCk7XG5cdFx0XHRuZXdUb2tlbnMgPSBhd2FpdCBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuJDEpO1xuXHRcdFx0Y29uc3QgdXBkYXRlZERhdGEgPSB7XG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwobmV3VG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBuZXdUb2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKG5ld1Rva2Vucy5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiBuZXdUb2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0XG5cdFx0XHR9O1xuXHRcdFx0bGV0IHVwZGF0ZWRBY2NvdW50ID0gbnVsbDtcblx0XHRcdGlmIChhY2NvdW50LmlkKSB1cGRhdGVkQWNjb3VudCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGFjY291bnQuaWQsIHVwZGF0ZWREYXRhKTtcblx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkgYXdhaXQgc2V0QWNjb3VudENvb2tpZShjdHgsIHtcblx0XHRcdFx0Li4uYWNjb3VudCxcblx0XHRcdFx0Li4udXBkYXRlZEFjY291bnQgPz8gdXBkYXRlZERhdGFcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZXNBdCA9ICgoKSA9PiB7XG5cdFx0XHRpZiAobmV3VG9rZW5zPy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBEYXRlKG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCk7XG5cdFx0XHRcdHJldHVybiBuZXdUb2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAoYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQgPT09IFwic3RyaW5nXCIpIHJldHVybiBuZXcgRGF0ZShhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KTtcblx0XHRcdFx0cmV0dXJuIGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQ7XG5cdFx0XHR9XG5cdFx0fSkoKTtcblx0XHRjb25zdCB0b2tlbnMgPSB7XG5cdFx0XHRhY2Nlc3NUb2tlbjogbmV3VG9rZW5zPy5hY2Nlc3NUb2tlbiA/PyBhd2FpdCBkZWNyeXB0T0F1dGhUb2tlbihhY2NvdW50LmFjY2Vzc1Rva2VuID8/IFwiXCIsIGN0eC5jb250ZXh0KSxcblx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0c2NvcGVzOiBhY2NvdW50LnNjb3BlPy5zcGxpdChcIixcIikgPz8gW10sXG5cdFx0XHRpZFRva2VuOiBuZXdUb2tlbnM/LmlkVG9rZW4gPz8gYWNjb3VudC5pZFRva2VuID8/IHZvaWQgMFxuXHRcdH07XG5cdFx0cmV0dXJuIGN0eC5qc29uKHRva2Vucyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IGEgdmFsaWQgYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KTtcblx0fVxufSk7XG5jb25zdCByZWZyZXNoVG9rZW4gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmVmcmVzaC10b2tlblwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRwcm92aWRlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcHJvdmlkZXIgSUQgZm9yIHRoZSBPQXV0aCBwcm92aWRlclwiIH0pLFxuXHRcdGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGFjY291bnQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWZyZXNoIHRva2VuXCIgfSkub3B0aW9uYWwoKSxcblx0XHR1c2VySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWNjb3VudFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgYSByZWZyZXNoIHRva2VuXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHQyMDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHRva2VuVHlwZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRpZFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdDQwMDogeyBkZXNjcmlwdGlvbjogXCJJbnZhbGlkIHJlZnJlc2ggdG9rZW4gb3IgcHJvdmlkZXIgY29uZmlndXJhdGlvblwiIH1cblx0XHR9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHByb3ZpZGVySWQsIGFjY291bnRJZCwgdXNlcklkIH0gPSBjdHguYm9keTtcblx0Y29uc3QgcmVxID0gY3R4LnJlcXVlc3Q7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAocmVxICYmICFzZXNzaW9uKSB0aHJvdyBjdHguZXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdGNvbnN0IHJlc29sdmVkVXNlcklkID0gc2Vzc2lvbj8udXNlcj8uaWQgfHwgdXNlcklkO1xuXHRpZiAoIXJlc29sdmVkVXNlcklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGBFaXRoZXIgdXNlcklkIG9yIHNlc3Npb24gaXMgcmVxdWlyZWRgIH0pO1xuXHRjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBub3QgZm91bmQuYCB9KTtcblx0aWYgKCFwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyICR7cHJvdmlkZXJJZH0gZG9lcyBub3Qgc3VwcG9ydCB0b2tlbiByZWZyZXNoaW5nLmAgfSk7XG5cdGxldCBhY2NvdW50ID0gdm9pZCAwO1xuXHRjb25zdCBhY2NvdW50RGF0YSA9IGF3YWl0IGdldEFjY291bnRDb29raWUoY3R4KTtcblx0aWYgKGFjY291bnREYXRhICYmICghcHJvdmlkZXJJZCB8fCBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YT8ucHJvdmlkZXJJZCkpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0ZWxzZSBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMocmVzb2x2ZWRVc2VySWQpKS5maW5kKChhY2MpID0+IGFjY291bnRJZCA/IGFjYy5pZCA9PT0gYWNjb3VudElkICYmIGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xuXHRsZXQgcmVmcmVzaFRva2VuJDEgPSB2b2lkIDA7XG5cdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkKSByZWZyZXNoVG9rZW4kMSA9IGFjY291bnREYXRhLnJlZnJlc2hUb2tlbiA/PyB2b2lkIDA7XG5cdGVsc2UgcmVmcmVzaFRva2VuJDEgPSBhY2NvdW50LnJlZnJlc2hUb2tlbiA/PyB2b2lkIDA7XG5cdGlmICghcmVmcmVzaFRva2VuJDEpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJSZWZyZXNoIHRva2VuIG5vdCBmb3VuZFwiIH0pO1xuXHR0cnkge1xuXHRcdGNvbnN0IGRlY3J5cHRlZFJlZnJlc2hUb2tlbiA9IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKHJlZnJlc2hUb2tlbiQxLCBjdHguY29udGV4dCk7XG5cdFx0Y29uc3QgdG9rZW5zID0gYXdhaXQgcHJvdmlkZXIucmVmcmVzaEFjY2Vzc1Rva2VuKGRlY3J5cHRlZFJlZnJlc2hUb2tlbik7XG5cdFx0aWYgKGFjY291bnQuaWQpIHtcblx0XHRcdGNvbnN0IHVwZGF0ZURhdGEgPSB7XG5cdFx0XHRcdC4uLmFjY291bnQgfHwge30sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIikgfHwgYWNjb3VudC5zY29wZSxcblx0XHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudC5pZFRva2VuXG5cdFx0XHR9O1xuXHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgdXBkYXRlRGF0YSk7XG5cdFx0fVxuXHRcdGlmIChhY2NvdW50RGF0YSAmJiBwcm92aWRlcklkID09PSBhY2NvdW50RGF0YS5wcm92aWRlcklkICYmIGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGN0eCwge1xuXHRcdFx0Li4uYWNjb3VudERhdGEsXG5cdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50RGF0YS5zY29wZSxcblx0XHRcdGlkVG9rZW46IHRva2Vucy5pZFRva2VuIHx8IGFjY291bnREYXRhLmlkVG9rZW5cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0YWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogdG9rZW5zLnJlZnJlc2hUb2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB0b2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIikgfHwgYWNjb3VudC5zY29wZSxcblx0XHRcdGlkVG9rZW46IHRva2Vucy5pZFRva2VuIHx8IGFjY291bnQuaWRUb2tlbixcblx0XHRcdHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJJZCxcblx0XHRcdGFjY291bnRJZDogYWNjb3VudC5hY2NvdW50SWRcblx0XHR9KTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byByZWZyZXNoIGFjY2VzcyB0b2tlblwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSk7XG5cdH1cbn0pO1xuY29uc3QgYWNjb3VudEluZm9RdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3QoeyBhY2NvdW50SWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBnaXZlbiBhY2NvdW50IGlkIGZvciB3aGljaCB0byBnZXQgdGhlIGFjY291bnQgaW5mb1wiIH0pLm9wdGlvbmFsKCkgfSkpO1xuY29uc3QgYWNjb3VudEluZm8gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYWNjb3VudC1pbmZvXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGFjY291bnQgaW5mbyBwcm92aWRlZCBieSB0aGUgcHJvdmlkZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0bmFtZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0aW1hZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7IHR5cGU6IFwiYm9vbGVhblwiIH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1wiaWRcIiwgXCJlbWFpbFZlcmlmaWVkXCJdXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge30sXG5cdFx0XHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJkYXRhXCJdLFxuXHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2Vcblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfSxcblx0cXVlcnk6IGFjY291bnRJbmZvUXVlcnlTY2hlbWFcbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgcHJvdmlkZWRBY2NvdW50SWQgPSBjdHgucXVlcnk/LmFjY291bnRJZDtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGlmICghcHJvdmlkZWRBY2NvdW50SWQpIHtcblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIHtcblx0XHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRcdFx0aWYgKGFjY291bnREYXRhKSBhY2NvdW50ID0gYWNjb3VudERhdGE7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50KHByb3ZpZGVkQWNjb3VudElkKTtcblx0XHRpZiAoYWNjb3VudERhdGEpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0fVxuXHRpZiAoIWFjY291bnQgfHwgYWNjb3VudC51c2VySWQgIT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XG5cdGNvbnN0IHByb3ZpZGVyID0gY3R4LmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IGFjY291bnQucHJvdmlkZXJJZCk7XG5cdGlmICghcHJvdmlkZXIpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IGBQcm92aWRlciBhY2NvdW50IHByb3ZpZGVyIGlzICR7YWNjb3VudC5wcm92aWRlcklkfSBidXQgaXQgaXMgbm90IGNvbmZpZ3VyZWRgIH0pO1xuXHRjb25zdCB0b2tlbnMgPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbih7XG5cdFx0Li4uY3R4LFxuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keToge1xuXHRcdFx0YWNjb3VudElkOiBhY2NvdW50LmlkLFxuXHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkXG5cdFx0fSxcblx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZSxcblx0XHRyZXR1cm5TdGF0dXM6IGZhbHNlXG5cdH0pO1xuXHRpZiAoIXRva2Vucy5hY2Nlc3NUb2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY2VzcyB0b2tlbiBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgaW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcblx0XHQuLi50b2tlbnMsXG5cdFx0YWNjZXNzVG9rZW46IHRva2Vucy5hY2Nlc3NUb2tlblxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKGluZm8pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2NvdW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/callback.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callbackOAuth: () => (/* binding */ callbackOAuth)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/callback.ts\nconst schema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tdevice_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tstate: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tuser: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()\n});\nconst callbackOAuth = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/callback/:id\", {\n\tmethod: [\"GET\", \"POST\"],\n\toperationId: \"handleOAuthCallback\",\n\tbody: schema.optional(),\n\tquery: schema.optional(),\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__.HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t}\n}, async (c) => {\n\tlet queryOrBody;\n\tconst defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (c.method === \"POST\") {\n\t\tconst postData = c.body ? schema.parse(c.body) : {};\n\t\tconst queryData = c.query ? schema.parse(c.query) : {};\n\t\tconst mergedData = schema.parse({\n\t\t\t...postData,\n\t\t\t...queryData\n\t\t});\n\t\tconst params = new URLSearchParams();\n\t\tfor (const [key, value] of Object.entries(mergedData)) if (value !== void 0 && value !== null) params.set(key, String(value));\n\t\tconst redirectURL = `${c.context.baseURL}/callback/${c.params.id}?${params.toString()}`;\n\t\tthrow c.redirect(redirectURL);\n\t}\n\ttry {\n\t\tif (c.method === \"GET\") queryOrBody = schema.parse(c.query);\n\t\telse if (c.method === \"POST\") queryOrBody = schema.parse(c.body);\n\t\telse throw new Error(\"Unsupported method\");\n\t} catch (e) {\n\t\tc.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n\t\tthrow c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n\t}\n\tconst { code, error, state, error_description, device_id, user: userData } = queryOrBody;\n\tif (!state) {\n\t\tc.context.logger.error(\"State not found\", error);\n\t\tconst url = `${defaultErrorURL}${defaultErrorURL.includes(\"?\") ? \"&\" : \"?\"}state=state_not_found`;\n\t\tthrow c.redirect(url);\n\t}\n\tconst { codeVerifier, callbackURL, link, errorURL, newUserURL, requestSignUp } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState)(c);\n\tfunction redirectOnError(error$1, description) {\n\t\tconst baseURL = errorURL ?? defaultErrorURL;\n\t\tconst params = new URLSearchParams({ error: error$1 });\n\t\tif (description) params.set(\"error_description\", description);\n\t\tconst url = `${baseURL}${baseURL.includes(\"?\") ? \"&\" : \"?\"}${params.toString()}`;\n\t\tthrow c.redirect(url);\n\t}\n\tif (error) redirectOnError(error, error_description);\n\tif (!code) {\n\t\tc.context.logger.error(\"Code not found\");\n\t\tthrow redirectOnError(\"no_code\");\n\t}\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.params.id);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Oauth provider with id\", c.params.id, \"not found\");\n\t\tthrow redirectOnError(\"oauth_provider_not_found\");\n\t}\n\tlet tokens;\n\ttry {\n\t\ttokens = await provider.validateAuthorizationCode({\n\t\t\tcode,\n\t\t\tcodeVerifier,\n\t\t\tdeviceId: device_id,\n\t\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`\n\t\t});\n\t} catch (e) {\n\t\tc.context.logger.error(\"\", e);\n\t\tthrow redirectOnError(\"invalid_code\");\n\t}\n\tif (!tokens) throw redirectOnError(\"invalid_code\");\n\tconst parsedUserData = userData ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(userData) : null;\n\tconst userInfo = await provider.getUserInfo({\n\t\t...tokens,\n\t\tuser: parsedUserData ?? void 0\n\t}).then((res) => res?.user);\n\tif (!userInfo) {\n\t\tc.context.logger.error(\"Unable to get user info\");\n\t\treturn redirectOnError(\"unable_to_get_user_info\");\n\t}\n\tif (!callbackURL) {\n\t\tc.context.logger.error(\"No callback URL found\");\n\t\tthrow redirectOnError(\"no_callback_url\");\n\t}\n\tif (link) {\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\tc.context.logger.error(\"Unable to link account - untrusted provider\");\n\t\t\treturn redirectOnError(\"unable_to_link_account\");\n\t\t}\n\t\tif (userInfo.email !== link.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await c.context.internalAdapter.findAccount(String(userInfo.id));\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId.toString() !== link.userId.toString()) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait c.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await c.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: provider.id,\n\t\t\taccountId: String(userInfo.id),\n\t\t\t...tokens,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow c.redirect(toRedirectTo$1);\n\t}\n\tif (!userInfo.email) {\n\t\tc.context.logger.error(\"Provider did not return email. This could be due to misconfiguration in the provider settings.\");\n\t\treturn redirectOnError(\"email_not_found\");\n\t}\n\tconst accountData = {\n\t\tproviderId: provider.id,\n\t\taccountId: String(userInfo.id),\n\t\t...tokens,\n\t\tscope: tokens.scopes?.join(\",\")\n\t};\n\tconst result = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__.handleOAuthUserInfo)(c, {\n\t\tuserInfo: {\n\t\t\t...userInfo,\n\t\t\tid: String(userInfo.id),\n\t\t\temail: userInfo.email,\n\t\t\tname: userInfo.name || userInfo.email\n\t\t},\n\t\taccount: accountData,\n\t\tcallbackURL,\n\t\tdisableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n\t\toverrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n\t});\n\tif (result.error) {\n\t\tc.context.logger.error(result.error.split(\" \").join(\"_\"));\n\t\treturn redirectOnError(result.error.split(\" \").join(\"_\"));\n\t}\n\tconst { session, user } = result.data;\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(c, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow c.redirect(toRedirectTo);\n});\n\n//#endregion\n\n//# sourceMappingURL=callback.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2NhbGxiYWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDUDtBQUNFO0FBQ2M7QUFDTjtBQUNOO0FBQy9CO0FBQ2tDOztBQUUzRDtBQUNBLGVBQWUsdUNBQVE7QUFDdkIsT0FBTyx1Q0FBUTtBQUNmLFFBQVEsdUNBQVE7QUFDaEIsWUFBWSx1Q0FBUTtBQUNwQixvQkFBb0IsdUNBQVE7QUFDNUIsUUFBUSx1Q0FBUTtBQUNoQixPQUFPLHVDQUFRO0FBQ2YsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssbUVBQWE7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNFQUFzRSxrQkFBa0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCLFlBQVksWUFBWSxHQUFHLGtCQUFrQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQkFBc0IsZ0JBQWdCO0FBQ3RDO0FBQ0EsU0FBUyxtRUFBbUU7QUFDNUU7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0IsRUFBRSwwQ0FBMEM7QUFDN0U7QUFDQTtBQUNBLFNBQVMsdUVBQXVFLFFBQVEsNkRBQVU7QUFDbEc7QUFDQTtBQUNBLHVDQUF1QyxnQkFBZ0I7QUFDdkQ7QUFDQSxpQkFBaUIsUUFBUSxFQUFFLGtDQUFrQyxFQUFFLGtCQUFrQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCLFlBQVksWUFBWTtBQUM3RCxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHNFQUFhO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0RBQVk7QUFDbkMsd0JBQXdCLCtEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtEQUFZO0FBQ2xDLHVCQUF1QiwrREFBWTtBQUNuQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2RUFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCLE9BQU8sb0VBQWdCO0FBQ3ZCO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcY2FsbGJhY2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgc2V0VG9rZW5VdGlsIH0gZnJvbSBcIi4uLy4uL29hdXRoMi91dGlscy5tanNcIjtcbmltcG9ydCB7IGhhbmRsZU9BdXRoVXNlckluZm8gfSBmcm9tIFwiLi4vLi4vb2F1dGgyL2xpbmstYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvY2FsbGJhY2sudHNcbmNvbnN0IHNjaGVtYSA9IHoub2JqZWN0KHtcblx0Y29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRkZXZpY2VfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXJyb3JfZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0c3RhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0dXNlcjogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IGNhbGxiYWNrT0F1dGggPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2FsbGJhY2svOmlkXCIsIHtcblx0bWV0aG9kOiBbXCJHRVRcIiwgXCJQT1NUXCJdLFxuXHRvcGVyYXRpb25JZDogXCJoYW5kbGVPQXV0aENhbGxiYWNrXCIsXG5cdGJvZHk6IHNjaGVtYS5vcHRpb25hbCgpLFxuXHRxdWVyeTogc2NoZW1hLm9wdGlvbmFsKCksXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsIFwiYXBwbGljYXRpb24vanNvblwiXVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRsZXQgcXVlcnlPckJvZHk7XG5cdGNvbnN0IGRlZmF1bHRFcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdGlmIChjLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcblx0XHRjb25zdCBwb3N0RGF0YSA9IGMuYm9keSA/IHNjaGVtYS5wYXJzZShjLmJvZHkpIDoge307XG5cdFx0Y29uc3QgcXVlcnlEYXRhID0gYy5xdWVyeSA/IHNjaGVtYS5wYXJzZShjLnF1ZXJ5KSA6IHt9O1xuXHRcdGNvbnN0IG1lcmdlZERhdGEgPSBzY2hlbWEucGFyc2Uoe1xuXHRcdFx0Li4ucG9zdERhdGEsXG5cdFx0XHQuLi5xdWVyeURhdGFcblx0XHR9KTtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdFx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobWVyZ2VkRGF0YSkpIGlmICh2YWx1ZSAhPT0gdm9pZCAwICYmIHZhbHVlICE9PSBudWxsKSBwYXJhbXMuc2V0KGtleSwgU3RyaW5nKHZhbHVlKSk7XG5cdFx0Y29uc3QgcmVkaXJlY3RVUkwgPSBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtjLnBhcmFtcy5pZH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGMucmVkaXJlY3QocmVkaXJlY3RVUkwpO1xuXHR9XG5cdHRyeSB7XG5cdFx0aWYgKGMubWV0aG9kID09PSBcIkdFVFwiKSBxdWVyeU9yQm9keSA9IHNjaGVtYS5wYXJzZShjLnF1ZXJ5KTtcblx0XHRlbHNlIGlmIChjLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHF1ZXJ5T3JCb2R5ID0gc2NoZW1hLnBhcnNlKGMuYm9keSk7XG5cdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXRob2RcIik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5WQUxJRF9DQUxMQkFDS19SRVFVRVNUXCIsIGUpO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZGVmYXVsdEVycm9yVVJMfT9lcnJvcj1pbnZhbGlkX2NhbGxiYWNrX3JlcXVlc3RgKTtcblx0fVxuXHRjb25zdCB7IGNvZGUsIGVycm9yLCBzdGF0ZSwgZXJyb3JfZGVzY3JpcHRpb24sIGRldmljZV9pZCwgdXNlcjogdXNlckRhdGEgfSA9IHF1ZXJ5T3JCb2R5O1xuXHRpZiAoIXN0YXRlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlN0YXRlIG5vdCBmb3VuZFwiLCBlcnJvcik7XG5cdFx0Y29uc3QgdXJsID0gYCR7ZGVmYXVsdEVycm9yVVJMfSR7ZGVmYXVsdEVycm9yVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9c3RhdGU9c3RhdGVfbm90X2ZvdW5kYDtcblx0XHR0aHJvdyBjLnJlZGlyZWN0KHVybCk7XG5cdH1cblx0Y29uc3QgeyBjb2RlVmVyaWZpZXIsIGNhbGxiYWNrVVJMLCBsaW5rLCBlcnJvclVSTCwgbmV3VXNlclVSTCwgcmVxdWVzdFNpZ25VcCB9ID0gYXdhaXQgcGFyc2VTdGF0ZShjKTtcblx0ZnVuY3Rpb24gcmVkaXJlY3RPbkVycm9yKGVycm9yJDEsIGRlc2NyaXB0aW9uKSB7XG5cdFx0Y29uc3QgYmFzZVVSTCA9IGVycm9yVVJMID8/IGRlZmF1bHRFcnJvclVSTDtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZXJyb3I6IGVycm9yJDEgfSk7XG5cdFx0aWYgKGRlc2NyaXB0aW9uKSBwYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgZGVzY3JpcHRpb24pO1xuXHRcdGNvbnN0IHVybCA9IGAke2Jhc2VVUkx9JHtiYXNlVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGMucmVkaXJlY3QodXJsKTtcblx0fVxuXHRpZiAoZXJyb3IpIHJlZGlyZWN0T25FcnJvcihlcnJvciwgZXJyb3JfZGVzY3JpcHRpb24pO1xuXHRpZiAoIWNvZGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ29kZSBub3QgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibm9fY29kZVwiKTtcblx0fVxuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5wYXJhbXMuaWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIk9hdXRoIHByb3ZpZGVyIHdpdGggaWRcIiwgYy5wYXJhbXMuaWQsIFwibm90IGZvdW5kXCIpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcIm9hdXRoX3Byb3ZpZGVyX25vdF9mb3VuZFwiKTtcblx0fVxuXHRsZXQgdG9rZW5zO1xuXHR0cnkge1xuXHRcdHRva2VucyA9IGF3YWl0IHByb3ZpZGVyLnZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0Y29kZSxcblx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdGRldmljZUlkOiBkZXZpY2VfaWQsXG5cdFx0XHRyZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YFxuXHRcdH0pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlwiLCBlKTtcblx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJpbnZhbGlkX2NvZGVcIik7XG5cdH1cblx0aWYgKCF0b2tlbnMpIHRocm93IHJlZGlyZWN0T25FcnJvcihcImludmFsaWRfY29kZVwiKTtcblx0Y29uc3QgcGFyc2VkVXNlckRhdGEgPSB1c2VyRGF0YSA/IHNhZmVKU09OUGFyc2UodXNlckRhdGEpIDogbnVsbDtcblx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0Li4udG9rZW5zLFxuXHRcdHVzZXI6IHBhcnNlZFVzZXJEYXRhID8/IHZvaWQgMFxuXHR9KS50aGVuKChyZXMpID0+IHJlcz8udXNlcik7XG5cdGlmICghdXNlckluZm8pIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGdldCB1c2VyIGluZm9cIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYWJsZV90b19nZXRfdXNlcl9pbmZvXCIpO1xuXHR9XG5cdGlmICghY2FsbGJhY2tVUkwpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiTm8gY2FsbGJhY2sgVVJMIGZvdW5kXCIpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcIm5vX2NhbGxiYWNrX3VybFwiKTtcblx0fVxuXHRpZiAobGluaykge1xuXHRcdGlmICghKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzKT8uaW5jbHVkZXMocHJvdmlkZXIuaWQpICYmICF1c2VySW5mby5lbWFpbFZlcmlmaWVkIHx8IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBsaW5rIGFjY291bnQgLSB1bnRydXN0ZWQgcHJvdmlkZXJcIik7XG5cdFx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2xpbmtfYWNjb3VudFwiKTtcblx0XHR9XG5cdFx0aWYgKHVzZXJJbmZvLmVtYWlsICE9PSBsaW5rLmVtYWlsICYmIGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy5hbGxvd0RpZmZlcmVudEVtYWlscyAhPT0gdHJ1ZSkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImVtYWlsX2RvZXNuJ3RfbWF0Y2hcIik7XG5cdFx0Y29uc3QgZXhpc3RpbmdBY2NvdW50ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudChTdHJpbmcodXNlckluZm8uaWQpKTtcblx0XHRpZiAoZXhpc3RpbmdBY2NvdW50KSB7XG5cdFx0XHRpZiAoZXhpc3RpbmdBY2NvdW50LnVzZXJJZC50b1N0cmluZygpICE9PSBsaW5rLnVzZXJJZC50b1N0cmluZygpKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiYWNjb3VudF9hbHJlYWR5X2xpbmtlZF90b19kaWZmZXJlbnRfdXNlclwiKTtcblx0XHRcdGNvbnN0IHVwZGF0ZURhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoe1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB0b2tlbnMuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdFx0XHR9KS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB2b2lkIDApKTtcblx0XHRcdGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChleGlzdGluZ0FjY291bnQuaWQsIHVwZGF0ZURhdGEpO1xuXHRcdH0gZWxzZSBpZiAoIWF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0XHR1c2VySWQ6IGxpbmsudXNlcklkLFxuXHRcdFx0cHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG5cdFx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby5pZCksXG5cdFx0XHQuLi50b2tlbnMsXG5cdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIilcblx0XHR9KSkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYWJsZV90b19saW5rX2FjY291bnRcIik7XG5cdFx0bGV0IHRvUmVkaXJlY3RUbyQxO1xuXHRcdHRyeSB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMLnRvU3RyaW5nKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMO1xuXHRcdH1cblx0XHR0aHJvdyBjLnJlZGlyZWN0KHRvUmVkaXJlY3RUbyQxKTtcblx0fVxuXHRpZiAoIXVzZXJJbmZvLmVtYWlsKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRpZCBub3QgcmV0dXJuIGVtYWlsLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBtaXNjb25maWd1cmF0aW9uIGluIHRoZSBwcm92aWRlciBzZXR0aW5ncy5cIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImVtYWlsX25vdF9mb3VuZFwiKTtcblx0fVxuXHRjb25zdCBhY2NvdW50RGF0YSA9IHtcblx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby5pZCksXG5cdFx0Li4udG9rZW5zLFxuXHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuXHR9O1xuXHRjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVPQXV0aFVzZXJJbmZvKGMsIHtcblx0XHR1c2VySW5mbzoge1xuXHRcdFx0Li4udXNlckluZm8sXG5cdFx0XHRpZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbCxcblx0XHRcdG5hbWU6IHVzZXJJbmZvLm5hbWUgfHwgdXNlckluZm8uZW1haWxcblx0XHR9LFxuXHRcdGFjY291bnQ6IGFjY291bnREYXRhLFxuXHRcdGNhbGxiYWNrVVJMLFxuXHRcdGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhcmVxdWVzdFNpZ25VcCB8fCBwcm92aWRlci5vcHRpb25zPy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IHByb3ZpZGVyLm9wdGlvbnM/Lm92ZXJyaWRlVXNlckluZm9PblNpZ25JblxuXHR9KTtcblx0aWYgKHJlc3VsdC5lcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IocmVzdWx0LmVycm9yLnNwbGl0KFwiIFwiKS5qb2luKFwiX1wiKSk7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihyZXN1bHQuZXJyb3Iuc3BsaXQoXCIgXCIpLmpvaW4oXCJfXCIpKTtcblx0fVxuXHRjb25zdCB7IHNlc3Npb24sIHVzZXIgfSA9IHJlc3VsdC5kYXRhO1xuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIHtcblx0XHRzZXNzaW9uLFxuXHRcdHVzZXJcblx0fSk7XG5cdGxldCB0b1JlZGlyZWN0VG87XG5cdHRyeSB7XG5cdFx0dG9SZWRpcmVjdFRvID0gKHJlc3VsdC5pc1JlZ2lzdGVyID8gbmV3VXNlclVSTCB8fCBjYWxsYmFja1VSTCA6IGNhbGxiYWNrVVJMKS50b1N0cmluZygpO1xuXHR9IGNhdGNoIHtcblx0XHR0b1JlZGlyZWN0VG8gPSByZXN1bHQuaXNSZWdpc3RlciA/IG5ld1VzZXJVUkwgfHwgY2FsbGJhY2tVUkwgOiBjYWxsYmFja1VSTDtcblx0fVxuXHR0aHJvdyBjLnJlZGlyZWN0KHRvUmVkaXJlY3RUbyk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjYWxsYmFja09BdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsYmFjay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/email-verification.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmailVerificationToken: () => (/* binding */ createEmailVerificationToken),\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* binding */ sendVerificationEmailFn),\n/* harmony export */   verifyEmail: () => (/* binding */ verifyEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose_errors__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose/errors */ \"(rsc)/./node_modules/jose/dist/webapi/util/errors.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/email-verification.ts\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600, extraPayload) {\n\treturn await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.signJWT)({\n\t\temail: email.toLowerCase(),\n\t\tupdateTo,\n\t\t...extraPayload\n\t}, secret, expiresIn);\n}\n/**\n* A function to send a verification email to the user\n*/\nasync function sendVerificationEmailFn(ctx, user) {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser,\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n}\nconst sendVerificationEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/send-verification-email\", {\n\tmethod: \"POST\",\n\toperationId: \"sendVerificationEmail\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email to send the verification email to\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to use for email verification callback\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"sendVerificationEmail\",\n\t\tdescription: \"Send a verification email to the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The email to send the verification email to\",\n\t\t\t\t\texample: \"user@example.com\"\n\t\t\t\t},\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The URL to use for email verification callback\",\n\t\t\t\t\texample: \"https://example.com/callback\",\n\t\t\t\t\tnullable: true\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: [\"email\"]\n\t\t} } } },\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was sent successfully\",\n\t\t\t\t\t\texample: true\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"400\": {\n\t\t\t\tdescription: \"Bad Request\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Error message\",\n\t\t\t\t\t\texample: \"Verification email isn't enabled\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst { email } = ctx.body;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tawait createEmailVerificationToken(ctx.context.secret, email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tawait sendVerificationEmailFn(ctx, user.user);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (session?.user.email !== email) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_MISMATCH });\n\tif (session?.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_ALREADY_VERIFIED });\n\tawait sendVerificationEmailFn(ctx, session.user);\n\treturn ctx.json({ status: true });\n});\nconst verifyEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-email\", {\n\tmethod: \"GET\",\n\toperationId: \"verifyEmail\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to verify the email\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify the email of the user\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The token to verify the email\",\n\t\t\trequired: true,\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The URL to redirect to after email verification\",\n\t\t\trequired: false,\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was verified successfully\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tfunction redirectOnError(error) {\n\t\tif (ctx.query.callbackURL) {\n\t\t\tif (ctx.query.callbackURL.includes(\"?\")) throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n\t\t\tthrow ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: error });\n\t}\n\tconst { token } = ctx.query;\n\tlet jwt;\n\ttry {\n\t\tjwt = await (0,jose__WEBPACK_IMPORTED_MODULE_10__.jwtVerify)(token, new TextEncoder().encode(ctx.context.secret), { algorithms: [\"HS256\"] });\n\t} catch (e) {\n\t\tif (e instanceof jose_errors__WEBPACK_IMPORTED_MODULE_11__.JWTExpired) return redirectOnError(\"token_expired\");\n\t\treturn redirectOnError(\"invalid_token\");\n\t}\n\tconst parsed = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email(),\n\t\tupdateTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\trequestType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}).parse(jwt.payload);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(parsed.email);\n\tif (!user) return redirectOnError(\"user_not_found\");\n\tif (parsed.updateTo) {\n\t\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (session && session.user.email !== parsed.email) return redirectOnError(\"unauthorized\");\n\t\tswitch (parsed.requestType) {\n\t\t\tcase \"change-email-confirmation\": {\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.email, parsed.updateTo, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`;\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...user.user,\n\t\t\t\t\t\temail: parsed.updateTo\n\t\t\t\t\t},\n\t\t\t\t\turl,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}\n\t\t\tcase \"change-email-verification\": {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: true\n\t\t\t\t});\n\t\t\t\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser$1, ctx.request);\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: false\n\t\t\t\t});\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.updateTo);\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: updatedUser$1,\n\t\t\t\t\turl: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tif (user.user.emailVerified) {\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: null\n\t\t});\n\t}\n\tif (ctx.context.options.emailVerification?.beforeEmailVerification) await ctx.context.options.emailVerification.beforeEmailVerification(user.user, ctx.request);\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, { emailVerified: true });\n\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst currentSession = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (!currentSession || currentSession.user.email !== parsed.email) {\n\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\tsession,\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t} else await (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t});\n\t}\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tuser: null\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=email-verification.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2VtYWlsLXZlcmlmaWNhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNRO0FBQzVCO0FBQ2E7QUFDWTtBQUNUO0FBQ1M7QUFDcEI7QUFDZDtBQUNrQztBQUMxQjtBQUNROztBQUV6QztBQUNBO0FBQ0EsY0FBYyx3REFBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw2Q0FBNkM7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQixzQkFBc0IsTUFBTSxlQUFlLFlBQVk7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSw4QkFBOEIseUVBQWtCO0FBQ2hEO0FBQ0E7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsU0FBUyxzQ0FBTyxVQUFVLDREQUE0RDtBQUN0RixlQUFlLHVDQUFRLFVBQVUsK0RBQStEO0FBQ2hHLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBLGlCQUFpQixXQUFXLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDZDQUE2QztBQUNuRjtBQUNBLFNBQVMsUUFBUTtBQUNqQix1QkFBdUIsK0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGNBQWM7QUFDbkM7QUFDQTtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0EsOENBQThDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDbEgsNENBQTRDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDeEg7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0Qsb0JBQW9CLHlFQUFrQjtBQUN0QztBQUNBO0FBQ0EsUUFBUSx1Q0FBUTtBQUNoQixTQUFTLHVDQUFRLFVBQVUsOENBQThDO0FBQ3pFLGVBQWUsdUNBQVEsVUFBVSxnRUFBZ0U7QUFDakcsRUFBRTtBQUNGLE9BQU8sMEVBQVc7QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNILGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGtFQUFrRSxzQkFBc0IsU0FBUyxNQUFNO0FBQ3ZHLHlCQUF5QixzQkFBc0IsU0FBUyxNQUFNO0FBQzlEO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsZ0JBQWdCO0FBQ3ZEO0FBQ0EsU0FBUyxRQUFRO0FBQ2pCO0FBQ0E7QUFDQSxjQUFjLGdEQUFTLHdEQUF3RCx1QkFBdUI7QUFDdEcsR0FBRztBQUNILG1CQUFtQixvREFBVTtBQUM3QjtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUFRO0FBQ3hCLFNBQVMsc0NBQU87QUFDaEIsWUFBWSx1Q0FBUTtBQUNwQixlQUFlLHVDQUFRO0FBQ3ZCLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLCtKQUErSiwwQ0FBMEM7QUFDek07QUFDQSxtQkFBbUIsb0JBQW9CLHNCQUFzQixTQUFTLGVBQWUsa0JBQWtCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsVUFBVSxvRUFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0RBQWU7QUFDMUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvQkFBb0Isc0JBQXNCLFNBQVMsZUFBZSxrQkFBa0I7QUFDakc7QUFDQSxLQUFLO0FBQ0wsVUFBVSxvRUFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0RBQWU7QUFDMUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLHFCQUFxQjtBQUM5RztBQUNBO0FBQ0EsK0JBQStCLCtEQUFpQjtBQUNoRDtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFRLDRCQUE0QixxQ0FBcUM7QUFDcEcsU0FBUyxvRUFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJLFdBQVcsb0VBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ3FHO0FBQ3JHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXGVtYWlsLXZlcmlmaWNhdGlvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IG9yaWdpbkNoZWNrIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4uL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2lnbkpXVCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIjtcbmltcG9ydCB7IEpXVEV4cGlyZWQgfSBmcm9tIFwiam9zZS9lcnJvcnNcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL2VtYWlsLXZlcmlmaWNhdGlvbi50c1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihzZWNyZXQsIGVtYWlsLCB1cGRhdGVUbywgZXhwaXJlc0luID0gMzYwMCwgZXh0cmFQYXlsb2FkKSB7XG5cdHJldHVybiBhd2FpdCBzaWduSldUKHtcblx0XHRlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHR1cGRhdGVUbyxcblx0XHQuLi5leHRyYVBheWxvYWRcblx0fSwgc2VjcmV0LCBleHBpcmVzSW4pO1xufVxuLyoqXG4qIEEgZnVuY3Rpb24gdG8gc2VuZCBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byB0aGUgdXNlclxuKi9cbmFzeW5jIGZ1bmN0aW9uIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgdXNlcikge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCB1c2VyLmVtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gY3R4LmJvZHkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0dXNlcixcblx0XHR1cmwsXG5cdFx0dG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcbn1cbmNvbnN0IHNlbmRWZXJpZmljYXRpb25FbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zZW5kLXZlcmlmaWNhdGlvbi1lbWFpbFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNlbmRWZXJpZmljYXRpb25FbWFpbFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouZW1haWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIHRvIHNlbmQgdGhlIHZlcmlmaWNhdGlvbiBlbWFpbCB0b1wiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNlbmRWZXJpZmljYXRpb25FbWFpbFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbmQgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gdGhlIHVzZXJcIixcblx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCB0byBzZW5kIHRoZSB2ZXJpZmljYXRpb24gZW1haWwgdG9cIixcblx0XHRcdFx0XHRleGFtcGxlOiBcInVzZXJAZXhhbXBsZS5jb21cIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjYWxsYmFja1VSTDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byB1c2UgZm9yIGVtYWlsIHZlcmlmaWNhdGlvbiBjYWxsYmFja1wiLFxuXHRcdFx0XHRcdGV4YW1wbGU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9jYWxsYmFja1wiLFxuXHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRyZXF1aXJlZDogW1wiZW1haWxcIl1cblx0XHR9IH0gfSB9LFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGVtYWlsIHdhcyBzZW50IHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0ZXhhbXBsZTogdHJ1ZVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdFwiNDAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQmFkIFJlcXVlc3RcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkVycm9yIG1lc3NhZ2VcIixcblx0XHRcdFx0XHRcdGV4YW1wbGU6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIlxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHsgZW1haWwgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0YXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIGVtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdFx0fVxuXHRcdGF3YWl0IHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgdXNlci51c2VyKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0aWYgKHNlc3Npb24/LnVzZXIuZW1haWwgIT09IGVtYWlsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTUlTTUFUQ0ggfSk7XG5cdGlmIChzZXNzaW9uPy51c2VyLmVtYWlsVmVyaWZpZWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9BTFJFQURZX1ZFUklGSUVEIH0pO1xuXHRhd2FpdCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbihjdHgsIHNlc3Npb24udXNlcik7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgdmVyaWZ5RW1haWwgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdmVyaWZ5LWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRvcGVyYXRpb25JZDogXCJ2ZXJpZnlFbWFpbFwiLFxuXHRxdWVyeTogei5vYmplY3Qoe1xuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gdmVyaWZ5IHRoZSBlbWFpbFwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiVmVyaWZ5IHRoZSBlbWFpbCBvZiB0aGUgdXNlclwiLFxuXHRcdHBhcmFtZXRlcnM6IFt7XG5cdFx0XHRuYW1lOiBcInRva2VuXCIsXG5cdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHZlcmlmeSB0aGUgZW1haWxcIixcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH0sIHtcblx0XHRcdG5hbWU6IFwiY2FsbGJhY2tVUkxcIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH1dLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBlbWFpbCB3YXMgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5XCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJ1c2VyXCIsIFwic3RhdHVzXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0ZnVuY3Rpb24gcmVkaXJlY3RPbkVycm9yKGVycm9yKSB7XG5cdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkge1xuXHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTC5pbmNsdWRlcyhcIj9cIikpIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9JmVycm9yPSR7ZXJyb3J9YCk7XG5cdFx0XHR0aHJvdyBjdHgucmVkaXJlY3QoYCR7Y3R4LnF1ZXJ5LmNhbGxiYWNrVVJMfT9lcnJvcj0ke2Vycm9yfWApO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBlcnJvciB9KTtcblx0fVxuXHRjb25zdCB7IHRva2VuIH0gPSBjdHgucXVlcnk7XG5cdGxldCBqd3Q7XG5cdHRyeSB7XG5cdFx0and0ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY3R4LmNvbnRleHQuc2VjcmV0KSwgeyBhbGdvcml0aG1zOiBbXCJIUzI1NlwiXSB9KTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmIChlIGluc3RhbmNlb2YgSldURXhwaXJlZCkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInRva2VuX2V4cGlyZWRcIik7XG5cdFx0cmV0dXJuIHJlZGlyZWN0T25FcnJvcihcImludmFsaWRfdG9rZW5cIik7XG5cdH1cblx0Y29uc3QgcGFyc2VkID0gei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LmVtYWlsKCksXG5cdFx0dXBkYXRlVG86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRyZXF1ZXN0VHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pLnBhcnNlKGp3dC5wYXlsb2FkKTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsKTtcblx0aWYgKCF1c2VyKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidXNlcl9ub3RfZm91bmRcIik7XG5cdGlmIChwYXJzZWQudXBkYXRlVG8pIHtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRpZiAoc2Vzc2lvbiAmJiBzZXNzaW9uLnVzZXIuZW1haWwgIT09IHBhcnNlZC5lbWFpbCkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYXV0aG9yaXplZFwiKTtcblx0XHRzd2l0Y2ggKHBhcnNlZC5yZXF1ZXN0VHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYW5nZS1lbWFpbC1jb25maXJtYXRpb25cIjoge1xuXHRcdFx0XHRjb25zdCBuZXdUb2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBwYXJzZWQuZW1haWwsIHBhcnNlZC51cGRhdGVUbywgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIiB9KTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlQ2FsbGJhY2tVUkwgPSBjdHgucXVlcnkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke25ld1Rva2VufSZjYWxsYmFja1VSTD0ke3VwZGF0ZUNhbGxiYWNrVVJMfWA7XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdC4uLnVzZXIudXNlcixcblx0XHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG9cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVybCxcblx0XHRcdFx0XHR0b2tlbjogbmV3VG9rZW5cblx0XHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJjaGFuZ2UtZW1haWwtdmVyaWZpY2F0aW9uXCI6IHtcblx0XHRcdFx0bGV0IGFjdGl2ZVNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdFx0XHRpZiAoIWFjdGl2ZVNlc3Npb24pIHtcblx0XHRcdFx0XHRjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkKTtcblx0XHRcdFx0XHRpZiAoIW5ld1Nlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHRcdFx0XHRcdGFjdGl2ZVNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogdXNlci51c2VyXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8ub25FbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uKHVzZXIudXNlciwgY3R4LnJlcXVlc3QpO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlciQxID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwge1xuXHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmFmdGVyRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbih1cGRhdGVkVXNlciQxLCBjdHgucmVxdWVzdCk7XG5cdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdFx0c2Vzc2lvbjogYWN0aXZlU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdC4uLmFjdGl2ZVNlc3Npb24udXNlcixcblx0XHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkVXNlciQxKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6IHtcblx0XHRcdFx0bGV0IGFjdGl2ZVNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdFx0XHRpZiAoIWFjdGl2ZVNlc3Npb24pIHtcblx0XHRcdFx0XHRjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkKTtcblx0XHRcdFx0XHRpZiAoIW5ld1Nlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHRcdFx0XHRcdGFjdGl2ZVNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogdXNlci51c2VyXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlciQxID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwge1xuXHRcdFx0XHRcdGVtYWlsOiBwYXJzZWQudXBkYXRlVG8sXG5cdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHBhcnNlZC51cGRhdGVUbyk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZUNhbGxiYWNrVVJMID0gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMID8gZW5jb2RlVVJJQ29tcG9uZW50KGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSBhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0XHR1c2VyOiB1cGRhdGVkVXNlciQxLFxuXHRcdFx0XHRcdHVybDogYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7bmV3VG9rZW59JmNhbGxiYWNrVVJMPSR7dXBkYXRlQ2FsbGJhY2tVUkx9YCxcblx0XHRcdFx0XHR0b2tlbjogbmV3VG9rZW5cblx0XHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uOiBhY3RpdmVTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4uYWN0aXZlU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkVXNlciQxKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKHVzZXIudXNlci5lbWFpbFZlcmlmaWVkKSB7XG5cdFx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHVzZXI6IG51bGxcblx0XHR9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYmVmb3JlRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uYmVmb3JlRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLm9uRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKHBhcnNlZC5lbWFpbCwgeyBlbWFpbFZlcmlmaWVkOiB0cnVlIH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKHVwZGF0ZWRVc2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hdXRvU2lnbkluQWZ0ZXJWZXJpZmljYXRpb24pIHtcblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0aWYgKCFjdXJyZW50U2Vzc2lvbiB8fCBjdXJyZW50U2Vzc2lvbi51c2VyLmVtYWlsICE9PSBwYXJzZWQuZW1haWwpIHtcblx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiIH0pO1xuXHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0c2Vzc2lvbixcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdC4uLnVzZXIudXNlcixcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogY3VycmVudFNlc3Npb24uc2Vzc2lvbixcblx0XHRcdHVzZXI6IHtcblx0XHRcdFx0Li4uY3VycmVudFNlc3Npb24udXNlcixcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHN0YXR1czogdHJ1ZSxcblx0XHR1c2VyOiBudWxsXG5cdH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsLCBzZW5kVmVyaWZpY2F0aW9uRW1haWxGbiwgdmVyaWZ5RW1haWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtYWlsLXZlcmlmaWNhdGlvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/error.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   error: () => (/* binding */ error)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/api/routes/error.ts\nfunction sanitize(input) {\n\treturn input.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g, \"&amp;\");\n}\nconst html = (options, code = \"Unknown\", description = null) => {\n\tconst custom = options.onAPIError?.customizeDefaultErrorPage;\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Error</title>\n    <style>\n      * {\n        box-sizing: border-box;\n      }\n      body {\n        font-family: ${custom?.font?.defaultFamily || \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\"};\n        background: ${custom?.colors?.background || \"var(--background)\"};\n        color: var(--foreground);\n        margin: 0;\n      }\n      :root,\n      :host {\n        --spacing: 0.25rem;\n        --container-md: 28rem;\n        --text-sm: ${custom?.size?.textSm || \"0.875rem\"};\n        --text-sm--line-height: calc(1.25 / 0.875);\n        --text-2xl: ${custom?.size?.text2xl || \"1.5rem\"};\n        --text-2xl--line-height: calc(2 / 1.5);\n        --text-4xl: ${custom?.size?.text4xl || \"2.25rem\"};\n        --text-4xl--line-height: calc(2.5 / 2.25);\n        --text-6xl: ${custom?.size?.text6xl || \"3rem\"};\n        --text-6xl--line-height: 1;\n        --font-weight-medium: 500;\n        --font-weight-semibold: 600;\n        --font-weight-bold: 700;\n        --default-transition-duration: 150ms;\n        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        --radius: ${custom?.size?.radiusSm || \"0.625rem\"};\n        --default-mono-font-family: ${custom?.font?.monoFamily || \"var(--font-geist-mono)\"};\n        --primary: ${custom?.colors?.primary || \"black\"};\n        --primary-foreground: ${custom?.colors?.primaryForeground || \"white\"};\n        --background: ${custom?.colors?.background || \"white\"};\n        --foreground: ${custom?.colors?.foreground || \"oklch(0.271 0 0)\"};\n        --border: ${custom?.colors?.border || \"oklch(0.89 0 0)\"};\n        --destructive: ${custom?.colors?.destructive || \"oklch(0.55 0.15 25.723)\"};\n        --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.545 0 0)\"};\n        --corner-border: ${custom?.colors?.cornerBorder || \"#404040\"};\n      }\n\n      button, .btn {\n        cursor: pointer;\n        background: none;\n        border: none;\n        color: inherit;\n        font: inherit;\n        transition: all var(--default-transition-duration)\n          var(--default-transition-timing-function);\n      }\n      button:hover, .btn:hover {\n        opacity: 0.8;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        :root,\n        :host {\n          --primary: ${custom?.colors?.primary || \"white\"};\n          --primary-foreground: ${custom?.colors?.primaryForeground || \"black\"};\n          --background: ${custom?.colors?.background || \"oklch(0.15 0 0)\"};\n          --foreground: ${custom?.colors?.foreground || \"oklch(0.98 0 0)\"};\n          --border: ${custom?.colors?.border || \"oklch(0.27 0 0)\"};\n          --destructive: ${custom?.colors?.destructive || \"oklch(0.65 0.15 25.723)\"};\n          --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.65 0 0)\"};\n          --corner-border: ${custom?.colors?.cornerBorder || \"#a0a0a0\"};\n        }\n      }\n      @media (max-width: 640px) {\n        :root, :host {\n          --text-6xl: 2.5rem;\n          --text-2xl: 1.25rem;\n          --text-sm: 0.8125rem;\n        }\n      }\n      @media (max-width: 480px) {\n        :root, :host {\n          --text-6xl: 2rem;\n          --text-2xl: 1.125rem;\n        }\n      }\n    </style>\n  </head>\n  <body style=\"width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;\">\n    <div\n        style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            gap: 1.5rem;\n            position: relative;\n            width: 100%;\n            min-height: 100vh;\n            padding: 1rem;\n        \"\n        >\n${custom?.disableBackgroundGrid ? \"\" : `\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          background-image: linear-gradient(to right, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px),\n            linear-gradient(to bottom, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px);\n          background-size: 40px 40px;\n          opacity: 0.6;\n          pointer-events: none;\n          width: 100vw;\n          height: 100vh;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: ${custom?.colors?.background || \"var(--background)\"};\n          mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          pointer-events: none;\n        \"\n      ></div>\n`}\n\n<div\n  style=\"\n    position: relative;\n    z-index: 10;\n    border: 2px solid var(--border);\n    background: ${custom?.colors?.cardBackground || \"var(--background)\"};\n    padding: 1.5rem;\n    max-width: 42rem;\n    width: 100%;\n  \"\n>\n    ${custom?.disableCornerDecorations ? \"\" : `\n        <!-- Corner decorations -->\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>\n  \n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>`}\n\n        <div style=\"text-align: center; margin-bottom: 1.5rem;\">\n          <div style=\"margin-bottom: 1.5rem;\">\n            <div\n              style=\"\n                display: inline-block;\n                border: 2px solid ${custom?.disableTitleBorder ? \"transparent\" : custom?.colors?.titleBorder || \"var(--destructive)\"};\n                padding: 0.375rem 1rem;\n              \"\n            >\n              <h1\n                style=\"\n                  font-size: var(--text-6xl);\n                  font-weight: var(--font-weight-semibold);\n                  color: ${custom?.colors?.titleColor || \"var(--foreground)\"};\n                  letter-spacing: -0.02em;\n                  margin: 0;\n                \"\n              >\n                ERROR\n              </h1>\n            </div>\n            <div\n              style=\"\n                height: 2px;\n                background-color: var(--border);\n                width: calc(100% + 3rem);\n                margin-left: -1.5rem;\n                margin-top: 1.5rem;\n              \"\n            ></div>\n          </div>\n\n          <h2\n            style=\"\n              font-size: var(--text-2xl);\n              font-weight: var(--font-weight-semibold);\n              color: var(--foreground);\n              margin: 0 0 1rem;\n            \"\n          >\n            Something went wrong\n          </h2>\n\n          <div\n            style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n                border: 2px solid var(--border);\n                background-color: var(--muted);\n                padding: 0.375rem 0.75rem;\n                margin: 0 0 1rem;\n                flex-wrap: wrap;\n                justify-content: center;\n            \"\n            >\n            <span\n                style=\"\n                font-size: 0.75rem;\n                color: var(--muted-foreground);\n                font-weight: var(--font-weight-semibold);\n                \"\n            >\n                CODE:\n            </span>\n            <span\n                style=\"\n                font-size: var(--text-sm);\n                font-family: var(--default-mono-font-family, monospace);\n                color: var(--foreground);\n                word-break: break-all;\n                \"\n            >\n                ${sanitize(code)}\n            </span>\n            </div>\n\n          <p\n            style=\"\n              color: var(--muted-foreground);\n              max-width: 28rem;\n              margin: 0 auto;\n              font-size: var(--text-sm);\n              line-height: 1.5;\n              text-wrap: pretty;\n            \"\n          >\n            ${!description ? `We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}' target='_blank' rel=\"noopener noreferrer\" style='color: var(--foreground); text-decoration: underline;'>here</a>.` : description}\n          </p>\n        </div>\n\n        <div\n          style=\"\n            display: flex;\n            gap: 0.75rem;\n            margin-top: 1.5rem;\n            justify-content: center;\n            flex-wrap: wrap;\n          \"\n        >\n          <a\n            href=\"/\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: var(--primary);\n                color: var(--primary-foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Go Home\n            </div>\n          </a>\n          <a\n            href=\"https://better-auth.com/docs/reference/errors/${encodeURIComponent(code)}?askai=${encodeURIComponent(`What does the error code ${code} mean?`)}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: transparent;\n                color: var(--foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Ask AI\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>`;\n};\nconst error = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthEndpoint)(\"/error\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Displays an error page\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"text/html\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The HTML content of the error page\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst url = new URL(c.request?.url || \"\");\n\tconst unsanitizedCode = url.searchParams.get(\"error\") || \"UNKNOWN\";\n\tconst unsanitizedDescription = url.searchParams.get(\"error_description\") || null;\n\tconst safeCode = /^[\\'A-Za-z0-9_-]+$/.test(unsanitizedCode || \"\") ? unsanitizedCode : \"UNKNOWN\";\n\tconst safeDescription = unsanitizedDescription ? sanitize(unsanitizedDescription) : null;\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.set(\"error\", safeCode);\n\tif (unsanitizedDescription) queryParams.set(\"error_description\", unsanitizedDescription);\n\tconst options = c.context.options;\n\tconst errorURL = options.onAPIError?.errorURL;\n\tif (errorURL) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `${errorURL}${errorURL.includes(\"?\") ? \"&\" : \"?\"}${queryParams.toString()}` }\n\t});\n\tif (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.isProduction && !options.onAPIError?.customizeDefaultErrorPage) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `/?${queryParams.toString()}` }\n\t});\n\treturn new Response(html(c.context.options, safeCode, safeDescription), { headers: { \"Content-Type\": \"text/html\" } });\n});\n\n//#endregion\n\n//# sourceMappingURL=error.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2Vycm9yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThEO0FBQ1Q7QUFDTTs7QUFFM0Q7QUFDQTtBQUNBLGlDQUFpQyxzQkFBc0Isd0JBQXdCLHVCQUF1QixvQkFBb0IsSUFBSSxJQUFJLE1BQU0sS0FBSyxnQkFBZ0IsU0FBUyxXQUFXO0FBQ2pMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixzQ0FBc0M7QUFDdEMscUJBQXFCO0FBQ3JCLGdDQUFnQztBQUNoQyx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLG9CQUFvQjtBQUNwQix5QkFBeUI7QUFDekIsOEJBQThCO0FBQzlCLDJCQUEyQjtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsMEJBQTBCO0FBQzFCLHNCQUFzQjtBQUN0QiwyQkFBMkI7QUFDM0IsZ0NBQWdDO0FBQ2hDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1CQUFtQixvQkFBb0IsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDhDQUE4QztBQUN0Ryx5Q0FBeUMsOENBQThDO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0Msc0JBQXNCO0FBQzlELDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK05BQStOLHlCQUF5Qiw2RUFBNkUsMkJBQTJCO0FBQzlXO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLHlCQUF5QixTQUFTLCtDQUErQyxNQUFNLFFBQVE7QUFDaks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUVBQWtCO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLLG1FQUFhO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYSxTQUFTLEVBQUUsbUNBQW1DLEVBQUUsdUJBQXVCO0FBQ2pHLEVBQUU7QUFDRixLQUFLLCtEQUFZO0FBQ2pCO0FBQ0EsYUFBYSxlQUFlLHVCQUF1QjtBQUNuRCxFQUFFO0FBQ0YsMkVBQTJFLFdBQVcsK0JBQStCO0FBQ3JILENBQUM7O0FBRUQ7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcZXJyb3IubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IGlzUHJvZHVjdGlvbiB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL2Vycm9yLnRzXG5mdW5jdGlvbiBzYW5pdGl6ZShpbnB1dCkge1xuXHRyZXR1cm4gaW5wdXQucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIikucmVwbGFjZSgvXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvJy9nLCBcIiYjMzk7XCIpLnJlcGxhY2UoLyYoPyFhbXA7fGx0O3xndDt8cXVvdDt8IzM5O3wjeFswLTlhLWZBLUZdKzt8I1swLTldKzspL2csIFwiJmFtcDtcIik7XG59XG5jb25zdCBodG1sID0gKG9wdGlvbnMsIGNvZGUgPSBcIlVua25vd25cIiwgZGVzY3JpcHRpb24gPSBudWxsKSA9PiB7XG5cdGNvbnN0IGN1c3RvbSA9IG9wdGlvbnMub25BUElFcnJvcj8uY3VzdG9taXplRGVmYXVsdEVycm9yUGFnZTtcblx0cmV0dXJuIGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sIGxhbmc9XCJlblwiPlxuICA8aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCIgLz5cbiAgICA8dGl0bGU+RXJyb3I8L3RpdGxlPlxuICAgIDxzdHlsZT5cbiAgICAgICoge1xuICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgfVxuICAgICAgYm9keSB7XG4gICAgICAgIGZvbnQtZmFtaWx5OiAke2N1c3RvbT8uZm9udD8uZGVmYXVsdEZhbWlseSB8fCBcIi1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCAnSGVsdmV0aWNhIE5ldWUnLCBBcmlhbCwgc2Fucy1zZXJpZlwifTtcbiAgICAgICAgYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgICAgICBjb2xvcjogdmFyKC0tZm9yZWdyb3VuZCk7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cbiAgICAgIDpyb290LFxuICAgICAgOmhvc3Qge1xuICAgICAgICAtLXNwYWNpbmc6IDAuMjVyZW07XG4gICAgICAgIC0tY29udGFpbmVyLW1kOiAyOHJlbTtcbiAgICAgICAgLS10ZXh0LXNtOiAke2N1c3RvbT8uc2l6ZT8udGV4dFNtIHx8IFwiMC44NzVyZW1cIn07XG4gICAgICAgIC0tdGV4dC1zbS0tbGluZS1oZWlnaHQ6IGNhbGMoMS4yNSAvIDAuODc1KTtcbiAgICAgICAgLS10ZXh0LTJ4bDogJHtjdXN0b20/LnNpemU/LnRleHQyeGwgfHwgXCIxLjVyZW1cIn07XG4gICAgICAgIC0tdGV4dC0yeGwtLWxpbmUtaGVpZ2h0OiBjYWxjKDIgLyAxLjUpO1xuICAgICAgICAtLXRleHQtNHhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDR4bCB8fCBcIjIuMjVyZW1cIn07XG4gICAgICAgIC0tdGV4dC00eGwtLWxpbmUtaGVpZ2h0OiBjYWxjKDIuNSAvIDIuMjUpO1xuICAgICAgICAtLXRleHQtNnhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDZ4bCB8fCBcIjNyZW1cIn07XG4gICAgICAgIC0tdGV4dC02eGwtLWxpbmUtaGVpZ2h0OiAxO1xuICAgICAgICAtLWZvbnQtd2VpZ2h0LW1lZGl1bTogNTAwO1xuICAgICAgICAtLWZvbnQtd2VpZ2h0LXNlbWlib2xkOiA2MDA7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtYm9sZDogNzAwO1xuICAgICAgICAtLWRlZmF1bHQtdHJhbnNpdGlvbi1kdXJhdGlvbjogMTUwbXM7XG4gICAgICAgIC0tZGVmYXVsdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtcbiAgICAgICAgLS1yYWRpdXM6ICR7Y3VzdG9tPy5zaXplPy5yYWRpdXNTbSB8fCBcIjAuNjI1cmVtXCJ9O1xuICAgICAgICAtLWRlZmF1bHQtbW9uby1mb250LWZhbWlseTogJHtjdXN0b20/LmZvbnQ/Lm1vbm9GYW1pbHkgfHwgXCJ2YXIoLS1mb250LWdlaXN0LW1vbm8pXCJ9O1xuICAgICAgICAtLXByaW1hcnk6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnkgfHwgXCJibGFja1wifTtcbiAgICAgICAgLS1wcmltYXJ5LWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnlGb3JlZ3JvdW5kIHx8IFwid2hpdGVcIn07XG4gICAgICAgIC0tYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcIndoaXRlXCJ9O1xuICAgICAgICAtLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmZvcmVncm91bmQgfHwgXCJva2xjaCgwLjI3MSAwIDApXCJ9O1xuICAgICAgICAtLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uYm9yZGVyIHx8IFwib2tsY2goMC44OSAwIDApXCJ9O1xuICAgICAgICAtLWRlc3RydWN0aXZlOiAke2N1c3RvbT8uY29sb3JzPy5kZXN0cnVjdGl2ZSB8fCBcIm9rbGNoKDAuNTUgMC4xNSAyNS43MjMpXCJ9O1xuICAgICAgICAtLW11dGVkLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/Lm11dGVkRm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuNTQ1IDAgMClcIn07XG4gICAgICAgIC0tY29ybmVyLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uY29ybmVyQm9yZGVyIHx8IFwiIzQwNDA0MFwifTtcbiAgICAgIH1cblxuICAgICAgYnV0dG9uLCAuYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGNvbG9yOiBpbmhlcml0O1xuICAgICAgICBmb250OiBpbmhlcml0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgdmFyKC0tZGVmYXVsdC10cmFuc2l0aW9uLWR1cmF0aW9uKVxuICAgICAgICAgIHZhcigtLWRlZmF1bHQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24pO1xuICAgICAgfVxuICAgICAgYnV0dG9uOmhvdmVyLCAuYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgIDpyb290LFxuICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgLS1wcmltYXJ5OiAke2N1c3RvbT8uY29sb3JzPy5wcmltYXJ5IHx8IFwid2hpdGVcIn07XG4gICAgICAgICAgLS1wcmltYXJ5LWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnlGb3JlZ3JvdW5kIHx8IFwiYmxhY2tcIn07XG4gICAgICAgICAgLS1iYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwib2tsY2goMC4xNSAwIDApXCJ9O1xuICAgICAgICAgIC0tZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uZm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuOTggMCAwKVwifTtcbiAgICAgICAgICAtLWJvcmRlcjogJHtjdXN0b20/LmNvbG9ycz8uYm9yZGVyIHx8IFwib2tsY2goMC4yNyAwIDApXCJ9O1xuICAgICAgICAgIC0tZGVzdHJ1Y3RpdmU6ICR7Y3VzdG9tPy5jb2xvcnM/LmRlc3RydWN0aXZlIHx8IFwib2tsY2goMC42NSAwLjE1IDI1LjcyMylcIn07XG4gICAgICAgICAgLS1tdXRlZC1mb3JlZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5tdXRlZEZvcmVncm91bmQgfHwgXCJva2xjaCgwLjY1IDAgMClcIn07XG4gICAgICAgICAgLS1jb3JuZXItYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5jb3JuZXJCb3JkZXIgfHwgXCIjYTBhMGEwXCJ9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNjQwcHgpIHtcbiAgICAgICAgOnJvb3QsIDpob3N0IHtcbiAgICAgICAgICAtLXRleHQtNnhsOiAyLjVyZW07XG4gICAgICAgICAgLS10ZXh0LTJ4bDogMS4yNXJlbTtcbiAgICAgICAgICAtLXRleHQtc206IDAuODEyNXJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDQ4MHB4KSB7XG4gICAgICAgIDpyb290LCA6aG9zdCB7XG4gICAgICAgICAgLS10ZXh0LTZ4bDogMnJlbTtcbiAgICAgICAgICAtLXRleHQtMnhsOiAxLjEyNXJlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDwvc3R5bGU+XG4gIDwvaGVhZD5cbiAgPGJvZHkgc3R5bGU9XCJ3aWR0aDogMTAwdnc7IG1pbi1oZWlnaHQ6IDEwMHZoOyBvdmVyZmxvdy14OiBoaWRkZW47IG92ZXJmbG93LXk6IGF1dG87XCI+XG4gICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBnYXA6IDEuNXJlbTtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICBcIlxuICAgICAgICA+XG4ke2N1c3RvbT8uZGlzYWJsZUJhY2tncm91bmRHcmlkID8gXCJcIiA6IGBcbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgaW5zZXQ6IDA7XG4gICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAke2N1c3RvbT8uY29sb3JzPy5ncmlkQ29sb3IgfHwgXCJ2YXIoLS1ib3JkZXIpXCJ9IDFweCwgdHJhbnNwYXJlbnQgMXB4KSxcbiAgICAgICAgICAgIGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICR7Y3VzdG9tPy5jb2xvcnM/LmdyaWRDb2xvciB8fCBcInZhcigtLWJvcmRlcilcIn0gMXB4LCB0cmFuc3BhcmVudCAxcHgpO1xuICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNDBweCA0MHB4O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICB3aWR0aDogMTAwdnc7XG4gICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgXCJcbiAgICAgID48L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgaW5zZXQ6IDA7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmJhY2tncm91bmQgfHwgXCJ2YXIoLS1iYWNrZ3JvdW5kKVwifTtcbiAgICAgICAgICBtYXNrLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBjZW50ZXIsIHRyYW5zcGFyZW50IDIwJSwgYmxhY2spO1xuICAgICAgICAgIC13ZWJraXQtbWFzay1pbWFnZTogcmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgY2VudGVyLCB0cmFuc3BhcmVudCAyMCUsIGJsYWNrKTtcbiAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgXCJcbiAgICAgID48L2Rpdj5cbmB9XG5cbjxkaXZcbiAgc3R5bGU9XCJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTA7XG4gICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICBiYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5jYXJkQmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgIHBhZGRpbmc6IDEuNXJlbTtcbiAgICBtYXgtd2lkdGg6IDQycmVtO1xuICAgIHdpZHRoOiAxMDAlO1xuICBcIlxuPlxuICAgICR7Y3VzdG9tPy5kaXNhYmxlQ29ybmVyRGVjb3JhdGlvbnMgPyBcIlwiIDogYFxuICAgICAgICA8IS0tIENvcm5lciBkZWNvcmF0aW9ucyAtLT5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgICAgICBsZWZ0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgIFwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IC0ycHg7XG4gICAgICAgICAgICByaWdodDogLTJweDtcbiAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICBcbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgICAgICBsZWZ0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgIFwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBib3R0b206IC0ycHg7XG4gICAgICAgICAgICByaWdodDogLTJweDtcbiAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLWNvcm5lci1ib3JkZXIpO1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PmB9XG5cbiAgICAgICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMS41cmVtO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxLjVyZW07XCI+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICR7Y3VzdG9tPy5kaXNhYmxlVGl0bGVCb3JkZXIgPyBcInRyYW5zcGFyZW50XCIgOiBjdXN0b20/LmNvbG9ycz8udGl0bGVCb3JkZXIgfHwgXCJ2YXIoLS1kZXN0cnVjdGl2ZSlcIn07XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMXJlbTtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGgxXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogdmFyKC0tdGV4dC02eGwpO1xuICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAke2N1c3RvbT8uY29sb3JzPy50aXRsZUNvbG9yIHx8IFwidmFyKC0tZm9yZWdyb3VuZClcIn07XG4gICAgICAgICAgICAgICAgICBsZXR0ZXItc3BhY2luZzogLTAuMDJlbTtcbiAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRVJST1JcbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSArIDNyZW0pO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtMS41cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDEuNXJlbTtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxoMlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LTJ4bCk7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS1mb250LXdlaWdodC1zZW1pYm9sZCk7XG4gICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMXJlbTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgU29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgICAgICA8L2gyPlxuXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbXV0ZWQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtIDAuNzVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIDAgMXJlbTtcbiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIENPREU6XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LXNtKTtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZGVmYXVsdC1tb25vLWZvbnQtZmFtaWx5LCBtb25vc3BhY2UpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAke3Nhbml0aXplKGNvZGUpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8cFxuICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLW11dGVkLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICBtYXgtd2lkdGg6IDI4cmVtO1xuICAgICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LXNtKTtcbiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICAgICAgdGV4dC13cmFwOiBwcmV0dHk7XG4gICAgICAgICAgICBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgICR7IWRlc2NyaXB0aW9uID8gYFdlIGVuY291bnRlcmVkIGFuIHVuZXhwZWN0ZWQgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gb3IgcmV0dXJuIHRvIHRoZSBob21lIHBhZ2UuIElmIHlvdSdyZSBhIGRldmVsb3BlciwgeW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yIDxhIGhyZWY9J2h0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcmVmZXJlbmNlL2Vycm9ycy8ke2VuY29kZVVSSUNvbXBvbmVudChjb2RlKX0nIHRhcmdldD0nX2JsYW5rJyByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgc3R5bGU9J2NvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Jz5oZXJlPC9hPi5gIDogZGVzY3JpcHRpb259XG4gICAgICAgICAgPC9wPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBnYXA6IDAuNzVyZW07XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAxLjVyZW07XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGhyZWY9XCIvXCJcbiAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXByaW1hcnktZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICBjbGFzcz1cImJ0blwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEdvIEhvbWVcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcmVmZXJlbmNlL2Vycm9ycy8ke2VuY29kZVVSSUNvbXBvbmVudChjb2RlKX0/YXNrYWk9JHtlbmNvZGVVUklDb21wb25lbnQoYFdoYXQgZG9lcyB0aGUgZXJyb3IgY29kZSAke2NvZGV9IG1lYW4/YCl9XCJcbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBc2sgQUlcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9ib2R5PlxuPC9odG1sPmA7XG59O1xuY29uc3QgZXJyb3IgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZXJyb3JcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJEaXNwbGF5cyBhbiBlcnJvciBwYWdlXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJ0ZXh0L2h0bWxcIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIGVycm9yIHBhZ2VcIlxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGMucmVxdWVzdD8udXJsIHx8IFwiXCIpO1xuXHRjb25zdCB1bnNhbml0aXplZENvZGUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpIHx8IFwiVU5LTk9XTlwiO1xuXHRjb25zdCB1bnNhbml0aXplZERlc2NyaXB0aW9uID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiKSB8fCBudWxsO1xuXHRjb25zdCBzYWZlQ29kZSA9IC9eW1xcJ0EtWmEtejAtOV8tXSskLy50ZXN0KHVuc2FuaXRpemVkQ29kZSB8fCBcIlwiKSA/IHVuc2FuaXRpemVkQ29kZSA6IFwiVU5LTk9XTlwiO1xuXHRjb25zdCBzYWZlRGVzY3JpcHRpb24gPSB1bnNhbml0aXplZERlc2NyaXB0aW9uID8gc2FuaXRpemUodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgOiBudWxsO1xuXHRjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0cXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JcIiwgc2FmZUNvZGUpO1xuXHRpZiAodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgcXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgdW5zYW5pdGl6ZWREZXNjcmlwdGlvbik7XG5cdGNvbnN0IG9wdGlvbnMgPSBjLmNvbnRleHQub3B0aW9ucztcblx0Y29uc3QgZXJyb3JVUkwgPSBvcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMO1xuXHRpZiAoZXJyb3JVUkwpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAke2Vycm9yVVJMfSR7ZXJyb3JVUkwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn0ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YCB9XG5cdH0pO1xuXHRpZiAoaXNQcm9kdWN0aW9uICYmICFvcHRpb25zLm9uQVBJRXJyb3I/LmN1c3RvbWl6ZURlZmF1bHRFcnJvclBhZ2UpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAvPyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gIH1cblx0fSk7XG5cdHJldHVybiBuZXcgUmVzcG9uc2UoaHRtbChjLmNvbnRleHQub3B0aW9ucywgc2FmZUNvZGUsIHNhZmVEZXNjcmlwdGlvbiksIHsgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcInRleHQvaHRtbFwiIH0gfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/index.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _account_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./account.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _callback_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./callback.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./error.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _ok_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ok.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _sign_in_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sign-in.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _sign_out_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sign-out.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _sign_up_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sign-up.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _update_user_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./update-user.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBcU87QUFDdkc7QUFDL0U7QUFDc0Y7QUFDakc7QUFDTjtBQUNxRjtBQUN6RDtBQUNqQjtBQUNHO0FBQzZFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGFjY291bnRJbmZvLCBnZXRBY2Nlc3NUb2tlbiwgbGlua1NvY2lhbEFjY291bnQsIGxpc3RVc2VyQWNjb3VudHMsIHJlZnJlc2hUb2tlbiwgdW5saW5rQWNjb3VudCB9IGZyb20gXCIuL2FjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjYWxsYmFja09BdXRoIH0gZnJvbSBcIi4vY2FsbGJhY2subWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCB7IGVycm9yIH0gZnJvbSBcIi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBvayB9IGZyb20gXCIuL29rLm1qc1wiO1xuaW1wb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsIH0gZnJvbSBcIi4vc2lnbi1pbi5tanNcIjtcbmltcG9ydCB7IHNpZ25PdXQgfSBmcm9tIFwiLi9zaWduLW91dC5tanNcIjtcbmltcG9ydCB7IHNpZ25VcEVtYWlsIH0gZnJvbSBcIi4vc2lnbi11cC5tanNcIjtcbmltcG9ydCB7IGNoYW5nZUVtYWlsLCBjaGFuZ2VQYXNzd29yZCwgZGVsZXRlVXNlciwgZGVsZXRlVXNlckNhbGxiYWNrLCBzZXRQYXNzd29yZCwgdXBkYXRlVXNlciB9IGZyb20gXCIuL3VwZGF0ZS11c2VyLm1qc1wiO1xuXG5leHBvcnQgeyAgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/ok.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ok: () => (/* binding */ ok)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/ok.ts\nconst ok = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/ok\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Check if the API is working\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API is working\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { ok: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API is working\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"ok\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn ctx.json({ ok: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=ok.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL29rLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7QUFDSDs7QUFFM0Q7QUFDQSxXQUFXLHlFQUFrQjtBQUM3QjtBQUNBO0FBQ0EsS0FBSyxtRUFBYTtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG1CQUFtQixVQUFVO0FBQzdCLENBQUM7O0FBRUQ7QUFDYztBQUNkIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXG9rLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9vay50c1xuY29uc3Qgb2sgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb2tcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJDaGVjayBpZiB0aGUgQVBJIGlzIHdvcmtpbmdcIixcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBpcyB3b3JraW5nXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG9rOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgQVBJIGlzIHdvcmtpbmdcIlxuXHRcdFx0XHRcdH0gfSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1wib2tcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBvazogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG9rIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/password.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requestPasswordReset: () => (/* binding */ requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* binding */ requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/password.ts\nfunction redirectError(ctx, callbackURL, query) {\n\tconst url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n\tconst url = new URL(callbackURL, ctx.baseURL);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nconst requestPasswordReset = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email address of the user to send a password reset email to\" }),\n\t\tredirectTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordReset\",\n\t\tdescription: \"Send a password reset email to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: { type: \"boolean\" },\n\t\t\t\t\tmessage: { type: \"string\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n\t\tctx.context.logger.error(\"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Reset password isn't enabled\" });\n\t}\n\tconst { email, redirectTo } = ctx.body;\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\t/**\n\t\t* We simulate the verification token generation and the database lookup\n\t\t* to mitigate timing attacks.\n\t\t*/\n\t\t(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\t\tawait ctx.context.internalAdapter.findVerificationValue(\"dummy-verification-token\");\n\t\tctx.context.logger.error(\"Reset Password: User not found\", { email });\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t\t});\n\t}\n\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || 3600 * 1, \"sec\");\n\tconst verificationToken = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: user.user.id,\n\t\tidentifier: `reset-password:${verificationToken}`,\n\t\texpiresAt\n\t});\n\tconst callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n\tconst url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailAndPassword.sendResetPassword({\n\t\tuser: user.user,\n\t\turl,\n\t\ttoken: verificationToken\n\t}, ctx.request));\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t});\n});\nconst requestPasswordResetCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password/:token\", {\n\tmethod: \"GET\",\n\toperationId: \"forgetPasswordCallback\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ callbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password\" }) }),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordCallback\",\n\t\tdescription: \"Redirects the user to the callback URL with the token\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"path\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The token to reset the password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The URL to redirect the user to reset their password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { token } = ctx.params;\n\tconst { callbackURL } = ctx.query;\n\tif (!token || !callbackURL) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`reset-password:${token}`);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tthrow ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n});\nconst resetPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password\", {\n\tmethod: \"POST\",\n\toperationId: \"resetPassword\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ token: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional() }).optional(),\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The new password to set\" }),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to reset the password\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPassword\",\n\t\tdescription: \"Reset the password for a user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token || ctx.query?.token;\n\tif (!token) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst { newPassword } = ctx.body;\n\tconst minLength = ctx.context.password?.config.minPasswordLength;\n\tconst maxLength = ctx.context.password?.config.maxPasswordLength;\n\tif (newPassword.length < minLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (newPassword.length > maxLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst id = `reset-password:${token}`;\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(id);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst userId = verification.value;\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tif (!(await ctx.context.internalAdapter.findAccounts(userId)).find((ac) => ac.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId,\n\t\tproviderId: \"credential\",\n\t\tpassword: hashedPassword,\n\t\taccountId: userId\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(userId);\n\t\tif (user) await ctx.context.options.emailAndPassword.onPasswordReset({ user }, ctx.request);\n\t}\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(userId);\n\treturn ctx.json({ status: true });\n});\nconst verifyPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-password\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({ password: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The password to verify\" }) }),\n\tmetadata: {\n\t\tscope: \"server\",\n\t\topenapi: {\n\t\t\toperationId: \"verifyPassword\",\n\t\t\tdescription: \"Verify the current user's password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t},\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { password } = ctx.body;\n\tconst session = ctx.context.session;\n\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\tpassword,\n\t\tuserId: session.user.id\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3Bhc3N3b3JkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUNlO0FBQzVCO0FBQ3lCO0FBQ1I7QUFDUztBQUNEO0FBQ3BCO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0E7QUFDQSwwRUFBMEUsWUFBWTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlFQUFrQjtBQUMvQztBQUNBLE9BQU8sdUNBQVE7QUFDZixTQUFTLHNDQUFPLFVBQVUsZ0ZBQWdGO0FBQzFHLGNBQWMsdUNBQVEsVUFBVSxvUUFBb1E7QUFDcFMsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IseUNBQXlDO0FBQy9FO0FBQ0EsU0FBUyxvQkFBb0I7QUFDN0IseUVBQXlFLHVCQUF1QjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0REFBVTtBQUNaO0FBQ0EsK0RBQStELE9BQU87QUFDdEU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLHdEQUFPO0FBQzFCLDJCQUEyQiw0REFBVTtBQUNyQztBQUNBO0FBQ0EsZ0NBQWdDLGtCQUFrQjtBQUNsRDtBQUNBLEVBQUU7QUFDRjtBQUNBLGdCQUFnQixvQkFBb0Isa0JBQWtCLGtCQUFrQixlQUFlLFlBQVk7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCxxQ0FBcUMseUVBQWtCO0FBQ3ZEO0FBQ0E7QUFDQSxRQUFRLHVDQUFRLEdBQUcsYUFBYSx1Q0FBUSxVQUFVLHFFQUFxRSxHQUFHO0FBQzFILE9BQU8sMEVBQVc7QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0gsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsU0FBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxRQUFRO0FBQ2pCLFNBQVMsY0FBYztBQUN2QiwwRkFBMEYsd0JBQXdCO0FBQ2xILGdHQUFnRyxNQUFNO0FBQ3RHLHdJQUF3SSx3QkFBd0I7QUFDaEssaUVBQWlFLE9BQU87QUFDeEUsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQTtBQUNBLFFBQVEsdUNBQVEsR0FBRyxPQUFPLHVDQUFRLGVBQWU7QUFDakQsT0FBTyx1Q0FBUTtBQUNmLGVBQWUsdUNBQVEsVUFBVSx3Q0FBd0M7QUFDekUsU0FBUyx1Q0FBUSxVQUFVLGdEQUFnRDtBQUMzRSxFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixVQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHVCQUF1QixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQzFGLFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0EsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDdkgsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDdEgsOEJBQThCLE1BQU07QUFDcEM7QUFDQSxxRkFBcUYsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxNQUFNO0FBQy9FO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0QsdUJBQXVCLHlFQUFrQjtBQUN6QztBQUNBLE9BQU8sdUNBQVEsR0FBRyxVQUFVLHVDQUFRLFVBQVUsdUNBQXVDLEdBQUc7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLE9BQU8sb0VBQTBCO0FBQ2pDLENBQUM7QUFDRCxTQUFTLFdBQVc7QUFDcEI7QUFDQSxZQUFZLHFFQUFnQjtBQUM1QjtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDckYsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQzs7QUFFRDtBQUM2RjtBQUM3RiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxwYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgb3JpZ2luQ2hlY2sgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IFwiLi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVQYXNzd29yZCB9IGZyb20gXCIuLi8uLi91dGlscy9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3Bhc3N3b3JkLnRzXG5mdW5jdGlvbiByZWRpcmVjdEVycm9yKGN0eCwgY2FsbGJhY2tVUkwsIHF1ZXJ5KSB7XG5cdGNvbnN0IHVybCA9IGNhbGxiYWNrVVJMID8gbmV3IFVSTChjYWxsYmFja1VSTCwgY3R4LmJhc2VVUkwpIDogbmV3IFVSTChgJHtjdHguYmFzZVVSTH0vZXJyb3JgKTtcblx0aWYgKHF1ZXJ5KSBPYmplY3QuZW50cmllcyhxdWVyeSkuZm9yRWFjaCgoW2ssIHZdKSA9PiB1cmwuc2VhcmNoUGFyYW1zLnNldChrLCB2KSk7XG5cdHJldHVybiB1cmwuaHJlZjtcbn1cbmZ1bmN0aW9uIHJlZGlyZWN0Q2FsbGJhY2soY3R4LCBjYWxsYmFja1VSTCwgcXVlcnkpIHtcblx0Y29uc3QgdXJsID0gbmV3IFVSTChjYWxsYmFja1VSTCwgY3R4LmJhc2VVUkwpO1xuXHRpZiAocXVlcnkpIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbaywgdl0pID0+IHVybC5zZWFyY2hQYXJhbXMuc2V0KGssIHYpKTtcblx0cmV0dXJuIHVybC5ocmVmO1xufVxuY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmVxdWVzdC1wYXNzd29yZC1yZXNldFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5lbWFpbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlciB0byBzZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG9cIiB9KSxcblx0XHRyZWRpcmVjdFRvOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkLiBJZiB0aGUgdG9rZW4gaXNuJ3QgdmFsaWQgb3IgZXhwaXJlZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/ZXJyb3I9SU5WQUxJRF9UT0tFTmAuIElmIHRoZSB0b2tlbiBpcyB2YWxpZCwgaXQnbGwgYmUgcmVkaXJlY3RlZCB3aXRoIGEgcXVlcnkgcGFyYW1ldGVyIGA/dG9rZW49VkFMSURfVE9LRU5cIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwicmVxdWVzdFBhc3N3b3JkUmVzZXRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJTZW5kIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8gdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uc2VuZFJlc2V0UGFzc3dvcmQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJSZXNldCBwYXNzd29yZCBpc24ndCBlbmFibGVkLlBsZWFzZSBwYXNzIGFuIGVtYWlsQW5kUGFzc3dvcmQuc2VuZFJlc2V0UGFzc3dvcmQgZnVuY3Rpb24gaW4geW91ciBhdXRoIGNvbmZpZyFcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB7IGVtYWlsLCByZWRpcmVjdFRvIH0gPSBjdHguYm9keTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwsIHsgaW5jbHVkZUFjY291bnRzOiB0cnVlIH0pO1xuXHRpZiAoIXVzZXIpIHtcblx0XHQvKipcblx0XHQqIFdlIHNpbXVsYXRlIHRoZSB2ZXJpZmljYXRpb24gdG9rZW4gZ2VuZXJhdGlvbiBhbmQgdGhlIGRhdGFiYXNlIGxvb2t1cFxuXHRcdCogdG8gbWl0aWdhdGUgdGltaW5nIGF0dGFja3MuXG5cdFx0Ki9cblx0XHRnZW5lcmF0ZUlkKDI0KTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKFwiZHVtbXktdmVyaWZpY2F0aW9uLXRva2VuXCIpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlJlc2V0IFBhc3N3b3JkOiBVc2VyIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRtZXNzYWdlOiBcIklmIHRoaXMgZW1haWwgZXhpc3RzIGluIG91ciBzeXN0ZW0sIGNoZWNrIHlvdXIgZW1haWwgZm9yIHRoZSByZXNldCBsaW5rXCJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBleHBpcmVzQXQgPSBnZXREYXRlKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXNldFBhc3N3b3JkVG9rZW5FeHBpcmVzSW4gfHwgMzYwMCAqIDEsIFwic2VjXCIpO1xuXHRjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGdlbmVyYXRlSWQoMjQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdHZhbHVlOiB1c2VyLnVzZXIuaWQsXG5cdFx0aWRlbnRpZmllcjogYHJlc2V0LXBhc3N3b3JkOiR7dmVyaWZpY2F0aW9uVG9rZW59YCxcblx0XHRleHBpcmVzQXRcblx0fSk7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gcmVkaXJlY3RUbyA/IGVuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFRvKSA6IFwiXCI7XG5cdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3Jlc2V0LXBhc3N3b3JkLyR7dmVyaWZpY2F0aW9uVG9rZW59P2NhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQuc2VuZFJlc2V0UGFzc3dvcmQoe1xuXHRcdHVzZXI6IHVzZXIudXNlcixcblx0XHR1cmwsXG5cdFx0dG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG5cdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3RhdHVzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IFwiSWYgdGhpcyBlbWFpbCBleGlzdHMgaW4gb3VyIHN5c3RlbSwgY2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIHJlc2V0IGxpbmtcIlxuXHR9KTtcbn0pO1xuY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXNldC1wYXNzd29yZC86dG9rZW5cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcImZvcmdldFBhc3N3b3JkQ2FsbGJhY2tcIixcblx0cXVlcnk6IHoub2JqZWN0KHsgY2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmRcIiB9KSB9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXNldFBhc3N3b3JkQ2FsbGJhY2tcIixcblx0XHRkZXNjcmlwdGlvbjogXCJSZWRpcmVjdHMgdGhlIHVzZXIgdG8gdGhlIGNhbGxiYWNrIFVSTCB3aXRoIHRoZSB0b2tlblwiLFxuXHRcdHBhcmFtZXRlcnM6IFt7XG5cdFx0XHRuYW1lOiBcInRva2VuXCIsXG5cdFx0XHRpbjogXCJwYXRoXCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXNldCB0aGUgcGFzc3dvcmRcIixcblx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHR9LCB7XG5cdFx0XHRuYW1lOiBcImNhbGxiYWNrVVJMXCIsXG5cdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIHJlc2V0IHRoZWlyIHBhc3N3b3JkXCIsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fV0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgdG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHRva2VuIH0gPSBjdHgucGFyYW1zO1xuXHRjb25zdCB7IGNhbGxiYWNrVVJMIH0gPSBjdHgucXVlcnk7XG5cdGlmICghdG9rZW4gfHwgIWNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RFcnJvcihjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgZXJyb3I6IFwiSU5WQUxJRF9UT0tFTlwiIH0pKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShgcmVzZXQtcGFzc3dvcmQ6JHt0b2tlbn1gKTtcblx0aWYgKCF2ZXJpZmljYXRpb24gfHwgdmVyaWZpY2F0aW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RFcnJvcihjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgZXJyb3I6IFwiSU5WQUxJRF9UT0tFTlwiIH0pKTtcblx0dGhyb3cgY3R4LnJlZGlyZWN0KHJlZGlyZWN0Q2FsbGJhY2soY3R4LmNvbnRleHQsIGNhbGxiYWNrVVJMLCB7IHRva2VuIH0pKTtcbn0pO1xuY29uc3QgcmVzZXRQYXNzd29yZCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXNldC1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInJlc2V0UGFzc3dvcmRcIixcblx0cXVlcnk6IHoub2JqZWN0KHsgdG9rZW46IHouc3RyaW5nKCkub3B0aW9uYWwoKSB9KS5vcHRpb25hbCgpLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0bmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgcGFzc3dvcmQgdG8gc2V0XCIgfSksXG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXNldCB0aGUgcGFzc3dvcmRcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwicmVzZXRQYXNzd29yZFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJlc2V0IHRoZSBwYXNzd29yZCBmb3IgYSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHRva2VuID0gY3R4LmJvZHkudG9rZW4gfHwgY3R4LnF1ZXJ5Py50b2tlbjtcblx0aWYgKCF0b2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdGNvbnN0IHsgbmV3UGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBtaW5MZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZD8uY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRjb25zdCBtYXhMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZD8uY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdGNvbnN0IGlkID0gYHJlc2V0LXBhc3N3b3JkOiR7dG9rZW59YDtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShpZCk7XG5cdGlmICghdmVyaWZpY2F0aW9uIHx8IHZlcmlmaWNhdGlvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdGNvbnN0IHVzZXJJZCA9IHZlcmlmaWNhdGlvbi52YWx1ZTtcblx0Y29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKG5ld1Bhc3N3b3JkKTtcblx0aWYgKCEoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyh1c2VySWQpKS5maW5kKChhYykgPT4gYWMucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpKSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0dXNlcklkLFxuXHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcblx0XHRhY2NvdW50SWQ6IHVzZXJJZFxuXHR9KTtcblx0ZWxzZSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlUGFzc3dvcmQodXNlcklkLCBoYXNoZWRQYXNzd29yZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb24uaWQpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5vblBhc3N3b3JkUmVzZXQpIHtcblx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZCh1c2VySWQpO1xuXHRcdGlmICh1c2VyKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQub25QYXNzd29yZFJlc2V0KHsgdXNlciB9LCBjdHgucmVxdWVzdCk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmV2b2tlU2Vzc2lvbnNPblBhc3N3b3JkUmVzZXQpIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyh1c2VySWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IHZlcmlmeVBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3ZlcmlmeS1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCB0byB2ZXJpZnlcIiB9KSB9KSxcblx0bWV0YWRhdGE6IHtcblx0XHRzY29wZTogXCJzZXJ2ZXJcIixcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJ2ZXJpZnlQYXNzd29yZFwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVmVyaWZ5IHRoZSBjdXJyZW50IHVzZXIncyBwYXNzd29yZFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH0sXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IHBhc3N3b3JkIH0gPSBjdHguYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmICghYXdhaXQgdmFsaWRhdGVQYXNzd29yZChjdHgsIHtcblx0XHRwYXNzd29yZCxcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZFxuXHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfUEFTU1dPUkQgfSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFzc3dvcmQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/session.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   freshSessionMiddleware: () => (/* binding */ freshSessionMiddleware),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionFromCtx: () => (/* binding */ getSessionFromCtx),\n/* harmony export */   listSessions: () => (/* binding */ listSessions),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* binding */ requestOnlySessionMiddleware),\n/* harmony export */   revokeOtherSessions: () => (/* binding */ revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* binding */ revokeSession),\n/* harmony export */   revokeSessions: () => (/* binding */ revokeSessions),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* binding */ sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* binding */ sessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/session.ts\nconst getSession = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/get-session\", {\n\tmethod: \"GET\",\n\toperationId: \"getSession\",\n\tquery: _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionQuerySchema,\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"getSession\",\n\t\tdescription: \"Get the current session\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tnullable: true,\n\t\t\t\tproperties: {\n\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"session\", \"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\t\tif (!sessionCookieToken) return null;\n\t\tconst sessionDataCookie = (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getChunkedCookie)(ctx, ctx.context.authCookies.sessionData.name);\n\t\tlet sessionDataPayload = null;\n\t\tif (sessionDataCookie) {\n\t\t\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\t\t\tif (strategy === \"jwe\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecodeJWT)(sessionDataCookie, ctx.context.secret, \"better-auth-session\");\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else if (strategy === \"jwt\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyJWT)(sessionDataCookie, ctx.context.secret);\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__.base64Url.decode(sessionDataCookie)));\n\t\t\t\tif (parsed) if (await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(ctx.context.secret, JSON.stringify({\n\t\t\t\t\t...parsed.session,\n\t\t\t\t\texpiresAt: parsed.expiresAt\n\t\t\t\t}), parsed.signature)) sessionDataPayload = parsed;\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst dontRememberMe = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\t/**\n\t\t* If session data is present in the cookie, check if it should be used or refreshed\n\t\t*/\n\t\tif (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n\t\t\tconst session$1 = sessionDataPayload.session;\n\t\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\t\tlet expectedVersion = \"1\";\n\t\t\tif (versionConfig) {\n\t\t\t\tif (typeof versionConfig === \"string\") expectedVersion = versionConfig;\n\t\t\t\telse if (typeof versionConfig === \"function\") {\n\t\t\t\t\tconst result = versionConfig(session$1.session, session$1.user);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((session$1.version || \"1\") !== expectedVersion) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\telse {\n\t\t\t\tconst cachedSessionExpiresAt = new Date(session$1.session.expiresAt);\n\t\t\t\tif (sessionDataPayload.expiresAt < Date.now() || cachedSessionExpiresAt < /* @__PURE__ */ new Date()) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\telse {\n\t\t\t\t\tconst cookieRefreshCache = ctx.context.sessionConfig.cookieRefreshCache;\n\t\t\t\t\tif (cookieRefreshCache === false) {\n\t\t\t\t\t\tctx.context.session = session$1;\n\t\t\t\t\t\tconst parsedSession$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedUser$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedSession$2,\n\t\t\t\t\t\t\tuser: parsedUser$2\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (sessionDataPayload.expiresAt - Date.now() < cookieRefreshCache.updateAge * 1e3) {\n\t\t\t\t\t\tconst newExpiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.session?.cookieCache?.maxAge || 300, \"sec\");\n\t\t\t\t\t\tconst refreshedSession = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\t\texpiresAt: newExpiresAt\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: session$1.user,\n\t\t\t\t\t\t\tupdatedAt: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, refreshedSession, false);\n\t\t\t\t\t\tconst parsedRefreshedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.session,\n\t\t\t\t\t\t\texpiresAt: new Date(refreshedSession.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedRefreshedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t};\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n\t\tctx.context.session = session;\n\t\tif (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\tif (session)\n /**\n\t\t\t* if session expired clean up the session\n\t\t\t*/\n\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\t/**\n\t\t* We don't need to update the session if the user doesn't want to be remembered\n\t\t* or if the session refresh is disabled\n\t\t*/\n\t\tif (dontRememberMe || ctx.query?.disableRefresh) {\n\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedSession$1,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tconst expiresIn = ctx.context.sessionConfig.expiresIn;\n\t\tconst updateAge = ctx.context.sessionConfig.updateAge;\n\t\tif (session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3 <= Date.now() && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n\t\t\tconst updatedSession = await ctx.context.internalAdapter.updateSession(session.session.token, {\n\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.sessionConfig.expiresIn, \"sec\"),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t});\n\t\t\tif (!updatedSession) {\n\t\t\t\t/**\n\t\t\t\t* Handle case where session update fails (e.g., concurrent deletion)\n\t\t\t\t*/\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json(null, { status: 401 });\n\t\t\t}\n\t\t\tconst maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setSessionCookie)(ctx, {\n\t\t\t\tsession: updatedSession,\n\t\t\t\tuser: session.user\n\t\t\t}, false, { maxAge });\n\t\t\tconst parsedUpdatedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, updatedSession);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedUpdatedSession,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, session, !!dontRememberMe);\n\t\tconst parsedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\tconst parsedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\treturn ctx.json({\n\t\t\tsession: parsedSession,\n\t\t\tuser: parsedUser\n\t\t});\n\t} catch (error) {\n\t\tctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t}\n});\nconst getSessionFromCtx = async (ctx, config) => {\n\tif (ctx.context.session) return ctx.context.session;\n\tconst session = await getSession()({\n\t\t...ctx,\n\t\tasResponse: false,\n\t\theaders: ctx.headers,\n\t\treturnHeaders: false,\n\t\treturnStatus: false,\n\t\tquery: {\n\t\t\t...config,\n\t\t\t...ctx.query\n\t\t}\n\t}).catch((e) => {\n\t\treturn null;\n\t});\n\tctx.context.session = session;\n\treturn session;\n};\n/**\n* The middleware forces the endpoint to require a valid session.\n*/\nconst sessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session and ignores cookie cache.\n* This should be used for sensitive operations like password changes, account deletion, etc.\n* to ensure that revoked sessions cannot be used even if they're still cached in cookies.\n*/\nconst sensitiveSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx, { disableCookieCache: true });\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware allows you to call the endpoint on the client if session is valid.\n* However, if called on the server, no session is required.\n*/\nconst requestOnlySessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session,\n* as well as making sure the session is fresh before proceeding.\n*\n* Session freshness check will be skipped if the session config's freshAge\n* is set to 0\n*/\nconst freshSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tif (ctx.context.sessionConfig.freshAge === 0) return { session };\n\tconst freshAge = ctx.context.sessionConfig.freshAge;\n\tconst lastUpdated = new Date(session.session.updatedAt || session.session.createdAt).getTime();\n\tif (!(Date.now() - lastUpdated < freshAge * 1e3)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: \"Session is not fresh\" });\n\treturn { session };\n});\n/**\n* user active sessions list\n*/\nconst listSessions = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/list-sessions\", {\n\tmethod: \"GET\",\n\toperationId: \"listUserSessions\",\n\tuse: [sessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserSessions\",\n\t\tdescription: \"List all active sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst activeSessions = (await ctx.context.internalAdapter.listSessions(ctx.context.session.user.id)).filter((session) => {\n\t\t\treturn session.expiresAt > /* @__PURE__ */ new Date();\n\t\t});\n\t\treturn ctx.json(activeSessions.map((session) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session)));\n\t} catch (e) {\n\t\tctx.context.logger.error(e);\n\t\tthrow ctx.error(\"INTERNAL_SERVER_ERROR\");\n\t}\n});\n/**\n* revoke a single session\n*/\nconst revokeSession = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-session\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_14__.object({ token: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The token to revoke\" }) }),\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke a single session\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: { token: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The token to revoke\"\n\t\t\t} },\n\t\t\trequired: [\"token\"]\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the session was revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token;\n\tif ((await ctx.context.internalAdapter.findSession(token))?.session.userId === ctx.context.session.user.id) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(token);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\n/**\n* revoke all user sessions\n*/\nconst revokeSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-sessions\", {\n\tmethod: \"POST\",\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tawait ctx.context.internalAdapter.deleteSessions(ctx.context.session.user.id);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\nconst revokeOtherSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-other-sessions\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all other sessions for the user except the current one\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all other sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!session.user) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tconst otherSessions = (await ctx.context.internalAdapter.listSessions(session.user.id)).filter((session$1) => {\n\t\treturn session$1.expiresAt > /* @__PURE__ */ new Date();\n\t}).filter((session$1) => session$1.token !== ctx.context.session.session.token);\n\tawait Promise.all(otherSessions.map((session$1) => ctx.context.internalAdapter.deleteSession(session$1.token)));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=session.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3Nlc3Npb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDMkI7QUFDOUM7QUFDeUM7QUFDckM7QUFDMEQ7QUFDb0I7QUFDbkQ7QUFDSDtBQUNqQjtBQUNkO0FBQ3dEO0FBQzNCO0FBQ0g7QUFDRTs7QUFFckQ7QUFDQSx5QkFBeUIsMEVBQWtCO0FBQzNDO0FBQ0E7QUFDQSxRQUFRLDZFQUFxQjtBQUM3QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNDQUFzQztBQUN0RCxhQUFhO0FBQ2IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0RUFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUVBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdFQUFZO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLDBEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdFQUFZO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLHNFQUFhLENBQUMsOERBQU0sUUFBUSxpRUFBUztBQUN4RCwwQkFBMEIsb0VBQVU7QUFDcEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsZ0VBQVk7QUFDbkU7QUFDQTtBQUNBLDBHQUEwRyxnRUFBWTtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrRUFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsMkJBQTJCLCtEQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLDJCQUEyQix3REFBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtFQUFjO0FBQzFCLHFDQUFxQyxrRUFBa0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asa0NBQWtDLCtEQUFlO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDZCQUE2QixrRUFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMEJBQTBCLCtEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHVFQUFtQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQWtCO0FBQzdDLHdCQUF3QiwrREFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0RBQU87QUFDdEI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVFQUFtQjtBQUN2Qiw0QkFBNEIsYUFBYTtBQUN6QztBQUNBO0FBQ0EsU0FBUyxvRUFBZ0I7QUFDekI7QUFDQTtBQUNBLElBQUksV0FBVyxRQUFRO0FBQ3ZCLGdDQUFnQyxrRUFBa0I7QUFDbEQsd0JBQXdCLCtEQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFFBQVEsa0VBQWM7QUFDdEIsd0JBQXdCLGtFQUFrQjtBQUMxQyxxQkFBcUIsK0RBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBLFlBQVksaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNqRztBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRFQUFvQjtBQUM5QztBQUNBLGtDQUFrQyxpREFBUTtBQUMxQyxVQUFVO0FBQ1YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQW9CO0FBQ3ZELGdEQUFnRCwwQkFBMEI7QUFDMUUsa0NBQWtDLGlEQUFRO0FBQzFDLFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEVBQW9CO0FBQ3pEO0FBQ0Esa0VBQWtFLGlEQUFRO0FBQzFFLFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNEVBQW9CO0FBQ25EO0FBQ0Esa0NBQWtDLGlEQUFRO0FBQzFDLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0EsNkRBQTZELGlEQUFRLGdCQUFnQixpQ0FBaUM7QUFDdEgsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMEVBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtEQUFrRCxrRUFBa0I7QUFDcEUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQWtCO0FBQ3hDO0FBQ0EsT0FBTyx3Q0FBUSxHQUFHLE9BQU8sd0NBQVEsVUFBVSxvQ0FBb0MsR0FBRztBQUNsRjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsaUJBQWlCLFdBQVcsc0JBQXNCO0FBQ2xEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxTQUFTO0FBQ1QsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCw0QkFBNEIsMEVBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSw4QkFBOEIsaURBQVE7QUFDdEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7O0FBRUQ7QUFDZ047QUFDaE4iLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcc2Vzc2lvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vZGIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzeW1tZXRyaWNEZWNvZGVKV1QsIHZlcmlmeUpXVCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgc2V0Q29va2llQ2FjaGUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuaW1wb3J0IHsgYmluYXJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iaW5hcnlcIjtcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2htYWNcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3Nlc3Npb24udHNcbmNvbnN0IGdldFNlc3Npb24gPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZ2V0LXNlc3Npb25cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcImdldFNlc3Npb25cIixcblx0cXVlcnk6IGdldFNlc3Npb25RdWVyeVNjaGVtYSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJnZXRTZXNzaW9uXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IHRoZSBjdXJyZW50IHNlc3Npb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH0sXG5cdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzZXNzaW9uXCIsIFwidXNlclwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2Vzc2lvbkNvb2tpZVRva2VuID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRpZiAoIXNlc3Npb25Db29raWVUb2tlbikgcmV0dXJuIG51bGw7XG5cdFx0Y29uc3Qgc2Vzc2lvbkRhdGFDb29raWUgPSBnZXRDaHVua2VkQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSk7XG5cdFx0bGV0IHNlc3Npb25EYXRhUGF5bG9hZCA9IG51bGw7XG5cdFx0aWYgKHNlc3Npb25EYXRhQ29va2llKSB7XG5cdFx0XHRjb25zdCBzdHJhdGVneSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnN0cmF0ZWd5IHx8IFwiY29tcGFjdFwiO1xuXHRcdFx0aWYgKHN0cmF0ZWd5ID09PSBcImp3ZVwiKSB7XG5cdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCBzeW1tZXRyaWNEZWNvZGVKV1Qoc2Vzc2lvbkRhdGFDb29raWUsIGN0eC5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIpO1xuXHRcdFx0XHRpZiAocGF5bG9hZCAmJiBwYXlsb2FkLnNlc3Npb24gJiYgcGF5bG9hZC51c2VyKSBzZXNzaW9uRGF0YVBheWxvYWQgPSB7XG5cdFx0XHRcdFx0c2Vzc2lvbjoge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGF5bG9hZC5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogcGF5bG9hZC51c2VyLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBwYXlsb2FkLnVwZGF0ZWRBdCxcblx0XHRcdFx0XHRcdHZlcnNpb246IHBheWxvYWQudmVyc2lvblxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXhwaXJlc0F0OiBwYXlsb2FkLmV4cCA/IHBheWxvYWQuZXhwICogMWUzIDogRGF0ZS5ub3coKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG5cdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlKV1Qoc2Vzc2lvbkRhdGFDb29raWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHNlc3Npb25EYXRhUGF5bG9hZCA9IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXlsb2FkLnVzZXIsXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHBheWxvYWQudXBkYXRlZEF0LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogcGF5bG9hZC52ZXJzaW9uXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBheWxvYWQuZXhwID8gcGF5bG9hZC5leHAgKiAxZTMgOiBEYXRlLm5vdygpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhQ29va2llKSkpO1xuXHRcdFx0XHRpZiAocGFyc2VkKSBpZiAoYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS52ZXJpZnkoY3R4LmNvbnRleHQuc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0Li4ucGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdFx0ZXhwaXJlc0F0OiBwYXJzZWQuZXhwaXJlc0F0XG5cdFx0XHRcdH0pLCBwYXJzZWQuc2lnbmF0dXJlKSkgc2Vzc2lvbkRhdGFQYXlsb2FkID0gcGFyc2VkO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGRvbnRSZW1lbWJlck1lID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdC8qKlxuXHRcdCogSWYgc2Vzc2lvbiBkYXRhIGlzIHByZXNlbnQgaW4gdGhlIGNvb2tpZSwgY2hlY2sgaWYgaXQgc2hvdWxkIGJlIHVzZWQgb3IgcmVmcmVzaGVkXG5cdFx0Ki9cblx0XHRpZiAoc2Vzc2lvbkRhdGFQYXlsb2FkPy5zZXNzaW9uICYmIGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LmVuYWJsZWQgJiYgIWN0eC5xdWVyeT8uZGlzYWJsZUNvb2tpZUNhY2hlKSB7XG5cdFx0XHRjb25zdCBzZXNzaW9uJDEgPSBzZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbjtcblx0XHRcdGNvbnN0IHZlcnNpb25Db25maWcgPSBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy52ZXJzaW9uO1xuXHRcdFx0bGV0IGV4cGVjdGVkVmVyc2lvbiA9IFwiMVwiO1xuXHRcdFx0aWYgKHZlcnNpb25Db25maWcpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcInN0cmluZ1wiKSBleHBlY3RlZFZlcnNpb24gPSB2ZXJzaW9uQ29uZmlnO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgdmVyc2lvbkNvbmZpZyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gdmVyc2lvbkNvbmZpZyhzZXNzaW9uJDEuc2Vzc2lvbiwgc2Vzc2lvbiQxLnVzZXIpO1xuXHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICgoc2Vzc2lvbiQxLnZlcnNpb24gfHwgXCIxXCIpICE9PSBleHBlY3RlZFZlcnNpb24pIGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCBjYWNoZWRTZXNzaW9uRXhwaXJlc0F0ID0gbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uZXhwaXJlc0F0KTtcblx0XHRcdFx0aWYgKHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXQgPCBEYXRlLm5vdygpIHx8IGNhY2hlZFNlc3Npb25FeHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBjb29raWVSZWZyZXNoQ2FjaGUgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmNvb2tpZVJlZnJlc2hDYWNoZTtcblx0XHRcdFx0XHRpZiAoY29va2llUmVmcmVzaENhY2hlID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb24kMTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24kMiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFVzZXIkMiA9IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnVzZXIudXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uJDIsXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMlxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChzZXNzaW9uRGF0YVBheWxvYWQuZXhwaXJlc0F0IC0gRGF0ZS5ub3coKSA8IGNvb2tpZVJlZnJlc2hDYWNoZS51cGRhdGVBZ2UgKiAxZTMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0V4cGlyZXNBdCA9IGdldERhdGUoY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMCwgXCJzZWNcIik7XG5cdFx0XHRcdFx0XHRjb25zdCByZWZyZXNoZWRTZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXdFeHBpcmVzQXRcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dXNlcjogc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGF3YWl0IHNldENvb2tpZUNhY2hlKGN0eCwgcmVmcmVzaGVkU2Vzc2lvbiwgZmFsc2UpO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkUmVmcmVzaGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShyZWZyZXNoZWRTZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRSZWZyZXNoZWRVc2VyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucmVmcmVzaGVkU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24udXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24udXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGN0eC5jb250ZXh0LnNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFJlZnJlc2hlZFNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFJlZnJlc2hlZFVzZXJcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRSZWZyZXNoZWRTZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBwYXJzZWRSZWZyZXNoZWRVc2VyXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQxID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdC4uLnNlc3Npb24kMS51c2VyLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24oc2Vzc2lvbkNvb2tpZVRva2VuKTtcblx0XHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbjtcblx0XHRpZiAoIXNlc3Npb24gfHwgc2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB7XG5cdFx0XHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdFx0XHRpZiAoc2Vzc2lvbilcbiAvKipcblx0XHRcdCogaWYgc2Vzc2lvbiBleHBpcmVkIGNsZWFuIHVwIHRoZSBzZXNzaW9uXG5cdFx0XHQqL1xuXHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0XHRcdHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBXZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgc2Vzc2lvbiBpZiB0aGUgdXNlciBkb2Vzbid0IHdhbnQgdG8gYmUgcmVtZW1iZXJlZFxuXHRcdCogb3IgaWYgdGhlIHNlc3Npb24gcmVmcmVzaCBpcyBkaXNhYmxlZFxuXHRcdCovXG5cdFx0aWYgKGRvbnRSZW1lbWJlck1lIHx8IGN0eC5xdWVyeT8uZGlzYWJsZVJlZnJlc2gpIHtcblx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24kMSA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnNlc3Npb24pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uJDEsXG5cdFx0XHRcdHVzZXI6IHBhcnNlZFVzZXIkMVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGV4cGlyZXNJbiA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZXhwaXJlc0luO1xuXHRcdGNvbnN0IHVwZGF0ZUFnZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcudXBkYXRlQWdlO1xuXHRcdGlmIChzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0LnZhbHVlT2YoKSAtIGV4cGlyZXNJbiAqIDFlMyArIHVwZGF0ZUFnZSAqIDFlMyA8PSBEYXRlLm5vdygpICYmICghY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCB8fCAhY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5kaXNhYmxlU2Vzc2lvblJlZnJlc2gpKSB7XG5cdFx0XHRjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbi50b2tlbiwge1xuXHRcdFx0XHRleHBpcmVzQXQ6IGdldERhdGUoY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW4sIFwic2VjXCIpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHR9KTtcblx0XHRcdGlmICghdXBkYXRlZFNlc3Npb24pIHtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogSGFuZGxlIGNhc2Ugd2hlcmUgc2Vzc2lvbiB1cGRhdGUgZmFpbHMgKGUuZy4sIGNvbmN1cnJlbnQgZGVsZXRpb24pXG5cdFx0XHRcdCovXG5cdFx0XHRcdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwsIHsgc3RhdHVzOiA0MDEgfSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBtYXhBZ2UgPSAodXBkYXRlZFNlc3Npb24uZXhwaXJlc0F0LnZhbHVlT2YoKSAtIERhdGUubm93KCkpIC8gMWUzO1xuXHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0c2Vzc2lvbjogdXBkYXRlZFNlc3Npb24sXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdFx0fSwgZmFsc2UsIHsgbWF4QWdlIH0pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXBkYXRlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXBkYXRlZFNlc3Npb24pO1xuXHRcdFx0Y29uc3QgcGFyc2VkVXNlciQxID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRzZXNzaW9uOiBwYXJzZWRVcGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0YXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uLCAhIWRvbnRSZW1lbWJlck1lKTtcblx0XHRjb25zdCBwYXJzZWRTZXNzaW9uID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24uc2Vzc2lvbik7XG5cdFx0Y29uc3QgcGFyc2VkVXNlciA9IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnVzZXIpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzZXNzaW9uOiBwYXJzZWRTZXNzaW9uLFxuXHRcdFx0dXNlcjogcGFyc2VkVXNlclxuXHRcdH0pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1NFU1NJT04gfSk7XG5cdH1cbn0pO1xuY29uc3QgZ2V0U2Vzc2lvbkZyb21DdHggPSBhc3luYyAoY3R4LCBjb25maWcpID0+IHtcblx0aWYgKGN0eC5jb250ZXh0LnNlc3Npb24pIHJldHVybiBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbigpKHtcblx0XHQuLi5jdHgsXG5cdFx0YXNSZXNwb25zZTogZmFsc2UsXG5cdFx0aGVhZGVyczogY3R4LmhlYWRlcnMsXG5cdFx0cmV0dXJuSGVhZGVyczogZmFsc2UsXG5cdFx0cmV0dXJuU3RhdHVzOiBmYWxzZSxcblx0XHRxdWVyeToge1xuXHRcdFx0Li4uY29uZmlnLFxuXHRcdFx0Li4uY3R4LnF1ZXJ5XG5cdFx0fVxuXHR9KS5jYXRjaCgoZSkgPT4ge1xuXHRcdHJldHVybiBudWxsO1xuXHR9KTtcblx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb247XG5cdHJldHVybiBzZXNzaW9uO1xufTtcbi8qKlxuKiBUaGUgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uLlxuKi9cbmNvbnN0IHNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uIGFuZCBpZ25vcmVzIGNvb2tpZSBjYWNoZS5cbiogVGhpcyBzaG91bGQgYmUgdXNlZCBmb3Igc2Vuc2l0aXZlIG9wZXJhdGlvbnMgbGlrZSBwYXNzd29yZCBjaGFuZ2VzLCBhY2NvdW50IGRlbGV0aW9uLCBldGMuXG4qIHRvIGVuc3VyZSB0aGF0IHJldm9rZWQgc2Vzc2lvbnMgY2Fubm90IGJlIHVzZWQgZXZlbiBpZiB0aGV5J3JlIHN0aWxsIGNhY2hlZCBpbiBjb29raWVzLlxuKi9cbmNvbnN0IHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4LCB7IGRpc2FibGVDb29raWVDYWNoZTogdHJ1ZSB9KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBhbGxvd3MgeW91IHRvIGNhbGwgdGhlIGVuZHBvaW50IG9uIHRoZSBjbGllbnQgaWYgc2Vzc2lvbiBpcyB2YWxpZC5cbiogSG93ZXZlciwgaWYgY2FsbGVkIG9uIHRoZSBzZXJ2ZXIsIG5vIHNlc3Npb24gaXMgcmVxdWlyZWQuXG4qL1xuY29uc3QgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSA9IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmICghc2Vzc2lvbj8uc2Vzc2lvbiAmJiAoY3R4LnJlcXVlc3QgfHwgY3R4LmhlYWRlcnMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIFRoaXMgbWlkZGxld2FyZSBmb3JjZXMgdGhlIGVuZHBvaW50IHRvIHJlcXVpcmUgYSB2YWxpZCBzZXNzaW9uLFxuKiBhcyB3ZWxsIGFzIG1ha2luZyBzdXJlIHRoZSBzZXNzaW9uIGlzIGZyZXNoIGJlZm9yZSBwcm9jZWVkaW5nLlxuKlxuKiBTZXNzaW9uIGZyZXNobmVzcyBjaGVjayB3aWxsIGJlIHNraXBwZWQgaWYgdGhlIHNlc3Npb24gY29uZmlnJ3MgZnJlc2hBZ2VcbiogaXMgc2V0IHRvIDBcbiovXG5jb25zdCBmcmVzaFNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlID09PSAwKSByZXR1cm4geyBzZXNzaW9uIH07XG5cdGNvbnN0IGZyZXNoQWdlID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5mcmVzaEFnZTtcblx0Y29uc3QgbGFzdFVwZGF0ZWQgPSBuZXcgRGF0ZShzZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0IHx8IHNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcblx0aWYgKCEoRGF0ZS5ub3coKSAtIGxhc3RVcGRhdGVkIDwgZnJlc2hBZ2UgKiAxZTMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBcIlNlc3Npb24gaXMgbm90IGZyZXNoXCIgfSk7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuLyoqXG4qIHVzZXIgYWN0aXZlIHNlc3Npb25zIGxpc3RcbiovXG5jb25zdCBsaXN0U2Vzc2lvbnMgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbGlzdC1zZXNzaW9uc1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwibGlzdFVzZXJTZXNzaW9uc1wiLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwibGlzdFVzZXJTZXNzaW9uc1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgYWxsIGFjdGl2ZSBzZXNzaW9ucyBmb3IgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1Nlc3Npb25cIiB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBhY3RpdmVTZXNzaW9ucyA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlzdFNlc3Npb25zKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkpLmZpbHRlcigoc2Vzc2lvbikgPT4ge1xuXHRcdFx0cmV0dXJuIHNlc3Npb24uZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKGFjdGl2ZVNlc3Npb25zLm1hcCgoc2Vzc2lvbikgPT4gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24pKSk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoZSk7XG5cdFx0dGhyb3cgY3R4LmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG59KTtcbi8qKlxuKiByZXZva2UgYSBzaW5nbGUgc2Vzc2lvblxuKi9cbmNvbnN0IHJldm9rZVNlc3Npb24gPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmV2b2tlLXNlc3Npb25cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7IHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCIgfSkgfSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZXZva2UgYSBzaW5nbGUgc2Vzc2lvblwiLFxuXHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0cHJvcGVydGllczogeyB0b2tlbjoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gcmV2b2tlXCJcblx0XHRcdH0gfSxcblx0XHRcdHJlcXVpcmVkOiBbXCJ0b2tlblwiXVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBzZXNzaW9uIHdhcyByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHRva2VuID0gY3R4LmJvZHkudG9rZW47XG5cdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHRva2VuKSk/LnNlc3Npb24udXNlcklkID09PSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpIHRyeSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24odG9rZW4pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZXJyb3IgPyBlcnJvci5uYW1lIDogXCJcIiwgZXJyb3IpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiKTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbi8qKlxuKiByZXZva2UgYWxsIHVzZXIgc2Vzc2lvbnNcbiovXG5jb25zdCByZXZva2VTZXNzaW9ucyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utc2Vzc2lvbnNcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiUmV2b2tlIGFsbCBzZXNzaW9ucyBmb3IgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHR0cnkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZXJyb3IgPyBlcnJvci5uYW1lIDogXCJcIiwgZXJyb3IpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiKTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IHJldm9rZU90aGVyU2Vzc2lvbnMgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcmV2b2tlLW90aGVyLXNlc3Npb25zXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhbGwgb3RoZXIgc2Vzc2lvbnMgZm9yIHRoZSB1c2VyIGV4Y2VwdCB0aGUgY3VycmVudCBvbmVcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgYWxsIG90aGVyIHNlc3Npb25zIHdlcmUgcmV2b2tlZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFzZXNzaW9uLnVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3Qgb3RoZXJTZXNzaW9ucyA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlzdFNlc3Npb25zKHNlc3Npb24udXNlci5pZCkpLmZpbHRlcigoc2Vzc2lvbiQxKSA9PiB7XG5cdFx0cmV0dXJuIHNlc3Npb24kMS5leHBpcmVzQXQgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0fSkuZmlsdGVyKChzZXNzaW9uJDEpID0+IHNlc3Npb24kMS50b2tlbiAhPT0gY3R4LmNvbnRleHQuc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0YXdhaXQgUHJvbWlzZS5hbGwob3RoZXJTZXNzaW9ucy5tYXAoKHNlc3Npb24kMSkgPT4gY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbiQxLnRva2VuKSkpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-in.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signInEmail: () => (/* binding */ signInEmail),\n/* harmony export */   signInSocial: () => (/* binding */ signInSocial)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-in.ts\nconst socialSignInBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to after the user has signed in\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to if an error happens\" }).optional(),\n\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__.SocialProviderListEnum,\n\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\tidToken: zod__WEBPACK_IMPORTED_MODULE_11__.optional(zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"ID token from the provider\" }),\n\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Nonce used to generate the token\" }).optional(),\n\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Access token from the provider\" }).optional(),\n\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Refresh token from the provider\" }).optional(),\n\t\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_11__.number().meta({ description: \"Expiry date of the token\" }).optional()\n\t})),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string()).meta({ description: \"Array of scopes to request from the provider. This will override the default scopes passed.\" }).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\" }).optional(),\n\tloginHint: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The login hint to use for the authorization code request\" }).optional(),\n\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).optional().meta({ description: \"Additional data to be passed through the OAuth flow\" })\n});\nconst signInSocial = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/social\", {\n\tmethod: \"POST\",\n\toperationId: \"socialSignIn\",\n\tbody: socialSignInBodySchema,\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\tdescription: \"Sign in with a social provider\",\n\t\t\toperationId: \"socialSignIn\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttoken: { type: \"string\" },\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst userInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!userInfo || !userInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tif (!userInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tconst data = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__.handleOAuthUserInfo)(c, {\n\t\t\tuserInfo: {\n\t\t\t\t...userInfo.user,\n\t\t\t\temail: userInfo.user.email,\n\t\t\t\tid: String(userInfo.user.id),\n\t\t\t\tname: userInfo.user.name || \"\",\n\t\t\t\timage: userInfo.user.image,\n\t\t\t\temailVerified: userInfo.user.emailVerified || false\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: String(userInfo.user.id),\n\t\t\t\taccessToken: c.body.idToken.accessToken\n\t\t\t},\n\t\t\tcallbackURL: c.body.callbackURL,\n\t\t\tdisableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n\t\t});\n\t\tif (data.error) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: data.error });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(c, data.data);\n\t\treturn c.json({\n\t\t\tredirect: false,\n\t\t\ttoken: data.data.session.token,\n\t\t\turl: void 0,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(c.context.options, data.data.user)\n\t\t});\n\t}\n\tconst { codeVerifier, state } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateState)(c, void 0, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate,\n\t\tcodeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes,\n\t\tloginHint: c.body.loginHint\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst signInEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signInEmail\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.formCsrfMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Email of the user\" }),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Password of the user\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to use as a redirect for email verification\" }).optional(),\n\t\trememberMe: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"If this is false, the session will not be remembered. Default is `true`.\" }).default(true).optional()\n\t}),\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signInEmail\",\n\t\t\tdescription: \"Sign in with email and password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tif (!ctx.context.options?.emailAndPassword?.enabled) {\n\t\tctx.context.logger.error(\"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password is not enabled\" });\n\t}\n\tconst { email, password } = ctx.body;\n\tif (!zod__WEBPACK_IMPORTED_MODULE_11__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"User not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst credentialAccount = user.accounts.find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Credential account not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Password not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__.createEmailVerificationToken)(ctx.context.secret, user.user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: user.user,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t}, ctx.body.rememberMe === false);\n\tif (ctx.body.callbackURL) ctx.setHeader(\"Location\", ctx.body.callbackURL);\n\treturn ctx.json({\n\t\tredirect: !!ctx.body.callbackURL,\n\t\ttoken: session.token,\n\t\turl: ctx.body.callbackURL,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user.user)\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-in.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24taW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNEO0FBQ2U7QUFDVjtBQUNKO0FBQ2E7QUFDSTtBQUN6QztBQUM0QjtBQUNwQjtBQUNkO0FBQ21EO0FBQ2pCOztBQUUzRDtBQUNBLCtCQUErQix3Q0FBUTtBQUN2QyxjQUFjLHdDQUFRLFVBQVUseUVBQXlFO0FBQ3pHLHFCQUFxQix3Q0FBUTtBQUM3QixtQkFBbUIsd0NBQVEsVUFBVSxnRUFBZ0U7QUFDckcsV0FBVyxzRkFBc0I7QUFDakMsa0JBQWtCLHlDQUFTLFVBQVUsNEdBQTRHO0FBQ2pKLFVBQVUsMENBQVUsQ0FBQyx3Q0FBUTtBQUM3QixTQUFTLHdDQUFRLFVBQVUsMkNBQTJDO0FBQ3RFLFNBQVMsd0NBQVEsVUFBVSxpREFBaUQ7QUFDNUUsZUFBZSx3Q0FBUSxVQUFVLCtDQUErQztBQUNoRixnQkFBZ0Isd0NBQVEsVUFBVSxnREFBZ0Q7QUFDbEYsYUFBYSx3Q0FBUSxVQUFVLHlDQUF5QztBQUN4RSxFQUFFO0FBQ0YsU0FBUyx1Q0FBTyxDQUFDLHdDQUFRLFdBQVcsNEdBQTRHO0FBQ2hKLGdCQUFnQix5Q0FBUyxVQUFVLHdHQUF3RztBQUMzSSxZQUFZLHdDQUFRLFVBQVUseUVBQXlFO0FBQ3ZHLGlCQUFpQix3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUssc0JBQXNCLG9FQUFvRTtBQUNySSxDQUFDO0FBQ0QsMkJBQTJCLDBFQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLG9HQUFvRywyQkFBMkI7QUFDL0gsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSwyQkFBMkI7QUFDMUcsYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IseUJBQXlCO0FBQ3ZGO0FBQ0EsVUFBVSxlQUFlO0FBQ3pCO0FBQ0EsZ0RBQWdELDJCQUEyQjtBQUMzRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHVEQUF1RCwyQkFBMkI7QUFDbEYsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsMEJBQTBCO0FBQzNGO0FBQ0E7QUFDQSxvREFBb0QsMkJBQTJCO0FBQy9FLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLHVCQUF1QjtBQUN4RjtBQUNBLHFCQUFxQiw2RUFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsaURBQVEsbUJBQW1CLHFCQUFxQjtBQUM1RSxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNIO0FBQ0EsU0FBUyxzQkFBc0IsUUFBUSxnRUFBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLFlBQVksWUFBWTtBQUM1RDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCwwQkFBMEIsMEVBQWtCO0FBQzVDO0FBQ0E7QUFDQSxPQUFPLDZFQUFrQjtBQUN6QixPQUFPLHdDQUFRO0FBQ2YsU0FBUyx3Q0FBUSxVQUFVLGtDQUFrQztBQUM3RCxZQUFZLHdDQUFRLFVBQVUscUNBQXFDO0FBQ25FLGVBQWUsd0NBQVEsVUFBVSx5RUFBeUU7QUFDMUcsY0FBYyx5Q0FBUyxVQUFVLHlGQUF5RjtBQUMxSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsOENBQThDO0FBQ3BGO0FBQ0EsU0FBUyxrQkFBa0I7QUFDM0IsTUFBTSx1Q0FBTyx1Q0FBdUMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN2SCx5RUFBeUUsdUJBQXVCO0FBQ2hHO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RCxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsT0FBTztBQUNwRSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsT0FBTztBQUMxRCxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBLGdGQUFnRixpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3RKO0FBQ0EsdUJBQXVCLHFGQUE0QjtBQUNuRDtBQUNBLGtCQUFrQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQzNGO0FBQ0EsT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QixFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFxzaWduLWluLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZm9ybUNzcmZNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgaGFuZGxlT0F1dGhVc2VySW5mbyB9IGZyb20gXCIuLi8uLi9vYXV0aDIvbGluay1hY2NvdW50Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgU29jaWFsUHJvdmlkZXJMaXN0RW51bSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9zb2NpYWwtcHJvdmlkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLWluLnRzXG5jb25zdCBzb2NpYWxTaWduSW5Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGhhcyBzaWduZWQgaW5cIiB9KS5vcHRpb25hbCgpLFxuXHRuZXdVc2VyQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGlmIGFuIGVycm9yIGhhcHBlbnNcIiB9KS5vcHRpb25hbCgpLFxuXHRwcm92aWRlcjogU29jaWFsUHJvdmlkZXJMaXN0RW51bSxcblx0ZGlzYWJsZVJlZGlyZWN0OiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyLiBVc2VmdWwgZm9yIGhhbmRsaW5nIHRoZSByZWRpcmVjdGlvbiB5b3Vyc2VsZlwiIH0pLm9wdGlvbmFsKCksXG5cdGlkVG9rZW46IHoub3B0aW9uYWwoei5vYmplY3Qoe1xuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJJRCB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclwiIH0pLFxuXHRcdG5vbmNlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJOb25jZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0b2tlblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0YWNjZXNzVG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFjY2VzcyB0b2tlbiBmcm9tIHRoZSBwcm92aWRlclwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJSZWZyZXNoIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0XHRleHBpcmVzQXQ6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkV4cGlyeSBkYXRlIG9mIHRoZSB0b2tlblwiIH0pLm9wdGlvbmFsKClcblx0fSkpLFxuXHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFycmF5IG9mIHNjb3BlcyB0byByZXF1ZXN0IGZyb20gdGhlIHByb3ZpZGVyLiBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2NvcGVzIHBhc3NlZC5cIiB9KS5vcHRpb25hbCgpLFxuXHRyZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXhwbGljaXRseSByZXF1ZXN0IHNpZ24tdXAuIFVzZWZ1bCB3aGVuIGRpc2FibGVJbXBsaWNpdFNpZ25VcCBpcyB0cnVlIGZvciB0aGlzIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0bG9naW5IaW50OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbG9naW4gaGludCB0byB1c2UgZm9yIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgcmVxdWVzdFwiIH0pLm9wdGlvbmFsKCksXG5cdGFkZGl0aW9uYWxEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJBZGRpdGlvbmFsIGRhdGEgdG8gYmUgcGFzc2VkIHRocm91Z2ggdGhlIE9BdXRoIGZsb3dcIiB9KVxufSk7XG5jb25zdCBzaWduSW5Tb2NpYWwgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvc2lnbi1pbi9zb2NpYWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzb2NpYWxTaWduSW5cIixcblx0Ym9keTogc29jaWFsU2lnbkluQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHtcblx0XHQkSW5mZXI6IHtcblx0XHRcdGJvZHk6IHt9LFxuXHRcdFx0cmV0dXJuZWQ6IHt9XG5cdFx0fSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggYSBzb2NpYWwgcHJvdmlkZXJcIixcblx0XHRcdG9wZXJhdGlvbklkOiBcInNvY2lhbFNpZ25JblwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2VzcyAtIFJldHVybnMgZWl0aGVyIHNlc3Npb24gZGV0YWlscyBvciByZWRpcmVjdCBVUkxcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gcmVzcG9uc2Ugd2hlbiBpZFRva2VuIGlzIHByb3ZpZGVkXCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0dG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHQkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVybDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRyZWRpcmVjdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW2ZhbHNlXVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwicmVkaXJlY3RcIixcblx0XHRcdFx0XHRcdFwidG9rZW5cIixcblx0XHRcdFx0XHRcdFwidXNlclwiXG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5ib2R5LnByb3ZpZGVyKTtcblx0aWYgKCFwcm92aWRlcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBub3QgZm91bmQuIE1ha2Ugc3VyZSB0byBhZGQgdGhlIHByb3ZpZGVyIGluIHlvdXIgYXV0aCBjb25maWdcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUFJPVklERVJfTk9UX0ZPVU5EIH0pO1xuXHR9XG5cdGlmIChjLmJvZHkuaWRUb2tlbikge1xuXHRcdGlmICghcHJvdmlkZXIudmVyaWZ5SWRUb2tlbikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRvZXMgbm90IHN1cHBvcnQgaWQgdG9rZW4gdmVyaWZpY2F0aW9uXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSURfVE9LRU5fTk9UX1NVUFBPUlRFRCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyB0b2tlbiwgbm9uY2UgfSA9IGMuYm9keS5pZFRva2VuO1xuXHRcdGlmICghYXdhaXQgcHJvdmlkZXIudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZCB0b2tlblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IHVzZXJJbmZvID0gYXdhaXQgcHJvdmlkZXIuZ2V0VXNlckluZm8oe1xuXHRcdFx0aWRUb2tlbjogdG9rZW4sXG5cdFx0XHRhY2Nlc3NUb2tlbjogYy5ib2R5LmlkVG9rZW4uYWNjZXNzVG9rZW4sXG5cdFx0XHRyZWZyZXNoVG9rZW46IGMuYm9keS5pZFRva2VuLnJlZnJlc2hUb2tlblxuXHRcdH0pO1xuXHRcdGlmICghdXNlckluZm8gfHwgIXVzZXJJbmZvPy51c2VyKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0XHR9XG5cdFx0aWYgKCF1c2VySW5mby51c2VyLmVtYWlsKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlciBlbWFpbCBub3QgZm91bmRcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0VNQUlMX05PVF9GT1VORCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGhhbmRsZU9BdXRoVXNlckluZm8oYywge1xuXHRcdFx0dXNlckluZm86IHtcblx0XHRcdFx0Li4udXNlckluZm8udXNlcixcblx0XHRcdFx0ZW1haWw6IHVzZXJJbmZvLnVzZXIuZW1haWwsXG5cdFx0XHRcdGlkOiBTdHJpbmcodXNlckluZm8udXNlci5pZCksXG5cdFx0XHRcdG5hbWU6IHVzZXJJbmZvLnVzZXIubmFtZSB8fCBcIlwiLFxuXHRcdFx0XHRpbWFnZTogdXNlckluZm8udXNlci5pbWFnZSxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogdXNlckluZm8udXNlci5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0YWNjb3VudDoge1xuXHRcdFx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRcdFx0YWNjb3VudElkOiBTdHJpbmcodXNlckluZm8udXNlci5pZCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlblxuXHRcdFx0fSxcblx0XHRcdGNhbGxiYWNrVVJMOiBjLmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0XHRkaXNhYmxlU2lnblVwOiBwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAgJiYgIWMuYm9keS5yZXF1ZXN0U2lnblVwIHx8IHByb3ZpZGVyLmRpc2FibGVTaWduVXBcblx0XHR9KTtcblx0XHRpZiAoZGF0YS5lcnJvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogZGF0YS5lcnJvciB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGMsIGRhdGEuZGF0YSk7XG5cdFx0cmV0dXJuIGMuanNvbih7XG5cdFx0XHRyZWRpcmVjdDogZmFsc2UsXG5cdFx0XHR0b2tlbjogZGF0YS5kYXRhLnNlc3Npb24udG9rZW4sXG5cdFx0XHR1cmw6IHZvaWQgMCxcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjLmNvbnRleHQub3B0aW9ucywgZGF0YS5kYXRhLnVzZXIpXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgeyBjb2RlVmVyaWZpZXIsIHN0YXRlIH0gPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGMsIHZvaWQgMCwgYy5ib2R5LmFkZGl0aW9uYWxEYXRhKTtcblx0Y29uc3QgdXJsID0gYXdhaXQgcHJvdmlkZXIuY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0c3RhdGUsXG5cdFx0Y29kZVZlcmlmaWVyLFxuXHRcdHJlZGlyZWN0VVJJOiBgJHtjLmNvbnRleHQuYmFzZVVSTH0vY2FsbGJhY2svJHtwcm92aWRlci5pZH1gLFxuXHRcdHNjb3BlczogYy5ib2R5LnNjb3Blcyxcblx0XHRsb2dpbkhpbnQ6IGMuYm9keS5sb2dpbkhpbnRcblx0fSk7XG5cdGlmICghYy5ib2R5LmRpc2FibGVSZWRpcmVjdCkgYy5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCB1cmwudG9TdHJpbmcoKSk7XG5cdHJldHVybiBjLmpzb24oe1xuXHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0cmVkaXJlY3Q6ICFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0XG5cdH0pO1xufSk7XG5jb25zdCBzaWduSW5FbWFpbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL2VtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnbkluRW1haWxcIixcblx0dXNlOiBbZm9ybUNzcmZNaWRkbGV3YXJlXSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFbWFpbCBvZiB0aGUgdXNlclwiIH0pLFxuXHRcdHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJQYXNzd29yZCBvZiB0aGUgdXNlclwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gdXNlIGFzIGEgcmVkaXJlY3QgZm9yIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cmVtZW1iZXJNZTogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklmIHRoaXMgaXMgZmFsc2UsIHRoZSBzZXNzaW9uIHdpbGwgbm90IGJlIHJlbWVtYmVyZWQuIERlZmF1bHQgaXMgYHRydWVgLlwiIH0pLmRlZmF1bHQodHJ1ZSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHtcblx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsIFwiYXBwbGljYXRpb24vanNvblwiXSxcblx0XHQkSW5mZXI6IHtcblx0XHRcdGJvZHk6IHt9LFxuXHRcdFx0cmV0dXJuZWQ6IHt9XG5cdFx0fSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJzaWduSW5FbWFpbFwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2VzcyAtIFJldHVybnMgZWl0aGVyIHNlc3Npb24gZGV0YWlscyBvciByZWRpcmVjdCBVUkxcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gcmVzcG9uc2Ugd2hlbiBpZFRva2VuIGlzIHByb3ZpZGVkXCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0cmVkaXJlY3Q6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGVudW06IFtmYWxzZV1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTZXNzaW9uIHRva2VuXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1cmw6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJyZWRpcmVjdFwiLFxuXHRcdFx0XHRcdFx0XCJ0b2tlblwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VyXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbEFuZFBhc3N3b3JkPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgYW5kIHBhc3N3b3JkIGlzIG5vdCBlbmFibGVkLiBNYWtlIHN1cmUgdG8gZW5hYmxlIGl0IGluIHRoZSBvcHRpb25zIG9uIHlvdSBgYXV0aC50c2AgZmlsZS4gQ2hlY2sgYGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvYXV0aGVudGljYXRpb24vZW1haWwtcGFzc3dvcmRgIGZvciBtb3JlIVwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIGlzIG5vdCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRpZiAoIXouZW1haWwoKS5zYWZlUGFyc2UoZW1haWwpLnN1Y2Nlc3MpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMIH0pO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwgeyBpbmNsdWRlQWNjb3VudHM6IHRydWUgfSk7XG5cdGlmICghdXNlcikge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGNvbnN0IGNyZWRlbnRpYWxBY2NvdW50ID0gdXNlci5hY2NvdW50cy5maW5kKChhKSA9PiBhLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcblx0aWYgKCFjcmVkZW50aWFsQWNjb3VudCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkNyZWRlbnRpYWwgYWNjb3VudCBub3QgZm91bmRcIiwgeyBlbWFpbCB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuXHRpZiAoIWN1cnJlbnRQYXNzd29yZCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkXG5cdH0pKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBwYXNzd29yZFwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsQW5kUGFzc3dvcmQ/LnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbiAmJiAhdXNlci51c2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTk9UX1ZFUklGSUVEIH0pO1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zPy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZE9uU2lnbkluKSB7XG5cdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCB1c2VyLnVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdGNvbnN0IGNhbGxiYWNrVVJMID0gY3R4LmJvZHkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjogdXNlci51c2VyLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHRcdHRva2VuXG5cdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX05PVF9WRVJJRklFRCB9KTtcblx0fVxuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci51c2VyLmlkLCBjdHguYm9keS5yZW1lbWJlck1lID09PSBmYWxzZSk7XG5cdGlmICghc2Vzc2lvbikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0fVxuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlcjogdXNlci51c2VyXG5cdH0sIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0aWYgKGN0eC5ib2R5LmNhbGxiYWNrVVJMKSBjdHguc2V0SGVhZGVyKFwiTG9jYXRpb25cIiwgY3R4LmJvZHkuY2FsbGJhY2tVUkwpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHJlZGlyZWN0OiAhIWN0eC5ib2R5LmNhbGxiYWNrVVJMLFxuXHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdHVybDogY3R4LmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIudXNlcilcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduLWluLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-out.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/sign-out.ts\nconst signOut = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/sign-out\", {\n\tmethod: \"POST\",\n\toperationId: \"signOut\",\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"signOut\",\n\t\tdescription: \"Sign out the current user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\tif (sessionCookieToken) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t} catch (e) {\n\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t}\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.deleteSessionCookie)(ctx);\n\treturn ctx.json({ success: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-out.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24tb3V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7QUFDSDs7QUFFM0Q7QUFDQSxnQkFBZ0IseUVBQWtCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQixtQkFBbUIsZUFBZTtBQUNsQyxDQUFDOztBQUVEO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXBpXFxyb3V0ZXNcXHNpZ24tb3V0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWxldGVTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLW91dC50c1xuY29uc3Qgc2lnbk91dCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLW91dFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNpZ25PdXRcIixcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJzaWduT3V0XCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBvdXQgdGhlIGN1cnJlbnQgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN1Y2Nlc3M6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbkNvb2tpZVRva2VuID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0aWYgKHNlc3Npb25Db29raWVUb2tlbikgdHJ5IHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uQ29va2llVG9rZW4pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIiwgZSk7XG5cdH1cblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnbk91dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbi1vdXQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-up.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signUpEmail: () => (/* binding */ signUpEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-up.ts\nconst signUpEmailBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_10__.string(),\n\temail: zod__WEBPACK_IMPORTED_MODULE_10__.email(),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().nonempty(),\n\timage: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().optional()\n}).and(zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()));\nconst signUpEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-up/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signUpWithEmailAndPassword\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware],\n\tbody: signUpEmailBodySchema,\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signUpWithEmailAndPassword\",\n\t\t\tdescription: \"Sign up a user using email and password\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The email of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The password of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tcallbackURL: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The URL to use for email verification callback\"\n\t\t\t\t\t},\n\t\t\t\t\trememberMe: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"If this is false, the session will not be remembered. Default is `true`.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"password\"\n\t\t\t\t]\n\t\t\t} } } },\n\t\t\tresponses: {\n\t\t\t\t\"200\": {\n\t\t\t\t\tdescription: \"Successfully created user\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Authentication token for the session\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"user\"]\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t\"422\": {\n\t\t\t\t\tdescription: \"Unprocessable Entity. User already exists or failed to create user.\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__.runWithTransaction)(ctx.context.adapter, async () => {\n\t\tif (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password sign up is not enabled\" });\n\t\tconst body = ctx.body;\n\t\tconst { name, email, password, image, callbackURL: _callbackURL, rememberMe, ...rest } = body;\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_10__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tif (!password || typeof password !== \"string\") throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\t\tif (password.length < minPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too short\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t\t}\n\t\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\t\tif (password.length > maxPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too long\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t\t}\n\t\tif ((await ctx.context.internalAdapter.findUserByEmail(email))?.user) {\n\t\t\tctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t\t}\n\t\t/**\n\t\t* Hash the password\n\t\t*\n\t\t* This is done prior to creating the user\n\t\t* to ensure that any plugin that\n\t\t* may break the hashing should break\n\t\t* before the user is created.\n\t\t*/\n\t\tconst hash = await ctx.context.password.hash(password);\n\t\tlet createdUser;\n\t\ttry {\n\t\t\tconst data = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"create\");\n\t\t\tcreatedUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: email.toLowerCase(),\n\t\t\t\tname,\n\t\t\t\timage,\n\t\t\t\t...data,\n\t\t\t\temailVerified: false\n\t\t\t});\n\t\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t} catch (e) {\n\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isDevelopment)()) ctx.context.logger.error(\"Failed to create user\", e);\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_8__.APIError) throw e;\n\t\t\tctx.context.logger?.error(\"Failed to create user\", e);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t}\n\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: createdUser.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: createdUser.id,\n\t\t\tpassword: hash\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendOnSignUp ?? ctx.context.options.emailAndPassword.requireEmailVerification) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__.createEmailVerificationToken)(ctx.context.secret, createdUser.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = body.callbackURL ? encodeURIComponent(body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tif (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) return ctx.json({\n\t\t\ttoken: null,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(createdUser.id, rememberMe === false);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser: createdUser\n\t\t}, rememberMe === false);\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-up.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24tdXAubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRTtBQUMxQztBQUN5QztBQUNWO0FBQ2E7QUFDVDtBQUNUO0FBQ0s7QUFDcEI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQSw4QkFBOEIsd0NBQVE7QUFDdEMsT0FBTyx3Q0FBUTtBQUNmLFFBQVEsdUNBQU87QUFDZixXQUFXLHdDQUFRO0FBQ25CLFFBQVEsd0NBQVE7QUFDaEIsY0FBYyx3Q0FBUTtBQUN0QixhQUFhLHlDQUFTO0FBQ3RCLENBQUMsTUFBTSx3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUs7QUFDakMsMEJBQTBCLHlFQUFrQjtBQUM1QztBQUNBO0FBQ0EsT0FBTyw2RUFBa0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVcsc0JBQXNCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLDZFQUFrQjtBQUMxQix1SEFBdUgsaURBQVEsa0JBQWtCLHNEQUFzRDtBQUN2TTtBQUNBLFVBQVUsK0VBQStFO0FBQ3pGLE9BQU8sdUNBQU8sdUNBQXVDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDeEgsMkRBQTJELGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDakk7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ3BGO0FBQ0E7QUFDQSxrRUFBa0UsTUFBTTtBQUN4RSxhQUFhLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3Q0FBd0M7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiwrQkFBK0IsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUMxRyxJQUFJO0FBQ0osT0FBTyxvRUFBYTtBQUNwQixvQkFBb0IsaURBQVE7QUFDNUI7QUFDQSxhQUFhLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3QkFBd0I7QUFDakc7QUFDQSw4QkFBOEIsaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdUJBQXVCLHFGQUE0QjtBQUNuRDtBQUNBLGtCQUFrQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNIO0FBQ0EsMEJBQTBCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDeEcsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUywrREFBZTtBQUN4QixHQUFHO0FBQ0gsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHJvdXRlc1xcc2lnbi11cC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgcnVuV2l0aFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGlzRGV2ZWxvcG1lbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9zaWduLXVwLnRzXG5jb25zdCBzaWduVXBFbWFpbEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCksXG5cdGVtYWlsOiB6LmVtYWlsKCksXG5cdHBhc3N3b3JkOiB6LnN0cmluZygpLm5vbmVtcHR5KCksXG5cdGltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHJlbWVtYmVyTWU6IHouYm9vbGVhbigpLm9wdGlvbmFsKClcbn0pLmFuZCh6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSk7XG5jb25zdCBzaWduVXBFbWFpbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLXVwL2VtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmRcIixcblx0dXNlOiBbZm9ybUNzcmZNaWRkbGV3YXJlXSxcblx0Ym9keTogc2lnblVwRW1haWxCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YToge1xuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInNpZ25VcFdpdGhFbWFpbEFuZFBhc3N3b3JkXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIHVwIGEgdXNlciB1c2luZyBlbWFpbCBhbmQgcGFzc3dvcmRcIixcblx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cGFzc3dvcmQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcHJvZmlsZSBpbWFnZSBVUkwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y2FsbGJhY2tVUkw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlbWVtYmVyTWU6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSWYgdGhpcyBpcyBmYWxzZSwgdGhlIHNlc3Npb24gd2lsbCBub3QgYmUgcmVtZW1iZXJlZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcdFwicGFzc3dvcmRcIlxuXHRcdFx0XHRdXG5cdFx0XHR9IH0gfSB9LFxuXHRcdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcdFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsbHkgY3JlYXRlZCB1c2VyXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIHNlc3Npb25cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHByb2ZpbGUgaW1hZ2UgVVJMIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBlbWFpbCBoYXMgYmVlbiB2ZXJpZmllZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgbGFzdCB1cGRhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwiZW1haWxWZXJpZmllZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiXVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiNDIyXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbnByb2Nlc3NhYmxlIEVudGl0eS4gVXNlciBhbHJlYWR5IGV4aXN0cyBvciBmYWlsZWQgdG8gY3JlYXRlIHVzZXIuXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHJldHVybiBydW5XaXRoVHJhbnNhY3Rpb24oY3R4LmNvbnRleHQuYWRhcHRlciwgYXN5bmMgKCkgPT4ge1xuXHRcdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5lbmFibGVkIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uZGlzYWJsZVNpZ25VcCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkVtYWlsIGFuZCBwYXNzd29yZCBzaWduIHVwIGlzIG5vdCBlbmFibGVkXCIgfSk7XG5cdFx0Y29uc3QgYm9keSA9IGN0eC5ib2R5O1xuXHRcdGNvbnN0IHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBpbWFnZSwgY2FsbGJhY2tVUkw6IF9jYWxsYmFja1VSTCwgcmVtZW1iZXJNZSwgLi4ucmVzdCB9ID0gYm9keTtcblx0XHRpZiAoIXouZW1haWwoKS5zYWZlUGFyc2UoZW1haWwpLnN1Y2Nlc3MpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMIH0pO1xuXHRcdGlmICghcGFzc3dvcmQgfHwgdHlwZW9mIHBhc3N3b3JkICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0XHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0XHRpZiAocGFzc3dvcmQubGVuZ3RoIDwgbWluUGFzc3dvcmRMZW5ndGgpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBzaG9ydFwiKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG1heFBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRcdGlmIChwYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIGxvbmdcIik7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdFx0fVxuXHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCkpPy51c2VyKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuaW5mbyhgU2lnbi11cCBhdHRlbXB0IGZvciBleGlzdGluZyBlbWFpbDogJHtlbWFpbH1gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMIH0pO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIEhhc2ggdGhlIHBhc3N3b3JkXG5cdFx0KlxuXHRcdCogVGhpcyBpcyBkb25lIHByaW9yIHRvIGNyZWF0aW5nIHRoZSB1c2VyXG5cdFx0KiB0byBlbnN1cmUgdGhhdCBhbnkgcGx1Z2luIHRoYXRcblx0XHQqIG1heSBicmVhayB0aGUgaGFzaGluZyBzaG91bGQgYnJlYWtcblx0XHQqIGJlZm9yZSB0aGUgdXNlciBpcyBjcmVhdGVkLlxuXHRcdCovXG5cdFx0Y29uc3QgaGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdGxldCBjcmVhdGVkVXNlcjtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZGF0YSA9IHBhcnNlVXNlcklucHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHJlc3QsIFwiY3JlYXRlXCIpO1xuXHRcdFx0Y3JlYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVXNlcih7XG5cdFx0XHRcdGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRpbWFnZSxcblx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFjcmVhdGVkVXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoaXNEZXZlbG9wbWVudCgpKSBjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHVzZXJcIiwgZSk7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yKSB0aHJvdyBlO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyPy5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLCBlKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1VTRVIgfSk7XG5cdFx0fVxuXHRcdGlmICghY3JlYXRlZFVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1VTRVIgfSk7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogY3JlYXRlZFVzZXIuaWQsXG5cdFx0XHRwcm92aWRlcklkOiBcImNyZWRlbnRpYWxcIixcblx0XHRcdGFjY291bnRJZDogY3JlYXRlZFVzZXIuaWQsXG5cdFx0XHRwYXNzd29yZDogaGFzaFxuXHRcdH0pO1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgPz8gY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbikge1xuXHRcdFx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3JlYXRlZFVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChib2R5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHRcdHRva2VuXG5cdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdH1cblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLmF1dG9TaWduSW4gPT09IGZhbHNlIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5yZXF1aXJlRW1haWxWZXJpZmljYXRpb24pIHJldHVybiBjdHguanNvbih7XG5cdFx0XHR0b2tlbjogbnVsbCxcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBjcmVhdGVkVXNlcilcblx0XHR9KTtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24oY3JlYXRlZFVzZXIuaWQsIHJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb24sXG5cdFx0XHR1c2VyOiBjcmVhdGVkVXNlclxuXHRcdH0sIHJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgY3JlYXRlZFVzZXIpXG5cdFx0fSk7XG5cdH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnblVwRW1haWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ24tdXAubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/update-user.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeEmail: () => (/* binding */ changeEmail),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* binding */ deleteUserCallback),\n/* harmony export */   setPassword: () => (/* binding */ setPassword),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/update-user.ts\nconst updateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Field name must be a string\" }), zod__WEBPACK_IMPORTED_MODULE_11__.any());\nconst updateUser = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/update-user\", {\n\tmethod: \"POST\",\n\toperationId: \"updateUser\",\n\tbody: updateUserBodySchema,\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateUser\",\n\t\t\tdescription: \"Update the current user\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The image of the user\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst body = ctx.body;\n\tif (typeof body !== \"object\" || Array.isArray(body)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Body must be an object\" });\n\tif (body.email) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED });\n\tconst { name, image, ...rest } = body;\n\tconst session = ctx.context.session;\n\tconst additionalFields = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"update\");\n\tif (image === void 0 && name === void 0 && Object.keys(additionalFields).length === 0) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"No fields to update\" });\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\tname,\n\t\timage,\n\t\t...additionalFields\n\t}) ?? {\n\t\t...session.user,\n\t\t...name !== void 0 && { name },\n\t\t...image !== void 0 && { image },\n\t\t...additionalFields\n\t};\n\t/**\n\t* Update the session cookie with the new user data\n\t*/\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\tsession: session.session,\n\t\tuser: updatedUser\n\t});\n\treturn ctx.json({ status: true });\n});\nconst changePassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-password\", {\n\tmethod: \"POST\",\n\toperationId: \"changePassword\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set\" }),\n\t\tcurrentPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The current password is required\" }),\n\t\trevokeOtherSessions: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Must be a boolean value\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changePassword\",\n\t\tdescription: \"Change the password of the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password successfully changed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"New session token if other sessions were revoked\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!await ctx.context.password.verify({\n\t\thash: account.password,\n\t\tpassword: currentPassword\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\tawait ctx.context.internalAdapter.updateAccount(account.id, { password: passwordHash });\n\tlet token = null;\n\tif (revokeOtherSessions) {\n\t\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id);\n\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: newSession,\n\t\t\tuser: session.user\n\t\t});\n\t\ttoken = newSession.token;\n\t}\n\treturn ctx.json({\n\t\ttoken,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t});\n});\nconst setPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)({\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({ newPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set is required\" }) }),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { newPassword } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!account) {\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: session.user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: session.user.id,\n\t\t\tpassword: passwordHash\n\t\t});\n\t\treturn ctx.json({ status: true });\n\t}\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"user already has a password\" });\n});\nconst deleteUser = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user\", {\n\tmethod: \"POST\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The callback URL to redirect to after the user is deleted\" }).optional(),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The password of the user is required to delete the user\" }).optional(),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to delete the user is required\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"deleteUser\",\n\t\tdescription: \"Delete the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The callback URL to redirect to after the user is deleted\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The user's password. Required if session is not fresh\"\n\t\t\t\t},\n\t\t\t\ttoken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The deletion verification token\"\n\t\t\t\t}\n\t\t\t}\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User deletion processed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the operation was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\", \"Verification email sent\"],\n\t\t\t\t\t\tdescription: \"Status message of the deletion process\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = ctx.context.session;\n\tif (ctx.body.password) {\n\t\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\t\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\t\tif (!await ctx.context.password.verify({\n\t\t\thash: account.password,\n\t\t\tpassword: ctx.body.password\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t}\n\tif (ctx.body.token) {\n\t\tawait deleteUserCallback({\n\t\t\t...ctx,\n\t\t\tquery: { token: ctx.body.token }\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"User deleted\"\n\t\t});\n\t}\n\tif (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n\t\tconst token = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString)(32, \"0-9\", \"a-z\");\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.user.id,\n\t\t\tidentifier: `delete-account-${token}`,\n\t\t\texpiresAt: new Date(Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 3600 * 24) * 1e3)\n\t\t});\n\t\tconst url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.user.deleteUser.sendDeleteAccountVerification({\n\t\t\tuser: session.user,\n\t\t\turl,\n\t\t\ttoken\n\t\t}, ctx.request));\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Verification email sent\"\n\t\t});\n\t}\n\tif (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n\t\tconst currentAge = new Date(session.session.createdAt).getTime();\n\t\tconst freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n\t\tif (Date.now() - currentAge > freshAge * 1e3) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.SESSION_EXPIRED });\n\t}\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst deleteUserCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user/callback\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to verify the deletion request\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after deletion\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Callback to complete user deletion with verification token\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User successfully deleted\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the deletion was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\"],\n\t\t\t\t\t\tdescription: \"Confirmation message\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\tconst token = await ctx.context.internalAdapter.findVerificationValue(`delete-account-${ctx.query.token}`);\n\tif (!token || token.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tif (token.value !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tawait ctx.context.internalAdapter.deleteAccounts(session.user.id);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(token.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL || \"/\");\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst changeEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-email\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewEmail: zod__WEBPACK_IMPORTED_MODULE_11__.email().meta({ description: \"The new email address to set must be a valid email address\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changeEmail\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Email change request processed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the request was successful\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\"Email updated\", \"Verification email sent\"],\n\t\t\t\t\t\t\tdescription: \"Status message of the email change process\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"422\": {\n\t\t\t\tdescription: \"Unprocessable Entity. Email already exists\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.changeEmail?.enabled) {\n\t\tctx.context.logger.error(\"Change email is disabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Change email is disabled\" });\n\t}\n\tconst newEmail = ctx.body.newEmail.toLowerCase();\n\tif (newEmail === ctx.context.session.user.email) {\n\t\tctx.context.logger.error(\"Email is the same\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Email is the same\" });\n\t}\n\tif (await ctx.context.internalAdapter.findUserByEmail(newEmail)) {\n\t\tctx.context.logger.error(\"Email already exists\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t}\n\t/**\n\t* If the email is not verified, we can update the email if the option is enabled\n\t*/\n\tif (ctx.context.session.user.emailVerified !== true && ctx.context.options.user.changeEmail.updateEmailWithoutVerification) {\n\t\tawait ctx.context.internalAdapter.updateUserByEmail(ctx.context.session.user.email, { email: newEmail });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: ctx.context.session.session,\n\t\t\tuser: {\n\t\t\t\t...ctx.context.session.user,\n\t\t\t\temail: newEmail\n\t\t\t}\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, newEmail, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: {\n\t\t\t\t\t...ctx.context.session.user,\n\t\t\t\t\temail: newEmail\n\t\t\t\t},\n\t\t\t\turl: url$1,\n\t\t\t\ttoken: token$1\n\t\t\t}, ctx.request));\n\t\t}\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (ctx.context.session.user.emailVerified && (ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification)) {\n\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-confirmation\" });\n\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tconst sendFn = ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification;\n\t\tif (sendFn) await ctx.context.runInBackgroundOrAwait(sendFn({\n\t\t\tuser: ctx.context.session.user,\n\t\t\tnewEmail,\n\t\t\turl: url$1,\n\t\t\ttoken: token$1\n\t\t}, ctx.request));\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser: {\n\t\t\t...ctx.context.session.user,\n\t\t\temail: newEmail\n\t\t},\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=update-user.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3VwZGF0ZS11c2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDUjtBQUM1QjtBQUM2QjtBQUMvQjtBQUNnRDtBQUNpQjtBQUN6QjtBQUNiO0FBQ3BCO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0EsNkJBQTZCLHdDQUFRLENBQUMsd0NBQVEsVUFBVSw0Q0FBNEMsR0FBRyxxQ0FBSztBQUM1Ryx5QkFBeUIsMEVBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMkRBQWlCO0FBQ3hCO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXLHNCQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGdFQUFnRSxpREFBUSxrQkFBa0IsbUNBQW1DO0FBQzdILDJCQUEyQixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3pHLFNBQVMsdUJBQXVCO0FBQ2hDO0FBQ0EsMEJBQTBCLDhEQUFjO0FBQ3hDLGtHQUFrRyxpREFBUSxrQkFBa0IsZ0NBQWdDO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsMEJBQTBCLE1BQU07QUFDaEMsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0VBQWdCO0FBQ3ZCO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELHVCQUF1QiwwRUFBa0I7QUFDekM7QUFDQTtBQUNBLE9BQU8sd0NBQVE7QUFDZixlQUFlLHdDQUFRLFVBQVUsd0NBQXdDO0FBQ3pFLG1CQUFtQix3Q0FBUSxVQUFVLGlEQUFpRDtBQUN0Rix1QkFBdUIseUNBQVMsVUFBVSx3Q0FBd0M7QUFDbEYsRUFBRTtBQUNGLE9BQU8sb0VBQTBCO0FBQ2pDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxvREFBb0Q7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDbkY7QUFDQTtBQUNBLDhDQUE4QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsK0JBQStCO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDckYsK0RBQStELHdCQUF3QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQ2xILFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDO0FBQ0Qsb0JBQW9CLDBFQUFrQjtBQUN0QztBQUNBLE9BQU8sd0NBQVEsR0FBRyxhQUFhLHdDQUFRLFVBQVUsb0RBQW9ELEdBQUc7QUFDeEcsT0FBTyxvRUFBMEI7QUFDakMsQ0FBQztBQUNELFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLGNBQWM7QUFDbEM7QUFDQSxXQUFXLGlEQUFRLGtCQUFrQix3Q0FBd0M7QUFDN0UsQ0FBQztBQUNELG1CQUFtQiwwRUFBa0I7QUFDckM7QUFDQSxPQUFPLG9FQUEwQjtBQUNqQyxPQUFPLHdDQUFRO0FBQ2YsZUFBZSx3Q0FBUSxVQUFVLDBFQUEwRTtBQUMzRyxZQUFZLHdDQUFRLFVBQVUsd0VBQXdFO0FBQ3RHLFNBQVMsd0NBQVEsVUFBVSx5REFBeUQ7QUFDcEYsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCLFdBQVcsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwrQkFBK0I7QUFDakk7QUFDQTtBQUNBO0FBQ0EsR0FBRyxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUFvQjtBQUNwQztBQUNBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLG9CQUFvQiw4QkFBOEIsTUFBTSxlQUFlLDRCQUE0QjtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGtCQUFrQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx1RUFBbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsMkJBQTJCLDBFQUFrQjtBQUM3QztBQUNBLFFBQVEsd0NBQVE7QUFDaEIsU0FBUyx3Q0FBUSxVQUFVLHlEQUF5RDtBQUNwRixlQUFlLHdDQUFRLFVBQVUsc0RBQXNEO0FBQ3ZGLEVBQUU7QUFDRixPQUFPLDBFQUFXO0FBQ2xCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBLHVCQUF1QiwrREFBaUI7QUFDeEMseUJBQXlCLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQiwwQkFBMEI7QUFDcEcseUZBQXlGLGdCQUFnQjtBQUN6Ryx1RUFBdUUsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN4SSxnREFBZ0QsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELG9CQUFvQiwwRUFBa0I7QUFDdEM7QUFDQSxPQUFPLHdDQUFRO0FBQ2YsWUFBWSx1Q0FBTyxVQUFVLDJFQUEyRTtBQUN4RyxlQUFlLHdDQUFRLFVBQVUsZ0VBQWdFO0FBQ2pHLEVBQUU7QUFDRixPQUFPLG9FQUEwQjtBQUNqQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUIsV0FBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IscUNBQXFDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsOEJBQThCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdDQUF3QztBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLGlCQUFpQjtBQUN6RyxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EseUJBQXlCLHFGQUE0QjtBQUNyRCxvQkFBb0Isb0JBQW9CLHNCQUFzQixRQUFRLGVBQWUsNEJBQTRCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0Esd0JBQXdCLHFGQUE0QixtSEFBbUgsMENBQTBDO0FBQ2pOLG1CQUFtQixvQkFBb0Isc0JBQXNCLFFBQVEsZUFBZSw0QkFBNEI7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDZDQUE2QztBQUNuRjtBQUNBLHFCQUFxQixxRkFBNEIsbUhBQW1ILDBDQUEwQztBQUM5TSxnQkFBZ0Isb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsNEJBQTRCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQzs7QUFFRDtBQUNnRztBQUNoRyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGFwaVxccm91dGVzXFx1cGRhdGUtdXNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBvcmlnaW5DaGVjayB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuLi9taWRkbGV3YXJlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWxldGVTZXNzaW9uQ29va2llLCBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy91cGRhdGUtdXNlci50c1xuY29uc3QgdXBkYXRlVXNlckJvZHlTY2hlbWEgPSB6LnJlY29yZCh6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJGaWVsZCBuYW1lIG11c3QgYmUgYSBzdHJpbmdcIiB9KSwgei5hbnkoKSk7XG5jb25zdCB1cGRhdGVVc2VyID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3VwZGF0ZS11c2VyXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwidXBkYXRlVXNlclwiLFxuXHRib2R5OiB1cGRhdGVVc2VyQm9keVNjaGVtYSxcblx0dXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YToge1xuXHRcdCRJbmZlcjogeyBib2R5OiB7fSB9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInVwZGF0ZVVzZXJcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVwZGF0ZSB0aGUgY3VycmVudCB1c2VyXCIsXG5cdFx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGltYWdlIG9mIHRoZSB1c2VyXCIsXG5cdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH0gfSxcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgdXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgYm9keSA9IGN0eC5ib2R5O1xuXHRpZiAodHlwZW9mIGJvZHkgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShib2R5KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkJvZHkgbXVzdCBiZSBhbiBvYmplY3RcIiB9KTtcblx0aWYgKGJvZHkuZW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9DQU5fTk9UX0JFX1VQREFURUQgfSk7XG5cdGNvbnN0IHsgbmFtZSwgaW1hZ2UsIC4uLnJlc3QgfSA9IGJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhZGRpdGlvbmFsRmllbGRzID0gcGFyc2VVc2VySW5wdXQoY3R4LmNvbnRleHQub3B0aW9ucywgcmVzdCwgXCJ1cGRhdGVcIik7XG5cdGlmIChpbWFnZSA9PT0gdm9pZCAwICYmIG5hbWUgPT09IHZvaWQgMCAmJiBPYmplY3Qua2V5cyhhZGRpdGlvbmFsRmllbGRzKS5sZW5ndGggPT09IDApIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJObyBmaWVsZHMgdG8gdXBkYXRlXCIgfSk7XG5cdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkLCB7XG5cdFx0bmFtZSxcblx0XHRpbWFnZSxcblx0XHQuLi5hZGRpdGlvbmFsRmllbGRzXG5cdH0pID8/IHtcblx0XHQuLi5zZXNzaW9uLnVzZXIsXG5cdFx0Li4ubmFtZSAhPT0gdm9pZCAwICYmIHsgbmFtZSB9LFxuXHRcdC4uLmltYWdlICE9PSB2b2lkIDAgJiYgeyBpbWFnZSB9LFxuXHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNcblx0fTtcblx0LyoqXG5cdCogVXBkYXRlIHRoZSBzZXNzaW9uIGNvb2tpZSB3aXRoIHRoZSBuZXcgdXNlciBkYXRhXG5cdCovXG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0c2Vzc2lvbjogc2Vzc2lvbi5zZXNzaW9uLFxuXHRcdHVzZXI6IHVwZGF0ZWRVc2VyXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IGNoYW5nZVBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2NoYW5nZS1wYXNzd29yZFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcImNoYW5nZVBhc3N3b3JkXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIiB9KSxcblx0XHRjdXJyZW50UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjdXJyZW50IHBhc3N3b3JkIGlzIHJlcXVpcmVkXCIgfSksXG5cdFx0cmV2b2tlT3RoZXJTZXNzaW9uczogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk11c3QgYmUgYSBib29sZWFuIHZhbHVlXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiY2hhbmdlUGFzc3dvcmRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJDaGFuZ2UgdGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIHN1Y2Nlc3NmdWxseSBjaGFuZ2VkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk5ldyBzZXNzaW9uIHRva2VuIGlmIG90aGVyIHNlc3Npb25zIHdlcmUgcmV2b2tlZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBlbWFpbCBoYXMgYmVlbiB2ZXJpZmllZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGNyZWF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcImVtYWlsVmVyaWZpZWRcIixcblx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IG5ld1Bhc3N3b3JkLCBjdXJyZW50UGFzc3dvcmQsIHJldm9rZU90aGVyU2Vzc2lvbnMgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgbWluUGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBzaG9ydFwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHR9XG5cdGNvbnN0IG1heFBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4UGFzc3dvcmRMZW5ndGgpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gbG9uZ1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdH1cblx0Y29uc3QgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGFjY291bnQkMSkgPT4gYWNjb3VudCQxLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiICYmIGFjY291bnQkMS5wYXNzd29yZCk7XG5cdGlmICghYWNjb3VudCB8fCAhYWNjb3VudC5wYXNzd29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuXHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogYWNjb3VudC5wYXNzd29yZCxcblx0XHRwYXNzd29yZDogY3VycmVudFBhc3N3b3JkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgeyBwYXNzd29yZDogcGFzc3dvcmRIYXNoIH0pO1xuXHRsZXQgdG9rZW4gPSBudWxsO1xuXHRpZiAocmV2b2tlT3RoZXJTZXNzaW9ucykge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhzZXNzaW9uLnVzZXIuaWQpO1xuXHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihzZXNzaW9uLnVzZXIuaWQpO1xuXHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1NFU1NJT04gfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHR1c2VyOiBzZXNzaW9uLnVzZXJcblx0XHR9KTtcblx0XHR0b2tlbiA9IG5ld1Nlc3Npb24udG9rZW47XG5cdH1cblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHR0b2tlbixcblx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKVxuXHR9KTtcbn0pO1xuY29uc3Qgc2V0UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoe1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7IG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkIHRvIHNldCBpcyByZXF1aXJlZFwiIH0pIH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBuZXdQYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdH1cblx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0fVxuXHRjb25zdCBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYWNjb3VudCQxKSA9PiBhY2NvdW50JDEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIgJiYgYWNjb3VudCQxLnBhc3N3b3JkKTtcblx0Y29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChuZXdQYXNzd29yZCk7XG5cdGlmICghYWNjb3VudCkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saW5rQWNjb3VudCh7XG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdFx0YWNjb3VudElkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRwYXNzd29yZDogcGFzc3dvcmRIYXNoXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHR9XG5cdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJ1c2VyIGFscmVhZHkgaGFzIGEgcGFzc3dvcmRcIiB9KTtcbn0pO1xuY29uc3QgZGVsZXRlVXNlciA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZWxldGUtdXNlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcIiB9KS5vcHRpb25hbCgpLFxuXHRcdHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcGFzc3dvcmQgb2YgdGhlIHVzZXIgaXMgcmVxdWlyZWQgdG8gZGVsZXRlIHRoZSB1c2VyXCIgfSkub3B0aW9uYWwoKSxcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIGRlbGV0ZSB0aGUgdXNlciBpcyByZXF1aXJlZFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJkZWxldGVVc2VyXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiRGVsZXRlIHRoZSB1c2VyXCIsXG5cdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdGNhbGxiYWNrVVJMOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgY2FsbGJhY2sgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGlzIGRlbGV0ZWRcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwYXNzd29yZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHVzZXIncyBwYXNzd29yZC4gUmVxdWlyZWQgaWYgc2Vzc2lvbiBpcyBub3QgZnJlc2hcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGRlbGV0aW9uIHZlcmlmaWNhdGlvbiB0b2tlblwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IH0gfSB9LFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIGRlbGV0aW9uIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzdWNjZXNzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgb3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbXCJVc2VyIGRlbGV0ZWRcIiwgXCJWZXJpZmljYXRpb24gZW1haWwgc2VudFwiXSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN0YXR1cyBtZXNzYWdlIG9mIHRoZSBkZWxldGlvbiBwcm9jZXNzXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdWNjZXNzXCIsIFwibWVzc2FnZVwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy51c2VyPy5kZWxldGVVc2VyPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRGVsZXRlIHVzZXIgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiB0aGUgb3B0aW9uc1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIik7XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmIChjdHguYm9keS5wYXNzd29yZCkge1xuXHRcdGNvbnN0IGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhzZXNzaW9uLnVzZXIuaWQpKS5maW5kKChhY2NvdW50JDEpID0+IGFjY291bnQkMS5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIiAmJiBhY2NvdW50JDEucGFzc3dvcmQpO1xuXHRcdGlmICghYWNjb3VudCB8fCAhYWNjb3VudC5wYXNzd29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdFx0aGFzaDogYWNjb3VudC5wYXNzd29yZCxcblx0XHRcdHBhc3N3b3JkOiBjdHguYm9keS5wYXNzd29yZFxuXHRcdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoY3R4LmJvZHkudG9rZW4pIHtcblx0XHRhd2FpdCBkZWxldGVVc2VyQ2FsbGJhY2soe1xuXHRcdFx0Li4uY3R4LFxuXHRcdFx0cXVlcnk6IHsgdG9rZW46IGN0eC5ib2R5LnRva2VuIH1cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkXCJcblx0XHR9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LnNlbmREZWxldGVBY2NvdW50VmVyaWZpY2F0aW9uKSB7XG5cdFx0Y29uc3QgdG9rZW4gPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCIwLTlcIiwgXCJhLXpcIik7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdHZhbHVlOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRpZGVudGlmaWVyOiBgZGVsZXRlLWFjY291bnQtJHt0b2tlbn1gLFxuXHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgKGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5kZWxldGVUb2tlbkV4cGlyZXNJbiB8fCAzNjAwICogMjQpICogMWUzKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L2RlbGV0ZS11c2VyL2NhbGxiYWNrP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyLnNlbmREZWxldGVBY2NvdW50VmVyaWZpY2F0aW9uKHtcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdHVybCxcblx0XHRcdHRva2VuXG5cdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnRcIlxuXHRcdH0pO1xuXHR9XG5cdGlmICghY3R4LmJvZHkucGFzc3dvcmQgJiYgY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5mcmVzaEFnZSAhPT0gMCkge1xuXHRcdGNvbnN0IGN1cnJlbnRBZ2UgPSBuZXcgRGF0ZShzZXNzaW9uLnNlc3Npb24uY3JlYXRlZEF0KS5nZXRUaW1lKCk7XG5cdFx0Y29uc3QgZnJlc2hBZ2UgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlICogMWUzO1xuXHRcdGlmIChEYXRlLm5vdygpIC0gY3VycmVudEFnZSA+IGZyZXNoQWdlICogMWUzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuU0VTU0lPTl9FWFBJUkVEIH0pO1xuXHR9XG5cdGNvbnN0IGJlZm9yZURlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5iZWZvcmVEZWxldGU7XG5cdGlmIChiZWZvcmVEZWxldGUpIGF3YWl0IGJlZm9yZURlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHNlc3Npb24udXNlci5pZCk7XG5cdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0Y29uc3QgYWZ0ZXJEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYWZ0ZXJEZWxldGU7XG5cdGlmIChhZnRlckRlbGV0ZSkgYXdhaXQgYWZ0ZXJEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBcIlVzZXIgZGVsZXRlZFwiXG5cdH0pO1xufSk7XG5jb25zdCBkZWxldGVVc2VyQ2FsbGJhY2sgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZGVsZXRlLXVzZXIvY2FsbGJhY2tcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkgdGhlIGRlbGV0aW9uIHJlcXVlc3RcIiB9KSxcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBkZWxldGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiQ2FsbGJhY2sgdG8gY29tcGxldGUgdXNlciBkZWxldGlvbiB3aXRoIHZlcmlmaWNhdGlvbiB0b2tlblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0c3VjY2Vzczoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGRlbGV0aW9uIHdhcyBzdWNjZXNzZnVsXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbXCJVc2VyIGRlbGV0ZWRcIl0sXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDb25maXJtYXRpb24gbWVzc2FnZVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wic3VjY2Vzc1wiLCBcIm1lc3NhZ2VcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uZGVsZXRlVXNlcj8uZW5hYmxlZCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkRlbGV0ZSB1c2VyIGlzIGRpc2FibGVkLiBFbmFibGUgaXQgaW4gdGhlIG9wdGlvbnNcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIpO1xuXHR9XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0dFVF9VU0VSX0lORk8gfSk7XG5cdGNvbnN0IHRva2VuID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShgZGVsZXRlLWFjY291bnQtJHtjdHgucXVlcnkudG9rZW59YCk7XG5cdGlmICghdG9rZW4gfHwgdG9rZW4uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0aWYgKHRva2VuLnZhbHVlICE9PSBzZXNzaW9uLnVzZXIuaWQpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgYmVmb3JlRGVsZXRlID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmJlZm9yZURlbGV0ZTtcblx0aWYgKGJlZm9yZURlbGV0ZSkgYXdhaXQgYmVmb3JlRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVXNlcihzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZUFjY291bnRzKHNlc3Npb24udXNlci5pZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh0b2tlbi5pZCk7XG5cdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0Y29uc3QgYWZ0ZXJEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYWZ0ZXJEZWxldGU7XG5cdGlmIChhZnRlckRlbGV0ZSkgYXdhaXQgYWZ0ZXJEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGlmIChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwgfHwgXCIvXCIpO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0bWVzc2FnZTogXCJVc2VyIGRlbGV0ZWRcIlxuXHR9KTtcbn0pO1xuY29uc3QgY2hhbmdlRW1haWwgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2hhbmdlLWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdG5ld0VtYWlsOiB6LmVtYWlsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBzZXQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIiB9KSxcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBlbWFpbCB2ZXJpZmljYXRpb25cIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJjaGFuZ2VFbWFpbFwiLFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFbWFpbCBjaGFuZ2UgcmVxdWVzdCBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3RhdHVzOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW1wiRW1haWwgdXBkYXRlZFwiLCBcIlZlcmlmaWNhdGlvbiBlbWFpbCBzZW50XCJdLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdGF0dXMgbWVzc2FnZSBvZiB0aGUgZW1haWwgY2hhbmdlIHByb2Nlc3NcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHRcIjQyMlwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5LiBFbWFpbCBhbHJlYWR5IGV4aXN0c1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLnVzZXI/LmNoYW5nZUVtYWlsPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ2hhbmdlIGVtYWlsIGlzIGRpc2FibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQ2hhbmdlIGVtYWlsIGlzIGRpc2FibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgbmV3RW1haWwgPSBjdHguYm9keS5uZXdFbWFpbC50b0xvd2VyQ2FzZSgpO1xuXHRpZiAobmV3RW1haWwgPT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkVtYWlsIGlzIHRoZSBzYW1lXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJFbWFpbCBpcyB0aGUgc2FtZVwiIH0pO1xuXHR9XG5cdGlmIChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKG5ld0VtYWlsKSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkVtYWlsIGFscmVhZHkgZXhpc3RzXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMIH0pO1xuXHR9XG5cdC8qKlxuXHQqIElmIHRoZSBlbWFpbCBpcyBub3QgdmVyaWZpZWQsIHdlIGNhbiB1cGRhdGUgdGhlIGVtYWlsIGlmIHRoZSBvcHRpb24gaXMgZW5hYmxlZFxuXHQqL1xuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsVmVyaWZpZWQgIT09IHRydWUgJiYgY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnVwZGF0ZUVtYWlsV2l0aG91dFZlcmlmaWNhdGlvbikge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyQnlFbWFpbChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWwsIHsgZW1haWw6IG5ld0VtYWlsIH0pO1xuXHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRzZXNzaW9uOiBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24sXG5cdFx0XHR1c2VyOiB7XG5cdFx0XHRcdC4uLmN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdFx0ZW1haWw6IG5ld0VtYWlsXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdFx0Y29uc3QgdG9rZW4kMSA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBuZXdFbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgdXJsJDEgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbiQxfSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdC4uLmN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHRcdFx0fSxcblx0XHRcdFx0dXJsOiB1cmwkMSxcblx0XHRcdFx0dG9rZW46IHRva2VuJDFcblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsVmVyaWZpZWQgJiYgKGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5jaGFuZ2VFbWFpbC5zZW5kQ2hhbmdlRW1haWxDb25maXJtYXRpb24gfHwgY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbFZlcmlmaWNhdGlvbikpIHtcblx0XHRjb25zdCB0b2tlbiQxID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCwgbmV3RW1haWwsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbiwgeyByZXF1ZXN0VHlwZTogXCJjaGFuZ2UtZW1haWwtY29uZmlybWF0aW9uXCIgfSk7XG5cdFx0Y29uc3QgdXJsJDEgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbiQxfSZjYWxsYmFja1VSTD0ke2N0eC5ib2R5LmNhbGxiYWNrVVJMIHx8IFwiL1wifWA7XG5cdFx0Y29uc3Qgc2VuZEZuID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbENvbmZpcm1hdGlvbiB8fCBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uO1xuXHRcdGlmIChzZW5kRm4pIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoc2VuZEZuKHtcblx0XHRcdHVzZXI6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlcixcblx0XHRcdG5ld0VtYWlsLFxuXHRcdFx0dXJsOiB1cmwkMSxcblx0XHRcdHRva2VuOiB0b2tlbiQxXG5cdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZC5cIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsLCBuZXdFbWFpbCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIiB9KTtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0dXNlcjoge1xuXHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0ZW1haWw6IG5ld0VtYWlsXG5cdFx0fSxcblx0XHR1cmwsXG5cdFx0dG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUtdXNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/to-auth-endpoints.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toAuthEndpoints: () => (/* binding */ toAuthEndpoints)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n//#region src/api/to-auth-endpoints.ts\nconst defuReplaceArrays = (0,defu__WEBPACK_IMPORTED_MODULE_3__.createDefu)((obj, key, value) => {\n\tif (Array.isArray(obj[key]) && Array.isArray(value)) {\n\t\tobj[key] = value;\n\t\treturn true;\n\t}\n});\nconst hooksSourceWeakMap = /* @__PURE__ */ new WeakMap();\nfunction toAuthEndpoints(endpoints, ctx) {\n\tconst api = {};\n\tfor (const [key, endpoint] of Object.entries(endpoints)) {\n\t\tapi[key] = async (context) => {\n\t\t\tconst run = async () => {\n\t\t\t\tconst authContext = await ctx;\n\t\t\t\tlet internalContext = {\n\t\t\t\t\t...context,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t...authContext,\n\t\t\t\t\t\treturned: void 0,\n\t\t\t\t\t\tresponseHeaders: void 0,\n\t\t\t\t\t\tsession: null\n\t\t\t\t\t},\n\t\t\t\t\tpath: endpoint.path,\n\t\t\t\t\theaders: context?.headers ? new Headers(context?.headers) : void 0\n\t\t\t\t};\n\t\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, async () => {\n\t\t\t\t\tconst { beforeHooks, afterHooks } = getHooks(authContext);\n\t\t\t\t\tconst before = await runBeforeHooks(internalContext, beforeHooks);\n\t\t\t\t\t/**\n\t\t\t\t\t* If `before.context` is returned, it should\n\t\t\t\t\t* get merged with the original context\n\t\t\t\t\t*/\n\t\t\t\t\tif (\"context\" in before && before.context && typeof before.context === \"object\") {\n\t\t\t\t\t\tconst { headers, ...rest } = before.context;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* Headers should be merged differently\n\t\t\t\t\t\t* so the hook doesn't override the whole\n\t\t\t\t\t\t* header\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (headers) headers.forEach((value, key$1) => {\n\t\t\t\t\t\t\tinternalContext.headers.set(key$1, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinternalContext = defuReplaceArrays(rest, internalContext);\n\t\t\t\t\t} else if (before) return context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(before, { headers: context?.headers }) : context?.returnHeaders ? {\n\t\t\t\t\t\theaders: context?.headers,\n\t\t\t\t\t\tresponse: before\n\t\t\t\t\t} : before;\n\t\t\t\t\tinternalContext.asResponse = false;\n\t\t\t\t\tinternalContext.returnHeaders = true;\n\t\t\t\t\tinternalContext.returnStatus = true;\n\t\t\t\t\tconst result = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, () => endpoint(internalContext)).catch((e) => {\n\t\t\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError)\n /**\n\t\t\t\t\t\t* API Errors from response are caught\n\t\t\t\t\t\t* and returned to hooks\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresponse: e,\n\t\t\t\t\t\t\tstatus: e.statusCode,\n\t\t\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tif (result && result instanceof Response) return result;\n\t\t\t\t\tinternalContext.context.returned = result.response;\n\t\t\t\t\tinternalContext.context.responseHeaders = result.headers;\n\t\t\t\t\tconst after = await runAfterHooks(internalContext, afterHooks);\n\t\t\t\t\tif (after.response) result.response = after.response;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(authContext.logger.level, \"debug\")) result.response.stack = result.response.errorStack;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && !context?.asResponse) throw result.response;\n\t\t\t\t\treturn context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(result.response, {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t}) : context?.returnHeaders ? context?.returnStatus ? {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response\n\t\t\t\t\t} : context?.returnStatus ? {\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : result.response;\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.hasRequestState)()) return run();\n\t\t\telse return (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithRequestState)(/* @__PURE__ */ new WeakMap(), run);\n\t\t};\n\t\tapi[key].path = endpoint.path;\n\t\tapi[key].options = endpoint.options;\n\t}\n\treturn api;\n}\nasync function runBeforeHooks(context, hooks) {\n\tlet modifiedContext = {};\n\tfor (const hook of hooks) {\n\t\tlet matched = false;\n\t\ttry {\n\t\t\tmatched = hook.matcher(context);\n\t\t} catch (error) {\n\t\t\tconst hookSource = hooksSourceWeakMap.get(hook.handler) ?? \"unknown\";\n\t\t\tcontext.context.logger.error(`An error occurred during ${hookSource} hook matcher execution:`, error);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_2__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `An error occurred during hook matcher execution. Check the logs for more details.` });\n\t\t}\n\t\tif (matched) {\n\t\t\tconst result = await hook.handler({\n\t\t\t\t...context,\n\t\t\t\treturnHeaders: false\n\t\t\t}).catch((e) => {\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t\tif (result && typeof result === \"object\") {\n\t\t\t\tif (\"context\" in result && typeof result.context === \"object\") {\n\t\t\t\t\tconst { headers, ...rest } = result.context;\n\t\t\t\t\tif (headers instanceof Headers) if (modifiedContext.headers) headers.forEach((value, key) => {\n\t\t\t\t\t\tmodifiedContext.headers?.set(key, value);\n\t\t\t\t\t});\n\t\t\t\t\telse modifiedContext.headers = headers;\n\t\t\t\t\tmodifiedContext = defuReplaceArrays(rest, modifiedContext);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\treturn { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler(context).catch((e) => {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\treturn {\n\t\t\t\t\tresponse: e,\n\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tif (result.headers) result.headers.forEach((value, key) => {\n\t\t\tif (!context.context.responseHeaders) context.context.responseHeaders = new Headers({ [key]: value });\n\t\t\telse if (key.toLowerCase() === \"set-cookie\") context.context.responseHeaders.append(key, value);\n\t\t\telse context.context.responseHeaders.set(key, value);\n\t\t});\n\t\tif (result.response) context.context.returned = result.response;\n\t}\n\treturn {\n\t\tresponse: context.context.returned,\n\t\theaders: context.context.responseHeaders\n\t};\n}\nfunction getHooks(authContext) {\n\tconst plugins = authContext.options.plugins || [];\n\tconst beforeHooks = [];\n\tconst afterHooks = [];\n\tconst beforeHookHandler = authContext.options.hooks?.before;\n\tif (beforeHookHandler) {\n\t\thooksSourceWeakMap.set(beforeHookHandler, \"user\");\n\t\tbeforeHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: beforeHookHandler\n\t\t});\n\t}\n\tconst afterHookHandler = authContext.options.hooks?.after;\n\tif (afterHookHandler) {\n\t\thooksSourceWeakMap.set(afterHookHandler, \"user\");\n\t\tafterHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: afterHookHandler\n\t\t});\n\t}\n\tconst pluginBeforeHooks = plugins.filter((plugin) => plugin.hooks?.before).map((plugin) => plugin.hooks?.before).flat();\n\tconst pluginAfterHooks = plugins.filter((plugin) => plugin.hooks?.after).map((plugin) => plugin.hooks?.after).flat();\n\t/**\n\t* Add plugin added hooks at last\n\t*/\n\tif (pluginBeforeHooks.length) beforeHooks.push(...pluginBeforeHooks);\n\tif (pluginAfterHooks.length) afterHooks.push(...pluginAfterHooks);\n\treturn {\n\t\tbeforeHooks,\n\t\tafterHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=to-auth-endpoints.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvdG8tYXV0aC1lbmRwb2ludHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlHO0FBQ2hEO0FBQ047QUFDakI7O0FBRWxDO0FBQ0EsMEJBQTBCLGdEQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRkFBc0I7QUFDakMsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPLDhDQUE4Qyx1REFBVSxXQUFXLDJCQUEyQjtBQUNyRztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRkFBc0I7QUFDaEQsdUJBQXVCLGlEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaURBQVEsSUFBSSx1RUFBZ0I7QUFDaEUsb0NBQW9DLGlEQUFRO0FBQzVDLGtDQUFrQyx1REFBVTtBQUM1QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsYUFBYSwwRUFBZTtBQUM1QixlQUFlLDhFQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0REFBNEQsWUFBWTtBQUN4RSxhQUFhLGlEQUFRLDRCQUE0Qiw4RkFBOEY7QUFDL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixxQkFBcUIsaURBQVEsSUFBSSx1RUFBZ0I7QUFDakQ7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGFBQWEsbUJBQW1CO0FBQ2hDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpREFBUTtBQUM1QixRQUFRLHVFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5RkFBeUYsY0FBYztBQUN2RztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhcGlcXHRvLWF1dGgtZW5kcG9pbnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXNSZXF1ZXN0U3RhdGUsIHJ1bldpdGhFbmRwb2ludENvbnRleHQsIHJ1bldpdGhSZXF1ZXN0U3RhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgc2hvdWxkUHVibGlzaExvZyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEFQSUVycm9yLCB0b1Jlc3BvbnNlIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVEZWZ1IH0gZnJvbSBcImRlZnVcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvdG8tYXV0aC1lbmRwb2ludHMudHNcbmNvbnN0IGRlZnVSZXBsYWNlQXJyYXlzID0gY3JlYXRlRGVmdSgob2JqLCBrZXksIHZhbHVlKSA9PiB7XG5cdGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdG9ialtrZXldID0gdmFsdWU7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn0pO1xuY29uc3QgaG9va3NTb3VyY2VXZWFrTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0b0F1dGhFbmRwb2ludHMoZW5kcG9pbnRzLCBjdHgpIHtcblx0Y29uc3QgYXBpID0ge307XG5cdGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKGVuZHBvaW50cykpIHtcblx0XHRhcGlba2V5XSA9IGFzeW5jIChjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBydW4gPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGF1dGhDb250ZXh0ID0gYXdhaXQgY3R4O1xuXHRcdFx0XHRsZXQgaW50ZXJuYWxDb250ZXh0ID0ge1xuXHRcdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdFx0Li4uYXV0aENvbnRleHQsXG5cdFx0XHRcdFx0XHRyZXR1cm5lZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBudWxsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXRoOiBlbmRwb2ludC5wYXRoLFxuXHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMgPyBuZXcgSGVhZGVycyhjb250ZXh0Py5oZWFkZXJzKSA6IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gcnVuV2l0aEVuZHBvaW50Q29udGV4dChpbnRlcm5hbENvbnRleHQsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCB7IGJlZm9yZUhvb2tzLCBhZnRlckhvb2tzIH0gPSBnZXRIb29rcyhhdXRoQ29udGV4dCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVmb3JlID0gYXdhaXQgcnVuQmVmb3JlSG9va3MoaW50ZXJuYWxDb250ZXh0LCBiZWZvcmVIb29rcyk7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBJZiBgYmVmb3JlLmNvbnRleHRgIGlzIHJldHVybmVkLCBpdCBzaG91bGRcblx0XHRcdFx0XHQqIGdldCBtZXJnZWQgd2l0aCB0aGUgb3JpZ2luYWwgY29udGV4dFxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0aWYgKFwiY29udGV4dFwiIGluIGJlZm9yZSAmJiBiZWZvcmUuY29udGV4dCAmJiB0eXBlb2YgYmVmb3JlLmNvbnRleHQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gYmVmb3JlLmNvbnRleHQ7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCogSGVhZGVycyBzaG91bGQgYmUgbWVyZ2VkIGRpZmZlcmVudGx5XG5cdFx0XHRcdFx0XHQqIHNvIHRoZSBob29rIGRvZXNuJ3Qgb3ZlcnJpZGUgdGhlIHdob2xlXG5cdFx0XHRcdFx0XHQqIGhlYWRlclxuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGlmIChoZWFkZXJzKSBoZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkkMSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuaGVhZGVycy5zZXQoa2V5JDEsIHZhbHVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0ID0gZGVmdVJlcGxhY2VBcnJheXMocmVzdCwgaW50ZXJuYWxDb250ZXh0KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGJlZm9yZSkgcmV0dXJuIGNvbnRleHQ/LmFzUmVzcG9uc2UgPyB0b1Jlc3BvbnNlKGJlZm9yZSwgeyBoZWFkZXJzOiBjb250ZXh0Py5oZWFkZXJzIH0pIDogY29udGV4dD8ucmV0dXJuSGVhZGVycyA/IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogYmVmb3JlXG5cdFx0XHRcdFx0fSA6IGJlZm9yZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuYXNSZXNwb25zZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5yZXR1cm5IZWFkZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQucmV0dXJuU3RhdHVzID0gdHJ1ZTtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBydW5XaXRoRW5kcG9pbnRDb250ZXh0KGludGVybmFsQ29udGV4dCwgKCkgPT4gZW5kcG9pbnQoaW50ZXJuYWxDb250ZXh0KSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpXG4gLyoqXG5cdFx0XHRcdFx0XHQqIEFQSSBFcnJvcnMgZnJvbSByZXNwb25zZSBhcmUgY2F1Z2h0XG5cdFx0XHRcdFx0XHQqIGFuZCByZXR1cm5lZCB0byBob29rc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlOiBlLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IGUuc3RhdHVzQ29kZSxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogZS5oZWFkZXJzID8gbmV3IEhlYWRlcnMoZS5oZWFkZXJzKSA6IG51bGxcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzcG9uc2UpIHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmV0dXJuZWQgPSByZXN1bHQucmVzcG9uc2U7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzID0gcmVzdWx0LmhlYWRlcnM7XG5cdFx0XHRcdFx0Y29uc3QgYWZ0ZXIgPSBhd2FpdCBydW5BZnRlckhvb2tzKGludGVybmFsQ29udGV4dCwgYWZ0ZXJIb29rcyk7XG5cdFx0XHRcdFx0aWYgKGFmdGVyLnJlc3BvbnNlKSByZXN1bHQucmVzcG9uc2UgPSBhZnRlci5yZXNwb25zZTtcblx0XHRcdFx0XHRpZiAocmVzdWx0LnJlc3BvbnNlIGluc3RhbmNlb2YgQVBJRXJyb3IgJiYgc2hvdWxkUHVibGlzaExvZyhhdXRoQ29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIHJlc3VsdC5yZXNwb25zZS5zdGFjayA9IHJlc3VsdC5yZXNwb25zZS5lcnJvclN0YWNrO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQucmVzcG9uc2UgaW5zdGFuY2VvZiBBUElFcnJvciAmJiAhY29udGV4dD8uYXNSZXNwb25zZSkgdGhyb3cgcmVzdWx0LnJlc3BvbnNlO1xuXHRcdFx0XHRcdHJldHVybiBjb250ZXh0Py5hc1Jlc3BvbnNlID8gdG9SZXNwb25zZShyZXN1bHQucmVzcG9uc2UsIHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSkgOiBjb250ZXh0Py5yZXR1cm5IZWFkZXJzID8gY29udGV4dD8ucmV0dXJuU3RhdHVzID8ge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogcmVzdWx0LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2U6IHJlc3VsdC5yZXNwb25zZVxuXHRcdFx0XHRcdH0gOiBjb250ZXh0Py5yZXR1cm5TdGF0dXMgPyB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHJlc3VsdC5yZXNwb25zZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdFx0aWYgKGF3YWl0IGhhc1JlcXVlc3RTdGF0ZSgpKSByZXR1cm4gcnVuKCk7XG5cdFx0XHRlbHNlIHJldHVybiBydW5XaXRoUmVxdWVzdFN0YXRlKC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBydW4pO1xuXHRcdH07XG5cdFx0YXBpW2tleV0ucGF0aCA9IGVuZHBvaW50LnBhdGg7XG5cdFx0YXBpW2tleV0ub3B0aW9ucyA9IGVuZHBvaW50Lm9wdGlvbnM7XG5cdH1cblx0cmV0dXJuIGFwaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkJlZm9yZUhvb2tzKGNvbnRleHQsIGhvb2tzKSB7XG5cdGxldCBtb2RpZmllZENvbnRleHQgPSB7fTtcblx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG5cdFx0bGV0IG1hdGNoZWQgPSBmYWxzZTtcblx0XHR0cnkge1xuXHRcdFx0bWF0Y2hlZCA9IGhvb2subWF0Y2hlcihjb250ZXh0KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgaG9va1NvdXJjZSA9IGhvb2tzU291cmNlV2Vha01hcC5nZXQoaG9vay5oYW5kbGVyKSA/PyBcInVua25vd25cIjtcblx0XHRcdGNvbnRleHQuY29udGV4dC5sb2dnZXIuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyAke2hvb2tTb3VyY2V9IGhvb2sgbWF0Y2hlciBleGVjdXRpb246YCwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBob29rIG1hdGNoZXIgZXhlY3V0aW9uLiBDaGVjayB0aGUgbG9ncyBmb3IgbW9yZSBkZXRhaWxzLmAgfSk7XG5cdFx0fVxuXHRcdGlmIChtYXRjaGVkKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoe1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZVxuXHRcdFx0fSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciAmJiBzaG91bGRQdWJsaXNoTG9nKGNvbnRleHQuY29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIGUuc3RhY2sgPSBlLmVycm9yU3RhY2s7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRpZiAoXCJjb250ZXh0XCIgaW4gcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuY29udGV4dCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gcmVzdWx0LmNvbnRleHQ7XG5cdFx0XHRcdFx0aWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSBpZiAobW9kaWZpZWRDb250ZXh0LmhlYWRlcnMpIGhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdFx0XHRcdFx0bW9kaWZpZWRDb250ZXh0LmhlYWRlcnM/LnNldChrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRlbHNlIG1vZGlmaWVkQ29udGV4dC5oZWFkZXJzID0gaGVhZGVycztcblx0XHRcdFx0XHRtb2RpZmllZENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBtb2RpZmllZENvbnRleHQpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7IGNvbnRleHQ6IG1vZGlmaWVkQ29udGV4dCB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQWZ0ZXJIb29rcyhjb250ZXh0LCBob29rcykge1xuXHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIGlmIChob29rLm1hdGNoZXIoY29udGV4dCkpIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoY29udGV4dCkuY2F0Y2goKGUpID0+IHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcblx0XHRcdFx0aWYgKHNob3VsZFB1Ymxpc2hMb2coY29udGV4dC5jb250ZXh0LmxvZ2dlci5sZXZlbCwgXCJkZWJ1Z1wiKSkgZS5zdGFjayA9IGUuZXJyb3JTdGFjaztcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXNwb25zZTogZSxcblx0XHRcdFx0XHRoZWFkZXJzOiBlLmhlYWRlcnMgPyBuZXcgSGVhZGVycyhlLmhlYWRlcnMpIDogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgZTtcblx0XHR9KTtcblx0XHRpZiAocmVzdWx0LmhlYWRlcnMpIHJlc3VsdC5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGlmICghY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycykgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgW2tleV06IHZhbHVlIH0pO1xuXHRcdFx0ZWxzZSBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IFwic2V0LWNvb2tpZVwiKSBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKTtcblx0XHRcdGVsc2UgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0fSk7XG5cdFx0aWYgKHJlc3VsdC5yZXNwb25zZSkgY29udGV4dC5jb250ZXh0LnJldHVybmVkID0gcmVzdWx0LnJlc3BvbnNlO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0cmVzcG9uc2U6IGNvbnRleHQuY29udGV4dC5yZXR1cm5lZCxcblx0XHRoZWFkZXJzOiBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzXG5cdH07XG59XG5mdW5jdGlvbiBnZXRIb29rcyhhdXRoQ29udGV4dCkge1xuXHRjb25zdCBwbHVnaW5zID0gYXV0aENvbnRleHQub3B0aW9ucy5wbHVnaW5zIHx8IFtdO1xuXHRjb25zdCBiZWZvcmVIb29rcyA9IFtdO1xuXHRjb25zdCBhZnRlckhvb2tzID0gW107XG5cdGNvbnN0IGJlZm9yZUhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYmVmb3JlO1xuXHRpZiAoYmVmb3JlSG9va0hhbmRsZXIpIHtcblx0XHRob29rc1NvdXJjZVdlYWtNYXAuc2V0KGJlZm9yZUhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YmVmb3JlSG9va3MucHVzaCh7XG5cdFx0XHRtYXRjaGVyOiAoKSA9PiB0cnVlLFxuXHRcdFx0aGFuZGxlcjogYmVmb3JlSG9va0hhbmRsZXJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBhZnRlckhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYWZ0ZXI7XG5cdGlmIChhZnRlckhvb2tIYW5kbGVyKSB7XG5cdFx0aG9va3NTb3VyY2VXZWFrTWFwLnNldChhZnRlckhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YWZ0ZXJIb29rcy5wdXNoKHtcblx0XHRcdG1hdGNoZXI6ICgpID0+IHRydWUsXG5cdFx0XHRoYW5kbGVyOiBhZnRlckhvb2tIYW5kbGVyXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcGx1Z2luQmVmb3JlSG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmJlZm9yZSkubWFwKChwbHVnaW4pID0+IHBsdWdpbi5ob29rcz8uYmVmb3JlKS5mbGF0KCk7XG5cdGNvbnN0IHBsdWdpbkFmdGVySG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmFmdGVyKS5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLmhvb2tzPy5hZnRlcikuZmxhdCgpO1xuXHQvKipcblx0KiBBZGQgcGx1Z2luIGFkZGVkIGhvb2tzIGF0IGxhc3Rcblx0Ki9cblx0aWYgKHBsdWdpbkJlZm9yZUhvb2tzLmxlbmd0aCkgYmVmb3JlSG9va3MucHVzaCguLi5wbHVnaW5CZWZvcmVIb29rcyk7XG5cdGlmIChwbHVnaW5BZnRlckhvb2tzLmxlbmd0aCkgYWZ0ZXJIb29rcy5wdXNoKC4uLnBsdWdpbkFmdGVySG9va3MpO1xuXHRyZXR1cm4ge1xuXHRcdGJlZm9yZUhvb2tzLFxuXHRcdGFmdGVySG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b0F1dGhFbmRwb2ludHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLWF1dGgtZW5kcG9pbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/base.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/base.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBetterAuth: () => (/* binding */ createBetterAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/helpers.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/auth/base.ts\nconst createBetterAuth = (options, initFn) => {\n\tconst authContext = initFn(options);\n\tconst { api } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(authContext, options);\n\treturn {\n\t\thandler: async (request) => {\n\t\t\tconst ctx = await authContext;\n\t\t\tconst basePath = ctx.options.basePath || \"/api/auth\";\n\t\t\tif (!ctx.options.baseURL) {\n\t\t\t\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(void 0, basePath, request, void 0, ctx.options.advanced?.trustedProxyHeaders);\n\t\t\t\tif (baseURL) {\n\t\t\t\t\tctx.baseURL = baseURL;\n\t\t\t\t\tctx.options.baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(ctx.baseURL) || void 0;\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Could not get base URL from request. Please provide a valid base URL.\");\n\t\t\t}\n\t\t\tctx.trustedOrigins = await (0,_context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getTrustedOrigins)(ctx.options, request);\n\t\t\tconst { handler } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.router)(ctx, options);\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__.runWithAdapter)(ctx.adapter, () => handler(request));\n\t\t},\n\t\tapi,\n\t\toptions,\n\t\t$context: authContext,\n\t\t$ERROR_CODES: {\n\t\t\t...options.plugins?.reduce((acc, plugin) => {\n\t\t\t\tif (plugin.$ERROR_CODES) return {\n\t\t\t\t\t...acc,\n\t\t\t\t\t...plugin.$ERROR_CODES\n\t\t\t\t};\n\t\t\t\treturn acc;\n\t\t\t}, {}),\n\t\t\t..._better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BASE_ERROR_CODES\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2Jhc2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5RDtBQUNEO0FBQ0c7QUFDQTtBQUNpQjs7QUFFNUU7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFNLEVBQUUsNERBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwREFBVTtBQUM5QjtBQUNBO0FBQ0EsMkJBQTJCLHlEQUFTO0FBQ3BDLE1BQU0sZUFBZSxvRUFBZTtBQUNwQztBQUNBLDhCQUE4Qix1RUFBaUI7QUFDL0MsV0FBVyxVQUFVLEVBQUUsc0RBQU07QUFDN0IsVUFBVSx5RUFBYztBQUN4QixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixNQUFNLHFFQUFnQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhdXRoXFxiYXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRCYXNlVVJMLCBnZXRPcmlnaW4gfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnRzLCByb3V0ZXIgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJ1c3RlZE9yaWdpbnMgfSBmcm9tIFwiLi4vY29udGV4dC9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgcnVuV2l0aEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUywgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXV0aC9iYXNlLnRzXG5jb25zdCBjcmVhdGVCZXR0ZXJBdXRoID0gKG9wdGlvbnMsIGluaXRGbikgPT4ge1xuXHRjb25zdCBhdXRoQ29udGV4dCA9IGluaXRGbihvcHRpb25zKTtcblx0Y29uc3QgeyBhcGkgfSA9IGdldEVuZHBvaW50cyhhdXRoQ29udGV4dCwgb3B0aW9ucyk7XG5cdHJldHVybiB7XG5cdFx0aGFuZGxlcjogYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRcdGNvbnN0IGN0eCA9IGF3YWl0IGF1dGhDb250ZXh0O1xuXHRcdFx0Y29uc3QgYmFzZVBhdGggPSBjdHgub3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiO1xuXHRcdFx0aWYgKCFjdHgub3B0aW9ucy5iYXNlVVJMKSB7XG5cdFx0XHRcdGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVVJMKHZvaWQgMCwgYmFzZVBhdGgsIHJlcXVlc3QsIHZvaWQgMCwgY3R4Lm9wdGlvbnMuYWR2YW5jZWQ/LnRydXN0ZWRQcm94eUhlYWRlcnMpO1xuXHRcdFx0XHRpZiAoYmFzZVVSTCkge1xuXHRcdFx0XHRcdGN0eC5iYXNlVVJMID0gYmFzZVVSTDtcblx0XHRcdFx0XHRjdHgub3B0aW9ucy5iYXNlVVJMID0gZ2V0T3JpZ2luKGN0eC5iYXNlVVJMKSB8fCB2b2lkIDA7XG5cdFx0XHRcdH0gZWxzZSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ291bGQgbm90IGdldCBiYXNlIFVSTCBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdFx0fVxuXHRcdFx0Y3R4LnRydXN0ZWRPcmlnaW5zID0gYXdhaXQgZ2V0VHJ1c3RlZE9yaWdpbnMoY3R4Lm9wdGlvbnMsIHJlcXVlc3QpO1xuXHRcdFx0Y29uc3QgeyBoYW5kbGVyIH0gPSByb3V0ZXIoY3R4LCBvcHRpb25zKTtcblx0XHRcdHJldHVybiBydW5XaXRoQWRhcHRlcihjdHguYWRhcHRlciwgKCkgPT4gaGFuZGxlcihyZXF1ZXN0KSk7XG5cdFx0fSxcblx0XHRhcGksXG5cdFx0b3B0aW9ucyxcblx0XHQkY29udGV4dDogYXV0aENvbnRleHQsXG5cdFx0JEVSUk9SX0NPREVTOiB7XG5cdFx0XHQuLi5vcHRpb25zLnBsdWdpbnM/LnJlZHVjZSgoYWNjLCBwbHVnaW4pID0+IHtcblx0XHRcdFx0aWYgKHBsdWdpbi4kRVJST1JfQ09ERVMpIHJldHVybiB7XG5cdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdC4uLnBsdWdpbi4kRVJST1JfQ09ERVNcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdH0sIHt9KSxcblx0XHRcdC4uLkJBU0VfRVJST1JfQ09ERVNcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUJldHRlckF1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/full.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/full.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   betterAuth: () => (/* binding */ betterAuth)\n/* harmony export */ });\n/* harmony import */ var _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context/init.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/init.mjs\");\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/base.mjs\");\n\n\n\n//#region src/auth/full.ts\n/**\n* Better Auth initializer for full mode (with Kysely)\n*\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth\";\n*\n* const auth = betterAuth({\n* \tdatabase: new PostgresDialect({ connection: process.env.DATABASE_URL }),\n* });\n* ```\n*\n* For minimal mode (without Kysely), import from `better-auth/minimal` instead\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth/minimal\";\n*\n* const auth = betterAuth({\n*\t  database: drizzleAdapter(db, { provider: \"pg\" }),\n* });\n*/\nconst betterAuth = (options) => {\n\treturn (0,_base_mjs__WEBPACK_IMPORTED_MODULE_1__.createBetterAuth)(options, _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__.init);\n};\n\n//#endregion\n\n//# sourceMappingURL=full.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2Z1bGwubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNHOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLG1DQUFtQyxzQ0FBc0M7QUFDekUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQsR0FBRztBQUNIO0FBQ0E7QUFDQSxRQUFRLDJEQUFnQixVQUFVLG1EQUFJO0FBQ3RDOztBQUVBO0FBQ3NCO0FBQ3RCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcYXV0aFxcZnVsbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdCB9IGZyb20gXCIuLi9jb250ZXh0L2luaXQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVCZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL2Z1bGwudHNcbi8qKlxuKiBCZXR0ZXIgQXV0aCBpbml0aWFsaXplciBmb3IgZnVsbCBtb2RlICh3aXRoIEt5c2VseSlcbipcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogaW1wb3J0IHsgYmV0dGVyQXV0aCB9IGZyb20gXCJiZXR0ZXItYXV0aFwiO1xuKlxuKiBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qIFx0ZGF0YWJhc2U6IG5ldyBQb3N0Z3Jlc0RpYWxlY3QoeyBjb25uZWN0aW9uOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfSksXG4qIH0pO1xuKiBgYGBcbipcbiogRm9yIG1pbmltYWwgbW9kZSAod2l0aG91dCBLeXNlbHkpLCBpbXBvcnQgZnJvbSBgYmV0dGVyLWF1dGgvbWluaW1hbGAgaW5zdGVhZFxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcImJldHRlci1hdXRoL21pbmltYWxcIjtcbipcbiogY29uc3QgYXV0aCA9IGJldHRlckF1dGgoe1xuKlx0ICBkYXRhYmFzZTogZHJpenpsZUFkYXB0ZXIoZGIsIHsgcHJvdmlkZXI6IFwicGdcIiB9KSxcbiogfSk7XG4qL1xuY29uc3QgYmV0dGVyQXV0aCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBjcmVhdGVCZXR0ZXJBdXRoKG9wdGlvbnMsIGluaXQpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBiZXR0ZXJBdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdWxsLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/full.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/trusted-origins.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchesOriginPattern: () => (/* binding */ matchesOriginPattern)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/wildcard.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\");\n\n\n\n//#region src/auth/trusted-origins.ts\n/**\n* Matches the given url against an origin or origin pattern\n* See \"options.trustedOrigins\" for details of supported patterns\n*\n* @param url The url to test\n* @param pattern The origin pattern\n* @param [settings] Specify supported pattern matching settings\n* @returns {boolean} true if the URL matches the origin pattern, false otherwise.\n*/\nconst matchesOriginPattern = (url, pattern, settings) => {\n\tif (url.startsWith(\"/\")) {\n\t\tif (settings?.allowRelativePaths) return url.startsWith(\"/\") && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url);\n\t\treturn false;\n\t}\n\tif (pattern.includes(\"*\") || pattern.includes(\"?\")) {\n\t\tif (pattern.includes(\"://\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)((0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) || url);\n\t\tconst host = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getHost)(url);\n\t\tif (!host) return false;\n\t\treturn (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)(host);\n\t}\n\tconst protocol = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getProtocol)(url);\n\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) : url.startsWith(pattern);\n};\n\n//#endregion\n\n//# sourceMappingURL=trusted-origins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL3RydXN0ZWQtb3JpZ2lucy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ2I7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQWEsVUFBVSx5REFBUztBQUN0RSxlQUFlLHVEQUFPO0FBQ3RCO0FBQ0EsU0FBUyxrRUFBYTtBQUN0QjtBQUNBLGtCQUFrQiwyREFBVztBQUM3QixpRkFBaUYseURBQVM7QUFDMUY7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxhdXRoXFx0cnVzdGVkLW9yaWdpbnMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgd2lsZGNhcmRNYXRjaCB9IGZyb20gXCIuLi91dGlscy93aWxkY2FyZC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL3RydXN0ZWQtb3JpZ2lucy50c1xuLyoqXG4qIE1hdGNoZXMgdGhlIGdpdmVuIHVybCBhZ2FpbnN0IGFuIG9yaWdpbiBvciBvcmlnaW4gcGF0dGVyblxuKiBTZWUgXCJvcHRpb25zLnRydXN0ZWRPcmlnaW5zXCIgZm9yIGRldGFpbHMgb2Ygc3VwcG9ydGVkIHBhdHRlcm5zXG4qXG4qIEBwYXJhbSB1cmwgVGhlIHVybCB0byB0ZXN0XG4qIEBwYXJhbSBwYXR0ZXJuIFRoZSBvcmlnaW4gcGF0dGVyblxuKiBAcGFyYW0gW3NldHRpbmdzXSBTcGVjaWZ5IHN1cHBvcnRlZCBwYXR0ZXJuIG1hdGNoaW5nIHNldHRpbmdzXG4qIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBVUkwgbWF0Y2hlcyB0aGUgb3JpZ2luIHBhdHRlcm4sIGZhbHNlIG90aGVyd2lzZS5cbiovXG5jb25zdCBtYXRjaGVzT3JpZ2luUGF0dGVybiA9ICh1cmwsIHBhdHRlcm4sIHNldHRpbmdzKSA9PiB7XG5cdGlmICh1cmwuc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHRpZiAoc2V0dGluZ3M/LmFsbG93UmVsYXRpdmVQYXRocykgcmV0dXJuIHVybC5zdGFydHNXaXRoKFwiL1wiKSAmJiAvXlxcLyg/IVxcL3xcXFxcfCUyZnwlNWMpW1xcd1xcLS5cXCsvQF0qKD86XFw/W1xcd1xcLS5cXCsvPSYlQF0qKT8kLy50ZXN0KHVybCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiKlwiKSB8fCBwYXR0ZXJuLmluY2x1ZGVzKFwiP1wiKSkge1xuXHRcdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiOi8vXCIpKSByZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShnZXRPcmlnaW4odXJsKSB8fCB1cmwpO1xuXHRcdGNvbnN0IGhvc3QgPSBnZXRIb3N0KHVybCk7XG5cdFx0aWYgKCFob3N0KSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHdpbGRjYXJkTWF0Y2gocGF0dGVybikoaG9zdCk7XG5cdH1cblx0Y29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuXHRyZXR1cm4gcHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCBwcm90b2NvbCA9PT0gXCJodHRwczpcIiB8fCAhcHJvdG9jb2wgPyBwYXR0ZXJuID09PSBnZXRPcmlnaW4odXJsKSA6IHVybC5zdGFydHNXaXRoKHBhdHRlcm4pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJ1c3RlZC1vcmlnaW5zLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/broadcast-channel.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/broadcast-channel.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalBroadcastChannel: () => (/* binding */ getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* binding */ kBroadcastChannel)\n/* harmony export */ });\n//#region src/client/broadcast-channel.ts\nconst kBroadcastChannel = Symbol.for(\"better-auth:broadcast-channel\");\nconst now = () => Math.floor(Date.now() / 1e3);\nvar WindowBroadcastChannel = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tname;\n\tconstructor(name = \"better-auth.message\") {\n\t\tthis.name = name;\n\t}\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tpost(message) {\n\t\tif (typeof window === \"undefined\") return;\n\t\ttry {\n\t\t\tlocalStorage.setItem(this.name, JSON.stringify({\n\t\t\t\t...message,\n\t\t\t\ttimestamp: now()\n\t\t\t}));\n\t\t} catch {}\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst handler = (event) => {\n\t\t\tif (event.key !== this.name) return;\n\t\t\tconst message = JSON.parse(event.newValue ?? \"{}\");\n\t\t\tif (message?.event !== \"session\" || !message?.data) return;\n\t\t\tthis.listeners.forEach((listener) => listener(message));\n\t\t};\n\t\twindow.addEventListener(\"storage\", handler);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"storage\", handler);\n\t\t};\n\t}\n};\nfunction getGlobalBroadcastChannel(name = \"better-auth.message\") {\n\tif (!globalThis[kBroadcastChannel]) globalThis[kBroadcastChannel] = new WindowBroadcastChannel(name);\n\treturn globalThis[kBroadcastChannel];\n}\n\n//#endregion\n\n//# sourceMappingURL=broadcast-channel.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dEO0FBQ3hEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxicm9hZGNhc3QtY2hhbm5lbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwudHNcbmNvbnN0IGtCcm9hZGNhc3RDaGFubmVsID0gU3ltYm9sLmZvcihcImJldHRlci1hdXRoOmJyb2FkY2FzdC1jaGFubmVsXCIpO1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbnZhciBXaW5kb3dCcm9hZGNhc3RDaGFubmVsID0gY2xhc3Mge1xuXHRsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRuYW1lO1xuXHRjb25zdHJ1Y3RvcihuYW1lID0gXCJiZXR0ZXItYXV0aC5tZXNzYWdlXCIpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR9XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRwb3N0KG1lc3NhZ2UpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm5hbWUsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4ubWVzc2FnZSxcblx0XHRcdFx0dGltZXN0YW1wOiBub3coKVxuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2gge31cblx0fVxuXHRzZXR1cCgpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiAoKSA9PiB7fTtcblx0XHRjb25zdCBoYW5kbGVyID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ICE9PSB0aGlzLm5hbWUpIHJldHVybjtcblx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50Lm5ld1ZhbHVlID8/IFwie31cIik7XG5cdFx0XHRpZiAobWVzc2FnZT8uZXZlbnQgIT09IFwic2Vzc2lvblwiIHx8ICFtZXNzYWdlPy5kYXRhKSByZXR1cm47XG5cdFx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIobWVzc2FnZSkpO1xuXHRcdH07XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIGhhbmRsZXIpO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgaGFuZGxlcik7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwobmFtZSA9IFwiYmV0dGVyLWF1dGgubWVzc2FnZVwiKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trQnJvYWRjYXN0Q2hhbm5lbF0pIGdsb2JhbFRoaXNba0Jyb2FkY2FzdENoYW5uZWxdID0gbmV3IFdpbmRvd0Jyb2FkY2FzdENoYW5uZWwobmFtZSk7XG5cdHJldHVybiBnbG9iYWxUaGlzW2tCcm9hZGNhc3RDaGFubmVsXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsLCBrQnJvYWRjYXN0Q2hhbm5lbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvYWRjYXN0LWNoYW5uZWwubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/config.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/config.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientConfig: () => (/* binding */ getClientConfig)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-plugins.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\");\n/* harmony import */ var _parser_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-atom.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/session-atom.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n//#region src/client/config.ts\nconst getClientConfig = (options, loadEnv) => {\n\tconst isCredentialsSupported = \"credentials\" in Request.prototype;\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(options?.baseURL, options?.basePath, void 0, loadEnv) ?? \"/api/auth\";\n\tconst pluginsFetchPlugins = options?.plugins?.flatMap((plugin) => plugin.fetchPlugins).filter((pl) => pl !== void 0) || [];\n\tconst lifeCyclePlugin = {\n\t\tid: \"lifecycle-hooks\",\n\t\tname: \"lifecycle-hooks\",\n\t\thooks: {\n\t\t\tonSuccess: options?.fetchOptions?.onSuccess,\n\t\t\tonError: options?.fetchOptions?.onError,\n\t\t\tonRequest: options?.fetchOptions?.onRequest,\n\t\t\tonResponse: options?.fetchOptions?.onResponse\n\t\t}\n\t};\n\tconst { onSuccess: _onSuccess, onError: _onError, onRequest: _onRequest, onResponse: _onResponse, ...restOfFetchOptions } = options?.fetchOptions || {};\n\tconst $fetch = (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.createFetch)({\n\t\tbaseURL,\n\t\t...isCredentialsSupported ? { credentials: \"include\" } : {},\n\t\tmethod: \"GET\",\n\t\tjsonParser(text) {\n\t\t\tif (!text) return null;\n\t\t\treturn (0,_parser_mjs__WEBPACK_IMPORTED_MODULE_2__.parseJSON)(text, { strict: false });\n\t\t},\n\t\tcustomFetchImpl: fetch,\n\t\t...restOfFetchOptions,\n\t\tplugins: [\n\t\t\tlifeCyclePlugin,\n\t\t\t...restOfFetchOptions.plugins || [],\n\t\t\t...options?.disableDefaultFetchPlugins ? [] : [_fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__.redirectPlugin],\n\t\t\t...pluginsFetchPlugins\n\t\t]\n\t});\n\tconst { $sessionSignal, session } = (0,_session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionAtom)($fetch, options);\n\tconst plugins = options?.plugins || [];\n\tlet pluginsActions = {};\n\tconst pluginsAtoms = {\n\t\t$sessionSignal,\n\t\tsession\n\t};\n\tconst pluginPathMethods = {\n\t\t\"/sign-out\": \"POST\",\n\t\t\"/revoke-sessions\": \"POST\",\n\t\t\"/revoke-other-sessions\": \"POST\",\n\t\t\"/delete-user\": \"POST\"\n\t};\n\tconst atomListeners = [{\n\t\tsignal: \"$sessionSignal\",\n\t\tmatcher(path) {\n\t\t\treturn path === \"/sign-out\" || path === \"/update-user\" || path === \"/sign-up/email\" || path === \"/sign-in/email\" || path === \"/delete-user\" || path === \"/verify-email\" || path === \"/revoke-sessions\" || path === \"/revoke-session\" || path === \"/change-email\";\n\t\t}\n\t}];\n\tfor (const plugin of plugins) {\n\t\tif (plugin.getAtoms) Object.assign(pluginsAtoms, plugin.getAtoms?.($fetch));\n\t\tif (plugin.pathMethods) Object.assign(pluginPathMethods, plugin.pathMethods);\n\t\tif (plugin.atomListeners) atomListeners.push(...plugin.atomListeners);\n\t}\n\tconst $store = {\n\t\tnotify: (signal) => {\n\t\t\tpluginsAtoms[signal].set(!pluginsAtoms[signal].get());\n\t\t},\n\t\tlisten: (signal, listener) => {\n\t\t\tpluginsAtoms[signal].subscribe(listener);\n\t\t},\n\t\tatoms: pluginsAtoms\n\t};\n\tfor (const plugin of plugins) if (plugin.getActions) pluginsActions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(plugin.getActions?.($fetch, $store, options) ?? {}, pluginsActions);\n\treturn {\n\t\tget baseURL() {\n\t\t\treturn baseURL;\n\t\t},\n\t\tpluginsActions,\n\t\tpluginsAtoms,\n\t\tpluginPathMethods,\n\t\tatomListeners,\n\t\t$fetch,\n\t\t$store\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=config.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvY29uZmlnLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQ087QUFDWjtBQUNXO0FBQ2Q7QUFDWTs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtIQUFrSDtBQUMzSCxnQkFBZ0IsZ0VBQVc7QUFDM0I7QUFDQSxnQ0FBZ0MseUJBQXlCLElBQUk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzREFBUyxTQUFTLGVBQWU7QUFDM0MsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsOERBQWM7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRixTQUFTLDBCQUEwQixFQUFFLGlFQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx1RUFBdUUsMENBQU0sbURBQW1EO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxjb25maWcubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgcmVkaXJlY3RQbHVnaW4gfSBmcm9tIFwiLi9mZXRjaC1wbHVnaW5zLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VKU09OIH0gZnJvbSBcIi4vcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkF0b20gfSBmcm9tIFwiLi9zZXNzaW9uLWF0b20ubWpzXCI7XG5pbXBvcnQgeyBkZWZ1IGFzIGRlZnUkMSB9IGZyb20gXCJkZWZ1XCI7XG5pbXBvcnQgeyBjcmVhdGVGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2NvbmZpZy50c1xuY29uc3QgZ2V0Q2xpZW50Q29uZmlnID0gKG9wdGlvbnMsIGxvYWRFbnYpID0+IHtcblx0Y29uc3QgaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA9IFwiY3JlZGVudGlhbHNcIiBpbiBSZXF1ZXN0LnByb3RvdHlwZTtcblx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwob3B0aW9ucz8uYmFzZVVSTCwgb3B0aW9ucz8uYmFzZVBhdGgsIHZvaWQgMCwgbG9hZEVudikgPz8gXCIvYXBpL2F1dGhcIjtcblx0Y29uc3QgcGx1Z2luc0ZldGNoUGx1Z2lucyA9IG9wdGlvbnM/LnBsdWdpbnM/LmZsYXRNYXAoKHBsdWdpbikgPT4gcGx1Z2luLmZldGNoUGx1Z2lucykuZmlsdGVyKChwbCkgPT4gcGwgIT09IHZvaWQgMCkgfHwgW107XG5cdGNvbnN0IGxpZmVDeWNsZVBsdWdpbiA9IHtcblx0XHRpZDogXCJsaWZlY3ljbGUtaG9va3NcIixcblx0XHRuYW1lOiBcImxpZmVjeWNsZS1ob29rc1wiLFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRvblN1Y2Nlc3M6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25TdWNjZXNzLFxuXHRcdFx0b25FcnJvcjogb3B0aW9ucz8uZmV0Y2hPcHRpb25zPy5vbkVycm9yLFxuXHRcdFx0b25SZXF1ZXN0OiBvcHRpb25zPy5mZXRjaE9wdGlvbnM/Lm9uUmVxdWVzdCxcblx0XHRcdG9uUmVzcG9uc2U6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25SZXNwb25zZVxuXHRcdH1cblx0fTtcblx0Y29uc3QgeyBvblN1Y2Nlc3M6IF9vblN1Y2Nlc3MsIG9uRXJyb3I6IF9vbkVycm9yLCBvblJlcXVlc3Q6IF9vblJlcXVlc3QsIG9uUmVzcG9uc2U6IF9vblJlc3BvbnNlLCAuLi5yZXN0T2ZGZXRjaE9wdGlvbnMgfSA9IG9wdGlvbnM/LmZldGNoT3B0aW9ucyB8fCB7fTtcblx0Y29uc3QgJGZldGNoID0gY3JlYXRlRmV0Y2goe1xuXHRcdGJhc2VVUkwsXG5cdFx0Li4uaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA/IHsgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiIH0gOiB7fSxcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0anNvblBhcnNlcih0ZXh0KSB7XG5cdFx0XHRpZiAoIXRleHQpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHBhcnNlSlNPTih0ZXh0LCB7IHN0cmljdDogZmFsc2UgfSk7XG5cdFx0fSxcblx0XHRjdXN0b21GZXRjaEltcGw6IGZldGNoLFxuXHRcdC4uLnJlc3RPZkZldGNoT3B0aW9ucyxcblx0XHRwbHVnaW5zOiBbXG5cdFx0XHRsaWZlQ3ljbGVQbHVnaW4sXG5cdFx0XHQuLi5yZXN0T2ZGZXRjaE9wdGlvbnMucGx1Z2lucyB8fCBbXSxcblx0XHRcdC4uLm9wdGlvbnM/LmRpc2FibGVEZWZhdWx0RmV0Y2hQbHVnaW5zID8gW10gOiBbcmVkaXJlY3RQbHVnaW5dLFxuXHRcdFx0Li4ucGx1Z2luc0ZldGNoUGx1Z2luc1xuXHRcdF1cblx0fSk7XG5cdGNvbnN0IHsgJHNlc3Npb25TaWduYWwsIHNlc3Npb24gfSA9IGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucyk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zPy5wbHVnaW5zIHx8IFtdO1xuXHRsZXQgcGx1Z2luc0FjdGlvbnMgPSB7fTtcblx0Y29uc3QgcGx1Z2luc0F0b21zID0ge1xuXHRcdCRzZXNzaW9uU2lnbmFsLFxuXHRcdHNlc3Npb25cblx0fTtcblx0Y29uc3QgcGx1Z2luUGF0aE1ldGhvZHMgPSB7XG5cdFx0XCIvc2lnbi1vdXRcIjogXCJQT1NUXCIsXG5cdFx0XCIvcmV2b2tlLXNlc3Npb25zXCI6IFwiUE9TVFwiLFxuXHRcdFwiL3Jldm9rZS1vdGhlci1zZXNzaW9uc1wiOiBcIlBPU1RcIixcblx0XHRcIi9kZWxldGUtdXNlclwiOiBcIlBPU1RcIlxuXHR9O1xuXHRjb25zdCBhdG9tTGlzdGVuZXJzID0gW3tcblx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIixcblx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdHJldHVybiBwYXRoID09PSBcIi9zaWduLW91dFwiIHx8IHBhdGggPT09IFwiL3VwZGF0ZS11c2VyXCIgfHwgcGF0aCA9PT0gXCIvc2lnbi11cC9lbWFpbFwiIHx8IHBhdGggPT09IFwiL3NpZ24taW4vZW1haWxcIiB8fCBwYXRoID09PSBcIi9kZWxldGUtdXNlclwiIHx8IHBhdGggPT09IFwiL3ZlcmlmeS1lbWFpbFwiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uc1wiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uXCIgfHwgcGF0aCA9PT0gXCIvY2hhbmdlLWVtYWlsXCI7XG5cdFx0fVxuXHR9XTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykge1xuXHRcdGlmIChwbHVnaW4uZ2V0QXRvbXMpIE9iamVjdC5hc3NpZ24ocGx1Z2luc0F0b21zLCBwbHVnaW4uZ2V0QXRvbXM/LigkZmV0Y2gpKTtcblx0XHRpZiAocGx1Z2luLnBhdGhNZXRob2RzKSBPYmplY3QuYXNzaWduKHBsdWdpblBhdGhNZXRob2RzLCBwbHVnaW4ucGF0aE1ldGhvZHMpO1xuXHRcdGlmIChwbHVnaW4uYXRvbUxpc3RlbmVycykgYXRvbUxpc3RlbmVycy5wdXNoKC4uLnBsdWdpbi5hdG9tTGlzdGVuZXJzKTtcblx0fVxuXHRjb25zdCAkc3RvcmUgPSB7XG5cdFx0bm90aWZ5OiAoc2lnbmFsKSA9PiB7XG5cdFx0XHRwbHVnaW5zQXRvbXNbc2lnbmFsXS5zZXQoIXBsdWdpbnNBdG9tc1tzaWduYWxdLmdldCgpKTtcblx0XHR9LFxuXHRcdGxpc3RlbjogKHNpZ25hbCwgbGlzdGVuZXIpID0+IHtcblx0XHRcdHBsdWdpbnNBdG9tc1tzaWduYWxdLnN1YnNjcmliZShsaXN0ZW5lcik7XG5cdFx0fSxcblx0XHRhdG9tczogcGx1Z2luc0F0b21zXG5cdH07XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIGlmIChwbHVnaW4uZ2V0QWN0aW9ucykgcGx1Z2luc0FjdGlvbnMgPSBkZWZ1JDEocGx1Z2luLmdldEFjdGlvbnM/LigkZmV0Y2gsICRzdG9yZSwgb3B0aW9ucykgPz8ge30sIHBsdWdpbnNBY3Rpb25zKTtcblx0cmV0dXJuIHtcblx0XHRnZXQgYmFzZVVSTCgpIHtcblx0XHRcdHJldHVybiBiYXNlVVJMO1xuXHRcdH0sXG5cdFx0cGx1Z2luc0FjdGlvbnMsXG5cdFx0cGx1Z2luc0F0b21zLFxuXHRcdHBsdWdpblBhdGhNZXRob2RzLFxuXHRcdGF0b21MaXN0ZW5lcnMsXG5cdFx0JGZldGNoLFxuXHRcdCRzdG9yZVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRDbGllbnRDb25maWcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/config.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/fetch-plugins.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/fetch-plugins.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redirectPlugin: () => (/* binding */ redirectPlugin)\n/* harmony export */ });\n//#region src/client/fetch-plugins.ts\nconst redirectPlugin = {\n\tid: \"redirect\",\n\tname: \"Redirect\",\n\thooks: { onSuccess(context) {\n\t\tif (context.data?.url && context.data?.redirect) {\n\t\t\tif (typeof window !== \"undefined\" && window.location) {\n\t\t\t\tif (window.location) try {\n\t\t\t\t\twindow.location.href = context.data.url;\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\t} }\n};\n\n//#endregion\n\n//# sourceMappingURL=fetch-plugins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZmV0Y2gtcGx1Z2lucy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxmZXRjaC1wbHVnaW5zLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9mZXRjaC1wbHVnaW5zLnRzXG5jb25zdCByZWRpcmVjdFBsdWdpbiA9IHtcblx0aWQ6IFwicmVkaXJlY3RcIixcblx0bmFtZTogXCJSZWRpcmVjdFwiLFxuXHRob29rczogeyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdGlmIChjb250ZXh0LmRhdGE/LnVybCAmJiBjb250ZXh0LmRhdGE/LnJlZGlyZWN0KSB7XG5cdFx0XHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHtcblx0XHRcdFx0aWYgKHdpbmRvdy5sb2NhdGlvbikgdHJ5IHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbnRleHQuZGF0YS51cmw7XG5cdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyByZWRpcmVjdFBsdWdpbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2gtcGx1Z2lucy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/focus-manager.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/focus-manager.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalFocusManager: () => (/* binding */ getGlobalFocusManager),\n/* harmony export */   kFocusManager: () => (/* binding */ kFocusManager)\n/* harmony export */ });\n//#region src/client/focus-manager.ts\nconst kFocusManager = Symbol.for(\"better-auth:focus-manager\");\nvar WindowFocusManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetFocused(focused) {\n\t\tthis.listeners.forEach((listener) => listener(focused));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof document === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst visibilityHandler = () => {\n\t\t\tif (document.visibilityState === \"visible\") this.setFocused(true);\n\t\t};\n\t\tdocument.addEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\t};\n\t}\n};\nfunction getGlobalFocusManager() {\n\tif (!globalThis[kFocusManager]) globalThis[kFocusManager] = new WindowFocusManager();\n\treturn globalThis[kFocusManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=focus-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZm9jdXMtbWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcZm9jdXMtbWFuYWdlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvZm9jdXMtbWFuYWdlci50c1xuY29uc3Qga0ZvY3VzTWFuYWdlciA9IFN5bWJvbC5mb3IoXCJiZXR0ZXItYXV0aDpmb2N1cy1tYW5hZ2VyXCIpO1xudmFyIFdpbmRvd0ZvY3VzTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0c3Vic2NyaWJlKGxpc3RlbmVyKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcblx0XHR9O1xuXHR9XG5cdHNldEZvY3VzZWQoZm9jdXNlZCkge1xuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihmb2N1c2VkKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICgpID0+IHt9O1xuXHRcdGNvbnN0IHZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0aWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHRoaXMuc2V0Rm9jdXNlZCh0cnVlKTtcblx0XHR9O1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEZvY3VzTWFuYWdlcigpIHtcblx0aWYgKCFnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdKSBnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdID0gbmV3IFdpbmRvd0ZvY3VzTWFuYWdlcigpO1xuXHRyZXR1cm4gZ2xvYmFsVGhpc1trRm9jdXNNYW5hZ2VyXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxGb2N1c01hbmFnZXIsIGtGb2N1c01hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLW1hbmFnZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/focus-manager.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferAuth: () => (/* binding */ InferAuth),\n/* harmony export */   InferPlugin: () => (/* binding */ InferPlugin),\n/* harmony export */   createAuthClient: () => (/* reexport safe */ _vanilla_mjs__WEBPACK_IMPORTED_MODULE_5__.createAuthClient),\n/* harmony export */   createSessionRefreshManager: () => (/* reexport safe */ _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_4__.createSessionRefreshManager),\n/* harmony export */   getGlobalBroadcastChannel: () => (/* reexport safe */ _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* reexport safe */ _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.kBroadcastChannel),\n/* harmony export */   kFocusManager: () => (/* reexport safe */ _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.kFocusManager),\n/* harmony export */   kOnlineManager: () => (/* reexport safe */ _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.kOnlineManager),\n/* harmony export */   useAuthQuery: () => (/* reexport safe */ _query_mjs__WEBPACK_IMPORTED_MODULE_3__.useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/online-manager.mjs\");\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var _vanilla_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./vanilla.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/vanilla.mjs\");\n\n\n\n\n\n\n\n//#region src/client/index.ts\nconst InferPlugin = () => {\n\treturn {\n\t\tid: \"infer-server-plugin\",\n\t\t$InferServerPlugin: {}\n\t};\n};\nfunction InferAuth() {\n\treturn {};\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RjtBQUNuQztBQUNFO0FBQ1g7QUFDeUI7QUFDbkI7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRLO0FBQzVLIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCwga0Jyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGtGb2N1c01hbmFnZXIgfSBmcm9tIFwiLi9mb2N1cy1tYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsga09ubGluZU1hbmFnZXIgfSBmcm9tIFwiLi9vbmxpbmUtbWFuYWdlci5tanNcIjtcbmltcG9ydCB7IHVzZUF1dGhRdWVyeSB9IGZyb20gXCIuL3F1ZXJ5Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2Vzc2lvblJlZnJlc2hNYW5hZ2VyIH0gZnJvbSBcIi4vc2Vzc2lvbi1yZWZyZXNoLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aENsaWVudCB9IGZyb20gXCIuL3ZhbmlsbGEubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2luZGV4LnRzXG5jb25zdCBJbmZlclBsdWdpbiA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJpbmZlci1zZXJ2ZXItcGx1Z2luXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcbmZ1bmN0aW9uIEluZmVyQXV0aCgpIHtcblx0cmV0dXJuIHt9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEluZmVyQXV0aCwgSW5mZXJQbHVnaW4sIGNyZWF0ZUF1dGhDbGllbnQsIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciwgZ2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCwga0Jyb2FkY2FzdENoYW5uZWwsIGtGb2N1c01hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyLCB1c2VBdXRoUXVlcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/online-manager.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/online-manager.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalOnlineManager: () => (/* binding */ getGlobalOnlineManager),\n/* harmony export */   kOnlineManager: () => (/* binding */ kOnlineManager)\n/* harmony export */ });\n//#region src/client/online-manager.ts\nconst kOnlineManager = Symbol.for(\"better-auth:online-manager\");\nvar WindowOnlineManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tisOnline = typeof navigator !== \"undefined\" ? navigator.onLine : true;\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetOnline(online) {\n\t\tthis.isOnline = online;\n\t\tthis.listeners.forEach((listener) => listener(online));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst onOnline = () => this.setOnline(true);\n\t\tconst onOffline = () => this.setOnline(false);\n\t\twindow.addEventListener(\"online\", onOnline, false);\n\t\twindow.addEventListener(\"offline\", onOffline, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"online\", onOnline, false);\n\t\t\twindow.removeEventListener(\"offline\", onOffline, false);\n\t\t};\n\t}\n};\nfunction getGlobalOnlineManager() {\n\tif (!globalThis[kOnlineManager]) globalThis[kOnlineManager] = new WindowOnlineManager();\n\treturn globalThis[kOnlineManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=online-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvb25saW5lLW1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXG9ubGluZS1tYW5hZ2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9vbmxpbmUtbWFuYWdlci50c1xuY29uc3Qga09ubGluZU1hbmFnZXIgPSBTeW1ib2wuZm9yKFwiYmV0dGVyLWF1dGg6b25saW5lLW1hbmFnZXJcIik7XG52YXIgV2luZG93T25saW5lTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0aXNPbmxpbmUgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yLm9uTGluZSA6IHRydWU7XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRzZXRPbmxpbmUob25saW5lKSB7XG5cdFx0dGhpcy5pc09ubGluZSA9IG9ubGluZTtcblx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIob25saW5lKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gKCkgPT4ge307XG5cdFx0Y29uc3Qgb25PbmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZSh0cnVlKTtcblx0XHRjb25zdCBvbk9mZmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZShmYWxzZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgb25PbmxpbmUsIGZhbHNlKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIG9uT25saW5lLCBmYWxzZSk7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trT25saW5lTWFuYWdlcl0pIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdID0gbmV3IFdpbmRvd09ubGluZU1hbmFnZXIoKTtcblx0cmV0dXJuIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEdsb2JhbE9ubGluZU1hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbmxpbmUtbWFuYWdlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/online-manager.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/parser.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/parser.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJSON: () => (/* binding */ parseJSON)\n/* harmony export */ });\n//#region src/client/parser.ts\nconst PROTO_POLLUTION_PATTERNS = {\n\tproto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n\tconstructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n\tprotoShort: /\"__proto__\"\\s*:/,\n\tconstructorShort: /\"constructor\"\\s*:/\n};\nconst JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nconst SPECIAL_VALUES = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: void 0,\n\tnan: NaN,\n\tinfinity: Number.POSITIVE_INFINITY,\n\t\"-infinity\": Number.NEGATIVE_INFINITY\n};\nconst ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n\tconst match = ISO_DATE_REGEX.exec(value);\n\tif (!match) return null;\n\tconst [, year, month, day, hour, minute, second, ms, offsetSign, offsetHour, offsetMinute] = match;\n\tconst date = new Date(Date.UTC(parseInt(year, 10), parseInt(month, 10) - 1, parseInt(day, 10), parseInt(hour, 10), parseInt(minute, 10), parseInt(second, 10), ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0));\n\tif (offsetSign) {\n\t\tconst offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n\t\tdate.setUTCMinutes(date.getUTCMinutes() + offset);\n\t}\n\treturn isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n\tconst { strict = false, warnings = false, reviver, parseDates = true } = options;\n\tif (typeof value !== \"string\") return value;\n\tconst trimmed = value.trim();\n\tif (trimmed.length > 0 && trimmed[0] === \"\\\"\" && trimmed.endsWith(\"\\\"\") && !trimmed.slice(1, -1).includes(\"\\\"\")) return trimmed.slice(1, -1);\n\tconst lowerValue = trimmed.toLowerCase();\n\tif (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) return SPECIAL_VALUES[lowerValue];\n\tif (!JSON_SIGNATURE.test(trimmed)) {\n\t\tif (strict) throw new SyntaxError(\"[better-json] Invalid JSON\");\n\t\treturn value;\n\t}\n\tif (Object.entries(PROTO_POLLUTION_PATTERNS).some(([key, pattern]) => {\n\t\tconst matches = pattern.test(trimmed);\n\t\tif (matches && warnings) console.warn(`[better-json] Detected potential prototype pollution attempt using ${key} pattern`);\n\t\treturn matches;\n\t}) && strict) throw new Error(\"[better-json] Potential prototype pollution attempt detected\");\n\ttry {\n\t\tconst secureReviver = (key, value$1) => {\n\t\t\tif (key === \"__proto__\" || key === \"constructor\" && value$1 && typeof value$1 === \"object\" && \"prototype\" in value$1) {\n\t\t\t\tif (warnings) console.warn(`[better-json] Dropping \"${key}\" key to prevent prototype pollution`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (parseDates && typeof value$1 === \"string\") {\n\t\t\t\tconst date = parseISODate(value$1);\n\t\t\t\tif (date) return date;\n\t\t\t}\n\t\t\treturn reviver ? reviver(key, value$1) : value$1;\n\t\t};\n\t\treturn JSON.parse(trimmed, secureReviver);\n\t} catch (error) {\n\t\tif (strict) throw error;\n\t\treturn value;\n\t}\n}\nfunction parseJSON(value, options = { strict: true }) {\n\treturn betterJSONParse(value, options);\n}\n\n//#endregion\n\n//# sourceMappingURL=parser.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGFyc2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLG9CQUFvQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFdBQVcsS0FBSyxNQUFNLEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLElBQUksa0JBQWtCLEVBQUUsTUFBTSxFQUFFO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsU0FBUywrREFBK0Q7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RyxLQUFLO0FBQ25IO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxJQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxjQUFjO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHBhcnNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvcGFyc2VyLnRzXG5jb25zdCBQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMgPSB7XG5cdHByb3RvOiAvXCIoPzpffFxcXFx1MHsyfTVbRmZdKXsyfSg/OnB8XFxcXHUwezJ9NzApKD86cnxcXFxcdTB7Mn03MikoPzpvfFxcXFx1MHsyfTZbRmZdKSg/OnR8XFxcXHUwezJ9NzQpKD86b3xcXFxcdTB7Mn02W0ZmXSkoPzpffFxcXFx1MHsyfTVbRmZdKXsyfVwiXFxzKjovLFxuXHRjb25zdHJ1Y3RvcjogL1wiKD86Y3xcXFxcdTAwNjMpKD86b3xcXFxcdTAwNltGZl0pKD86bnxcXFxcdTAwNltFZV0pKD86c3xcXFxcdTAwNzMpKD86dHxcXFxcdTAwNzQpKD86cnxcXFxcdTAwNzIpKD86dXxcXFxcdTAwNzUpKD86Y3xcXFxcdTAwNjMpKD86dHxcXFxcdTAwNzQpKD86b3xcXFxcdTAwNltGZl0pKD86cnxcXFxcdTAwNzIpXCJcXHMqOi8sXG5cdHByb3RvU2hvcnQ6IC9cIl9fcHJvdG9fX1wiXFxzKjovLFxuXHRjb25zdHJ1Y3RvclNob3J0OiAvXCJjb25zdHJ1Y3RvclwiXFxzKjovXG59O1xuY29uc3QgSlNPTl9TSUdOQVRVUkUgPSAvXlxccypbXCJbe118XlxccyotP1xcZHsxLDE2fShcXC5cXGR7MSwxN30pPyhbRWVdWystXT9cXGQrKT9cXHMqJC87XG5jb25zdCBTUEVDSUFMX1ZBTFVFUyA9IHtcblx0dHJ1ZTogdHJ1ZSxcblx0ZmFsc2U6IGZhbHNlLFxuXHRudWxsOiBudWxsLFxuXHR1bmRlZmluZWQ6IHZvaWQgMCxcblx0bmFuOiBOYU4sXG5cdGluZmluaXR5OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG5cdFwiLWluZmluaXR5XCI6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxufTtcbmNvbnN0IElTT19EQVRFX1JFR0VYID0gL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSg/OlxcLihcXGR7MSw3fSkpPyg/Olp8KFsrLV0pKFxcZHsyfSk6KFxcZHsyfSkpJC87XG5mdW5jdGlvbiBpc1ZhbGlkRGF0ZShkYXRlKSB7XG5cdHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EYXRlKHZhbHVlKSB7XG5cdGNvbnN0IG1hdGNoID0gSVNPX0RBVEVfUkVHRVguZXhlYyh2YWx1ZSk7XG5cdGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXHRjb25zdCBbLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbXMsIG9mZnNldFNpZ24sIG9mZnNldEhvdXIsIG9mZnNldE1pbnV0ZV0gPSBtYXRjaDtcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHBhcnNlSW50KHllYXIsIDEwKSwgcGFyc2VJbnQobW9udGgsIDEwKSAtIDEsIHBhcnNlSW50KGRheSwgMTApLCBwYXJzZUludChob3VyLCAxMCksIHBhcnNlSW50KG1pbnV0ZSwgMTApLCBwYXJzZUludChzZWNvbmQsIDEwKSwgbXMgPyBwYXJzZUludChtcy5wYWRFbmQoMywgXCIwXCIpLCAxMCkgOiAwKSk7XG5cdGlmIChvZmZzZXRTaWduKSB7XG5cdFx0Y29uc3Qgb2Zmc2V0ID0gKHBhcnNlSW50KG9mZnNldEhvdXIsIDEwKSAqIDYwICsgcGFyc2VJbnQob2Zmc2V0TWludXRlLCAxMCkpICogKG9mZnNldFNpZ24gPT09IFwiK1wiID8gLTEgOiAxKTtcblx0XHRkYXRlLnNldFVUQ01pbnV0ZXMoZGF0ZS5nZXRVVENNaW51dGVzKCkgKyBvZmZzZXQpO1xuXHR9XG5cdHJldHVybiBpc1ZhbGlkRGF0ZShkYXRlKSA/IGRhdGUgOiBudWxsO1xufVxuZnVuY3Rpb24gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3QgeyBzdHJpY3QgPSBmYWxzZSwgd2FybmluZ3MgPSBmYWxzZSwgcmV2aXZlciwgcGFyc2VEYXRlcyA9IHRydWUgfSA9IG9wdGlvbnM7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZTtcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcblx0aWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkWzBdID09PSBcIlxcXCJcIiAmJiB0cmltbWVkLmVuZHNXaXRoKFwiXFxcIlwiKSAmJiAhdHJpbW1lZC5zbGljZSgxLCAtMSkuaW5jbHVkZXMoXCJcXFwiXCIpKSByZXR1cm4gdHJpbW1lZC5zbGljZSgxLCAtMSk7XG5cdGNvbnN0IGxvd2VyVmFsdWUgPSB0cmltbWVkLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChsb3dlclZhbHVlLmxlbmd0aCA8PSA5ICYmIGxvd2VyVmFsdWUgaW4gU1BFQ0lBTF9WQUxVRVMpIHJldHVybiBTUEVDSUFMX1ZBTFVFU1tsb3dlclZhbHVlXTtcblx0aWYgKCFKU09OX1NJR05BVFVSRS50ZXN0KHRyaW1tZWQpKSB7XG5cdFx0aWYgKHN0cmljdCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW2JldHRlci1qc29uXSBJbnZhbGlkIEpTT05cIik7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmIChPYmplY3QuZW50cmllcyhQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMpLnNvbWUoKFtrZXksIHBhdHRlcm5dKSA9PiB7XG5cdFx0Y29uc3QgbWF0Y2hlcyA9IHBhdHRlcm4udGVzdCh0cmltbWVkKTtcblx0XHRpZiAobWF0Y2hlcyAmJiB3YXJuaW5ncykgY29uc29sZS53YXJuKGBbYmV0dGVyLWpzb25dIERldGVjdGVkIHBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgdXNpbmcgJHtrZXl9IHBhdHRlcm5gKTtcblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSkgJiYgc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJbYmV0dGVyLWpzb25dIFBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgZGV0ZWN0ZWRcIik7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2VjdXJlUmV2aXZlciA9IChrZXksIHZhbHVlJDEpID0+IHtcblx0XHRcdGlmIChrZXkgPT09IFwiX19wcm90b19fXCIgfHwga2V5ID09PSBcImNvbnN0cnVjdG9yXCIgJiYgdmFsdWUkMSAmJiB0eXBlb2YgdmFsdWUkMSA9PT0gXCJvYmplY3RcIiAmJiBcInByb3RvdHlwZVwiIGluIHZhbHVlJDEpIHtcblx0XHRcdFx0aWYgKHdhcm5pbmdzKSBjb25zb2xlLndhcm4oYFtiZXR0ZXItanNvbl0gRHJvcHBpbmcgXCIke2tleX1cIiBrZXkgdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uYCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChwYXJzZURhdGVzICYmIHR5cGVvZiB2YWx1ZSQxID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBwYXJzZUlTT0RhdGUodmFsdWUkMSk7XG5cdFx0XHRcdGlmIChkYXRlKSByZXR1cm4gZGF0ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXZpdmVyID8gcmV2aXZlcihrZXksIHZhbHVlJDEpIDogdmFsdWUkMTtcblx0XHR9O1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHRyaW1tZWQsIHNlY3VyZVJldml2ZXIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChzdHJpY3QpIHRocm93IGVycm9yO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufVxuZnVuY3Rpb24gcGFyc2VKU09OKHZhbHVlLCBvcHRpb25zID0geyBzdHJpY3Q6IHRydWUgfSkge1xuXHRyZXR1cm4gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUpTT04gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/parser.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/plugins/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/plugins/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferServerPlugin: () => (/* reexport safe */ _infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_20__.InferServerPlugin),\n/* harmony export */   adminClient: () => (/* reexport safe */ _plugins_admin_client_mjs__WEBPACK_IMPORTED_MODULE_1__.adminClient),\n/* harmony export */   anonymousClient: () => (/* reexport safe */ _plugins_anonymous_client_mjs__WEBPACK_IMPORTED_MODULE_2__.anonymousClient),\n/* harmony export */   apiKeyClient: () => (/* reexport safe */ _plugins_api_key_client_mjs__WEBPACK_IMPORTED_MODULE_3__.apiKeyClient),\n/* harmony export */   clientSideHasPermission: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.clientSideHasPermission),\n/* harmony export */   customSessionClient: () => (/* reexport safe */ _plugins_custom_session_client_mjs__WEBPACK_IMPORTED_MODULE_4__.customSessionClient),\n/* harmony export */   deviceAuthorizationClient: () => (/* reexport safe */ _plugins_device_authorization_client_mjs__WEBPACK_IMPORTED_MODULE_5__.deviceAuthorizationClient),\n/* harmony export */   emailOTPClient: () => (/* reexport safe */ _plugins_email_otp_client_mjs__WEBPACK_IMPORTED_MODULE_6__.emailOTPClient),\n/* harmony export */   genericOAuthClient: () => (/* reexport safe */ _plugins_generic_oauth_client_mjs__WEBPACK_IMPORTED_MODULE_7__.genericOAuthClient),\n/* harmony export */   inferAdditionalFields: () => (/* reexport safe */ _plugins_additional_fields_client_mjs__WEBPACK_IMPORTED_MODULE_0__.inferAdditionalFields),\n/* harmony export */   inferOrgAdditionalFields: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.inferOrgAdditionalFields),\n/* harmony export */   jwtClient: () => (/* reexport safe */ _plugins_jwt_client_mjs__WEBPACK_IMPORTED_MODULE_8__.jwtClient),\n/* harmony export */   lastLoginMethodClient: () => (/* reexport safe */ _plugins_last_login_method_client_mjs__WEBPACK_IMPORTED_MODULE_9__.lastLoginMethodClient),\n/* harmony export */   magicLinkClient: () => (/* reexport safe */ _plugins_magic_link_client_mjs__WEBPACK_IMPORTED_MODULE_10__.magicLinkClient),\n/* harmony export */   multiSessionClient: () => (/* reexport safe */ _plugins_multi_session_client_mjs__WEBPACK_IMPORTED_MODULE_11__.multiSessionClient),\n/* harmony export */   oidcClient: () => (/* reexport safe */ _plugins_oidc_provider_client_mjs__WEBPACK_IMPORTED_MODULE_12__.oidcClient),\n/* harmony export */   oneTapClient: () => (/* reexport safe */ _plugins_one_tap_client_mjs__WEBPACK_IMPORTED_MODULE_13__.oneTapClient),\n/* harmony export */   oneTimeTokenClient: () => (/* reexport safe */ _plugins_one_time_token_client_mjs__WEBPACK_IMPORTED_MODULE_14__.oneTimeTokenClient),\n/* harmony export */   organizationClient: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.organizationClient),\n/* harmony export */   phoneNumberClient: () => (/* reexport safe */ _plugins_phone_number_client_mjs__WEBPACK_IMPORTED_MODULE_16__.phoneNumberClient),\n/* harmony export */   siweClient: () => (/* reexport safe */ _plugins_siwe_client_mjs__WEBPACK_IMPORTED_MODULE_17__.siweClient),\n/* harmony export */   twoFactorClient: () => (/* reexport safe */ _plugins_two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_18__.twoFactorClient),\n/* harmony export */   usernameClient: () => (/* reexport safe */ _plugins_username_client_mjs__WEBPACK_IMPORTED_MODULE_19__.usernameClient)\n/* harmony export */ });\n/* harmony import */ var _plugins_additional_fields_client_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../plugins/additional-fields/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs\");\n/* harmony import */ var _plugins_admin_client_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../plugins/admin/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/client.mjs\");\n/* harmony import */ var _plugins_anonymous_client_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../plugins/anonymous/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs\");\n/* harmony import */ var _plugins_api_key_client_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../plugins/api-key/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/client.mjs\");\n/* harmony import */ var _plugins_custom_session_client_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../plugins/custom-session/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs\");\n/* harmony import */ var _plugins_device_authorization_client_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../plugins/device-authorization/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs\");\n/* harmony import */ var _plugins_email_otp_client_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../plugins/email-otp/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs\");\n/* harmony import */ var _plugins_generic_oauth_client_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../plugins/generic-oauth/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs\");\n/* harmony import */ var _plugins_jwt_client_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../plugins/jwt/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/client.mjs\");\n/* harmony import */ var _plugins_last_login_method_client_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../plugins/last-login-method/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs\");\n/* harmony import */ var _plugins_magic_link_client_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../plugins/magic-link/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs\");\n/* harmony import */ var _plugins_multi_session_client_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../plugins/multi-session/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs\");\n/* harmony import */ var _plugins_oidc_provider_client_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../plugins/oidc-provider/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs\");\n/* harmony import */ var _plugins_one_tap_client_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../plugins/one-tap/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs\");\n/* harmony import */ var _plugins_one_time_token_client_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../plugins/one-time-token/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs\");\n/* harmony import */ var _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../plugins/organization/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/client.mjs\");\n/* harmony import */ var _plugins_phone_number_client_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../plugins/phone-number/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs\");\n/* harmony import */ var _plugins_siwe_client_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../plugins/siwe/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/siwe/client.mjs\");\n/* harmony import */ var _plugins_two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../plugins/two-factor/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\");\n/* harmony import */ var _plugins_username_client_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../plugins/username/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/username/client.mjs\");\n/* harmony import */ var _infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./infer-plugin.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGx1Z2lucy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDdEI7QUFDUTtBQUNMO0FBQ2M7QUFDWTtBQUN0QjtBQUNRO0FBQ25CO0FBQzBCO0FBQ2I7QUFDTTtBQUNSO0FBQ0o7QUFDYTtBQUNpRDtBQUNwRDtBQUNmO0FBQ1c7QUFDSDtBQUNaIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxwbHVnaW5zXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5mZXJBZGRpdGlvbmFsRmllbGRzIH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvYWRkaXRpb25hbC1maWVsZHMvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgYWRtaW5DbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9hZG1pbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBhbm9ueW1vdXNDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9hbm9ueW1vdXMvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgYXBpS2V5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvYXBpLWtleS9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBjdXN0b21TZXNzaW9uQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvY3VzdG9tLXNlc3Npb24vY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgZGV2aWNlQXV0aG9yaXphdGlvbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGVtYWlsT1RQQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvZW1haWwtb3RwL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGdlbmVyaWNPQXV0aENsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgand0Q2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvand0L2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGxhc3RMb2dpbk1ldGhvZENsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2xhc3QtbG9naW4tbWV0aG9kL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IG1hZ2ljTGlua0NsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL21hZ2ljLWxpbmsvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgbXVsdGlTZXNzaW9uQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvbXVsdGktc2Vzc2lvbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBvaWRjQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvb2lkYy1wcm92aWRlci9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBvbmVUYXBDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9vbmUtdGFwL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IG9uZVRpbWVUb2tlbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBpbmZlck9yZ0FkZGl0aW9uYWxGaWVsZHMsIG9yZ2FuaXphdGlvbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBwaG9uZU51bWJlckNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL3Bob25lLW51bWJlci9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBzaXdlQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvc2l3ZS9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyB0d29GYWN0b3JDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy90d28tZmFjdG9yL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IHVzZXJuYW1lQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvdXNlcm5hbWUvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgSW5mZXJTZXJ2ZXJQbHVnaW4gfSBmcm9tIFwiLi9pbmZlci1wbHVnaW4ubWpzXCI7XG5cbmV4cG9ydCB7IEluZmVyU2VydmVyUGx1Z2luLCBhZG1pbkNsaWVudCwgYW5vbnltb3VzQ2xpZW50LCBhcGlLZXlDbGllbnQsIGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBjdXN0b21TZXNzaW9uQ2xpZW50LCBkZXZpY2VBdXRob3JpemF0aW9uQ2xpZW50LCBlbWFpbE9UUENsaWVudCwgZ2VuZXJpY09BdXRoQ2xpZW50LCBpbmZlckFkZGl0aW9uYWxGaWVsZHMsIGluZmVyT3JnQWRkaXRpb25hbEZpZWxkcywgand0Q2xpZW50LCBsYXN0TG9naW5NZXRob2RDbGllbnQsIG1hZ2ljTGlua0NsaWVudCwgbXVsdGlTZXNzaW9uQ2xpZW50LCBvaWRjQ2xpZW50LCBvbmVUYXBDbGllbnQsIG9uZVRpbWVUb2tlbkNsaWVudCwgb3JnYW5pemF0aW9uQ2xpZW50LCBwaG9uZU51bWJlckNsaWVudCwgc2l3ZUNsaWVudCwgdHdvRmFjdG9yQ2xpZW50LCB1c2VybmFtZUNsaWVudCB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/plugins/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferServerPlugin: () => (/* binding */ InferServerPlugin)\n/* harmony export */ });\n//#region src/client/plugins/infer-plugin.ts\nconst InferServerPlugin = () => {\n\treturn {\n\t\tid: \"infer-server-plugin\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=infer-plugin.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGx1Z2lucy9pbmZlci1wbHVnaW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxccGx1Z2luc1xcaW5mZXItcGx1Z2luLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9wbHVnaW5zL2luZmVyLXBsdWdpbi50c1xuY29uc3QgSW5mZXJTZXJ2ZXJQbHVnaW4gPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiaW5mZXItc2VydmVyLXBsdWdpblwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5mZXJTZXJ2ZXJQbHVnaW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZmVyLXBsdWdpbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/proxy.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/proxy.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDynamicPathProxy: () => (/* binding */ createDynamicPathProxy)\n/* harmony export */ });\n/* harmony import */ var _utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-atom.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-atom.mjs\");\n\n\n//#region src/client/proxy.ts\nfunction getMethod(path, knownPathMethods, args) {\n\tconst method = knownPathMethods[path];\n\tconst { fetchOptions, query: _query, ...body } = args || {};\n\tif (method) return method;\n\tif (fetchOptions?.method) return fetchOptions.method;\n\tif (body && Object.keys(body).length > 0) return \"POST\";\n\treturn \"GET\";\n}\nfunction createDynamicPathProxy(routes, client, knownPathMethods, atoms, atomListeners) {\n\tfunction createProxy(path = []) {\n\t\treturn new Proxy(function() {}, {\n\t\t\tget(_, prop) {\n\t\t\t\tif (typeof prop !== \"string\") return;\n\t\t\t\tif (prop === \"then\" || prop === \"catch\" || prop === \"finally\") return;\n\t\t\t\tconst fullPath = [...path, prop];\n\t\t\t\tlet current = routes;\n\t\t\t\tfor (const segment of fullPath) if (current && typeof current === \"object\" && segment in current) current = current[segment];\n\t\t\t\telse {\n\t\t\t\t\tcurrent = void 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (typeof current === \"function\") return current;\n\t\t\t\tif ((0,_utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__.isAtom)(current)) return current;\n\t\t\t\treturn createProxy(fullPath);\n\t\t\t},\n\t\t\tapply: async (_, __, args) => {\n\t\t\t\tconst routePath = \"/\" + path.map((segment) => segment.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`)).join(\"/\");\n\t\t\t\tconst arg = args[0] || {};\n\t\t\t\tconst fetchOptions = args[1] || {};\n\t\t\t\tconst { query, fetchOptions: argFetchOptions, ...body } = arg;\n\t\t\t\tconst options = {\n\t\t\t\t\t...fetchOptions,\n\t\t\t\t\t...argFetchOptions\n\t\t\t\t};\n\t\t\t\tconst method = getMethod(routePath, knownPathMethods, arg);\n\t\t\t\treturn await client(routePath, {\n\t\t\t\t\t...options,\n\t\t\t\t\tbody: method === \"GET\" ? void 0 : {\n\t\t\t\t\t\t...body,\n\t\t\t\t\t\t...options?.body || {}\n\t\t\t\t\t},\n\t\t\t\t\tquery: query || options?.query,\n\t\t\t\t\tmethod,\n\t\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\t\tawait options?.onSuccess?.(context);\n\t\t\t\t\t\tif (!atomListeners || options.disableSignal) return;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* We trigger listeners\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst matches = atomListeners.filter((s) => s.matcher(routePath));\n\t\t\t\t\t\tif (!matches.length) return;\n\t\t\t\t\t\tconst visited = /* @__PURE__ */ new Set();\n\t\t\t\t\t\tfor (const match of matches) {\n\t\t\t\t\t\t\tconst signal = atoms[match.signal];\n\t\t\t\t\t\t\tif (!signal) return;\n\t\t\t\t\t\t\tif (visited.has(match.signal)) continue;\n\t\t\t\t\t\t\tvisited.add(match.signal);\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* To avoid race conditions we set the signal in a setTimeout\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tconst val = signal.get();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsignal.set(!val);\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn createProxy();\n}\n\n//#endregion\n\n//# sourceMappingURL=proxy.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcHJveHkubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDOztBQUU5QztBQUNBO0FBQ0E7QUFDQSxTQUFTLHVDQUF1QztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwREFBTTtBQUNkO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBO0FBQ0EsWUFBWSxnREFBZ0Q7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDa0M7QUFDbEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0F0b20gfSBmcm9tIFwiLi4vdXRpbHMvaXMtYXRvbS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvcHJveHkudHNcbmZ1bmN0aW9uIGdldE1ldGhvZChwYXRoLCBrbm93blBhdGhNZXRob2RzLCBhcmdzKSB7XG5cdGNvbnN0IG1ldGhvZCA9IGtub3duUGF0aE1ldGhvZHNbcGF0aF07XG5cdGNvbnN0IHsgZmV0Y2hPcHRpb25zLCBxdWVyeTogX3F1ZXJ5LCAuLi5ib2R5IH0gPSBhcmdzIHx8IHt9O1xuXHRpZiAobWV0aG9kKSByZXR1cm4gbWV0aG9kO1xuXHRpZiAoZmV0Y2hPcHRpb25zPy5tZXRob2QpIHJldHVybiBmZXRjaE9wdGlvbnMubWV0aG9kO1xuXHRpZiAoYm9keSAmJiBPYmplY3Qua2V5cyhib2R5KS5sZW5ndGggPiAwKSByZXR1cm4gXCJQT1NUXCI7XG5cdHJldHVybiBcIkdFVFwiO1xufVxuZnVuY3Rpb24gY3JlYXRlRHluYW1pY1BhdGhQcm94eShyb3V0ZXMsIGNsaWVudCwga25vd25QYXRoTWV0aG9kcywgYXRvbXMsIGF0b21MaXN0ZW5lcnMpIHtcblx0ZnVuY3Rpb24gY3JlYXRlUHJveHkocGF0aCA9IFtdKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm94eShmdW5jdGlvbigpIHt9LCB7XG5cdFx0XHRnZXQoXywgcHJvcCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHByb3AgIT09IFwic3RyaW5nXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHByb3AgPT09IFwidGhlblwiIHx8IHByb3AgPT09IFwiY2F0Y2hcIiB8fCBwcm9wID09PSBcImZpbmFsbHlcIikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCBwcm9wXTtcblx0XHRcdFx0bGV0IGN1cnJlbnQgPSByb3V0ZXM7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiBmdWxsUGF0aCkgaWYgKGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgJiYgc2VnbWVudCBpbiBjdXJyZW50KSBjdXJyZW50ID0gY3VycmVudFtzZWdtZW50XTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y3VycmVudCA9IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGN1cnJlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGN1cnJlbnQ7XG5cdFx0XHRcdGlmIChpc0F0b20oY3VycmVudCkpIHJldHVybiBjdXJyZW50O1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlUHJveHkoZnVsbFBhdGgpO1xuXHRcdFx0fSxcblx0XHRcdGFwcGx5OiBhc3luYyAoXywgX18sIGFyZ3MpID0+IHtcblx0XHRcdFx0Y29uc3Qgcm91dGVQYXRoID0gXCIvXCIgKyBwYXRoLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC5yZXBsYWNlKC9bQS1aXS9nLCAobGV0dGVyKSA9PiBgLSR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YCkpLmpvaW4oXCIvXCIpO1xuXHRcdFx0XHRjb25zdCBhcmcgPSBhcmdzWzBdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCBmZXRjaE9wdGlvbnMgPSBhcmdzWzFdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCB7IHF1ZXJ5LCBmZXRjaE9wdGlvbnM6IGFyZ0ZldGNoT3B0aW9ucywgLi4uYm9keSB9ID0gYXJnO1xuXHRcdFx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0XHRcdC4uLmZldGNoT3B0aW9ucyxcblx0XHRcdFx0XHQuLi5hcmdGZXRjaE9wdGlvbnNcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgbWV0aG9kID0gZ2V0TWV0aG9kKHJvdXRlUGF0aCwga25vd25QYXRoTWV0aG9kcywgYXJnKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGNsaWVudChyb3V0ZVBhdGgsIHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGJvZHk6IG1ldGhvZCA9PT0gXCJHRVRcIiA/IHZvaWQgMCA6IHtcblx0XHRcdFx0XHRcdC4uLmJvZHksXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zPy5ib2R5IHx8IHt9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRxdWVyeTogcXVlcnkgfHwgb3B0aW9ucz8ucXVlcnksXG5cdFx0XHRcdFx0bWV0aG9kLFxuXHRcdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBvcHRpb25zPy5vblN1Y2Nlc3M/Lihjb250ZXh0KTtcblx0XHRcdFx0XHRcdGlmICghYXRvbUxpc3RlbmVycyB8fCBvcHRpb25zLmRpc2FibGVTaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBXZSB0cmlnZ2VyIGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSBhdG9tTGlzdGVuZXJzLmZpbHRlcigocykgPT4gcy5tYXRjaGVyKHJvdXRlUGF0aCkpO1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaGVzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgdmlzaXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2lnbmFsID0gYXRvbXNbbWF0Y2guc2lnbmFsXTtcblx0XHRcdFx0XHRcdFx0aWYgKCFzaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0aWYgKHZpc2l0ZWQuaGFzKG1hdGNoLnNpZ25hbCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR2aXNpdGVkLmFkZChtYXRjaC5zaWduYWwpO1xuXHRcdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdFx0KiBUbyBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2Ugc2V0IHRoZSBzaWduYWwgaW4gYSBzZXRUaW1lb3V0XG5cdFx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZhbCA9IHNpZ25hbC5nZXQoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsLnNldCghdmFsKTtcblx0XHRcdFx0XHRcdFx0fSwgMTApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGNyZWF0ZVByb3h5KCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRHluYW1pY1BhdGhQcm94eSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJveHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/proxy.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/query.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/query.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthQuery: () => (/* binding */ useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanostores */ \"(rsc)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(rsc)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n//#region src/client/query.ts\nconst isServer = () => typeof window === \"undefined\";\nconst useAuthQuery = (initializedAtom, path, $fetch, options) => {\n\tconst value = (0,nanostores__WEBPACK_IMPORTED_MODULE_0__.atom)({\n\t\tdata: null,\n\t\terror: null,\n\t\tisPending: true,\n\t\tisRefetching: false,\n\t\trefetch: (queryParams) => fn(queryParams)\n\t});\n\tconst fn = async (queryParams) => {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst opts = typeof options === \"function\" ? options({\n\t\t\t\tdata: value.get().data,\n\t\t\t\terror: value.get().error,\n\t\t\t\tisPending: value.get().isPending\n\t\t\t}) : options;\n\t\t\t$fetch(path, {\n\t\t\t\t...opts,\n\t\t\t\tquery: {\n\t\t\t\t\t...opts?.query,\n\t\t\t\t\t...queryParams?.query\n\t\t\t\t},\n\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tdata: context.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onSuccess?.(context);\n\t\t\t\t},\n\t\t\t\tasync onError(context) {\n\t\t\t\t\tconst { request } = context;\n\t\t\t\t\tconst retryAttempts = typeof request.retry === \"number\" ? request.retry : request.retry?.attempts;\n\t\t\t\t\tconst retryAttempt = request.retryAttempt || 0;\n\t\t\t\t\tif (retryAttempts && retryAttempt < retryAttempts) return;\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\terror: context.error,\n\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onError?.(context);\n\t\t\t\t},\n\t\t\t\tasync onRequest(context) {\n\t\t\t\t\tconst currentValue = value.get();\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tisPending: currentValue.data === null,\n\t\t\t\t\t\tdata: currentValue.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisRefetching: true,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onRequest?.(context);\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tvalue.set({\n\t\t\t\t\terror,\n\t\t\t\t\tdata: null,\n\t\t\t\t\tisPending: false,\n\t\t\t\t\tisRefetching: false,\n\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t});\n\t\t\t}).finally(() => {\n\t\t\t\tresolve(void 0);\n\t\t\t});\n\t\t});\n\t};\n\tinitializedAtom = Array.isArray(initializedAtom) ? initializedAtom : [initializedAtom];\n\tlet isMounted = false;\n\tfor (const initAtom of initializedAtom) initAtom.subscribe(async () => {\n\t\tif (isServer()) return;\n\t\tif (isMounted) await fn();\n\t\telse (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.onMount)(value, () => {\n\t\t\tconst timeoutId = setTimeout(async () => {\n\t\t\t\tif (!isMounted) {\n\t\t\t\t\tawait fn();\n\t\t\t\t\tisMounted = true;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t\treturn () => {\n\t\t\t\tvalue.off();\n\t\t\t\tinitAtom.off();\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t};\n\t\t});\n\t});\n\treturn value;\n};\n\n//#endregion\n\n//# sourceMappingURL=query.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcXVlcnkubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxccXVlcnkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9xdWVyeS50c1xuY29uc3QgaXNTZXJ2ZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xuY29uc3QgdXNlQXV0aFF1ZXJ5ID0gKGluaXRpYWxpemVkQXRvbSwgcGF0aCwgJGZldGNoLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHZhbHVlID0gYXRvbSh7XG5cdFx0ZGF0YTogbnVsbCxcblx0XHRlcnJvcjogbnVsbCxcblx0XHRpc1BlbmRpbmc6IHRydWUsXG5cdFx0aXNSZWZldGNoaW5nOiBmYWxzZSxcblx0XHRyZWZldGNoOiAocXVlcnlQYXJhbXMpID0+IGZuKHF1ZXJ5UGFyYW1zKVxuXHR9KTtcblx0Y29uc3QgZm4gPSBhc3luYyAocXVlcnlQYXJhbXMpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IG9wdHMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucyh7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLmdldCgpLmRhdGEsXG5cdFx0XHRcdGVycm9yOiB2YWx1ZS5nZXQoKS5lcnJvcixcblx0XHRcdFx0aXNQZW5kaW5nOiB2YWx1ZS5nZXQoKS5pc1BlbmRpbmdcblx0XHRcdH0pIDogb3B0aW9ucztcblx0XHRcdCRmZXRjaChwYXRoLCB7XG5cdFx0XHRcdC4uLm9wdHMsXG5cdFx0XHRcdHF1ZXJ5OiB7XG5cdFx0XHRcdFx0Li4ub3B0cz8ucXVlcnksXG5cdFx0XHRcdFx0Li4ucXVlcnlQYXJhbXM/LnF1ZXJ5XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGRhdGE6IGNvbnRleHQuZGF0YSxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRcdGlzUmVmZXRjaGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25TdWNjZXNzPy4oY29udGV4dCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRcdGNvbnN0IHsgcmVxdWVzdCB9ID0gY29udGV4dDtcblx0XHRcdFx0XHRjb25zdCByZXRyeUF0dGVtcHRzID0gdHlwZW9mIHJlcXVlc3QucmV0cnkgPT09IFwibnVtYmVyXCIgPyByZXF1ZXN0LnJldHJ5IDogcmVxdWVzdC5yZXRyeT8uYXR0ZW1wdHM7XG5cdFx0XHRcdFx0Y29uc3QgcmV0cnlBdHRlbXB0ID0gcmVxdWVzdC5yZXRyeUF0dGVtcHQgfHwgMDtcblx0XHRcdFx0XHRpZiAocmV0cnlBdHRlbXB0cyAmJiByZXRyeUF0dGVtcHQgPCByZXRyeUF0dGVtcHRzKSByZXR1cm47XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGVycm9yOiBjb250ZXh0LmVycm9yLFxuXHRcdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRcdGlzUGVuZGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdFx0cmVmZXRjaDogdmFsdWUudmFsdWUucmVmZXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IG9wdHM/Lm9uRXJyb3I/Lihjb250ZXh0KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgb25SZXF1ZXN0KGNvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZS5nZXQoKTtcblx0XHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBjdXJyZW50VmFsdWUuZGF0YSA9PT0gbnVsbCxcblx0XHRcdFx0XHRcdGRhdGE6IGN1cnJlbnRWYWx1ZS5kYXRhLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IG51bGwsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IHRydWUsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25SZXF1ZXN0Py4oY29udGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdGVycm9yLFxuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdHJlZmV0Y2g6IHZhbHVlLnZhbHVlLnJlZmV0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHR9KS5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh2b2lkIDApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cdGluaXRpYWxpemVkQXRvbSA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbGl6ZWRBdG9tKSA/IGluaXRpYWxpemVkQXRvbSA6IFtpbml0aWFsaXplZEF0b21dO1xuXHRsZXQgaXNNb3VudGVkID0gZmFsc2U7XG5cdGZvciAoY29uc3QgaW5pdEF0b20gb2YgaW5pdGlhbGl6ZWRBdG9tKSBpbml0QXRvbS5zdWJzY3JpYmUoYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChpc1NlcnZlcigpKSByZXR1cm47XG5cdFx0aWYgKGlzTW91bnRlZCkgYXdhaXQgZm4oKTtcblx0XHRlbHNlIG9uTW91bnQodmFsdWUsICgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoIWlzTW91bnRlZCkge1xuXHRcdFx0XHRcdGF3YWl0IGZuKCk7XG5cdFx0XHRcdFx0aXNNb3VudGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMCk7XG5cdFx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0XHR2YWx1ZS5vZmYoKTtcblx0XHRcdFx0aW5pdEF0b20ub2ZmKCk7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdXNlQXV0aFF1ZXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/query.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/session-atom.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-atom.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionAtom: () => (/* binding */ getSessionAtom)\n/* harmony export */ });\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanostores */ \"(rsc)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanostores */ \"(rsc)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n\n\n//#region src/client/session-atom.ts\nfunction getSessionAtom($fetch, options) {\n\tconst $signal = (0,nanostores__WEBPACK_IMPORTED_MODULE_2__.atom)(false);\n\tconst session = (0,_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($signal, \"/get-session\", $fetch, { method: \"GET\" });\n\t(0,nanostores__WEBPACK_IMPORTED_MODULE_3__.onMount)(session, () => {\n\t\tconst refreshManager = (0,_session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__.createSessionRefreshManager)({\n\t\t\tsessionAtom: session,\n\t\t\tsessionSignal: $signal,\n\t\t\t$fetch,\n\t\t\toptions\n\t\t});\n\t\trefreshManager.init();\n\t\treturn () => {\n\t\t\trefreshManager.cleanup();\n\t\t};\n\t});\n\treturn {\n\t\tsession,\n\t\t$sessionSignal: $signal\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyQztBQUN5QjtBQUN6Qjs7QUFFM0M7QUFDQTtBQUNBLGlCQUFpQixnREFBSTtBQUNyQixpQkFBaUIsd0RBQVksb0NBQW9DLGVBQWU7QUFDaEYsQ0FBQyxtREFBTztBQUNSLHlCQUF5QixpRkFBMkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcc2Vzc2lvbi1hdG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi9xdWVyeS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciB9IGZyb20gXCIuL3Nlc3Npb24tcmVmcmVzaC5tanNcIjtcbmltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9zZXNzaW9uLWF0b20udHNcbmZ1bmN0aW9uIGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucykge1xuXHRjb25zdCAkc2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHNlc3Npb24gPSB1c2VBdXRoUXVlcnkoJHNpZ25hbCwgXCIvZ2V0LXNlc3Npb25cIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KTtcblx0b25Nb3VudChzZXNzaW9uLCAoKSA9PiB7XG5cdFx0Y29uc3QgcmVmcmVzaE1hbmFnZXIgPSBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIoe1xuXHRcdFx0c2Vzc2lvbkF0b206IHNlc3Npb24sXG5cdFx0XHRzZXNzaW9uU2lnbmFsOiAkc2lnbmFsLFxuXHRcdFx0JGZldGNoLFxuXHRcdFx0b3B0aW9uc1xuXHRcdH0pO1xuXHRcdHJlZnJlc2hNYW5hZ2VyLmluaXQoKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0cmVmcmVzaE1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH07XG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdHNlc3Npb24sXG5cdFx0JHNlc3Npb25TaWduYWw6ICRzaWduYWxcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRTZXNzaW9uQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi1hdG9tLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/session-atom.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/session-refresh.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-refresh.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSessionRefreshManager: () => (/* binding */ createSessionRefreshManager)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/online-manager.mjs\");\n\n\n\n\n//#region src/client/session-refresh.ts\nconst now = () => Math.floor(Date.now() / 1e3);\n/**\n* Rate limit: don't refetch on focus if a session request was made within this many seconds\n*/\nconst FOCUS_REFETCH_RATE_LIMIT_SECONDS = 5;\nfunction createSessionRefreshManager(opts) {\n\tconst { sessionAtom, sessionSignal, $fetch, options = {} } = opts;\n\tconst refetchInterval = options.sessionOptions?.refetchInterval ?? 0;\n\tconst refetchOnWindowFocus = options.sessionOptions?.refetchOnWindowFocus ?? true;\n\tconst refetchWhenOffline = options.sessionOptions?.refetchWhenOffline ?? false;\n\tconst state = {\n\t\tlastSync: 0,\n\t\tlastSessionRequest: 0,\n\t\tcachedSession: void 0\n\t};\n\tconst shouldRefetch = () => {\n\t\treturn refetchWhenOffline || (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().isOnline;\n\t};\n\tconst triggerRefetch = (event) => {\n\t\tif (!shouldRefetch()) return;\n\t\tif (event?.event === \"storage\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\treturn;\n\t\t}\n\t\tconst currentSession = sessionAtom.get();\n\t\tif (event?.event === \"poll\") {\n\t\t\tstate.lastSessionRequest = now();\n\t\t\t$fetch(\"/get-session\").then((res) => {\n\t\t\t\tif (res.error) sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: res.error\n\t\t\t\t});\n\t\t\t\telse sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t\tstate.lastSync = now();\n\t\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\t}).catch(() => {});\n\t\t\treturn;\n\t\t}\n\t\tif (event?.event === \"visibilitychange\") {\n\t\t\tif (now() - state.lastSessionRequest < FOCUS_REFETCH_RATE_LIMIT_SECONDS) return;\n\t\t\tstate.lastSessionRequest = now();\n\t\t}\n\t\tif (currentSession?.data === null || currentSession?.data === void 0 || event?.event === \"visibilitychange\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t}\n\t};\n\tconst broadcastSessionUpdate = (trigger) => {\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().post({\n\t\t\tevent: \"session\",\n\t\t\tdata: { trigger },\n\t\t\tclientId: Math.random().toString(36).substring(7)\n\t\t});\n\t};\n\tconst setupPolling = () => {\n\t\tif (refetchInterval && refetchInterval > 0) state.pollInterval = setInterval(() => {\n\t\t\tif (sessionAtom.get()?.data) triggerRefetch({ event: \"poll\" });\n\t\t}, refetchInterval * 1e3);\n\t};\n\tconst setupBroadcast = () => {\n\t\tstate.unsubscribeBroadcast = (0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"storage\" });\n\t\t});\n\t};\n\tconst setupFocusRefetch = () => {\n\t\tif (!refetchOnWindowFocus) return;\n\t\tstate.unsubscribeFocus = (0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst setupOnlineRefetch = () => {\n\t\tstate.unsubscribeOnline = (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().subscribe((online) => {\n\t\t\tif (online) triggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst init = () => {\n\t\tsetupPolling();\n\t\tsetupBroadcast();\n\t\tsetupFocusRefetch();\n\t\tsetupOnlineRefetch();\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().setup();\n\t\t(0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().setup();\n\t\t(0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().setup();\n\t};\n\tconst cleanup = () => {\n\t\tif (state.pollInterval) {\n\t\t\tclearInterval(state.pollInterval);\n\t\t\tstate.pollInterval = void 0;\n\t\t}\n\t\tif (state.unsubscribeBroadcast) {\n\t\t\tstate.unsubscribeBroadcast();\n\t\t\tstate.unsubscribeBroadcast = void 0;\n\t\t}\n\t\tif (state.unsubscribeFocus) {\n\t\t\tstate.unsubscribeFocus();\n\t\t\tstate.unsubscribeFocus = void 0;\n\t\t}\n\t\tif (state.unsubscribeOnline) {\n\t\t\tstate.unsubscribeOnline();\n\t\t\tstate.unsubscribeOnline = void 0;\n\t\t}\n\t\tstate.lastSync = 0;\n\t\tstate.lastSessionRequest = 0;\n\t\tstate.cachedSession = void 0;\n\t};\n\treturn {\n\t\tinit,\n\t\tcleanup,\n\t\ttriggerRefetch,\n\t\tbroadcastSessionUpdate\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-refresh.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1yZWZyZXNoLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9FO0FBQ1I7QUFDRTs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1EQUFtRDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZUFBZTtBQUNoRSxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtCQUErQixpRkFBeUI7QUFDeEQsb0JBQW9CLGtCQUFrQjtBQUN0QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlFQUFxQjtBQUNoRCxvQkFBb0IsMkJBQTJCO0FBQy9DLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNEJBQTRCLDJFQUFzQjtBQUNsRCxnQ0FBZ0MsMkJBQTJCO0FBQzNELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQixFQUFFLHlFQUFxQjtBQUN2QixFQUFFLDJFQUFzQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VDO0FBQ3ZDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxzZXNzaW9uLXJlZnJlc2gubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbEZvY3VzTWFuYWdlciB9IGZyb20gXCIuL2ZvY3VzLW1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyIH0gZnJvbSBcIi4vb25saW5lLW1hbmFnZXIubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3Nlc3Npb24tcmVmcmVzaC50c1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbi8qKlxuKiBSYXRlIGxpbWl0OiBkb24ndCByZWZldGNoIG9uIGZvY3VzIGlmIGEgc2Vzc2lvbiByZXF1ZXN0IHdhcyBtYWRlIHdpdGhpbiB0aGlzIG1hbnkgc2Vjb25kc1xuKi9cbmNvbnN0IEZPQ1VTX1JFRkVUQ0hfUkFURV9MSU1JVF9TRUNPTkRTID0gNTtcbmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlcihvcHRzKSB7XG5cdGNvbnN0IHsgc2Vzc2lvbkF0b20sIHNlc3Npb25TaWduYWwsICRmZXRjaCwgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuXHRjb25zdCByZWZldGNoSW50ZXJ2YWwgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoSW50ZXJ2YWwgPz8gMDtcblx0Y29uc3QgcmVmZXRjaE9uV2luZG93Rm9jdXMgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoT25XaW5kb3dGb2N1cyA/PyB0cnVlO1xuXHRjb25zdCByZWZldGNoV2hlbk9mZmxpbmUgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoV2hlbk9mZmxpbmUgPz8gZmFsc2U7XG5cdGNvbnN0IHN0YXRlID0ge1xuXHRcdGxhc3RTeW5jOiAwLFxuXHRcdGxhc3RTZXNzaW9uUmVxdWVzdDogMCxcblx0XHRjYWNoZWRTZXNzaW9uOiB2b2lkIDBcblx0fTtcblx0Y29uc3Qgc2hvdWxkUmVmZXRjaCA9ICgpID0+IHtcblx0XHRyZXR1cm4gcmVmZXRjaFdoZW5PZmZsaW5lIHx8IGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKS5pc09ubGluZTtcblx0fTtcblx0Y29uc3QgdHJpZ2dlclJlZmV0Y2ggPSAoZXZlbnQpID0+IHtcblx0XHRpZiAoIXNob3VsZFJlZmV0Y2goKSkgcmV0dXJuO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwic3RvcmFnZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IHNlc3Npb25BdG9tLmdldCgpO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwicG9sbFwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSBub3coKTtcblx0XHRcdCRmZXRjaChcIi9nZXQtc2Vzc2lvblwiKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0aWYgKHJlcy5lcnJvcikgc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yOiByZXMuZXJyb3Jcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGVsc2Ugc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiByZXMuZGF0YSxcblx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RhdGUubGFzdFN5bmMgPSBub3coKTtcblx0XHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0fSkuY2F0Y2goKCkgPT4ge30pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoZXZlbnQ/LmV2ZW50ID09PSBcInZpc2liaWxpdHljaGFuZ2VcIikge1xuXHRcdFx0aWYgKG5vdygpIC0gc3RhdGUubGFzdFNlc3Npb25SZXF1ZXN0IDwgRk9DVVNfUkVGRVRDSF9SQVRFX0xJTUlUX1NFQ09ORFMpIHJldHVybjtcblx0XHRcdHN0YXRlLmxhc3RTZXNzaW9uUmVxdWVzdCA9IG5vdygpO1xuXHRcdH1cblx0XHRpZiAoY3VycmVudFNlc3Npb24/LmRhdGEgPT09IG51bGwgfHwgY3VycmVudFNlc3Npb24/LmRhdGEgPT09IHZvaWQgMCB8fCBldmVudD8uZXZlbnQgPT09IFwidmlzaWJpbGl0eWNoYW5nZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgYnJvYWRjYXN0U2Vzc2lvblVwZGF0ZSA9ICh0cmlnZ2VyKSA9PiB7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnBvc3Qoe1xuXHRcdFx0ZXZlbnQ6IFwic2Vzc2lvblwiLFxuXHRcdFx0ZGF0YTogeyB0cmlnZ2VyIH0sXG5cdFx0XHRjbGllbnRJZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpXG5cdFx0fSk7XG5cdH07XG5cdGNvbnN0IHNldHVwUG9sbGluZyA9ICgpID0+IHtcblx0XHRpZiAocmVmZXRjaEludGVydmFsICYmIHJlZmV0Y2hJbnRlcnZhbCA+IDApIHN0YXRlLnBvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGlmIChzZXNzaW9uQXRvbS5nZXQoKT8uZGF0YSkgdHJpZ2dlclJlZmV0Y2goeyBldmVudDogXCJwb2xsXCIgfSk7XG5cdFx0fSwgcmVmZXRjaEludGVydmFsICogMWUzKTtcblx0fTtcblx0Y29uc3Qgc2V0dXBCcm9hZGNhc3QgPSAoKSA9PiB7XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QgPSBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsKCkuc3Vic2NyaWJlKCgpID0+IHtcblx0XHRcdHRyaWdnZXJSZWZldGNoKHsgZXZlbnQ6IFwic3RvcmFnZVwiIH0pO1xuXHRcdH0pO1xuXHR9O1xuXHRjb25zdCBzZXR1cEZvY3VzUmVmZXRjaCA9ICgpID0+IHtcblx0XHRpZiAoIXJlZmV0Y2hPbldpbmRvd0ZvY3VzKSByZXR1cm47XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IGdldEdsb2JhbEZvY3VzTWFuYWdlcigpLnN1YnNjcmliZSgoKSA9PiB7XG5cdFx0XHR0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3Qgc2V0dXBPbmxpbmVSZWZldGNoID0gKCkgPT4ge1xuXHRcdHN0YXRlLnVuc3Vic2NyaWJlT25saW5lID0gZ2V0R2xvYmFsT25saW5lTWFuYWdlcigpLnN1YnNjcmliZSgob25saW5lKSA9PiB7XG5cdFx0XHRpZiAob25saW5lKSB0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3QgaW5pdCA9ICgpID0+IHtcblx0XHRzZXR1cFBvbGxpbmcoKTtcblx0XHRzZXR1cEJyb2FkY2FzdCgpO1xuXHRcdHNldHVwRm9jdXNSZWZldGNoKCk7XG5cdFx0c2V0dXBPbmxpbmVSZWZldGNoKCk7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnNldHVwKCk7XG5cdFx0Z2V0R2xvYmFsRm9jdXNNYW5hZ2VyKCkuc2V0dXAoKTtcblx0XHRnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyKCkuc2V0dXAoKTtcblx0fTtcblx0Y29uc3QgY2xlYW51cCA9ICgpID0+IHtcblx0XHRpZiAoc3RhdGUucG9sbEludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHN0YXRlLnBvbGxJbnRlcnZhbCk7XG5cdFx0XHRzdGF0ZS5wb2xsSW50ZXJ2YWwgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdGlmIChzdGF0ZS51bnN1YnNjcmliZUJyb2FkY2FzdCkge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QoKTtcblx0XHRcdHN0YXRlLnVuc3Vic2NyaWJlQnJvYWRjYXN0ID0gdm9pZCAwO1xuXHRcdH1cblx0XHRpZiAoc3RhdGUudW5zdWJzY3JpYmVGb2N1cykge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cygpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IHZvaWQgMDtcblx0XHR9XG5cdFx0aWYgKHN0YXRlLnVuc3Vic2NyaWJlT25saW5lKSB7XG5cdFx0XHRzdGF0ZS51bnN1YnNjcmliZU9ubGluZSgpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVPbmxpbmUgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdHN0YXRlLmxhc3RTeW5jID0gMDtcblx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSAwO1xuXHRcdHN0YXRlLmNhY2hlZFNlc3Npb24gPSB2b2lkIDA7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0aW5pdCxcblx0XHRjbGVhbnVwLFxuXHRcdHRyaWdnZXJSZWZldGNoLFxuXHRcdGJyb2FkY2FzdFNlc3Npb25VcGRhdGVcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24tcmVmcmVzaC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/session-refresh.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/client/vanilla.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/vanilla.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthClient: () => (/* binding */ createAuthClient)\n/* harmony export */ });\n/* harmony import */ var _config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/config.mjs\");\n/* harmony import */ var _proxy_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./proxy.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/proxy.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/client/vanilla.ts\nfunction createAuthClient(options) {\n\tconst { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, atomListeners, $store } = (0,_config_mjs__WEBPACK_IMPORTED_MODULE_0__.getClientConfig)(options);\n\tconst resolvedHooks = {};\n\tfor (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[`use${(0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.capitalizeFirstLetter)(key)}`] = value;\n\treturn (0,_proxy_mjs__WEBPACK_IMPORTED_MODULE_1__.createDynamicPathProxy)({\n\t\t...pluginsActions,\n\t\t...resolvedHooks,\n\t\t$fetch,\n\t\t$store\n\t}, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);\n}\n\n//#endregion\n\n//# sourceMappingURL=vanilla.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvdmFuaWxsYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNNO0FBQ1c7O0FBRWhFO0FBQ0E7QUFDQSxTQUFTLGlGQUFpRixFQUFFLDREQUFlO0FBQzNHO0FBQ0EsOEVBQThFLDhFQUFxQixNQUFNO0FBQ3pHLFFBQVEsa0VBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFx2YW5pbGxhLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDbGllbnRDb25maWcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEeW5hbWljUGF0aFByb3h5IH0gZnJvbSBcIi4vcHJveHkubWpzXCI7XG5pbXBvcnQgeyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvdmFuaWxsYS50c1xuZnVuY3Rpb24gY3JlYXRlQXV0aENsaWVudChvcHRpb25zKSB7XG5cdGNvbnN0IHsgcGx1Z2luUGF0aE1ldGhvZHMsIHBsdWdpbnNBY3Rpb25zLCBwbHVnaW5zQXRvbXMsICRmZXRjaCwgYXRvbUxpc3RlbmVycywgJHN0b3JlIH0gPSBnZXRDbGllbnRDb25maWcob3B0aW9ucyk7XG5cdGNvbnN0IHJlc29sdmVkSG9va3MgPSB7fTtcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGx1Z2luc0F0b21zKSkgcmVzb2x2ZWRIb29rc1tgdXNlJHtjYXBpdGFsaXplRmlyc3RMZXR0ZXIoa2V5KX1gXSA9IHZhbHVlO1xuXHRyZXR1cm4gY3JlYXRlRHluYW1pY1BhdGhQcm94eSh7XG5cdFx0Li4ucGx1Z2luc0FjdGlvbnMsXG5cdFx0Li4ucmVzb2x2ZWRIb29rcyxcblx0XHQkZmV0Y2gsXG5cdFx0JHN0b3JlXG5cdH0sICRmZXRjaCwgcGx1Z2luUGF0aE1ldGhvZHMsIHBsdWdpbnNBdG9tcywgYXRvbUxpc3RlbmVycyk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlQXV0aENsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFuaWxsYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/client/vanilla.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/create-context.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/context/create-context.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthContext: () => (/* binding */ createAuthContext)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../crypto/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/constants.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/constants.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/context/create-context.ts\n/**\n* Estimates the entropy of a string in bits.\n* This is a simple approximation that helps detect low-entropy secrets.\n*/\nfunction estimateEntropy(str) {\n\tconst unique = new Set(str).size;\n\tif (unique === 0) return 0;\n\treturn Math.log2(Math.pow(unique, str.length));\n}\n/**\n* Validates that the secret meets minimum security requirements.\n* Throws BetterAuthError if the secret is invalid.\n* Skips validation for DEFAULT_SECRET in test environments only.\n* Only throws for DEFAULT_SECRET in production environment.\n*/\nfunction validateSecret(secret, logger$1) {\n\tconst isDefaultSecret = secret === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)()) return;\n\tif (isDefaultSecret && _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\");\n\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).\");\n\tif (secret.length < 32) logger$1.warn(`[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with \\`npx @better-auth/cli secret\\` or \\`openssl rand -base64 32\\`.`);\n\tif (estimateEntropy(secret) < 120) logger$1.warn(\"[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.\");\n}\nasync function createAuthContext(adapter, options, getDatabaseType) {\n\tif (!options.database) options = (0,defu__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(options, {\n\t\tsession: { cookieCache: {\n\t\t\tenabled: true,\n\t\t\tstrategy: \"jwe\",\n\t\t\trefreshCache: true\n\t\t} },\n\t\taccount: {\n\t\t\tstoreStateStrategy: \"cookie\",\n\t\t\tstoreAccountCookie: true\n\t\t}\n\t});\n\tconst plugins = options.plugins || [];\n\tconst internalPlugins = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getInternalPlugins)(options);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.createLogger)(options.logger);\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath);\n\tif (!baseURL) logger$1.warn(`[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.`);\n\tif (adapter.id === \"memory\" && options.advanced?.database?.generateId === false) logger$1.error(`[better-auth] Misconfiguration detected.\nYou are using the memory DB with generateId: false.\nThis will cause no id to be generated for any model.\nMost of the features of Better Auth will not work correctly.`);\n\tconst secret = options.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.BETTER_AUTH_SECRET || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.AUTH_SECRET || _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_SECRET;\n\tvalidateSecret(secret, logger$1);\n\toptions = {\n\t\t...options,\n\t\tsecret,\n\t\tbaseURL: baseURL ? new URL(baseURL).origin : \"\",\n\t\tbasePath: options.basePath || \"/api/auth\",\n\t\tplugins: plugins.concat(internalPlugins)\n\t};\n\t(0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.checkEndpointConflicts)(options, logger$1);\n\tconst cookies = (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.getCookies)(options);\n\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__.getAuthTables)(options);\n\tconst providers = Object.entries(options.socialProviders || {}).map(([key, config]) => {\n\t\tif (config == null) return null;\n\t\tif (config.enabled === false) return null;\n\t\tif (!config.clientId) logger$1.warn(`Social provider ${key} is missing clientId or clientSecret`);\n\t\tconst provider = _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__.socialProviders[key](config);\n\t\tprovider.disableImplicitSignUp = config.disableImplicitSignUp;\n\t\treturn provider;\n\t}).filter((x) => x !== null);\n\tconst generateIdFunc = ({ model, size }) => {\n\t\tif (typeof options.advanced?.generateId === \"function\") return options.advanced.generateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tconst dbGenerateId = options?.advanced?.database?.generateId;\n\t\tif (typeof dbGenerateId === \"function\") return dbGenerateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tif (dbGenerateId === \"uuid\") return crypto.randomUUID();\n\t\tif (dbGenerateId === \"serial\" || dbGenerateId === false) return false;\n\t\treturn (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__.generateId)(size);\n\t};\n\tconst { publish } = await (0,_better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__.createTelemetry)(options, {\n\t\tadapter: adapter.id,\n\t\tdatabase: typeof options.database === \"function\" ? \"adapter\" : getDatabaseType(options.database)\n\t});\n\tconst trustedOrigins = await (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getTrustedOrigins)(options);\n\tconst initOrPromise = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.runPluginInit)({\n\t\tappName: options.appName || \"Better Auth\",\n\t\tbaseURL: baseURL || \"\",\n\t\tversion: (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__.getBetterAuthVersion)(),\n\t\tsocialProviders: providers,\n\t\toptions,\n\t\toauthConfig: {\n\t\t\tstoreStateStrategy: options.account?.storeStateStrategy || (options.database ? \"database\" : \"cookie\"),\n\t\t\tskipStateCookieCheck: !!options.account?.skipStateCookieCheck\n\t\t},\n\t\ttables,\n\t\ttrustedOrigins,\n\t\tisTrustedOrigin(url, settings) {\n\t\t\treturn this.trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__.matchesOriginPattern)(url, origin, settings));\n\t\t},\n\t\tsessionConfig: {\n\t\t\tupdateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 1440 * 60,\n\t\t\texpiresIn: options.session?.expiresIn || 3600 * 24 * 7,\n\t\t\tfreshAge: options.session?.freshAge === void 0 ? 3600 * 24 : options.session.freshAge,\n\t\t\tcookieRefreshCache: (() => {\n\t\t\t\tconst refreshCache = options.session?.cookieCache?.refreshCache;\n\t\t\t\tconst maxAge = options.session?.cookieCache?.maxAge || 300;\n\t\t\t\tif ((!!options.database || !!options.secondaryStorage) && refreshCache) {\n\t\t\t\t\tlogger$1.warn(\"[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (refreshCache === false || refreshCache === void 0) return false;\n\t\t\t\tif (refreshCache === true) return {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: refreshCache.updateAge !== void 0 ? refreshCache.updateAge : Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t})()\n\t\t},\n\t\tsecret,\n\t\trateLimit: {\n\t\t\t...options.rateLimit,\n\t\t\tenabled: options.rateLimit?.enabled ?? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction,\n\t\t\twindow: options.rateLimit?.window || 10,\n\t\t\tmax: options.rateLimit?.max || 100,\n\t\t\tstorage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n\t\t},\n\t\tauthCookies: cookies,\n\t\tlogger: logger$1,\n\t\tgenerateId: generateIdFunc,\n\t\tsession: null,\n\t\tsecondaryStorage: options.secondaryStorage,\n\t\tpassword: {\n\t\t\thash: options.emailAndPassword?.password?.hash || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.hashPassword,\n\t\t\tverify: options.emailAndPassword?.password?.verify || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyPassword,\n\t\t\tconfig: {\n\t\t\t\tminPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n\t\t\t\tmaxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n\t\t\t},\n\t\t\tcheckPassword: _utils_password_mjs__WEBPACK_IMPORTED_MODULE_7__.checkPassword\n\t\t},\n\t\tsetNewSession(session) {\n\t\t\tthis.newSession = session;\n\t\t},\n\t\tnewSession: null,\n\t\tadapter,\n\t\tinternalAdapter: (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(adapter, {\n\t\t\toptions,\n\t\t\tlogger: logger$1,\n\t\t\thooks: options.databaseHooks ? [options.databaseHooks] : [],\n\t\t\tgenerateId: generateIdFunc\n\t\t}),\n\t\tcreateAuthCookie: (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.createCookieGetter)(options),\n\t\tasync runMigrations() {\n\t\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"runMigrations will be set by the specific init implementation\");\n\t\t},\n\t\tpublishTelemetry: publish,\n\t\tskipCSRFCheck: !!options.advanced?.disableCSRFCheck,\n\t\tskipOriginCheck: options.advanced?.disableOriginCheck !== void 0 ? options.advanced.disableOriginCheck : (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)() ? true : false,\n\t\trunInBackground: options.advanced?.backgroundTasks?.handler ?? ((p) => {\n\t\t\tp.catch(() => {});\n\t\t}),\n\t\tasync runInBackgroundOrAwait(promise) {\n\t\t\ttry {\n\t\t\t\tif (options.advanced?.backgroundTasks?.handler) {\n\t\t\t\t\tif (promise instanceof Promise) options.advanced.backgroundTasks.handler(promise.catch((e) => {\n\t\t\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t\t\t}));\n\t\t\t\t} else await promise;\n\t\t\t} catch (e) {\n\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t}\n\t\t},\n\t\tgetPlugin: (id) => options.plugins.find((p) => p.id === id) ?? null\n\t});\n\tlet context;\n\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(initOrPromise)) ({context} = await initOrPromise);\n\telse ({context} = initOrPromise);\n\tif (typeof context.options.emailVerification?.onEmailVerification === \"function\") context.options.emailVerification.onEmailVerification = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__.deprecate)(context.options.emailVerification.onEmailVerification, \"Use `afterEmailVerification` instead. This will be removed in 1.5\", context.logger);\n\treturn context;\n}\n\n//#endregion\n\n//# sourceMappingURL=create-context.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2NyZWF0ZS1jb250ZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRTtBQUNyQjtBQUNxQjtBQUNHO0FBQ2xCO0FBQ2tCO0FBQ047QUFDVjtBQUNJO0FBQ0Y7QUFDNkI7QUFDcEI7QUFDWjtBQUMyQjtBQUN0QjtBQUNOO0FBQ2lCO0FBQ1o7QUFDakM7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0VBQWM7QUFDbEQsS0FBSyw4REFBTTtBQUNYLHdCQUF3QixnRUFBWSxZQUFZLHFFQUFlO0FBQy9ELHdCQUF3QixxRUFBZSw2RkFBNkYsUUFBUTtBQUM1STtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpREFBSTtBQUN0QyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EseUJBQXlCLGlFQUFrQjtBQUMzQyxrQkFBa0Isb0VBQVk7QUFDOUIsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsdURBQUcsdUJBQXVCLHVEQUFHLGdCQUFnQixnRUFBYztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzRUFBc0I7QUFDdkIsaUJBQWlCLDhEQUFVO0FBQzNCLGdCQUFnQixvRUFBYTtBQUM3QiwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBLHlEQUF5RCxLQUFLO0FBQzlELG1CQUFtQixnRkFBZTtBQUNsQztBQUNBO0FBQ0EsRUFBRTtBQUNGLDJCQUEyQixhQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUyw0REFBWTtBQUNyQjtBQUNBLFNBQVMsVUFBVSxRQUFRLHdFQUFlO0FBQzFDO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsOEJBQThCLGdFQUFpQjtBQUMvQyx1QkFBdUIsNERBQWE7QUFDcEM7QUFDQTtBQUNBLFdBQVcsZ0ZBQW9CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLCtFQUFvQjtBQUNuRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsOERBQVk7QUFDakUseURBQXlELGdFQUFjO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQiwrRUFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLHNFQUFrQjtBQUN0QztBQUNBLGFBQWEscUVBQWU7QUFDNUIsR0FBRztBQUNIO0FBQ0E7QUFDQSwyR0FBMkcsOERBQU07QUFDakg7QUFDQSxtQkFBbUI7QUFDbkIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsS0FBSyxnRUFBUyxtQkFBbUIsU0FBUztBQUMxQyxRQUFRLFNBQVM7QUFDakIsMklBQTJJLG1FQUFTO0FBQ3BKO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjb250ZXh0XFxjcmVhdGUtY29udGV4dC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IG1hdGNoZXNPcmlnaW5QYXR0ZXJuIH0gZnJvbSBcIi4uL2F1dGgvdHJ1c3RlZC1vcmlnaW5zLm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuLi9jcnlwdG8vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBpc1Byb21pc2UgfSBmcm9tIFwiLi4vdXRpbHMvaXMtcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUNvb2tpZUdldHRlciwgZ2V0Q29va2llcyB9IGZyb20gXCIuLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjaGVja1Bhc3N3b3JkIH0gZnJvbSBcIi4uL3V0aWxzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tFbmRwb2ludENvbmZsaWN0cyB9IGZyb20gXCIuLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1NFQ1JFVCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMubWpzXCI7XG5pbXBvcnQgeyBnZXRJbnRlcm5hbFBsdWdpbnMsIGdldFRydXN0ZWRPcmlnaW5zLCBydW5QbHVnaW5Jbml0IH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGdldEJldHRlckF1dGhWZXJzaW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciwgZW52LCBpc1Byb2R1Y3Rpb24sIGlzVGVzdCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgZGVwcmVjYXRlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBzb2NpYWxQcm92aWRlcnMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvc29jaWFsLXByb3ZpZGVyc1wiO1xuaW1wb3J0IHsgY3JlYXRlVGVsZW1ldHJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC90ZWxlbWV0cnlcIjtcbmltcG9ydCBkZWZ1IGZyb20gXCJkZWZ1XCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29udGV4dC9jcmVhdGUtY29udGV4dC50c1xuLyoqXG4qIEVzdGltYXRlcyB0aGUgZW50cm9weSBvZiBhIHN0cmluZyBpbiBiaXRzLlxuKiBUaGlzIGlzIGEgc2ltcGxlIGFwcHJveGltYXRpb24gdGhhdCBoZWxwcyBkZXRlY3QgbG93LWVudHJvcHkgc2VjcmV0cy5cbiovXG5mdW5jdGlvbiBlc3RpbWF0ZUVudHJvcHkoc3RyKSB7XG5cdGNvbnN0IHVuaXF1ZSA9IG5ldyBTZXQoc3RyKS5zaXplO1xuXHRpZiAodW5pcXVlID09PSAwKSByZXR1cm4gMDtcblx0cmV0dXJuIE1hdGgubG9nMihNYXRoLnBvdyh1bmlxdWUsIHN0ci5sZW5ndGgpKTtcbn1cbi8qKlxuKiBWYWxpZGF0ZXMgdGhhdCB0aGUgc2VjcmV0IG1lZXRzIG1pbmltdW0gc2VjdXJpdHkgcmVxdWlyZW1lbnRzLlxuKiBUaHJvd3MgQmV0dGVyQXV0aEVycm9yIGlmIHRoZSBzZWNyZXQgaXMgaW52YWxpZC5cbiogU2tpcHMgdmFsaWRhdGlvbiBmb3IgREVGQVVMVF9TRUNSRVQgaW4gdGVzdCBlbnZpcm9ubWVudHMgb25seS5cbiogT25seSB0aHJvd3MgZm9yIERFRkFVTFRfU0VDUkVUIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuXG4qL1xuZnVuY3Rpb24gdmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSkge1xuXHRjb25zdCBpc0RlZmF1bHRTZWNyZXQgPSBzZWNyZXQgPT09IERFRkFVTFRfU0VDUkVUO1xuXHRpZiAoaXNUZXN0KCkpIHJldHVybjtcblx0aWYgKGlzRGVmYXVsdFNlY3JldCAmJiBpc1Byb2R1Y3Rpb24pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJZb3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IHNlY3JldC4gUGxlYXNlIHNldCBgQkVUVEVSX0FVVEhfU0VDUkVUYCBpbiB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBwYXNzIGBzZWNyZXRgIGluIHlvdXIgYXV0aCBjb25maWcuXCIpO1xuXHRpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkJFVFRFUl9BVVRIX1NFQ1JFVCBpcyBtaXNzaW5nLiBTZXQgaXQgaW4geW91ciBlbnZpcm9ubWVudCBvciBwYXNzIGBzZWNyZXRgIHRvIGJldHRlckF1dGgoeyBzZWNyZXQgfSkuXCIpO1xuXHRpZiAoc2VjcmV0Lmxlbmd0aCA8IDMyKSBsb2dnZXIkMS53YXJuKGBbYmV0dGVyLWF1dGhdIFdhcm5pbmc6IHlvdXIgQkVUVEVSX0FVVEhfU0VDUkVUIHNob3VsZCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcgZm9yIGFkZXF1YXRlIHNlY3VyaXR5LiBHZW5lcmF0ZSBvbmUgd2l0aCBcXGBucHggQGJldHRlci1hdXRoL2NsaSBzZWNyZXRcXGAgb3IgXFxgb3BlbnNzbCByYW5kIC1iYXNlNjQgMzJcXGAuYCk7XG5cdGlmIChlc3RpbWF0ZUVudHJvcHkoc2VjcmV0KSA8IDEyMCkgbG9nZ2VyJDEud2FybihcIltiZXR0ZXItYXV0aF0gV2FybmluZzogeW91ciBCRVRURVJfQVVUSF9TRUNSRVQgYXBwZWFycyBsb3ctZW50cm9weS4gVXNlIGEgcmFuZG9tbHkgZ2VuZXJhdGVkIHNlY3JldCBmb3IgcHJvZHVjdGlvbi5cIik7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpIHtcblx0aWYgKCFvcHRpb25zLmRhdGFiYXNlKSBvcHRpb25zID0gZGVmdShvcHRpb25zLCB7XG5cdFx0c2Vzc2lvbjogeyBjb29raWVDYWNoZToge1xuXHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdHN0cmF0ZWd5OiBcImp3ZVwiLFxuXHRcdFx0cmVmcmVzaENhY2hlOiB0cnVlXG5cdFx0fSB9LFxuXHRcdGFjY291bnQ6IHtcblx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogXCJjb29raWVcIixcblx0XHRcdHN0b3JlQWNjb3VudENvb2tpZTogdHJ1ZVxuXHRcdH1cblx0fSk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG5cdGNvbnN0IGludGVybmFsUGx1Z2lucyA9IGdldEludGVybmFsUGx1Z2lucyhvcHRpb25zKTtcblx0Y29uc3QgbG9nZ2VyJDEgPSBjcmVhdGVMb2dnZXIob3B0aW9ucy5sb2dnZXIpO1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgpO1xuXHRpZiAoIWJhc2VVUkwpIGxvZ2dlciQxLndhcm4oYFtiZXR0ZXItYXV0aF0gQmFzZSBVUkwgY291bGQgbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBzZXQgYSB2YWxpZCBiYXNlIFVSTCB1c2luZyB0aGUgYmFzZVVSTCBjb25maWcgb3B0aW9uIG9yIHRoZSBCRVRURVJfQVVUSF9CQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZS4gV2l0aG91dCB0aGlzLCBjYWxsYmFja3MgYW5kIHJlZGlyZWN0cyBtYXkgbm90IHdvcmsgY29ycmVjdGx5LmApO1xuXHRpZiAoYWRhcHRlci5pZCA9PT0gXCJtZW1vcnlcIiAmJiBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gZmFsc2UpIGxvZ2dlciQxLmVycm9yKGBbYmV0dGVyLWF1dGhdIE1pc2NvbmZpZ3VyYXRpb24gZGV0ZWN0ZWQuXG5Zb3UgYXJlIHVzaW5nIHRoZSBtZW1vcnkgREIgd2l0aCBnZW5lcmF0ZUlkOiBmYWxzZS5cblRoaXMgd2lsbCBjYXVzZSBubyBpZCB0byBiZSBnZW5lcmF0ZWQgZm9yIGFueSBtb2RlbC5cbk1vc3Qgb2YgdGhlIGZlYXR1cmVzIG9mIEJldHRlciBBdXRoIHdpbGwgbm90IHdvcmsgY29ycmVjdGx5LmApO1xuXHRjb25zdCBzZWNyZXQgPSBvcHRpb25zLnNlY3JldCB8fCBlbnYuQkVUVEVSX0FVVEhfU0VDUkVUIHx8IGVudi5BVVRIX1NFQ1JFVCB8fCBERUZBVUxUX1NFQ1JFVDtcblx0dmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSk7XG5cdG9wdGlvbnMgPSB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRzZWNyZXQsXG5cdFx0YmFzZVVSTDogYmFzZVVSTCA/IG5ldyBVUkwoYmFzZVVSTCkub3JpZ2luIDogXCJcIixcblx0XHRiYXNlUGF0aDogb3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiLFxuXHRcdHBsdWdpbnM6IHBsdWdpbnMuY29uY2F0KGludGVybmFsUGx1Z2lucylcblx0fTtcblx0Y2hlY2tFbmRwb2ludENvbmZsaWN0cyhvcHRpb25zLCBsb2dnZXIkMSk7XG5cdGNvbnN0IGNvb2tpZXMgPSBnZXRDb29raWVzKG9wdGlvbnMpO1xuXHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRjb25zdCBwcm92aWRlcnMgPSBPYmplY3QuZW50cmllcyhvcHRpb25zLnNvY2lhbFByb3ZpZGVycyB8fCB7fSkubWFwKChba2V5LCBjb25maWddKSA9PiB7XG5cdFx0aWYgKGNvbmZpZyA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoY29uZmlnLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoIWNvbmZpZy5jbGllbnRJZCkgbG9nZ2VyJDEud2FybihgU29jaWFsIHByb3ZpZGVyICR7a2V5fSBpcyBtaXNzaW5nIGNsaWVudElkIG9yIGNsaWVudFNlY3JldGApO1xuXHRcdGNvbnN0IHByb3ZpZGVyID0gc29jaWFsUHJvdmlkZXJzW2tleV0oY29uZmlnKTtcblx0XHRwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAgPSBjb25maWcuZGlzYWJsZUltcGxpY2l0U2lnblVwO1xuXHRcdHJldHVybiBwcm92aWRlcjtcblx0fSkuZmlsdGVyKCh4KSA9PiB4ICE9PSBudWxsKTtcblx0Y29uc3QgZ2VuZXJhdGVJZEZ1bmMgPSAoeyBtb2RlbCwgc2l6ZSB9KSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLmFkdmFuY2VkPy5nZW5lcmF0ZUlkID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBvcHRpb25zLmFkdmFuY2VkLmdlbmVyYXRlSWQoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRzaXplXG5cdFx0fSk7XG5cdFx0Y29uc3QgZGJHZW5lcmF0ZUlkID0gb3B0aW9ucz8uYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkO1xuXHRcdGlmICh0eXBlb2YgZGJHZW5lcmF0ZUlkID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBkYkdlbmVyYXRlSWQoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRzaXplXG5cdFx0fSk7XG5cdFx0aWYgKGRiR2VuZXJhdGVJZCA9PT0gXCJ1dWlkXCIpIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuXHRcdGlmIChkYkdlbmVyYXRlSWQgPT09IFwic2VyaWFsXCIgfHwgZGJHZW5lcmF0ZUlkID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiBnZW5lcmF0ZUlkJDEoc2l6ZSk7XG5cdH07XG5cdGNvbnN0IHsgcHVibGlzaCB9ID0gYXdhaXQgY3JlYXRlVGVsZW1ldHJ5KG9wdGlvbnMsIHtcblx0XHRhZGFwdGVyOiBhZGFwdGVyLmlkLFxuXHRcdGRhdGFiYXNlOiB0eXBlb2Ygb3B0aW9ucy5kYXRhYmFzZSA9PT0gXCJmdW5jdGlvblwiID8gXCJhZGFwdGVyXCIgOiBnZXREYXRhYmFzZVR5cGUob3B0aW9ucy5kYXRhYmFzZSlcblx0fSk7XG5cdGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gYXdhaXQgZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucyk7XG5cdGNvbnN0IGluaXRPclByb21pc2UgPSBydW5QbHVnaW5Jbml0KHtcblx0XHRhcHBOYW1lOiBvcHRpb25zLmFwcE5hbWUgfHwgXCJCZXR0ZXIgQXV0aFwiLFxuXHRcdGJhc2VVUkw6IGJhc2VVUkwgfHwgXCJcIixcblx0XHR2ZXJzaW9uOiBnZXRCZXR0ZXJBdXRoVmVyc2lvbigpLFxuXHRcdHNvY2lhbFByb3ZpZGVyczogcHJvdmlkZXJzLFxuXHRcdG9wdGlvbnMsXG5cdFx0b2F1dGhDb25maWc6IHtcblx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogb3B0aW9ucy5hY2NvdW50Py5zdG9yZVN0YXRlU3RyYXRlZ3kgfHwgKG9wdGlvbnMuZGF0YWJhc2UgPyBcImRhdGFiYXNlXCIgOiBcImNvb2tpZVwiKSxcblx0XHRcdHNraXBTdGF0ZUNvb2tpZUNoZWNrOiAhIW9wdGlvbnMuYWNjb3VudD8uc2tpcFN0YXRlQ29va2llQ2hlY2tcblx0XHR9LFxuXHRcdHRhYmxlcyxcblx0XHR0cnVzdGVkT3JpZ2lucyxcblx0XHRpc1RydXN0ZWRPcmlnaW4odXJsLCBzZXR0aW5ncykge1xuXHRcdFx0cmV0dXJuIHRoaXMudHJ1c3RlZE9yaWdpbnMuc29tZSgob3JpZ2luKSA9PiBtYXRjaGVzT3JpZ2luUGF0dGVybih1cmwsIG9yaWdpbiwgc2V0dGluZ3MpKTtcblx0XHR9LFxuXHRcdHNlc3Npb25Db25maWc6IHtcblx0XHRcdHVwZGF0ZUFnZTogb3B0aW9ucy5zZXNzaW9uPy51cGRhdGVBZ2UgIT09IHZvaWQgMCA/IG9wdGlvbnMuc2Vzc2lvbi51cGRhdGVBZ2UgOiAxNDQwICogNjAsXG5cdFx0XHRleHBpcmVzSW46IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IDM2MDAgKiAyNCAqIDcsXG5cdFx0XHRmcmVzaEFnZTogb3B0aW9ucy5zZXNzaW9uPy5mcmVzaEFnZSA9PT0gdm9pZCAwID8gMzYwMCAqIDI0IDogb3B0aW9ucy5zZXNzaW9uLmZyZXNoQWdlLFxuXHRcdFx0Y29va2llUmVmcmVzaENhY2hlOiAoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCByZWZyZXNoQ2FjaGUgPSBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5yZWZyZXNoQ2FjaGU7XG5cdFx0XHRcdGNvbnN0IG1heEFnZSA9IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCAzMDA7XG5cdFx0XHRcdGlmICgoISFvcHRpb25zLmRhdGFiYXNlIHx8ICEhb3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlKSAmJiByZWZyZXNoQ2FjaGUpIHtcblx0XHRcdFx0XHRsb2dnZXIkMS53YXJuKFwiW2JldHRlci1hdXRoXSBgc2Vzc2lvbi5jb29raWVDYWNoZS5yZWZyZXNoQ2FjaGVgIGlzIGVuYWJsZWQgd2hpbGUgYGRhdGFiYXNlYCBvciBgc2Vjb25kYXJ5U3RvcmFnZWAgaXMgY29uZmlndXJlZC4gYHJlZnJlc2hDYWNoZWAgaXMgbWVhbnQgZm9yIHN0YXRlbGVzcyAoREItbGVzcykgc2V0dXBzLiBEaXNhYmxpbmcgYHJlZnJlc2hDYWNoZWAg4oCUIHJlbW92ZSBpdCBmcm9tIHlvdXIgY29uZmlnIHRvIHNpbGVuY2UgdGhpcyB3YXJuaW5nLlwiKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHJlZnJlc2hDYWNoZSA9PT0gZmFsc2UgfHwgcmVmcmVzaENhY2hlID09PSB2b2lkIDApIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWYgKHJlZnJlc2hDYWNoZSA9PT0gdHJ1ZSkgcmV0dXJuIHtcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdHVwZGF0ZUFnZTogTWF0aC5mbG9vcihtYXhBZ2UgKiAuMilcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0XHRcdHVwZGF0ZUFnZTogcmVmcmVzaENhY2hlLnVwZGF0ZUFnZSAhPT0gdm9pZCAwID8gcmVmcmVzaENhY2hlLnVwZGF0ZUFnZSA6IE1hdGguZmxvb3IobWF4QWdlICogLjIpXG5cdFx0XHRcdH07XG5cdFx0XHR9KSgpXG5cdFx0fSxcblx0XHRzZWNyZXQsXG5cdFx0cmF0ZUxpbWl0OiB7XG5cdFx0XHQuLi5vcHRpb25zLnJhdGVMaW1pdCxcblx0XHRcdGVuYWJsZWQ6IG9wdGlvbnMucmF0ZUxpbWl0Py5lbmFibGVkID8/IGlzUHJvZHVjdGlvbixcblx0XHRcdHdpbmRvdzogb3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyB8fCAxMCxcblx0XHRcdG1heDogb3B0aW9ucy5yYXRlTGltaXQ/Lm1heCB8fCAxMDAsXG5cdFx0XHRzdG9yYWdlOiBvcHRpb25zLnJhdGVMaW1pdD8uc3RvcmFnZSB8fCAob3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlID8gXCJzZWNvbmRhcnktc3RvcmFnZVwiIDogXCJtZW1vcnlcIilcblx0XHR9LFxuXHRcdGF1dGhDb29raWVzOiBjb29raWVzLFxuXHRcdGxvZ2dlcjogbG9nZ2VyJDEsXG5cdFx0Z2VuZXJhdGVJZDogZ2VuZXJhdGVJZEZ1bmMsXG5cdFx0c2Vzc2lvbjogbnVsbCxcblx0XHRzZWNvbmRhcnlTdG9yYWdlOiBvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UsXG5cdFx0cGFzc3dvcmQ6IHtcblx0XHRcdGhhc2g6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/Lmhhc2ggfHwgaGFzaFBhc3N3b3JkLFxuXHRcdFx0dmVyaWZ5OiBvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnBhc3N3b3JkPy52ZXJpZnkgfHwgdmVyaWZ5UGFzc3dvcmQsXG5cdFx0XHRjb25maWc6IHtcblx0XHRcdFx0bWluUGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWluUGFzc3dvcmRMZW5ndGggfHwgOCxcblx0XHRcdFx0bWF4UGFzc3dvcmRMZW5ndGg6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ubWF4UGFzc3dvcmRMZW5ndGggfHwgMTI4XG5cdFx0XHR9LFxuXHRcdFx0Y2hlY2tQYXNzd29yZFxuXHRcdH0sXG5cdFx0c2V0TmV3U2Vzc2lvbihzZXNzaW9uKSB7XG5cdFx0XHR0aGlzLm5ld1Nlc3Npb24gPSBzZXNzaW9uO1xuXHRcdH0sXG5cdFx0bmV3U2Vzc2lvbjogbnVsbCxcblx0XHRhZGFwdGVyLFxuXHRcdGludGVybmFsQWRhcHRlcjogY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGFkYXB0ZXIsIHtcblx0XHRcdG9wdGlvbnMsXG5cdFx0XHRsb2dnZXI6IGxvZ2dlciQxLFxuXHRcdFx0aG9va3M6IG9wdGlvbnMuZGF0YWJhc2VIb29rcyA/IFtvcHRpb25zLmRhdGFiYXNlSG9va3NdIDogW10sXG5cdFx0XHRnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkRnVuY1xuXHRcdH0pLFxuXHRcdGNyZWF0ZUF1dGhDb29raWU6IGNyZWF0ZUNvb2tpZUdldHRlcihvcHRpb25zKSxcblx0XHRhc3luYyBydW5NaWdyYXRpb25zKCkge1xuXHRcdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcInJ1bk1pZ3JhdGlvbnMgd2lsbCBiZSBzZXQgYnkgdGhlIHNwZWNpZmljIGluaXQgaW1wbGVtZW50YXRpb25cIik7XG5cdFx0fSxcblx0XHRwdWJsaXNoVGVsZW1ldHJ5OiBwdWJsaXNoLFxuXHRcdHNraXBDU1JGQ2hlY2s6ICEhb3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayxcblx0XHRza2lwT3JpZ2luQ2hlY2s6IG9wdGlvbnMuYWR2YW5jZWQ/LmRpc2FibGVPcmlnaW5DaGVjayAhPT0gdm9pZCAwID8gb3B0aW9ucy5hZHZhbmNlZC5kaXNhYmxlT3JpZ2luQ2hlY2sgOiBpc1Rlc3QoKSA/IHRydWUgOiBmYWxzZSxcblx0XHRydW5JbkJhY2tncm91bmQ6IG9wdGlvbnMuYWR2YW5jZWQ/LmJhY2tncm91bmRUYXNrcz8uaGFuZGxlciA/PyAoKHApID0+IHtcblx0XHRcdHAuY2F0Y2goKCkgPT4ge30pO1xuXHRcdH0pLFxuXHRcdGFzeW5jIHJ1bkluQmFja2dyb3VuZE9yQXdhaXQocHJvbWlzZSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmJhY2tncm91bmRUYXNrcz8uaGFuZGxlcikge1xuXHRcdFx0XHRcdGlmIChwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZSkgb3B0aW9ucy5hZHZhbmNlZC5iYWNrZ3JvdW5kVGFza3MuaGFuZGxlcihwcm9taXNlLmNhdGNoKChlKSA9PiB7XG5cdFx0XHRcdFx0XHRsb2dnZXIkMS5lcnJvcihcIkZhaWxlZCB0byBydW4gYmFja2dyb3VuZCB0YXNrOlwiLCBlKTtcblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH0gZWxzZSBhd2FpdCBwcm9taXNlO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRsb2dnZXIkMS5lcnJvcihcIkZhaWxlZCB0byBydW4gYmFja2dyb3VuZCB0YXNrOlwiLCBlKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGdldFBsdWdpbjogKGlkKSA9PiBvcHRpb25zLnBsdWdpbnMuZmluZCgocCkgPT4gcC5pZCA9PT0gaWQpID8/IG51bGxcblx0fSk7XG5cdGxldCBjb250ZXh0O1xuXHRpZiAoaXNQcm9taXNlKGluaXRPclByb21pc2UpKSAoe2NvbnRleHR9ID0gYXdhaXQgaW5pdE9yUHJvbWlzZSk7XG5cdGVsc2UgKHtjb250ZXh0fSA9IGluaXRPclByb21pc2UpO1xuXHRpZiAodHlwZW9mIGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8ub25FbWFpbFZlcmlmaWNhdGlvbiA9PT0gXCJmdW5jdGlvblwiKSBjb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbiA9IGRlcHJlY2F0ZShjb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbiwgXCJVc2UgYGFmdGVyRW1haWxWZXJpZmljYXRpb25gIGluc3RlYWQuIFRoaXMgd2lsbCBiZSByZW1vdmVkIGluIDEuNVwiLCBjb250ZXh0LmxvZ2dlcik7XG5cdHJldHVybiBjb250ZXh0O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUF1dGhDb250ZXh0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtY29udGV4dC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/create-context.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/helpers.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/context/helpers.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getInternalPlugins: () => (/* binding */ getInternalPlugins),\n/* harmony export */   getTrustedOrigins: () => (/* binding */ getTrustedOrigins),\n/* harmony export */   runPluginInit: () => (/* binding */ runPluginInit)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n//#region src/context/helpers.ts\nasync function runPluginInit(ctx) {\n\tlet options = ctx.options;\n\tconst plugins = options.plugins || [];\n\tlet context = ctx;\n\tconst dbHooks = [];\n\tfor (const plugin of plugins) if (plugin.init) {\n\t\tconst initPromise = plugin.init(context);\n\t\tlet result;\n\t\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__.isPromise)(initPromise)) result = await initPromise;\n\t\telse result = initPromise;\n\t\tif (typeof result === \"object\") {\n\t\t\tif (result.options) {\n\t\t\t\tconst { databaseHooks, ...restOpts } = result.options;\n\t\t\t\tif (databaseHooks) dbHooks.push(databaseHooks);\n\t\t\t\toptions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(options, restOpts);\n\t\t\t}\n\t\t\tif (result.context) context = {\n\t\t\t\t...context,\n\t\t\t\t...result.context\n\t\t\t};\n\t\t}\n\t}\n\tdbHooks.push(options.databaseHooks);\n\tcontext.internalAdapter = (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(context.adapter, {\n\t\toptions,\n\t\tlogger: context.logger,\n\t\thooks: dbHooks.filter((u) => u !== void 0),\n\t\tgenerateId: context.generateId\n\t});\n\tcontext.options = options;\n\treturn { context };\n}\nfunction getInternalPlugins(options) {\n\tconst plugins = [];\n\tif (options.advanced?.crossSubDomainCookies?.enabled) {}\n\treturn plugins;\n}\nasync function getTrustedOrigins(options, request) {\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath, request);\n\tconst trustedOrigins = baseURL ? [new URL(baseURL).origin] : [];\n\tif (options.trustedOrigins) {\n\t\tif (Array.isArray(options.trustedOrigins)) trustedOrigins.push(...options.trustedOrigins);\n\t\tif (typeof options.trustedOrigins === \"function\") {\n\t\t\tconst validOrigins = await options.trustedOrigins(request);\n\t\t\ttrustedOrigins.push(...validOrigins);\n\t\t}\n\t}\n\tconst envTrustedOrigins = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.env.BETTER_AUTH_TRUSTED_ORIGINS;\n\tif (envTrustedOrigins) trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n\treturn trustedOrigins.filter((v) => Boolean(v));\n}\n\n//#endregion\n\n//# sourceMappingURL=helpers.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2hlbHBlcnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW1FO0FBQ3JCO0FBQ007QUFDUjtBQUNOOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdFQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2QkFBNkI7QUFDekM7QUFDQSxjQUFjLDBDQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0VBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ2dFO0FBQ2hFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29udGV4dFxcaGVscGVycy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gXCIuLi91dGlscy9pcy1wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgZGVmdSBhcyBkZWZ1JDEgfSBmcm9tIFwiZGVmdVwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbnRleHQvaGVscGVycy50c1xuYXN5bmMgZnVuY3Rpb24gcnVuUGx1Z2luSW5pdChjdHgpIHtcblx0bGV0IG9wdGlvbnMgPSBjdHgub3B0aW9ucztcblx0Y29uc3QgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTtcblx0bGV0IGNvbnRleHQgPSBjdHg7XG5cdGNvbnN0IGRiSG9va3MgPSBbXTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykgaWYgKHBsdWdpbi5pbml0KSB7XG5cdFx0Y29uc3QgaW5pdFByb21pc2UgPSBwbHVnaW4uaW5pdChjb250ZXh0KTtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGlmIChpc1Byb21pc2UoaW5pdFByb21pc2UpKSByZXN1bHQgPSBhd2FpdCBpbml0UHJvbWlzZTtcblx0XHRlbHNlIHJlc3VsdCA9IGluaXRQcm9taXNlO1xuXHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRpZiAocmVzdWx0Lm9wdGlvbnMpIHtcblx0XHRcdFx0Y29uc3QgeyBkYXRhYmFzZUhvb2tzLCAuLi5yZXN0T3B0cyB9ID0gcmVzdWx0Lm9wdGlvbnM7XG5cdFx0XHRcdGlmIChkYXRhYmFzZUhvb2tzKSBkYkhvb2tzLnB1c2goZGF0YWJhc2VIb29rcyk7XG5cdFx0XHRcdG9wdGlvbnMgPSBkZWZ1JDEob3B0aW9ucywgcmVzdE9wdHMpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlc3VsdC5jb250ZXh0KSBjb250ZXh0ID0ge1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHQuLi5yZXN1bHQuY29udGV4dFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0ZGJIb29rcy5wdXNoKG9wdGlvbnMuZGF0YWJhc2VIb29rcyk7XG5cdGNvbnRleHQuaW50ZXJuYWxBZGFwdGVyID0gY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGNvbnRleHQuYWRhcHRlciwge1xuXHRcdG9wdGlvbnMsXG5cdFx0bG9nZ2VyOiBjb250ZXh0LmxvZ2dlcixcblx0XHRob29rczogZGJIb29rcy5maWx0ZXIoKHUpID0+IHUgIT09IHZvaWQgMCksXG5cdFx0Z2VuZXJhdGVJZDogY29udGV4dC5nZW5lcmF0ZUlkXG5cdH0pO1xuXHRjb250ZXh0Lm9wdGlvbnMgPSBvcHRpb25zO1xuXHRyZXR1cm4geyBjb250ZXh0IH07XG59XG5mdW5jdGlvbiBnZXRJbnRlcm5hbFBsdWdpbnMob3B0aW9ucykge1xuXHRjb25zdCBwbHVnaW5zID0gW107XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmVuYWJsZWQpIHt9XG5cdHJldHVybiBwbHVnaW5zO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucywgcmVxdWVzdCkge1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgsIHJlcXVlc3QpO1xuXHRjb25zdCB0cnVzdGVkT3JpZ2lucyA9IGJhc2VVUkwgPyBbbmV3IFVSTChiYXNlVVJMKS5vcmlnaW5dIDogW107XG5cdGlmIChvcHRpb25zLnRydXN0ZWRPcmlnaW5zKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy50cnVzdGVkT3JpZ2lucykpIHRydXN0ZWRPcmlnaW5zLnB1c2goLi4ub3B0aW9ucy50cnVzdGVkT3JpZ2lucyk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLnRydXN0ZWRPcmlnaW5zID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IHZhbGlkT3JpZ2lucyA9IGF3YWl0IG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMocmVxdWVzdCk7XG5cdFx0XHR0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLnZhbGlkT3JpZ2lucyk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGVudlRydXN0ZWRPcmlnaW5zID0gZW52LkJFVFRFUl9BVVRIX1RSVVNURURfT1JJR0lOUztcblx0aWYgKGVudlRydXN0ZWRPcmlnaW5zKSB0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLmVudlRydXN0ZWRPcmlnaW5zLnNwbGl0KFwiLFwiKSk7XG5cdHJldHVybiB0cnVzdGVkT3JpZ2lucy5maWx0ZXIoKHYpID0+IEJvb2xlYW4odikpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEludGVybmFsUGx1Z2lucywgZ2V0VHJ1c3RlZE9yaWdpbnMsIHJ1blBsdWdpbkluaXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/init.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/context/init.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/adapter-kysely.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/get-migration.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _create_context_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./create-context.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/create-context.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/context/init.ts\nconst init = async (options) => {\n\tconst adapter = await (0,_db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__.getAdapter)(options);\n\tconst getDatabaseType = (database) => (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType)(database) || \"unknown\";\n\tconst ctx = await (0,_create_context_mjs__WEBPACK_IMPORTED_MODULE_3__.createAuthContext)(adapter, options, getDatabaseType);\n\tctx.runMigrations = async function() {\n\t\tif (!options.database || \"updateMany\" in options.database) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Database is not provided or it's an adapter. Migrations are only supported with a database instance.\");\n\t\tconst { runMigrations } = await (0,_db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__.getMigrations)(options);\n\t\tawait runMigrations();\n\t};\n\treturn ctx;\n};\n\n//#endregion\n\n//# sourceMappingURL=init.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2luaXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErRTtBQUN6QjtBQUNFO0FBQ0M7QUFDQzs7QUFFMUQ7QUFDQTtBQUNBLHVCQUF1QixrRUFBVTtBQUNqQyx1Q0FBdUMsMkZBQXFCO0FBQzVELG1CQUFtQixzRUFBaUI7QUFDcEM7QUFDQSx1RUFBdUUsb0VBQWU7QUFDdEYsVUFBVSxnQkFBZ0IsUUFBUSxvRUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQjtBQUNoQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvbnRleHRcXGluaXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWRhcHRlciB9IGZyb20gXCIuLi9kYi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGdldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi4vZGIvZ2V0LW1pZ3JhdGlvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhDb250ZXh0IH0gZnJvbSBcIi4vY3JlYXRlLWNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy9jb250ZXh0L2luaXQudHNcbmNvbnN0IGluaXQgPSBhc3luYyAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0QWRhcHRlcihvcHRpb25zKTtcblx0Y29uc3QgZ2V0RGF0YWJhc2VUeXBlID0gKGRhdGFiYXNlKSA9PiBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGF0YWJhc2UpIHx8IFwidW5rbm93blwiO1xuXHRjb25zdCBjdHggPSBhd2FpdCBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpO1xuXHRjdHgucnVuTWlncmF0aW9ucyA9IGFzeW5jIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghb3B0aW9ucy5kYXRhYmFzZSB8fCBcInVwZGF0ZU1hbnlcIiBpbiBvcHRpb25zLmRhdGFiYXNlKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRGF0YWJhc2UgaXMgbm90IHByb3ZpZGVkIG9yIGl0J3MgYW4gYWRhcHRlci4gTWlncmF0aW9ucyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCBhIGRhdGFiYXNlIGluc3RhbmNlLlwiKTtcblx0XHRjb25zdCB7IHJ1bk1pZ3JhdGlvbnMgfSA9IGF3YWl0IGdldE1pZ3JhdGlvbnMob3B0aW9ucyk7XG5cdFx0YXdhaXQgcnVuTWlncmF0aW9ucygpO1xuXHR9O1xuXHRyZXR1cm4gY3R4O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpbml0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/init.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/cookie-utils.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* binding */ HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* binding */ SECURE_COOKIE_PREFIX),\n/* harmony export */   parseSetCookieHeader: () => (/* binding */ parseSetCookieHeader),\n/* harmony export */   setCookieToHeader: () => (/* binding */ setCookieToHeader),\n/* harmony export */   splitSetCookieHeader: () => (/* binding */ splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* binding */ stripSecureCookiePrefix)\n/* harmony export */ });\n//#region src/cookies/cookie-utils.ts\nconst SECURE_COOKIE_PREFIX = \"__Secure-\";\nconst HOST_COOKIE_PREFIX = \"__Host-\";\n/**\n* Remove __Secure- or __Host- prefix from cookie name.\n*/\nfunction stripSecureCookiePrefix(cookieName) {\n\tif (cookieName.startsWith(SECURE_COOKIE_PREFIX)) return cookieName.slice(9);\n\tif (cookieName.startsWith(HOST_COOKIE_PREFIX)) return cookieName.slice(7);\n\treturn cookieName;\n}\n/**\n* Split `Set-Cookie` header, handling commas in `Expires` dates.\n*/\nfunction splitSetCookieHeader(setCookie) {\n\tif (!setCookie) return [];\n\tconst result = [];\n\tlet current = \"\";\n\tlet i = 0;\n\twhile (i < setCookie.length) {\n\t\tconst c = setCookie[i];\n\t\tif (c === \",\") {\n\t\t\tconst lower = current.toLowerCase();\n\t\t\tif (lower.includes(\"expires=\") && !lower.includes(\"gmt\")) {\n\t\t\t\tcurrent += c;\n\t\t\t\ti++;\n\t\t\t} else {\n\t\t\t\tconst trimmed$1 = current.trim();\n\t\t\t\tif (trimmed$1) result.push(trimmed$1);\n\t\t\t\tcurrent = \"\";\n\t\t\t\ti++;\n\t\t\t\tif (i < setCookie.length && setCookie[i] === \" \") i++;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tcurrent += c;\n\t\ti++;\n\t}\n\tconst trimmed = current.trim();\n\tif (trimmed) result.push(trimmed);\n\treturn result;\n}\nfunction parseSetCookieHeader(setCookie) {\n\tconst cookies = /* @__PURE__ */ new Map();\n\tsplitSetCookieHeader(setCookie).forEach((cookieString) => {\n\t\tconst [nameValue, ...attributes] = cookieString.split(\";\").map((part) => part.trim());\n\t\tconst [name, ...valueParts] = (nameValue || \"\").split(\"=\");\n\t\tconst value = valueParts.join(\"=\");\n\t\tif (!name || value === void 0) return;\n\t\tconst attrObj = { value };\n\t\tattributes.forEach((attribute) => {\n\t\t\tconst [attrName, ...attrValueParts] = attribute.split(\"=\");\n\t\t\tconst attrValue = attrValueParts.join(\"=\");\n\t\t\tconst normalizedAttrName = attrName.trim().toLowerCase();\n\t\t\tswitch (normalizedAttrName) {\n\t\t\t\tcase \"max-age\":\n\t\t\t\t\tattrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expires\":\n\t\t\t\t\tattrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"domain\":\n\t\t\t\t\tattrObj.domain = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"path\":\n\t\t\t\t\tattrObj.path = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"secure\":\n\t\t\t\t\tattrObj.secure = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"httponly\":\n\t\t\t\t\tattrObj.httponly = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"samesite\":\n\t\t\t\t\tattrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tattrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tcookies.set(name, attrObj);\n\t});\n\treturn cookies;\n}\nfunction setCookieToHeader(headers) {\n\treturn (context) => {\n\t\tconst setCookieHeader = context.response.headers.get(\"set-cookie\");\n\t\tif (!setCookieHeader) return;\n\t\tconst cookieMap = /* @__PURE__ */ new Map();\n\t\t(headers.get(\"cookie\") || \"\").split(\";\").forEach((cookie) => {\n\t\t\tconst [name, ...rest] = cookie.trim().split(\"=\");\n\t\t\tif (name && rest.length > 0) cookieMap.set(name, rest.join(\"=\"));\n\t\t});\n\t\tparseSetCookieHeader(setCookieHeader).forEach((value, name) => {\n\t\t\tcookieMap.set(name, value.value);\n\t\t});\n\t\tconst updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n\t\theaders.set(\"cookie\", updatedCookies);\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=cookie-utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL2Nvb2tpZS11dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsbUZBQW1GLEtBQUssR0FBRyxNQUFNLFdBQVc7QUFDNUc7QUFDQTtBQUNBOztBQUVBO0FBQzRJO0FBQzVJIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY29va2llc1xcY29va2llLXV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2Nvb2tpZXMvY29va2llLXV0aWxzLnRzXG5jb25zdCBTRUNVUkVfQ09PS0lFX1BSRUZJWCA9IFwiX19TZWN1cmUtXCI7XG5jb25zdCBIT1NUX0NPT0tJRV9QUkVGSVggPSBcIl9fSG9zdC1cIjtcbi8qKlxuKiBSZW1vdmUgX19TZWN1cmUtIG9yIF9fSG9zdC0gcHJlZml4IGZyb20gY29va2llIG5hbWUuXG4qL1xuZnVuY3Rpb24gc3RyaXBTZWN1cmVDb29raWVQcmVmaXgoY29va2llTmFtZSkge1xuXHRpZiAoY29va2llTmFtZS5zdGFydHNXaXRoKFNFQ1VSRV9DT09LSUVfUFJFRklYKSkgcmV0dXJuIGNvb2tpZU5hbWUuc2xpY2UoOSk7XG5cdGlmIChjb29raWVOYW1lLnN0YXJ0c1dpdGgoSE9TVF9DT09LSUVfUFJFRklYKSkgcmV0dXJuIGNvb2tpZU5hbWUuc2xpY2UoNyk7XG5cdHJldHVybiBjb29raWVOYW1lO1xufVxuLyoqXG4qIFNwbGl0IGBTZXQtQ29va2llYCBoZWFkZXIsIGhhbmRsaW5nIGNvbW1hcyBpbiBgRXhwaXJlc2AgZGF0ZXMuXG4qL1xuZnVuY3Rpb24gc3BsaXRTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKSB7XG5cdGlmICghc2V0Q29va2llKSByZXR1cm4gW107XG5cdGNvbnN0IHJlc3VsdCA9IFtdO1xuXHRsZXQgY3VycmVudCA9IFwiXCI7XG5cdGxldCBpID0gMDtcblx0d2hpbGUgKGkgPCBzZXRDb29raWUubGVuZ3RoKSB7XG5cdFx0Y29uc3QgYyA9IHNldENvb2tpZVtpXTtcblx0XHRpZiAoYyA9PT0gXCIsXCIpIHtcblx0XHRcdGNvbnN0IGxvd2VyID0gY3VycmVudC50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0aWYgKGxvd2VyLmluY2x1ZGVzKFwiZXhwaXJlcz1cIikgJiYgIWxvd2VyLmluY2x1ZGVzKFwiZ210XCIpKSB7XG5cdFx0XHRcdGN1cnJlbnQgKz0gYztcblx0XHRcdFx0aSsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgdHJpbW1lZCQxID0gY3VycmVudC50cmltKCk7XG5cdFx0XHRcdGlmICh0cmltbWVkJDEpIHJlc3VsdC5wdXNoKHRyaW1tZWQkMSk7XG5cdFx0XHRcdGN1cnJlbnQgPSBcIlwiO1xuXHRcdFx0XHRpKys7XG5cdFx0XHRcdGlmIChpIDwgc2V0Q29va2llLmxlbmd0aCAmJiBzZXRDb29raWVbaV0gPT09IFwiIFwiKSBpKys7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Y3VycmVudCArPSBjO1xuXHRcdGkrKztcblx0fVxuXHRjb25zdCB0cmltbWVkID0gY3VycmVudC50cmltKCk7XG5cdGlmICh0cmltbWVkKSByZXN1bHQucHVzaCh0cmltbWVkKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBhcnNlU2V0Q29va2llSGVhZGVyKHNldENvb2tpZSkge1xuXHRjb25zdCBjb29raWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0c3BsaXRTZXRDb29raWVIZWFkZXIoc2V0Q29va2llKS5mb3JFYWNoKChjb29raWVTdHJpbmcpID0+IHtcblx0XHRjb25zdCBbbmFtZVZhbHVlLCAuLi5hdHRyaWJ1dGVzXSA9IGNvb2tpZVN0cmluZy5zcGxpdChcIjtcIikubWFwKChwYXJ0KSA9PiBwYXJ0LnRyaW0oKSk7XG5cdFx0Y29uc3QgW25hbWUsIC4uLnZhbHVlUGFydHNdID0gKG5hbWVWYWx1ZSB8fCBcIlwiKS5zcGxpdChcIj1cIik7XG5cdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHRcdGlmICghbmFtZSB8fCB2YWx1ZSA9PT0gdm9pZCAwKSByZXR1cm47XG5cdFx0Y29uc3QgYXR0ck9iaiA9IHsgdmFsdWUgfTtcblx0XHRhdHRyaWJ1dGVzLmZvckVhY2goKGF0dHJpYnV0ZSkgPT4ge1xuXHRcdFx0Y29uc3QgW2F0dHJOYW1lLCAuLi5hdHRyVmFsdWVQYXJ0c10gPSBhdHRyaWJ1dGUuc3BsaXQoXCI9XCIpO1xuXHRcdFx0Y29uc3QgYXR0clZhbHVlID0gYXR0clZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkQXR0ck5hbWUgPSBhdHRyTmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHN3aXRjaCAobm9ybWFsaXplZEF0dHJOYW1lKSB7XG5cdFx0XHRcdGNhc2UgXCJtYXgtYWdlXCI6XG5cdFx0XHRcdFx0YXR0ck9ialtcIm1heC1hZ2VcIl0gPSBhdHRyVmFsdWUgPyBwYXJzZUludChhdHRyVmFsdWUudHJpbSgpLCAxMCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJleHBpcmVzXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5leHBpcmVzID0gYXR0clZhbHVlID8gbmV3IERhdGUoYXR0clZhbHVlLnRyaW0oKSkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkb21haW5cIjpcblx0XHRcdFx0XHRhdHRyT2JqLmRvbWFpbiA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJwYXRoXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5wYXRoID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInNlY3VyZVwiOlxuXHRcdFx0XHRcdGF0dHJPYmouc2VjdXJlID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImh0dHBvbmx5XCI6XG5cdFx0XHRcdFx0YXR0ck9iai5odHRwb25seSA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzYW1lc2l0ZVwiOlxuXHRcdFx0XHRcdGF0dHJPYmouc2FtZXNpdGUgPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YXR0ck9ialtub3JtYWxpemVkQXR0ck5hbWVdID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKSA6IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29va2llcy5zZXQobmFtZSwgYXR0ck9iaik7XG5cdH0pO1xuXHRyZXR1cm4gY29va2llcztcbn1cbmZ1bmN0aW9uIHNldENvb2tpZVRvSGVhZGVyKGhlYWRlcnMpIHtcblx0cmV0dXJuIChjb250ZXh0KSA9PiB7XG5cdFx0Y29uc3Qgc2V0Q29va2llSGVhZGVyID0gY29udGV4dC5yZXNwb25zZS5oZWFkZXJzLmdldChcInNldC1jb29raWVcIik7XG5cdFx0aWYgKCFzZXRDb29raWVIZWFkZXIpIHJldHVybjtcblx0XHRjb25zdCBjb29raWVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdChoZWFkZXJzLmdldChcImNvb2tpZVwiKSB8fCBcIlwiKS5zcGxpdChcIjtcIikuZm9yRWFjaCgoY29va2llKSA9PiB7XG5cdFx0XHRjb25zdCBbbmFtZSwgLi4ucmVzdF0gPSBjb29raWUudHJpbSgpLnNwbGl0KFwiPVwiKTtcblx0XHRcdGlmIChuYW1lICYmIHJlc3QubGVuZ3RoID4gMCkgY29va2llTWFwLnNldChuYW1lLCByZXN0LmpvaW4oXCI9XCIpKTtcblx0XHR9KTtcblx0XHRwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWVIZWFkZXIpLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XG5cdFx0XHRjb29raWVNYXAuc2V0KG5hbWUsIHZhbHVlLnZhbHVlKTtcblx0XHR9KTtcblx0XHRjb25zdCB1cGRhdGVkQ29va2llcyA9IEFycmF5LmZyb20oY29va2llTWFwLmVudHJpZXMoKSkubWFwKChbbmFtZSwgdmFsdWVdKSA9PiBgJHtuYW1lfT0ke3ZhbHVlfWApLmpvaW4oXCI7IFwiKTtcblx0XHRoZWFkZXJzLnNldChcImNvb2tpZVwiLCB1cGRhdGVkQ29va2llcyk7XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZVRvSGVhZGVyLCBzcGxpdFNldENvb2tpZUhlYWRlciwgc3RyaXBTZWN1cmVDb29raWVQcmVmaXggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvb2tpZS11dGlscy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/index.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/index.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX),\n/* harmony export */   createCookieGetter: () => (/* binding */ createCookieGetter),\n/* harmony export */   createSessionStore: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore),\n/* harmony export */   deleteSessionCookie: () => (/* binding */ deleteSessionCookie),\n/* harmony export */   expireCookie: () => (/* binding */ expireCookie),\n/* harmony export */   getChunkedCookie: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getChunkedCookie),\n/* harmony export */   getCookieCache: () => (/* binding */ getCookieCache),\n/* harmony export */   getCookies: () => (/* binding */ getCookies),\n/* harmony export */   getSessionCookie: () => (/* binding */ getSessionCookie),\n/* harmony export */   parseCookies: () => (/* binding */ parseCookies),\n/* harmony export */   parseSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.parseSetCookieHeader),\n/* harmony export */   setCookieCache: () => (/* binding */ setCookieCache),\n/* harmony export */   setCookieToHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieToHeader),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   splitSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.splitSetCookieHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.stripSecureCookiePrefix)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/time.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/cookies/index.ts\nfunction createCookieGetter(options) {\n\tconst secureCookiePrefix = (options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL ? options.baseURL.startsWith(\"https://\") ? true : false : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction) ? _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX : \"\";\n\tconst crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n\tconst domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n\tif (crossSubdomainEnabled && !domain) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"baseURL is required when crossSubdomainCookies are enabled\");\n\tfunction createCookie(cookieName, overrideAttributes = {}) {\n\t\tconst prefix = options.advanced?.cookiePrefix || \"better-auth\";\n\t\tconst name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n\t\tconst attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n\t\treturn {\n\t\t\tname: `${secureCookiePrefix}${name}`,\n\t\t\tattributes: {\n\t\t\t\tsecure: !!secureCookiePrefix,\n\t\t\t\tsameSite: \"lax\",\n\t\t\t\tpath: \"/\",\n\t\t\t\thttpOnly: true,\n\t\t\t\t...crossSubdomainEnabled ? { domain } : {},\n\t\t\t\t...options.advanced?.defaultCookieAttributes,\n\t\t\t\t...overrideAttributes,\n\t\t\t\t...attributes\n\t\t\t}\n\t\t};\n\t}\n\treturn createCookie;\n}\nfunction getCookies(options) {\n\tconst createCookie = createCookieGetter(options);\n\tconst sessionToken = createCookie(\"session_token\", { maxAge: options.session?.expiresIn || (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_5__.sec)(\"7d\") });\n\tconst sessionData = createCookie(\"session_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst accountData = createCookie(\"account_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst dontRememberToken = createCookie(\"dont_remember\");\n\treturn {\n\t\tsessionToken: {\n\t\t\tname: sessionToken.name,\n\t\t\tattributes: sessionToken.attributes\n\t\t},\n\t\tsessionData: {\n\t\t\tname: sessionData.name,\n\t\t\tattributes: sessionData.attributes\n\t\t},\n\t\tdontRememberToken: {\n\t\t\tname: dontRememberToken.name,\n\t\t\tattributes: dontRememberToken.attributes\n\t\t},\n\t\taccountData: {\n\t\t\tname: accountData.name,\n\t\t\tattributes: accountData.attributes\n\t\t}\n\t};\n}\nasync function setCookieCache(ctx, session, dontRememberMe) {\n\tif (!ctx.context.options.session?.cookieCache?.enabled) return;\n\tconst filteredSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.filterOutputFields)(session.session, ctx.context.options.session?.additionalFields);\n\tconst filteredUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\tlet version = \"1\";\n\tif (versionConfig) {\n\t\tif (typeof versionConfig === \"string\") version = versionConfig;\n\t\telse if (typeof versionConfig === \"function\") {\n\t\t\tconst result = versionConfig(session.session, session.user);\n\t\t\tversion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t}\n\t}\n\tconst sessionData = {\n\t\tsession: filteredSession,\n\t\tuser: filteredUser,\n\t\tupdatedAt: Date.now(),\n\t\tversion\n\t};\n\tconst options = {\n\t\t...ctx.context.authCookies.sessionData.attributes,\n\t\tmaxAge: dontRememberMe ? void 0 : ctx.context.authCookies.sessionData.attributes.maxAge\n\t};\n\tconst expiresAtDate = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(options.maxAge || 60, \"sec\").getTime();\n\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\tlet data;\n\tif (strategy === \"jwe\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncodeJWT)(sessionData, ctx.context.secret, \"better-auth-session\", options.maxAge || 300);\n\telse if (strategy === \"jwt\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.signJWT)(sessionData, ctx.context.secret, options.maxAge || 300);\n\telse data = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.encode(JSON.stringify({\n\t\tsession: sessionData,\n\t\texpiresAt: expiresAtDate,\n\t\tsignature: await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, JSON.stringify({\n\t\t\t...sessionData,\n\t\t\texpiresAt: expiresAtDate\n\t\t}))\n\t}), { padding: false });\n\tif (data.length > 4093) {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tconst cookies = sessionStore.chunk(data, options);\n\t\tsessionStore.setCookies(cookies);\n\t} else {\n\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\tif (sessionStore.hasChunks()) {\n\t\t\tconst cleanCookies = sessionStore.clean();\n\t\t\tsessionStore.setCookies(cleanCookies);\n\t\t}\n\t\tctx.setCookie(ctx.context.authCookies.sessionData.name, data, options);\n\t}\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\tconst accountData = await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getAccountCookie)(ctx);\n\t\tif (accountData) await (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.setAccountCookie)(ctx, accountData);\n\t}\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\tdontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n\tconst options = ctx.context.authCookies.sessionToken.attributes;\n\tconst maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n\tawait ctx.setSignedCookie(ctx.context.authCookies.sessionToken.name, session.session.token, ctx.context.secret, {\n\t\t...options,\n\t\tmaxAge,\n\t\t...overrides\n\t});\n\tif (dontRememberMe) await ctx.setSignedCookie(ctx.context.authCookies.dontRememberToken.name, \"true\", ctx.context.secret, ctx.context.authCookies.dontRememberToken.attributes);\n\tawait setCookieCache(ctx, session, dontRememberMe);\n\tctx.context.setNewSession(session);\n}\n/**\n* Expires a cookie by setting `maxAge: 0` while preserving its attributes\n*/\nfunction expireCookie(ctx, cookie) {\n\tctx.setCookie(cookie.name, \"\", {\n\t\t...cookie.attributes,\n\t\tmaxAge: 0\n\t});\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n\texpireCookie(ctx, ctx.context.authCookies.sessionToken);\n\texpireCookie(ctx, ctx.context.authCookies.sessionData);\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\texpireCookie(ctx, ctx.context.authCookies.accountData);\n\t\tconst accountStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createAccountStore)(ctx.context.authCookies.accountData.name, ctx.context.authCookies.accountData.attributes, ctx);\n\t\tconst cleanCookies$1 = accountStore.clean();\n\t\taccountStore.setCookies(cleanCookies$1);\n\t}\n\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") expireCookie(ctx, ctx.context.createAuthCookie(\"oauth_state\"));\n\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, ctx.context.authCookies.sessionData.attributes, ctx);\n\tconst cleanCookies = sessionStore.clean();\n\tsessionStore.setCookies(cleanCookies);\n\tif (!skipDontRememberMe) expireCookie(ctx, ctx.context.authCookies.dontRememberToken);\n}\nfunction parseCookies(cookieHeader) {\n\tconst cookies = cookieHeader.split(\"; \");\n\tconst cookieMap = /* @__PURE__ */ new Map();\n\tcookies.forEach((cookie) => {\n\t\tconst [name, value] = cookie.split(/=(.*)/s);\n\t\tcookieMap.set(name, value);\n\t});\n\treturn cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n\tif (config?.cookiePrefix) if (config.cookieName) config.cookiePrefix = `${config.cookiePrefix}-`;\n\telse config.cookiePrefix = `${config.cookiePrefix}.`;\n\tconst cookies = (\"headers\" in request ? request.headers : request).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n\tconst name = `${cookiePrefix}${cookieName}`;\n\tconst secureCookieName = `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${name}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tconst sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n\tif (sessionToken) return sessionToken;\n\treturn null;\n};\nconst getCookieCache = async (request, config) => {\n\tconst cookies = (request instanceof Headers ? request : request.headers).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n\tconst name = config?.isSecure !== void 0 ? config.isSecure ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.isProduction ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tlet sessionData = parsedCookie.get(name);\n\tif (!sessionData) {\n\t\tconst chunks = [];\n\t\tfor (const [cookieName$1, value] of parsedCookie.entries()) if (cookieName$1.startsWith(name + \".\")) {\n\t\t\tconst parts = cookieName$1.split(\".\");\n\t\t\tconst indexStr = parts[parts.length - 1];\n\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\tif (!isNaN(index)) chunks.push({\n\t\t\t\tindex,\n\t\t\t\tvalue\n\t\t\t});\n\t\t}\n\t\tif (chunks.length > 0) {\n\t\t\tchunks.sort((a, b) => a.index - b.index);\n\t\t\tsessionData = chunks.map((c) => c.value).join(\"\");\n\t\t}\n\t}\n\tif (sessionData) {\n\t\tconst secret = config?.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_7__.env.BETTER_AUTH_SECRET;\n\t\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\");\n\t\tconst strategy = config?.strategy || \"compact\";\n\t\tif (strategy === \"jwe\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecodeJWT)(sessionData, secret, \"better-auth-session\");\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else if (strategy === \"jwt\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyJWT)(sessionData, secret);\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst sessionDataPayload = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_11__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_10__.base64Url.decode(sessionData)));\n\t\t\tif (!sessionDataPayload) return null;\n\t\t\tif (!await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_12__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(secret, JSON.stringify({\n\t\t\t\t...sessionDataPayload.session,\n\t\t\t\texpiresAt: sessionDataPayload.expiresAt\n\t\t\t}), sessionDataPayload.signature)) return null;\n\t\t\tif (config?.version && sessionDataPayload.session) {\n\t\t\t\tconst cookieVersion = sessionDataPayload.session.version || \"1\";\n\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\tconst result = config.version(sessionDataPayload.session.session, sessionDataPayload.session.user);\n\t\t\t\t\texpectedVersion = (0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_4__.isPromise)(result) ? await result : result;\n\t\t\t\t}\n\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t}\n\t\t\treturn sessionDataPayload.session;\n\t\t}\n\t}\n\treturn null;\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNEM7QUFDTztBQUM0QztBQUNvQztBQUMvRTtBQUNaO0FBQzhIO0FBQzVHO0FBQ0E7QUFDa0I7QUFDdEI7QUFDSDtBQUNFOztBQUVyRDtBQUNBO0FBQ0EsNExBQTRMLCtEQUFZLElBQUksbUVBQW9CO0FBQ2hPO0FBQ0E7QUFDQSxpREFBaUQsb0VBQWU7QUFDaEUsMERBQTBEO0FBQzFEO0FBQ0EsbUVBQW1FLE9BQU8sR0FBRyxXQUFXO0FBQ3hGO0FBQ0E7QUFDQSxZQUFZLG1CQUFtQixFQUFFLEtBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxTQUFTLElBQUk7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0NBQXNDLG9EQUFHLFFBQVE7QUFDdkcsb0RBQW9ELHFEQUFxRDtBQUN6RyxvREFBb0QscURBQXFEO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJFQUFrQjtBQUMzQyxzQkFBc0IsK0RBQWU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnRUFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQU87QUFDOUI7QUFDQTtBQUNBLHNDQUFzQyxtRUFBa0I7QUFDeEQsMkNBQTJDLHdEQUFPO0FBQ2xELGFBQWEsaUVBQVM7QUFDdEI7QUFDQTtBQUNBLG1CQUFtQixvRUFBVTtBQUM3QjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsS0FBSyxnQkFBZ0I7QUFDdkI7QUFDQSx1QkFBdUIsc0VBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsdUJBQXVCLHNFQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixvRUFBZ0I7QUFDNUMseUJBQXlCLG9FQUFnQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNFQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzRUFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0JBQW9CO0FBQy9GLCtCQUErQixvQkFBb0I7QUFDbkQ7QUFDQTtBQUNBLFNBQVMsOERBQThEO0FBQ3ZFLGlCQUFpQixhQUFhLEVBQUUsV0FBVztBQUMzQyw2QkFBNkIsbUVBQW9CLENBQUMsRUFBRSxLQUFLO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUE0RDtBQUNyRSxpRUFBaUUsbUVBQW9CLENBQUMsRUFBRSxhQUFhLEdBQUcsV0FBVyxPQUFPLGFBQWEsR0FBRyxXQUFXLElBQUksK0RBQVksTUFBTSxtRUFBb0IsQ0FBQyxFQUFFLGFBQWEsR0FBRyxXQUFXLE9BQU8sYUFBYSxHQUFHLFdBQVc7QUFDL1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzREFBRztBQUN0Qyx5QkFBeUIsb0VBQWU7QUFDeEM7QUFDQTtBQUNBLHlCQUF5QixtRUFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHlCQUF5QiwwREFBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRUFBUztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osOEJBQThCLHNFQUFhLENBQUMsOERBQU0sUUFBUSxpRUFBUztBQUNuRTtBQUNBLGNBQWMsb0VBQVU7QUFDeEI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0VBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN1VTtBQUN2VSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvb2tpZXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QsIHZlcmlmeUpXVCB9IGZyb20gXCIuLi9jcnlwdG8vand0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWNjb3VudFN0b3JlLCBjcmVhdGVTZXNzaW9uU3RvcmUsIGdldEFjY291bnRDb29raWUsIGdldENodW5rZWRDb29raWUsIHNldEFjY291bnRDb29raWUgfSBmcm9tIFwiLi9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2lzLXByb21pc2UubWpzXCI7XG5pbXBvcnQgeyBzZWMgfSBmcm9tIFwiLi4vdXRpbHMvdGltZS5tanNcIjtcbmltcG9ydCB7IEhPU1RfQ09PS0lFX1BSRUZJWCwgU0VDVVJFX0NPT0tJRV9QUkVGSVgsIHBhcnNlU2V0Q29va2llSGVhZGVyLCBzZXRDb29raWVUb0hlYWRlciwgc3BsaXRTZXRDb29raWVIZWFkZXIsIHN0cmlwU2VjdXJlQ29va2llUHJlZml4IH0gZnJvbSBcIi4vY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZW52LCBpc1Byb2R1Y3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGZpbHRlck91dHB1dEZpZWxkcywgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgYmFzZTY0VXJsIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iYXNlNjRcIjtcbmltcG9ydCB7IGJpbmFyeSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmluYXJ5XCI7XG5pbXBvcnQgeyBjcmVhdGVITUFDIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9obWFjXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29va2llcy9pbmRleC50c1xuZnVuY3Rpb24gY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpIHtcblx0Y29uc3Qgc2VjdXJlQ29va2llUHJlZml4ID0gKG9wdGlvbnMuYWR2YW5jZWQ/LnVzZVNlY3VyZUNvb2tpZXMgIT09IHZvaWQgMCA/IG9wdGlvbnMuYWR2YW5jZWQ/LnVzZVNlY3VyZUNvb2tpZXMgOiBvcHRpb25zLmJhc2VVUkwgPyBvcHRpb25zLmJhc2VVUkwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpID8gdHJ1ZSA6IGZhbHNlIDogaXNQcm9kdWN0aW9uKSA/IFNFQ1VSRV9DT09LSUVfUFJFRklYIDogXCJcIjtcblx0Y29uc3QgY3Jvc3NTdWJkb21haW5FbmFibGVkID0gISFvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmVuYWJsZWQ7XG5cdGNvbnN0IGRvbWFpbiA9IGNyb3NzU3ViZG9tYWluRW5hYmxlZCA/IG9wdGlvbnMuYWR2YW5jZWQ/LmNyb3NzU3ViRG9tYWluQ29va2llcz8uZG9tYWluIHx8IChvcHRpb25zLmJhc2VVUkwgPyBuZXcgVVJMKG9wdGlvbnMuYmFzZVVSTCkuaG9zdG5hbWUgOiB2b2lkIDApIDogdm9pZCAwO1xuXHRpZiAoY3Jvc3NTdWJkb21haW5FbmFibGVkICYmICFkb21haW4pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJiYXNlVVJMIGlzIHJlcXVpcmVkIHdoZW4gY3Jvc3NTdWJkb21haW5Db29raWVzIGFyZSBlbmFibGVkXCIpO1xuXHRmdW5jdGlvbiBjcmVhdGVDb29raWUoY29va2llTmFtZSwgb3ZlcnJpZGVBdHRyaWJ1dGVzID0ge30pIHtcblx0XHRjb25zdCBwcmVmaXggPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVQcmVmaXggfHwgXCJiZXR0ZXItYXV0aFwiO1xuXHRcdGNvbnN0IG5hbWUgPSBvcHRpb25zLmFkdmFuY2VkPy5jb29raWVzPy5bY29va2llTmFtZV0/Lm5hbWUgfHwgYCR7cHJlZml4fS4ke2Nvb2tpZU5hbWV9YDtcblx0XHRjb25zdCBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hZHZhbmNlZD8uY29va2llcz8uW2Nvb2tpZU5hbWVdPy5hdHRyaWJ1dGVzO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBgJHtzZWN1cmVDb29raWVQcmVmaXh9JHtuYW1lfWAsXG5cdFx0XHRhdHRyaWJ1dGVzOiB7XG5cdFx0XHRcdHNlY3VyZTogISFzZWN1cmVDb29raWVQcmVmaXgsXG5cdFx0XHRcdHNhbWVTaXRlOiBcImxheFwiLFxuXHRcdFx0XHRwYXRoOiBcIi9cIixcblx0XHRcdFx0aHR0cE9ubHk6IHRydWUsXG5cdFx0XHRcdC4uLmNyb3NzU3ViZG9tYWluRW5hYmxlZCA/IHsgZG9tYWluIH0gOiB7fSxcblx0XHRcdFx0Li4ub3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXMsXG5cdFx0XHRcdC4uLm92ZXJyaWRlQXR0cmlidXRlcyxcblx0XHRcdFx0Li4uYXR0cmlidXRlc1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIGNyZWF0ZUNvb2tpZTtcbn1cbmZ1bmN0aW9uIGdldENvb2tpZXMob3B0aW9ucykge1xuXHRjb25zdCBjcmVhdGVDb29raWUgPSBjcmVhdGVDb29raWVHZXR0ZXIob3B0aW9ucyk7XG5cdGNvbnN0IHNlc3Npb25Ub2tlbiA9IGNyZWF0ZUNvb2tpZShcInNlc3Npb25fdG9rZW5cIiwgeyBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IHNlYyhcIjdkXCIpIH0pO1xuXHRjb25zdCBzZXNzaW9uRGF0YSA9IGNyZWF0ZUNvb2tpZShcInNlc3Npb25fZGF0YVwiLCB7IG1heEFnZTogb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMCB9KTtcblx0Y29uc3QgYWNjb3VudERhdGEgPSBjcmVhdGVDb29raWUoXCJhY2NvdW50X2RhdGFcIiwgeyBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCAzMDAgfSk7XG5cdGNvbnN0IGRvbnRSZW1lbWJlclRva2VuID0gY3JlYXRlQ29va2llKFwiZG9udF9yZW1lbWJlclwiKTtcblx0cmV0dXJuIHtcblx0XHRzZXNzaW9uVG9rZW46IHtcblx0XHRcdG5hbWU6IHNlc3Npb25Ub2tlbi5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXNcblx0XHR9LFxuXHRcdHNlc3Npb25EYXRhOiB7XG5cdFx0XHRuYW1lOiBzZXNzaW9uRGF0YS5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogc2Vzc2lvbkRhdGEuYXR0cmlidXRlc1xuXHRcdH0sXG5cdFx0ZG9udFJlbWVtYmVyVG9rZW46IHtcblx0XHRcdG5hbWU6IGRvbnRSZW1lbWJlclRva2VuLm5hbWUsXG5cdFx0XHRhdHRyaWJ1dGVzOiBkb250UmVtZW1iZXJUb2tlbi5hdHRyaWJ1dGVzXG5cdFx0fSxcblx0XHRhY2NvdW50RGF0YToge1xuXHRcdFx0bmFtZTogYWNjb3VudERhdGEubmFtZSxcblx0XHRcdGF0dHJpYnV0ZXM6IGFjY291bnREYXRhLmF0dHJpYnV0ZXNcblx0XHR9XG5cdH07XG59XG5hc3luYyBmdW5jdGlvbiBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lKSB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCkgcmV0dXJuO1xuXHRjb25zdCBmaWx0ZXJlZFNlc3Npb24gPSBmaWx0ZXJPdXRwdXRGaWVsZHMoc2Vzc2lvbi5zZXNzaW9uLCBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmFkZGl0aW9uYWxGaWVsZHMpO1xuXHRjb25zdCBmaWx0ZXJlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0Y29uc3QgdmVyc2lvbkNvbmZpZyA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnZlcnNpb247XG5cdGxldCB2ZXJzaW9uID0gXCIxXCI7XG5cdGlmICh2ZXJzaW9uQ29uZmlnKSB7XG5cdFx0aWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcInN0cmluZ1wiKSB2ZXJzaW9uID0gdmVyc2lvbkNvbmZpZztcblx0XHRlbHNlIGlmICh0eXBlb2YgdmVyc2lvbkNvbmZpZyA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSB2ZXJzaW9uQ29uZmlnKHNlc3Npb24uc2Vzc2lvbiwgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHZlcnNpb24gPSBpc1Byb21pc2UocmVzdWx0KSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHR9XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG5cdFx0c2Vzc2lvbjogZmlsdGVyZWRTZXNzaW9uLFxuXHRcdHVzZXI6IGZpbHRlcmVkVXNlcixcblx0XHR1cGRhdGVkQXQ6IERhdGUubm93KCksXG5cdFx0dmVyc2lvblxuXHR9O1xuXHRjb25zdCBvcHRpb25zID0ge1xuXHRcdC4uLmN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMsXG5cdFx0bWF4QWdlOiBkb250UmVtZW1iZXJNZSA/IHZvaWQgMCA6IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMubWF4QWdlXG5cdH07XG5cdGNvbnN0IGV4cGlyZXNBdERhdGUgPSBnZXREYXRlKG9wdGlvbnMubWF4QWdlIHx8IDYwLCBcInNlY1wiKS5nZXRUaW1lKCk7XG5cdGNvbnN0IHN0cmF0ZWd5ID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdGxldCBkYXRhO1xuXHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1Qoc2Vzc2lvbkRhdGEsIGN0eC5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIsIG9wdGlvbnMubWF4QWdlIHx8IDMwMCk7XG5cdGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSBkYXRhID0gYXdhaXQgc2lnbkpXVChzZXNzaW9uRGF0YSwgY3R4LmNvbnRleHQuc2VjcmV0LCBvcHRpb25zLm1heEFnZSB8fCAzMDApO1xuXHRlbHNlIGRhdGEgPSBiYXNlNjRVcmwuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRzZXNzaW9uOiBzZXNzaW9uRGF0YSxcblx0XHRleHBpcmVzQXQ6IGV4cGlyZXNBdERhdGUsXG5cdFx0c2lnbmF0dXJlOiBhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnNpZ24oY3R4LmNvbnRleHQuc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHQuLi5zZXNzaW9uRGF0YSxcblx0XHRcdGV4cGlyZXNBdDogZXhwaXJlc0F0RGF0ZVxuXHRcdH0pKVxuXHR9KSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcblx0aWYgKGRhdGEubGVuZ3RoID4gNDA5Mykge1xuXHRcdGNvbnN0IHNlc3Npb25TdG9yZSA9IGNyZWF0ZVNlc3Npb25TdG9yZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lLCBvcHRpb25zLCBjdHgpO1xuXHRcdGNvbnN0IGNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsoZGF0YSwgb3B0aW9ucyk7XG5cdFx0c2Vzc2lvblN0b3JlLnNldENvb2tpZXMoY29va2llcyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3Qgc2Vzc2lvblN0b3JlID0gY3JlYXRlU2Vzc2lvblN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIG9wdGlvbnMsIGN0eCk7XG5cdFx0aWYgKHNlc3Npb25TdG9yZS5oYXNDaHVua3MoKSkge1xuXHRcdFx0Y29uc3QgY2xlYW5Db29raWVzID0gc2Vzc2lvblN0b3JlLmNsZWFuKCk7XG5cdFx0XHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdH1cblx0XHRjdHguc2V0Q29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIGRhdGEsIG9wdGlvbnMpO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRcdGlmIChhY2NvdW50RGF0YSkgYXdhaXQgc2V0QWNjb3VudENvb2tpZShjdHgsIGFjY291bnREYXRhKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lLCBvdmVycmlkZXMpIHtcblx0Y29uc3QgZG9udFJlbWVtYmVyTWVDb29raWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdGRvbnRSZW1lbWJlck1lID0gZG9udFJlbWVtYmVyTWUgIT09IHZvaWQgMCA/IGRvbnRSZW1lbWJlck1lIDogISFkb250UmVtZW1iZXJNZUNvb2tpZTtcblx0Y29uc3Qgb3B0aW9ucyA9IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5hdHRyaWJ1dGVzO1xuXHRjb25zdCBtYXhBZ2UgPSBkb250UmVtZW1iZXJNZSA/IHZvaWQgMCA6IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZXhwaXJlc0luO1xuXHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBzZXNzaW9uLnNlc3Npb24udG9rZW4sIGN0eC5jb250ZXh0LnNlY3JldCwge1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0bWF4QWdlLFxuXHRcdC4uLm92ZXJyaWRlc1xuXHR9KTtcblx0aWYgKGRvbnRSZW1lbWJlck1lKSBhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIFwidHJ1ZVwiLCBjdHguY29udGV4dC5zZWNyZXQsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLmF0dHJpYnV0ZXMpO1xuXHRhd2FpdCBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sIGRvbnRSZW1lbWJlck1lKTtcblx0Y3R4LmNvbnRleHQuc2V0TmV3U2Vzc2lvbihzZXNzaW9uKTtcbn1cbi8qKlxuKiBFeHBpcmVzIGEgY29va2llIGJ5IHNldHRpbmcgYG1heEFnZTogMGAgd2hpbGUgcHJlc2VydmluZyBpdHMgYXR0cmlidXRlc1xuKi9cbmZ1bmN0aW9uIGV4cGlyZUNvb2tpZShjdHgsIGNvb2tpZSkge1xuXHRjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBcIlwiLCB7XG5cdFx0Li4uY29va2llLmF0dHJpYnV0ZXMsXG5cdFx0bWF4QWdlOiAwXG5cdH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgsIHNraXBEb250UmVtZW1iZXJNZSkge1xuXHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4pO1xuXHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhKTtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuYWNjb3VudERhdGEubmFtZSwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuYWNjb3VudERhdGEuYXR0cmlidXRlcywgY3R4KTtcblx0XHRjb25zdCBjbGVhbkNvb2tpZXMkMSA9IGFjY291bnRTdG9yZS5jbGVhbigpO1xuXHRcdGFjY291bnRTdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyQxKTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5ID09PSBcImNvb2tpZVwiKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFwib2F1dGhfc3RhdGVcIikpO1xuXHRjb25zdCBzZXNzaW9uU3RvcmUgPSBjcmVhdGVTZXNzaW9uU3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEuYXR0cmlidXRlcywgY3R4KTtcblx0Y29uc3QgY2xlYW5Db29raWVzID0gc2Vzc2lvblN0b3JlLmNsZWFuKCk7XG5cdHNlc3Npb25TdG9yZS5zZXRDb29raWVzKGNsZWFuQ29va2llcyk7XG5cdGlmICghc2tpcERvbnRSZW1lbWJlck1lKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbik7XG59XG5mdW5jdGlvbiBwYXJzZUNvb2tpZXMoY29va2llSGVhZGVyKSB7XG5cdGNvbnN0IGNvb2tpZXMgPSBjb29raWVIZWFkZXIuc3BsaXQoXCI7IFwiKTtcblx0Y29uc3QgY29va2llTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0Y29va2llcy5mb3JFYWNoKChjb29raWUpID0+IHtcblx0XHRjb25zdCBbbmFtZSwgdmFsdWVdID0gY29va2llLnNwbGl0KC89KC4qKS9zKTtcblx0XHRjb29raWVNYXAuc2V0KG5hbWUsIHZhbHVlKTtcblx0fSk7XG5cdHJldHVybiBjb29raWVNYXA7XG59XG5jb25zdCBnZXRTZXNzaW9uQ29va2llID0gKHJlcXVlc3QsIGNvbmZpZykgPT4ge1xuXHRpZiAoY29uZmlnPy5jb29raWVQcmVmaXgpIGlmIChjb25maWcuY29va2llTmFtZSkgY29uZmlnLmNvb2tpZVByZWZpeCA9IGAke2NvbmZpZy5jb29raWVQcmVmaXh9LWA7XG5cdGVsc2UgY29uZmlnLmNvb2tpZVByZWZpeCA9IGAke2NvbmZpZy5jb29raWVQcmVmaXh9LmA7XG5cdGNvbnN0IGNvb2tpZXMgPSAoXCJoZWFkZXJzXCIgaW4gcmVxdWVzdCA/IHJlcXVlc3QuaGVhZGVycyA6IHJlcXVlc3QpLmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVzKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgeyBjb29raWVOYW1lID0gXCJzZXNzaW9uX3Rva2VuXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGguXCIgfSA9IGNvbmZpZyB8fCB7fTtcblx0Y29uc3QgbmFtZSA9IGAke2Nvb2tpZVByZWZpeH0ke2Nvb2tpZU5hbWV9YDtcblx0Y29uc3Qgc2VjdXJlQ29va2llTmFtZSA9IGAke1NFQ1VSRV9DT09LSUVfUFJFRklYfSR7bmFtZX1gO1xuXHRjb25zdCBwYXJzZWRDb29raWUgPSBwYXJzZUNvb2tpZXMoY29va2llcyk7XG5cdGNvbnN0IHNlc3Npb25Ub2tlbiA9IHBhcnNlZENvb2tpZS5nZXQobmFtZSkgfHwgcGFyc2VkQ29va2llLmdldChzZWN1cmVDb29raWVOYW1lKTtcblx0aWYgKHNlc3Npb25Ub2tlbikgcmV0dXJuIHNlc3Npb25Ub2tlbjtcblx0cmV0dXJuIG51bGw7XG59O1xuY29uc3QgZ2V0Q29va2llQ2FjaGUgPSBhc3luYyAocmVxdWVzdCwgY29uZmlnKSA9PiB7XG5cdGNvbnN0IGNvb2tpZXMgPSAocmVxdWVzdCBpbnN0YW5jZW9mIEhlYWRlcnMgPyByZXF1ZXN0IDogcmVxdWVzdC5oZWFkZXJzKS5nZXQoXCJjb29raWVcIik7XG5cdGlmICghY29va2llcykgcmV0dXJuIG51bGw7XG5cdGNvbnN0IHsgY29va2llTmFtZSA9IFwic2Vzc2lvbl9kYXRhXCIsIGNvb2tpZVByZWZpeCA9IFwiYmV0dGVyLWF1dGhcIiB9ID0gY29uZmlnIHx8IHt9O1xuXHRjb25zdCBuYW1lID0gY29uZmlnPy5pc1NlY3VyZSAhPT0gdm9pZCAwID8gY29uZmlnLmlzU2VjdXJlID8gYCR7U0VDVVJFX0NPT0tJRV9QUkVGSVh9JHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gIDogYCR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGlzUHJvZHVjdGlvbiA/IGAke1NFQ1VSRV9DT09LSUVfUFJFRklYfSR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGAke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWA7XG5cdGNvbnN0IHBhcnNlZENvb2tpZSA9IHBhcnNlQ29va2llcyhjb29raWVzKTtcblx0bGV0IHNlc3Npb25EYXRhID0gcGFyc2VkQ29va2llLmdldChuYW1lKTtcblx0aWYgKCFzZXNzaW9uRGF0YSkge1xuXHRcdGNvbnN0IGNodW5rcyA9IFtdO1xuXHRcdGZvciAoY29uc3QgW2Nvb2tpZU5hbWUkMSwgdmFsdWVdIG9mIHBhcnNlZENvb2tpZS5lbnRyaWVzKCkpIGlmIChjb29raWVOYW1lJDEuc3RhcnRzV2l0aChuYW1lICsgXCIuXCIpKSB7XG5cdFx0XHRjb25zdCBwYXJ0cyA9IGNvb2tpZU5hbWUkMS5zcGxpdChcIi5cIik7XG5cdFx0XHRjb25zdCBpbmRleFN0ciA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRcdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciB8fCBcIjBcIiwgMTApO1xuXHRcdFx0aWYgKCFpc05hTihpbmRleCkpIGNodW5rcy5wdXNoKHtcblx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdHZhbHVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKGNodW5rcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjaHVua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXHRcdFx0c2Vzc2lvbkRhdGEgPSBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKFwiXCIpO1xuXHRcdH1cblx0fVxuXHRpZiAoc2Vzc2lvbkRhdGEpIHtcblx0XHRjb25zdCBzZWNyZXQgPSBjb25maWc/LnNlY3JldCB8fCBlbnYuQkVUVEVSX0FVVEhfU0VDUkVUO1xuXHRcdGlmICghc2VjcmV0KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiZ2V0Q29va2llQ2FjaGUgcmVxdWlyZXMgYSBzZWNyZXQgdG8gYmUgcHJvdmlkZWQuIEVpdGhlciBwYXNzIGl0IGFzIGFuIG9wdGlvbiBvciBzZXQgdGhlIEJFVFRFUl9BVVRIX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZVwiKTtcblx0XHRjb25zdCBzdHJhdGVneSA9IGNvbmZpZz8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdFx0aWYgKHN0cmF0ZWd5ID09PSBcImp3ZVwiKSB7XG5cdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgc3ltbWV0cmljRGVjb2RlSldUKHNlc3Npb25EYXRhLCBzZWNyZXQsIFwiYmV0dGVyLWF1dGgtc2Vzc2lvblwiKTtcblx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHtcblx0XHRcdFx0aWYgKGNvbmZpZz8udmVyc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IGNvb2tpZVZlcnNpb24gPSBwYXlsb2FkLnZlcnNpb24gfHwgXCIxXCI7XG5cdFx0XHRcdFx0bGV0IGV4cGVjdGVkVmVyc2lvbiA9IFwiMVwiO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuXHRcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBjb25maWcudmVyc2lvbihwYXlsb2FkLnNlc3Npb24sIHBheWxvYWQudXNlcik7XG5cdFx0XHRcdFx0XHRleHBlY3RlZFZlcnNpb24gPSBpc1Byb21pc2UocmVzdWx0KSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGNvb2tpZVZlcnNpb24gIT09IGV4cGVjdGVkVmVyc2lvbikgcmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHBheWxvYWQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG5cdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgdmVyaWZ5SldUKHNlc3Npb25EYXRhLCBzZWNyZXQpO1xuXHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikge1xuXHRcdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHBheWxvYWQudmVyc2lvbiB8fCBcIjFcIjtcblx0XHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHBheWxvYWQuc2Vzc2lvbiwgcGF5bG9hZC51c2VyKTtcblx0XHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY29va2llVmVyc2lvbiAhPT0gZXhwZWN0ZWRWZXJzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcGF5bG9hZDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBzZXNzaW9uRGF0YVBheWxvYWQgPSBzYWZlSlNPTlBhcnNlKGJpbmFyeS5kZWNvZGUoYmFzZTY0VXJsLmRlY29kZShzZXNzaW9uRGF0YSkpKTtcblx0XHRcdGlmICghc2Vzc2lvbkRhdGFQYXlsb2FkKSByZXR1cm4gbnVsbDtcblx0XHRcdGlmICghYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS52ZXJpZnkoc2VjcmV0LCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdC4uLnNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLFxuXHRcdFx0XHRleHBpcmVzQXQ6IHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXRcblx0XHRcdH0pLCBzZXNzaW9uRGF0YVBheWxvYWQuc2lnbmF0dXJlKSkgcmV0dXJuIG51bGw7XG5cdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uICYmIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uKSB7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZVZlcnNpb24gPSBzZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbi52ZXJzaW9uIHx8IFwiMVwiO1xuXHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnNlc3Npb24sIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnVzZXIpO1xuXHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IGlzUHJvbWlzZShyZXN1bHQpID8gYXdhaXQgcmVzdWx0IDogcmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjb29raWVWZXJzaW9uICE9PSBleHBlY3RlZFZlcnNpb24pIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgY3JlYXRlQ29va2llR2V0dGVyLCBjcmVhdGVTZXNzaW9uU3RvcmUsIGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0Q29va2llQ2FjaGUsIGdldENvb2tpZXMsIGdldFNlc3Npb25Db29raWUsIHBhcnNlQ29va2llcywgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZUNhY2hlLCBzZXRDb29raWVUb0hlYWRlciwgc2V0U2Vzc2lvbkNvb2tpZSwgc3BsaXRTZXRDb29raWVIZWFkZXIsIHN0cmlwU2VjdXJlQ29va2llUHJlZml4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/session-store.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccountStore: () => (/* binding */ createAccountStore),\n/* harmony export */   createSessionStore: () => (/* binding */ createSessionStore),\n/* harmony export */   getAccountCookie: () => (/* binding */ getAccountCookie),\n/* harmony export */   getChunkedCookie: () => (/* binding */ getChunkedCookie),\n/* harmony export */   getSessionQuerySchema: () => (/* binding */ getSessionQuerySchema),\n/* harmony export */   setAccountCookie: () => (/* binding */ setAccountCookie)\n/* harmony export */ });\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n//#region src/cookies/session-store.ts\nconst ALLOWED_COOKIE_SIZE = 4096;\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 200;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n* Parse cookies from the request headers\n*/\nfunction parseCookiesFromContext(ctx) {\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return {};\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\treturn cookies;\n}\n/**\n* Extract the chunk index from a cookie name\n*/\nfunction getChunkIndex(cookieName) {\n\tconst parts = cookieName.split(\".\");\n\tconst lastPart = parts[parts.length - 1];\n\tconst index = parseInt(lastPart || \"0\", 10);\n\treturn isNaN(index) ? 0 : index;\n}\n/**\n* Read all existing chunks from cookies\n*/\nfunction readExistingChunks(cookieName, ctx) {\n\tconst chunks = {};\n\tconst cookies = parseCookiesFromContext(ctx);\n\tfor (const [name, value] of Object.entries(cookies)) if (name.startsWith(cookieName)) chunks[name] = value;\n\treturn chunks;\n}\n/**\n* Get the full session data by joining all chunks\n*/\nfunction joinChunks(chunks) {\n\treturn Object.keys(chunks).sort((a, b) => {\n\t\treturn getChunkIndex(a) - getChunkIndex(b);\n\t}).map((key) => chunks[key]).join(\"\");\n}\n/**\n* Split a cookie value into chunks if needed\n*/\nfunction chunkCookie(storeName, cookie, chunks, logger) {\n\tconst chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n\tif (chunkCount === 1) {\n\t\tchunks[cookie.name] = cookie.value;\n\t\treturn [cookie];\n\t}\n\tconst cookies = [];\n\tfor (let i = 0; i < chunkCount; i++) {\n\t\tconst name = `${cookie.name}.${i}`;\n\t\tconst start = i * CHUNK_SIZE;\n\t\tconst value = cookie.value.substring(start, start + CHUNK_SIZE);\n\t\tcookies.push({\n\t\t\t...cookie,\n\t\t\tname,\n\t\t\tvalue\n\t\t});\n\t\tchunks[name] = value;\n\t}\n\tlogger.debug(`CHUNKING_${storeName.toUpperCase()}_COOKIE`, {\n\t\tmessage: `${storeName} cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n\t\temptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n\t\tvalueSize: cookie.value.length,\n\t\tchunkCount,\n\t\tchunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE)\n\t});\n\treturn cookies;\n}\n/**\n* Get all cookies that should be cleaned (removed)\n*/\nfunction getCleanCookies(chunks, cookieOptions) {\n\tconst cleanedChunks = {};\n\tfor (const name in chunks) cleanedChunks[name] = {\n\t\tname,\n\t\tvalue: \"\",\n\t\tattributes: {\n\t\t\t...cookieOptions,\n\t\t\tmaxAge: 0\n\t\t}\n\t};\n\treturn cleanedChunks;\n}\n/**\n* Create a session store for handling cookie chunking.\n* When session data exceeds 4KB, it automatically splits it into multiple cookies.\n*\n* Based on next-auth's SessionStore implementation.\n* @see https://github.com/nextauthjs/next-auth/blob/27b2519b84b8eb9cf053775dea29d577d2aa0098/packages/next-auth/src/core/lib/cookie.ts\n*/\nconst storeFactory = (storeName) => (cookieName, cookieOptions, ctx) => {\n\tconst chunks = readExistingChunks(cookieName, ctx);\n\tconst logger = ctx.context.logger;\n\treturn {\n\t\tgetValue() {\n\t\t\treturn joinChunks(chunks);\n\t\t},\n\t\thasChunks() {\n\t\t\treturn Object.keys(chunks).length > 0;\n\t\t},\n\t\tchunk(value, options) {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\tconst cookies = cleanedChunks;\n\t\t\tconst chunked = chunkCookie(storeName, {\n\t\t\t\tname: cookieName,\n\t\t\t\tvalue,\n\t\t\t\tattributes: {\n\t\t\t\t\t...cookieOptions,\n\t\t\t\t\t...options\n\t\t\t\t}\n\t\t\t}, chunks, logger);\n\t\t\tfor (const chunk of chunked) cookies[chunk.name] = chunk;\n\t\t\treturn Object.values(cookies);\n\t\t},\n\t\tclean() {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\treturn Object.values(cleanedChunks);\n\t\t},\n\t\tsetCookies(cookies) {\n\t\t\tfor (const cookie of cookies) ctx.setCookie(cookie.name, cookie.value, cookie.attributes);\n\t\t}\n\t};\n};\nconst createSessionStore = storeFactory(\"Session\");\nconst createAccountStore = storeFactory(\"Account\");\nfunction getChunkedCookie(ctx, cookieName) {\n\tconst value = ctx.getCookie(cookieName);\n\tif (value) return value;\n\tconst chunks = [];\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return null;\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\tfor (const [name, val] of Object.entries(cookies)) if (name.startsWith(cookieName + \".\")) {\n\t\tconst indexStr = name.split(\".\").at(-1);\n\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\tif (!isNaN(index)) chunks.push({\n\t\t\tindex,\n\t\t\tvalue: val\n\t\t});\n\t}\n\tif (chunks.length > 0) {\n\t\tchunks.sort((a, b) => a.index - b.index);\n\t\treturn chunks.map((c) => c.value).join(\"\");\n\t}\n\treturn null;\n}\nasync function setAccountCookie(c, accountData) {\n\tconst accountDataCookie = c.context.authCookies.accountData;\n\tconst options = {\n\t\tmaxAge: 300,\n\t\t...accountDataCookie.attributes\n\t};\n\tconst data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncodeJWT)(accountData, c.context.secret, \"better-auth-account\", options.maxAge);\n\tif (data.length > ALLOWED_COOKIE_SIZE) {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tconst cookies = accountStore.chunk(data, options);\n\t\taccountStore.setCookies(cookies);\n\t} else {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tif (accountStore.hasChunks()) {\n\t\t\tconst cleanCookies = accountStore.clean();\n\t\t\taccountStore.setCookies(cleanCookies);\n\t\t}\n\t\tc.setCookie(accountDataCookie.name, data, options);\n\t}\n}\nasync function getAccountCookie(c) {\n\tconst accountCookie = getChunkedCookie(c, c.context.authCookies.accountData.name);\n\tif (accountCookie) {\n\t\tconst accountData = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecodeJWT)(accountCookie, c.context.secret, \"better-auth-account\"));\n\t\tif (accountData) return accountData;\n\t}\n\treturn null;\n}\nconst getSessionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_3__.optional(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n\tdisableCookieCache: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable cookie cache and fetch session from database\" }).optional(),\n\tdisableRefresh: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable session refresh. Useful for checking session status, without updating the session\" }).optional()\n}));\n\n//#endregion\n\n//# sourceMappingURL=session-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkU7QUFDOUM7QUFDMkI7QUFDL0I7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDLGtCQUFrQixZQUFZLEdBQUcsRUFBRTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBCQUEwQix3QkFBd0I7QUFDbEQsY0FBYyxXQUFXLHlCQUF5QixxQkFBcUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0VBQWEsT0FBTyxtRUFBa0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseUNBQVUsQ0FBQyx1Q0FBUTtBQUNqRCxxQkFBcUIsK0NBQWdCLFVBQVUscUVBQXFFO0FBQ3BILGlCQUFpQiwrQ0FBZ0IsVUFBVSwwR0FBMEc7QUFDckosQ0FBQzs7QUFFRDtBQUMrSDtBQUMvSCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNvb2tpZXNcXHNlc3Npb24tc3RvcmUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRW5jb2RlSldUIH0gZnJvbSBcIi4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9jb29raWVzL3Nlc3Npb24tc3RvcmUudHNcbmNvbnN0IEFMTE9XRURfQ09PS0lFX1NJWkUgPSA0MDk2O1xuY29uc3QgRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFID0gMjAwO1xuY29uc3QgQ0hVTktfU0laRSA9IEFMTE9XRURfQ09PS0lFX1NJWkUgLSBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkU7XG4vKipcbiogUGFyc2UgY29va2llcyBmcm9tIHRoZSByZXF1ZXN0IGhlYWRlcnNcbiovXG5mdW5jdGlvbiBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpIHtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiB7fTtcblx0Y29uc3QgY29va2llcyA9IHt9O1xuXHRjb25zdCBwYWlycyA9IGNvb2tpZUhlYWRlci5zcGxpdChcIjsgXCIpO1xuXHRmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcblx0XHRjb25zdCBbbmFtZSwgLi4udmFsdWVQYXJ0c10gPSBwYWlyLnNwbGl0KFwiPVwiKTtcblx0XHRpZiAobmFtZSAmJiB2YWx1ZVBhcnRzLmxlbmd0aCA+IDApIGNvb2tpZXNbbmFtZV0gPSB2YWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHR9XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEV4dHJhY3QgdGhlIGNodW5rIGluZGV4IGZyb20gYSBjb29raWUgbmFtZVxuKi9cbmZ1bmN0aW9uIGdldENodW5rSW5kZXgoY29va2llTmFtZSkge1xuXHRjb25zdCBwYXJ0cyA9IGNvb2tpZU5hbWUuc3BsaXQoXCIuXCIpO1xuXHRjb25zdCBsYXN0UGFydCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGxhc3RQYXJ0IHx8IFwiMFwiLCAxMCk7XG5cdHJldHVybiBpc05hTihpbmRleCkgPyAwIDogaW5kZXg7XG59XG4vKipcbiogUmVhZCBhbGwgZXhpc3RpbmcgY2h1bmtzIGZyb20gY29va2llc1xuKi9cbmZ1bmN0aW9uIHJlYWRFeGlzdGluZ0NodW5rcyhjb29raWVOYW1lLCBjdHgpIHtcblx0Y29uc3QgY2h1bmtzID0ge307XG5cdGNvbnN0IGNvb2tpZXMgPSBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpO1xuXHRmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29va2llcykpIGlmIChuYW1lLnN0YXJ0c1dpdGgoY29va2llTmFtZSkpIGNodW5rc1tuYW1lXSA9IHZhbHVlO1xuXHRyZXR1cm4gY2h1bmtzO1xufVxuLyoqXG4qIEdldCB0aGUgZnVsbCBzZXNzaW9uIGRhdGEgYnkgam9pbmluZyBhbGwgY2h1bmtzXG4qL1xuZnVuY3Rpb24gam9pbkNodW5rcyhjaHVua3MpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKGNodW5rcykuc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiBnZXRDaHVua0luZGV4KGEpIC0gZ2V0Q2h1bmtJbmRleChiKTtcblx0fSkubWFwKChrZXkpID0+IGNodW5rc1trZXldKS5qb2luKFwiXCIpO1xufVxuLyoqXG4qIFNwbGl0IGEgY29va2llIHZhbHVlIGludG8gY2h1bmtzIGlmIG5lZWRlZFxuKi9cbmZ1bmN0aW9uIGNodW5rQ29va2llKHN0b3JlTmFtZSwgY29va2llLCBjaHVua3MsIGxvZ2dlcikge1xuXHRjb25zdCBjaHVua0NvdW50ID0gTWF0aC5jZWlsKGNvb2tpZS52YWx1ZS5sZW5ndGggLyBDSFVOS19TSVpFKTtcblx0aWYgKGNodW5rQ291bnQgPT09IDEpIHtcblx0XHRjaHVua3NbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlO1xuXHRcdHJldHVybiBbY29va2llXTtcblx0fVxuXHRjb25zdCBjb29raWVzID0gW107XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG5cdFx0Y29uc3QgbmFtZSA9IGAke2Nvb2tpZS5uYW1lfS4ke2l9YDtcblx0XHRjb25zdCBzdGFydCA9IGkgKiBDSFVOS19TSVpFO1xuXHRcdGNvbnN0IHZhbHVlID0gY29va2llLnZhbHVlLnN1YnN0cmluZyhzdGFydCwgc3RhcnQgKyBDSFVOS19TSVpFKTtcblx0XHRjb29raWVzLnB1c2goe1xuXHRcdFx0Li4uY29va2llLFxuXHRcdFx0bmFtZSxcblx0XHRcdHZhbHVlXG5cdFx0fSk7XG5cdFx0Y2h1bmtzW25hbWVdID0gdmFsdWU7XG5cdH1cblx0bG9nZ2VyLmRlYnVnKGBDSFVOS0lOR18ke3N0b3JlTmFtZS50b1VwcGVyQ2FzZSgpfV9DT09LSUVgLCB7XG5cdFx0bWVzc2FnZTogYCR7c3RvcmVOYW1lfSBjb29raWUgZXhjZWVkcyBhbGxvd2VkICR7QUxMT1dFRF9DT09LSUVfU0laRX0gYnl0ZXMuYCxcblx0XHRlbXB0eUNvb2tpZVNpemU6IEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSxcblx0XHR2YWx1ZVNpemU6IGNvb2tpZS52YWx1ZS5sZW5ndGgsXG5cdFx0Y2h1bmtDb3VudCxcblx0XHRjaHVua3M6IGNvb2tpZXMubWFwKChjKSA9PiBjLnZhbHVlLmxlbmd0aCArIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSlcblx0fSk7XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEdldCBhbGwgY29va2llcyB0aGF0IHNob3VsZCBiZSBjbGVhbmVkIChyZW1vdmVkKVxuKi9cbmZ1bmN0aW9uIGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpIHtcblx0Y29uc3QgY2xlYW5lZENodW5rcyA9IHt9O1xuXHRmb3IgKGNvbnN0IG5hbWUgaW4gY2h1bmtzKSBjbGVhbmVkQ2h1bmtzW25hbWVdID0ge1xuXHRcdG5hbWUsXG5cdFx0dmFsdWU6IFwiXCIsXG5cdFx0YXR0cmlidXRlczoge1xuXHRcdFx0Li4uY29va2llT3B0aW9ucyxcblx0XHRcdG1heEFnZTogMFxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNsZWFuZWRDaHVua3M7XG59XG4vKipcbiogQ3JlYXRlIGEgc2Vzc2lvbiBzdG9yZSBmb3IgaGFuZGxpbmcgY29va2llIGNodW5raW5nLlxuKiBXaGVuIHNlc3Npb24gZGF0YSBleGNlZWRzIDRLQiwgaXQgYXV0b21hdGljYWxseSBzcGxpdHMgaXQgaW50byBtdWx0aXBsZSBjb29raWVzLlxuKlxuKiBCYXNlZCBvbiBuZXh0LWF1dGgncyBTZXNzaW9uU3RvcmUgaW1wbGVtZW50YXRpb24uXG4qIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25leHRhdXRoanMvbmV4dC1hdXRoL2Jsb2IvMjdiMjUxOWI4NGI4ZWI5Y2YwNTM3NzVkZWEyOWQ1NzdkMmFhMDA5OC9wYWNrYWdlcy9uZXh0LWF1dGgvc3JjL2NvcmUvbGliL2Nvb2tpZS50c1xuKi9cbmNvbnN0IHN0b3JlRmFjdG9yeSA9IChzdG9yZU5hbWUpID0+IChjb29raWVOYW1lLCBjb29raWVPcHRpb25zLCBjdHgpID0+IHtcblx0Y29uc3QgY2h1bmtzID0gcmVhZEV4aXN0aW5nQ2h1bmtzKGNvb2tpZU5hbWUsIGN0eCk7XG5cdGNvbnN0IGxvZ2dlciA9IGN0eC5jb250ZXh0LmxvZ2dlcjtcblx0cmV0dXJuIHtcblx0XHRnZXRWYWx1ZSgpIHtcblx0XHRcdHJldHVybiBqb2luQ2h1bmtzKGNodW5rcyk7XG5cdFx0fSxcblx0XHRoYXNDaHVua3MoKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoY2h1bmtzKS5sZW5ndGggPiAwO1xuXHRcdH0sXG5cdFx0Y2h1bmsodmFsdWUsIG9wdGlvbnMpIHtcblx0XHRcdGNvbnN0IGNsZWFuZWRDaHVua3MgPSBnZXRDbGVhbkNvb2tpZXMoY2h1bmtzLCBjb29raWVPcHRpb25zKTtcblx0XHRcdGZvciAoY29uc3QgbmFtZSBpbiBjaHVua3MpIGRlbGV0ZSBjaHVua3NbbmFtZV07XG5cdFx0XHRjb25zdCBjb29raWVzID0gY2xlYW5lZENodW5rcztcblx0XHRcdGNvbnN0IGNodW5rZWQgPSBjaHVua0Nvb2tpZShzdG9yZU5hbWUsIHtcblx0XHRcdFx0bmFtZTogY29va2llTmFtZSxcblx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdGF0dHJpYnV0ZXM6IHtcblx0XHRcdFx0XHQuLi5jb29raWVPcHRpb25zLFxuXHRcdFx0XHRcdC4uLm9wdGlvbnNcblx0XHRcdFx0fVxuXHRcdFx0fSwgY2h1bmtzLCBsb2dnZXIpO1xuXHRcdFx0Zm9yIChjb25zdCBjaHVuayBvZiBjaHVua2VkKSBjb29raWVzW2NodW5rLm5hbWVdID0gY2h1bms7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LnZhbHVlcyhjb29raWVzKTtcblx0XHR9LFxuXHRcdGNsZWFuKCkge1xuXHRcdFx0Y29uc3QgY2xlYW5lZENodW5rcyA9IGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpO1xuXHRcdFx0Zm9yIChjb25zdCBuYW1lIGluIGNodW5rcykgZGVsZXRlIGNodW5rc1tuYW1lXTtcblx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKGNsZWFuZWRDaHVua3MpO1xuXHRcdH0sXG5cdFx0c2V0Q29va2llcyhjb29raWVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNvb2tpZSBvZiBjb29raWVzKSBjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUsIGNvb2tpZS5hdHRyaWJ1dGVzKTtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgY3JlYXRlU2Vzc2lvblN0b3JlID0gc3RvcmVGYWN0b3J5KFwiU2Vzc2lvblwiKTtcbmNvbnN0IGNyZWF0ZUFjY291bnRTdG9yZSA9IHN0b3JlRmFjdG9yeShcIkFjY291bnRcIik7XG5mdW5jdGlvbiBnZXRDaHVua2VkQ29va2llKGN0eCwgY29va2llTmFtZSkge1xuXHRjb25zdCB2YWx1ZSA9IGN0eC5nZXRDb29raWUoY29va2llTmFtZSk7XG5cdGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuXHRjb25zdCBjaHVua3MgPSBbXTtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBudWxsO1xuXHRjb25zdCBjb29raWVzID0ge307XG5cdGNvbnN0IHBhaXJzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG5cdGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuXHRcdGNvbnN0IFtuYW1lLCAuLi52YWx1ZVBhcnRzXSA9IHBhaXIuc3BsaXQoXCI9XCIpO1xuXHRcdGlmIChuYW1lICYmIHZhbHVlUGFydHMubGVuZ3RoID4gMCkgY29va2llc1tuYW1lXSA9IHZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdH1cblx0Zm9yIChjb25zdCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkgaWYgKG5hbWUuc3RhcnRzV2l0aChjb29raWVOYW1lICsgXCIuXCIpKSB7XG5cdFx0Y29uc3QgaW5kZXhTdHIgPSBuYW1lLnNwbGl0KFwiLlwiKS5hdCgtMSk7XG5cdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciB8fCBcIjBcIiwgMTApO1xuXHRcdGlmICghaXNOYU4oaW5kZXgpKSBjaHVua3MucHVzaCh7XG5cdFx0XHRpbmRleCxcblx0XHRcdHZhbHVlOiB2YWxcblx0XHR9KTtcblx0fVxuXHRpZiAoY2h1bmtzLmxlbmd0aCA+IDApIHtcblx0XHRjaHVua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXHRcdHJldHVybiBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKFwiXCIpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0QWNjb3VudENvb2tpZShjLCBhY2NvdW50RGF0YSkge1xuXHRjb25zdCBhY2NvdW50RGF0YUNvb2tpZSA9IGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YTtcblx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRtYXhBZ2U6IDMwMCxcblx0XHQuLi5hY2NvdW50RGF0YUNvb2tpZS5hdHRyaWJ1dGVzXG5cdH07XG5cdGNvbnN0IGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1QoYWNjb3VudERhdGEsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiLCBvcHRpb25zLm1heEFnZSk7XG5cdGlmIChkYXRhLmxlbmd0aCA+IEFMTE9XRURfQ09PS0lFX1NJWkUpIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0Y29uc3QgY29va2llcyA9IGFjY291bnRTdG9yZS5jaHVuayhkYXRhLCBvcHRpb25zKTtcblx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjb29raWVzKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0aWYgKGFjY291bnRTdG9yZS5oYXNDaHVua3MoKSkge1xuXHRcdFx0Y29uc3QgY2xlYW5Db29raWVzID0gYWNjb3VudFN0b3JlLmNsZWFuKCk7XG5cdFx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdH1cblx0XHRjLnNldENvb2tpZShhY2NvdW50RGF0YUNvb2tpZS5uYW1lLCBkYXRhLCBvcHRpb25zKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudENvb2tpZShjKSB7XG5cdGNvbnN0IGFjY291bnRDb29raWUgPSBnZXRDaHVua2VkQ29va2llKGMsIGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YS5uYW1lKTtcblx0aWYgKGFjY291bnRDb29raWUpIHtcblx0XHRjb25zdCBhY2NvdW50RGF0YSA9IHNhZmVKU09OUGFyc2UoYXdhaXQgc3ltbWV0cmljRGVjb2RlSldUKGFjY291bnRDb29raWUsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiKSk7XG5cdFx0aWYgKGFjY291bnREYXRhKSByZXR1cm4gYWNjb3VudERhdGE7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5jb25zdCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgPSB6Lm9wdGlvbmFsKHoub2JqZWN0KHtcblx0ZGlzYWJsZUNvb2tpZUNhY2hlOiB6LmNvZXJjZS5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgY29va2llIGNhY2hlIGFuZCBmZXRjaCBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIiB9KS5vcHRpb25hbCgpLFxuXHRkaXNhYmxlUmVmcmVzaDogei5jb2VyY2UuYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIHNlc3Npb24gcmVmcmVzaC4gVXNlZnVsIGZvciBjaGVja2luZyBzZXNzaW9uIHN0YXR1cywgd2l0aG91dCB1cGRhdGluZyB0aGUgc2Vzc2lvblwiIH0pLm9wdGlvbmFsKClcbn0pKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBY2NvdW50U3RvcmUsIGNyZWF0ZVNlc3Npb25TdG9yZSwgZ2V0QWNjb3VudENvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLCBzZXRBY2NvdW50Q29va2llIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLXN0b3JlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/buffer.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* binding */ constantTimeEqual)\n/* harmony export */ });\n//#region src/crypto/buffer.ts\n/**\n* Compare two buffers in constant time.\n*/\nfunction constantTimeEqual(a, b) {\n\tif (typeof a === \"string\") a = new TextEncoder().encode(a);\n\tif (typeof b === \"string\") b = new TextEncoder().encode(b);\n\tconst aBuffer = new Uint8Array(a);\n\tconst bBuffer = new Uint8Array(b);\n\tlet c = aBuffer.length ^ bBuffer.length;\n\tconst length = Math.max(aBuffer.length, bBuffer.length);\n\tfor (let i = 0; i < length; i++) c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n\treturn c === 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=buffer.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vYnVmZmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjcnlwdG9cXGJ1ZmZlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jcnlwdG8vYnVmZmVyLnRzXG4vKipcbiogQ29tcGFyZSB0d28gYnVmZmVycyBpbiBjb25zdGFudCB0aW1lLlxuKi9cbmZ1bmN0aW9uIGNvbnN0YW50VGltZUVxdWFsKGEsIGIpIHtcblx0aWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSBhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGEpO1xuXHRpZiAodHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIGIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYik7XG5cdGNvbnN0IGFCdWZmZXIgPSBuZXcgVWludDhBcnJheShhKTtcblx0Y29uc3QgYkJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGIpO1xuXHRsZXQgYyA9IGFCdWZmZXIubGVuZ3RoIF4gYkJ1ZmZlci5sZW5ndGg7XG5cdGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGFCdWZmZXIubGVuZ3RoLCBiQnVmZmVyLmxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGMgfD0gKGkgPCBhQnVmZmVyLmxlbmd0aCA/IGFCdWZmZXJbaV0gOiAwKSBeIChpIDwgYkJ1ZmZlci5sZW5ndGggPyBiQnVmZmVyW2ldIDogMCk7XG5cdHJldHVybiBjID09PSAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* reexport safe */ _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString),\n/* harmony export */   getCryptoKey: () => (/* binding */ getCryptoKey),\n/* harmony export */   hashPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.hashPassword),\n/* harmony export */   makeSignature: () => (/* binding */ makeSignature),\n/* harmony export */   signJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecodeJWT),\n/* harmony export */   symmetricDecrypt: () => (/* binding */ symmetricDecrypt),\n/* harmony export */   symmetricEncodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncodeJWT),\n/* harmony export */   symmetricEncrypt: () => (/* binding */ symmetricEncrypt),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.verifyJWT),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @noble/ciphers/chacha.js */ \"(rsc)/./node_modules/@noble/ciphers/chacha.js\");\n/* harmony import */ var _noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/ciphers/utils.js */ \"(rsc)/./node_modules/@noble/ciphers/utils.js\");\n\n\n\n\n\n\n\n\n\n//#region src/crypto/index.ts\nconst algorithm = {\n\tname: \"HMAC\",\n\thash: \"SHA-256\"\n};\nconst symmetricEncrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.utf8ToBytes)(data);\n\treturn (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.bytesToHex)((0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes)).encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.hexToBytes)(data);\n\tconst chacha = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\nconst getCryptoKey = async (secret) => {\n\tconst secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().importKey(\"raw\", secretBuf, algorithm, false, [\"sign\", \"verify\"]);\n};\nconst makeSignature = async (value, secret) => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().sign(algorithm.name, key, new TextEncoder().encode(value));\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ3NDO0FBQ3pCO0FBQ1Y7QUFDSTtBQUNIO0FBQ1E7QUFDK0I7O0FBRTVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsV0FBVztBQUM3QywwQkFBMEIsbUVBQVU7QUFDcEMscUJBQXFCLG9FQUFXO0FBQ2hDLFFBQVEsbUVBQVUsQ0FBQyxxRUFBWSxDQUFDLHVFQUFpQjtBQUNqRDtBQUNBLGtDQUFrQyxXQUFXO0FBQzdDLDBCQUEwQixtRUFBVTtBQUNwQyxxQkFBcUIsbUVBQVU7QUFDL0IsZ0JBQWdCLHFFQUFZLENBQUMsdUVBQWlCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzRUFBa0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFrQjtBQUMzQztBQUNBOztBQUVBO0FBQzhNO0FBQzlNIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY3J5cHRvXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwgfSBmcm9tIFwiLi9idWZmZXIubWpzXCI7XG5pbXBvcnQgeyBzaWduSldULCBzeW1tZXRyaWNEZWNvZGVKV1QsIHN5bW1ldHJpY0VuY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4vand0Lm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRXZWJjcnlwdG9TdWJ0bGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyB4Y2hhY2hhMjBwb2x5MTMwNSB9IGZyb20gXCJAbm9ibGUvY2lwaGVycy9jaGFjaGEuanNcIjtcbmltcG9ydCB7IGJ5dGVzVG9IZXgsIGhleFRvQnl0ZXMsIG1hbmFnZWROb25jZSwgdXRmOFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2NpcGhlcnMvdXRpbHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jcnlwdG8vaW5kZXgudHNcbmNvbnN0IGFsZ29yaXRobSA9IHtcblx0bmFtZTogXCJITUFDXCIsXG5cdGhhc2g6IFwiU0hBLTI1NlwiXG59O1xuY29uc3Qgc3ltbWV0cmljRW5jcnlwdCA9IGFzeW5jICh7IGtleSwgZGF0YSB9KSA9PiB7XG5cdGNvbnN0IGtleUFzQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3Qoa2V5KTtcblx0Y29uc3QgZGF0YUFzQnl0ZXMgPSB1dGY4VG9CeXRlcyhkYXRhKTtcblx0cmV0dXJuIGJ5dGVzVG9IZXgobWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSkuZW5jcnlwdChkYXRhQXNCeXRlcykpO1xufTtcbmNvbnN0IHN5bW1ldHJpY0RlY3J5cHQgPSBhc3luYyAoeyBrZXksIGRhdGEgfSkgPT4ge1xuXHRjb25zdCBrZXlBc0J5dGVzID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KGtleSk7XG5cdGNvbnN0IGRhdGFBc0J5dGVzID0gaGV4VG9CeXRlcyhkYXRhKTtcblx0Y29uc3QgY2hhY2hhID0gbWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSk7XG5cdHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoY2hhY2hhLmRlY3J5cHQoZGF0YUFzQnl0ZXMpKTtcbn07XG5jb25zdCBnZXRDcnlwdG9LZXkgPSBhc3luYyAoc2VjcmV0KSA9PiB7XG5cdGNvbnN0IHNlY3JldEJ1ZiA9IHR5cGVvZiBzZWNyZXQgPT09IFwic3RyaW5nXCIgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSA6IHNlY3JldDtcblx0cmV0dXJuIGF3YWl0IGdldFdlYmNyeXB0b1N1YnRsZSgpLmltcG9ydEtleShcInJhd1wiLCBzZWNyZXRCdWYsIGFsZ29yaXRobSwgZmFsc2UsIFtcInNpZ25cIiwgXCJ2ZXJpZnlcIl0pO1xufTtcbmNvbnN0IG1ha2VTaWduYXR1cmUgPSBhc3luYyAodmFsdWUsIHNlY3JldCkgPT4ge1xuXHRjb25zdCBrZXkgPSBhd2FpdCBnZXRDcnlwdG9LZXkoc2VjcmV0KTtcblx0Y29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgZ2V0V2ViY3J5cHRvU3VidGxlKCkuc2lnbihhbGdvcml0aG0ubmFtZSwga2V5LCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodmFsdWUpKTtcblx0cmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShzaWduYXR1cmUpKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsLCBnZW5lcmF0ZVJhbmRvbVN0cmluZywgZ2V0Q3J5cHRvS2V5LCBoYXNoUGFzc3dvcmQsIG1ha2VTaWduYXR1cmUsIHNpZ25KV1QsIHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jb2RlSldULCBzeW1tZXRyaWNFbmNyeXB0LCB2ZXJpZnlKV1QsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/jwt.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* binding */ symmetricDecodeJWT),\n/* harmony export */   symmetricEncodeJWT: () => (/* binding */ symmetricEncodeJWT),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/hashes/hkdf.js */ \"(rsc)/./node_modules/@noble/hashes/hkdf.js\");\n/* harmony import */ var _noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/sha2.js */ \"(rsc)/./node_modules/@noble/hashes/sha2.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/decrypt.js\");\n\n\n\n\n//#region src/crypto/jwt.ts\nasync function signJWT(payload, secret, expiresIn = 3600) {\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n}\nasync function verifyJWT(token, secret) {\n\ttry {\n\t\treturn (await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, new TextEncoder().encode(secret))).payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\nconst info = new Uint8Array([\n\t66,\n\t101,\n\t116,\n\t116,\n\t101,\n\t114,\n\t65,\n\t117,\n\t116,\n\t104,\n\t46,\n\t106,\n\t115,\n\t32,\n\t71,\n\t101,\n\t110,\n\t101,\n\t114,\n\t97,\n\t116,\n\t101,\n\t100,\n\t32,\n\t69,\n\t110,\n\t99,\n\t114,\n\t121,\n\t112,\n\t116,\n\t105,\n\t111,\n\t110,\n\t32,\n\t75,\n\t101,\n\t121\n]);\nconst now = () => Date.now() / 1e3 | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\nasync function symmetricEncodeJWT(payload, secret, salt, expiresIn = 3600) {\n\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\tconst thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\tkty: \"oct\",\n\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t}, \"sha256\");\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_6__.EncryptJWT(payload).setProtectedHeader({\n\t\talg,\n\t\tenc,\n\t\tkid: thumbprint\n\t}).setIssuedAt().setExpirationTime(now() + expiresIn).setJti(crypto.randomUUID()).encrypt(encryptionSecret);\n}\nasync function symmetricDecodeJWT(token, secret, salt) {\n\tif (!token) return null;\n\ttry {\n\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_7__.jwtDecrypt)(token, async ({ kid }) => {\n\t\t\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\t\t\tif (kid === void 0) return encryptionSecret;\n\t\t\tif (kid === await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\t\t\tkty: \"oct\",\n\t\t\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t\t\t}, \"sha256\")) return encryptionSecret;\n\t\t\tthrow new Error(\"no matching decryption secret\");\n\t\t}, {\n\t\t\tclockTolerance: 15,\n\t\t\tkeyManagementAlgorithms: [alg],\n\t\t\tcontentEncryptionAlgorithms: [enc, \"A256GCM\"]\n\t\t});\n\t\treturn payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=jwt.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vand0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFDRTtBQUNzRDs7QUFFckc7QUFDQTtBQUNBLGtCQUFrQix5Q0FBTywrQkFBK0IsY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsK0NBQVM7QUFDekIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQUksQ0FBQyx5REFBTTtBQUNyQywwQkFBMEIsNERBQXNCO0FBQ2hEO0FBQ0EsS0FBSyx3Q0FBZ0I7QUFDckIsRUFBRTtBQUNGLGtCQUFrQiw0Q0FBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFVBQVUsUUFBUSxnREFBVSxpQkFBaUIsS0FBSztBQUM1RCw0QkFBNEIsMkRBQUksQ0FBQyx5REFBTTtBQUN2QztBQUNBLHFCQUFxQiw0REFBc0I7QUFDM0M7QUFDQSxPQUFPLHdDQUFnQjtBQUN2QixJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNzRTtBQUN0RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xcand0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoa2RmIH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvaGtkZi5qc1wiO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvc2hhMi5qc1wiO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgU2lnbkpXVCwgYmFzZTY0dXJsLCBjYWxjdWxhdGVKd2tUaHVtYnByaW50LCBqd3REZWNyeXB0LCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9qd3QudHNcbmFzeW5jIGZ1bmN0aW9uIHNpZ25KV1QocGF5bG9hZCwgc2VjcmV0LCBleHBpcmVzSW4gPSAzNjAwKSB7XG5cdHJldHVybiBhd2FpdCBuZXcgU2lnbkpXVChwYXlsb2FkKS5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IFwiSFMyNTZcIiB9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMykgKyBleHBpcmVzSW4pLnNpZ24obmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5SldUKHRva2VuLCBzZWNyZXQpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpKS5wYXlsb2FkO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuY29uc3QgaW5mbyA9IG5ldyBVaW50OEFycmF5KFtcblx0NjYsXG5cdDEwMSxcblx0MTE2LFxuXHQxMTYsXG5cdDEwMSxcblx0MTE0LFxuXHQ2NSxcblx0MTE3LFxuXHQxMTYsXG5cdDEwNCxcblx0NDYsXG5cdDEwNixcblx0MTE1LFxuXHQzMixcblx0NzEsXG5cdDEwMSxcblx0MTEwLFxuXHQxMDEsXG5cdDExNCxcblx0OTcsXG5cdDExNixcblx0MTAxLFxuXHQxMDAsXG5cdDMyLFxuXHQ2OSxcblx0MTEwLFxuXHQ5OSxcblx0MTE0LFxuXHQxMjEsXG5cdDExMixcblx0MTE2LFxuXHQxMDUsXG5cdDExMSxcblx0MTEwLFxuXHQzMixcblx0NzUsXG5cdDEwMSxcblx0MTIxXG5dKTtcbmNvbnN0IG5vdyA9ICgpID0+IERhdGUubm93KCkgLyAxZTMgfCAwO1xuY29uc3QgYWxnID0gXCJkaXJcIjtcbmNvbnN0IGVuYyA9IFwiQTI1NkNCQy1IUzUxMlwiO1xuYXN5bmMgZnVuY3Rpb24gc3ltbWV0cmljRW5jb2RlSldUKHBheWxvYWQsIHNlY3JldCwgc2FsdCwgZXhwaXJlc0luID0gMzYwMCkge1xuXHRjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gaGtkZihzaGEyNTYsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZWNyZXQpLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2FsdCksIGluZm8sIDY0KTtcblx0Y29uc3QgdGh1bWJwcmludCA9IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdGt0eTogXCJvY3RcIixcblx0XHRrOiBiYXNlNjR1cmwuZW5jb2RlKGVuY3J5cHRpb25TZWNyZXQpXG5cdH0sIFwic2hhMjU2XCIpO1xuXHRyZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QocGF5bG9hZCkuc2V0UHJvdGVjdGVkSGVhZGVyKHtcblx0XHRhbGcsXG5cdFx0ZW5jLFxuXHRcdGtpZDogdGh1bWJwcmludFxuXHR9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKG5vdygpICsgZXhwaXJlc0luKS5zZXRKdGkoY3J5cHRvLnJhbmRvbVVVSUQoKSkuZW5jcnlwdChlbmNyeXB0aW9uU2VjcmV0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHN5bW1ldHJpY0RlY29kZUpXVCh0b2tlbiwgc2VjcmV0LCBzYWx0KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0RGVjcnlwdCh0b2tlbiwgYXN5bmMgKHsga2lkIH0pID0+IHtcblx0XHRcdGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBoa2RmKHNoYTI1NiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzYWx0KSwgaW5mbywgNjQpO1xuXHRcdFx0aWYgKGtpZCA9PT0gdm9pZCAwKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdGlmIChraWQgPT09IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdFx0XHRrdHk6IFwib2N0XCIsXG5cdFx0XHRcdGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldClcblx0XHRcdH0sIFwic2hhMjU2XCIpKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vIG1hdGNoaW5nIGRlY3J5cHRpb24gc2VjcmV0XCIpO1xuXHRcdH0sIHtcblx0XHRcdGNsb2NrVG9sZXJhbmNlOiAxNSxcblx0XHRcdGtleU1hbmFnZW1lbnRBbGdvcml0aG1zOiBbYWxnXSxcblx0XHRcdGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtczogW2VuYywgXCJBMjU2R0NNXCJdXG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBheWxvYWQ7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QsIHZlcmlmeUpXVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9and0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/password.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/password.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/scrypt.js */ \"(rsc)/./node_modules/@noble/hashes/scrypt.js\");\n/* harmony import */ var _noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/hashes/utils.js */ \"(rsc)/./node_modules/@noble/hashes/utils.js\");\n\n\n\n\n\n\n//#region src/crypto/password.ts\nconst config = {\n\tN: 16384,\n\tr: 16,\n\tp: 1,\n\tdkLen: 64\n};\nasync function generateKey(password, salt) {\n\treturn await (0,_noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__.scryptAsync)(password.normalize(\"NFKC\"), salt, {\n\t\tN: config.N,\n\t\tp: config.p,\n\t\tr: config.r,\n\t\tdkLen: config.dkLen,\n\t\tmaxmem: 128 * config.N * config.r * 2\n\t});\n}\nconst hashPassword = async (password) => {\n\tconst salt = _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(crypto.getRandomValues(new Uint8Array(16)));\n\tconst key = await generateKey(password, salt);\n\treturn `${salt}:${_better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(key)}`;\n};\nconst verifyPassword = async ({ hash, password }) => {\n\tconst [salt, key] = hash.split(\":\");\n\tif (!salt || !key) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Invalid password hash\");\n\treturn (0,_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await generateKey(password, salt), (0,_noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__.hexToBytes)(key));\n};\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcGFzc3dvcmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUQ7QUFDUztBQUNiO0FBQ1M7QUFDRjs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0VBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsY0FBYyx1REFBRztBQUNqQjtBQUNBLFdBQVcsS0FBSyxHQUFHLHVEQUFHLGFBQWE7QUFDbkM7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0EsOEJBQThCLG9FQUFlO0FBQzdDLFFBQVEsOERBQWlCLG9DQUFvQyxrRUFBVTtBQUN2RTs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xccGFzc3dvcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH0gZnJvbSBcIi4vYnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBoZXggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hleFwiO1xuaW1wb3J0IHsgc2NyeXB0QXN5bmMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zY3J5cHQuanNcIjtcbmltcG9ydCB7IGhleFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9wYXNzd29yZC50c1xuY29uc3QgY29uZmlnID0ge1xuXHROOiAxNjM4NCxcblx0cjogMTYsXG5cdHA6IDEsXG5cdGRrTGVuOiA2NFxufTtcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KSB7XG5cdHJldHVybiBhd2FpdCBzY3J5cHRBc3luYyhwYXNzd29yZC5ub3JtYWxpemUoXCJORktDXCIpLCBzYWx0LCB7XG5cdFx0TjogY29uZmlnLk4sXG5cdFx0cDogY29uZmlnLnAsXG5cdFx0cjogY29uZmlnLnIsXG5cdFx0ZGtMZW46IGNvbmZpZy5ka0xlbixcblx0XHRtYXhtZW06IDEyOCAqIGNvbmZpZy5OICogY29uZmlnLnIgKiAyXG5cdH0pO1xufVxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG5cdGNvbnN0IHNhbHQgPSBoZXguZW5jb2RlKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTYpKSk7XG5cdGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KTtcblx0cmV0dXJuIGAke3NhbHR9OiR7aGV4LmVuY29kZShrZXkpfWA7XG59O1xuY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBhc3luYyAoeyBoYXNoLCBwYXNzd29yZCB9KSA9PiB7XG5cdGNvbnN0IFtzYWx0LCBrZXldID0gaGFzaC5zcGxpdChcIjpcIik7XG5cdGlmICghc2FsdCB8fCAha2V5KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiSW52YWxpZCBwYXNzd29yZCBoYXNoXCIpO1xuXHRyZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYXdhaXQgZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpLCBoZXhUb0J5dGVzKGtleSkpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/random.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/random.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n//#region src/crypto/random.ts\nconst generateRandomString = (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\"a-z\", \"0-9\", \"A-Z\", \"-_\");\n\n//#endregion\n\n//# sourceMappingURL=random.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcmFuZG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3RTs7QUFFeEU7QUFDQSw2QkFBNkIsc0ZBQTJCOztBQUV4RDtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNyeXB0b1xccmFuZG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9yYW5kb20udHNcbmNvbnN0IGdlbmVyYXRlUmFuZG9tU3RyaW5nID0gY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yKFwiYS16XCIsIFwiMC05XCIsIFwiQS1aXCIsIFwiLV9cIik7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/adapter-base.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseAdapter: () => (/* binding */ getBaseAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n//#region src/db/adapter-base.ts\nasync function getBaseAdapter(options, handleDirectDatabase) {\n\tlet adapter;\n\tif (!options.database) {\n\t\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options);\n\t\tconst memoryDB = Object.keys(tables).reduce((acc, key) => {\n\t\t\tacc[key] = [];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tconst { memoryAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/memory-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\"));\n\t\tadapter = memoryAdapter(memoryDB)(options);\n\t} else if (typeof options.database === \"function\") adapter = options.database(options);\n\telse adapter = await handleDirectDatabase(options);\n\tif (!adapter.transaction) {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation.\");\n\t\tadapter.transaction = async (cb) => {\n\t\t\treturn cb(adapter);\n\t\t};\n\t}\n\treturn adapter;\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9hZGFwdGVyLWJhc2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNOOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtRUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUCxVQUFVLGdCQUFnQixRQUFRLDZPQUE4QztBQUNoRjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRSx5REFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxhZGFwdGVyLWJhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyLWJhc2UudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEJhc2VBZGFwdGVyKG9wdGlvbnMsIGhhbmRsZURpcmVjdERhdGFiYXNlKSB7XG5cdGxldCBhZGFwdGVyO1xuXHRpZiAoIW9wdGlvbnMuZGF0YWJhc2UpIHtcblx0XHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbW9yeURCID0gT2JqZWN0LmtleXModGFibGVzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG5cdFx0XHRhY2Nba2V5XSA9IFtdO1xuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LCB7fSk7XG5cdFx0Y29uc3QgeyBtZW1vcnlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0YWRhcHRlciA9IG1lbW9yeUFkYXB0ZXIobWVtb3J5REIpKG9wdGlvbnMpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGFiYXNlID09PSBcImZ1bmN0aW9uXCIpIGFkYXB0ZXIgPSBvcHRpb25zLmRhdGFiYXNlKG9wdGlvbnMpO1xuXHRlbHNlIGFkYXB0ZXIgPSBhd2FpdCBoYW5kbGVEaXJlY3REYXRhYmFzZShvcHRpb25zKTtcblx0aWYgKCFhZGFwdGVyLnRyYW5zYWN0aW9uKSB7XG5cdFx0bG9nZ2VyLndhcm4oXCJBZGFwdGVyIGRvZXMgbm90IGNvcnJlY3RseSBpbXBsZW1lbnQgdHJhbnNhY3Rpb24gZnVuY3Rpb24sIHBhdGNoaW5nIGl0IGF1dG9tYXRpY2FsbHkuIFBsZWFzZSB1cGRhdGUgeW91ciBhZGFwdGVyIGltcGxlbWVudGF0aW9uLlwiKTtcblx0XHRhZGFwdGVyLnRyYW5zYWN0aW9uID0gYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2IoYWRhcHRlcik7XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gYWRhcHRlcjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRCYXNlQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1iYXNlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/adapter-kysely.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAdapter: () => (/* binding */ getAdapter)\n/* harmony export */ });\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/db/adapter-kysely.ts\nasync function getAdapter(options) {\n\treturn (0,_adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseAdapter)(options, async (opts) => {\n\t\tconst { createKyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\tconst { kysely, databaseType, transaction } = await createKyselyAdapter(opts);\n\t\tif (!kysely) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Failed to initialize database adapter\");\n\t\tconst { kyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\treturn kyselyAdapter(kysely, {\n\t\t\ttype: databaseType || \"sqlite\",\n\t\t\tdebugLogs: opts.database && \"debugLogs\" in opts.database ? opts.database.debugLogs : false,\n\t\t\ttransaction\n\t\t})(opts);\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-kysely.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9hZGFwdGVyLWt5c2VseS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBQ007O0FBRTFEO0FBQ0E7QUFDQSxRQUFRLGlFQUFjO0FBQ3RCLFVBQVUsc0JBQXNCLFFBQVEsNk9BQThDO0FBQ3RGLFVBQVUsb0NBQW9DO0FBQzlDLHlCQUF5QixvRUFBZTtBQUN4QyxVQUFVLGdCQUFnQixRQUFRLDZPQUE4QztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcYWRhcHRlci1reXNlbHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci1iYXNlLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci1reXNlbHkudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEFkYXB0ZXIob3B0aW9ucykge1xuXHRyZXR1cm4gZ2V0QmFzZUFkYXB0ZXIob3B0aW9ucywgYXN5bmMgKG9wdHMpID0+IHtcblx0XHRjb25zdCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2luZGV4Lm1qc1wiKTtcblx0XHRjb25zdCB7IGt5c2VseSwgZGF0YWJhc2VUeXBlLCB0cmFuc2FjdGlvbiB9ID0gYXdhaXQgY3JlYXRlS3lzZWx5QWRhcHRlcihvcHRzKTtcblx0XHRpZiAoIWt5c2VseSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIGFkYXB0ZXJcIik7XG5cdFx0Y29uc3QgeyBreXNlbHlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0cmV0dXJuIGt5c2VseUFkYXB0ZXIoa3lzZWx5LCB7XG5cdFx0XHR0eXBlOiBkYXRhYmFzZVR5cGUgfHwgXCJzcWxpdGVcIixcblx0XHRcdGRlYnVnTG9nczogb3B0cy5kYXRhYmFzZSAmJiBcImRlYnVnTG9nc1wiIGluIG9wdHMuZGF0YWJhc2UgPyBvcHRzLmRhdGFiYXNlLmRlYnVnTG9ncyA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb25cblx0XHR9KShvcHRzKTtcblx0fSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1reXNlbHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/field-converter.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertFromDB: () => (/* binding */ convertFromDB),\n/* harmony export */   convertToDB: () => (/* binding */ convertToDB)\n/* harmony export */ });\n//#region src/db/field-converter.ts\nfunction convertToDB(fields, values) {\n\tconst result = values.id ? { id: values.id } : {};\n\tfor (const key in fields) {\n\t\tconst field = fields[key];\n\t\tconst value = values[key];\n\t\tif (value === void 0) continue;\n\t\tresult[field.fieldName || key] = value;\n\t}\n\treturn result;\n}\nfunction convertFromDB(fields, values) {\n\tif (!values) return null;\n\tconst result = { id: values.id };\n\tfor (const [key, value] of Object.entries(fields)) result[key] = values[value.fieldName || key];\n\treturn result;\n}\n\n//#endregion\n\n//# sourceMappingURL=field-converter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9maWVsZC1jb252ZXJ0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLDhCQUE4QixnQkFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGZpZWxkLWNvbnZlcnRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9kYi9maWVsZC1jb252ZXJ0ZXIudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb0RCKGZpZWxkcywgdmFsdWVzKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHZhbHVlcy5pZCA/IHsgaWQ6IHZhbHVlcy5pZCB9IDoge307XG5cdGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNba2V5XTtcblx0XHRpZiAodmFsdWUgPT09IHZvaWQgMCkgY29udGludWU7XG5cdFx0cmVzdWx0W2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXldID0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRGcm9tREIoZmllbGRzLCB2YWx1ZXMpIHtcblx0aWYgKCF2YWx1ZXMpIHJldHVybiBudWxsO1xuXHRjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZXMuaWQgfTtcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmllbGRzKSkgcmVzdWx0W2tleV0gPSB2YWx1ZXNbdmFsdWUuZmllbGROYW1lIHx8IGtleV07XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydEZyb21EQiwgY29udmVydFRvREIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpZWxkLWNvbnZlcnRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/field.mjs":
/*!****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/field.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFieldAttribute: () => (/* binding */ createFieldAttribute)\n/* harmony export */ });\n//#region src/db/field.ts\nconst createFieldAttribute = (type, config) => {\n\treturn {\n\t\ttype,\n\t\t...config\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=field.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9maWVsZC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGZpZWxkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2RiL2ZpZWxkLnRzXG5jb25zdCBjcmVhdGVGaWVsZEF0dHJpYnV0ZSA9ICh0eXBlLCBjb25maWcpID0+IHtcblx0cmV0dXJuIHtcblx0XHR0eXBlLFxuXHRcdC4uLmNvbmZpZ1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVGaWVsZEF0dHJpYnV0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/field.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/get-migration.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMigrations: () => (/* binding */ getMigrations),\n/* harmony export */   matchType: () => (/* binding */ matchType)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/get-migration.ts\nconst map = {\n\tpostgres: {\n\t\tstring: [\n\t\t\t\"character varying\",\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int4\",\n\t\t\t\"integer\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"numeric\",\n\t\t\t\"real\",\n\t\t\t\"double precision\"\n\t\t],\n\t\tboolean: [\"bool\", \"boolean\"],\n\t\tdate: [\n\t\t\t\"timestamptz\",\n\t\t\t\"timestamp\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\", \"jsonb\"]\n\t},\n\tmysql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"integer\",\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"boolean\", \"tinyint\"],\n\t\tdate: [\n\t\t\t\"timestamp\",\n\t\t\t\"datetime\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\"]\n\t},\n\tsqlite: {\n\t\tstring: [\"TEXT\"],\n\t\tnumber: [\"INTEGER\", \"REAL\"],\n\t\tboolean: [\"INTEGER\", \"BOOLEAN\"],\n\t\tdate: [\"DATE\", \"INTEGER\"],\n\t\tjson: [\"TEXT\"]\n\t},\n\tmssql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"nvarchar\",\n\t\t\t\"uniqueidentifier\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"bit\", \"smallint\"],\n\t\tdate: [\n\t\t\t\"datetime2\",\n\t\t\t\"date\",\n\t\t\t\"datetime\"\n\t\t],\n\t\tjson: [\"varchar\", \"nvarchar\"]\n\t}\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n\tfunction normalize(type) {\n\t\treturn type.toLowerCase().split(\"(\")[0].trim();\n\t}\n\tif (fieldType === \"string[]\" || fieldType === \"number[]\") return columnDataType.toLowerCase().includes(\"json\");\n\tconst types = map[dbType];\n\treturn (Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase())).includes(normalize(columnDataType));\n}\n/**\n* Get the current PostgreSQL schema (search_path) for the database connection\n* Returns the first schema in the search_path, defaulting to 'public' if not found\n*/\nasync function getPostgresSchema(db) {\n\ttry {\n\t\tconst result = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`SHOW search_path`.execute(db);\n\t\tif (result.rows[0]?.search_path) return result.rows[0].search_path.split(\",\").map((s) => s.trim()).map((s) => s.replace(/^[\"']|[\"']$/g, \"\")).filter((s) => !s.startsWith(\"$\"))[0] || \"public\";\n\t} catch {}\n\treturn \"public\";\n}\nasync function getMigrations(config) {\n\tconst betterAuthSchema = (0,_get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.getSchema)(config);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.createLogger)(config.logger);\n\tlet { kysely: db, databaseType: dbType } = await (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter)(config);\n\tif (!dbType) {\n\t\tlogger$1.warn(\"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\");\n\t\tdbType = \"sqlite\";\n\t}\n\tif (!db) {\n\t\tlogger$1.error(\"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\");\n\t\tprocess.exit(1);\n\t}\n\tlet currentSchema = \"public\";\n\tif (dbType === \"postgres\") {\n\t\tcurrentSchema = await getPostgresSchema(db);\n\t\tlogger$1.debug(`PostgreSQL migration: Using schema '${currentSchema}' (from search_path)`);\n\t\ttry {\n\t\t\tif (!(await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT schema_name \n\t\t\t\tFROM information_schema.schemata \n\t\t\t\tWHERE schema_name = ${currentSchema}\n\t\t\t`.execute(db)).rows[0]) logger$1.warn(`Schema '${currentSchema}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`);\n\t\t} catch (error) {\n\t\t\tlogger$1.debug(`Could not verify schema existence: ${error instanceof Error ? error.message : String(error)}`);\n\t\t}\n\t}\n\tconst allTableMetadata = await db.introspection.getTables();\n\tlet tableMetadata = allTableMetadata;\n\tif (dbType === \"postgres\") try {\n\t\tconst tablesInSchema = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT table_name \n\t\t\t\tFROM information_schema.tables \n\t\t\t\tWHERE table_schema = ${currentSchema}\n\t\t\t\tAND table_type = 'BASE TABLE'\n\t\t\t`.execute(db);\n\t\tconst tableNamesInSchema = new Set(tablesInSchema.rows.map((row) => row.table_name));\n\t\ttableMetadata = allTableMetadata.filter((table) => table.schema === currentSchema && tableNamesInSchema.has(table.name));\n\t\tlogger$1.debug(`Found ${tableMetadata.length} table(s) in schema '${currentSchema}': ${tableMetadata.map((t) => t.name).join(\", \") || \"(none)\"}`);\n\t} catch (error) {\n\t\tlogger$1.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${error instanceof Error ? error.message : String(error)}`);\n\t}\n\tconst toBeCreated = [];\n\tconst toBeAdded = [];\n\tfor (const [key, value] of Object.entries(betterAuthSchema)) {\n\t\tconst table = tableMetadata.find((t) => t.name === key);\n\t\tif (!table) {\n\t\t\tconst tIndex = toBeCreated.findIndex((t) => t.table === key);\n\t\t\tconst tableData = {\n\t\t\t\ttable: key,\n\t\t\t\tfields: value.fields,\n\t\t\t\torder: value.order || Infinity\n\t\t\t};\n\t\t\tconst insertIndex = toBeCreated.findIndex((t) => (t.order || Infinity) > tableData.order);\n\t\t\tif (insertIndex === -1) if (tIndex === -1) toBeCreated.push(tableData);\n\t\t\telse toBeCreated[tIndex].fields = {\n\t\t\t\t...toBeCreated[tIndex].fields,\n\t\t\t\t...value.fields\n\t\t\t};\n\t\t\telse toBeCreated.splice(insertIndex, 0, tableData);\n\t\t\tcontinue;\n\t\t}\n\t\tconst toBeAddedFields = {};\n\t\tfor (const [fieldName, field] of Object.entries(value.fields)) {\n\t\t\tconst column = table.columns.find((c) => c.name === fieldName);\n\t\t\tif (!column) {\n\t\t\t\ttoBeAddedFields[fieldName] = field;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (matchType(column.dataType, field.type, dbType)) continue;\n\t\t\telse logger$1.warn(`Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`);\n\t\t}\n\t\tif (Object.keys(toBeAddedFields).length > 0) toBeAdded.push({\n\t\t\ttable: key,\n\t\t\tfields: toBeAddedFields,\n\t\t\torder: value.order || Infinity\n\t\t});\n\t}\n\tconst migrations = [];\n\tconst useUUIDs = config.advanced?.database?.generateId === \"uuid\";\n\tconst useNumberId = config.advanced?.database?.useNumberId || config.advanced?.database?.generateId === \"serial\";\n\tfunction getType(field, fieldName) {\n\t\tconst type = field.type;\n\t\tconst provider = dbType || \"sqlite\";\n\t\tconst typeMap = {\n\t\t\tstring: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"text\",\n\t\t\t\tmysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : field.sortable ? \"varchar(255)\" : field.index ? \"varchar(255)\" : \"text\",\n\t\t\t\tmssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"varchar(8000)\"\n\t\t\t},\n\t\t\tboolean: {\n\t\t\t\tsqlite: \"integer\",\n\t\t\t\tpostgres: \"boolean\",\n\t\t\t\tmysql: \"boolean\",\n\t\t\t\tmssql: \"smallint\"\n\t\t\t},\n\t\t\tnumber: {\n\t\t\t\tsqlite: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tpostgres: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmysql: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmssql: field.bigint ? \"bigint\" : \"integer\"\n\t\t\t},\n\t\t\tdate: {\n\t\t\t\tsqlite: \"date\",\n\t\t\t\tpostgres: \"timestamptz\",\n\t\t\t\tmysql: \"timestamp(3)\",\n\t\t\t\tmssql: (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`datetime2(3)`\n\t\t\t},\n\t\t\tjson: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tpostgres: useNumberId ? (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`integer GENERATED BY DEFAULT AS IDENTITY` : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\tforeignKeyId: {\n\t\t\t\tpostgres: useNumberId ? \"integer\" : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\t\"string[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\t\"number[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t}\n\t\t};\n\t\tif (fieldName === \"id\" || field.references?.field === \"id\") {\n\t\t\tif (fieldName === \"id\") return typeMap.id[provider];\n\t\t\treturn typeMap.foreignKeyId[provider];\n\t\t}\n\t\tif (Array.isArray(type)) return \"text\";\n\t\tif (!(type in typeMap)) throw new Error(`Unsupported field type '${String(type)}' for field '${fieldName}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: \"string\") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);\n\t\treturn typeMap[type][provider];\n\t}\n\tconst getModelName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetModelName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tconst getFieldName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetFieldName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tfunction getReferencePath(model, field) {\n\t\ttry {\n\t\t\treturn `${getModelName(model)}.${getFieldName({\n\t\t\t\tmodel,\n\t\t\t\tfield\n\t\t\t})}`;\n\t\t} catch {\n\t\t\treturn `${model}.${field}`;\n\t\t}\n\t}\n\tif (toBeAdded.length) for (const table of toBeAdded) for (const [fieldName, field] of Object.entries(table.fields)) {\n\t\tconst type = getType(field, fieldName);\n\t\tconst builder = db.schema.alterTable(table.table);\n\t\tif (field.index) {\n\t\t\tconst index = db.schema.alterTable(table.table).addIndex(`${table.table}_${fieldName}_idx`);\n\t\t\tmigrations.push(index);\n\t\t}\n\t\tconst built = builder.addColumn(fieldName, type, (col) => {\n\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\tif (field.unique) col = col.unique();\n\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\treturn col;\n\t\t});\n\t\tmigrations.push(built);\n\t}\n\tconst toBeIndexed = [];\n\tif (config.advanced?.database?.useNumberId) logger$1.warn(\"`useNumberId` is deprecated. Please use `generateId` with `serial` instead.\");\n\tif (toBeCreated.length) for (const table of toBeCreated) {\n\t\tconst idType = getType({ type: useNumberId ? \"number\" : \"string\" }, \"id\");\n\t\tlet dbT = db.schema.createTable(table.table).addColumn(\"id\", idType, (col) => {\n\t\t\tif (useNumberId) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"sqlite\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"mssql\") return col.identity().primaryKey().notNull();\n\t\t\t\treturn col.autoIncrement().primaryKey().notNull();\n\t\t\t}\n\t\t\tif (useUUIDs) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`pg_catalog.gen_random_uuid()`).notNull();\n\t\t\t\treturn col.primaryKey().notNull();\n\t\t\t}\n\t\t\treturn col.primaryKey().notNull();\n\t\t});\n\t\tfor (const [fieldName, field] of Object.entries(table.fields)) {\n\t\t\tconst type = getType(field, fieldName);\n\t\t\tdbT = dbT.addColumn(fieldName, type, (col) => {\n\t\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\t\tif (field.unique) col = col.unique();\n\t\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\t\treturn col;\n\t\t\t});\n\t\t\tif (field.index) {\n\t\t\t\tconst builder = db.schema.createIndex(`${table.table}_${fieldName}_${field.unique ? \"uidx\" : \"idx\"}`).on(table.table).columns([fieldName]);\n\t\t\t\ttoBeIndexed.push(field.unique ? builder.unique() : builder);\n\t\t\t}\n\t\t}\n\t\tmigrations.push(dbT);\n\t}\n\tif (toBeIndexed.length) for (const index of toBeIndexed) migrations.push(index);\n\tasync function runMigrations() {\n\t\tfor (const migration of migrations) await migration.execute();\n\t}\n\tasync function compileMigrations() {\n\t\treturn migrations.map((m) => m.compile().sql).join(\";\\n\\n\") + \";\";\n\t}\n\treturn {\n\t\ttoBeCreated,\n\t\ttoBeAdded,\n\t\trunMigrations,\n\t\tcompileMigrations\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=get-migration.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9nZXQtbWlncmF0aW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE2RTtBQUNoQztBQUNRO0FBQ0E7QUFDeEI7QUFDcUQ7O0FBRWxGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQ0FBRztBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMERBQVM7QUFDbkMsa0JBQWtCLG1FQUFZO0FBQzlCLE9BQU8sbUNBQW1DLFFBQVEseUZBQW1CO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsY0FBYztBQUN0RTtBQUNBLGVBQWUsMkNBQUc7QUFDbEI7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixvREFBb0QsY0FBYztBQUNsRSxJQUFJO0FBQ0osd0RBQXdELHVEQUF1RDtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJDQUFHO0FBQ2xDO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0JBQXNCLHNCQUFzQixjQUFjLEtBQUssd0RBQXdEO0FBQ2pKLEdBQUc7QUFDSCwwRkFBMEYsdURBQXVEO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVyxXQUFXLEtBQUssaURBQWlELFlBQVksVUFBVSxnQkFBZ0I7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJDQUFHO0FBQ2QsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0QkFBNEIsMkNBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYSxlQUFlLFVBQVU7QUFDM0c7QUFDQTtBQUNBLHNCQUFzQiw4RUFBZ0I7QUFDdEMsVUFBVSxtRUFBYTtBQUN2QjtBQUNBLEVBQUU7QUFDRixzQkFBc0IsOEVBQWdCO0FBQ3RDLFVBQVUsbUVBQWE7QUFDdkI7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGFBQWEsb0JBQW9CLEdBQUc7QUFDcEM7QUFDQTtBQUNBLElBQUksRUFBRTtBQUNOLElBQUk7QUFDSixhQUFhLE1BQU0sR0FBRyxNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxZQUFZLEdBQUcsVUFBVTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2TEFBNkwsMkNBQUc7QUFDaE0sNEJBQTRCLDJDQUFHO0FBQy9CO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUNBQXlDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsMkNBQUc7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhMQUE4TCwyQ0FBRztBQUNqTSw2QkFBNkIsMkNBQUc7QUFDaEM7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2Q0FBNkMsWUFBWSxHQUFHLFVBQVUsR0FBRyw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsV0FBVztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29DO0FBQ3BDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXGdldC1taWdyYXRpb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRBdXRoVGFibGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCI7XG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyBpbml0R2V0RmllbGROYW1lLCBpbml0R2V0TW9kZWxOYW1lIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiL2FkYXB0ZXJcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9nZXQtbWlncmF0aW9uLnRzXG5jb25zdCBtYXAgPSB7XG5cdHBvc3RncmVzOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcImNoYXJhY3RlciB2YXJ5aW5nXCIsXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnQ0XCIsXG5cdFx0XHRcImludGVnZXJcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcIm51bWVyaWNcIixcblx0XHRcdFwicmVhbFwiLFxuXHRcdFx0XCJkb3VibGUgcHJlY2lzaW9uXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJvb2xcIiwgXCJib29sZWFuXCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwidGltZXN0YW1wdHpcIixcblx0XHRcdFwidGltZXN0YW1wXCIsXG5cdFx0XHRcImRhdGVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1wianNvblwiLCBcImpzb25iXCJdXG5cdH0sXG5cdG15c3FsOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRlZ2VyXCIsXG5cdFx0XHRcImludFwiLFxuXHRcdFx0XCJiaWdpbnRcIixcblx0XHRcdFwic21hbGxpbnRcIixcblx0XHRcdFwiZGVjaW1hbFwiLFxuXHRcdFx0XCJmbG9hdFwiLFxuXHRcdFx0XCJkb3VibGVcIlxuXHRcdF0sXG5cdFx0Ym9vbGVhbjogW1wiYm9vbGVhblwiLCBcInRpbnlpbnRcIl0sXG5cdFx0ZGF0ZTogW1xuXHRcdFx0XCJ0aW1lc3RhbXBcIixcblx0XHRcdFwiZGF0ZXRpbWVcIixcblx0XHRcdFwiZGF0ZVwiXG5cdFx0XSxcblx0XHRqc29uOiBbXCJqc29uXCJdXG5cdH0sXG5cdHNxbGl0ZToge1xuXHRcdHN0cmluZzogW1wiVEVYVFwiXSxcblx0XHRudW1iZXI6IFtcIklOVEVHRVJcIiwgXCJSRUFMXCJdLFxuXHRcdGJvb2xlYW46IFtcIklOVEVHRVJcIiwgXCJCT09MRUFOXCJdLFxuXHRcdGRhdGU6IFtcIkRBVEVcIiwgXCJJTlRFR0VSXCJdLFxuXHRcdGpzb246IFtcIlRFWFRcIl1cblx0fSxcblx0bXNzcWw6IHtcblx0XHRzdHJpbmc6IFtcblx0XHRcdFwidmFyY2hhclwiLFxuXHRcdFx0XCJudmFyY2hhclwiLFxuXHRcdFx0XCJ1bmlxdWVpZGVudGlmaWVyXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcImRlY2ltYWxcIixcblx0XHRcdFwiZmxvYXRcIixcblx0XHRcdFwiZG91YmxlXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJpdFwiLCBcInNtYWxsaW50XCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwiZGF0ZXRpbWUyXCIsXG5cdFx0XHRcImRhdGVcIixcblx0XHRcdFwiZGF0ZXRpbWVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1widmFyY2hhclwiLCBcIm52YXJjaGFyXCJdXG5cdH1cbn07XG5mdW5jdGlvbiBtYXRjaFR5cGUoY29sdW1uRGF0YVR5cGUsIGZpZWxkVHlwZSwgZGJUeXBlKSB7XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSh0eXBlKSB7XG5cdFx0cmV0dXJuIHR5cGUudG9Mb3dlckNhc2UoKS5zcGxpdChcIihcIilbMF0udHJpbSgpO1xuXHR9XG5cdGlmIChmaWVsZFR5cGUgPT09IFwic3RyaW5nW11cIiB8fCBmaWVsZFR5cGUgPT09IFwibnVtYmVyW11cIikgcmV0dXJuIGNvbHVtbkRhdGFUeXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJqc29uXCIpO1xuXHRjb25zdCB0eXBlcyA9IG1hcFtkYlR5cGVdO1xuXHRyZXR1cm4gKEFycmF5LmlzQXJyYXkoZmllbGRUeXBlKSA/IHR5cGVzW1wic3RyaW5nXCJdLm1hcCgodCkgPT4gdC50b0xvd2VyQ2FzZSgpKSA6IHR5cGVzW2ZpZWxkVHlwZV0ubWFwKCh0KSA9PiB0LnRvTG93ZXJDYXNlKCkpKS5pbmNsdWRlcyhub3JtYWxpemUoY29sdW1uRGF0YVR5cGUpKTtcbn1cbi8qKlxuKiBHZXQgdGhlIGN1cnJlbnQgUG9zdGdyZVNRTCBzY2hlbWEgKHNlYXJjaF9wYXRoKSBmb3IgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiogUmV0dXJucyB0aGUgZmlyc3Qgc2NoZW1hIGluIHRoZSBzZWFyY2hfcGF0aCwgZGVmYXVsdGluZyB0byAncHVibGljJyBpZiBub3QgZm91bmRcbiovXG5hc3luYyBmdW5jdGlvbiBnZXRQb3N0Z3Jlc1NjaGVtYShkYikge1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBTSE9XIHNlYXJjaF9wYXRoYC5leGVjdXRlKGRiKTtcblx0XHRpZiAocmVzdWx0LnJvd3NbMF0/LnNlYXJjaF9wYXRoKSByZXR1cm4gcmVzdWx0LnJvd3NbMF0uc2VhcmNoX3BhdGguc3BsaXQoXCIsXCIpLm1hcCgocykgPT4gcy50cmltKCkpLm1hcCgocykgPT4gcy5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpKS5maWx0ZXIoKHMpID0+ICFzLnN0YXJ0c1dpdGgoXCIkXCIpKVswXSB8fCBcInB1YmxpY1wiO1xuXHR9IGNhdGNoIHt9XG5cdHJldHVybiBcInB1YmxpY1wiO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0TWlncmF0aW9ucyhjb25maWcpIHtcblx0Y29uc3QgYmV0dGVyQXV0aFNjaGVtYSA9IGdldFNjaGVtYShjb25maWcpO1xuXHRjb25zdCBsb2dnZXIkMSA9IGNyZWF0ZUxvZ2dlcihjb25maWcubG9nZ2VyKTtcblx0bGV0IHsga3lzZWx5OiBkYiwgZGF0YWJhc2VUeXBlOiBkYlR5cGUgfSA9IGF3YWl0IGNyZWF0ZUt5c2VseUFkYXB0ZXIoY29uZmlnKTtcblx0aWYgKCFkYlR5cGUpIHtcblx0XHRsb2dnZXIkMS53YXJuKFwiQ291bGQgbm90IGRldGVybWluZSBkYXRhYmFzZSB0eXBlLCBkZWZhdWx0aW5nIHRvIHNxbGl0ZS4gUGxlYXNlIHByb3ZpZGUgYSB0eXBlIGluIHRoZSBkYXRhYmFzZSBvcHRpb25zIHRvIGF2b2lkIHRoaXMuXCIpO1xuXHRcdGRiVHlwZSA9IFwic3FsaXRlXCI7XG5cdH1cblx0aWYgKCFkYikge1xuXHRcdGxvZ2dlciQxLmVycm9yKFwiT25seSBreXNlbHkgYWRhcHRlciBpcyBzdXBwb3J0ZWQgZm9yIG1pZ3JhdGlvbnMuIFlvdSBjYW4gdXNlIGBnZW5lcmF0ZWAgY29tbWFuZCB0byBnZW5lcmF0ZSB0aGUgc2NoZW1hLCBpZiB5b3UncmUgdXNpbmcgYSBkaWZmZXJlbnQgYWRhcHRlci5cIik7XG5cdFx0cHJvY2Vzcy5leGl0KDEpO1xuXHR9XG5cdGxldCBjdXJyZW50U2NoZW1hID0gXCJwdWJsaWNcIjtcblx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSB7XG5cdFx0Y3VycmVudFNjaGVtYSA9IGF3YWl0IGdldFBvc3RncmVzU2NoZW1hKGRiKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgUG9zdGdyZVNRTCBtaWdyYXRpb246IFVzaW5nIHNjaGVtYSAnJHtjdXJyZW50U2NoZW1hfScgKGZyb20gc2VhcmNoX3BhdGgpYCk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICghKGF3YWl0IHNxbGBcblx0XHRcdFx0U0VMRUNUIHNjaGVtYV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5zY2hlbWF0YSBcblx0XHRcdFx0V0hFUkUgc2NoZW1hX25hbWUgPSAke2N1cnJlbnRTY2hlbWF9XG5cdFx0XHRgLmV4ZWN1dGUoZGIpKS5yb3dzWzBdKSBsb2dnZXIkMS53YXJuKGBTY2hlbWEgJyR7Y3VycmVudFNjaGVtYX0nIGRvZXMgbm90IGV4aXN0LiBUYWJsZXMgd2lsbCBiZSBpbnNwZWN0ZWQgZnJvbSBhdmFpbGFibGUgc2NoZW1hcy4gQ29uc2lkZXIgY3JlYXRpbmcgdGhlIHNjaGVtYSBmaXJzdCBvciBjaGVja2luZyB5b3VyIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uYCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxvZ2dlciQxLmRlYnVnKGBDb3VsZCBub3QgdmVyaWZ5IHNjaGVtYSBleGlzdGVuY2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHRcdH1cblx0fVxuXHRjb25zdCBhbGxUYWJsZU1ldGFkYXRhID0gYXdhaXQgZGIuaW50cm9zcGVjdGlvbi5nZXRUYWJsZXMoKTtcblx0bGV0IHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhO1xuXHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHRyeSB7XG5cdFx0Y29uc3QgdGFibGVzSW5TY2hlbWEgPSBhd2FpdCBzcWxgXG5cdFx0XHRcdFNFTEVDVCB0YWJsZV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgXG5cdFx0XHRcdFdIRVJFIHRhYmxlX3NjaGVtYSA9ICR7Y3VycmVudFNjaGVtYX1cblx0XHRcdFx0QU5EIHRhYmxlX3R5cGUgPSAnQkFTRSBUQUJMRSdcblx0XHRcdGAuZXhlY3V0ZShkYik7XG5cdFx0Y29uc3QgdGFibGVOYW1lc0luU2NoZW1hID0gbmV3IFNldCh0YWJsZXNJblNjaGVtYS5yb3dzLm1hcCgocm93KSA9PiByb3cudGFibGVfbmFtZSkpO1xuXHRcdHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhLmZpbHRlcigodGFibGUpID0+IHRhYmxlLnNjaGVtYSA9PT0gY3VycmVudFNjaGVtYSAmJiB0YWJsZU5hbWVzSW5TY2hlbWEuaGFzKHRhYmxlLm5hbWUpKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgRm91bmQgJHt0YWJsZU1ldGFkYXRhLmxlbmd0aH0gdGFibGUocykgaW4gc2NoZW1hICcke2N1cnJlbnRTY2hlbWF9JzogJHt0YWJsZU1ldGFkYXRhLm1hcCgodCkgPT4gdC5uYW1lKS5qb2luKFwiLCBcIikgfHwgXCIobm9uZSlcIn1gKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRsb2dnZXIkMS53YXJuKGBDb3VsZCBub3QgZmlsdGVyIHRhYmxlcyBieSBzY2hlbWEuIFVzaW5nIGFsbCBkaXNjb3ZlcmVkIHRhYmxlcy4gRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHR9XG5cdGNvbnN0IHRvQmVDcmVhdGVkID0gW107XG5cdGNvbnN0IHRvQmVBZGRlZCA9IFtdO1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhiZXR0ZXJBdXRoU2NoZW1hKSkge1xuXHRcdGNvbnN0IHRhYmxlID0gdGFibGVNZXRhZGF0YS5maW5kKCh0KSA9PiB0Lm5hbWUgPT09IGtleSk7XG5cdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0Y29uc3QgdEluZGV4ID0gdG9CZUNyZWF0ZWQuZmluZEluZGV4KCh0KSA9PiB0LnRhYmxlID09PSBrZXkpO1xuXHRcdFx0Y29uc3QgdGFibGVEYXRhID0ge1xuXHRcdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0XHRmaWVsZHM6IHZhbHVlLmZpZWxkcyxcblx0XHRcdFx0b3JkZXI6IHZhbHVlLm9yZGVyIHx8IEluZmluaXR5XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgaW5zZXJ0SW5kZXggPSB0b0JlQ3JlYXRlZC5maW5kSW5kZXgoKHQpID0+ICh0Lm9yZGVyIHx8IEluZmluaXR5KSA+IHRhYmxlRGF0YS5vcmRlcik7XG5cdFx0XHRpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSBpZiAodEluZGV4ID09PSAtMSkgdG9CZUNyZWF0ZWQucHVzaCh0YWJsZURhdGEpO1xuXHRcdFx0ZWxzZSB0b0JlQ3JlYXRlZFt0SW5kZXhdLmZpZWxkcyA9IHtcblx0XHRcdFx0Li4udG9CZUNyZWF0ZWRbdEluZGV4XS5maWVsZHMsXG5cdFx0XHRcdC4uLnZhbHVlLmZpZWxkc1xuXHRcdFx0fTtcblx0XHRcdGVsc2UgdG9CZUNyZWF0ZWQuc3BsaWNlKGluc2VydEluZGV4LCAwLCB0YWJsZURhdGEpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGNvbnN0IHRvQmVBZGRlZEZpZWxkcyA9IHt9O1xuXHRcdGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlLmZpZWxkcykpIHtcblx0XHRcdGNvbnN0IGNvbHVtbiA9IHRhYmxlLmNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSBmaWVsZE5hbWUpO1xuXHRcdFx0aWYgKCFjb2x1bW4pIHtcblx0XHRcdFx0dG9CZUFkZGVkRmllbGRzW2ZpZWxkTmFtZV0gPSBmaWVsZDtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWF0Y2hUeXBlKGNvbHVtbi5kYXRhVHlwZSwgZmllbGQudHlwZSwgZGJUeXBlKSkgY29udGludWU7XG5cdFx0XHRlbHNlIGxvZ2dlciQxLndhcm4oYEZpZWxkICR7ZmllbGROYW1lfSBpbiB0YWJsZSAke2tleX0gaGFzIGEgZGlmZmVyZW50IHR5cGUgaW4gdGhlIGRhdGFiYXNlLiBFeHBlY3RlZCAke2ZpZWxkLnR5cGV9IGJ1dCBnb3QgJHtjb2x1bW4uZGF0YVR5cGV9LmApO1xuXHRcdH1cblx0XHRpZiAoT2JqZWN0LmtleXModG9CZUFkZGVkRmllbGRzKS5sZW5ndGggPiAwKSB0b0JlQWRkZWQucHVzaCh7XG5cdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0ZmllbGRzOiB0b0JlQWRkZWRGaWVsZHMsXG5cdFx0XHRvcmRlcjogdmFsdWUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9KTtcblx0fVxuXHRjb25zdCBtaWdyYXRpb25zID0gW107XG5cdGNvbnN0IHVzZVVVSURzID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJ1dWlkXCI7XG5cdGNvbnN0IHVzZU51bWJlcklkID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIjtcblx0ZnVuY3Rpb24gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGZpZWxkLnR5cGU7XG5cdFx0Y29uc3QgcHJvdmlkZXIgPSBkYlR5cGUgfHwgXCJzcWxpdGVcIjtcblx0XHRjb25zdCB0eXBlTWFwID0ge1xuXHRcdFx0c3RyaW5nOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcInRleHRcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLnVuaXF1ZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5yZWZlcmVuY2VzID8gXCJ2YXJjaGFyKDM2KVwiIDogZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQuaW5kZXggPyBcInZhcmNoYXIoMjU1KVwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG1zc3FsOiBmaWVsZC51bmlxdWUgfHwgZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQucmVmZXJlbmNlcyA/IFwidmFyY2hhcigzNilcIiA6IFwidmFyY2hhcig4MDAwKVwiXG5cdFx0XHR9LFxuXHRcdFx0Ym9vbGVhbjoge1xuXHRcdFx0XHRzcWxpdGU6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJib29sZWFuXCIsXG5cdFx0XHRcdG15c3FsOiBcImJvb2xlYW5cIixcblx0XHRcdFx0bXNzcWw6IFwic21hbGxpbnRcIlxuXHRcdFx0fSxcblx0XHRcdG51bWJlcjoge1xuXHRcdFx0XHRzcWxpdGU6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0cG9zdGdyZXM6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXNzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIlxuXHRcdFx0fSxcblx0XHRcdGRhdGU6IHtcblx0XHRcdFx0c3FsaXRlOiBcImRhdGVcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwidGltZXN0YW1wdHpcIixcblx0XHRcdFx0bXlzcWw6IFwidGltZXN0YW1wKDMpXCIsXG5cdFx0XHRcdG1zc3FsOiBzcWxgZGF0ZXRpbWUyKDMpYFxuXHRcdFx0fSxcblx0XHRcdGpzb246IHtcblx0XHRcdFx0c3FsaXRlOiBcInRleHRcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwianNvbmJcIixcblx0XHRcdFx0bXlzcWw6IFwianNvblwiLFxuXHRcdFx0XHRtc3NxbDogXCJ2YXJjaGFyKDgwMDApXCJcblx0XHRcdH0sXG5cdFx0XHRpZDoge1xuXHRcdFx0XHRwb3N0Z3JlczogdXNlTnVtYmVySWQgPyBzcWxgaW50ZWdlciBHRU5FUkFURUQgQlkgREVGQVVMVCBBUyBJREVOVElUWWAgOiB1c2VVVUlEcyA/IFwidXVpZFwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG15c3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdG1zc3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdHNxbGl0ZTogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IFwidGV4dFwiXG5cdFx0XHR9LFxuXHRcdFx0Zm9yZWlnbktleUlkOiB7XG5cdFx0XHRcdHBvc3RncmVzOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInV1aWRcIiA6IFwidGV4dFwiLFxuXHRcdFx0XHRteXNxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRtc3NxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRzcWxpdGU6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiBcInRleHRcIlxuXHRcdFx0fSxcblx0XHRcdFwic3RyaW5nW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fSxcblx0XHRcdFwibnVtYmVyW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKGZpZWxkTmFtZSA9PT0gXCJpZFwiIHx8IGZpZWxkLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIpIHtcblx0XHRcdGlmIChmaWVsZE5hbWUgPT09IFwiaWRcIikgcmV0dXJuIHR5cGVNYXAuaWRbcHJvdmlkZXJdO1xuXHRcdFx0cmV0dXJuIHR5cGVNYXAuZm9yZWlnbktleUlkW3Byb3ZpZGVyXTtcblx0XHR9XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHJldHVybiBcInRleHRcIjtcblx0XHRpZiAoISh0eXBlIGluIHR5cGVNYXApKSB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGZpZWxkIHR5cGUgJyR7U3RyaW5nKHR5cGUpfScgZm9yIGZpZWxkICcke2ZpZWxkTmFtZX0nLiBBbGxvd2VkIHR5cGVzIGFyZTogc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIGRhdGUsIHN0cmluZ1tdLCBudW1iZXJbXS4gSWYgeW91IG5lZWQgdG8gc3RvcmUgc3RydWN0dXJlZCBkYXRhLCBzdG9yZSBpdCBhcyBhIEpTT04gc3RyaW5nICh0eXBlOiBcInN0cmluZ1wiKSBvciBzcGxpdCBpdCBpbnRvIHByaW1pdGl2ZSBmaWVsZHMuIFNlZSBodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL2FkdmFuY2VkL3NjaGVtYSNhZGRpdGlvbmFsLWZpZWxkc2ApO1xuXHRcdHJldHVybiB0eXBlTWFwW3R5cGVdW3Byb3ZpZGVyXTtcblx0fVxuXHRjb25zdCBnZXRNb2RlbE5hbWUgPSBpbml0R2V0TW9kZWxOYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRjb25zdCBnZXRGaWVsZE5hbWUgPSBpbml0R2V0RmllbGROYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRmdW5jdGlvbiBnZXRSZWZlcmVuY2VQYXRoKG1vZGVsLCBmaWVsZCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYCR7Z2V0TW9kZWxOYW1lKG1vZGVsKX0uJHtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZmllbGRcblx0XHRcdH0pfWA7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gYCR7bW9kZWx9LiR7ZmllbGR9YDtcblx0XHR9XG5cdH1cblx0aWYgKHRvQmVBZGRlZC5sZW5ndGgpIGZvciAoY29uc3QgdGFibGUgb2YgdG9CZUFkZGVkKSBmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGdldFR5cGUoZmllbGQsIGZpZWxkTmFtZSk7XG5cdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5hbHRlclRhYmxlKHRhYmxlLnRhYmxlKTtcblx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdGNvbnN0IGluZGV4ID0gZGIuc2NoZW1hLmFsdGVyVGFibGUodGFibGUudGFibGUpLmFkZEluZGV4KGAke3RhYmxlLnRhYmxlfV8ke2ZpZWxkTmFtZX1faWR4YCk7XG5cdFx0XHRtaWdyYXRpb25zLnB1c2goaW5kZXgpO1xuXHRcdH1cblx0XHRjb25zdCBidWlsdCA9IGJ1aWxkZXIuYWRkQ29sdW1uKGZpZWxkTmFtZSwgdHlwZSwgKGNvbCkgPT4ge1xuXHRcdFx0Y29sID0gZmllbGQucmVxdWlyZWQgIT09IGZhbHNlID8gY29sLm5vdE51bGwoKSA6IGNvbDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdGlmIChmaWVsZC51bmlxdWUpIGNvbCA9IGNvbC51bmlxdWUoKTtcblx0XHRcdGlmIChmaWVsZC50eXBlID09PSBcImRhdGVcIiAmJiB0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiIHx8IGRiVHlwZSA9PT0gXCJteXNxbFwiIHx8IGRiVHlwZSA9PT0gXCJtc3NxbFwiKSkgaWYgKGRiVHlwZSA9PT0gXCJteXNxbFwiKSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUCgzKWApO1xuXHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0cmV0dXJuIGNvbDtcblx0XHR9KTtcblx0XHRtaWdyYXRpb25zLnB1c2goYnVpbHQpO1xuXHR9XG5cdGNvbnN0IHRvQmVJbmRleGVkID0gW107XG5cdGlmIChjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCkgbG9nZ2VyJDEud2FybihcImB1c2VOdW1iZXJJZGAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgZ2VuZXJhdGVJZGAgd2l0aCBgc2VyaWFsYCBpbnN0ZWFkLlwiKTtcblx0aWYgKHRvQmVDcmVhdGVkLmxlbmd0aCkgZm9yIChjb25zdCB0YWJsZSBvZiB0b0JlQ3JlYXRlZCkge1xuXHRcdGNvbnN0IGlkVHlwZSA9IGdldFR5cGUoeyB0eXBlOiB1c2VOdW1iZXJJZCA/IFwibnVtYmVyXCIgOiBcInN0cmluZ1wiIH0sIFwiaWRcIik7XG5cdFx0bGV0IGRiVCA9IGRiLnNjaGVtYS5jcmVhdGVUYWJsZSh0YWJsZS50YWJsZSkuYWRkQ29sdW1uKFwiaWRcIiwgaWRUeXBlLCAoY29sKSA9PiB7XG5cdFx0XHRpZiAodXNlTnVtYmVySWQpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdGVsc2UgaWYgKGRiVHlwZSA9PT0gXCJzcWxpdGVcIikgcmV0dXJuIGNvbC5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuXHRcdFx0XHRlbHNlIGlmIChkYlR5cGUgPT09IFwibXNzcWxcIikgcmV0dXJuIGNvbC5pZGVudGl0eSgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wuYXV0b0luY3JlbWVudCgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodXNlVVVJRHMpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5kZWZhdWx0VG8oc3FsYHBnX2NhdGFsb2cuZ2VuX3JhbmRvbV91dWlkKClgKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0XHRjb25zdCB0eXBlID0gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKTtcblx0XHRcdGRiVCA9IGRiVC5hZGRDb2x1bW4oZmllbGROYW1lLCB0eXBlLCAoY29sKSA9PiB7XG5cdFx0XHRcdGNvbCA9IGZpZWxkLnJlcXVpcmVkICE9PSBmYWxzZSA/IGNvbC5ub3ROdWxsKCkgOiBjb2w7XG5cdFx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdFx0aWYgKGZpZWxkLnVuaXF1ZSkgY29sID0gY29sLnVuaXF1ZSgpO1xuXHRcdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIiB8fCBkYlR5cGUgPT09IFwibXlzcWxcIiB8fCBkYlR5cGUgPT09IFwibXNzcWxcIikpIGlmIChkYlR5cGUgPT09IFwibXlzcWxcIikgY29sID0gY29sLmRlZmF1bHRUbyhzcWxgQ1VSUkVOVF9USU1FU1RBTVAoMylgKTtcblx0XHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0XHRyZXR1cm4gY29sO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5jcmVhdGVJbmRleChgJHt0YWJsZS50YWJsZX1fJHtmaWVsZE5hbWV9XyR7ZmllbGQudW5pcXVlID8gXCJ1aWR4XCIgOiBcImlkeFwifWApLm9uKHRhYmxlLnRhYmxlKS5jb2x1bW5zKFtmaWVsZE5hbWVdKTtcblx0XHRcdFx0dG9CZUluZGV4ZWQucHVzaChmaWVsZC51bmlxdWUgPyBidWlsZGVyLnVuaXF1ZSgpIDogYnVpbGRlcik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG1pZ3JhdGlvbnMucHVzaChkYlQpO1xuXHR9XG5cdGlmICh0b0JlSW5kZXhlZC5sZW5ndGgpIGZvciAoY29uc3QgaW5kZXggb2YgdG9CZUluZGV4ZWQpIG1pZ3JhdGlvbnMucHVzaChpbmRleCk7XG5cdGFzeW5jIGZ1bmN0aW9uIHJ1bk1pZ3JhdGlvbnMoKSB7XG5cdFx0Zm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9ucykgYXdhaXQgbWlncmF0aW9uLmV4ZWN1dGUoKTtcblx0fVxuXHRhc3luYyBmdW5jdGlvbiBjb21waWxlTWlncmF0aW9ucygpIHtcblx0XHRyZXR1cm4gbWlncmF0aW9ucy5tYXAoKG0pID0+IG0uY29tcGlsZSgpLnNxbCkuam9pbihcIjtcXG5cXG5cIikgKyBcIjtcIjtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHRvQmVDcmVhdGVkLFxuXHRcdHRvQmVBZGRlZCxcblx0XHRydW5NaWdyYXRpb25zLFxuXHRcdGNvbXBpbGVNaWdyYXRpb25zXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0TWlncmF0aW9ucywgbWF0Y2hUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtbWlncmF0aW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/get-schema.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSchema: () => (/* binding */ getSchema)\n/* harmony export */ });\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n\n\n//#region src/db/get-schema.ts\nfunction getSchema(config) {\n\tconst tables = (0, _index_mjs__WEBPACK_IMPORTED_MODULE_0__.db_exports.getAuthTables)(config);\n\tconst schema = {};\n\tfor (const key in tables) {\n\t\tconst table = tables[key];\n\t\tconst fields = table.fields;\n\t\tconst actualFields = {};\n\t\tObject.entries(fields).forEach(([key$1, field]) => {\n\t\t\tactualFields[field.fieldName || key$1] = field;\n\t\t\tif (field.references) {\n\t\t\t\tconst refTable = tables[field.references.model];\n\t\t\t\tif (refTable) actualFields[field.fieldName || key$1].references = {\n\t\t\t\t\t...field.references,\n\t\t\t\t\tmodel: refTable.modelName,\n\t\t\t\t\tfield: field.references.field\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tif (schema[table.modelName]) {\n\t\t\tschema[table.modelName].fields = {\n\t\t\t\t...schema[table.modelName].fields,\n\t\t\t\t...actualFields\n\t\t\t};\n\t\t\tcontinue;\n\t\t}\n\t\tschema[table.modelName] = {\n\t\t\tfields: actualFields,\n\t\t\torder: table.order || Infinity\n\t\t};\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9nZXQtc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFekM7QUFDQTtBQUNBLG9CQUFvQixrREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxnZXQtc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYl9leHBvcnRzIH0gZnJvbSBcIi4vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvZ2V0LXNjaGVtYS50c1xuZnVuY3Rpb24gZ2V0U2NoZW1hKGNvbmZpZykge1xuXHRjb25zdCB0YWJsZXMgPSAoMCwgZGJfZXhwb3J0cy5nZXRBdXRoVGFibGVzKShjb25maWcpO1xuXHRjb25zdCBzY2hlbWEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gdGFibGVzKSB7XG5cdFx0Y29uc3QgdGFibGUgPSB0YWJsZXNba2V5XTtcblx0XHRjb25zdCBmaWVsZHMgPSB0YWJsZS5maWVsZHM7XG5cdFx0Y29uc3QgYWN0dWFsRmllbGRzID0ge307XG5cdFx0T2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChba2V5JDEsIGZpZWxkXSkgPT4ge1xuXHRcdFx0YWN0dWFsRmllbGRzW2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXkkMV0gPSBmaWVsZDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZlRhYmxlID0gdGFibGVzW2ZpZWxkLnJlZmVyZW5jZXMubW9kZWxdO1xuXHRcdFx0XHRpZiAocmVmVGFibGUpIGFjdHVhbEZpZWxkc1tmaWVsZC5maWVsZE5hbWUgfHwga2V5JDFdLnJlZmVyZW5jZXMgPSB7XG5cdFx0XHRcdFx0Li4uZmllbGQucmVmZXJlbmNlcyxcblx0XHRcdFx0XHRtb2RlbDogcmVmVGFibGUubW9kZWxOYW1lLFxuXHRcdFx0XHRcdGZpZWxkOiBmaWVsZC5yZWZlcmVuY2VzLmZpZWxkXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdKSB7XG5cdFx0XHRzY2hlbWFbdGFibGUubW9kZWxOYW1lXS5maWVsZHMgPSB7XG5cdFx0XHRcdC4uLnNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdLmZpZWxkcyxcblx0XHRcdFx0Li4uYWN0dWFsRmllbGRzXG5cdFx0XHR9O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdID0ge1xuXHRcdFx0ZmllbGRzOiBhY3R1YWxGaWVsZHMsXG5cdFx0XHRvcmRlcjogdGFibGUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9O1xuXHR9XG5cdHJldHVybiBzY2hlbWE7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0U2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtc2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/index.mjs":
/*!****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/index.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.accountSchema),\n/* harmony export */   convertFromDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB),\n/* harmony export */   convertToDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.coreSchema),\n/* harmony export */   createFieldAttribute: () => (/* reexport safe */ _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute),\n/* harmony export */   createInternalAdapter: () => (/* reexport safe */ _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter),\n/* harmony export */   db_exports: () => (/* binding */ db_exports),\n/* harmony export */   getAdapter: () => (/* reexport safe */ _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.getAuthTables),\n/* harmony export */   getBaseAdapter: () => (/* reexport safe */ _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter),\n/* harmony export */   getMigrations: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations),\n/* harmony export */   getSchema: () => (/* reexport safe */ _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema),\n/* harmony export */   getWithHooks: () => (/* reexport safe */ _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks),\n/* harmony export */   matchType: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType),\n/* harmony export */   mergeSchema: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData),\n/* harmony export */   parseSessionInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.sessionSchema),\n/* harmony export */   toZodSchema: () => (/* reexport safe */ _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.userSchema),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.verificationSchema)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.mjs */ \"(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\");\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter-kysely.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _field_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./field.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/field.mjs\");\n/* harmony import */ var _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./field-converter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./get-migration.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/db/index.ts\nvar db_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tconvertFromDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB,\n\tconvertToDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB,\n\tcreateFieldAttribute: () => _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute,\n\tcreateInternalAdapter: () => _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter,\n\tgetAdapter: () => _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter,\n\tgetBaseAdapter: () => _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter,\n\tgetMigrations: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations,\n\tgetSchema: () => _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema,\n\tgetWithHooks: () => _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks,\n\tmatchType: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType,\n\tmergeSchema: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema,\n\tparseAccountInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput,\n\tparseAccountOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput,\n\tparseAdditionalUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput,\n\tparseInputData: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData,\n\tparseSessionInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput,\n\tparseSessionOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput,\n\tparseUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput,\n\tparseUserOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput,\n\ttoZodSchema: () => _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema\n});\n\n(0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__reExport)(db_exports, _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__);\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNwQjtBQUNGO0FBQ0M7QUFDZ0I7QUFDaUk7QUFDcEo7QUFDZTtBQUNwQjtBQUNFO0FBQ2tCOztBQUUzQjs7QUFFcEM7QUFDQSxpQ0FBaUMsdUVBQVE7QUFDekMsc0JBQXNCLCtEQUFhO0FBQ25DLG9CQUFvQiw2REFBVztBQUMvQiw2QkFBNkIsNERBQW9CO0FBQ2pELDhCQUE4Qix3RUFBcUI7QUFDbkQsbUJBQW1CLDJEQUFVO0FBQzdCLHVCQUF1Qiw2REFBYztBQUNyQyxzQkFBc0IsOERBQWE7QUFDbkMsa0JBQWtCLHNEQUFTO0FBQzNCLHFCQUFxQix5REFBWTtBQUNqQyxrQkFBa0IsMERBQVM7QUFDM0Isb0JBQW9CLG9EQUFXO0FBQy9CLDBCQUEwQiwwREFBaUI7QUFDM0MsMkJBQTJCLDJEQUFrQjtBQUM3QyxpQ0FBaUMsaUVBQXdCO0FBQ3pELHVCQUF1Qix1REFBYztBQUNyQywwQkFBMEIsMERBQWlCO0FBQzNDLDJCQUEyQiwyREFBa0I7QUFDN0MsdUJBQXVCLHVEQUFjO0FBQ3JDLHdCQUF3Qix3REFBZTtBQUN2QyxvQkFBb0Isb0RBQVc7QUFDL0IsQ0FBQztBQUNvRTtBQUNyRSx5RUFBVSxhQUFhLGtEQUE0Qjs7QUFFbkQ7QUFDaVc7QUFDalciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXItYmFzZS5tanNcIjtcbmltcG9ydCB7IGdldEFkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUZpZWxkQXR0cmlidXRlIH0gZnJvbSBcIi4vZmllbGQubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiB9IGZyb20gXCIuL2ZpZWxkLWNvbnZlcnRlci5tanNcIjtcbmltcG9ydCB7IG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2l0aEhvb2tzIH0gZnJvbSBcIi4vd2l0aC1ob29rcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVybmFsQWRhcHRlciB9IGZyb20gXCIuL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuL3RvLXpvZC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRNaWdyYXRpb25zLCBtYXRjaFR5cGUgfSBmcm9tIFwiLi9nZXQtbWlncmF0aW9uLm1qc1wiO1xuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIlxuXG4vLyNyZWdpb24gc3JjL2RiL2luZGV4LnRzXG52YXIgZGJfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdGNvbnZlcnRGcm9tREI6ICgpID0+IGNvbnZlcnRGcm9tREIsXG5cdGNvbnZlcnRUb0RCOiAoKSA9PiBjb252ZXJ0VG9EQixcblx0Y3JlYXRlRmllbGRBdHRyaWJ1dGU6ICgpID0+IGNyZWF0ZUZpZWxkQXR0cmlidXRlLFxuXHRjcmVhdGVJbnRlcm5hbEFkYXB0ZXI6ICgpID0+IGNyZWF0ZUludGVybmFsQWRhcHRlcixcblx0Z2V0QWRhcHRlcjogKCkgPT4gZ2V0QWRhcHRlcixcblx0Z2V0QmFzZUFkYXB0ZXI6ICgpID0+IGdldEJhc2VBZGFwdGVyLFxuXHRnZXRNaWdyYXRpb25zOiAoKSA9PiBnZXRNaWdyYXRpb25zLFxuXHRnZXRTY2hlbWE6ICgpID0+IGdldFNjaGVtYSxcblx0Z2V0V2l0aEhvb2tzOiAoKSA9PiBnZXRXaXRoSG9va3MsXG5cdG1hdGNoVHlwZTogKCkgPT4gbWF0Y2hUeXBlLFxuXHRtZXJnZVNjaGVtYTogKCkgPT4gbWVyZ2VTY2hlbWEsXG5cdHBhcnNlQWNjb3VudElucHV0OiAoKSA9PiBwYXJzZUFjY291bnRJbnB1dCxcblx0cGFyc2VBY2NvdW50T3V0cHV0OiAoKSA9PiBwYXJzZUFjY291bnRPdXRwdXQsXG5cdHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dDogKCkgPT4gcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LFxuXHRwYXJzZUlucHV0RGF0YTogKCkgPT4gcGFyc2VJbnB1dERhdGEsXG5cdHBhcnNlU2Vzc2lvbklucHV0OiAoKSA9PiBwYXJzZVNlc3Npb25JbnB1dCxcblx0cGFyc2VTZXNzaW9uT3V0cHV0OiAoKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQsXG5cdHBhcnNlVXNlcklucHV0OiAoKSA9PiBwYXJzZVVzZXJJbnB1dCxcblx0cGFyc2VVc2VyT3V0cHV0OiAoKSA9PiBwYXJzZVVzZXJPdXRwdXQsXG5cdHRvWm9kU2NoZW1hOiAoKSA9PiB0b1pvZFNjaGVtYVxufSk7XG5pbXBvcnQgKiBhcyBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuX19yZUV4cG9ydChkYl9leHBvcnRzLCBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiwgY3JlYXRlRmllbGRBdHRyaWJ1dGUsIGNyZWF0ZUludGVybmFsQWRhcHRlciwgZGJfZXhwb3J0cywgZ2V0QWRhcHRlciwgZ2V0QmFzZUFkYXB0ZXIsIGdldE1pZ3JhdGlvbnMsIGdldFNjaGVtYSwgZ2V0V2l0aEhvb2tzLCBtYXRjaFR5cGUsIG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0LCB0b1pvZFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/internal-adapter.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInternalAdapter: () => (/* binding */ createInternalAdapter)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/internal-adapter.ts\nconst createInternalAdapter = (adapter, ctx) => {\n\tconst logger = ctx.logger;\n\tconst options = ctx.options;\n\tconst secondaryStorage = options.secondaryStorage;\n\tconst sessionExpiration = options.session?.expiresIn || 3600 * 24 * 7;\n\tconst { createWithHooks, updateWithHooks, updateManyWithHooks, deleteWithHooks, deleteManyWithHooks } = (0,_with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__.getWithHooks)(adapter, ctx);\n\tasync function refreshUserSessions(user) {\n\t\tif (!secondaryStorage) return;\n\t\tconst listRaw = await secondaryStorage.get(`active-sessions-${user.id}`);\n\t\tif (!listRaw) return;\n\t\tconst now = Date.now();\n\t\tconst validSessions = ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || []).filter((s) => s.expiresAt > now);\n\t\tawait Promise.all(validSessions.map(async ({ token }) => {\n\t\t\tconst cached = await secondaryStorage.get(token);\n\t\t\tif (!cached) return;\n\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(cached);\n\t\t\tif (!parsed) return;\n\t\t\tconst sessionTTL = Math.max(Math.floor(new Date(parsed.session.expiresAt).getTime() - now) / 1e3, 0);\n\t\t\tawait secondaryStorage.set(token, JSON.stringify({\n\t\t\t\tsession: parsed.session,\n\t\t\t\tuser\n\t\t\t}), Math.floor(sessionTTL));\n\t\t}));\n\t}\n\treturn {\n\t\tcreateOAuthUser: async (user, account) => {\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.runWithTransaction)(adapter, async () => {\n\t\t\t\tconst createdUser = await createWithHooks({\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t...user\n\t\t\t\t}, \"user\", void 0);\n\t\t\t\treturn {\n\t\t\t\t\tuser: createdUser,\n\t\t\t\t\taccount: await createWithHooks({\n\t\t\t\t\t\t...account,\n\t\t\t\t\t\tuserId: createdUser.id,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}, \"account\", void 0)\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tcreateUser: async (user) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...user,\n\t\t\t\temail: user.email?.toLowerCase()\n\t\t\t}, \"user\", void 0);\n\t\t},\n\t\tcreateAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tlistSessions: async (userId) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\tif (!currentList) return [];\n\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst seenTokens = /* @__PURE__ */ new Set();\n\t\t\t\tconst sessions = [];\n\t\t\t\tfor (const { token, expiresAt } of list) {\n\t\t\t\t\tif (expiresAt <= now || seenTokens.has(token)) continue;\n\t\t\t\t\tseenTokens.add(token);\n\t\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\t\tif (!data) continue;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst parsed = typeof data === \"string\" ? JSON.parse(data) : data;\n\t\t\t\t\t\tif (!parsed?.session) continue;\n\t\t\t\t\t\tsessions.push((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...parsed.session,\n\t\t\t\t\t\t\texpiresAt: new Date(parsed.session.expiresAt)\n\t\t\t\t\t\t}));\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions;\n\t\t\t}\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUsers: async (limit, offset, sortBy, where) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\tlimit,\n\t\t\t\toffset,\n\t\t\t\tsortBy,\n\t\t\t\twhere\n\t\t\t});\n\t\t},\n\t\tcountTotalUsers: async (where) => {\n\t\t\tconst total = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).count({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere\n\t\t\t});\n\t\t\tif (typeof total === \"string\") return parseInt(total);\n\t\t\treturn total;\n\t\t},\n\t\tdeleteUser: async (userId) => {\n\t\t\tif (!secondaryStorage || options.session?.storeSessionInDatabase) await deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"session\", void 0);\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t},\n\t\tcreateSession: async (userId, dontRememberMe, override, overrideAll) => {\n\t\t\tconst ctx$1 = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAuthContext)().catch(() => null);\n\t\t\tconst headers = ctx$1?.headers || ctx$1?.request?.headers;\n\t\t\tconst { id: _, ...rest } = override || {};\n\t\t\tconst defaultAdditionalFields = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionInput)(ctx$1?.context.options ?? options, {});\n\t\t\tconst data = {\n\t\t\t\tipAddress: ctx$1?.request || ctx$1?.headers ? (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__.getIp)(ctx$1?.request || ctx$1?.headers, ctx$1?.context.options) || \"\" : \"\",\n\t\t\t\tuserAgent: headers?.get(\"user-agent\") || \"\",\n\t\t\t\t...rest,\n\t\t\t\texpiresAt: dontRememberMe ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(3600 * 24, \"sec\") : (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(sessionExpiration, \"sec\"),\n\t\t\t\tuserId,\n\t\t\t\ttoken: (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.generateId)(32),\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...defaultAdditionalFields,\n\t\t\t\t...overrideAll ? rest : {}\n\t\t\t};\n\t\t\treturn await createWithHooks(data, \"session\", secondaryStorage ? {\n\t\t\t\tfn: async (sessionData) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* store the session token for the user\n\t\t\t\t\t* so we can retrieve it later for listing sessions\n\t\t\t\t\t*/\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tlist = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tlist = list.filter((session) => session.expiresAt > now && session.token !== data.token);\n\t\t\t\t\t}\n\t\t\t\t\tconst sorted = [...list, {\n\t\t\t\t\t\ttoken: data.token,\n\t\t\t\t\t\texpiresAt: data.expiresAt.getTime()\n\t\t\t\t\t}].sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt ?? data.expiresAt.getTime();\n\t\t\t\t\tconst furthestSessionTTL = Math.max(Math.floor((furthestSessionExp - now) / 1e3), 0);\n\t\t\t\t\tif (furthestSessionTTL > 0) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(sorted), furthestSessionTTL);\n\t\t\t\t\tconst user = await adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((data.expiresAt.getTime() - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) await secondaryStorage.set(data.token, JSON.stringify({\n\t\t\t\t\t\tsession: sessionData,\n\t\t\t\t\t\tuser\n\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\treturn sessionData;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tfindSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessionStringified = await secondaryStorage.get(token);\n\t\t\t\tif (!sessionStringified && !options.session?.storeSessionInDatabase) return null;\n\t\t\t\tif (sessionStringified) {\n\t\t\t\t\tconst s = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(sessionStringified);\n\t\t\t\t\tif (!s) return null;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(s.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.session.updatedAt)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: token,\n\t\t\t\t\tfield: \"token\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...session } = result;\n\t\t\tif (!user) return null;\n\t\t\treturn {\n\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, session),\n\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, user)\n\t\t\t};\n\t\t},\n\t\tfindSessions: async (sessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessions$1 = [];\n\t\t\t\tfor (const sessionToken of sessionTokens) {\n\t\t\t\t\tconst sessionStringified = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (sessionStringified) try {\n\t\t\t\t\t\tconst s = typeof sessionStringified === \"string\" ? JSON.parse(sessionStringified) : sessionStringified;\n\t\t\t\t\t\tif (!s?.session) continue;\n\t\t\t\t\t\tconst session = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsessions$1.push(session);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions$1;\n\t\t\t}\n\t\t\tconst sessions = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"token\",\n\t\t\t\t\tvalue: sessionTokens,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!sessions.length) return [];\n\t\t\tif (sessions.some((session) => !session.user)) return [];\n\t\t\treturn sessions.map((_session) => {\n\t\t\t\tconst { user, ...session } = _session;\n\t\t\t\treturn {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateSession: async (sessionToken, session) => {\n\t\t\treturn await updateWithHooks(session, [{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: sessionToken\n\t\t\t}], \"session\", secondaryStorage ? {\n\t\t\t\tasync fn(data) {\n\t\t\t\t\tconst currentSession = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (!currentSession) return null;\n\t\t\t\t\tconst parsedSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentSession);\n\t\t\t\t\tif (!parsedSession) return null;\n\t\t\t\t\tconst mergedSession = {\n\t\t\t\t\t\t...parsedSession.session,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\texpiresAt: new Date(data.expiresAt ?? parsedSession.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(parsedSession.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(data.updatedAt ?? parsedSession.session.updatedAt)\n\t\t\t\t\t};\n\t\t\t\t\tconst updatedSession = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, mergedSession);\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tconst expiresMs = new Date(updatedSession.expiresAt).getTime();\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((expiresMs - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) {\n\t\t\t\t\t\tawait secondaryStorage.set(sessionToken, JSON.stringify({\n\t\t\t\t\t\t\tsession: updatedSession,\n\t\t\t\t\t\t\tuser: parsedSession.user\n\t\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\t\tconst listKey = `active-sessions-${updatedSession.userId}`;\n\t\t\t\t\t\tconst listRaw = await secondaryStorage.get(listKey);\n\t\t\t\t\t\tconst sorted = (listRaw ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || [] : []).filter((s) => s.token !== sessionToken && s.expiresAt > now).concat([{\n\t\t\t\t\t\t\ttoken: sessionToken,\n\t\t\t\t\t\t\texpiresAt: expiresMs\n\t\t\t\t\t\t}]).sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt;\n\t\t\t\t\t\tif (furthestSessionExp && furthestSessionExp > now) await secondaryStorage.set(listKey, JSON.stringify(sorted), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(listKey);\n\t\t\t\t\t}\n\t\t\t\t\treturn updatedSession;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tdeleteSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\tif (data) {\n\t\t\t\t\tconst { session } = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(data) ?? {};\n\t\t\t\t\tif (!session) {\n\t\t\t\t\t\tlogger.error(\"Session not found in secondary storage\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst userId = session.userId;\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tconst filtered = list.filter((session$1) => session$1.expiresAt > now && session$1.token !== token);\n\t\t\t\t\t\tconst furthestSessionExp = filtered.sort((a, b) => a.expiresAt - b.expiresAt).at(-1)?.expiresAt;\n\t\t\t\t\t\tif (filtered.length > 0 && furthestSessionExp && furthestSessionExp > Date.now()) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(filtered), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(`active-sessions-${userId}`);\n\t\t\t\t\t} else logger.error(\"Active sessions list not found in secondary storage\");\n\t\t\t\t}\n\t\t\t\tawait secondaryStorage.delete(token);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: token\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tdeleteAccounts: async (userId) => {\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteAccount: async (accountId) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: accountId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteSessions: async (userIdOrSessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tif (typeof userIdOrSessionTokens === \"string\") {\n\t\t\t\t\tconst activeSession = await secondaryStorage.get(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t\tconst sessions = activeSession ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(activeSession) : [];\n\t\t\t\t\tif (!sessions) return;\n\t\t\t\t\tfor (const session of sessions) await secondaryStorage.delete(session.token);\n\t\t\t\t\tawait secondaryStorage.delete(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t} else for (const sessionToken of userIdOrSessionTokens) if (await secondaryStorage.get(sessionToken)) await secondaryStorage.delete(sessionToken);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n\t\t\t\tvalue: userIdOrSessionTokens,\n\t\t\t\toperator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tfindOAuthUser: async (email, accountId, providerId) => {\n\t\t\tconst account = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: accountId,\n\t\t\t\t\tfield: \"accountId\"\n\t\t\t\t}, {\n\t\t\t\t\tvalue: providerId,\n\t\t\t\t\tfield: \"providerId\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (account) if (account.user) return {\n\t\t\t\tuser: account.user,\n\t\t\t\tlinkedAccount: account,\n\t\t\t\taccounts: [account]\n\t\t\t};\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: account,\n\t\t\t\t\taccounts: [account]\n\t\t\t\t};\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\tlinkedAccount: null,\n\t\t\t\t\taccounts: await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\t\t\tmodel: \"account\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\t\tfield: \"userId\"\n\t\t\t\t\t\t}]\n\t\t\t\t\t}) || []\n\t\t\t\t};\n\t\t\t\telse return null;\n\t\t\t}\n\t\t},\n\t\tfindUserByEmail: async (email, options$1) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\tfield: \"email\"\n\t\t\t\t}],\n\t\t\t\tjoin: { ...options$1?.includeAccounts ? { account: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { account: accounts, ...user } = result;\n\t\t\treturn {\n\t\t\t\tuser,\n\t\t\t\taccounts: accounts ?? []\n\t\t\t};\n\t\t},\n\t\tfindUserById: async (userId) => {\n\t\t\tif (!userId) return null;\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlinkAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tupdateUser: async (userId, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdateUserByEmail: async (email, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"email\",\n\t\t\t\tvalue: email.toLowerCase()\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdatePassword: async (userId, password) => {\n\t\t\tawait updateManyWithHooks({ password }, [{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}, {\n\t\t\t\tfield: \"providerId\",\n\t\t\t\tvalue: \"credential\"\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tfindAccounts: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccount: async (accountId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByProviderId: async (accountId, providerId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"providerId\",\n\t\t\t\t\tvalue: providerId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByUserId: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateAccount: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tcreateVerificationValue: async (data) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...data\n\t\t\t}, \"verification\", void 0);\n\t\t},\n\t\tfindVerificationValue: async (identifier) => {\n\t\t\tconst verification = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"verification\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"identifier\",\n\t\t\t\t\tvalue: identifier\n\t\t\t\t}],\n\t\t\t\tsortBy: {\n\t\t\t\t\tfield: \"createdAt\",\n\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t},\n\t\t\t\tlimit: 1\n\t\t\t});\n\t\t\tif (!options.verification?.disableCleanup) await deleteManyWithHooks([{\n\t\t\t\tfield: \"expiresAt\",\n\t\t\t\tvalue: /* @__PURE__ */ new Date(),\n\t\t\t\toperator: \"lt\"\n\t\t\t}], \"verification\", void 0);\n\t\t\treturn verification[0];\n\t\t},\n\t\tdeleteVerificationValue: async (id) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tdeleteVerificationByIdentifier: async (identifier) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"identifier\",\n\t\t\t\tvalue: identifier\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tupdateVerificationValue: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=internal-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9pbnRlcm5hbC1hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRDO0FBQ1E7QUFDa0M7QUFDdEM7QUFDeUQ7QUFDckM7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOEZBQThGLEVBQUUsNkRBQVk7QUFDckg7QUFDQTtBQUNBLGdFQUFnRSxRQUFRO0FBQ3hFO0FBQ0E7QUFDQSx5QkFBeUIsc0VBQWE7QUFDdEMsK0NBQStDLE9BQU87QUFDdEQ7QUFDQTtBQUNBLGtCQUFrQixzRUFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZFQUFrQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0Esc0VBQXNFLE9BQU87QUFDN0U7QUFDQSxpQkFBaUIsc0VBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrREFBa0I7QUFDdEM7QUFDQTtBQUNBLE9BQU87QUFDUCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSw4QkFBOEIsNEVBQWlCO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1QixnRkFBcUI7QUFDNUM7QUFDQSxXQUFXLGlCQUFpQjtBQUM1QixtQ0FBbUMsOERBQWlCLHNDQUFzQztBQUMxRjtBQUNBLGtEQUFrRCxnRUFBSztBQUN2RDtBQUNBO0FBQ0EsZ0NBQWdDLHdEQUFPLHFCQUFxQix3REFBTztBQUNuRTtBQUNBLFdBQVcsbUVBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0VBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsK0VBQStFLE9BQU87QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNFQUFhO0FBQzVCO0FBQ0E7QUFDQSxlQUFlLCtEQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxZQUFZLDREQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNEVBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixJQUFJO0FBQ0o7QUFDQSxXQUFXLG1CQUFtQjtBQUM5QjtBQUNBO0FBQ0EsYUFBYSwrREFBa0I7QUFDL0IsVUFBVSw0REFBZTtBQUN6QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AseUNBQXlDLHNCQUFzQjtBQUMvRDtBQUNBLGdDQUFnQyxzRUFBYTtBQUM3QztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVLEVBQUUsc0VBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0EsbUJBQW1CLHNFQUFhO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLHNJQUFzSSxPQUFPO0FBQzdJLDREQUE0RCxPQUFPO0FBQ25FLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsc0JBQXNCO0FBQy9GLHNDQUFzQyxzRUFBYTtBQUNuRDtBQUNBO0FBQ0Esc0RBQXNELHNCQUFzQjtBQUM1RSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyw0RUFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0RUFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNEVBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwrQkFBK0IsNEVBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVksa0NBQWtDLGdCQUFnQjtBQUM5RCxJQUFJO0FBQ0o7QUFDQSxXQUFXLDZCQUE2QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtCQUErQixVQUFVO0FBQ3pDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxxQ0FBcUMsNEVBQWlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNpQztBQUNqQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGRiXFxpbnRlcm5hbC1hZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2Vzc2lvbklucHV0LCBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IGdldFdpdGhIb29rcyB9IGZyb20gXCIuL3dpdGgtaG9va3MubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QWRhcHRlciwgZ2V0Q3VycmVudEF1dGhDb250ZXh0LCBydW5XaXRoVHJhbnNhY3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCwgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL2RiL2ludGVybmFsLWFkYXB0ZXIudHNcbmNvbnN0IGNyZWF0ZUludGVybmFsQWRhcHRlciA9IChhZGFwdGVyLCBjdHgpID0+IHtcblx0Y29uc3QgbG9nZ2VyID0gY3R4LmxvZ2dlcjtcblx0Y29uc3Qgb3B0aW9ucyA9IGN0eC5vcHRpb25zO1xuXHRjb25zdCBzZWNvbmRhcnlTdG9yYWdlID0gb3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlO1xuXHRjb25zdCBzZXNzaW9uRXhwaXJhdGlvbiA9IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IDM2MDAgKiAyNCAqIDc7XG5cdGNvbnN0IHsgY3JlYXRlV2l0aEhvb2tzLCB1cGRhdGVXaXRoSG9va3MsIHVwZGF0ZU1hbnlXaXRoSG9va3MsIGRlbGV0ZVdpdGhIb29rcywgZGVsZXRlTWFueVdpdGhIb29rcyB9ID0gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCk7XG5cdGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcikge1xuXHRcdGlmICghc2Vjb25kYXJ5U3RvcmFnZSkgcmV0dXJuO1xuXHRcdGNvbnN0IGxpc3RSYXcgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlci5pZH1gKTtcblx0XHRpZiAoIWxpc3RSYXcpIHJldHVybjtcblx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdGNvbnN0IHZhbGlkU2Vzc2lvbnMgPSAoc2FmZUpTT05QYXJzZShsaXN0UmF3KSB8fCBbXSkuZmlsdGVyKChzKSA9PiBzLmV4cGlyZXNBdCA+IG5vdyk7XG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodmFsaWRTZXNzaW9ucy5tYXAoYXN5bmMgKHsgdG9rZW4gfSkgPT4ge1xuXHRcdFx0Y29uc3QgY2FjaGVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuXHRcdFx0aWYgKCFjYWNoZWQpIHJldHVybjtcblx0XHRcdGNvbnN0IHBhcnNlZCA9IHNhZmVKU09OUGFyc2UoY2FjaGVkKTtcblx0XHRcdGlmICghcGFyc2VkKSByZXR1cm47XG5cdFx0XHRjb25zdCBzZXNzaW9uVFRMID0gTWF0aC5tYXgoTWF0aC5mbG9vcihuZXcgRGF0ZShwYXJzZWQuc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIG5vdykgLyAxZTMsIDApO1xuXHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQodG9rZW4sIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdHVzZXJcblx0XHRcdH0pLCBNYXRoLmZsb29yKHNlc3Npb25UVEwpKTtcblx0XHR9KSk7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRjcmVhdGVPQXV0aFVzZXI6IGFzeW5jICh1c2VyLCBhY2NvdW50KSA9PiB7XG5cdFx0XHRyZXR1cm4gcnVuV2l0aFRyYW5zYWN0aW9uKGFkYXB0ZXIsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHQuLi51c2VyXG5cdFx0XHRcdH0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyLFxuXHRcdFx0XHRcdGFjY291bnQ6IGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdFx0XHQuLi5hY2NvdW50LFxuXHRcdFx0XHRcdFx0dXNlcklkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0fSwgXCJhY2NvdW50XCIsIHZvaWQgMClcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVXNlcjogYXN5bmMgKHVzZXIpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi51c2VyLFxuXHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbD8udG9Mb3dlckNhc2UoKVxuXHRcdFx0fSwgXCJ1c2VyXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVBY2NvdW50OiBhc3luYyAoYWNjb3VudCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IGNyZWF0ZVdpdGhIb29rcyh7XG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdC4uLmFjY291bnRcblx0XHRcdH0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0bGlzdFNlc3Npb25zOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50TGlzdCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdGlmICghY3VycmVudExpc3QpIHJldHVybiBbXTtcblx0XHRcdFx0Y29uc3QgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRjb25zdCBzZWVuVG9rZW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCB7IHRva2VuLCBleHBpcmVzQXQgfSBvZiBsaXN0KSB7XG5cdFx0XHRcdFx0aWYgKGV4cGlyZXNBdCA8PSBub3cgfHwgc2VlblRva2Vucy5oYXModG9rZW4pKSBjb250aW51ZTtcblx0XHRcdFx0XHRzZWVuVG9rZW5zLmFkZCh0b2tlbik7XG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcblx0XHRcdFx0XHRpZiAoIWRhdGEpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2UoZGF0YSkgOiBkYXRhO1xuXHRcdFx0XHRcdFx0aWYgKCFwYXJzZWQ/LnNlc3Npb24pIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0c2Vzc2lvbnMucHVzaChwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUocGFyc2VkLnNlc3Npb24uZXhwaXJlc0F0KVxuXHRcdFx0XHRcdFx0fSkpO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXNzaW9ucztcblx0XHRcdH1cblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGxpc3RVc2VyczogYXN5bmMgKGxpbWl0LCBvZmZzZXQsIHNvcnRCeSwgd2hlcmUpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRsaW1pdCxcblx0XHRcdFx0b2Zmc2V0LFxuXHRcdFx0XHRzb3J0QnksXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNvdW50VG90YWxVc2VyczogYXN5bmMgKHdoZXJlKSA9PiB7XG5cdFx0XHRjb25zdCB0b3RhbCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuY291bnQoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHRcdGlmICh0eXBlb2YgdG90YWwgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXJzZUludCh0b3RhbCk7XG5cdFx0XHRyZXR1cm4gdG90YWw7XG5cdFx0fSxcblx0XHRkZWxldGVVc2VyOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoIXNlY29uZGFyeVN0b3JhZ2UgfHwgb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlKSBhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlU2Vzc2lvbjogYXN5bmMgKHVzZXJJZCwgZG9udFJlbWVtYmVyTWUsIG92ZXJyaWRlLCBvdmVycmlkZUFsbCkgPT4ge1xuXHRcdFx0Y29uc3QgY3R4JDEgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRcdGNvbnN0IGhlYWRlcnMgPSBjdHgkMT8uaGVhZGVycyB8fCBjdHgkMT8ucmVxdWVzdD8uaGVhZGVycztcblx0XHRcdGNvbnN0IHsgaWQ6IF8sIC4uLnJlc3QgfSA9IG92ZXJyaWRlIHx8IHt9O1xuXHRcdFx0Y29uc3QgZGVmYXVsdEFkZGl0aW9uYWxGaWVsZHMgPSBwYXJzZVNlc3Npb25JbnB1dChjdHgkMT8uY29udGV4dC5vcHRpb25zID8/IG9wdGlvbnMsIHt9KTtcblx0XHRcdGNvbnN0IGRhdGEgPSB7XG5cdFx0XHRcdGlwQWRkcmVzczogY3R4JDE/LnJlcXVlc3QgfHwgY3R4JDE/LmhlYWRlcnMgPyBnZXRJcChjdHgkMT8ucmVxdWVzdCB8fCBjdHgkMT8uaGVhZGVycywgY3R4JDE/LmNvbnRleHQub3B0aW9ucykgfHwgXCJcIiA6IFwiXCIsXG5cdFx0XHRcdHVzZXJBZ2VudDogaGVhZGVycz8uZ2V0KFwidXNlci1hZ2VudFwiKSB8fCBcIlwiLFxuXHRcdFx0XHQuLi5yZXN0LFxuXHRcdFx0XHRleHBpcmVzQXQ6IGRvbnRSZW1lbWJlck1lID8gZ2V0RGF0ZSgzNjAwICogMjQsIFwic2VjXCIpIDogZ2V0RGF0ZShzZXNzaW9uRXhwaXJhdGlvbiwgXCJzZWNcIiksXG5cdFx0XHRcdHVzZXJJZCxcblx0XHRcdFx0dG9rZW46IGdlbmVyYXRlSWQoMzIpLFxuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5kZWZhdWx0QWRkaXRpb25hbEZpZWxkcyxcblx0XHRcdFx0Li4ub3ZlcnJpZGVBbGwgPyByZXN0IDoge31cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKGRhdGEsIFwic2Vzc2lvblwiLCBzZWNvbmRhcnlTdG9yYWdlID8ge1xuXHRcdFx0XHRmbjogYXN5bmMgKHNlc3Npb25EYXRhKSA9PiB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBzdG9yZSB0aGUgc2Vzc2lvbiB0b2tlbiBmb3IgdGhlIHVzZXJcblx0XHRcdFx0XHQqIHNvIHdlIGNhbiByZXRyaWV2ZSBpdCBsYXRlciBmb3IgbGlzdGluZyBzZXNzaW9uc1xuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdGxldCBsaXN0ID0gW107XG5cdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRpZiAoY3VycmVudExpc3QpIHtcblx0XHRcdFx0XHRcdGxpc3QgPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRMaXN0KSB8fCBbXTtcblx0XHRcdFx0XHRcdGxpc3QgPSBsaXN0LmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbi5leHBpcmVzQXQgPiBub3cgJiYgc2Vzc2lvbi50b2tlbiAhPT0gZGF0YS50b2tlbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHNvcnRlZCA9IFsuLi5saXN0LCB7XG5cdFx0XHRcdFx0XHR0b2tlbjogZGF0YS50b2tlbixcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogZGF0YS5leHBpcmVzQXQuZ2V0VGltZSgpXG5cdFx0XHRcdFx0fV0uc29ydCgoYSwgYikgPT4gYS5leHBpcmVzQXQgLSBiLmV4cGlyZXNBdCk7XG5cdFx0XHRcdFx0Y29uc3QgZnVydGhlc3RTZXNzaW9uRXhwID0gc29ydGVkLmF0KC0xKT8uZXhwaXJlc0F0ID8/IGRhdGEuZXhwaXJlc0F0LmdldFRpbWUoKTtcblx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25UVEwgPSBNYXRoLm1heChNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSwgMCk7XG5cdFx0XHRcdFx0aWYgKGZ1cnRoZXN0U2Vzc2lvblRUTCA+IDApIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCwgSlNPTi5zdHJpbmdpZnkoc29ydGVkKSwgZnVydGhlc3RTZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25UVEwgPSBNYXRoLm1heChNYXRoLmZsb29yKChkYXRhLmV4cGlyZXNBdC5nZXRUaW1lKCkgLSBub3cpIC8gMWUzKSwgMCk7XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25UVEwgPiAwKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChkYXRhLnRva2VuLCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBzZXNzaW9uRGF0YSxcblx0XHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0XHR9KSwgc2Vzc2lvblRUTCk7XG5cdFx0XHRcdFx0cmV0dXJuIHNlc3Npb25EYXRhO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRleGVjdXRlTWFpbkZuOiBvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2Vcblx0XHRcdH0gOiB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZFNlc3Npb246IGFzeW5jICh0b2tlbikgPT4ge1xuXHRcdFx0aWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvblN0cmluZ2lmaWVkID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQodG9rZW4pO1xuXHRcdFx0XHRpZiAoIXNlc3Npb25TdHJpbmdpZmllZCAmJiAhb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0aWYgKHNlc3Npb25TdHJpbmdpZmllZCkge1xuXHRcdFx0XHRcdGNvbnN0IHMgPSBzYWZlSlNPTlBhcnNlKHNlc3Npb25TdHJpbmdpZmllZCk7XG5cdFx0XHRcdFx0aWYgKCFzKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5vcHRpb25zLCB7XG5cdFx0XHRcdFx0XHRcdC4uLnMuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShzLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzLnNlc3Npb24uY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucy51c2VyLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInNlc3Npb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0dmFsdWU6IHRva2VuLFxuXHRcdFx0XHRcdGZpZWxkOiBcInRva2VuXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KTtcblx0XHRcdGlmICghcmVzdWx0KSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IHsgdXNlciwgLi4uc2Vzc2lvbiB9ID0gcmVzdWx0O1xuXHRcdFx0aWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywgc2Vzc2lvbiksXG5cdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgub3B0aW9ucywgdXNlcilcblx0XHRcdH07XG5cdFx0fSxcblx0XHRmaW5kU2Vzc2lvbnM6IGFzeW5jIChzZXNzaW9uVG9rZW5zKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBzZXNzaW9ucyQxID0gW107XG5cdFx0XHRcdGZvciAoY29uc3Qgc2Vzc2lvblRva2VuIG9mIHNlc3Npb25Ub2tlbnMpIHtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uU3RyaW5naWZpZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRcdGlmIChzZXNzaW9uU3RyaW5naWZpZWQpIHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzID0gdHlwZW9mIHNlc3Npb25TdHJpbmdpZmllZCA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKSA6IHNlc3Npb25TdHJpbmdpZmllZDtcblx0XHRcdFx0XHRcdGlmICghcz8uc2Vzc2lvbikgY29udGludWU7XG5cdFx0XHRcdFx0XHRjb25zdCBzZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdFx0Li4ucy5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUocy5zZXNzaW9uLmV4cGlyZXNBdClcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHRcdC4uLnMudXNlcixcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocy51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHNlc3Npb25zJDEucHVzaChzZXNzaW9uKTtcblx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2Vzc2lvbnMkMTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHNlc3Npb25zID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInNlc3Npb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0XHR2YWx1ZTogc2Vzc2lvblRva2Vucyxcblx0XHRcdFx0XHRvcGVyYXRvcjogXCJpblwiXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRqb2luOiB7IHVzZXI6IHRydWUgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXNlc3Npb25zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXHRcdFx0aWYgKHNlc3Npb25zLnNvbWUoKHNlc3Npb24pID0+ICFzZXNzaW9uLnVzZXIpKSByZXR1cm4gW107XG5cdFx0XHRyZXR1cm4gc2Vzc2lvbnMubWFwKChfc2Vzc2lvbikgPT4ge1xuXHRcdFx0XHRjb25zdCB7IHVzZXIsIC4uLnNlc3Npb24gfSA9IF9zZXNzaW9uO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHNlc3Npb24sXG5cdFx0XHRcdFx0dXNlclxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVTZXNzaW9uOiBhc3luYyAoc2Vzc2lvblRva2VuLCBzZXNzaW9uKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKHNlc3Npb24sIFt7XG5cdFx0XHRcdGZpZWxkOiBcInRva2VuXCIsXG5cdFx0XHRcdHZhbHVlOiBzZXNzaW9uVG9rZW5cblx0XHRcdH1dLCBcInNlc3Npb25cIiwgc2Vjb25kYXJ5U3RvcmFnZSA/IHtcblx0XHRcdFx0YXN5bmMgZm4oZGF0YSkge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKTtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRTZXNzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWRTZXNzaW9uID0gc2FmZUpTT05QYXJzZShjdXJyZW50U2Vzc2lvbik7XG5cdFx0XHRcdFx0aWYgKCFwYXJzZWRTZXNzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRjb25zdCBtZXJnZWRTZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0Li4ucGFyc2VkU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoZGF0YS5leHBpcmVzQXQgPz8gcGFyc2VkU2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHBhcnNlZFNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRBdCA/PyBwYXJzZWRTZXNzaW9uLnNlc3Npb24udXBkYXRlZEF0KVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29uc3QgdXBkYXRlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIG1lcmdlZFNlc3Npb24pO1xuXHRcdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0Y29uc3QgZXhwaXJlc01zID0gbmV3IERhdGUodXBkYXRlZFNlc3Npb24uZXhwaXJlc0F0KS5nZXRUaW1lKCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGV4cGlyZXNNcyAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoc2Vzc2lvblRUTCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KHNlc3Npb25Ub2tlbiwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB1cGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkU2Vzc2lvbi51c2VyXG5cdFx0XHRcdFx0XHR9KSwgc2Vzc2lvblRUTCk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaXN0S2V5ID0gYGFjdGl2ZS1zZXNzaW9ucy0ke3VwZGF0ZWRTZXNzaW9uLnVzZXJJZH1gO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlzdFJhdyA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGxpc3RLZXkpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc29ydGVkID0gKGxpc3RSYXcgPyBzYWZlSlNPTlBhcnNlKGxpc3RSYXcpIHx8IFtdIDogW10pLmZpbHRlcigocykgPT4gcy50b2tlbiAhPT0gc2Vzc2lvblRva2VuICYmIHMuZXhwaXJlc0F0ID4gbm93KS5jb25jYXQoW3tcblx0XHRcdFx0XHRcdFx0dG9rZW46IHNlc3Npb25Ub2tlbixcblx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBleHBpcmVzTXNcblx0XHRcdFx0XHRcdH1dKS5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvbkV4cCA9IHNvcnRlZC5hdCgtMSk/LmV4cGlyZXNBdDtcblx0XHRcdFx0XHRcdGlmIChmdXJ0aGVzdFNlc3Npb25FeHAgJiYgZnVydGhlc3RTZXNzaW9uRXhwID4gbm93KSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChsaXN0S2V5LCBKU09OLnN0cmluZ2lmeShzb3J0ZWQpLCBNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSk7XG5cdFx0XHRcdFx0XHRlbHNlIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGxpc3RLZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdXBkYXRlZFNlc3Npb247XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuXHRcdFx0fSA6IHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVTZXNzaW9uOiBhc3luYyAodG9rZW4pID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBzZXNzaW9uIH0gPSBzYWZlSlNPTlBhcnNlKGRhdGEpID8/IHt9O1xuXHRcdFx0XHRcdGlmICghc2Vzc2lvbikge1xuXHRcdFx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiU2Vzc2lvbiBub3QgZm91bmQgaW4gc2Vjb25kYXJ5IHN0b3JhZ2VcIik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHVzZXJJZCA9IHNlc3Npb24udXNlcklkO1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRMaXN0ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gKTtcblx0XHRcdFx0XHRpZiAoY3VycmVudExpc3QpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGxpc3QgPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRMaXN0KSB8fCBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWx0ZXJlZCA9IGxpc3QuZmlsdGVyKChzZXNzaW9uJDEpID0+IHNlc3Npb24kMS5leHBpcmVzQXQgPiBub3cgJiYgc2Vzc2lvbiQxLnRva2VuICE9PSB0b2tlbik7XG5cdFx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25FeHAgPSBmaWx0ZXJlZC5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KS5hdCgtMSk/LmV4cGlyZXNBdDtcblx0XHRcdFx0XHRcdGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwICYmIGZ1cnRoZXN0U2Vzc2lvbkV4cCAmJiBmdXJ0aGVzdFNlc3Npb25FeHAgPiBEYXRlLm5vdygpKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLnNldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWAsIEpTT04uc3RyaW5naWZ5KGZpbHRlcmVkKSwgTWF0aC5mbG9vcigoZnVydGhlc3RTZXNzaW9uRXhwIC0gbm93KSAvIDFlMykpO1xuXHRcdFx0XHRcdFx0ZWxzZSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdH0gZWxzZSBsb2dnZXIuZXJyb3IoXCJBY3RpdmUgc2Vzc2lvbnMgbGlzdCBub3QgZm91bmQgaW4gc2Vjb25kYXJ5IHN0b3JhZ2VcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUodG9rZW4pO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSB8fCBjdHgub3B0aW9ucy5zZXNzaW9uPy5wcmVzZXJ2ZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0dmFsdWU6IHRva2VuXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVBY2NvdW50czogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlTWFueVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlQWNjb3VudDogYXN5bmMgKGFjY291bnRJZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZVNlc3Npb25zOiBhc3luYyAodXNlcklkT3JTZXNzaW9uVG9rZW5zKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHVzZXJJZE9yU2Vzc2lvblRva2VucyA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZVNlc3Npb24gPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkT3JTZXNzaW9uVG9rZW5zfWApO1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25zID0gYWN0aXZlU2Vzc2lvbiA/IHNhZmVKU09OUGFyc2UoYWN0aXZlU2Vzc2lvbikgOiBbXTtcblx0XHRcdFx0XHRpZiAoIXNlc3Npb25zKSByZXR1cm47XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzZXNzaW9uIG9mIHNlc3Npb25zKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShzZXNzaW9uLnRva2VuKTtcblx0XHRcdFx0XHRhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkT3JTZXNzaW9uVG9rZW5zfWApO1xuXHRcdFx0XHR9IGVsc2UgZm9yIChjb25zdCBzZXNzaW9uVG9rZW4gb2YgdXNlcklkT3JTZXNzaW9uVG9rZW5zKSBpZiAoYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoc2Vzc2lvblRva2VuKSkgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUoc2Vzc2lvblRva2VuKTtcblx0XHRcdFx0aWYgKCFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UgfHwgY3R4Lm9wdGlvbnMuc2Vzc2lvbj8ucHJlc2VydmVTZXNzaW9uSW5EYXRhYmFzZSkgcmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgZGVsZXRlTWFueVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJ0b2tlblwiIDogXCJ1c2VySWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZE9yU2Vzc2lvblRva2Vucyxcblx0XHRcdFx0b3BlcmF0b3I6IEFycmF5LmlzQXJyYXkodXNlcklkT3JTZXNzaW9uVG9rZW5zKSA/IFwiaW5cIiA6IHZvaWQgMFxuXHRcdFx0fV0sIFwic2Vzc2lvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZE9BdXRoVXNlcjogYXN5bmMgKGVtYWlsLCBhY2NvdW50SWQsIHByb3ZpZGVySWQpID0+IHtcblx0XHRcdGNvbnN0IGFjY291bnQgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWQsXG5cdFx0XHRcdFx0ZmllbGQ6IFwiYWNjb3VudElkXCJcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdHZhbHVlOiBwcm92aWRlcklkLFxuXHRcdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyB1c2VyOiB0cnVlIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGFjY291bnQpIGlmIChhY2NvdW50LnVzZXIpIHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IGFjY291bnQudXNlcixcblx0XHRcdFx0bGlua2VkQWNjb3VudDogYWNjb3VudCxcblx0XHRcdFx0YWNjb3VudHM6IFthY2NvdW50XVxuXHRcdFx0fTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHVzZXIpIHJldHVybiB7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHRsaW5rZWRBY2NvdW50OiBhY2NvdW50LFxuXHRcdFx0XHRcdGFjY291bnRzOiBbYWNjb3VudF1cblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHRmaWVsZDogXCJlbWFpbFwiXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh1c2VyKSByZXR1cm4ge1xuXHRcdFx0XHRcdHVzZXIsXG5cdFx0XHRcdFx0bGlua2VkQWNjb3VudDogbnVsbCxcblx0XHRcdFx0XHRhY2NvdW50czogYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHVzZXIuaWQsXG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pIHx8IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2UgcmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRmaW5kVXNlckJ5RW1haWw6IGFzeW5jIChlbWFpbCwgb3B0aW9ucyQxKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgLi4ub3B0aW9ucyQxPy5pbmNsdWRlQWNjb3VudHMgPyB7IGFjY291bnQ6IHRydWUgfSA6IHt9IH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyBhY2NvdW50OiBhY2NvdW50cywgLi4udXNlciB9ID0gcmVzdWx0O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dXNlcixcblx0XHRcdFx0YWNjb3VudHM6IGFjY291bnRzID8/IFtdXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0ZmluZFVzZXJCeUlkOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRpZiAoIXVzZXJJZCkgcmV0dXJuIG51bGw7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGlua0FjY291bnQ6IGFzeW5jIChhY2NvdW50KSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4uYWNjb3VudFxuXHRcdFx0fSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHR1cGRhdGVVc2VyOiBhc3luYyAodXNlcklkLCBkYXRhKSA9PiB7XG5cdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcik7XG5cdFx0XHRyZXR1cm4gdXNlcjtcblx0XHR9LFxuXHRcdHVwZGF0ZVVzZXJCeUVtYWlsOiBhc3luYyAoZW1haWwsIGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIixcblx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKClcblx0XHRcdH1dLCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IHJlZnJlc2hVc2VyU2Vzc2lvbnModXNlcik7XG5cdFx0XHRyZXR1cm4gdXNlcjtcblx0XHR9LFxuXHRcdHVwZGF0ZVBhc3N3b3JkOiBhc3luYyAodXNlcklkLCBwYXNzd29yZCkgPT4ge1xuXHRcdFx0YXdhaXQgdXBkYXRlTWFueVdpdGhIb29rcyh7IHBhc3N3b3JkIH0sIFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIixcblx0XHRcdFx0dmFsdWU6IFwiY3JlZGVudGlhbFwiXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kQWNjb3VudHM6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJhY2NvdW50SWRcIixcblx0XHRcdFx0XHR2YWx1ZTogYWNjb3VudElkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50QnlQcm92aWRlcklkOiBhc3luYyAoYWNjb3VudElkLCBwcm92aWRlcklkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwiYWNjb3VudFwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJhY2NvdW50SWRcIixcblx0XHRcdFx0XHR2YWx1ZTogYWNjb3VudElkXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRmaWVsZDogXCJwcm92aWRlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHByb3ZpZGVySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnRCeVVzZXJJZDogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dXBkYXRlQWNjb3VudDogYXN5bmMgKGlkLCBkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4uZGF0YVxuXHRcdFx0fSwgXCJ2ZXJpZmljYXRpb25cIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGZpbmRWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkZW50aWZpZXIpID0+IHtcblx0XHRcdGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ2ZXJpZmljYXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRlbnRpZmllclwiLFxuXHRcdFx0XHRcdHZhbHVlOiBpZGVudGlmaWVyXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRzb3J0Qnk6IHtcblx0XHRcdFx0XHRmaWVsZDogXCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRkaXJlY3Rpb246IFwiZGVzY1wiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxpbWl0OiAxXG5cdFx0XHR9KTtcblx0XHRcdGlmICghb3B0aW9ucy52ZXJpZmljYXRpb24/LmRpc2FibGVDbGVhbnVwKSBhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImV4cGlyZXNBdFwiLFxuXHRcdFx0XHR2YWx1ZTogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdG9wZXJhdG9yOiBcImx0XCJcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdFx0cmV0dXJuIHZlcmlmaWNhdGlvblswXTtcblx0XHR9LFxuXHRcdGRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWQpID0+IHtcblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogaWRcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlVmVyaWZpY2F0aW9uQnlJZGVudGlmaWVyOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkZW50aWZpZXJcIixcblx0XHRcdFx0dmFsdWU6IGlkZW50aWZpZXJcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0dXBkYXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChpZCwgZGF0YSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhkYXRhLCBbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogaWRcblx0XHRcdH1dLCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbC1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/schema.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/schema.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeSchema: () => (/* binding */ mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* binding */ parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* binding */ parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* binding */ parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* binding */ parseInputData),\n/* harmony export */   parseSessionInput: () => (/* binding */ parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* binding */ parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* binding */ parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* binding */ parseUserOutput)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n//#region src/db/schema.ts\nconst cache = /* @__PURE__ */ new WeakMap();\nfunction parseOutputData(data, schema) {\n\tconst fields = schema.fields;\n\tconst parsedData = {};\n\tfor (const key in data) {\n\t\tconst field = fields[key];\n\t\tif (!field) {\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (field.returned === false && key !== \"id\") continue;\n\t\tparsedData[key] = data[key];\n\t}\n\treturn parsedData;\n}\nfunction getFields(options, table, mode) {\n\tconst cacheKey = `${table}:${mode}`;\n\tif (!cache.has(options)) cache.set(options, /* @__PURE__ */ new Map());\n\tconst tableCache = cache.get(options);\n\tif (tableCache.has(cacheKey)) return tableCache.get(cacheKey);\n\tconst coreSchema = mode === \"output\" ? (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options)[table]?.fields ?? {} : {};\n\tconst additionalFields = table === \"user\" || table === \"session\" || table === \"account\" ? options[table]?.additionalFields : void 0;\n\tlet schema = {\n\t\t...coreSchema,\n\t\t...additionalFields ?? {}\n\t};\n\tfor (const plugin of options.plugins || []) if (plugin.schema && plugin.schema[table]) schema = {\n\t\t...schema,\n\t\t...plugin.schema[table].fields\n\t};\n\ttableCache.set(cacheKey, schema);\n\treturn schema;\n}\nfunction parseUserOutput(options, user) {\n\treturn parseOutputData(user, { fields: getFields(options, \"user\", \"output\") });\n}\nfunction parseSessionOutput(options, session) {\n\treturn parseOutputData(session, { fields: getFields(options, \"session\", \"output\") });\n}\nfunction parseAccountOutput(options, account) {\n\tconst { accessToken: _accessToken, refreshToken: _refreshToken, idToken: _idToken, accessTokenExpiresAt: _accessTokenExpiresAt, refreshTokenExpiresAt: _refreshTokenExpiresAt, password: _password, ...rest } = parseOutputData(account, { fields: getFields(options, \"account\", \"output\") });\n\treturn rest;\n}\nfunction parseInputData(data, schema) {\n\tconst action = schema.action || \"create\";\n\tconst fields = schema.fields;\n\tconst parsedData = Object.assign(Object.create(null), null);\n\tfor (const key in fields) {\n\t\tif (key in data) {\n\t\t\tif (fields[key].input === false) {\n\t\t\t\tif (fields[key].defaultValue !== void 0) {\n\t\t\t\t\tif (action !== \"update\") {\n\t\t\t\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (data[key]) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is not allowed to be set` });\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].validator?.input && data[key] !== void 0) {\n\t\t\t\tconst result = fields[key].validator.input[\"~standard\"].validate(data[key]);\n\t\t\t\tif (result instanceof Promise) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Async validation is not supported for additional fields\" });\n\t\t\t\tif (\"issues\" in result && result.issues) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: result.issues[0]?.message || \"Validation Error\" });\n\t\t\t\tparsedData[key] = result.value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].transform?.input && data[key] !== void 0) {\n\t\t\t\tparsedData[key] = fields[key].transform?.input(data[key]);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].defaultValue !== void 0 && action === \"create\") {\n\t\t\tif (typeof fields[key].defaultValue === \"function\") {\n\t\t\t\tparsedData[key] = fields[key].defaultValue();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].required && action === \"create\") throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is required` });\n\t}\n\treturn parsedData;\n}\nfunction parseUserInput(options, user = {}, action) {\n\treturn parseInputData(user, {\n\t\tfields: getFields(options, \"user\", \"input\"),\n\t\taction\n\t});\n}\nfunction parseAdditionalUserInput(options, user) {\n\tconst schema = getFields(options, \"user\", \"input\");\n\treturn parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n\treturn parseInputData(account, { fields: getFields(options, \"account\", \"input\") });\n}\nfunction parseSessionInput(options, session) {\n\treturn parseInputData(session, { fields: getFields(options, \"session\", \"input\") });\n}\nfunction mergeSchema(schema, newSchema) {\n\tif (!newSchema) return schema;\n\tfor (const table in newSchema) {\n\t\tconst newModelName = newSchema[table]?.modelName;\n\t\tif (newModelName) schema[table].modelName = newModelName;\n\t\tfor (const field in schema[table].fields) {\n\t\t\tconst newField = newSchema[table]?.fields?.[field];\n\t\t\tif (!newField) continue;\n\t\t\tschema[table].fields[field].fieldName = newField;\n\t\t}\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2Q7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsTUFBTSxHQUFHLEtBQUs7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG1FQUFhLCtCQUErQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBLG1DQUFtQyxpREFBaUQ7QUFDcEY7QUFDQTtBQUNBLFNBQVMsc01BQXNNLDZCQUE2QixpREFBaUQ7QUFDN1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFRLGtCQUFrQixZQUFZLEtBQUssMkJBQTJCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlEQUFRLDRCQUE0QixvRUFBb0U7QUFDckosdURBQXVELGlEQUFRLGtCQUFrQiwwREFBMEQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGlEQUFRLGtCQUFrQixZQUFZLEtBQUssY0FBYztBQUN0SDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxJQUFJLGdCQUFnQjtBQUNyRDtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFnRDtBQUNsRjtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFnRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dMO0FBQ2hMIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcZGJcXHNjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXV0aFRhYmxlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9zY2hlbWEudHNcbmNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwYXJzZU91dHB1dERhdGEoZGF0YSwgc2NoZW1hKSB7XG5cdGNvbnN0IGZpZWxkcyA9IHNjaGVtYS5maWVsZHM7XG5cdGNvbnN0IHBhcnNlZERhdGEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0aWYgKCFmaWVsZCkge1xuXHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZGF0YVtrZXldO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChmaWVsZC5yZXR1cm5lZCA9PT0gZmFsc2UgJiYga2V5ICE9PSBcImlkXCIpIGNvbnRpbnVlO1xuXHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0fVxuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cbmZ1bmN0aW9uIGdldEZpZWxkcyhvcHRpb25zLCB0YWJsZSwgbW9kZSkge1xuXHRjb25zdCBjYWNoZUtleSA9IGAke3RhYmxlfToke21vZGV9YDtcblx0aWYgKCFjYWNoZS5oYXMob3B0aW9ucykpIGNhY2hlLnNldChvcHRpb25zLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcblx0Y29uc3QgdGFibGVDYWNoZSA9IGNhY2hlLmdldChvcHRpb25zKTtcblx0aWYgKHRhYmxlQ2FjaGUuaGFzKGNhY2hlS2V5KSkgcmV0dXJuIHRhYmxlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0Y29uc3QgY29yZVNjaGVtYSA9IG1vZGUgPT09IFwib3V0cHV0XCIgPyBnZXRBdXRoVGFibGVzKG9wdGlvbnMpW3RhYmxlXT8uZmllbGRzID8/IHt9IDoge307XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHMgPSB0YWJsZSA9PT0gXCJ1c2VyXCIgfHwgdGFibGUgPT09IFwic2Vzc2lvblwiIHx8IHRhYmxlID09PSBcImFjY291bnRcIiA/IG9wdGlvbnNbdGFibGVdPy5hZGRpdGlvbmFsRmllbGRzIDogdm9pZCAwO1xuXHRsZXQgc2NoZW1hID0ge1xuXHRcdC4uLmNvcmVTY2hlbWEsXG5cdFx0Li4uYWRkaXRpb25hbEZpZWxkcyA/PyB7fVxuXHR9O1xuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBvcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4uc2NoZW1hICYmIHBsdWdpbi5zY2hlbWFbdGFibGVdKSBzY2hlbWEgPSB7XG5cdFx0Li4uc2NoZW1hLFxuXHRcdC4uLnBsdWdpbi5zY2hlbWFbdGFibGVdLmZpZWxkc1xuXHR9O1xuXHR0YWJsZUNhY2hlLnNldChjYWNoZUtleSwgc2NoZW1hKTtcblx0cmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIHBhcnNlVXNlck91dHB1dChvcHRpb25zLCB1c2VyKSB7XG5cdHJldHVybiBwYXJzZU91dHB1dERhdGEodXNlciwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJvdXRwdXRcIikgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVNlc3Npb25PdXRwdXQob3B0aW9ucywgc2Vzc2lvbikge1xuXHRyZXR1cm4gcGFyc2VPdXRwdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwib3V0cHV0XCIpIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50T3V0cHV0KG9wdGlvbnMsIGFjY291bnQpIHtcblx0Y29uc3QgeyBhY2Nlc3NUb2tlbjogX2FjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IF9yZWZyZXNoVG9rZW4sIGlkVG9rZW46IF9pZFRva2VuLCBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogX2FjY2Vzc1Rva2VuRXhwaXJlc0F0LCByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IF9yZWZyZXNoVG9rZW5FeHBpcmVzQXQsIHBhc3N3b3JkOiBfcGFzc3dvcmQsIC4uLnJlc3QgfSA9IHBhcnNlT3V0cHV0RGF0YShhY2NvdW50LCB7IGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwiYWNjb3VudFwiLCBcIm91dHB1dFwiKSB9KTtcblx0cmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBwYXJzZUlucHV0RGF0YShkYXRhLCBzY2hlbWEpIHtcblx0Y29uc3QgYWN0aW9uID0gc2NoZW1hLmFjdGlvbiB8fCBcImNyZWF0ZVwiO1xuXHRjb25zdCBmaWVsZHMgPSBzY2hlbWEuZmllbGRzO1xuXHRjb25zdCBwYXJzZWREYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBudWxsKTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG5cdFx0aWYgKGtleSBpbiBkYXRhKSB7XG5cdFx0XHRpZiAoZmllbGRzW2tleV0uaW5wdXQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdGlmIChmaWVsZHNba2V5XS5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmIChhY3Rpb24gIT09IFwidXBkYXRlXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGF0YVtrZXldKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgbm90IGFsbG93ZWQgdG8gYmUgc2V0YCB9KTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmllbGRzW2tleV0udmFsaWRhdG9yPy5pbnB1dCAmJiBkYXRhW2tleV0gIT09IHZvaWQgMCkge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBmaWVsZHNba2V5XS52YWxpZGF0b3IuaW5wdXRbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUoZGF0YVtrZXldKTtcblx0XHRcdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiQXN5bmMgdmFsaWRhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciBhZGRpdGlvbmFsIGZpZWxkc1wiIH0pO1xuXHRcdFx0XHRpZiAoXCJpc3N1ZXNcIiBpbiByZXN1bHQgJiYgcmVzdWx0Lmlzc3VlcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiByZXN1bHQuaXNzdWVzWzBdPy5tZXNzYWdlIHx8IFwiVmFsaWRhdGlvbiBFcnJvclwiIH0pO1xuXHRcdFx0XHRwYXJzZWREYXRhW2tleV0gPSByZXN1bHQudmFsdWU7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZpZWxkc1trZXldLnRyYW5zZm9ybT8uaW5wdXQgJiYgZGF0YVtrZXldICE9PSB2b2lkIDApIHtcblx0XHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0udHJhbnNmb3JtPy5pbnB1dChkYXRhW2tleV0pO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlICE9PSB2b2lkIDAgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG5cdFx0XHRpZiAodHlwZW9mIGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSgpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0ucmVxdWlyZWQgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgcmVxdWlyZWRgIH0pO1xuXHR9XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuZnVuY3Rpb24gcGFyc2VVc2VySW5wdXQob3B0aW9ucywgdXNlciA9IHt9LCBhY3Rpb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHVzZXIsIHtcblx0XHRmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJpbnB1dFwiKSxcblx0XHRhY3Rpb25cblx0fSk7XG59XG5mdW5jdGlvbiBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQob3B0aW9ucywgdXNlcikge1xuXHRjb25zdCBzY2hlbWEgPSBnZXRGaWVsZHMob3B0aW9ucywgXCJ1c2VyXCIsIFwiaW5wdXRcIik7XG5cdHJldHVybiBwYXJzZUlucHV0RGF0YSh1c2VyIHx8IHt9LCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50SW5wdXQob3B0aW9ucywgYWNjb3VudCkge1xuXHRyZXR1cm4gcGFyc2VJbnB1dERhdGEoYWNjb3VudCwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcImFjY291bnRcIiwgXCJpbnB1dFwiKSB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2Vzc2lvbklucHV0KG9wdGlvbnMsIHNlc3Npb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwiaW5wdXRcIikgfSk7XG59XG5mdW5jdGlvbiBtZXJnZVNjaGVtYShzY2hlbWEsIG5ld1NjaGVtYSkge1xuXHRpZiAoIW5ld1NjaGVtYSkgcmV0dXJuIHNjaGVtYTtcblx0Zm9yIChjb25zdCB0YWJsZSBpbiBuZXdTY2hlbWEpIHtcblx0XHRjb25zdCBuZXdNb2RlbE5hbWUgPSBuZXdTY2hlbWFbdGFibGVdPy5tb2RlbE5hbWU7XG5cdFx0aWYgKG5ld01vZGVsTmFtZSkgc2NoZW1hW3RhYmxlXS5tb2RlbE5hbWUgPSBuZXdNb2RlbE5hbWU7XG5cdFx0Zm9yIChjb25zdCBmaWVsZCBpbiBzY2hlbWFbdGFibGVdLmZpZWxkcykge1xuXHRcdFx0Y29uc3QgbmV3RmllbGQgPSBuZXdTY2hlbWFbdGFibGVdPy5maWVsZHM/LltmaWVsZF07XG5cdFx0XHRpZiAoIW5ld0ZpZWxkKSBjb250aW51ZTtcblx0XHRcdHNjaGVtYVt0YWJsZV0uZmllbGRzW2ZpZWxkXS5maWVsZE5hbWUgPSBuZXdGaWVsZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHNjaGVtYTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZXJnZVNjaGVtYSwgcGFyc2VBY2NvdW50SW5wdXQsIHBhcnNlQWNjb3VudE91dHB1dCwgcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LCBwYXJzZUlucHV0RGF0YSwgcGFyc2VTZXNzaW9uSW5wdXQsIHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/to-zod.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toZodSchema: () => (/* binding */ toZodSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/index.js\");\n\n\n//#region src/db/to-zod.ts\nfunction toZodSchema({ fields, isClientSide }) {\n\tconst zodFields = Object.keys(fields).reduce((acc, key) => {\n\t\tconst field = fields[key];\n\t\tif (!field) return acc;\n\t\tif (isClientSide && field.input === false) return acc;\n\t\tlet schema;\n\t\tif (field.type === \"json\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.json ? zod__WEBPACK_IMPORTED_MODULE_0__.json() : zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse if (field.type === \"string[]\" || field.type === \"number[]\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.array(field.type === \"string[]\" ? zod__WEBPACK_IMPORTED_MODULE_0__.string() : zod__WEBPACK_IMPORTED_MODULE_0__.number());\n\t\telse if (Array.isArray(field.type)) schema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse schema = zod__WEBPACK_IMPORTED_MODULE_1__[field.type]();\n\t\tif (field?.required === false) schema = schema.optional();\n\t\tif (!isClientSide && field?.returned === false) return acc;\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[key]: schema\n\t\t};\n\t}, {});\n\treturn zod__WEBPACK_IMPORTED_MODULE_0__.object(zodFields);\n}\n\n//#endregion\n\n//# sourceMappingURL=to-zod.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi90by16b2QubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5Qjs7QUFFekI7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUNBQU0sR0FBRyxxQ0FBTSxLQUFLLG9DQUFLO0FBQy9ELDRFQUE0RSxzQ0FBTyw2QkFBNkIsdUNBQVEsS0FBSyx1Q0FBUTtBQUNySSwrQ0FBK0Msb0NBQUs7QUFDcEQsZ0JBQWdCLGdDQUFDO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOLFFBQVEsdUNBQVE7QUFDaEI7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcdG8tem9kLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi90by16b2QudHNcbmZ1bmN0aW9uIHRvWm9kU2NoZW1hKHsgZmllbGRzLCBpc0NsaWVudFNpZGUgfSkge1xuXHRjb25zdCB6b2RGaWVsZHMgPSBPYmplY3Qua2V5cyhmaWVsZHMpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcblx0XHRjb25zdCBmaWVsZCA9IGZpZWxkc1trZXldO1xuXHRcdGlmICghZmllbGQpIHJldHVybiBhY2M7XG5cdFx0aWYgKGlzQ2xpZW50U2lkZSAmJiBmaWVsZC5pbnB1dCA9PT0gZmFsc2UpIHJldHVybiBhY2M7XG5cdFx0bGV0IHNjaGVtYTtcblx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJqc29uXCIpIHNjaGVtYSA9IHouanNvbiA/IHouanNvbigpIDogei5hbnkoKTtcblx0XHRlbHNlIGlmIChmaWVsZC50eXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGQudHlwZSA9PT0gXCJudW1iZXJbXVwiKSBzY2hlbWEgPSB6LmFycmF5KGZpZWxkLnR5cGUgPT09IFwic3RyaW5nW11cIiA/IHouc3RyaW5nKCkgOiB6Lm51bWJlcigpKTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLnR5cGUpKSBzY2hlbWEgPSB6LmFueSgpO1xuXHRcdGVsc2Ugc2NoZW1hID0geltmaWVsZC50eXBlXSgpO1xuXHRcdGlmIChmaWVsZD8ucmVxdWlyZWQgPT09IGZhbHNlKSBzY2hlbWEgPSBzY2hlbWEub3B0aW9uYWwoKTtcblx0XHRpZiAoIWlzQ2xpZW50U2lkZSAmJiBmaWVsZD8ucmV0dXJuZWQgPT09IGZhbHNlKSByZXR1cm4gYWNjO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5hY2MsXG5cdFx0XHRba2V5XTogc2NoZW1hXG5cdFx0fTtcblx0fSwge30pO1xuXHRyZXR1cm4gei5vYmplY3Qoem9kRmllbGRzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b1pvZFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG8tem9kLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/with-hooks.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWithHooks: () => (/* binding */ getWithHooks)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/db/with-hooks.ts\nfunction getWithHooks(adapter, ctx) {\n\tconst hooks = ctx.hooks;\n\tasync function createWithHooks(data, model, customCreateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(actualData, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n\t\tconst created = !customCreateFn || customCreateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).create({\n\t\t\tmodel,\n\t\t\tdata: actualData,\n\t\t\tforceAllowId: true\n\t\t}) : customCreated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.after;\n\t\t\tif (toRun) await toRun(created, context);\n\t\t}\n\t\treturn created;\n\t}\n\tasync function updateWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).update({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function updateManyWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).updateMany({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function deleteWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entityToDelete = null;\n\t\ttry {\n\t\t\tentityToDelete = (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit: 1\n\t\t\t}))[0] || null;\n\t\t} catch {}\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entityToDelete, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).delete({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entityToDelete, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\tasync function deleteManyWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entitiesToDelete = [];\n\t\ttry {\n\t\t\tentitiesToDelete = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t} catch {}\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entity, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).deleteMany({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entity, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\treturn {\n\t\tcreateWithHooks,\n\t\tupdateWithHooks,\n\t\tupdateManyWithHooks,\n\t\tdeleteWithHooks,\n\t\tdeleteManyWithHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=with-hooks.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi93aXRoLWhvb2tzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRjs7QUFFckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSxrQ0FBa0MsNEVBQWlCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQWlCO0FBQ3BEO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxkYlxcd2l0aC1ob29rcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldEN1cnJlbnRBdXRoQ29udGV4dCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvd2l0aC1ob29rcy50c1xuZnVuY3Rpb24gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCkge1xuXHRjb25zdCBob29rcyA9IGN0eC5ob29rcztcblx0YXN5bmMgZnVuY3Rpb24gY3JlYXRlV2l0aEhvb2tzKGRhdGEsIG1vZGVsLCBjdXN0b21DcmVhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5jcmVhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihhY3R1YWxEYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21DcmVhdGVkID0gY3VzdG9tQ3JlYXRlRm4gPyBhd2FpdCBjdXN0b21DcmVhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgY3JlYXRlZCA9ICFjdXN0b21DcmVhdGVGbiB8fCBjdXN0b21DcmVhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5jcmVhdGUoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRkYXRhOiBhY3R1YWxEYXRhLFxuXHRcdFx0Zm9yY2VBbGxvd0lkOiB0cnVlXG5cdFx0fSkgOiBjdXN0b21DcmVhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uY3JlYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oY3JlYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiBjcmVhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdpdGhIb29rcyhkYXRhLCB3aGVyZSwgbW9kZWwsIGN1c3RvbVVwZGF0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBhY3R1YWxEYXRhID0gZGF0YTtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGRhdGEsIGNvbnRleHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3VsdCkgYWN0dWFsRGF0YSA9IHtcblx0XHRcdFx0XHQuLi5hY3R1YWxEYXRhLFxuXHRcdFx0XHRcdC4uLnJlc3VsdC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbVVwZGF0ZWQgPSBjdXN0b21VcGRhdGVGbiA/IGF3YWl0IGN1c3RvbVVwZGF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcblx0XHRjb25zdCB1cGRhdGVkID0gIWN1c3RvbVVwZGF0ZUZuIHx8IGN1c3RvbVVwZGF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHVwZGF0ZTogYWN0dWFsRGF0YSxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21VcGRhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4odXBkYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiB1cGRhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hbnlXaXRoSG9va3MoZGF0YSwgd2hlcmUsIG1vZGVsLCBjdXN0b21VcGRhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihkYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21VcGRhdGVkID0gY3VzdG9tVXBkYXRlRm4gPyBhd2FpdCBjdXN0b21VcGRhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgdXBkYXRlZCA9ICFjdXN0b21VcGRhdGVGbiB8fCBjdXN0b21VcGRhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS51cGRhdGVNYW55KHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0dXBkYXRlOiBhY3R1YWxEYXRhLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbVVwZGF0ZWQ7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlV2l0aEhvb2tzKHdoZXJlLCBtb2RlbCwgY3VzdG9tRGVsZXRlRm4pIHtcblx0XHRjb25zdCBjb250ZXh0ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cdFx0bGV0IGVudGl0eVRvRGVsZXRlID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0ZW50aXR5VG9EZWxldGUgPSAoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZSxcblx0XHRcdFx0bGltaXQ6IDFcblx0XHRcdH0pKVswXSB8fCBudWxsO1xuXHRcdH0gY2F0Y2gge31cblx0XHRpZiAoZW50aXR5VG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5iZWZvcmU7XG5cdFx0XHRpZiAodG9SdW4pIHtcblx0XHRcdFx0aWYgKGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlKHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbURlbGV0ZWQ7XG5cdFx0aWYgKGVudGl0eVRvRGVsZXRlKSBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmRlbGV0ZT8uYWZ0ZXI7XG5cdFx0XHRpZiAodG9SdW4pIGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlTWFueVdpdGhIb29rcyh3aGVyZSwgbW9kZWwsIGN1c3RvbURlbGV0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBlbnRpdGllc1RvRGVsZXRlID0gW107XG5cdFx0dHJ5IHtcblx0XHRcdGVudGl0aWVzVG9EZWxldGUgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHt9XG5cdFx0Zm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXNUb0RlbGV0ZSkgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5kZWxldGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRpZiAoYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlTWFueSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21EZWxldGVkO1xuXHRcdGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzVG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRjcmVhdGVXaXRoSG9va3MsXG5cdFx0dXBkYXRlV2l0aEhvb2tzLFxuXHRcdHVwZGF0ZU1hbnlXaXRoSG9va3MsXG5cdFx0ZGVsZXRlV2l0aEhvb2tzLFxuXHRcdGRlbGV0ZU1hbnlXaXRoSG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRXaXRoSG9va3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGgtaG9va3MubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/index.mjs":
/*!*************************************************!*\
  !*** ./node_modules/better-auth/dist/index.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError),\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BetterAuthError),\n/* harmony export */   ENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.ENV),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__.HIDE_METADATA),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.TTY_COLORS),\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.accountSchema),\n/* harmony export */   betterAuth: () => (/* reexport safe */ _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__.betterAuth),\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.capitalizeFirstLetter),\n/* harmony export */   clientCredentialsToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.clientCredentialsToken),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.coreSchema),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationCodeRequest),\n/* harmony export */   createAuthorizationURL: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationURL),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createClientCredentialsTokenRequest),\n/* harmony export */   createLogger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.createLogger),\n/* harmony export */   createRateLimitKey: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.createRateLimitKey),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createRefreshAccessTokenRequest),\n/* harmony export */   createTelemetry: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.createTelemetry),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.defineErrorCodes),\n/* harmony export */   deprecate: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.deprecate),\n/* harmony export */   env: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.env),\n/* harmony export */   filterOutputFields: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.filterOutputFields),\n/* harmony export */   generateCodeChallenge: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.generateCodeChallenge),\n/* harmony export */   generateGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.generateGenericState),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__.generateId),\n/* harmony export */   generateState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.generateState),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.getAuthTables),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getColorDepth),\n/* harmony export */   getCurrentAdapter: () => (/* reexport safe */ _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__.getCurrentAdapter),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getEnvVar),\n/* harmony export */   getJwks: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getJwks),\n/* harmony export */   getOAuth2Tokens: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getOAuth2Tokens),\n/* harmony export */   getTelemetryAuthConfig: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.getTelemetryAuthConfig),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isDevelopment),\n/* harmony export */   isProduction: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isProduction),\n/* harmony export */   isTest: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isTest),\n/* harmony export */   isValidIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.isValidIP),\n/* harmony export */   levels: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.levels),\n/* harmony export */   logger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.logger),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.nodeENV),\n/* harmony export */   normalizeIP: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizeIP),\n/* harmony export */   normalizePathname: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.normalizePathname),\n/* harmony export */   parseGenericState: () => (/* reexport safe */ _state_mjs__WEBPACK_IMPORTED_MODULE_0__.parseGenericState),\n/* harmony export */   parseState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.rateLimitSchema),\n/* harmony export */   refreshAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.refreshAccessToken),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.safeJSONParse),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.sessionSchema),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.shouldPublishLog),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.userSchema),\n/* harmony export */   validateAuthorizationCode: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateAuthorizationCode),\n/* harmony export */   validateToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateToken),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.verificationSchema),\n/* harmony export */   verifyAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyAccessToken),\n/* harmony export */   verifyJwsAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyJwsAccessToken)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state.mjs */ \"(rsc)/./node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _auth_full_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./auth/full.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/full.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var _better_auth_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core */ \"(rsc)/./node_modules/@better-auth/core/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRTtBQUNQO0FBQ0w7QUFDWDtBQUNKO0FBQ0U7QUFDaUI7QUFDbUI7O0FBRWhEOztBQUVHOztBQUVDOztBQUVFOztBQUVDOztBQUVEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9IGZyb20gXCIuL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0ZSwgcGFyc2VTdGF0ZSB9IGZyb20gXCIuL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYXV0aC9mdWxsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgY3JlYXRlVGVsZW1ldHJ5LCBnZXRUZWxlbWV0cnlBdXRoQ29uZmlnIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC90ZWxlbWV0cnlcIjtcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9vYXV0aDJcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIlxuXG5leHBvcnQgeyBBUElFcnJvciwgSElERV9NRVRBREFUQSwgYmV0dGVyQXV0aCwgY3JlYXRlVGVsZW1ldHJ5LCBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgZ2VuZXJhdGVJZCwgZ2VuZXJhdGVTdGF0ZSwgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldFRlbGVtZXRyeUF1dGhDb25maWcsIHBhcnNlR2VuZXJpY1N0YXRlLCBwYXJzZVN0YXRlIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/integrations/next-js.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/integrations/next-js.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nextCookies: () => (/* binding */ nextCookies),\n/* harmony export */   toNextJsHandler: () => (/* binding */ toNextJsHandler)\n/* harmony export */ });\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/integrations/next-js.ts\nfunction toNextJsHandler(auth) {\n\tconst handler = async (request) => {\n\t\treturn \"handler\" in auth ? auth.handler(request) : auth(request);\n\t};\n\treturn {\n\t\tGET: handler,\n\t\tPOST: handler,\n\t\tPATCH: handler,\n\t\tPUT: handler,\n\t\tDELETE: handler\n\t};\n}\nconst nextCookies = () => {\n\treturn {\n\t\tid: \"next-cookies\",\n\t\thooks: { after: [{\n\t\t\tmatcher(ctx) {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst returned = ctx.context.responseHeaders;\n\t\t\t\tif (\"_flag\" in ctx && ctx._flag === \"router\") return;\n\t\t\t\tif (returned instanceof Headers) {\n\t\t\t\t\tconst setCookies = returned?.get(\"set-cookie\");\n\t\t\t\t\tif (!setCookies) return;\n\t\t\t\t\tconst parsed = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSetCookieHeader)(setCookies);\n\t\t\t\t\tconst { cookies } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/next\").then(__webpack_require__.bind(__webpack_require__, /*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\"));\n\t\t\t\t\tlet cookieHelper;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcookieHelper = await cookies();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error instanceof Error && error.message.startsWith(\"`cookies` was called outside a request scope.\")) return;\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t\tparsed.forEach((value, key) => {\n\t\t\t\t\t\tif (!key) return;\n\t\t\t\t\t\tconst opts = {\n\t\t\t\t\t\t\tsameSite: value.samesite,\n\t\t\t\t\t\t\tsecure: value.secure,\n\t\t\t\t\t\t\tmaxAge: value[\"max-age\"],\n\t\t\t\t\t\t\thttpOnly: value.httponly,\n\t\t\t\t\t\t\tdomain: value.domain,\n\t\t\t\t\t\t\tpath: value.path\n\t\t\t\t\t\t};\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookieHelper.set(key, decodeURIComponent(value.value), opts);\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t})\n\t\t}] }\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=next-js.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9pbnRlZ3JhdGlvbnMvbmV4dC1qcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUU7QUFDckM7QUFDK0I7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrRUFBb0I7QUFDeEMsYUFBYSxVQUFVLFFBQVEsb0xBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxpbnRlZ3JhdGlvbnNcXG5leHQtanMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlU2V0Q29va2llSGVhZGVyIH0gZnJvbSBcIi4uL2Nvb2tpZXMvY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IFwiLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2ludGVncmF0aW9ucy9uZXh0LWpzLnRzXG5mdW5jdGlvbiB0b05leHRKc0hhbmRsZXIoYXV0aCkge1xuXHRjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRyZXR1cm4gXCJoYW5kbGVyXCIgaW4gYXV0aCA/IGF1dGguaGFuZGxlcihyZXF1ZXN0KSA6IGF1dGgocmVxdWVzdCk7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0R0VUOiBoYW5kbGVyLFxuXHRcdFBPU1Q6IGhhbmRsZXIsXG5cdFx0UEFUQ0g6IGhhbmRsZXIsXG5cdFx0UFVUOiBoYW5kbGVyLFxuXHRcdERFTEVURTogaGFuZGxlclxuXHR9O1xufVxuY29uc3QgbmV4dENvb2tpZXMgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibmV4dC1jb29raWVzXCIsXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKGN0eCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJldHVybmVkID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzO1xuXHRcdFx0XHRpZiAoXCJfZmxhZ1wiIGluIGN0eCAmJiBjdHguX2ZsYWcgPT09IFwicm91dGVyXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHJldHVybmVkIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdFx0XHRcdGNvbnN0IHNldENvb2tpZXMgPSByZXR1cm5lZD8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0XHRpZiAoIXNldENvb2tpZXMpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWVzKTtcblx0XHRcdFx0XHRjb25zdCB7IGNvb2tpZXMgfSA9IGF3YWl0IGltcG9ydChcIm5leHQvaGVhZGVyc1wiKTtcblx0XHRcdFx0XHRsZXQgY29va2llSGVscGVyO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb29raWVIZWxwZXIgPSBhd2FpdCBjb29raWVzKCk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcImBjb29raWVzYCB3YXMgY2FsbGVkIG91dHNpZGUgYSByZXF1ZXN0IHNjb3BlLlwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhcnNlZC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIWtleSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3Qgb3B0cyA9IHtcblx0XHRcdFx0XHRcdFx0c2FtZVNpdGU6IHZhbHVlLnNhbWVzaXRlLFxuXHRcdFx0XHRcdFx0XHRzZWN1cmU6IHZhbHVlLnNlY3VyZSxcblx0XHRcdFx0XHRcdFx0bWF4QWdlOiB2YWx1ZVtcIm1heC1hZ2VcIl0sXG5cdFx0XHRcdFx0XHRcdGh0dHBPbmx5OiB2YWx1ZS5odHRwb25seSxcblx0XHRcdFx0XHRcdFx0ZG9tYWluOiB2YWx1ZS5kb21haW4sXG5cdFx0XHRcdFx0XHRcdHBhdGg6IHZhbHVlLnBhdGhcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWVIZWxwZXIuc2V0KGtleSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlLnZhbHVlKSwgb3B0cyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHt9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1dIH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbmV4dENvb2tpZXMsIHRvTmV4dEpzSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV4dC1qcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/integrations/next-js.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/link-account.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleOAuthUserInfo: () => (/* binding */ handleOAuthUserInfo)\n/* harmony export */ });\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/routes/email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, opts) {\n\tconst { userInfo, account, callbackURL, disableSignUp, overrideUserInfo } = opts;\n\tconst dbUser = await c.context.internalAdapter.findOAuthUser(userInfo.email.toLowerCase(), account.accountId, account.providerId).catch((e) => {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Better auth was unable to query your database.\\nError: \", e);\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t});\n\tlet user = dbUser?.user;\n\tconst isRegister = !user;\n\tif (dbUser) {\n\t\tconst linkedAccount = dbUser.linkedAccount ?? dbUser.accounts.find((acc) => acc.providerId === account.providerId && acc.accountId === account.accountId);\n\t\tif (!linkedAccount) {\n\t\t\tconst accountLinking = c.context.options.account?.accountLinking;\n\t\t\tconst trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n\t\t\tif (!(opts.isTrustedProvider || trustedProviders?.includes(account.providerId)) && !userInfo.emailVerified || accountLinking?.enabled === false || accountLinking?.disableImplicitLinking === true) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.isDevelopment)()) _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.warn(`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t} else {\n\t\t\tconst freshTokens = c.context.options.account?.updateAccountOnSignIn !== false ? Object.fromEntries(Object.entries({\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope\n\t\t\t}).filter(([_, value]) => value !== void 0)) : {};\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, {\n\t\t\t\t...linkedAccount,\n\t\t\t\t...freshTokens\n\t\t\t});\n\t\t\tif (Object.keys(freshTokens).length > 0) await c.context.internalAdapter.updateAccount(linkedAccount.id, freshTokens);\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) return {\n\t\t\terror: \"signup disabled\",\n\t\t\tdata: null,\n\t\t\tisRegister: false\n\t\t};\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString()\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } = await c.context.internalAdapter.createOAuthUser({\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase()\n\t\t\t}, accountData);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, createdAccount);\n\t\t\tif (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp && c.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\t\tconst token = await (0,_api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__.createEmailVerificationToken)(c.context.secret, user.email, void 0, c.context.options.emailVerification?.expiresIn);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.runInBackgroundOrAwait(c.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser,\n\t\t\t\t\turl,\n\t\t\t\t\ttoken\n\t\t\t\t}, c.request));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(e);\n\t\t\tif (e instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError) return {\n\t\t\t\terror: e.message,\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) return {\n\t\terror: \"unable to create user\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) return {\n\t\terror: \"unable to create session\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser\n\t\t},\n\t\terror: null,\n\t\tisRegister\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=link-account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvbGluay1hY2NvdW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBZ0U7QUFDckI7QUFDeUM7QUFDeEM7QUFDa0I7O0FBRTlEO0FBQ0E7QUFDQSxTQUFTLGtFQUFrRTtBQUMzRTtBQUNBLEVBQUUseURBQU07QUFDUixnRUFBZ0Usa0JBQWtCO0FBQ2xGLHNCQUFzQixTQUFTO0FBQy9CLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvRUFBYSxJQUFJLHlEQUFNLHdEQUF3RCxtQkFBbUI7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQVk7QUFDcEMseUJBQXlCLHdEQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTCxJQUFJLHlEQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdMQUFnTCxxQkFBcUI7QUFDck0sSUFBSTtBQUNKO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkMsd0JBQXdCLHdEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiw0REFBNEQsNEVBQWdCO0FBQzVFO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxnTEFBZ0wscUJBQXFCO0FBQ3JNO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHlCQUF5QjtBQUNwQztBQUNBLHVCQUF1Qix3REFBWTtBQUNuQyx3QkFBd0Isd0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDZDQUE2QztBQUN4RDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNERBQTRELDRFQUFnQjtBQUM1RTtBQUNBLHdCQUF3QixnR0FBNEI7QUFDcEQsbUJBQW1CLGtCQUFrQixzQkFBc0IsTUFBTSxlQUFlLFlBQVk7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osR0FBRyx5REFBTTtBQUNULG9CQUFvQixvREFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcb2F1dGgyXFxsaW5rLWFjY291bnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldEFjY291bnRDb29raWUgfSBmcm9tIFwiLi4vY29va2llcy9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgc2V0VG9rZW5VdGlsIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4uL2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuXG4vLyNyZWdpb24gc3JjL29hdXRoMi9saW5rLWFjY291bnQudHNcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU9BdXRoVXNlckluZm8oYywgb3B0cykge1xuXHRjb25zdCB7IHVzZXJJbmZvLCBhY2NvdW50LCBjYWxsYmFja1VSTCwgZGlzYWJsZVNpZ25VcCwgb3ZlcnJpZGVVc2VySW5mbyB9ID0gb3B0cztcblx0Y29uc3QgZGJVc2VyID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kT0F1dGhVc2VyKHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCksIGFjY291bnQuYWNjb3VudElkLCBhY2NvdW50LnByb3ZpZGVySWQpLmNhdGNoKChlKSA9PiB7XG5cdFx0bG9nZ2VyLmVycm9yKFwiQmV0dGVyIGF1dGggd2FzIHVuYWJsZSB0byBxdWVyeSB5b3VyIGRhdGFiYXNlLlxcbkVycm9yOiBcIiwgZSk7XG5cdFx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPWludGVybmFsX3NlcnZlcl9lcnJvcmApO1xuXHR9KTtcblx0bGV0IHVzZXIgPSBkYlVzZXI/LnVzZXI7XG5cdGNvbnN0IGlzUmVnaXN0ZXIgPSAhdXNlcjtcblx0aWYgKGRiVXNlcikge1xuXHRcdGNvbnN0IGxpbmtlZEFjY291bnQgPSBkYlVzZXIubGlua2VkQWNjb3VudCA/PyBkYlVzZXIuYWNjb3VudHMuZmluZCgoYWNjKSA9PiBhY2MucHJvdmlkZXJJZCA9PT0gYWNjb3VudC5wcm92aWRlcklkICYmIGFjYy5hY2NvdW50SWQgPT09IGFjY291bnQuYWNjb3VudElkKTtcblx0XHRpZiAoIWxpbmtlZEFjY291bnQpIHtcblx0XHRcdGNvbnN0IGFjY291bnRMaW5raW5nID0gYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc7XG5cdFx0XHRjb25zdCB0cnVzdGVkUHJvdmlkZXJzID0gYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnM7XG5cdFx0XHRpZiAoIShvcHRzLmlzVHJ1c3RlZFByb3ZpZGVyIHx8IHRydXN0ZWRQcm92aWRlcnM/LmluY2x1ZGVzKGFjY291bnQucHJvdmlkZXJJZCkpICYmICF1c2VySW5mby5lbWFpbFZlcmlmaWVkIHx8IGFjY291bnRMaW5raW5nPy5lbmFibGVkID09PSBmYWxzZSB8fCBhY2NvdW50TGlua2luZz8uZGlzYWJsZUltcGxpY2l0TGlua2luZyA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRpZiAoaXNEZXZlbG9wbWVudCgpKSBsb2dnZXIud2FybihgVXNlciBhbHJlYWR5IGV4aXN0IGJ1dCBhY2NvdW50IGlzbid0IGxpbmtlZCB0byAke2FjY291bnQucHJvdmlkZXJJZH0uIFRvIHJlYWQgbW9yZSBhYm91dCBob3cgYWNjb3VudCBsaW5raW5nIHdvcmtzIGluIEJldHRlciBBdXRoIHNlZSBodHRwczovL3d3dy5iZXR0ZXItYXV0aC5jb20vZG9jcy9jb25jZXB0cy91c2Vycy1hY2NvdW50cyNhY2NvdW50LWxpbmtpbmcuYCk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZXJyb3I6IFwiYWNjb3VudCBub3QgbGlua2VkXCIsXG5cdFx0XHRcdFx0ZGF0YTogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5saW5rQWNjb3VudCh7XG5cdFx0XHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0XHRcdGFjY291bnRJZDogdXNlckluZm8uaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHR1c2VySWQ6IGRiVXNlci51c2VyLmlkLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiBhY2NvdW50LnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGxpbmsgYWNjb3VudFwiLCBlKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRlcnJvcjogXCJ1bmFibGUgdG8gbGluayBhY2NvdW50XCIsXG5cdFx0XHRcdFx0ZGF0YTogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgJiYgIWRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgJiYgdXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSA9PT0gZGJVc2VyLnVzZXIuZW1haWwpIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwgeyBlbWFpbFZlcmlmaWVkOiB0cnVlIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBmcmVzaFRva2VucyA9IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnVwZGF0ZUFjY291bnRPblNpZ25JbiAhPT0gZmFsc2UgPyBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoe1xuXHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZVxuXHRcdFx0fSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdm9pZCAwKSkgOiB7fTtcblx0XHRcdGlmIChjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIGF3YWl0IHNldEFjY291bnRDb29raWUoYywge1xuXHRcdFx0XHQuLi5saW5rZWRBY2NvdW50LFxuXHRcdFx0XHQuLi5mcmVzaFRva2Vuc1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoT2JqZWN0LmtleXMoZnJlc2hUb2tlbnMpLmxlbmd0aCA+IDApIGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChsaW5rZWRBY2NvdW50LmlkLCBmcmVzaFRva2Vucyk7XG5cdFx0XHRpZiAodXNlckluZm8uZW1haWxWZXJpZmllZCAmJiAhZGJVc2VyLnVzZXIuZW1haWxWZXJpZmllZCAmJiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCkgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGRiVXNlci51c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdFx0fVxuXHRcdGlmIChvdmVycmlkZVVzZXJJbmZvKSB7XG5cdFx0XHRjb25zdCB7IGlkOiBfLCAuLi5yZXN0VXNlckluZm8gfSA9IHVzZXJJbmZvO1xuXHRcdFx0dXNlciA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwge1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCA/IGRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgfHwgdXNlckluZm8uZW1haWxWZXJpZmllZCA6IHVzZXJJbmZvLmVtYWlsVmVyaWZpZWRcblx0XHRcdH0pO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRpZiAoZGlzYWJsZVNpZ25VcCkgcmV0dXJuIHtcblx0XHRcdGVycm9yOiBcInNpZ251cCBkaXNhYmxlZFwiLFxuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdFx0fTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgeyBpZDogXywgLi4ucmVzdFVzZXJJbmZvIH0gPSB1c2VySW5mbztcblx0XHRcdGNvbnN0IGFjY291bnREYXRhID0ge1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZSxcblx0XHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IHVzZXJJbmZvLmlkLnRvU3RyaW5nKClcblx0XHRcdH07XG5cdFx0XHRjb25zdCB7IHVzZXI6IGNyZWF0ZWRVc2VyLCBhY2NvdW50OiBjcmVhdGVkQWNjb3VudCB9ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVPQXV0aFVzZXIoe1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9LCBhY2NvdW50RGF0YSk7XG5cdFx0XHR1c2VyID0gY3JlYXRlZFVzZXI7XG5cdFx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGMsIGNyZWF0ZWRBY2NvdW50KTtcblx0XHRcdGlmICghdXNlckluZm8uZW1haWxWZXJpZmllZCAmJiB1c2VyICYmIGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgJiYgYy5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oYy5jb250ZXh0LnNlY3JldCwgdXNlci5lbWFpbCwgdm9pZCAwLCBjLmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRcdGF3YWl0IGMuY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHR1cmwsXG5cdFx0XHRcdFx0dG9rZW5cblx0XHRcdFx0fSwgYy5yZXF1ZXN0KSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bG9nZ2VyLmVycm9yKGUpO1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikgcmV0dXJuIHtcblx0XHRcdFx0ZXJyb3I6IGUubWVzc2FnZSxcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGlmICghdXNlcikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci5pZCk7XG5cdGlmICghc2Vzc2lvbikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHNlc3Npb25cIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdHJldHVybiB7XG5cdFx0ZGF0YToge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXJcblx0XHR9LFxuXHRcdGVycm9yOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXJcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5rLWFjY291bnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/state.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateState: () => (/* binding */ generateState),\n/* harmony export */   parseState: () => (/* binding */ parseState)\n/* harmony export */ });\n/* harmony import */ var _api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/middlewares/oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../state.mjs */ \"(rsc)/./node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/state.ts\nasync function generateState(c, link, additionalData) {\n\tconst callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n\tif (!callbackURL) throw new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"callbackURL is required\" });\n\tconst codeVerifier = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(128);\n\tconst stateData = {\n\t\t...additionalData ? additionalData : {},\n\t\tcallbackURL,\n\t\tcodeVerifier,\n\t\terrorURL: c.body?.errorCallbackURL,\n\t\tnewUserURL: c.body?.newUserCallbackURL,\n\t\tlink,\n\t\texpiresAt: Date.now() + 600 * 1e3,\n\t\trequestSignUp: c.body?.requestSignUp\n\t};\n\tawait (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(stateData);\n\ttry {\n\t\treturn (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateGenericState)(c, stateData);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to create verification\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\tmessage: \"Unable to create verification\",\n\t\t\tcause: error\n\t\t});\n\t}\n}\nasync function parseState(c) {\n\tconst state = c.query.state || c.body.state;\n\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tlet parsedData;\n\ttry {\n\t\tparsedData = await (0,_state_mjs__WEBPACK_IMPORTED_MODULE_3__.parseGenericState)(c, state);\n\t} catch (error) {\n\t\tc.context.logger.error(\"Failed to parse state\", error);\n\t\tif (error instanceof _state_mjs__WEBPACK_IMPORTED_MODULE_3__.StateError && error.code === \"state_security_mismatch\") throw c.redirect(`${errorURL}?error=state_mismatch`);\n\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t}\n\tif (!parsedData.errorURL) parsedData.errorURL = errorURL;\n\tif (parsedData) await (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(parsedData);\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvc3RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNkQ7QUFDRDtBQUMvQjtBQUNzRDtBQUM1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFRLGtCQUFrQixvQ0FBb0M7QUFDM0Ysc0JBQXNCLHdFQUFvQjtBQUMxQztBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx5RUFBYTtBQUNwQjtBQUNBLFNBQVMsZ0VBQW9CO0FBQzdCLEdBQUc7QUFDSDtBQUNBLFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxrQkFBa0I7QUFDakY7QUFDQTtBQUNBLHFCQUFxQiw2REFBaUI7QUFDdEMsR0FBRztBQUNIO0FBQ0EsdUJBQXVCLGtEQUFVLGtFQUFrRSxTQUFTO0FBQzVHLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQSx1QkFBdUIseUVBQWE7QUFDcEM7QUFDQTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXG9hdXRoMlxcc3RhdGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi4vYXBpL21pZGRsZXdhcmVzL29hdXRoLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IFN0YXRlRXJyb3IsIGdlbmVyYXRlR2VuZXJpY1N0YXRlLCBwYXJzZUdlbmVyaWNTdGF0ZSB9IGZyb20gXCIuLi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3N0YXRlLnRzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0YXRlKGMsIGxpbmssIGFkZGl0aW9uYWxEYXRhKSB7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYy5ib2R5Py5jYWxsYmFja1VSTCB8fCBjLmNvbnRleHQub3B0aW9ucy5iYXNlVVJMO1xuXHRpZiAoIWNhbGxiYWNrVVJMKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiY2FsbGJhY2tVUkwgaXMgcmVxdWlyZWRcIiB9KTtcblx0Y29uc3QgY29kZVZlcmlmaWVyID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMTI4KTtcblx0Y29uc3Qgc3RhdGVEYXRhID0ge1xuXHRcdC4uLmFkZGl0aW9uYWxEYXRhID8gYWRkaXRpb25hbERhdGEgOiB7fSxcblx0XHRjYWxsYmFja1VSTCxcblx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0ZXJyb3JVUkw6IGMuYm9keT8uZXJyb3JDYWxsYmFja1VSTCxcblx0XHRuZXdVc2VyVVJMOiBjLmJvZHk/Lm5ld1VzZXJDYWxsYmFja1VSTCxcblx0XHRsaW5rLFxuXHRcdGV4cGlyZXNBdDogRGF0ZS5ub3coKSArIDYwMCAqIDFlMyxcblx0XHRyZXF1ZXN0U2lnblVwOiBjLmJvZHk/LnJlcXVlc3RTaWduVXBcblx0fTtcblx0YXdhaXQgc2V0T0F1dGhTdGF0ZShzdGF0ZURhdGEpO1xuXHR0cnkge1xuXHRcdHJldHVybiBnZW5lcmF0ZUdlbmVyaWNTdGF0ZShjLCBzdGF0ZURhdGEpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHZlcmlmaWNhdGlvblwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRcdG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJpZmljYXRpb25cIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiBwYXJzZVN0YXRlKGMpIHtcblx0Y29uc3Qgc3RhdGUgPSBjLnF1ZXJ5LnN0YXRlIHx8IGMuYm9keS5zdGF0ZTtcblx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRsZXQgcGFyc2VkRGF0YTtcblx0dHJ5IHtcblx0XHRwYXJzZWREYXRhID0gYXdhaXQgcGFyc2VHZW5lcmljU3RhdGUoYywgc3RhdGUpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2Ugc3RhdGVcIiwgZXJyb3IpO1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIFN0YXRlRXJyb3IgJiYgZXJyb3IuY29kZSA9PT0gXCJzdGF0ZV9zZWN1cml0eV9taXNtYXRjaFwiKSB0aHJvdyBjLnJlZGlyZWN0KGAke2Vycm9yVVJMfT9lcnJvcj1zdGF0ZV9taXNtYXRjaGApO1xuXHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPXBsZWFzZV9yZXN0YXJ0X3RoZV9wcm9jZXNzYCk7XG5cdH1cblx0aWYgKCFwYXJzZWREYXRhLmVycm9yVVJMKSBwYXJzZWREYXRhLmVycm9yVVJMID0gZXJyb3JVUkw7XG5cdGlmIChwYXJzZWREYXRhKSBhd2FpdCBzZXRPQXV0aFN0YXRlKHBhcnNlZERhdGEpO1xuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdGF0ZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/utils.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptOAuthToken: () => (/* binding */ decryptOAuthToken),\n/* harmony export */   setTokenUtil: () => (/* binding */ setTokenUtil)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n\n\n//#region src/oauth2/utils.ts\nfunction decryptOAuthToken(token, ctx) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\nfunction setTokenUtil(token, ctx) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RTs7QUFFekU7QUFDQTtBQUNBO0FBQ0EscURBQXFELG1FQUFnQjtBQUNyRTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxtRUFBZ0I7QUFDOUU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQzJDO0FBQzNDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcb2F1dGgyXFx1dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3V0aWxzLnRzXG5mdW5jdGlvbiBkZWNyeXB0T0F1dGhUb2tlbih0b2tlbiwgY3R4KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiB0b2tlbjtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucykgcmV0dXJuIHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuZnVuY3Rpb24gc2V0VG9rZW5VdGlsKHRva2VuLCBjdHgpIHtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucyAmJiB0b2tlbikgcmV0dXJuIHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRlY3J5cHRPQXV0aFRva2VuLCBzZXRUb2tlblV0aWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/access/access.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessControl: () => (/* binding */ createAccessControl),\n/* harmony export */   role: () => (/* binding */ role)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n//#region src/plugins/access/access.ts\nfunction role(statements) {\n\treturn {\n\t\tauthorize(request, connector = \"AND\") {\n\t\t\tlet success = false;\n\t\t\tfor (const [requestedResource, requestedActions] of Object.entries(request)) {\n\t\t\t\tconst allowedActions = statements[requestedResource];\n\t\t\t\tif (!allowedActions) return {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: `You are not allowed to access resource: ${requestedResource}`\n\t\t\t\t};\n\t\t\t\tif (Array.isArray(requestedActions)) success = requestedActions.every((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\telse if (typeof requestedActions === \"object\") {\n\t\t\t\t\tconst actions = requestedActions;\n\t\t\t\t\tif (actions.connector === \"OR\") success = actions.actions.some((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\t\telse success = actions.actions.every((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_0__.BetterAuthError(\"Invalid access control request\");\n\t\t\t\tif (success && connector === \"OR\") return { success };\n\t\t\t\tif (!success && connector === \"AND\") return {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: `unauthorized to access resource \"${requestedResource}\"`\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (success) return { success };\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terror: \"Not authorized\"\n\t\t\t};\n\t\t},\n\t\tstatements\n\t};\n}\nfunction createAccessControl(s) {\n\treturn {\n\t\tnewRole(statements) {\n\t\t\treturn role(statements);\n\t\t},\n\t\tstatements: s\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=access.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FjY2Vzcy9hY2Nlc3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwRDs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGtCQUFrQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGVBQWUsb0VBQWU7QUFDcEMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxnREFBZ0Qsa0JBQWtCO0FBQ2xFO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3FDO0FBQ3JDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWNjZXNzXFxhY2Nlc3MubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWNjZXNzL2FjY2Vzcy50c1xuZnVuY3Rpb24gcm9sZShzdGF0ZW1lbnRzKSB7XG5cdHJldHVybiB7XG5cdFx0YXV0aG9yaXplKHJlcXVlc3QsIGNvbm5lY3RvciA9IFwiQU5EXCIpIHtcblx0XHRcdGxldCBzdWNjZXNzID0gZmFsc2U7XG5cdFx0XHRmb3IgKGNvbnN0IFtyZXF1ZXN0ZWRSZXNvdXJjZSwgcmVxdWVzdGVkQWN0aW9uc10gb2YgT2JqZWN0LmVudHJpZXMocmVxdWVzdCkpIHtcblx0XHRcdFx0Y29uc3QgYWxsb3dlZEFjdGlvbnMgPSBzdGF0ZW1lbnRzW3JlcXVlc3RlZFJlc291cmNlXTtcblx0XHRcdFx0aWYgKCFhbGxvd2VkQWN0aW9ucykgcmV0dXJuIHtcblx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRlcnJvcjogYFlvdSBhcmUgbm90IGFsbG93ZWQgdG8gYWNjZXNzIHJlc291cmNlOiAke3JlcXVlc3RlZFJlc291cmNlfWBcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocmVxdWVzdGVkQWN0aW9ucykpIHN1Y2Nlc3MgPSByZXF1ZXN0ZWRBY3Rpb25zLmV2ZXJ5KChyZXF1ZXN0ZWRBY3Rpb24pID0+IGFsbG93ZWRBY3Rpb25zLmluY2x1ZGVzKHJlcXVlc3RlZEFjdGlvbikpO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgcmVxdWVzdGVkQWN0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdGNvbnN0IGFjdGlvbnMgPSByZXF1ZXN0ZWRBY3Rpb25zO1xuXHRcdFx0XHRcdGlmIChhY3Rpb25zLmNvbm5lY3RvciA9PT0gXCJPUlwiKSBzdWNjZXNzID0gYWN0aW9ucy5hY3Rpb25zLnNvbWUoKHJlcXVlc3RlZEFjdGlvbikgPT4gYWxsb3dlZEFjdGlvbnMuaW5jbHVkZXMocmVxdWVzdGVkQWN0aW9uKSk7XG5cdFx0XHRcdFx0ZWxzZSBzdWNjZXNzID0gYWN0aW9ucy5hY3Rpb25zLmV2ZXJ5KChyZXF1ZXN0ZWRBY3Rpb24pID0+IGFsbG93ZWRBY3Rpb25zLmluY2x1ZGVzKHJlcXVlc3RlZEFjdGlvbikpO1xuXHRcdFx0XHR9IGVsc2UgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkludmFsaWQgYWNjZXNzIGNvbnRyb2wgcmVxdWVzdFwiKTtcblx0XHRcdFx0aWYgKHN1Y2Nlc3MgJiYgY29ubmVjdG9yID09PSBcIk9SXCIpIHJldHVybiB7IHN1Y2Nlc3MgfTtcblx0XHRcdFx0aWYgKCFzdWNjZXNzICYmIGNvbm5lY3RvciA9PT0gXCJBTkRcIikgcmV0dXJuIHtcblx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRlcnJvcjogYHVuYXV0aG9yaXplZCB0byBhY2Nlc3MgcmVzb3VyY2UgXCIke3JlcXVlc3RlZFJlc291cmNlfVwiYFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN1Y2Nlc3MpIHJldHVybiB7IHN1Y2Nlc3MgfTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJvcjogXCJOb3QgYXV0aG9yaXplZFwiXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0c3RhdGVtZW50c1xuXHR9O1xufVxuZnVuY3Rpb24gY3JlYXRlQWNjZXNzQ29udHJvbChzKSB7XG5cdHJldHVybiB7XG5cdFx0bmV3Um9sZShzdGF0ZW1lbnRzKSB7XG5cdFx0XHRyZXR1cm4gcm9sZShzdGF0ZW1lbnRzKTtcblx0XHR9LFxuXHRcdHN0YXRlbWVudHM6IHNcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBY2Nlc3NDb250cm9sLCByb2xlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3MubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/access/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessControl: () => (/* reexport safe */ _access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl),\n/* harmony export */   role: () => (/* reexport safe */ _access_mjs__WEBPACK_IMPORTED_MODULE_0__.role)\n/* harmony export */ });\n/* harmony import */ var _access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FjY2Vzcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWNjZXNzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCwgcm9sZSB9IGZyb20gXCIuL2FjY2Vzcy5tanNcIjtcblxuZXhwb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCwgcm9sZSB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/additional-fields/client.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inferAdditionalFields: () => (/* binding */ inferAdditionalFields)\n/* harmony export */ });\n//#region src/plugins/additional-fields/client.ts\nconst inferAdditionalFields = (schema) => {\n\treturn {\n\t\tid: \"additional-fields-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkZGl0aW9uYWwtZmllbGRzL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lDO0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRkaXRpb25hbC1maWVsZHNcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FkZGl0aW9uYWwtZmllbGRzL2NsaWVudC50c1xuY29uc3QgaW5mZXJBZGRpdGlvbmFsRmllbGRzID0gKHNjaGVtYSkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFkZGl0aW9uYWwtZmllbGRzLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaW5mZXJBZGRpdGlvbmFsRmllbGRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/access/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc),\n/* harmony export */   defaultAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAc),\n/* harmony export */   defaultRoles: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles),\n/* harmony export */   defaultStatements: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultStatements),\n/* harmony export */   userAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.userAc)\n/* harmony export */ });\n/* harmony import */ var _statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2FjY2Vzcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQThGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGFjY2Vzc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgdXNlckFjIH0gZnJvbSBcIi4vc3RhdGVtZW50Lm1qc1wiO1xuXG5leHBvcnQgeyBhZG1pbkFjLCBkZWZhdWx0QWMsIGRlZmF1bHRSb2xlcywgZGVmYXVsdFN0YXRlbWVudHMsIHVzZXJBYyB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/access/statement.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* binding */ adminAc),\n/* harmony export */   defaultAc: () => (/* binding */ defaultAc),\n/* harmony export */   defaultRoles: () => (/* binding */ defaultRoles),\n/* harmony export */   defaultStatements: () => (/* binding */ defaultStatements),\n/* harmony export */   userAc: () => (/* binding */ userAc)\n/* harmony export */ });\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../access/access.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n\n\n\n//#region src/plugins/admin/access/statement.ts\nconst defaultStatements = {\n\tuser: [\n\t\t\"create\",\n\t\t\"list\",\n\t\t\"set-role\",\n\t\t\"ban\",\n\t\t\"impersonate\",\n\t\t\"delete\",\n\t\t\"set-password\",\n\t\t\"get\",\n\t\t\"update\"\n\t],\n\tsession: [\n\t\t\"list\",\n\t\t\"revoke\",\n\t\t\"delete\"\n\t]\n};\nconst defaultAc = (0,_access_access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl)(defaultStatements);\nconst adminAc = defaultAc.newRole({\n\tuser: [\n\t\t\"create\",\n\t\t\"list\",\n\t\t\"set-role\",\n\t\t\"ban\",\n\t\t\"impersonate\",\n\t\t\"delete\",\n\t\t\"set-password\",\n\t\t\"get\",\n\t\t\"update\"\n\t],\n\tsession: [\n\t\t\"list\",\n\t\t\"revoke\",\n\t\t\"delete\"\n\t]\n});\nconst userAc = defaultAc.newRole({\n\tuser: [],\n\tsession: []\n});\nconst defaultRoles = {\n\tadmin: adminAc,\n\tuser: userAc\n};\n\n//#endregion\n\n//# sourceMappingURL=statement.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2FjY2Vzcy9zdGF0ZW1lbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEQ7QUFDOUI7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN1RTtBQUN2RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFkbWluXFxhY2Nlc3NcXHN0YXRlbWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCB9IGZyb20gXCIuLi8uLi9hY2Nlc3MvYWNjZXNzLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWRtaW4vYWNjZXNzL3N0YXRlbWVudC50c1xuY29uc3QgZGVmYXVsdFN0YXRlbWVudHMgPSB7XG5cdHVzZXI6IFtcblx0XHRcImNyZWF0ZVwiLFxuXHRcdFwibGlzdFwiLFxuXHRcdFwic2V0LXJvbGVcIixcblx0XHRcImJhblwiLFxuXHRcdFwiaW1wZXJzb25hdGVcIixcblx0XHRcImRlbGV0ZVwiLFxuXHRcdFwic2V0LXBhc3N3b3JkXCIsXG5cdFx0XCJnZXRcIixcblx0XHRcInVwZGF0ZVwiXG5cdF0sXG5cdHNlc3Npb246IFtcblx0XHRcImxpc3RcIixcblx0XHRcInJldm9rZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufTtcbmNvbnN0IGRlZmF1bHRBYyA9IGNyZWF0ZUFjY2Vzc0NvbnRyb2woZGVmYXVsdFN0YXRlbWVudHMpO1xuY29uc3QgYWRtaW5BYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0dXNlcjogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJsaXN0XCIsXG5cdFx0XCJzZXQtcm9sZVwiLFxuXHRcdFwiYmFuXCIsXG5cdFx0XCJpbXBlcnNvbmF0ZVwiLFxuXHRcdFwiZGVsZXRlXCIsXG5cdFx0XCJzZXQtcGFzc3dvcmRcIixcblx0XHRcImdldFwiLFxuXHRcdFwidXBkYXRlXCJcblx0XSxcblx0c2Vzc2lvbjogW1xuXHRcdFwibGlzdFwiLFxuXHRcdFwicmV2b2tlXCIsXG5cdFx0XCJkZWxldGVcIlxuXHRdXG59KTtcbmNvbnN0IHVzZXJBYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0dXNlcjogW10sXG5cdHNlc3Npb246IFtdXG59KTtcbmNvbnN0IGRlZmF1bHRSb2xlcyA9IHtcblx0YWRtaW46IGFkbWluQWMsXG5cdHVzZXI6IHVzZXJBY1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZG1pbkFjLCBkZWZhdWx0QWMsIGRlZmF1bHRSb2xlcywgZGVmYXVsdFN0YXRlbWVudHMsIHVzZXJBYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVtZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/admin.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/admin.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   admin: () => (/* binding */ admin)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\");\n/* harmony import */ var _utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/plugin-helper.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/plugin-helper.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/error-codes.mjs\");\n/* harmony import */ var _routes_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/routes.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/schema.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/admin/admin.ts\nconst admin = (options) => {\n\tconst opts = {\n\t\t...options || {},\n\t\tdefaultRole: options?.defaultRole ?? \"user\",\n\t\tadminRoles: options?.adminRoles ?? [\"admin\"],\n\t\tbannedUserMessage: options?.bannedUserMessage ?? \"You have been banned from this application. Please contact support if you believe this is an error.\"\n\t};\n\tif (options?.adminRoles) {\n\t\tconst invalidRoles = (Array.isArray(options.adminRoles) ? options.adminRoles : [...options.adminRoles.split(\",\")]).filter((role) => !Object.keys(options?.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultRoles).map((r) => r.toLowerCase()).includes(role.toLowerCase()));\n\t\tif (invalidRoles.length > 0) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(`Invalid admin roles: ${invalidRoles.join(\", \")}. Admin roles must be defined in the 'roles' configuration.`);\n\t}\n\treturn {\n\t\tid: \"admin\",\n\t\tinit() {\n\t\t\treturn { options: { databaseHooks: {\n\t\t\t\tuser: { create: { async before(user) {\n\t\t\t\t\treturn { data: {\n\t\t\t\t\t\trole: options?.defaultRole ?? \"user\",\n\t\t\t\t\t\t...user\n\t\t\t\t\t} };\n\t\t\t\t} } },\n\t\t\t\tsession: { create: { async before(session, ctx) {\n\t\t\t\t\tif (!ctx) return;\n\t\t\t\t\tconst user = await ctx.context.internalAdapter.findUserById(session.userId);\n\t\t\t\t\tif (user.banned) {\n\t\t\t\t\t\tif (user.banExpires && new Date(user.banExpires).getTime() < Date.now()) {\n\t\t\t\t\t\t\tawait ctx.context.internalAdapter.updateUser(session.userId, {\n\t\t\t\t\t\t\t\tbanned: false,\n\t\t\t\t\t\t\t\tbanReason: null,\n\t\t\t\t\t\t\t\tbanExpires: null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (ctx && (ctx.path.startsWith(\"/callback\") || ctx.path.startsWith(\"/oauth2/callback\"))) {\n\t\t\t\t\t\t\tconst redirectURI = ctx.context.options.onAPIError?.errorURL || `${ctx.context.baseURL}/error`;\n\t\t\t\t\t\t\tthrow ctx.redirect(`${redirectURI}?error=banned&error_description=${opts.bannedUserMessage}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.APIError(\"FORBIDDEN\", {\n\t\t\t\t\t\t\tmessage: opts.bannedUserMessage,\n\t\t\t\t\t\t\tcode: \"BANNED_USER\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t} } };\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher(context) {\n\t\t\t\treturn context.path === \"/list-sessions\";\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst response = await (0,_utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_4__.getEndpointResponse)(ctx);\n\t\t\t\tif (!response) return;\n\t\t\t\tconst newJson = response.filter((session) => {\n\t\t\t\t\treturn !session.impersonatedBy;\n\t\t\t\t});\n\t\t\t\treturn ctx.json(newJson);\n\t\t\t})\n\t\t}] },\n\t\tendpoints: {\n\t\t\tsetRole: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.setRole)(opts),\n\t\t\tgetUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.getUser)(opts),\n\t\t\tcreateUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.createUser)(opts),\n\t\t\tadminUpdateUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.adminUpdateUser)(opts),\n\t\t\tlistUsers: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.listUsers)(opts),\n\t\t\tlistUserSessions: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserSessions)(opts),\n\t\t\tunbanUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.unbanUser)(opts),\n\t\t\tbanUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.banUser)(opts),\n\t\t\timpersonateUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.impersonateUser)(opts),\n\t\t\tstopImpersonating: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.stopImpersonating)(),\n\t\t\trevokeUserSession: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.revokeUserSession)(opts),\n\t\t\trevokeUserSessions: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.revokeUserSessions)(opts),\n\t\t\tremoveUser: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.removeUser)(opts),\n\t\t\tsetUserPassword: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.setUserPassword)(opts),\n\t\t\tuserHasPermission: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_6__.userHasPermission)(opts)\n\t\t},\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ADMIN_ERROR_CODES,\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_7__.schema, opts.schema),\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=admin.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2FkbWluLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNIO0FBQ087QUFDMUI7QUFDd0M7QUFDZDtBQUNtTTtBQUNuTjtBQUNvQjtBQUNHOztBQUU3RDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFLQUFxSywrREFBWTtBQUNqTCx5Q0FBeUMsb0VBQWUseUJBQXlCLHdCQUF3QjtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QixZQUFZLFVBQVU7QUFDdEIsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlLFVBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsb0JBQW9CO0FBQzlGLDZCQUE2QixZQUFZLGtDQUFrQyx1QkFBdUI7QUFDbEc7QUFDQSxnQkFBZ0Isb0RBQVE7QUFDeEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEMsMkJBQTJCLDZFQUFtQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osR0FBRyxHQUFHO0FBQ047QUFDQSxZQUFZLG9EQUFPO0FBQ25CLFlBQVksb0RBQU87QUFDbkIsZUFBZSx1REFBVTtBQUN6QixvQkFBb0IsNERBQWU7QUFDbkMsY0FBYyxzREFBUztBQUN2QixxQkFBcUIsNkRBQWdCO0FBQ3JDLGNBQWMsc0RBQVM7QUFDdkIsWUFBWSxvREFBTztBQUNuQixvQkFBb0IsNERBQWU7QUFDbkMsc0JBQXNCLDhEQUFpQjtBQUN2QyxzQkFBc0IsOERBQWlCO0FBQ3ZDLHVCQUF1QiwrREFBa0I7QUFDekMsZUFBZSx1REFBVTtBQUN6QixvQkFBb0IsNERBQWU7QUFDbkMsc0JBQXNCLDhEQUFpQjtBQUN2QyxHQUFHO0FBQ0gsZ0JBQWdCLCtEQUFpQjtBQUNqQyxVQUFVLDJEQUFXLENBQUMsK0NBQU07QUFDNUI7QUFDQTtBQUNBOztBQUVBO0FBQ2lCO0FBQ2pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGFkbWluLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZVNjaGVtYSB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0Um9sZXMgfSBmcm9tIFwiLi9hY2Nlc3Mvc3RhdGVtZW50Lm1qc1wiO1xuaW1wb3J0IFwiLi9hY2Nlc3MvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3BsdWdpbi1oZWxwZXIubWpzXCI7XG5pbXBvcnQgeyBBRE1JTl9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgYWRtaW5VcGRhdGVVc2VyLCBiYW5Vc2VyLCBjcmVhdGVVc2VyLCBnZXRVc2VyLCBpbXBlcnNvbmF0ZVVzZXIsIGxpc3RVc2VyU2Vzc2lvbnMsIGxpc3RVc2VycywgcmVtb3ZlVXNlciwgcmV2b2tlVXNlclNlc3Npb24sIHJldm9rZVVzZXJTZXNzaW9ucywgc2V0Um9sZSwgc2V0VXNlclBhc3N3b3JkLCBzdG9wSW1wZXJzb25hdGluZywgdW5iYW5Vc2VyLCB1c2VySGFzUGVybWlzc2lvbiB9IGZyb20gXCIuL3JvdXRlcy5tanNcIjtcbmltcG9ydCB7IHNjaGVtYSB9IGZyb20gXCIuL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hZG1pbi9hZG1pbi50c1xuY29uc3QgYWRtaW4gPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBvcHRzID0ge1xuXHRcdC4uLm9wdGlvbnMgfHwge30sXG5cdFx0ZGVmYXVsdFJvbGU6IG9wdGlvbnM/LmRlZmF1bHRSb2xlID8/IFwidXNlclwiLFxuXHRcdGFkbWluUm9sZXM6IG9wdGlvbnM/LmFkbWluUm9sZXMgPz8gW1wiYWRtaW5cIl0sXG5cdFx0YmFubmVkVXNlck1lc3NhZ2U6IG9wdGlvbnM/LmJhbm5lZFVzZXJNZXNzYWdlID8/IFwiWW91IGhhdmUgYmVlbiBiYW5uZWQgZnJvbSB0aGlzIGFwcGxpY2F0aW9uLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0IGlmIHlvdSBiZWxpZXZlIHRoaXMgaXMgYW4gZXJyb3IuXCJcblx0fTtcblx0aWYgKG9wdGlvbnM/LmFkbWluUm9sZXMpIHtcblx0XHRjb25zdCBpbnZhbGlkUm9sZXMgPSAoQXJyYXkuaXNBcnJheShvcHRpb25zLmFkbWluUm9sZXMpID8gb3B0aW9ucy5hZG1pblJvbGVzIDogWy4uLm9wdGlvbnMuYWRtaW5Sb2xlcy5zcGxpdChcIixcIildKS5maWx0ZXIoKHJvbGUpID0+ICFPYmplY3Qua2V5cyhvcHRpb25zPy5yb2xlcyB8fCBkZWZhdWx0Um9sZXMpLm1hcCgocikgPT4gci50b0xvd2VyQ2FzZSgpKS5pbmNsdWRlcyhyb2xlLnRvTG93ZXJDYXNlKCkpKTtcblx0XHRpZiAoaW52YWxpZFJvbGVzLmxlbmd0aCA+IDApIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYWRtaW4gcm9sZXM6ICR7aW52YWxpZFJvbGVzLmpvaW4oXCIsIFwiKX0uIEFkbWluIHJvbGVzIG11c3QgYmUgZGVmaW5lZCBpbiB0aGUgJ3JvbGVzJyBjb25maWd1cmF0aW9uLmApO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiYWRtaW5cIixcblx0XHRpbml0KCkge1xuXHRcdFx0cmV0dXJuIHsgb3B0aW9uczogeyBkYXRhYmFzZUhvb2tzOiB7XG5cdFx0XHRcdHVzZXI6IHsgY3JlYXRlOiB7IGFzeW5jIGJlZm9yZSh1c2VyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgZGF0YToge1xuXHRcdFx0XHRcdFx0cm9sZTogb3B0aW9ucz8uZGVmYXVsdFJvbGUgPz8gXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHQuLi51c2VyXG5cdFx0XHRcdFx0fSB9O1xuXHRcdFx0XHR9IH0gfSxcblx0XHRcdFx0c2Vzc2lvbjogeyBjcmVhdGU6IHsgYXN5bmMgYmVmb3JlKHNlc3Npb24sIGN0eCkge1xuXHRcdFx0XHRcdGlmICghY3R4KSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQoc2Vzc2lvbi51c2VySWQpO1xuXHRcdFx0XHRcdGlmICh1c2VyLmJhbm5lZCkge1xuXHRcdFx0XHRcdFx0aWYgKHVzZXIuYmFuRXhwaXJlcyAmJiBuZXcgRGF0ZSh1c2VyLmJhbkV4cGlyZXMpLmdldFRpbWUoKSA8IERhdGUubm93KCkpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VySWQsIHtcblx0XHRcdFx0XHRcdFx0XHRiYW5uZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdGJhblJlYXNvbjogbnVsbCxcblx0XHRcdFx0XHRcdFx0XHRiYW5FeHBpcmVzOiBudWxsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY3R4ICYmIChjdHgucGF0aC5zdGFydHNXaXRoKFwiL2NhbGxiYWNrXCIpIHx8IGN0eC5wYXRoLnN0YXJ0c1dpdGgoXCIvb2F1dGgyL2NhbGxiYWNrXCIpKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCByZWRpcmVjdFVSSSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBjdHgucmVkaXJlY3QoYCR7cmVkaXJlY3RVUkl9P2Vycm9yPWJhbm5lZCZlcnJvcl9kZXNjcmlwdGlvbj0ke29wdHMuYmFubmVkVXNlck1lc3NhZ2V9YCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwge1xuXHRcdFx0XHRcdFx0XHRtZXNzYWdlOiBvcHRzLmJhbm5lZFVzZXJNZXNzYWdlLFxuXHRcdFx0XHRcdFx0XHRjb2RlOiBcIkJBTk5FRF9VU0VSXCJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfSB9O1xuXHRcdH0sXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKGNvbnRleHQpIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQucGF0aCA9PT0gXCIvbGlzdC1zZXNzaW9uc1wiO1xuXHRcdFx0fSxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZXRFbmRwb2ludFJlc3BvbnNlKGN0eCk7XG5cdFx0XHRcdGlmICghcmVzcG9uc2UpIHJldHVybjtcblx0XHRcdFx0Y29uc3QgbmV3SnNvbiA9IHJlc3BvbnNlLmZpbHRlcigoc2Vzc2lvbikgPT4ge1xuXHRcdFx0XHRcdHJldHVybiAhc2Vzc2lvbi5pbXBlcnNvbmF0ZWRCeTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbihuZXdKc29uKTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNldFJvbGU6IHNldFJvbGUob3B0cyksXG5cdFx0XHRnZXRVc2VyOiBnZXRVc2VyKG9wdHMpLFxuXHRcdFx0Y3JlYXRlVXNlcjogY3JlYXRlVXNlcihvcHRzKSxcblx0XHRcdGFkbWluVXBkYXRlVXNlcjogYWRtaW5VcGRhdGVVc2VyKG9wdHMpLFxuXHRcdFx0bGlzdFVzZXJzOiBsaXN0VXNlcnMob3B0cyksXG5cdFx0XHRsaXN0VXNlclNlc3Npb25zOiBsaXN0VXNlclNlc3Npb25zKG9wdHMpLFxuXHRcdFx0dW5iYW5Vc2VyOiB1bmJhblVzZXIob3B0cyksXG5cdFx0XHRiYW5Vc2VyOiBiYW5Vc2VyKG9wdHMpLFxuXHRcdFx0aW1wZXJzb25hdGVVc2VyOiBpbXBlcnNvbmF0ZVVzZXIob3B0cyksXG5cdFx0XHRzdG9wSW1wZXJzb25hdGluZzogc3RvcEltcGVyc29uYXRpbmcoKSxcblx0XHRcdHJldm9rZVVzZXJTZXNzaW9uOiByZXZva2VVc2VyU2Vzc2lvbihvcHRzKSxcblx0XHRcdHJldm9rZVVzZXJTZXNzaW9uczogcmV2b2tlVXNlclNlc3Npb25zKG9wdHMpLFxuXHRcdFx0cmVtb3ZlVXNlcjogcmVtb3ZlVXNlcihvcHRzKSxcblx0XHRcdHNldFVzZXJQYXNzd29yZDogc2V0VXNlclBhc3N3b3JkKG9wdHMpLFxuXHRcdFx0dXNlckhhc1Blcm1pc3Npb246IHVzZXJIYXNQZXJtaXNzaW9uKG9wdHMpXG5cdFx0fSxcblx0XHQkRVJST1JfQ09ERVM6IEFETUlOX0VSUk9SX0NPREVTLFxuXHRcdHNjaGVtYTogbWVyZ2VTY2hlbWEoc2NoZW1hLCBvcHRzLnNjaGVtYSksXG5cdFx0b3B0aW9uc1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZG1pbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRtaW4ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/admin.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/client.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/client.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminClient: () => (/* binding */ adminClient)\n/* harmony export */ });\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs\");\n\n\n\n\n//#region src/plugins/admin/client.ts\nconst adminClient = (options) => {\n\tconst roles = {\n\t\tadmin: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc,\n\t\tuser: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.userAc,\n\t\t...options?.roles\n\t};\n\treturn {\n\t\tid: \"admin-client\",\n\t\t$InferServerPlugin: {},\n\t\tgetActions: () => ({ admin: { checkRolePermission: (data) => {\n\t\t\treturn (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_2__.hasPermission)({\n\t\t\t\trole: data.role,\n\t\t\t\toptions: {\n\t\t\t\t\tac: options?.ac,\n\t\t\t\t\troles\n\t\t\t\t},\n\t\t\t\tpermissions: data.permissions ?? data.permission\n\t\t\t});\n\t\t} } }),\n\t\tpathMethods: {\n\t\t\t\"/admin/list-users\": \"GET\",\n\t\t\t\"/admin/stop-impersonating\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5RDtBQUM3QjtBQUN5Qjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBTztBQUNoQixRQUFRLHlEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsdUJBQXVCLFNBQVM7QUFDaEMsVUFBVSxrRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRtaW5BYywgdXNlckFjIH0gZnJvbSBcIi4vYWNjZXNzL3N0YXRlbWVudC5tanNcIjtcbmltcG9ydCBcIi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiB9IGZyb20gXCIuL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWRtaW4vY2xpZW50LnRzXG5jb25zdCBhZG1pbkNsaWVudCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHJvbGVzID0ge1xuXHRcdGFkbWluOiBhZG1pbkFjLFxuXHRcdHVzZXI6IHVzZXJBYyxcblx0XHQuLi5vcHRpb25zPy5yb2xlc1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFkbWluLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge30sXG5cdFx0Z2V0QWN0aW9uczogKCkgPT4gKHsgYWRtaW46IHsgY2hlY2tSb2xlUGVybWlzc2lvbjogKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdFx0cm9sZTogZGF0YS5yb2xlLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0YWM6IG9wdGlvbnM/LmFjLFxuXHRcdFx0XHRcdHJvbGVzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBlcm1pc3Npb25zOiBkYXRhLnBlcm1pc3Npb25zID8/IGRhdGEucGVybWlzc2lvblxuXHRcdFx0fSk7XG5cdFx0fSB9IH0pLFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9hZG1pbi9saXN0LXVzZXJzXCI6IFwiR0VUXCIsXG5cdFx0XHRcIi9hZG1pbi9zdG9wLWltcGVyc29uYXRpbmdcIjogXCJQT1NUXCJcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkbWluQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/error-codes.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/error-codes.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADMIN_ERROR_CODES: () => (/* binding */ ADMIN_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/admin/error-codes.ts\nconst ADMIN_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tFAILED_TO_CREATE_USER: \"Failed to create user\",\n\tUSER_ALREADY_EXISTS: \"User already exists.\",\n\tUSER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n\tYOU_CANNOT_BAN_YOURSELF: \"You cannot ban yourself\",\n\tYOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE: \"You are not allowed to change users role\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_USERS: \"You are not allowed to create users\",\n\tYOU_ARE_NOT_ALLOWED_TO_LIST_USERS: \"You are not allowed to list users\",\n\tYOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS: \"You are not allowed to list users sessions\",\n\tYOU_ARE_NOT_ALLOWED_TO_BAN_USERS: \"You are not allowed to ban users\",\n\tYOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS: \"You are not allowed to impersonate users\",\n\tYOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS: \"You are not allowed to revoke users sessions\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_USERS: \"You are not allowed to delete users\",\n\tYOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD: \"You are not allowed to set users password\",\n\tBANNED_USER: \"You have been banned from this application\",\n\tYOU_ARE_NOT_ALLOWED_TO_GET_USER: \"You are not allowed to get user\",\n\tNO_DATA_TO_UPDATE: \"No data to update\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS: \"You are not allowed to update users\",\n\tYOU_CANNOT_REMOVE_YOURSELF: \"You cannot remove yourself\",\n\tYOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE: \"You are not allowed to set a non-existent role value\",\n\tYOU_CANNOT_IMPERSONATE_ADMINS: \"You cannot impersonate admins\",\n\tINVALID_ROLE_TYPE: \"Invalid role type\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2Vycm9yLWNvZGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRDs7QUFFM0Q7QUFDQSwwQkFBMEIseUVBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhZG1pblxcZXJyb3ItY29kZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUVycm9yQ29kZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FkbWluL2Vycm9yLWNvZGVzLnRzXG5jb25zdCBBRE1JTl9FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuXHRGQUlMRURfVE9fQ1JFQVRFX1VTRVI6IFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsXG5cdFVTRVJfQUxSRUFEWV9FWElTVFM6IFwiVXNlciBhbHJlYWR5IGV4aXN0cy5cIixcblx0VVNFUl9BTFJFQURZX0VYSVNUU19VU0VfQU5PVEhFUl9FTUFJTDogXCJVc2VyIGFscmVhZHkgZXhpc3RzLiBVc2UgYW5vdGhlciBlbWFpbC5cIixcblx0WU9VX0NBTk5PVF9CQU5fWU9VUlNFTEY6IFwiWW91IGNhbm5vdCBiYW4geW91cnNlbGZcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DSEFOR0VfVVNFUlNfUk9MRTogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGNoYW5nZSB1c2VycyByb2xlXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX1VTRVJTOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gY3JlYXRlIHVzZXJzXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fTElTVF9VU0VSUzogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGxpc3QgdXNlcnNcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19MSVNUX1VTRVJTX1NFU1NJT05TOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gbGlzdCB1c2VycyBzZXNzaW9uc1wiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0JBTl9VU0VSUzogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGJhbiB1c2Vyc1wiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0lNUEVSU09OQVRFX1VTRVJTOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gaW1wZXJzb25hdGUgdXNlcnNcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19SRVZPS0VfVVNFUlNfU0VTU0lPTlM6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byByZXZva2UgdXNlcnMgc2Vzc2lvbnNcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVVNFUlM6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBkZWxldGUgdXNlcnNcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19TRVRfVVNFUlNfUEFTU1dPUkQ6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBzZXQgdXNlcnMgcGFzc3dvcmRcIixcblx0QkFOTkVEX1VTRVI6IFwiWW91IGhhdmUgYmVlbiBiYW5uZWQgZnJvbSB0aGlzIGFwcGxpY2F0aW9uXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fR0VUX1VTRVI6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBnZXQgdXNlclwiLFxuXHROT19EQVRBX1RPX1VQREFURTogXCJObyBkYXRhIHRvIHVwZGF0ZVwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX1VQREFURV9VU0VSUzogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHVwZGF0ZSB1c2Vyc1wiLFxuXHRZT1VfQ0FOTk9UX1JFTU9WRV9ZT1VSU0VMRjogXCJZb3UgY2Fubm90IHJlbW92ZSB5b3Vyc2VsZlwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX1NFVF9OT05fRVhJU1RFTlRfVkFMVUU6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBzZXQgYSBub24tZXhpc3RlbnQgcm9sZSB2YWx1ZVwiLFxuXHRZT1VfQ0FOTk9UX0lNUEVSU09OQVRFX0FETUlOUzogXCJZb3UgY2Fubm90IGltcGVyc29uYXRlIGFkbWluc1wiLFxuXHRJTlZBTElEX1JPTEVfVFlQRTogXCJJbnZhbGlkIHJvbGUgdHlwZVwiXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBBRE1JTl9FUlJPUl9DT0RFUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3ItY29kZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/has-permission.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission)\n/* harmony export */ });\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\");\n\n\n\n//#region src/plugins/admin/has-permission.ts\nconst hasPermission = (input) => {\n\tif (input.userId && input.options?.adminUserIds?.includes(input.userId)) return true;\n\tif (!input.permissions && !input.permission) return false;\n\tconst roles = (input.role || input.options?.defaultRole || \"user\").split(\",\");\n\tconst acRoles = input.options?.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles;\n\tfor (const role of roles) if ((acRoles[role]?.authorize(input.permission ?? input.permissions))?.success) return true;\n\treturn false;\n};\n\n//#endregion\n\n//# sourceMappingURL=has-permission.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2hhcy1wZXJtaXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Q7QUFDMUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsK0RBQVk7QUFDckQ7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGhhcy1wZXJtaXNzaW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0Um9sZXMgfSBmcm9tIFwiLi9hY2Nlc3Mvc3RhdGVtZW50Lm1qc1wiO1xuaW1wb3J0IFwiLi9hY2Nlc3MvaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hZG1pbi9oYXMtcGVybWlzc2lvbi50c1xuY29uc3QgaGFzUGVybWlzc2lvbiA9IChpbnB1dCkgPT4ge1xuXHRpZiAoaW5wdXQudXNlcklkICYmIGlucHV0Lm9wdGlvbnM/LmFkbWluVXNlcklkcz8uaW5jbHVkZXMoaW5wdXQudXNlcklkKSkgcmV0dXJuIHRydWU7XG5cdGlmICghaW5wdXQucGVybWlzc2lvbnMgJiYgIWlucHV0LnBlcm1pc3Npb24pIHJldHVybiBmYWxzZTtcblx0Y29uc3Qgcm9sZXMgPSAoaW5wdXQucm9sZSB8fCBpbnB1dC5vcHRpb25zPy5kZWZhdWx0Um9sZSB8fCBcInVzZXJcIikuc3BsaXQoXCIsXCIpO1xuXHRjb25zdCBhY1JvbGVzID0gaW5wdXQub3B0aW9ucz8ucm9sZXMgfHwgZGVmYXVsdFJvbGVzO1xuXHRmb3IgKGNvbnN0IHJvbGUgb2Ygcm9sZXMpIGlmICgoYWNSb2xlc1tyb2xlXT8uYXV0aG9yaXplKGlucHV0LnBlcm1pc3Npb24gPz8gaW5wdXQucGVybWlzc2lvbnMpKT8uc3VjY2VzcykgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaGFzUGVybWlzc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLXBlcm1pc3Npb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/index.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/index.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   admin: () => (/* reexport safe */ _admin_mjs__WEBPACK_IMPORTED_MODULE_0__.admin)\n/* harmony export */ });\n/* harmony import */ var _admin_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./admin.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/admin.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFkbWluXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRtaW4gfSBmcm9tIFwiLi9hZG1pbi5tanNcIjtcblxuZXhwb3J0IHsgYWRtaW4gfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/routes.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/routes.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminUpdateUser: () => (/* binding */ adminUpdateUser),\n/* harmony export */   banUser: () => (/* binding */ banUser),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   getUser: () => (/* binding */ getUser),\n/* harmony export */   impersonateUser: () => (/* binding */ impersonateUser),\n/* harmony export */   listUserSessions: () => (/* binding */ listUserSessions),\n/* harmony export */   listUsers: () => (/* binding */ listUsers),\n/* harmony export */   removeUser: () => (/* binding */ removeUser),\n/* harmony export */   revokeUserSession: () => (/* binding */ revokeUserSession),\n/* harmony export */   revokeUserSessions: () => (/* binding */ revokeUserSessions),\n/* harmony export */   setRole: () => (/* binding */ setRole),\n/* harmony export */   setUserPassword: () => (/* binding */ setUserPassword),\n/* harmony export */   stopImpersonating: () => (/* binding */ stopImpersonating),\n/* harmony export */   unbanUser: () => (/* binding */ unbanUser),\n/* harmony export */   userHasPermission: () => (/* binding */ userHasPermission)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/error-codes.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/admin/routes.ts\n/**\n* Ensures a valid session, if not will throw.\n* Will also provide additional types on the user to include role types.\n*/\nconst adminMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\nfunction parseRoles(roles) {\n\treturn Array.isArray(roles) ? roles.join(\",\") : roles;\n}\nconst setRoleBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_9__.union([zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The role to set. `admin` or `user` by default\" }), zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The roles to set. `admin` or `user` by default\" }))]).meta({ description: \"The role to set, this can be a string or an array of strings. Eg: `admin` or `[admin, user]`\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/set-role`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.setRole`\n*\n* **client:**\n* `authClient.admin.setRole`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-set-role)\n*/\nconst setRole = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/set-role\", {\n\tmethod: \"POST\",\n\tbody: setRoleBodySchema,\n\trequireHeaders: true,\n\tuse: [adminMiddleware],\n\tmetadata: {\n\t\topenapi: {\n\t\t\toperationId: \"setUserRole\",\n\t\t\tsummary: \"Set the role of a user\",\n\t\t\tdescription: \"Set the role of a user\",\n\t\t\tresponses: { 200: {\n\t\t\t\tdescription: \"User role updated\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t},\n\t\t$Infer: { body: {} }\n\t}\n}, async (ctx) => {\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: ctx.context.session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"set-role\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE });\n\tconst roles = opts.roles;\n\tif (roles) {\n\t\tconst inputRoles = Array.isArray(ctx.body.role) ? ctx.body.role : [ctx.body.role];\n\t\tfor (const role of inputRoles) if (!roles[role]) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE });\n\t}\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(ctx.body.userId, { role: parseRoles(ctx.body.role) });\n\treturn ctx.json({ user: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, updatedUser) });\n});\nconst getUserQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ id: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The id of the User\" }) });\nconst getUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/get-user\", {\n\tmethod: \"GET\",\n\tquery: getUserQuerySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"getUser\",\n\t\tsummary: \"Get an existing user\",\n\t\tdescription: \"Get an existing user\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"User\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { id } = ctx.query;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: ctx.context.session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"get\"] }\n\t})) throw ctx.error(\"FORBIDDEN\", {\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_GET_USER,\n\t\tcode: \"YOU_ARE_NOT_ALLOWED_TO_GET_USER\"\n\t});\n\tconst user = await ctx.context.internalAdapter.findUserById(id);\n\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\treturn (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user);\n});\nconst createUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The email of the user\" }),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional().meta({ description: \"The password of the user. If not provided, the user will be created without a credential account (useful for magic link or social login only users).\" }),\n\tname: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The name of the user\" }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_9__.union([zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The role of the user\" }), zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The roles of user\" }))]).optional().meta({ description: `A string or array of strings representing the roles to apply to the new user. Eg: \\\"user\\\"` }),\n\tdata: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).optional().meta({ description: \"Extra fields for the user. Including custom additional fields.\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/create-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.createUser`\n*\n* **client:**\n* `authClient.admin.createUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-create-user)\n*/\nconst createUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/create-user\", {\n\tmethod: \"POST\",\n\tbody: createUserBodySchema,\n\tmetadata: {\n\t\topenapi: {\n\t\t\toperationId: \"createUser\",\n\t\t\tsummary: \"Create a new user\",\n\t\t\tdescription: \"Create a new user\",\n\t\t\tresponses: { 200: {\n\t\t\t\tdescription: \"User created\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t},\n\t\t$Infer: { body: {} }\n\t}\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session && (ctx.request || ctx.headers)) throw ctx.error(\"UNAUTHORIZED\");\n\tif (session) {\n\t\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\tuserId: session.user.id,\n\t\t\trole: session.user.role,\n\t\t\toptions: opts,\n\t\t\tpermissions: { user: [\"create\"] }\n\t\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS });\n\t}\n\tconst email = ctx.body.email.toLowerCase();\n\tif (!zod__WEBPACK_IMPORTED_MODULE_9__.email().safeParse(email).success) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tif (await ctx.context.internalAdapter.findUserByEmail(email)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\tconst user = await ctx.context.internalAdapter.createUser({\n\t\temail,\n\t\tname: ctx.body.name,\n\t\trole: (ctx.body.role && parseRoles(ctx.body.role)) ?? opts?.defaultRole ?? \"user\",\n\t\t...ctx.body.data\n\t});\n\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.FAILED_TO_CREATE_USER });\n\tif (ctx.body.password) {\n\t\tconst hashedPassword = await ctx.context.password.hash(ctx.body.password);\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\taccountId: user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\tpassword: hashedPassword,\n\t\t\tuserId: user.id\n\t\t});\n\t}\n\treturn ctx.json({ user: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user) });\n});\nconst adminUpdateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }),\n\tdata: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.any(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).meta({ description: \"The user data to update\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/update-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.adminUpdateUser`\n*\n* **client:**\n* `authClient.admin.updateUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-update-user)\n*/\nconst adminUpdateUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/update-user\", {\n\tmethod: \"POST\",\n\tbody: adminUpdateUserBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"updateUser\",\n\t\tsummary: \"Update a user\",\n\t\tdescription: \"Update a user's details\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"User updated\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: ctx.context.session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"update\"] }\n\t})) throw ctx.error(\"FORBIDDEN\", {\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS,\n\t\tcode: \"YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS\"\n\t});\n\tif (Object.keys(ctx.body.data).length === 0) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.NO_DATA_TO_UPDATE });\n\tif (Object.prototype.hasOwnProperty.call(ctx.body.data, \"role\")) {\n\t\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\tuserId: ctx.context.session.user.id,\n\t\t\trole: ctx.context.session.user.role,\n\t\t\toptions: opts,\n\t\t\tpermissions: { user: [\"set-role\"] }\n\t\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE });\n\t\tconst roleValue = ctx.body.data.role;\n\t\tconst inputRoles = Array.isArray(roleValue) ? roleValue : [roleValue];\n\t\tfor (const role of inputRoles) {\n\t\t\tif (typeof role !== \"string\") throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.INVALID_ROLE_TYPE });\n\t\t\tif (opts.roles && !opts.roles[role]) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE });\n\t\t}\n\t\tctx.body.data.role = parseRoles(inputRoles);\n\t}\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(ctx.body.userId, ctx.body.data);\n\treturn ctx.json((0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, updatedUser));\n});\nconst listUsersQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tsearchValue: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional().meta({ description: \"The value to search for. Eg: \\\"some name\\\"\" }),\n\tsearchField: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\"email\", \"name\"]).meta({ description: \"The field to search in, defaults to email. Can be `email` or `name`. Eg: \\\"name\\\"\" }).optional(),\n\tsearchOperator: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n\t\t\"contains\",\n\t\t\"starts_with\",\n\t\t\"ends_with\"\n\t]).meta({ description: \"The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`. Eg: \\\"contains\\\"\" }).optional(),\n\tlimit: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The number of users to return\" }).or(zod__WEBPACK_IMPORTED_MODULE_9__.number()).optional(),\n\toffset: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The offset to start from\" }).or(zod__WEBPACK_IMPORTED_MODULE_9__.number()).optional(),\n\tsortBy: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The field to sort by\" }).optional(),\n\tsortDirection: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\"asc\", \"desc\"]).meta({ description: \"The direction to sort by\" }).optional(),\n\tfilterField: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The field to filter by\" }).optional(),\n\tfilterValue: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The value to filter by\" }).or(zod__WEBPACK_IMPORTED_MODULE_9__.number()).or(zod__WEBPACK_IMPORTED_MODULE_9__.boolean()).optional(),\n\tfilterOperator: zod__WEBPACK_IMPORTED_MODULE_9__[\"enum\"]([\n\t\t\"eq\",\n\t\t\"ne\",\n\t\t\"lt\",\n\t\t\"lte\",\n\t\t\"gt\",\n\t\t\"gte\",\n\t\t\"contains\"\n\t]).meta({ description: \"The operator to use for the filter\" }).optional()\n});\nconst listUsers = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/list-users\", {\n\tmethod: \"GET\",\n\tuse: [adminMiddleware],\n\tquery: listUsersQuerySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUsers\",\n\t\tsummary: \"List users\",\n\t\tdescription: \"List users\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"List of users\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tusers: {\n\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\titems: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t\t},\n\t\t\t\t\ttotal: { type: \"number\" },\n\t\t\t\t\tlimit: { type: \"number\" },\n\t\t\t\t\toffset: { type: \"number\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"users\", \"total\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"list\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS });\n\tconst where = [];\n\tif (ctx.query?.searchValue) where.push({\n\t\tfield: ctx.query.searchField || \"email\",\n\t\toperator: ctx.query.searchOperator || \"contains\",\n\t\tvalue: ctx.query.searchValue\n\t});\n\tif (ctx.query?.filterValue) where.push({\n\t\tfield: ctx.query.filterField || \"email\",\n\t\toperator: ctx.query.filterOperator || \"eq\",\n\t\tvalue: ctx.query.filterValue\n\t});\n\ttry {\n\t\tconst users = await ctx.context.internalAdapter.listUsers(Number(ctx.query?.limit) || void 0, Number(ctx.query?.offset) || void 0, ctx.query?.sortBy ? {\n\t\t\tfield: ctx.query.sortBy,\n\t\t\tdirection: ctx.query.sortDirection || \"asc\"\n\t\t} : void 0, where.length ? where : void 0);\n\t\tconst total = await ctx.context.internalAdapter.countTotalUsers(where.length ? where : void 0);\n\t\treturn ctx.json({\n\t\t\tusers: users.map((user) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user)),\n\t\t\ttotal,\n\t\t\tlimit: Number(ctx.query?.limit) || void 0,\n\t\t\toffset: Number(ctx.query?.offset) || void 0\n\t\t});\n\t} catch {\n\t\treturn ctx.json({\n\t\t\tusers: [],\n\t\t\ttotal: 0\n\t\t});\n\t}\n});\nconst listUserSessionsBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/list-user-sessions`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.listUserSessions`\n*\n* **client:**\n* `authClient.admin.listUserSessions`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-list-user-sessions)\n*/\nconst listUserSessions = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/list-user-sessions\", {\n\tmethod: \"POST\",\n\tuse: [adminMiddleware],\n\tbody: listUserSessionsBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserSessions\",\n\t\tsummary: \"List user sessions\",\n\t\tdescription: \"List user sessions\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"List of user sessions\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { sessions: {\n\t\t\t\t\ttype: \"array\",\n\t\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t\t} }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { session: [\"list\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS });\n\tconst sessions = await ctx.context.internalAdapter.listSessions(ctx.body.userId);\n\treturn ctx.json({ sessions: sessions.map((s) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, s)) });\n});\nconst unbanUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/unban-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.unbanUser`\n*\n* **client:**\n* `authClient.admin.unbanUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-unban-user)\n*/\nconst unbanUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/unban-user\", {\n\tmethod: \"POST\",\n\tbody: unbanUserBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"unbanUser\",\n\t\tsummary: \"Unban a user\",\n\t\tdescription: \"Unban a user\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"User unbanned\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"ban\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS });\n\tconst user = await ctx.context.internalAdapter.updateUser(ctx.body.userId, {\n\t\tbanned: false,\n\t\tbanExpires: null,\n\t\tbanReason: null,\n\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t});\n\treturn ctx.json({ user: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user) });\n});\nconst banUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }),\n\tbanReason: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The reason for the ban\" }).optional(),\n\tbanExpiresIn: zod__WEBPACK_IMPORTED_MODULE_9__.number().meta({ description: \"The number of seconds until the ban expires\" }).optional()\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/ban-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.banUser`\n*\n* **client:**\n* `authClient.admin.banUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-ban-user)\n*/\nconst banUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/ban-user\", {\n\tmethod: \"POST\",\n\tbody: banUserBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"banUser\",\n\t\tsummary: \"Ban a user\",\n\t\tdescription: \"Ban a user\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"User banned\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { user: { $ref: \"#/components/schemas/User\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"ban\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS });\n\tif (!await ctx.context.internalAdapter.findUserById(ctx.body.userId)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\tif (ctx.body.userId === ctx.context.session.user.id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_CANNOT_BAN_YOURSELF });\n\tconst user = await ctx.context.internalAdapter.updateUser(ctx.body.userId, {\n\t\tbanned: true,\n\t\tbanReason: ctx.body.banReason || opts?.defaultBanReason || \"No reason\",\n\t\tbanExpires: ctx.body.banExpiresIn ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.body.banExpiresIn, \"sec\") : opts?.defaultBanExpiresIn ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.defaultBanExpiresIn, \"sec\") : void 0,\n\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t});\n\tawait ctx.context.internalAdapter.deleteSessions(ctx.body.userId);\n\treturn ctx.json({ user: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user) });\n});\nconst impersonateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/impersonate-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.impersonateUser`\n*\n* **client:**\n* `authClient.admin.impersonateUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-impersonate-user)\n*/\nconst impersonateUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/impersonate-user\", {\n\tmethod: \"POST\",\n\tbody: impersonateUserBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"impersonateUser\",\n\t\tsummary: \"Impersonate a user\",\n\t\tdescription: \"Impersonate a user\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Impersonation session created\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: ctx.context.session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"impersonate\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS });\n\tconst targetUser = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\tif (!targetUser) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"NOT_FOUND\", { message: \"User not found\" });\n\tconst adminRoles = (Array.isArray(opts.adminRoles) ? opts.adminRoles : opts.adminRoles?.split(\",\") || []).map((role) => role.trim());\n\tconst targetUserRole = (targetUser.role || opts.defaultRole || \"user\").split(\",\");\n\tif (opts.allowImpersonatingAdmins !== true && (targetUserRole.some((role) => adminRoles.includes(role)) || opts.adminUserIds?.includes(targetUser.id))) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_CANNOT_IMPERSONATE_ADMINS });\n\tconst session = await ctx.context.internalAdapter.createSession(targetUser.id, true, {\n\t\timpersonatedBy: ctx.context.session.user.id,\n\t\texpiresAt: opts?.impersonationSessionDuration ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.impersonationSessionDuration, \"sec\") : (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(3600, \"sec\")\n\t}, true);\n\tif (!session) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.FAILED_TO_CREATE_USER });\n\tconst authCookies = ctx.context.authCookies;\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteSessionCookie)(ctx);\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\tconst adminCookieProp = ctx.context.createAuthCookie(\"admin_session\");\n\tawait ctx.setSignedCookie(adminCookieProp.name, `${ctx.context.session.session.token}:${dontRememberMeCookie || \"\"}`, ctx.context.secret, authCookies.sessionToken.attributes);\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: targetUser\n\t}, true);\n\treturn ctx.json({\n\t\tsession,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, targetUser)\n\t});\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/stop-impersonating`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.stopImpersonating`\n*\n* **client:**\n* `authClient.admin.stopImpersonating`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-stop-impersonating)\n*/\nconst stopImpersonating = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/stop-impersonating\", {\n\tmethod: \"POST\",\n\trequireHeaders: true\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\");\n\tif (!session.session.impersonatedBy) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"You are not impersonating anyone\" });\n\tconst user = await ctx.context.internalAdapter.findUserById(session.session.impersonatedBy);\n\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to find user\" });\n\tconst adminSessionCookie = ctx.context.createAuthCookie(\"admin_session\");\n\tconst adminCookie = await ctx.getSignedCookie(adminSessionCookie.name, ctx.context.secret);\n\tif (!adminCookie) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to find admin session\" });\n\tconst [adminSessionToken, dontRememberMeCookie] = adminCookie?.split(\":\");\n\tconst adminSession = await ctx.context.internalAdapter.findSession(adminSessionToken);\n\tif (!adminSession || adminSession.session.userId !== user.id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to find admin session\" });\n\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, adminSession, !!dontRememberMeCookie);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx, adminSessionCookie);\n\treturn ctx.json({\n\t\tsession: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, adminSession.session),\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, adminSession.user)\n\t});\n});\nconst revokeUserSessionBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ sessionToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The session token\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/revoke-user-session`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.revokeUserSession`\n*\n* **client:**\n* `authClient.admin.revokeUserSession`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-revoke-user-session)\n*/\nconst revokeUserSession = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/revoke-user-session\", {\n\tmethod: \"POST\",\n\tbody: revokeUserSessionBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"revokeUserSession\",\n\t\tsummary: \"Revoke a user session\",\n\t\tdescription: \"Revoke a user session\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Session revoked\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { session: [\"revoke\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS });\n\tawait ctx.context.internalAdapter.deleteSession(ctx.body.sessionToken);\n\treturn ctx.json({ success: true });\n});\nconst revokeUserSessionsBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/revoke-user-sessions`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.revokeUserSessions`\n*\n* **client:**\n* `authClient.admin.revokeUserSessions`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-revoke-user-sessions)\n*/\nconst revokeUserSessions = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/revoke-user-sessions\", {\n\tmethod: \"POST\",\n\tbody: revokeUserSessionsBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"revokeUserSessions\",\n\t\tsummary: \"Revoke all user sessions\",\n\t\tdescription: \"Revoke all user sessions\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Sessions revoked\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { session: [\"revoke\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS });\n\tawait ctx.context.internalAdapter.deleteSessions(ctx.body.userId);\n\treturn ctx.json({ success: true });\n});\nconst removeUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().meta({ description: \"The user id\" }) });\n/**\n* ### Endpoint\n*\n* POST `/admin/remove-user`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.removeUser`\n*\n* **client:**\n* `authClient.admin.removeUser`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-remove-user)\n*/\nconst removeUser = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/remove-user\", {\n\tmethod: \"POST\",\n\tbody: removeUserBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"removeUser\",\n\t\tsummary: \"Remove a user\",\n\t\tdescription: \"Delete a user and all their sessions and accounts. Cannot be undone.\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"User removed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"delete\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS });\n\tif (ctx.body.userId === ctx.context.session.user.id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_CANNOT_REMOVE_YOURSELF });\n\tif (!await ctx.context.internalAdapter.findUserById(ctx.body.userId)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"NOT_FOUND\", { message: \"User not found\" });\n\tawait ctx.context.internalAdapter.deleteUser(ctx.body.userId);\n\treturn ctx.json({ success: true });\n});\nconst setUserPasswordBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().nonempty(\"newPassword cannot be empty\").meta({ description: \"The new password\" }),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().nonempty(\"userId cannot be empty\").meta({ description: \"The user id\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/admin/set-user-password`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.setUserPassword`\n*\n* **client:**\n* `authClient.admin.setUserPassword`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-set-user-password)\n*/\nconst setUserPassword = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/set-user-password\", {\n\tmethod: \"POST\",\n\tbody: setUserPasswordBodySchema,\n\tuse: [adminMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"setUserPassword\",\n\t\tsummary: \"Set a user's password\",\n\t\tdescription: \"Set a user's password\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Password set\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!(0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\tuserId: ctx.context.session.user.id,\n\t\trole: ctx.context.session.user.role,\n\t\toptions: opts,\n\t\tpermissions: { user: [\"set-password\"] }\n\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.ADMIN_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD });\n\tconst { newPassword, userId } = ctx.body;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tawait ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\treturn ctx.json({ status: true });\n});\nconst userHasPermissionBodySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.coerce.string().optional().meta({ description: `The user id. Eg: \"user-id\"` }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional().meta({ description: `The role to check permission for. Eg: \"admin\"` })\n}).and(zod__WEBPACK_IMPORTED_MODULE_9__.union([zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string())),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_9__.undefined()\n}), zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_9__.undefined(),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()))\n})]));\n/**\n* ### Endpoint\n*\n* POST `/admin/has-permission`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.userHasPermission`\n*\n* **client:**\n* `authClient.admin.hasPermission`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/admin#api-method-admin-has-permission)\n*/\nconst userHasPermission = (opts) => {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/admin/has-permission\", {\n\t\tmethod: \"POST\",\n\t\tbody: userHasPermissionBodySchema,\n\t\tmetadata: {\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Check if the user has permission\",\n\t\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tpermission: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\",\n\t\t\t\t\t\t\tdeprecated: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"permissions\"]\n\t\t\t\t} } } },\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\terror: { type: \"string\" },\n\t\t\t\t\t\t\tsuccess: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"success\"]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t},\n\t\t\t$Infer: { body: {} }\n\t\t}\n\t}, async (ctx) => {\n\t\tif (!ctx.body?.permission && !ctx.body?.permissions) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"invalid permission check. no permission(s) were passed.\" });\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\t\tif (!session && (ctx.request || ctx.headers)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\");\n\t\tif (!session && !ctx.body.userId && !ctx.body.role) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"user id or role is required\" });\n\t\tconst user = session?.user || (ctx.body.role ? {\n\t\t\tid: ctx.body.userId || \"\",\n\t\t\trole: ctx.body.role\n\t\t} : null) || (ctx.body.userId ? await ctx.context.internalAdapter.findUserById(ctx.body.userId) : null);\n\t\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"user not found\" });\n\t\tconst result = (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\tuserId: user.id,\n\t\t\trole: user.role,\n\t\t\toptions: opts,\n\t\t\tpermissions: ctx.body.permissions ?? ctx.body.permission\n\t\t});\n\t\treturn ctx.json({\n\t\t\terror: null,\n\t\t\tsuccess: result\n\t\t});\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=routes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL3JvdXRlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUMyQjtBQUNvQjtBQUM3QjtBQUNsQjtBQUNNO0FBQ0M7QUFDSztBQUNsQztBQUN3RDs7QUFFakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyRUFBb0I7QUFDNUMsdUJBQXVCLDBFQUFpQjtBQUN4Qyx5QkFBeUIsb0RBQVE7QUFDakMsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdUNBQVE7QUFDbEMsU0FBUyw4Q0FBZSxVQUFVLDRCQUE0QjtBQUM5RCxPQUFPLHNDQUFPLEVBQUUsdUNBQVEsVUFBVSw4REFBOEQsR0FBRyxzQ0FBTyxDQUFDLHVDQUFRLFVBQVUsK0RBQStELFlBQVksNkdBQTZHO0FBQ3JULENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseUVBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CLFFBQVE7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZO0FBQ1o7QUFDQSxDQUFDO0FBQ0QsTUFBTSxrRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsRUFBRSxhQUFhLG9EQUFRLGdCQUFnQixTQUFTLCtEQUFpQiwyQ0FBMkM7QUFDNUc7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELG9EQUFRLGtCQUFrQixTQUFTLCtEQUFpQixnREFBZ0Q7QUFDaks7QUFDQSxxRkFBcUYsaUNBQWlDO0FBQ3RILG1CQUFtQixNQUFNLCtEQUFlLG9DQUFvQztBQUM1RSxDQUFDO0FBQ0QsMkJBQTJCLHVDQUFRLEdBQUcsSUFBSSx1Q0FBUSxVQUFVLG1DQUFtQyxHQUFHO0FBQ2xHLDBCQUEwQix5RUFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsS0FBSztBQUNkLE1BQU0sa0VBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLEVBQUU7QUFDRixXQUFXLCtEQUFpQjtBQUM1QjtBQUNBLEVBQUU7QUFDRjtBQUNBLHNCQUFzQixvREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IsaUJBQWlCO0FBQ3hGLFFBQVEsK0RBQWU7QUFDdkIsQ0FBQztBQUNELDZCQUE2Qix1Q0FBUTtBQUNyQyxRQUFRLHVDQUFRLFVBQVUsc0NBQXNDO0FBQ2hFLFdBQVcsdUNBQVEscUJBQXFCLHFLQUFxSztBQUM3TSxPQUFPLHVDQUFRLFVBQVUscUNBQXFDO0FBQzlELE9BQU8sc0NBQU8sRUFBRSx1Q0FBUSxVQUFVLHFDQUFxQyxHQUFHLHNDQUFPLENBQUMsdUNBQVEsVUFBVSxrQ0FBa0MsdUJBQXVCLDJHQUEyRztBQUN4USxPQUFPLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxvQ0FBSyxzQkFBc0IsK0VBQStFO0FBQ3RJLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUVBQWtCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVk7QUFDWjtBQUNBLENBQUM7QUFDRCx1QkFBdUIsMEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQSxPQUFPLGtFQUFhO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixHQUFHLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLHNDQUFzQztBQUN4RztBQUNBO0FBQ0EsTUFBTSxzQ0FBTyx1Q0FBdUMsb0RBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN2SCx5RUFBeUUsb0RBQVEsa0JBQWtCLFNBQVMsK0RBQWlCLHdDQUF3QztBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHNCQUFzQixvREFBUSw0QkFBNEIsU0FBUywrREFBaUIsd0JBQXdCO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLE1BQU0sK0RBQWUsNkJBQTZCO0FBQ3JFLENBQUM7QUFDRCxrQ0FBa0MsdUNBQVE7QUFDMUMsU0FBUyw4Q0FBZSxVQUFVLDRCQUE0QjtBQUM5RCxPQUFPLHVDQUFRLENBQUMsb0NBQUssSUFBSSxvQ0FBSyxXQUFXLHdDQUF3QztBQUNqRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHlFQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsUUFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTUFBTSxrRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsRUFBRTtBQUNGLFdBQVcsK0RBQWlCO0FBQzVCO0FBQ0EsRUFBRTtBQUNGLHdEQUF3RCxvREFBUSxrQkFBa0IsU0FBUywrREFBaUIsb0JBQW9CO0FBQ2hJO0FBQ0EsT0FBTyxrRUFBYTtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsR0FBRyxhQUFhLG9EQUFRLGdCQUFnQixTQUFTLCtEQUFpQiwyQ0FBMkM7QUFDN0c7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG9EQUFRLGtCQUFrQixTQUFTLCtEQUFpQixvQkFBb0I7QUFDbkgsa0RBQWtELG9EQUFRLGtCQUFrQixTQUFTLCtEQUFpQixnREFBZ0Q7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQWU7QUFDaEMsQ0FBQztBQUNELDZCQUE2Qix1Q0FBUTtBQUNyQyxjQUFjLHVDQUFRLHFCQUFxQiwyREFBMkQ7QUFDdEcsY0FBYyx3Q0FBTSwyQkFBMkIsa0dBQWtHO0FBQ2pKLGlCQUFpQix3Q0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNIQUFzSDtBQUNqSSxRQUFRLHVDQUFRLFVBQVUsOENBQThDLEtBQUssdUNBQVE7QUFDckYsU0FBUyx1Q0FBUSxVQUFVLHlDQUF5QyxLQUFLLHVDQUFRO0FBQ2pGLFNBQVMsdUNBQVEsVUFBVSxxQ0FBcUM7QUFDaEUsZ0JBQWdCLHdDQUFNLHlCQUF5Qix5Q0FBeUM7QUFDeEYsY0FBYyx1Q0FBUSxVQUFVLHVDQUF1QztBQUN2RSxjQUFjLHVDQUFRLFVBQVUsdUNBQXVDLEtBQUssdUNBQVEsT0FBTyx3Q0FBUztBQUNwRyxpQkFBaUIsd0NBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLG1EQUFtRDtBQUM5RCxDQUFDO0FBQ0QsNEJBQTRCLHlFQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsTUFBTTtBQUNOLGNBQWMsZ0JBQWdCO0FBQzlCLGNBQWMsZ0JBQWdCO0FBQzlCLGVBQWU7QUFDZixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxNQUFNLGtFQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixFQUFFLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLG9DQUFvQztBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDO0FBQ0QsbUNBQW1DLHVDQUFRLEdBQUcsUUFBUSw4Q0FBZSxVQUFVLDRCQUE0QixHQUFHO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyx5RUFBa0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsTUFBTSxrRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsRUFBRSxhQUFhLG9EQUFRLGdCQUFnQixTQUFTLCtEQUFpQiw2Q0FBNkM7QUFDOUc7QUFDQSxtQkFBbUIsOEJBQThCLGtFQUFrQiwyQkFBMkI7QUFDOUYsQ0FBQztBQUNELDRCQUE0Qix1Q0FBUSxHQUFHLFFBQVEsOENBQWUsVUFBVSw0QkFBNEIsR0FBRztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUVBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixRQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLE1BQU0sa0VBQWE7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLEVBQUUsYUFBYSxvREFBUSxnQkFBZ0IsU0FBUywrREFBaUIsbUNBQW1DO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLE1BQU0sK0RBQWUsNkJBQTZCO0FBQ3JFLENBQUM7QUFDRCwwQkFBMEIsdUNBQVE7QUFDbEMsU0FBUyw4Q0FBZSxVQUFVLDRCQUE0QjtBQUM5RCxZQUFZLHVDQUFRLFVBQVUsdUNBQXVDO0FBQ3JFLGVBQWUsdUNBQVEsVUFBVSw0REFBNEQ7QUFDN0YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix5RUFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsTUFBTSxrRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsRUFBRSxhQUFhLG9EQUFRLGdCQUFnQixTQUFTLCtEQUFpQixtQ0FBbUM7QUFDcEcsaUZBQWlGLG9EQUFRLGdCQUFnQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDbkosZ0VBQWdFLG9EQUFRLGtCQUFrQixTQUFTLCtEQUFpQiwwQkFBMEI7QUFDOUk7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHdEQUFPLDZEQUE2RCx3REFBTztBQUNqSDtBQUNBLEVBQUU7QUFDRjtBQUNBLG1CQUFtQixNQUFNLCtEQUFlLDZCQUE2QjtBQUNyRSxDQUFDO0FBQ0Qsa0NBQWtDLHVDQUFRLEdBQUcsUUFBUSw4Q0FBZSxVQUFVLDRCQUE0QixHQUFHO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx5RUFBa0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxnQkFBZ0Isc0NBQXNDO0FBQ3RELGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxNQUFNLGtFQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixFQUFFLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLDJDQUEyQztBQUM1RztBQUNBLDRCQUE0QixvREFBUSxnQkFBZ0IsMkJBQTJCO0FBQy9FO0FBQ0E7QUFDQSxtS0FBbUssb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLGdDQUFnQztBQUNyUDtBQUNBO0FBQ0Esa0RBQWtELHdEQUFPLDZDQUE2Qyx3REFBTztBQUM3RyxFQUFFO0FBQ0YseUJBQXlCLG9EQUFRLDRCQUE0QixTQUFTLCtEQUFpQix3QkFBd0I7QUFDL0c7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQjtBQUNBO0FBQ0Esb0RBQW9ELGtDQUFrQyxHQUFHLDJCQUEyQjtBQUNwSCxPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHlFQUFrQjtBQUNsRDtBQUNBO0FBQ0EsQ0FBQztBQUNELHVCQUF1QiwwRUFBaUI7QUFDeEMseUJBQXlCLG9EQUFRO0FBQ2pDLGdEQUFnRCxvREFBUSxrQkFBa0IsNkNBQTZDO0FBQ3ZIO0FBQ0Esc0JBQXNCLG9EQUFRLDRCQUE0QixnQ0FBZ0M7QUFDMUY7QUFDQTtBQUNBLDZCQUE2QixvREFBUSw0QkFBNEIseUNBQXlDO0FBQzFHO0FBQ0E7QUFDQSx5RUFBeUUsb0RBQVEsNEJBQTRCLHlDQUF5QztBQUN0SjtBQUNBLE9BQU8sb0VBQWdCO0FBQ3ZCLENBQUMsZ0VBQVk7QUFDYjtBQUNBLFdBQVcsa0VBQWtCO0FBQzdCLFFBQVEsK0RBQWU7QUFDdkIsRUFBRTtBQUNGLENBQUM7QUFDRCxvQ0FBb0MsdUNBQVEsR0FBRyxjQUFjLHVDQUFRLFVBQVUsa0NBQWtDLEdBQUc7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHlFQUFrQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxNQUFNLGtFQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixFQUFFLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLCtDQUErQztBQUNoSDtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCxxQ0FBcUMsdUNBQVEsR0FBRyxRQUFRLDhDQUFlLFVBQVUsNEJBQTRCLEdBQUc7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHlFQUFrQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxNQUFNLGtFQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixFQUFFLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLCtDQUErQztBQUNoSDtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCw2QkFBNkIsdUNBQVEsR0FBRyxRQUFRLDhDQUFlLFVBQVUsNEJBQTRCLEdBQUc7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlFQUFrQjtBQUMvQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxNQUFNLGtFQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixFQUFFLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsK0RBQWlCLHNDQUFzQztBQUN2RyxnRUFBZ0Usb0RBQVEsa0JBQWtCLFNBQVMsK0RBQWlCLDZCQUE2QjtBQUNqSixpRkFBaUYsb0RBQVEsZ0JBQWdCLDJCQUEyQjtBQUNwSTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCxrQ0FBa0MsdUNBQVE7QUFDMUMsY0FBYyx1Q0FBUSxrREFBa0QsaUNBQWlDO0FBQ3pHLFNBQVMsOENBQWUsNkNBQTZDLDRCQUE0QjtBQUNqRyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHlFQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsVUFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTUFBTSxrRUFBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsRUFBRSxhQUFhLG9EQUFRLGdCQUFnQixTQUFTLCtEQUFpQiw0Q0FBNEM7QUFDN0csU0FBUyxzQkFBc0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCxvQ0FBb0MsdUNBQVE7QUFDNUMsU0FBUyw4Q0FBZSxxQkFBcUIsMkNBQTJDO0FBQ3hGLE9BQU8sdUNBQVEscUJBQXFCLDhEQUE4RDtBQUNsRyxDQUFDLE1BQU0sc0NBQU8sRUFBRSx1Q0FBUTtBQUN4QixhQUFhLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxzQ0FBTyxDQUFDLHVDQUFRO0FBQ2xELGNBQWMsMENBQVc7QUFDekIsQ0FBQyxHQUFHLHVDQUFRO0FBQ1osYUFBYSwwQ0FBVztBQUN4QixjQUFjLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxzQ0FBTyxDQUFDLHVDQUFRO0FBQ25ELENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseUVBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsV0FBVyxzQkFBc0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsV0FBVztBQUNYLGlCQUFpQjtBQUNqQjtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEMsa0JBQWtCO0FBQ2xCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0EsRUFBRTtBQUNGLGlFQUFpRSxvREFBUSxrQkFBa0Isb0VBQW9FO0FBQy9KLHdCQUF3QiwwRUFBaUI7QUFDekMsMERBQTBELG9EQUFRO0FBQ2xFLGdFQUFnRSxvREFBUSxrQkFBa0Isd0NBQXdDO0FBQ2xJO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix1QkFBdUIsb0RBQVEsa0JBQWtCLDJCQUEyQjtBQUM1RSxpQkFBaUIsa0VBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUNxTztBQUNyTyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFkbWluXFxyb3V0ZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiB9IGZyb20gXCIuL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQURNSU5fRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50LCBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FkbWluL3JvdXRlcy50c1xuLyoqXG4qIEVuc3VyZXMgYSB2YWxpZCBzZXNzaW9uLCBpZiBub3Qgd2lsbCB0aHJvdy5cbiogV2lsbCBhbHNvIHByb3ZpZGUgYWRkaXRpb25hbCB0eXBlcyBvbiB0aGUgdXNlciB0byBpbmNsdWRlIHJvbGUgdHlwZXMuXG4qL1xuY29uc3QgYWRtaW5NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdHJldHVybiB7IHNlc3Npb24gfTtcbn0pO1xuZnVuY3Rpb24gcGFyc2VSb2xlcyhyb2xlcykge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShyb2xlcykgPyByb2xlcy5qb2luKFwiLFwiKSA6IHJvbGVzO1xufVxuY29uc3Qgc2V0Um9sZUJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIGlkXCIgfSksXG5cdHJvbGU6IHoudW5pb24oW3ouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSByb2xlIHRvIHNldC4gYGFkbWluYCBvciBgdXNlcmAgYnkgZGVmYXVsdFwiIH0pLCB6LmFycmF5KHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSByb2xlcyB0byBzZXQuIGBhZG1pbmAgb3IgYHVzZXJgIGJ5IGRlZmF1bHRcIiB9KSldKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHJvbGUgdG8gc2V0LCB0aGlzIGNhbiBiZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzLiBFZzogYGFkbWluYCBvciBgW2FkbWluLCB1c2VyXWBcIiB9KVxufSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9hZG1pbi9zZXQtcm9sZWBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5zZXRSb2xlYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5hZG1pbi5zZXRSb2xlYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvYWRtaW4jYXBpLW1ldGhvZC1hZG1pbi1zZXQtcm9sZSlcbiovXG5jb25zdCBzZXRSb2xlID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hZG1pbi9zZXQtcm9sZVwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHNldFJvbGVCb2R5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbYWRtaW5NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHtcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJzZXRVc2VyUm9sZVwiLFxuXHRcdFx0c3VtbWFyeTogXCJTZXQgdGhlIHJvbGUgb2YgYSB1c2VyXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTZXQgdGhlIHJvbGUgb2YgYSB1c2VyXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgcm9sZSB1cGRhdGVkXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHVzZXI6IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9LFxuXHRcdCRJbmZlcjogeyBib2R5OiB7fSB9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFoYXNQZXJtaXNzaW9uKHtcblx0XHR1c2VySWQ6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCxcblx0XHRyb2xlOiBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIucm9sZSxcblx0XHRvcHRpb25zOiBvcHRzLFxuXHRcdHBlcm1pc3Npb25zOiB7IHVzZXI6IFtcInNldC1yb2xlXCJdIH1cblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ0hBTkdFX1VTRVJTX1JPTEUgfSk7XG5cdGNvbnN0IHJvbGVzID0gb3B0cy5yb2xlcztcblx0aWYgKHJvbGVzKSB7XG5cdFx0Y29uc3QgaW5wdXRSb2xlcyA9IEFycmF5LmlzQXJyYXkoY3R4LmJvZHkucm9sZSkgPyBjdHguYm9keS5yb2xlIDogW2N0eC5ib2R5LnJvbGVdO1xuXHRcdGZvciAoY29uc3Qgcm9sZSBvZiBpbnB1dFJvbGVzKSBpZiAoIXJvbGVzW3JvbGVdKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fU0VUX05PTl9FWElTVEVOVF9WQUxVRSB9KTtcblx0fVxuXHRjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGN0eC5ib2R5LnVzZXJJZCwgeyByb2xlOiBwYXJzZVJvbGVzKGN0eC5ib2R5LnJvbGUpIH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyB1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXBkYXRlZFVzZXIpIH0pO1xufSk7XG5jb25zdCBnZXRVc2VyUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIFVzZXJcIiB9KSB9KTtcbmNvbnN0IGdldFVzZXIgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL2dldC11c2VyXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRxdWVyeTogZ2V0VXNlclF1ZXJ5U2NoZW1hLFxuXHR1c2U6IFthZG1pbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiZ2V0VXNlclwiLFxuXHRcdHN1bW1hcnk6IFwiR2V0IGFuIGV4aXN0aW5nIHVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgYW4gZXhpc3RpbmcgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXJcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgdXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IGlkIH0gPSBjdHgucXVlcnk7XG5cdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0dXNlcklkOiBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQsXG5cdFx0cm9sZTogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLnJvbGUsXG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRwZXJtaXNzaW9uczogeyB1c2VyOiBbXCJnZXRcIl0gfVxuXHR9KSkgdGhyb3cgY3R4LmVycm9yKFwiRk9SQklEREVOXCIsIHtcblx0XHRtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0dFVF9VU0VSLFxuXHRcdGNvZGU6IFwiWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19HRVRfVVNFUlwiXG5cdH0pO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChpZCk7XG5cdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX05PVF9GT1VORCB9KTtcblx0cmV0dXJuIHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1c2VyKTtcbn0pO1xuY29uc3QgY3JlYXRlVXNlckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVtYWlsOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXJcIiB9KSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB1c2VyIHdpbGwgYmUgY3JlYXRlZCB3aXRob3V0IGEgY3JlZGVudGlhbCBhY2NvdW50ICh1c2VmdWwgZm9yIG1hZ2ljIGxpbmsgb3Igc29jaWFsIGxvZ2luIG9ubHkgdXNlcnMpLlwiIH0pLFxuXHRuYW1lOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiIH0pLFxuXHRyb2xlOiB6LnVuaW9uKFt6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcm9sZSBvZiB0aGUgdXNlclwiIH0pLCB6LmFycmF5KHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSByb2xlcyBvZiB1c2VyXCIgfSkpXSkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IGBBIHN0cmluZyBvciBhcnJheSBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyB0aGUgcm9sZXMgdG8gYXBwbHkgdG8gdGhlIG5ldyB1c2VyLiBFZzogXFxcInVzZXJcXFwiYCB9KSxcblx0ZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXh0cmEgZmllbGRzIGZvciB0aGUgdXNlci4gSW5jbHVkaW5nIGN1c3RvbSBhZGRpdGlvbmFsIGZpZWxkcy5cIiB9KVxufSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9hZG1pbi9jcmVhdGUtdXNlcmBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5jcmVhdGVVc2VyYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5hZG1pbi5jcmVhdGVVc2VyYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvYWRtaW4jYXBpLW1ldGhvZC1hZG1pbi1jcmVhdGUtdXNlcilcbiovXG5jb25zdCBjcmVhdGVVc2VyID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hZG1pbi9jcmVhdGUtdXNlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IGNyZWF0ZVVzZXJCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YToge1xuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcImNyZWF0ZVVzZXJcIixcblx0XHRcdHN1bW1hcnk6IFwiQ3JlYXRlIGEgbmV3IHVzZXJcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIG5ldyB1c2VyXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgY3JlYXRlZFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyB1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH0gfVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fSxcblx0XHQkSW5mZXI6IHsgYm9keToge30gfVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24gJiYgKGN0eC5yZXF1ZXN0IHx8IGN0eC5oZWFkZXJzKSkgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRpZiAoc2Vzc2lvbikge1xuXHRcdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdHJvbGU6IHNlc3Npb24udXNlci5yb2xlLFxuXHRcdFx0b3B0aW9uczogb3B0cyxcblx0XHRcdHBlcm1pc3Npb25zOiB7IHVzZXI6IFtcImNyZWF0ZVwiXSB9XG5cdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX1VTRVJTIH0pO1xuXHR9XG5cdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWwudG9Mb3dlckNhc2UoKTtcblx0aWYgKCF6LmVtYWlsKCkuc2FmZVBhcnNlKGVtYWlsKS5zdWNjZXNzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTCB9KTtcblx0aWYgKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUwgfSk7XG5cdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVXNlcih7XG5cdFx0ZW1haWwsXG5cdFx0bmFtZTogY3R4LmJvZHkubmFtZSxcblx0XHRyb2xlOiAoY3R4LmJvZHkucm9sZSAmJiBwYXJzZVJvbGVzKGN0eC5ib2R5LnJvbGUpKSA/PyBvcHRzPy5kZWZhdWx0Um9sZSA/PyBcInVzZXJcIixcblx0XHQuLi5jdHguYm9keS5kYXRhXG5cdH0pO1xuXHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0aWYgKGN0eC5ib2R5LnBhc3N3b3JkKSB7XG5cdFx0Y29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKGN0eC5ib2R5LnBhc3N3b3JkKTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlua0FjY291bnQoe1xuXHRcdFx0YWNjb3VudElkOiB1c2VyLmlkLFxuXHRcdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0XHRwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG5cdFx0XHR1c2VySWQ6IHVzZXIuaWRcblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyB1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXNlcikgfSk7XG59KTtcbmNvbnN0IGFkbWluVXBkYXRlVXNlckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIGlkXCIgfSksXG5cdGRhdGE6IHoucmVjb3JkKHouYW55KCksIHouYW55KCkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBkYXRhIHRvIHVwZGF0ZVwiIH0pXG59KTtcbi8qKlxuKiAjIyMgRW5kcG9pbnRcbipcbiogUE9TVCBgL2FkbWluL3VwZGF0ZS11c2VyYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLmFkbWluVXBkYXRlVXNlcmBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuYWRtaW4udXBkYXRlVXNlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tdXBkYXRlLXVzZXIpXG4qL1xuY29uc3QgYWRtaW5VcGRhdGVVc2VyID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hZG1pbi91cGRhdGUtdXNlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IGFkbWluVXBkYXRlVXNlckJvZHlTY2hlbWEsXG5cdHVzZTogW2FkbWluTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJ1cGRhdGVVc2VyXCIsXG5cdFx0c3VtbWFyeTogXCJVcGRhdGUgYSB1c2VyXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiVXBkYXRlIGEgdXNlcidzIGRldGFpbHNcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIHVwZGF0ZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgdXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oe1xuXHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdHJvbGU6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5yb2xlLFxuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0cGVybWlzc2lvbnM6IHsgdXNlcjogW1widXBkYXRlXCJdIH1cblx0fSkpIHRocm93IGN0eC5lcnJvcihcIkZPUkJJRERFTlwiLCB7XG5cdFx0bWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVVNFUlMsXG5cdFx0Y29kZTogXCJZT1VfQVJFX05PVF9BTExPV0VEX1RPX1VQREFURV9VU0VSU1wiXG5cdH0pO1xuXHRpZiAoT2JqZWN0LmtleXMoY3R4LmJvZHkuZGF0YSkubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLk5PX0RBVEFfVE9fVVBEQVRFIH0pO1xuXHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGN0eC5ib2R5LmRhdGEsIFwicm9sZVwiKSkge1xuXHRcdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0XHR1c2VySWQ6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCxcblx0XHRcdHJvbGU6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5yb2xlLFxuXHRcdFx0b3B0aW9uczogb3B0cyxcblx0XHRcdHBlcm1pc3Npb25zOiB7IHVzZXI6IFtcInNldC1yb2xlXCJdIH1cblx0XHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DSEFOR0VfVVNFUlNfUk9MRSB9KTtcblx0XHRjb25zdCByb2xlVmFsdWUgPSBjdHguYm9keS5kYXRhLnJvbGU7XG5cdFx0Y29uc3QgaW5wdXRSb2xlcyA9IEFycmF5LmlzQXJyYXkocm9sZVZhbHVlKSA/IHJvbGVWYWx1ZSA6IFtyb2xlVmFsdWVdO1xuXHRcdGZvciAoY29uc3Qgcm9sZSBvZiBpbnB1dFJvbGVzKSB7XG5cdFx0XHRpZiAodHlwZW9mIHJvbGUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuSU5WQUxJRF9ST0xFX1RZUEUgfSk7XG5cdFx0XHRpZiAob3B0cy5yb2xlcyAmJiAhb3B0cy5yb2xlc1tyb2xlXSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX1NFVF9OT05fRVhJU1RFTlRfVkFMVUUgfSk7XG5cdFx0fVxuXHRcdGN0eC5ib2R5LmRhdGEucm9sZSA9IHBhcnNlUm9sZXMoaW5wdXRSb2xlcyk7XG5cdH1cblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihjdHguYm9keS51c2VySWQsIGN0eC5ib2R5LmRhdGEpO1xuXHRyZXR1cm4gY3R4Lmpzb24ocGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyKSk7XG59KTtcbmNvbnN0IGxpc3RVc2Vyc1F1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRzZWFyY2hWYWx1ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci4gRWc6IFxcXCJzb21lIG5hbWVcXFwiXCIgfSksXG5cdHNlYXJjaEZpZWxkOiB6LmVudW0oW1wiZW1haWxcIiwgXCJuYW1lXCJdKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGZpZWxkIHRvIHNlYXJjaCBpbiwgZGVmYXVsdHMgdG8gZW1haWwuIENhbiBiZSBgZW1haWxgIG9yIGBuYW1lYC4gRWc6IFxcXCJuYW1lXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdHNlYXJjaE9wZXJhdG9yOiB6LmVudW0oW1xuXHRcdFwiY29udGFpbnNcIixcblx0XHRcInN0YXJ0c193aXRoXCIsXG5cdFx0XCJlbmRzX3dpdGhcIlxuXHRdKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9wZXJhdG9yIHRvIHVzZSBmb3IgdGhlIHNlYXJjaC4gQ2FuIGJlIGBjb250YWluc2AsIGBzdGFydHNfd2l0aGAgb3IgYGVuZHNfd2l0aGAuIEVnOiBcXFwiY29udGFpbnNcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0bGltaXQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBudW1iZXIgb2YgdXNlcnMgdG8gcmV0dXJuXCIgfSkub3Ioei5udW1iZXIoKSkub3B0aW9uYWwoKSxcblx0b2Zmc2V0OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb2Zmc2V0IHRvIHN0YXJ0IGZyb21cIiB9KS5vcih6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuXHRzb3J0Qnk6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBmaWVsZCB0byBzb3J0IGJ5XCIgfSkub3B0aW9uYWwoKSxcblx0c29ydERpcmVjdGlvbjogei5lbnVtKFtcImFzY1wiLCBcImRlc2NcIl0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZGlyZWN0aW9uIHRvIHNvcnQgYnlcIiB9KS5vcHRpb25hbCgpLFxuXHRmaWx0ZXJGaWVsZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGZpZWxkIHRvIGZpbHRlciBieVwiIH0pLm9wdGlvbmFsKCksXG5cdGZpbHRlclZhbHVlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdmFsdWUgdG8gZmlsdGVyIGJ5XCIgfSkub3Ioei5udW1iZXIoKSkub3Ioei5ib29sZWFuKCkpLm9wdGlvbmFsKCksXG5cdGZpbHRlck9wZXJhdG9yOiB6LmVudW0oW1xuXHRcdFwiZXFcIixcblx0XHRcIm5lXCIsXG5cdFx0XCJsdFwiLFxuXHRcdFwibHRlXCIsXG5cdFx0XCJndFwiLFxuXHRcdFwiZ3RlXCIsXG5cdFx0XCJjb250YWluc1wiXG5cdF0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb3BlcmF0b3IgdG8gdXNlIGZvciB0aGUgZmlsdGVyXCIgfSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBsaXN0VXNlcnMgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL2xpc3QtdXNlcnNcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW2FkbWluTWlkZGxld2FyZV0sXG5cdHF1ZXJ5OiBsaXN0VXNlcnNRdWVyeVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImxpc3RVc2Vyc1wiLFxuXHRcdHN1bW1hcnk6IFwiTGlzdCB1c2Vyc1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgdXNlcnNcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJMaXN0IG9mIHVzZXJzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXNlcnM6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRcdGl0ZW1zOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRvdGFsOiB7IHR5cGU6IFwibnVtYmVyXCIgfSxcblx0XHRcdFx0XHRsaW1pdDogeyB0eXBlOiBcIm51bWJlclwiIH0sXG5cdFx0XHRcdFx0b2Zmc2V0OiB7IHR5cGU6IFwibnVtYmVyXCIgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1widXNlcnNcIiwgXCJ0b3RhbFwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oe1xuXHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdHJvbGU6IHNlc3Npb24udXNlci5yb2xlLFxuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0cGVybWlzc2lvbnM6IHsgdXNlcjogW1wibGlzdFwiXSB9XG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0xJU1RfVVNFUlMgfSk7XG5cdGNvbnN0IHdoZXJlID0gW107XG5cdGlmIChjdHgucXVlcnk/LnNlYXJjaFZhbHVlKSB3aGVyZS5wdXNoKHtcblx0XHRmaWVsZDogY3R4LnF1ZXJ5LnNlYXJjaEZpZWxkIHx8IFwiZW1haWxcIixcblx0XHRvcGVyYXRvcjogY3R4LnF1ZXJ5LnNlYXJjaE9wZXJhdG9yIHx8IFwiY29udGFpbnNcIixcblx0XHR2YWx1ZTogY3R4LnF1ZXJ5LnNlYXJjaFZhbHVlXG5cdH0pO1xuXHRpZiAoY3R4LnF1ZXJ5Py5maWx0ZXJWYWx1ZSkgd2hlcmUucHVzaCh7XG5cdFx0ZmllbGQ6IGN0eC5xdWVyeS5maWx0ZXJGaWVsZCB8fCBcImVtYWlsXCIsXG5cdFx0b3BlcmF0b3I6IGN0eC5xdWVyeS5maWx0ZXJPcGVyYXRvciB8fCBcImVxXCIsXG5cdFx0dmFsdWU6IGN0eC5xdWVyeS5maWx0ZXJWYWx1ZVxuXHR9KTtcblx0dHJ5IHtcblx0XHRjb25zdCB1c2VycyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saXN0VXNlcnMoTnVtYmVyKGN0eC5xdWVyeT8ubGltaXQpIHx8IHZvaWQgMCwgTnVtYmVyKGN0eC5xdWVyeT8ub2Zmc2V0KSB8fCB2b2lkIDAsIGN0eC5xdWVyeT8uc29ydEJ5ID8ge1xuXHRcdFx0ZmllbGQ6IGN0eC5xdWVyeS5zb3J0QnksXG5cdFx0XHRkaXJlY3Rpb246IGN0eC5xdWVyeS5zb3J0RGlyZWN0aW9uIHx8IFwiYXNjXCJcblx0XHR9IDogdm9pZCAwLCB3aGVyZS5sZW5ndGggPyB3aGVyZSA6IHZvaWQgMCk7XG5cdFx0Y29uc3QgdG90YWwgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY291bnRUb3RhbFVzZXJzKHdoZXJlLmxlbmd0aCA/IHdoZXJlIDogdm9pZCAwKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0dXNlcnM6IHVzZXJzLm1hcCgodXNlcikgPT4gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpKSxcblx0XHRcdHRvdGFsLFxuXHRcdFx0bGltaXQ6IE51bWJlcihjdHgucXVlcnk/LmxpbWl0KSB8fCB2b2lkIDAsXG5cdFx0XHRvZmZzZXQ6IE51bWJlcihjdHgucXVlcnk/Lm9mZnNldCkgfHwgdm9pZCAwXG5cdFx0fSk7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHR1c2VyczogW10sXG5cdFx0XHR0b3RhbDogMFxuXHRcdH0pO1xuXHR9XG59KTtcbmNvbnN0IGxpc3RVc2VyU2Vzc2lvbnNCb2R5U2NoZW1hID0gei5vYmplY3QoeyB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBpZFwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vbGlzdC11c2VyLXNlc3Npb25zYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLmxpc3RVc2VyU2Vzc2lvbnNgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmFkbWluLmxpc3RVc2VyU2Vzc2lvbnNgXG4qXG4qIEBzZWUgW1JlYWQgb3VyIGRvY3MgdG8gbGVhcm4gbW9yZS5dKGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9hZG1pbiNhcGktbWV0aG9kLWFkbWluLWxpc3QtdXNlci1zZXNzaW9ucylcbiovXG5jb25zdCBsaXN0VXNlclNlc3Npb25zID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hZG1pbi9saXN0LXVzZXItc2Vzc2lvbnNcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHR1c2U6IFthZG1pbk1pZGRsZXdhcmVdLFxuXHRib2R5OiBsaXN0VXNlclNlc3Npb25zQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImxpc3RVc2VyU2Vzc2lvbnNcIixcblx0XHRzdW1tYXJ5OiBcIkxpc3QgdXNlciBzZXNzaW9uc1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgdXNlciBzZXNzaW9uc1wiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkxpc3Qgb2YgdXNlciBzZXNzaW9uc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzZXNzaW9uczoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRpdGVtczogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1Nlc3Npb25cIiB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oe1xuXHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdHJvbGU6IHNlc3Npb24udXNlci5yb2xlLFxuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0cGVybWlzc2lvbnM6IHsgc2Vzc2lvbjogW1wibGlzdFwiXSB9XG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0xJU1RfVVNFUlNfU0VTU0lPTlMgfSk7XG5cdGNvbnN0IHNlc3Npb25zID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpc3RTZXNzaW9ucyhjdHguYm9keS51c2VySWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzZXNzaW9uczogc2Vzc2lvbnMubWFwKChzKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgcykpIH0pO1xufSk7XG5jb25zdCB1bmJhblVzZXJCb2R5U2NoZW1hID0gei5vYmplY3QoeyB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBpZFwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vdW5iYW4tdXNlcmBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS51bmJhblVzZXJgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmFkbWluLnVuYmFuVXNlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tdW5iYW4tdXNlcilcbiovXG5jb25zdCB1bmJhblVzZXIgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL3VuYmFuLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB1bmJhblVzZXJCb2R5U2NoZW1hLFxuXHR1c2U6IFthZG1pbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwidW5iYW5Vc2VyXCIsXG5cdFx0c3VtbWFyeTogXCJVbmJhbiBhIHVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJVbmJhbiBhIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyIHVuYmFubmVkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHVzZXI6IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0dXNlcklkOiBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQsXG5cdFx0cm9sZTogc2Vzc2lvbi51c2VyLnJvbGUsXG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRwZXJtaXNzaW9uczogeyB1c2VyOiBbXCJiYW5cIl0gfVxuXHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19CQU5fVVNFUlMgfSk7XG5cdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihjdHguYm9keS51c2VySWQsIHtcblx0XHRiYW5uZWQ6IGZhbHNlLFxuXHRcdGJhbkV4cGlyZXM6IG51bGwsXG5cdFx0YmFuUmVhc29uOiBudWxsLFxuXHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1c2VyKSB9KTtcbn0pO1xuY29uc3QgYmFuVXNlckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIGlkXCIgfSksXG5cdGJhblJlYXNvbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHJlYXNvbiBmb3IgdGhlIGJhblwiIH0pLm9wdGlvbmFsKCksXG5cdGJhbkV4cGlyZXNJbjogei5udW1iZXIoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG51bWJlciBvZiBzZWNvbmRzIHVudGlsIHRoZSBiYW4gZXhwaXJlc1wiIH0pLm9wdGlvbmFsKClcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vYmFuLXVzZXJgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkuYmFuVXNlcmBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuYWRtaW4uYmFuVXNlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tYmFuLXVzZXIpXG4qL1xuY29uc3QgYmFuVXNlciA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYWRtaW4vYmFuLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiBiYW5Vc2VyQm9keVNjaGVtYSxcblx0dXNlOiBbYWRtaW5NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImJhblVzZXJcIixcblx0XHRzdW1tYXJ5OiBcIkJhbiBhIHVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJCYW4gYSB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlciBiYW5uZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgdXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFoYXNQZXJtaXNzaW9uKHtcblx0XHR1c2VySWQ6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCxcblx0XHRyb2xlOiBzZXNzaW9uLnVzZXIucm9sZSxcblx0XHRvcHRpb25zOiBvcHRzLFxuXHRcdHBlcm1pc3Npb25zOiB7IHVzZXI6IFtcImJhblwiXSB9XG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0JBTl9VU0VSUyB9KTtcblx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKGN0eC5ib2R5LnVzZXJJZCkpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9OT1RfRk9VTkQgfSk7XG5cdGlmIChjdHguYm9keS51c2VySWQgPT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQ0FOTk9UX0JBTl9ZT1VSU0VMRiB9KTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGN0eC5ib2R5LnVzZXJJZCwge1xuXHRcdGJhbm5lZDogdHJ1ZSxcblx0XHRiYW5SZWFzb246IGN0eC5ib2R5LmJhblJlYXNvbiB8fCBvcHRzPy5kZWZhdWx0QmFuUmVhc29uIHx8IFwiTm8gcmVhc29uXCIsXG5cdFx0YmFuRXhwaXJlczogY3R4LmJvZHkuYmFuRXhwaXJlc0luID8gZ2V0RGF0ZShjdHguYm9keS5iYW5FeHBpcmVzSW4sIFwic2VjXCIpIDogb3B0cz8uZGVmYXVsdEJhbkV4cGlyZXNJbiA/IGdldERhdGUob3B0cy5kZWZhdWx0QmFuRXhwaXJlc0luLCBcInNlY1wiKSA6IHZvaWQgMCxcblx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoY3R4LmJvZHkudXNlcklkKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgdXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpIH0pO1xufSk7XG5jb25zdCBpbXBlcnNvbmF0ZVVzZXJCb2R5U2NoZW1hID0gei5vYmplY3QoeyB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBpZFwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vaW1wZXJzb25hdGUtdXNlcmBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5pbXBlcnNvbmF0ZVVzZXJgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmFkbWluLmltcGVyc29uYXRlVXNlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4taW1wZXJzb25hdGUtdXNlcilcbiovXG5jb25zdCBpbXBlcnNvbmF0ZVVzZXIgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL2ltcGVyc29uYXRlLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiBpbXBlcnNvbmF0ZVVzZXJCb2R5U2NoZW1hLFxuXHR1c2U6IFthZG1pbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiaW1wZXJzb25hdGVVc2VyXCIsXG5cdFx0c3VtbWFyeTogXCJJbXBlcnNvbmF0ZSBhIHVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJJbXBlcnNvbmF0ZSBhIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJJbXBlcnNvbmF0aW9uIHNlc3Npb24gY3JlYXRlZFwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSxcblx0XHRcdFx0XHR1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0dXNlcklkOiBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQsXG5cdFx0cm9sZTogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLnJvbGUsXG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRwZXJtaXNzaW9uczogeyB1c2VyOiBbXCJpbXBlcnNvbmF0ZVwiXSB9XG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0lNUEVSU09OQVRFX1VTRVJTIH0pO1xuXHRjb25zdCB0YXJnZXRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChjdHguYm9keS51c2VySWQpO1xuXHRpZiAoIXRhcmdldFVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgYWRtaW5Sb2xlcyA9IChBcnJheS5pc0FycmF5KG9wdHMuYWRtaW5Sb2xlcykgPyBvcHRzLmFkbWluUm9sZXMgOiBvcHRzLmFkbWluUm9sZXM/LnNwbGl0KFwiLFwiKSB8fCBbXSkubWFwKChyb2xlKSA9PiByb2xlLnRyaW0oKSk7XG5cdGNvbnN0IHRhcmdldFVzZXJSb2xlID0gKHRhcmdldFVzZXIucm9sZSB8fCBvcHRzLmRlZmF1bHRSb2xlIHx8IFwidXNlclwiKS5zcGxpdChcIixcIik7XG5cdGlmIChvcHRzLmFsbG93SW1wZXJzb25hdGluZ0FkbWlucyAhPT0gdHJ1ZSAmJiAodGFyZ2V0VXNlclJvbGUuc29tZSgocm9sZSkgPT4gYWRtaW5Sb2xlcy5pbmNsdWRlcyhyb2xlKSkgfHwgb3B0cy5hZG1pblVzZXJJZHM/LmluY2x1ZGVzKHRhcmdldFVzZXIuaWQpKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0NBTk5PVF9JTVBFUlNPTkFURV9BRE1JTlMgfSk7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih0YXJnZXRVc2VyLmlkLCB0cnVlLCB7XG5cdFx0aW1wZXJzb25hdGVkQnk6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCxcblx0XHRleHBpcmVzQXQ6IG9wdHM/LmltcGVyc29uYXRpb25TZXNzaW9uRHVyYXRpb24gPyBnZXREYXRlKG9wdHMuaW1wZXJzb25hdGlvblNlc3Npb25EdXJhdGlvbiwgXCJzZWNcIikgOiBnZXREYXRlKDM2MDAsIFwic2VjXCIpXG5cdH0sIHRydWUpO1xuXHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0Y29uc3QgYXV0aENvb2tpZXMgPSBjdHguY29udGV4dC5hdXRoQ29va2llcztcblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRjb25zdCBkb250UmVtZW1iZXJNZUNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0Y29uc3QgYWRtaW5Db29raWVQcm9wID0gY3R4LmNvbnRleHQuY3JlYXRlQXV0aENvb2tpZShcImFkbWluX3Nlc3Npb25cIik7XG5cdGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUoYWRtaW5Db29raWVQcm9wLm5hbWUsIGAke2N0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi50b2tlbn06JHtkb250UmVtZW1iZXJNZUNvb2tpZSB8fCBcIlwifWAsIGN0eC5jb250ZXh0LnNlY3JldCwgYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXMpO1xuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlcjogdGFyZ2V0VXNlclxuXHR9LCB0cnVlKTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzZXNzaW9uLFxuXHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB0YXJnZXRVc2VyKVxuXHR9KTtcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vc3RvcC1pbXBlcnNvbmF0aW5nYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLnN0b3BJbXBlcnNvbmF0aW5nYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5hZG1pbi5zdG9wSW1wZXJzb25hdGluZ2BcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tc3RvcC1pbXBlcnNvbmF0aW5nKVxuKi9cbmNvbnN0IHN0b3BJbXBlcnNvbmF0aW5nID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL3N0b3AtaW1wZXJzb25hdGluZ1wiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0aWYgKCFzZXNzaW9uLnNlc3Npb24uaW1wZXJzb25hdGVkQnkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJZb3UgYXJlIG5vdCBpbXBlcnNvbmF0aW5nIGFueW9uZVwiIH0pO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChzZXNzaW9uLnNlc3Npb24uaW1wZXJzb25hdGVkQnkpO1xuXHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZpbmQgdXNlclwiIH0pO1xuXHRjb25zdCBhZG1pblNlc3Npb25Db29raWUgPSBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFwiYWRtaW5fc2Vzc2lvblwiKTtcblx0Y29uc3QgYWRtaW5Db29raWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGFkbWluU2Vzc2lvbkNvb2tpZS5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRpZiAoIWFkbWluQ29va2llKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBmaW5kIGFkbWluIHNlc3Npb25cIiB9KTtcblx0Y29uc3QgW2FkbWluU2Vzc2lvblRva2VuLCBkb250UmVtZW1iZXJNZUNvb2tpZV0gPSBhZG1pbkNvb2tpZT8uc3BsaXQoXCI6XCIpO1xuXHRjb25zdCBhZG1pblNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24oYWRtaW5TZXNzaW9uVG9rZW4pO1xuXHRpZiAoIWFkbWluU2Vzc2lvbiB8fCBhZG1pblNlc3Npb24uc2Vzc2lvbi51c2VySWQgIT09IHVzZXIuaWQpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGZpbmQgYWRtaW4gc2Vzc2lvblwiIH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwgYWRtaW5TZXNzaW9uLCAhIWRvbnRSZW1lbWJlck1lQ29va2llKTtcblx0ZXhwaXJlQ29va2llKGN0eCwgYWRtaW5TZXNzaW9uQ29va2llKTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzZXNzaW9uOiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgYWRtaW5TZXNzaW9uLnNlc3Npb24pLFxuXHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBhZG1pblNlc3Npb24udXNlcilcblx0fSk7XG59KTtcbmNvbnN0IHJldm9rZVVzZXJTZXNzaW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgc2Vzc2lvblRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc2Vzc2lvbiB0b2tlblwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vcmV2b2tlLXVzZXItc2Vzc2lvbmBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5yZXZva2VVc2VyU2Vzc2lvbmBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuYWRtaW4ucmV2b2tlVXNlclNlc3Npb25gXG4qXG4qIEBzZWUgW1JlYWQgb3VyIGRvY3MgdG8gbGVhcm4gbW9yZS5dKGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9hZG1pbiNhcGktbWV0aG9kLWFkbWluLXJldm9rZS11c2VyLXNlc3Npb24pXG4qL1xuY29uc3QgcmV2b2tlVXNlclNlc3Npb24gPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL3Jldm9rZS11c2VyLXNlc3Npb25cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiByZXZva2VVc2VyU2Vzc2lvbkJvZHlTY2hlbWEsXG5cdHVzZTogW2FkbWluTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXZva2VVc2VyU2Vzc2lvblwiLFxuXHRcdHN1bW1hcnk6IFwiUmV2b2tlIGEgdXNlciBzZXNzaW9uXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiUmV2b2tlIGEgdXNlciBzZXNzaW9uXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiByZXZva2VkXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN1Y2Nlc3M6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGlmICghaGFzUGVybWlzc2lvbih7XG5cdFx0dXNlcklkOiBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQsXG5cdFx0cm9sZTogc2Vzc2lvbi51c2VyLnJvbGUsXG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRwZXJtaXNzaW9uczogeyBzZXNzaW9uOiBbXCJyZXZva2VcIl0gfVxuXHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19SRVZPS0VfVVNFUlNfU0VTU0lPTlMgfSk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKGN0eC5ib2R5LnNlc3Npb25Ub2tlbik7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbmNvbnN0IHJldm9rZVVzZXJTZXNzaW9uc0JvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIGlkXCIgfSkgfSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9hZG1pbi9yZXZva2UtdXNlci1zZXNzaW9uc2BcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5yZXZva2VVc2VyU2Vzc2lvbnNgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmFkbWluLnJldm9rZVVzZXJTZXNzaW9uc2BcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tcmV2b2tlLXVzZXItc2Vzc2lvbnMpXG4qL1xuY29uc3QgcmV2b2tlVXNlclNlc3Npb25zID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hZG1pbi9yZXZva2UtdXNlci1zZXNzaW9uc1wiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHJldm9rZVVzZXJTZXNzaW9uc0JvZHlTY2hlbWEsXG5cdHVzZTogW2FkbWluTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXZva2VVc2VyU2Vzc2lvbnNcIixcblx0XHRzdW1tYXJ5OiBcIlJldm9rZSBhbGwgdXNlciBzZXNzaW9uc1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhbGwgdXNlciBzZXNzaW9uc1wiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb25zIHJldm9rZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFoYXNQZXJtaXNzaW9uKHtcblx0XHR1c2VySWQ6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCxcblx0XHRyb2xlOiBzZXNzaW9uLnVzZXIucm9sZSxcblx0XHRvcHRpb25zOiBvcHRzLFxuXHRcdHBlcm1pc3Npb25zOiB7IHNlc3Npb246IFtcInJldm9rZVwiXSB9XG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBBRE1JTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX1JFVk9LRV9VU0VSU19TRVNTSU9OUyB9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKGN0eC5ib2R5LnVzZXJJZCk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbmNvbnN0IHJlbW92ZVVzZXJCb2R5U2NoZW1hID0gei5vYmplY3QoeyB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBpZFwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvYWRtaW4vcmVtb3ZlLXVzZXJgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkucmVtb3ZlVXNlcmBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuYWRtaW4ucmVtb3ZlVXNlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2FkbWluI2FwaS1tZXRob2QtYWRtaW4tcmVtb3ZlLXVzZXIpXG4qL1xuY29uc3QgcmVtb3ZlVXNlciA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYWRtaW4vcmVtb3ZlLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiByZW1vdmVVc2VyQm9keVNjaGVtYSxcblx0dXNlOiBbYWRtaW5NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInJlbW92ZVVzZXJcIixcblx0XHRzdW1tYXJ5OiBcIlJlbW92ZSBhIHVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJEZWxldGUgYSB1c2VyIGFuZCBhbGwgdGhlaXIgc2Vzc2lvbnMgYW5kIGFjY291bnRzLiBDYW5ub3QgYmUgdW5kb25lLlwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgcmVtb3ZlZFwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdWNjZXNzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oe1xuXHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdHJvbGU6IHNlc3Npb24udXNlci5yb2xlLFxuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0cGVybWlzc2lvbnM6IHsgdXNlcjogW1wiZGVsZXRlXCJdIH1cblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fREVMRVRFX1VTRVJTIH0pO1xuXHRpZiAoY3R4LmJvZHkudXNlcklkID09PSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQURNSU5fRVJST1JfQ09ERVMuWU9VX0NBTk5PVF9SRU1PVkVfWU9VUlNFTEYgfSk7XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChjdHguYm9keS51c2VySWQpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVVc2VyKGN0eC5ib2R5LnVzZXJJZCk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbmNvbnN0IHNldFVzZXJQYXNzd29yZEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm5vbmVtcHR5KFwibmV3UGFzc3dvcmQgY2Fubm90IGJlIGVtcHR5XCIpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkXCIgfSksXG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubm9uZW1wdHkoXCJ1c2VySWQgY2Fubm90IGJlIGVtcHR5XCIpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBpZFwiIH0pXG59KTtcbi8qKlxuKiAjIyMgRW5kcG9pbnRcbipcbiogUE9TVCBgL2FkbWluL3NldC11c2VyLXBhc3N3b3JkYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLnNldFVzZXJQYXNzd29yZGBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuYWRtaW4uc2V0VXNlclBhc3N3b3JkYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvYWRtaW4jYXBpLW1ldGhvZC1hZG1pbi1zZXQtdXNlci1wYXNzd29yZClcbiovXG5jb25zdCBzZXRVc2VyUGFzc3dvcmQgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2FkbWluL3NldC11c2VyLXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogc2V0VXNlclBhc3N3b3JkQm9keVNjaGVtYSxcblx0dXNlOiBbYWRtaW5NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNldFVzZXJQYXNzd29yZFwiLFxuXHRcdHN1bW1hcnk6IFwiU2V0IGEgdXNlcidzIHBhc3N3b3JkXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2V0IGEgdXNlcidzIHBhc3N3b3JkXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiUGFzc3dvcmQgc2V0XCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWhhc1Blcm1pc3Npb24oe1xuXHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdHJvbGU6IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5yb2xlLFxuXHRcdG9wdGlvbnM6IG9wdHMsXG5cdFx0cGVybWlzc2lvbnM6IHsgdXNlcjogW1wic2V0LXBhc3N3b3JkXCJdIH1cblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEFETUlOX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fU0VUX1VTRVJTX1BBU1NXT1JEIH0pO1xuXHRjb25zdCB7IG5ld1Bhc3N3b3JkLCB1c2VySWQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdH1cblx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0fVxuXHRjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlUGFzc3dvcmQodXNlcklkLCBoYXNoZWRQYXNzd29yZCk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgdXNlckhhc1Blcm1pc3Npb25Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBgVGhlIHVzZXIgaWQuIEVnOiBcInVzZXItaWRcImAgfSksXG5cdHJvbGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IGBUaGUgcm9sZSB0byBjaGVjayBwZXJtaXNzaW9uIGZvci4gRWc6IFwiYWRtaW5cImAgfSlcbn0pLmFuZCh6LnVuaW9uKFt6Lm9iamVjdCh7XG5cdHBlcm1pc3Npb246IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuXHRwZXJtaXNzaW9uczogei51bmRlZmluZWQoKVxufSksIHoub2JqZWN0KHtcblx0cGVybWlzc2lvbjogei51bmRlZmluZWQoKSxcblx0cGVybWlzc2lvbnM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpXG59KV0pKTtcbi8qKlxuKiAjIyMgRW5kcG9pbnRcbipcbiogUE9TVCBgL2FkbWluL2hhcy1wZXJtaXNzaW9uYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLnVzZXJIYXNQZXJtaXNzaW9uYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5hZG1pbi5oYXNQZXJtaXNzaW9uYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvYWRtaW4jYXBpLW1ldGhvZC1hZG1pbi1oYXMtcGVybWlzc2lvbilcbiovXG5jb25zdCB1c2VySGFzUGVybWlzc2lvbiA9IChvcHRzKSA9PiB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYWRtaW4vaGFzLXBlcm1pc3Npb25cIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogdXNlckhhc1Blcm1pc3Npb25Cb2R5U2NoZW1hLFxuXHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNoZWNrIGlmIHRoZSB1c2VyIGhhcyBwZXJtaXNzaW9uXCIsXG5cdFx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRwZXJtaXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwZXJtaXNzaW9uIHRvIGNoZWNrXCIsXG5cdFx0XHRcdFx0XHRcdGRlcHJlY2F0ZWQ6IHRydWVcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwZXJtaXNzaW9uczoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcGVybWlzc2lvbiB0byBjaGVja1wiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1wicGVybWlzc2lvbnNcIl1cblx0XHRcdFx0fSB9IH0gfSxcblx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGVycm9yOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0c3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1Y2Nlc3NcIl1cblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sXG5cdFx0XHQkSW5mZXI6IHsgYm9keToge30gfVxuXHRcdH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGlmICghY3R4LmJvZHk/LnBlcm1pc3Npb24gJiYgIWN0eC5ib2R5Py5wZXJtaXNzaW9ucykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcImludmFsaWQgcGVybWlzc2lvbiBjaGVjay4gbm8gcGVybWlzc2lvbihzKSB3ZXJlIHBhc3NlZC5cIiB9KTtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRpZiAoIXNlc3Npb24gJiYgKGN0eC5yZXF1ZXN0IHx8IGN0eC5oZWFkZXJzKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRcdGlmICghc2Vzc2lvbiAmJiAhY3R4LmJvZHkudXNlcklkICYmICFjdHguYm9keS5yb2xlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwidXNlciBpZCBvciByb2xlIGlzIHJlcXVpcmVkXCIgfSk7XG5cdFx0Y29uc3QgdXNlciA9IHNlc3Npb24/LnVzZXIgfHwgKGN0eC5ib2R5LnJvbGUgPyB7XG5cdFx0XHRpZDogY3R4LmJvZHkudXNlcklkIHx8IFwiXCIsXG5cdFx0XHRyb2xlOiBjdHguYm9keS5yb2xlXG5cdFx0fSA6IG51bGwpIHx8IChjdHguYm9keS51c2VySWQgPyBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKGN0eC5ib2R5LnVzZXJJZCkgOiBudWxsKTtcblx0XHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJ1c2VyIG5vdCBmb3VuZFwiIH0pO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGhhc1Blcm1pc3Npb24oe1xuXHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0cm9sZTogdXNlci5yb2xlLFxuXHRcdFx0b3B0aW9uczogb3B0cyxcblx0XHRcdHBlcm1pc3Npb25zOiBjdHguYm9keS5wZXJtaXNzaW9ucyA/PyBjdHguYm9keS5wZXJtaXNzaW9uXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0c3VjY2VzczogcmVzdWx0XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZG1pblVwZGF0ZVVzZXIsIGJhblVzZXIsIGNyZWF0ZVVzZXIsIGdldFVzZXIsIGltcGVyc29uYXRlVXNlciwgbGlzdFVzZXJTZXNzaW9ucywgbGlzdFVzZXJzLCByZW1vdmVVc2VyLCByZXZva2VVc2VyU2Vzc2lvbiwgcmV2b2tlVXNlclNlc3Npb25zLCBzZXRSb2xlLCBzZXRVc2VyUGFzc3dvcmQsIHN0b3BJbXBlcnNvbmF0aW5nLCB1bmJhblVzZXIsIHVzZXJIYXNQZXJtaXNzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3V0ZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/routes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/admin/schema.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/schema.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/admin/schema.ts\nconst schema = {\n\tuser: { fields: {\n\t\trole: {\n\t\t\ttype: \"string\",\n\t\t\trequired: false,\n\t\t\tinput: false\n\t\t},\n\t\tbanned: {\n\t\t\ttype: \"boolean\",\n\t\t\tdefaultValue: false,\n\t\t\trequired: false,\n\t\t\tinput: false\n\t\t},\n\t\tbanReason: {\n\t\t\ttype: \"string\",\n\t\t\trequired: false,\n\t\t\tinput: false\n\t\t},\n\t\tbanExpires: {\n\t\t\ttype: \"date\",\n\t\t\trequired: false,\n\t\t\tinput: false\n\t\t}\n\t} },\n\tsession: { fields: { impersonatedBy: {\n\t\ttype: \"string\",\n\t\trequired: false\n\t} } }\n};\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL3NjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksVUFBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFkbWluXFxzY2hlbWEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hZG1pbi9zY2hlbWEudHNcbmNvbnN0IHNjaGVtYSA9IHtcblx0dXNlcjogeyBmaWVsZHM6IHtcblx0XHRyb2xlOiB7XG5cdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0aW5wdXQ6IGZhbHNlXG5cdFx0fSxcblx0XHRiYW5uZWQ6IHtcblx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0ZGVmYXVsdFZhbHVlOiBmYWxzZSxcblx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdGlucHV0OiBmYWxzZVxuXHRcdH0sXG5cdFx0YmFuUmVhc29uOiB7XG5cdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0aW5wdXQ6IGZhbHNlXG5cdFx0fSxcblx0XHRiYW5FeHBpcmVzOiB7XG5cdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdGlucHV0OiBmYWxzZVxuXHRcdH1cblx0fSB9LFxuXHRzZXNzaW9uOiB7IGZpZWxkczogeyBpbXBlcnNvbmF0ZWRCeToge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdH0gfSB9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/admin/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/anonymous/client.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anonymousClient: () => (/* binding */ anonymousClient)\n/* harmony export */ });\n//#region src/plugins/anonymous/client.ts\nconst anonymousClient = () => {\n\treturn {\n\t\tid: \"anonymous\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/sign-in/anonymous\": \"POST\",\n\t\t\t\"/delete-anonymous-user\": \"POST\"\n\t\t},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/sign-in/anonymous\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2Fub255bW91cy9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhbm9ueW1vdXNcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2Fub255bW91cy9jbGllbnQudHNcbmNvbnN0IGFub255bW91c0NsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJhbm9ueW1vdXNcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9zaWduLWluL2Fub255bW91c1wiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RlbGV0ZS1hbm9ueW1vdXMtdXNlclwiOiBcIlBPU1RcIlxuXHRcdH0sXG5cdFx0YXRvbUxpc3RlbmVyczogW3tcblx0XHRcdG1hdGNoZXI6IChwYXRoKSA9PiBwYXRoID09PSBcIi9zaWduLWluL2Fub255bW91c1wiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhbm9ueW1vdXNDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/anonymous/error-codes.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/anonymous/error-codes.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANONYMOUS_ERROR_CODES: () => (/* binding */ ANONYMOUS_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/anonymous/error-codes.ts\nconst ANONYMOUS_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tINVALID_EMAIL_FORMAT: \"Email was not generated in a valid format\",\n\tFAILED_TO_CREATE_USER: \"Failed to create user\",\n\tCOULD_NOT_CREATE_SESSION: \"Could not create session\",\n\tANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY: \"Anonymous users cannot sign in again anonymously\",\n\tFAILED_TO_DELETE_ANONYMOUS_USER: \"Failed to delete anonymous user\",\n\tUSER_IS_NOT_ANONYMOUS: \"User is not anonymous\",\n\tDELETE_ANONYMOUS_USER_DISABLED: \"Deleting anonymous users is disabled\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2Fub255bW91cy9lcnJvci1jb2Rlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0EsOEJBQThCLHlFQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDaUM7QUFDakMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhbm9ueW1vdXNcXGVycm9yLWNvZGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hbm9ueW1vdXMvZXJyb3ItY29kZXMudHNcbmNvbnN0IEFOT05ZTU9VU19FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuXHRJTlZBTElEX0VNQUlMX0ZPUk1BVDogXCJFbWFpbCB3YXMgbm90IGdlbmVyYXRlZCBpbiBhIHZhbGlkIGZvcm1hdFwiLFxuXHRGQUlMRURfVE9fQ1JFQVRFX1VTRVI6IFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsXG5cdENPVUxEX05PVF9DUkVBVEVfU0VTU0lPTjogXCJDb3VsZCBub3QgY3JlYXRlIHNlc3Npb25cIixcblx0QU5PTllNT1VTX1VTRVJTX0NBTk5PVF9TSUdOX0lOX0FHQUlOX0FOT05ZTU9VU0xZOiBcIkFub255bW91cyB1c2VycyBjYW5ub3Qgc2lnbiBpbiBhZ2FpbiBhbm9ueW1vdXNseVwiLFxuXHRGQUlMRURfVE9fREVMRVRFX0FOT05ZTU9VU19VU0VSOiBcIkZhaWxlZCB0byBkZWxldGUgYW5vbnltb3VzIHVzZXJcIixcblx0VVNFUl9JU19OT1RfQU5PTllNT1VTOiBcIlVzZXIgaXMgbm90IGFub255bW91c1wiLFxuXHRERUxFVEVfQU5PTllNT1VTX1VTRVJfRElTQUJMRUQ6IFwiRGVsZXRpbmcgYW5vbnltb3VzIHVzZXJzIGlzIGRpc2FibGVkXCJcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFOT05ZTU9VU19FUlJPUl9DT0RFUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3ItY29kZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/anonymous/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/anonymous/index.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/anonymous/index.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anonymous: () => (/* binding */ anonymous)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/anonymous/error-codes.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/anonymous/schema.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/anonymous/index.ts\nasync function getAnonUserEmail(options) {\n\tconst customEmail = await options?.generateRandomEmail?.();\n\tif (customEmail) {\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_9__.email().safeParse(customEmail).success) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.INVALID_EMAIL_FORMAT });\n\t\treturn customEmail;\n\t}\n\tconst id = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__.generateId)();\n\tif (options?.emailDomainName) return `temp-${id}@${options.emailDomainName}`;\n\treturn `temp@${id}.com`;\n}\nconst anonymous = (options) => {\n\treturn {\n\t\tid: \"anonymous\",\n\t\tendpoints: {\n\t\t\tsignInAnonymous: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/sign-in/anonymous\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Sign in anonymously\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Sign in anonymously\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" },\n\t\t\t\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif ((await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx, { disableRefresh: true }))?.user.isAnonymous) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY });\n\t\t\t\tconst email = await getAnonUserEmail(options);\n\t\t\t\tconst name = await options?.generateName?.(ctx) || \"Anonymous\";\n\t\t\t\tconst newUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\t\temail,\n\t\t\t\t\temailVerified: false,\n\t\t\t\t\tisAnonymous: true,\n\t\t\t\t\tname,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t});\n\t\t\t\tif (!newUser) throw ctx.error(\"INTERNAL_SERVER_ERROR\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t\t\tconst session = await ctx.context.internalAdapter.createSession(newUser.id);\n\t\t\t\tif (!session) return ctx.json(null, {\n\t\t\t\t\tstatus: 400,\n\t\t\t\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.COULD_NOT_CREATE_SESSION }\n\t\t\t\t});\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser: newUser\n\t\t\t\t});\n\t\t\t\treturn ctx.json({\n\t\t\t\t\ttoken: session.token,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, newUser)\n\t\t\t\t});\n\t\t\t}),\n\t\t\tdeleteAnonymousUser: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/delete-anonymous-user\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sensitiveSessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Delete an anonymous user\",\n\t\t\t\t\tresponses: {\n\t\t\t\t\t\t200: {\n\t\t\t\t\t\t\tdescription: \"Anonymous user deleted\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t\t\t\t\t} } }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"400\": {\n\t\t\t\t\t\t\tdescription: \"Anonymous user deletion is disabled\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": {\n\t\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\"message\"]\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"500\": {\n\t\t\t\t\t\t\tdescription: \"Internal server error\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: { message: { type: \"string\" } },\n\t\t\t\t\t\t\t\trequired: [\"message\"]\n\t\t\t\t\t\t\t} } }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst session = ctx.context.session;\n\t\t\t\tif (options?.disableDeleteAnonymousUser) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.DELETE_ANONYMOUS_USER_DISABLED });\n\t\t\t\tif (!session.user.isAnonymous) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.USER_IS_NOT_ANONYMOUS });\n\t\t\t\ttry {\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tctx.context.logger.error(\"Failed to delete anonymous user\", error);\n\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.FAILED_TO_DELETE_ANONYMOUS_USER });\n\t\t\t\t}\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json({ success: true });\n\t\t\t})\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher(ctx) {\n\t\t\t\treturn ctx.path?.startsWith(\"/sign-in\") || ctx.path?.startsWith(\"/sign-up\") || ctx.path?.startsWith(\"/callback\") || ctx.path?.startsWith(\"/oauth2/callback\") || ctx.path?.startsWith(\"/magic-link/verify\") || ctx.path?.startsWith(\"/email-otp/verify-email\") || ctx.path?.startsWith(\"/one-tap/callback\") || ctx.path?.startsWith(\"/passkey/verify-authentication\") || ctx.path?.startsWith(\"/phone-number/verify\") || false;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst setCookie = ctx.context.responseHeaders?.get(\"set-cookie\");\n\t\t\t\t/**\n\t\t\t\t* We can consider the user is about to sign in or sign up\n\t\t\t\t* if the response contains a session token.\n\t\t\t\t*/\n\t\t\t\tconst sessionTokenName = ctx.context.authCookies.sessionToken.name;\n\t\t\t\tif (!(0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSetCookieHeader)(setCookie || \"\").get(sessionTokenName)?.value.split(\".\")[0]) return;\n\t\t\t\t/**\n\t\t\t\t* Make sure the user had an anonymous session.\n\t\t\t\t*/\n\t\t\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx, { disableRefresh: true });\n\t\t\t\tif (!session || !session.user.isAnonymous) return;\n\t\t\t\tif (ctx.path === \"/sign-in/anonymous\" && !ctx.context.newSession) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES.ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY });\n\t\t\t\tconst newSession = ctx.context.newSession;\n\t\t\t\tif (!newSession) return;\n\t\t\t\tconst user = {\n\t\t\t\t\t...session.user,\n\t\t\t\t\tisAnonymous: session.user.isAnonymous\n\t\t\t\t};\n\t\t\t\tif (options?.onLinkAccount) await options?.onLinkAccount?.({\n\t\t\t\t\tanonymousUser: {\n\t\t\t\t\t\tsession: session.session,\n\t\t\t\t\t\tuser\n\t\t\t\t\t},\n\t\t\t\t\tnewUser: newSession,\n\t\t\t\t\tctx\n\t\t\t\t});\n\t\t\t\tconst newSessionUser = newSession.user;\n\t\t\t\tconst isSameUser = newSessionUser?.id === session.user.id;\n\t\t\t\tconst newSessionIsAnonymous = Boolean(newSessionUser?.isAnonymous);\n\t\t\t\tif (options?.disableDeleteAnonymousUser || isSameUser || newSessionIsAnonymous) return;\n\t\t\t\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\t\t\t})\n\t\t}] },\n\t\toptions,\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_6__.schema, options?.schema),\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ANONYMOUS_ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2Fub255bW91cy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBbUU7QUFDRztBQUNVO0FBQ2E7QUFDOUM7QUFDVztBQUNwQjtBQUNlO0FBQzVCO0FBQ3dEOztBQUVqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0NBQU8sNkNBQTZDLG9EQUFRLGtCQUFrQixTQUFTLG1FQUFxQix1QkFBdUI7QUFDMUk7QUFDQTtBQUNBLFlBQVksbUVBQVU7QUFDdEIsOENBQThDLEdBQUcsR0FBRyx3QkFBd0I7QUFDNUUsZ0JBQWdCLEdBQUc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix5RUFBa0I7QUFDdEM7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQSxnQkFBZ0IsbUNBQW1DO0FBQ25ELG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixlQUFlLDBFQUFpQixRQUFRLHNCQUFzQixnQ0FBZ0Msb0RBQVEsa0JBQWtCLFNBQVMsbUVBQXFCLG1EQUFtRDtBQUN6TTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsNkRBQTZELFNBQVMsbUVBQXFCLHdCQUF3QjtBQUNuSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVMsbUVBQXFCO0FBQzNDLEtBQUs7QUFDTCxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxXQUFXLCtEQUFlO0FBQzFCLEtBQUs7QUFDTCxJQUFJO0FBQ0osd0JBQXdCLHlFQUFrQjtBQUMxQztBQUNBLFVBQVUsK0VBQTBCO0FBQ3BDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQSxzQkFBc0IsV0FBVztBQUNqQztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSx1QkFBdUIsV0FBVztBQUNsQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4QztBQUNBLHNCQUFzQixXQUFXLGtCQUFrQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsdURBQXVELG9EQUFRLGtCQUFrQixTQUFTLG1FQUFxQixpQ0FBaUM7QUFDaEosNkNBQTZDLG9EQUFRLGdCQUFnQixTQUFTLG1FQUFxQix3QkFBd0I7QUFDM0g7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLGVBQWUsb0RBQVEsNEJBQTRCLFNBQVMsbUVBQXFCLGtDQUFrQztBQUNuSDtBQUNBLElBQUksdUVBQW1CO0FBQ3ZCLHNCQUFzQixlQUFlO0FBQ3JDLElBQUk7QUFDSixHQUFHO0FBQ0gsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRUFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDBFQUFpQixRQUFRLHNCQUFzQjtBQUN6RTtBQUNBLGdGQUFnRixvREFBUSxrQkFBa0IsU0FBUyxtRUFBcUIsbURBQW1EO0FBQzNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTjtBQUNBLFVBQVUsMkRBQVcsQ0FBQywrQ0FBTTtBQUM1QixnQkFBZ0IsbUVBQXFCO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhbm9ueW1vdXNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZVNjaGVtYSwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0Q29va2llSGVhZGVyIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZGVsZXRlU2Vzc2lvbkNvb2tpZSwgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHgsIHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IEFOT05ZTU9VU19FUlJPUl9DT0RFUyB9IGZyb20gXCIuL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgc2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYW5vbnltb3VzL2luZGV4LnRzXG5hc3luYyBmdW5jdGlvbiBnZXRBbm9uVXNlckVtYWlsKG9wdGlvbnMpIHtcblx0Y29uc3QgY3VzdG9tRW1haWwgPSBhd2FpdCBvcHRpb25zPy5nZW5lcmF0ZVJhbmRvbUVtYWlsPy4oKTtcblx0aWYgKGN1c3RvbUVtYWlsKSB7XG5cdFx0aWYgKCF6LmVtYWlsKCkuc2FmZVBhcnNlKGN1c3RvbUVtYWlsKS5zdWNjZXNzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFOT05ZTU9VU19FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX0ZPUk1BVCB9KTtcblx0XHRyZXR1cm4gY3VzdG9tRW1haWw7XG5cdH1cblx0Y29uc3QgaWQgPSBnZW5lcmF0ZUlkKCk7XG5cdGlmIChvcHRpb25zPy5lbWFpbERvbWFpbk5hbWUpIHJldHVybiBgdGVtcC0ke2lkfUAke29wdGlvbnMuZW1haWxEb21haW5OYW1lfWA7XG5cdHJldHVybiBgdGVtcEAke2lkfS5jb21gO1xufVxuY29uc3QgYW5vbnltb3VzID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJhbm9ueW1vdXNcIixcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNpZ25JbkFub255bW91czogY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24taW4vYW5vbnltb3VzXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gaW4gYW5vbnltb3VzbHlcIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIGFub255bW91c2x5XCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9LFxuXHRcdFx0XHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0aWYgKChhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgsIHsgZGlzYWJsZVJlZnJlc2g6IHRydWUgfSkpPy51c2VyLmlzQW5vbnltb3VzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFOT05ZTU9VU19FUlJPUl9DT0RFUy5BTk9OWU1PVVNfVVNFUlNfQ0FOTk9UX1NJR05fSU5fQUdBSU5fQU5PTllNT1VTTFkgfSk7XG5cdFx0XHRcdGNvbnN0IGVtYWlsID0gYXdhaXQgZ2V0QW5vblVzZXJFbWFpbChvcHRpb25zKTtcblx0XHRcdFx0Y29uc3QgbmFtZSA9IGF3YWl0IG9wdGlvbnM/LmdlbmVyYXRlTmFtZT8uKGN0eCkgfHwgXCJBbm9ueW1vdXNcIjtcblx0XHRcdFx0Y29uc3QgbmV3VXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVVc2VyKHtcblx0XHRcdFx0XHRlbWFpbCxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZSxcblx0XHRcdFx0XHRpc0Fub255bW91czogdHJ1ZSxcblx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFuZXdVc2VyKSB0aHJvdyBjdHguZXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBBTk9OWU1PVVNfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9VU0VSIH0pO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24obmV3VXNlci5pZCk7XG5cdFx0XHRcdGlmICghc2Vzc2lvbikgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRcdFx0XHRzdGF0dXM6IDQwMCxcblx0XHRcdFx0XHRib2R5OiB7IG1lc3NhZ2U6IEFOT05ZTU9VU19FUlJPUl9DT0RFUy5DT1VMRF9OT1RfQ1JFQVRFX1NFU1NJT04gfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXI6IG5ld1VzZXJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIG5ld1VzZXIpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSksXG5cdFx0XHRkZWxldGVBbm9ueW1vdXNVc2VyOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZGVsZXRlLWFub255bW91cy11c2VyXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRGVsZXRlIGFuIGFub255bW91cyB1c2VyXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcdFx0XHQyMDA6IHtcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQW5vbnltb3VzIHVzZXIgZGVsZXRlZFwiLFxuXHRcdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogeyBzdWNjZXNzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwiNDAwXCI6IHtcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQW5vbnltb3VzIHVzZXIgZGVsZXRpb24gaXMgZGlzYWJsZWRcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjoge1xuXHRcdFx0XHRcdFx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcIm1lc3NhZ2VcIl1cblx0XHRcdFx0XHRcdFx0fSB9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XCI1MDBcIjoge1xuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3JcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfSxcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1wibWVzc2FnZVwiXVxuXHRcdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZURlbGV0ZUFub255bW91c1VzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQU5PTllNT1VTX0VSUk9SX0NPREVTLkRFTEVURV9BTk9OWU1PVVNfVVNFUl9ESVNBQkxFRCB9KTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uLnVzZXIuaXNBbm9ueW1vdXMpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEFOT05ZTU9VU19FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BTk9OWU1PVVMgfSk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIGFub255bW91cyB1c2VyXCIsIGVycm9yKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBBTk9OWU1PVVNfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0RFTEVURV9BTk9OWU1PVVNfVVNFUiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG5cdFx0XHR9KVxuXHRcdH0sXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKGN0eCkge1xuXHRcdFx0XHRyZXR1cm4gY3R4LnBhdGg/LnN0YXJ0c1dpdGgoXCIvc2lnbi1pblwiKSB8fCBjdHgucGF0aD8uc3RhcnRzV2l0aChcIi9zaWduLXVwXCIpIHx8IGN0eC5wYXRoPy5zdGFydHNXaXRoKFwiL2NhbGxiYWNrXCIpIHx8IGN0eC5wYXRoPy5zdGFydHNXaXRoKFwiL29hdXRoMi9jYWxsYmFja1wiKSB8fCBjdHgucGF0aD8uc3RhcnRzV2l0aChcIi9tYWdpYy1saW5rL3ZlcmlmeVwiKSB8fCBjdHgucGF0aD8uc3RhcnRzV2l0aChcIi9lbWFpbC1vdHAvdmVyaWZ5LWVtYWlsXCIpIHx8IGN0eC5wYXRoPy5zdGFydHNXaXRoKFwiL29uZS10YXAvY2FsbGJhY2tcIikgfHwgY3R4LnBhdGg/LnN0YXJ0c1dpdGgoXCIvcGFzc2tleS92ZXJpZnktYXV0aGVudGljYXRpb25cIikgfHwgY3R4LnBhdGg/LnN0YXJ0c1dpdGgoXCIvcGhvbmUtbnVtYmVyL3ZlcmlmeVwiKSB8fCBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNldENvb2tpZSA9IGN0eC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycz8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogV2UgY2FuIGNvbnNpZGVyIHRoZSB1c2VyIGlzIGFib3V0IHRvIHNpZ24gaW4gb3Igc2lnbiB1cFxuXHRcdFx0XHQqIGlmIHRoZSByZXNwb25zZSBjb250YWlucyBhIHNlc3Npb24gdG9rZW4uXG5cdFx0XHRcdCovXG5cdFx0XHRcdGNvbnN0IHNlc3Npb25Ub2tlbk5hbWUgPSBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcblx0XHRcdFx0aWYgKCFwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWUgfHwgXCJcIikuZ2V0KHNlc3Npb25Ub2tlbk5hbWUpPy52YWx1ZS5zcGxpdChcIi5cIilbMF0pIHJldHVybjtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogTWFrZSBzdXJlIHRoZSB1c2VyIGhhZCBhbiBhbm9ueW1vdXMgc2Vzc2lvbi5cblx0XHRcdFx0Ki9cblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCwgeyBkaXNhYmxlUmVmcmVzaDogdHJ1ZSB9KTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnVzZXIuaXNBbm9ueW1vdXMpIHJldHVybjtcblx0XHRcdFx0aWYgKGN0eC5wYXRoID09PSBcIi9zaWduLWluL2Fub255bW91c1wiICYmICFjdHguY29udGV4dC5uZXdTZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEFOT05ZTU9VU19FUlJPUl9DT0RFUy5BTk9OWU1PVVNfVVNFUlNfQ0FOTk9UX1NJR05fSU5fQUdBSU5fQU5PTllNT1VTTFkgfSk7XG5cdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBjdHguY29udGV4dC5uZXdTZXNzaW9uO1xuXHRcdFx0XHRpZiAoIW5ld1Nlc3Npb24pIHJldHVybjtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHtcblx0XHRcdFx0XHQuLi5zZXNzaW9uLnVzZXIsXG5cdFx0XHRcdFx0aXNBbm9ueW1vdXM6IHNlc3Npb24udXNlci5pc0Fub255bW91c1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAob3B0aW9ucz8ub25MaW5rQWNjb3VudCkgYXdhaXQgb3B0aW9ucz8ub25MaW5rQWNjb3VudD8uKHtcblx0XHRcdFx0XHRhbm9ueW1vdXNVc2VyOiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBzZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRuZXdVc2VyOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdGN0eFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgbmV3U2Vzc2lvblVzZXIgPSBuZXdTZXNzaW9uLnVzZXI7XG5cdFx0XHRcdGNvbnN0IGlzU2FtZVVzZXIgPSBuZXdTZXNzaW9uVXNlcj8uaWQgPT09IHNlc3Npb24udXNlci5pZDtcblx0XHRcdFx0Y29uc3QgbmV3U2Vzc2lvbklzQW5vbnltb3VzID0gQm9vbGVhbihuZXdTZXNzaW9uVXNlcj8uaXNBbm9ueW1vdXMpO1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZURlbGV0ZUFub255bW91c1VzZXIgfHwgaXNTYW1lVXNlciB8fCBuZXdTZXNzaW9uSXNBbm9ueW1vdXMpIHJldHVybjtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkKTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRvcHRpb25zLFxuXHRcdHNjaGVtYTogbWVyZ2VTY2hlbWEoc2NoZW1hLCBvcHRpb25zPy5zY2hlbWEpLFxuXHRcdCRFUlJPUl9DT0RFUzogQU5PTllNT1VTX0VSUk9SX0NPREVTXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFub255bW91cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/anonymous/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/anonymous/schema.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/anonymous/schema.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/anonymous/schema.ts\nconst schema = { user: { fields: { isAnonymous: {\n\ttype: \"boolean\",\n\trequired: false,\n\tinput: false,\n\tdefaultValue: false\n} } } };\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2Fub255bW91cy9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLGlCQUFpQixRQUFRLFVBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFub255bW91c1xcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvYW5vbnltb3VzL3NjaGVtYS50c1xuY29uc3Qgc2NoZW1hID0geyB1c2VyOiB7IGZpZWxkczogeyBpc0Fub255bW91czoge1xuXHR0eXBlOiBcImJvb2xlYW5cIixcblx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRpbnB1dDogZmFsc2UsXG5cdGRlZmF1bHRWYWx1ZTogZmFsc2Vcbn0gfSB9IH07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/anonymous/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/adapter.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   batchMigrateLegacyMetadata: () => (/* binding */ batchMigrateLegacyMetadata),\n/* harmony export */   deleteApiKey: () => (/* binding */ deleteApiKey),\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey),\n/* harmony export */   getApiKeyById: () => (/* binding */ getApiKeyById),\n/* harmony export */   listApiKeys: () => (/* binding */ listApiKeys),\n/* harmony export */   migrateDoubleStringifiedMetadata: () => (/* binding */ migrateDoubleStringifiedMetadata),\n/* harmony export */   parseDoubleStringifiedMetadata: () => (/* binding */ parseDoubleStringifiedMetadata),\n/* harmony export */   setApiKey: () => (/* binding */ setApiKey)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/api-key/adapter.ts\n/**\n* Parses double-stringified metadata synchronously without updating the database.\n* Use this for reading metadata, then call migrateLegacyMetadataInBackground for DB updates.\n*\n* @returns The properly parsed metadata object, or the original if already an object\n*/\nfunction parseDoubleStringifiedMetadata(metadata) {\n\tif (metadata == null) return null;\n\tif (typeof metadata === \"object\") return metadata;\n\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.safeJSONParse)(metadata);\n}\n/**\n* Checks if metadata needs migration (is a string instead of object)\n*/\nfunction needsMetadataMigration(metadata) {\n\treturn metadata != null && typeof metadata === \"string\";\n}\n/**\n* Batch migrates double-stringified metadata for multiple API keys.\n* Runs all updates in parallel to avoid N sequential database calls.\n*/\nasync function batchMigrateLegacyMetadata(ctx, apiKeys, opts) {\n\tif (opts.storage !== \"database\" && !opts.fallbackToDatabase) return;\n\tconst keysToMigrate = apiKeys.filter((key) => needsMetadataMigration(key.metadata));\n\tif (keysToMigrate.length === 0) return;\n\tconst migrationPromises = keysToMigrate.map(async (apiKey) => {\n\t\tconst parsed = parseDoubleStringifiedMetadata(apiKey.metadata);\n\t\ttry {\n\t\t\tawait ctx.context.adapter.update({\n\t\t\t\tmodel: \"apikey\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t}],\n\t\t\t\tupdate: { metadata: parsed }\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tctx.context.logger.warn(`Failed to migrate double-stringified metadata for API key ${apiKey.id}:`, error);\n\t\t}\n\t});\n\tawait Promise.all(migrationPromises);\n}\n/**\n* Migrates double-stringified metadata to properly parsed object.\n*\n* This handles legacy data where metadata was incorrectly double-stringified.\n* If metadata is a string (should be object after adapter's transform.output),\n* it parses it and optionally updates the database.\n*\n* @returns The properly parsed metadata object\n*/\nasync function migrateDoubleStringifiedMetadata(ctx, apiKey, opts) {\n\tconst parsed = parseDoubleStringifiedMetadata(apiKey.metadata);\n\tif (needsMetadataMigration(apiKey.metadata) && (opts.storage === \"database\" || opts.fallbackToDatabase)) try {\n\t\tawait ctx.context.adapter.update({\n\t\t\tmodel: \"apikey\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: apiKey.id\n\t\t\t}],\n\t\t\tupdate: { metadata: parsed }\n\t\t});\n\t} catch (error) {\n\t\tctx.context.logger.warn(`Failed to migrate double-stringified metadata for API key ${apiKey.id}:`, error);\n\t}\n\treturn parsed;\n}\n/**\n* Generate storage key for API key by hashed key\n*/\nfunction getStorageKeyByHashedKey(hashedKey) {\n\treturn `api-key:${hashedKey}`;\n}\n/**\n* Generate storage key for API key by ID\n*/\nfunction getStorageKeyById(id) {\n\treturn `api-key:by-id:${id}`;\n}\n/**\n* Generate storage key for user's API key list\n*/\nfunction getStorageKeyByUserId(userId) {\n\treturn `api-key:by-user:${userId}`;\n}\n/**\n* Serialize API key for storage\n*/\nfunction serializeApiKey(apiKey) {\n\treturn JSON.stringify({\n\t\t...apiKey,\n\t\tcreatedAt: apiKey.createdAt.toISOString(),\n\t\tupdatedAt: apiKey.updatedAt.toISOString(),\n\t\texpiresAt: apiKey.expiresAt?.toISOString() ?? null,\n\t\tlastRefillAt: apiKey.lastRefillAt?.toISOString() ?? null,\n\t\tlastRequest: apiKey.lastRequest?.toISOString() ?? null\n\t});\n}\n/**\n* Deserialize API key from storage\n*/\nfunction deserializeApiKey(data) {\n\tif (!data || typeof data !== \"string\") return null;\n\ttry {\n\t\tconst parsed = JSON.parse(data);\n\t\treturn {\n\t\t\t...parsed,\n\t\t\tcreatedAt: new Date(parsed.createdAt),\n\t\t\tupdatedAt: new Date(parsed.updatedAt),\n\t\t\texpiresAt: parsed.expiresAt ? new Date(parsed.expiresAt) : null,\n\t\t\tlastRefillAt: parsed.lastRefillAt ? new Date(parsed.lastRefillAt) : null,\n\t\t\tlastRequest: parsed.lastRequest ? new Date(parsed.lastRequest) : null\n\t\t};\n\t} catch {\n\t\treturn null;\n\t}\n}\n/**\n* Get the storage instance to use (custom methods take precedence)\n*/\nfunction getStorageInstance(ctx, opts) {\n\tif (opts.customStorage) return opts.customStorage;\n\treturn ctx.context.secondaryStorage || null;\n}\n/**\n* Calculate TTL in seconds for an API key\n*/\nfunction calculateTTL(apiKey) {\n\tif (apiKey.expiresAt) {\n\t\tconst now = Date.now();\n\t\tconst expiresAt = new Date(apiKey.expiresAt).getTime();\n\t\tconst ttlSeconds = Math.floor((expiresAt - now) / 1e3);\n\t\tif (ttlSeconds > 0) return ttlSeconds;\n\t}\n}\n/**\n* Get API key from secondary storage by hashed key\n*/\nasync function getApiKeyFromStorage(ctx, hashedKey, storage) {\n\tconst key = getStorageKeyByHashedKey(hashedKey);\n\treturn deserializeApiKey(await storage.get(key));\n}\n/**\n* Get API key from secondary storage by ID\n*/\nasync function getApiKeyByIdFromStorage(ctx, id, storage) {\n\tconst key = getStorageKeyById(id);\n\treturn deserializeApiKey(await storage.get(key));\n}\n/**\n* Store API key in secondary storage\n*/\nasync function setApiKeyInStorage(ctx, apiKey, storage, ttl) {\n\tconst serialized = serializeApiKey(apiKey);\n\tconst hashedKey = apiKey.key;\n\tconst id = apiKey.id;\n\tawait storage.set(getStorageKeyByHashedKey(hashedKey), serialized, ttl);\n\tawait storage.set(getStorageKeyById(id), serialized, ttl);\n\tconst userKey = getStorageKeyByUserId(apiKey.userId);\n\tconst userListData = await storage.get(userKey);\n\tlet userIds = [];\n\tif (userListData && typeof userListData === \"string\") try {\n\t\tuserIds = JSON.parse(userListData);\n\t} catch {\n\t\tuserIds = [];\n\t}\n\telse if (Array.isArray(userListData)) userIds = userListData;\n\tif (!userIds.includes(id)) {\n\t\tuserIds.push(id);\n\t\tawait storage.set(userKey, JSON.stringify(userIds));\n\t}\n}\n/**\n* Delete API key from secondary storage\n*/\nasync function deleteApiKeyFromStorage(ctx, apiKey, storage) {\n\tconst hashedKey = apiKey.key;\n\tconst id = apiKey.id;\n\tconst userId = apiKey.userId;\n\tawait storage.delete(getStorageKeyByHashedKey(hashedKey));\n\tawait storage.delete(getStorageKeyById(id));\n\tconst userKey = getStorageKeyByUserId(userId);\n\tconst userListData = await storage.get(userKey);\n\tlet userIds = [];\n\tif (userListData && typeof userListData === \"string\") try {\n\t\tuserIds = JSON.parse(userListData);\n\t} catch {\n\t\tuserIds = [];\n\t}\n\telse if (Array.isArray(userListData)) userIds = userListData;\n\tconst filteredIds = userIds.filter((keyId) => keyId !== id);\n\tif (filteredIds.length === 0) await storage.delete(userKey);\n\telse await storage.set(userKey, JSON.stringify(filteredIds));\n}\n/**\n* Unified getter for API keys with support for all storage modes\n*/\nasync function getApiKey(ctx, hashedKey, opts) {\n\tconst storage = getStorageInstance(ctx, opts);\n\tif (opts.storage === \"database\") return await ctx.context.adapter.findOne({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"key\",\n\t\t\tvalue: hashedKey\n\t\t}]\n\t});\n\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\tif (storage) {\n\t\t\tconst cached = await getApiKeyFromStorage(ctx, hashedKey, storage);\n\t\t\tif (cached) return cached;\n\t\t}\n\t\tconst dbKey = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"apikey\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"key\",\n\t\t\t\tvalue: hashedKey\n\t\t\t}]\n\t\t});\n\t\tif (dbKey && storage) await setApiKeyInStorage(ctx, dbKey, storage, calculateTTL(dbKey));\n\t\treturn dbKey;\n\t}\n\tif (opts.storage === \"secondary-storage\") {\n\t\tif (!storage) return null;\n\t\treturn await getApiKeyFromStorage(ctx, hashedKey, storage);\n\t}\n\treturn await ctx.context.adapter.findOne({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"key\",\n\t\t\tvalue: hashedKey\n\t\t}]\n\t});\n}\n/**\n* Unified getter for API keys by ID\n*/\nasync function getApiKeyById(ctx, id, opts) {\n\tconst storage = getStorageInstance(ctx, opts);\n\tif (opts.storage === \"database\") return await ctx.context.adapter.findOne({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"id\",\n\t\t\tvalue: id\n\t\t}]\n\t});\n\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\tif (storage) {\n\t\t\tconst cached = await getApiKeyByIdFromStorage(ctx, id, storage);\n\t\t\tif (cached) return cached;\n\t\t}\n\t\tconst dbKey = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"apikey\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}]\n\t\t});\n\t\tif (dbKey && storage) await setApiKeyInStorage(ctx, dbKey, storage, calculateTTL(dbKey));\n\t\treturn dbKey;\n\t}\n\tif (opts.storage === \"secondary-storage\") {\n\t\tif (!storage) return null;\n\t\treturn await getApiKeyByIdFromStorage(ctx, id, storage);\n\t}\n\treturn await ctx.context.adapter.findOne({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"id\",\n\t\t\tvalue: id\n\t\t}]\n\t});\n}\n/**\n* Unified setter for API keys with support for all storage modes\n*/\nasync function setApiKey(ctx, apiKey, opts) {\n\tconst storage = getStorageInstance(ctx, opts);\n\tconst ttl = calculateTTL(apiKey);\n\tif (opts.storage === \"database\") return;\n\tif (opts.storage === \"secondary-storage\") {\n\t\tif (!storage) throw new Error(\"Secondary storage is required when storage mode is 'secondary-storage'\");\n\t\tawait setApiKeyInStorage(ctx, apiKey, storage, ttl);\n\t\treturn;\n\t}\n}\n/**\n* Unified deleter for API keys with support for all storage modes\n*/\nasync function deleteApiKey(ctx, apiKey, opts) {\n\tconst storage = getStorageInstance(ctx, opts);\n\tif (opts.storage === \"database\") return;\n\tif (opts.storage === \"secondary-storage\") {\n\t\tif (!storage) throw new Error(\"Secondary storage is required when storage mode is 'secondary-storage'\");\n\t\tawait deleteApiKeyFromStorage(ctx, apiKey, storage);\n\t\treturn;\n\t}\n}\n/**\n* List API keys for a user with support for all storage modes\n*/\nasync function listApiKeys(ctx, userId, opts) {\n\tconst storage = getStorageInstance(ctx, opts);\n\tif (opts.storage === \"database\") return await ctx.context.adapter.findMany({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"userId\",\n\t\t\tvalue: userId\n\t\t}]\n\t});\n\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\tconst userKey = getStorageKeyByUserId(userId);\n\t\tif (storage) {\n\t\t\tconst userListData = await storage.get(userKey);\n\t\t\tlet userIds = [];\n\t\t\tif (userListData && typeof userListData === \"string\") try {\n\t\t\t\tuserIds = JSON.parse(userListData);\n\t\t\t} catch {\n\t\t\t\tuserIds = [];\n\t\t\t}\n\t\t\telse if (Array.isArray(userListData)) userIds = userListData;\n\t\t\tif (userIds.length > 0) {\n\t\t\t\tconst apiKeys = [];\n\t\t\t\tfor (const id of userIds) {\n\t\t\t\t\tconst apiKey = await getApiKeyByIdFromStorage(ctx, id, storage);\n\t\t\t\t\tif (apiKey) apiKeys.push(apiKey);\n\t\t\t\t}\n\t\t\t\treturn apiKeys;\n\t\t\t}\n\t\t}\n\t\tconst dbKeys = await ctx.context.adapter.findMany({\n\t\t\tmodel: \"apikey\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}]\n\t\t});\n\t\tif (storage && dbKeys.length > 0) {\n\t\t\tconst userIds = [];\n\t\t\tfor (const apiKey of dbKeys) {\n\t\t\t\tawait setApiKeyInStorage(ctx, apiKey, storage, calculateTTL(apiKey));\n\t\t\t\tuserIds.push(apiKey.id);\n\t\t\t}\n\t\t\tawait storage.set(userKey, JSON.stringify(userIds));\n\t\t}\n\t\treturn dbKeys;\n\t}\n\tif (opts.storage === \"secondary-storage\") {\n\t\tif (!storage) return [];\n\t\tconst userKey = getStorageKeyByUserId(userId);\n\t\tconst userListData = await storage.get(userKey);\n\t\tlet userIds = [];\n\t\tif (userListData && typeof userListData === \"string\") try {\n\t\t\tuserIds = JSON.parse(userListData);\n\t\t} catch {\n\t\t\treturn [];\n\t\t}\n\t\telse if (Array.isArray(userListData)) userIds = userListData;\n\t\telse return [];\n\t\tconst apiKeys = [];\n\t\tfor (const id of userIds) {\n\t\t\tconst apiKey = await getApiKeyByIdFromStorage(ctx, id, storage);\n\t\t\tif (apiKey) apiKeys.push(apiKey);\n\t\t}\n\t\treturn apiKeys;\n\t}\n\treturn await ctx.context.adapter.findMany({\n\t\tmodel: \"apikey\",\n\t\twhere: [{\n\t\t\tfield: \"userId\",\n\t\t\tvalue: userId\n\t\t}]\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdEOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0VBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjO0FBQ2QsSUFBSTtBQUNKLElBQUk7QUFDSix3RkFBd0YsVUFBVTtBQUNsRztBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhO0FBQ2IsR0FBRztBQUNILEdBQUc7QUFDSCx1RkFBdUYsVUFBVTtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsR0FBRztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7O0FBRUE7QUFDd0s7QUFDeEsiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhcGkta2V5XFxhZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L2FkYXB0ZXIudHNcbi8qKlxuKiBQYXJzZXMgZG91YmxlLXN0cmluZ2lmaWVkIG1ldGFkYXRhIHN5bmNocm9ub3VzbHkgd2l0aG91dCB1cGRhdGluZyB0aGUgZGF0YWJhc2UuXG4qIFVzZSB0aGlzIGZvciByZWFkaW5nIG1ldGFkYXRhLCB0aGVuIGNhbGwgbWlncmF0ZUxlZ2FjeU1ldGFkYXRhSW5CYWNrZ3JvdW5kIGZvciBEQiB1cGRhdGVzLlxuKlxuKiBAcmV0dXJucyBUaGUgcHJvcGVybHkgcGFyc2VkIG1ldGFkYXRhIG9iamVjdCwgb3IgdGhlIG9yaWdpbmFsIGlmIGFscmVhZHkgYW4gb2JqZWN0XG4qL1xuZnVuY3Rpb24gcGFyc2VEb3VibGVTdHJpbmdpZmllZE1ldGFkYXRhKG1ldGFkYXRhKSB7XG5cdGlmIChtZXRhZGF0YSA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0aWYgKHR5cGVvZiBtZXRhZGF0YSA9PT0gXCJvYmplY3RcIikgcmV0dXJuIG1ldGFkYXRhO1xuXHRyZXR1cm4gc2FmZUpTT05QYXJzZShtZXRhZGF0YSk7XG59XG4vKipcbiogQ2hlY2tzIGlmIG1ldGFkYXRhIG5lZWRzIG1pZ3JhdGlvbiAoaXMgYSBzdHJpbmcgaW5zdGVhZCBvZiBvYmplY3QpXG4qL1xuZnVuY3Rpb24gbmVlZHNNZXRhZGF0YU1pZ3JhdGlvbihtZXRhZGF0YSkge1xuXHRyZXR1cm4gbWV0YWRhdGEgIT0gbnVsbCAmJiB0eXBlb2YgbWV0YWRhdGEgPT09IFwic3RyaW5nXCI7XG59XG4vKipcbiogQmF0Y2ggbWlncmF0ZXMgZG91YmxlLXN0cmluZ2lmaWVkIG1ldGFkYXRhIGZvciBtdWx0aXBsZSBBUEkga2V5cy5cbiogUnVucyBhbGwgdXBkYXRlcyBpbiBwYXJhbGxlbCB0byBhdm9pZCBOIHNlcXVlbnRpYWwgZGF0YWJhc2UgY2FsbHMuXG4qL1xuYXN5bmMgZnVuY3Rpb24gYmF0Y2hNaWdyYXRlTGVnYWN5TWV0YWRhdGEoY3R4LCBhcGlLZXlzLCBvcHRzKSB7XG5cdGlmIChvcHRzLnN0b3JhZ2UgIT09IFwiZGF0YWJhc2VcIiAmJiAhb3B0cy5mYWxsYmFja1RvRGF0YWJhc2UpIHJldHVybjtcblx0Y29uc3Qga2V5c1RvTWlncmF0ZSA9IGFwaUtleXMuZmlsdGVyKChrZXkpID0+IG5lZWRzTWV0YWRhdGFNaWdyYXRpb24oa2V5Lm1ldGFkYXRhKSk7XG5cdGlmIChrZXlzVG9NaWdyYXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRjb25zdCBtaWdyYXRpb25Qcm9taXNlcyA9IGtleXNUb01pZ3JhdGUubWFwKGFzeW5jIChhcGlLZXkpID0+IHtcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZURvdWJsZVN0cmluZ2lmaWVkTWV0YWRhdGEoYXBpS2V5Lm1ldGFkYXRhKTtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0XHRtb2RlbDogXCJhcGlrZXlcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogYXBpS2V5LmlkXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHR1cGRhdGU6IHsgbWV0YWRhdGE6IHBhcnNlZCB9XG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLndhcm4oYEZhaWxlZCB0byBtaWdyYXRlIGRvdWJsZS1zdHJpbmdpZmllZCBtZXRhZGF0YSBmb3IgQVBJIGtleSAke2FwaUtleS5pZH06YCwgZXJyb3IpO1xuXHRcdH1cblx0fSk7XG5cdGF3YWl0IFByb21pc2UuYWxsKG1pZ3JhdGlvblByb21pc2VzKTtcbn1cbi8qKlxuKiBNaWdyYXRlcyBkb3VibGUtc3RyaW5naWZpZWQgbWV0YWRhdGEgdG8gcHJvcGVybHkgcGFyc2VkIG9iamVjdC5cbipcbiogVGhpcyBoYW5kbGVzIGxlZ2FjeSBkYXRhIHdoZXJlIG1ldGFkYXRhIHdhcyBpbmNvcnJlY3RseSBkb3VibGUtc3RyaW5naWZpZWQuXG4qIElmIG1ldGFkYXRhIGlzIGEgc3RyaW5nIChzaG91bGQgYmUgb2JqZWN0IGFmdGVyIGFkYXB0ZXIncyB0cmFuc2Zvcm0ub3V0cHV0KSxcbiogaXQgcGFyc2VzIGl0IGFuZCBvcHRpb25hbGx5IHVwZGF0ZXMgdGhlIGRhdGFiYXNlLlxuKlxuKiBAcmV0dXJucyBUaGUgcHJvcGVybHkgcGFyc2VkIG1ldGFkYXRhIG9iamVjdFxuKi9cbmFzeW5jIGZ1bmN0aW9uIG1pZ3JhdGVEb3VibGVTdHJpbmdpZmllZE1ldGFkYXRhKGN0eCwgYXBpS2V5LCBvcHRzKSB7XG5cdGNvbnN0IHBhcnNlZCA9IHBhcnNlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YShhcGlLZXkubWV0YWRhdGEpO1xuXHRpZiAobmVlZHNNZXRhZGF0YU1pZ3JhdGlvbihhcGlLZXkubWV0YWRhdGEpICYmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIiB8fCBvcHRzLmZhbGxiYWNrVG9EYXRhYmFzZSkpIHRyeSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0bW9kZWw6IFwiYXBpa2V5XCIsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0fV0sXG5cdFx0XHR1cGRhdGU6IHsgbWV0YWRhdGE6IHBhcnNlZCB9XG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLndhcm4oYEZhaWxlZCB0byBtaWdyYXRlIGRvdWJsZS1zdHJpbmdpZmllZCBtZXRhZGF0YSBmb3IgQVBJIGtleSAke2FwaUtleS5pZH06YCwgZXJyb3IpO1xuXHR9XG5cdHJldHVybiBwYXJzZWQ7XG59XG4vKipcbiogR2VuZXJhdGUgc3RvcmFnZSBrZXkgZm9yIEFQSSBrZXkgYnkgaGFzaGVkIGtleVxuKi9cbmZ1bmN0aW9uIGdldFN0b3JhZ2VLZXlCeUhhc2hlZEtleShoYXNoZWRLZXkpIHtcblx0cmV0dXJuIGBhcGkta2V5OiR7aGFzaGVkS2V5fWA7XG59XG4vKipcbiogR2VuZXJhdGUgc3RvcmFnZSBrZXkgZm9yIEFQSSBrZXkgYnkgSURcbiovXG5mdW5jdGlvbiBnZXRTdG9yYWdlS2V5QnlJZChpZCkge1xuXHRyZXR1cm4gYGFwaS1rZXk6YnktaWQ6JHtpZH1gO1xufVxuLyoqXG4qIEdlbmVyYXRlIHN0b3JhZ2Uga2V5IGZvciB1c2VyJ3MgQVBJIGtleSBsaXN0XG4qL1xuZnVuY3Rpb24gZ2V0U3RvcmFnZUtleUJ5VXNlcklkKHVzZXJJZCkge1xuXHRyZXR1cm4gYGFwaS1rZXk6YnktdXNlcjoke3VzZXJJZH1gO1xufVxuLyoqXG4qIFNlcmlhbGl6ZSBBUEkga2V5IGZvciBzdG9yYWdlXG4qL1xuZnVuY3Rpb24gc2VyaWFsaXplQXBpS2V5KGFwaUtleSkge1xuXHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuXHRcdC4uLmFwaUtleSxcblx0XHRjcmVhdGVkQXQ6IGFwaUtleS5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcblx0XHR1cGRhdGVkQXQ6IGFwaUtleS51cGRhdGVkQXQudG9JU09TdHJpbmcoKSxcblx0XHRleHBpcmVzQXQ6IGFwaUtleS5leHBpcmVzQXQ/LnRvSVNPU3RyaW5nKCkgPz8gbnVsbCxcblx0XHRsYXN0UmVmaWxsQXQ6IGFwaUtleS5sYXN0UmVmaWxsQXQ/LnRvSVNPU3RyaW5nKCkgPz8gbnVsbCxcblx0XHRsYXN0UmVxdWVzdDogYXBpS2V5Lmxhc3RSZXF1ZXN0Py50b0lTT1N0cmluZygpID8/IG51bGxcblx0fSk7XG59XG4vKipcbiogRGVzZXJpYWxpemUgQVBJIGtleSBmcm9tIHN0b3JhZ2VcbiovXG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUFwaUtleShkYXRhKSB7XG5cdGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShkYXRhKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4ucGFyc2VkLFxuXHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShwYXJzZWQuY3JlYXRlZEF0KSxcblx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocGFyc2VkLnVwZGF0ZWRBdCksXG5cdFx0XHRleHBpcmVzQXQ6IHBhcnNlZC5leHBpcmVzQXQgPyBuZXcgRGF0ZShwYXJzZWQuZXhwaXJlc0F0KSA6IG51bGwsXG5cdFx0XHRsYXN0UmVmaWxsQXQ6IHBhcnNlZC5sYXN0UmVmaWxsQXQgPyBuZXcgRGF0ZShwYXJzZWQubGFzdFJlZmlsbEF0KSA6IG51bGwsXG5cdFx0XHRsYXN0UmVxdWVzdDogcGFyc2VkLmxhc3RSZXF1ZXN0ID8gbmV3IERhdGUocGFyc2VkLmxhc3RSZXF1ZXN0KSA6IG51bGxcblx0XHR9O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuLyoqXG4qIEdldCB0aGUgc3RvcmFnZSBpbnN0YW5jZSB0byB1c2UgKGN1c3RvbSBtZXRob2RzIHRha2UgcHJlY2VkZW5jZSlcbiovXG5mdW5jdGlvbiBnZXRTdG9yYWdlSW5zdGFuY2UoY3R4LCBvcHRzKSB7XG5cdGlmIChvcHRzLmN1c3RvbVN0b3JhZ2UpIHJldHVybiBvcHRzLmN1c3RvbVN0b3JhZ2U7XG5cdHJldHVybiBjdHguY29udGV4dC5zZWNvbmRhcnlTdG9yYWdlIHx8IG51bGw7XG59XG4vKipcbiogQ2FsY3VsYXRlIFRUTCBpbiBzZWNvbmRzIGZvciBhbiBBUEkga2V5XG4qL1xuZnVuY3Rpb24gY2FsY3VsYXRlVFRMKGFwaUtleSkge1xuXHRpZiAoYXBpS2V5LmV4cGlyZXNBdCkge1xuXHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0Y29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoYXBpS2V5LmV4cGlyZXNBdCkuZ2V0VGltZSgpO1xuXHRcdGNvbnN0IHR0bFNlY29uZHMgPSBNYXRoLmZsb29yKChleHBpcmVzQXQgLSBub3cpIC8gMWUzKTtcblx0XHRpZiAodHRsU2Vjb25kcyA+IDApIHJldHVybiB0dGxTZWNvbmRzO1xuXHR9XG59XG4vKipcbiogR2V0IEFQSSBrZXkgZnJvbSBzZWNvbmRhcnkgc3RvcmFnZSBieSBoYXNoZWQga2V5XG4qL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QXBpS2V5RnJvbVN0b3JhZ2UoY3R4LCBoYXNoZWRLZXksIHN0b3JhZ2UpIHtcblx0Y29uc3Qga2V5ID0gZ2V0U3RvcmFnZUtleUJ5SGFzaGVkS2V5KGhhc2hlZEtleSk7XG5cdHJldHVybiBkZXNlcmlhbGl6ZUFwaUtleShhd2FpdCBzdG9yYWdlLmdldChrZXkpKTtcbn1cbi8qKlxuKiBHZXQgQVBJIGtleSBmcm9tIHNlY29uZGFyeSBzdG9yYWdlIGJ5IElEXG4qL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QXBpS2V5QnlJZEZyb21TdG9yYWdlKGN0eCwgaWQsIHN0b3JhZ2UpIHtcblx0Y29uc3Qga2V5ID0gZ2V0U3RvcmFnZUtleUJ5SWQoaWQpO1xuXHRyZXR1cm4gZGVzZXJpYWxpemVBcGlLZXkoYXdhaXQgc3RvcmFnZS5nZXQoa2V5KSk7XG59XG4vKipcbiogU3RvcmUgQVBJIGtleSBpbiBzZWNvbmRhcnkgc3RvcmFnZVxuKi9cbmFzeW5jIGZ1bmN0aW9uIHNldEFwaUtleUluU3RvcmFnZShjdHgsIGFwaUtleSwgc3RvcmFnZSwgdHRsKSB7XG5cdGNvbnN0IHNlcmlhbGl6ZWQgPSBzZXJpYWxpemVBcGlLZXkoYXBpS2V5KTtcblx0Y29uc3QgaGFzaGVkS2V5ID0gYXBpS2V5LmtleTtcblx0Y29uc3QgaWQgPSBhcGlLZXkuaWQ7XG5cdGF3YWl0IHN0b3JhZ2Uuc2V0KGdldFN0b3JhZ2VLZXlCeUhhc2hlZEtleShoYXNoZWRLZXkpLCBzZXJpYWxpemVkLCB0dGwpO1xuXHRhd2FpdCBzdG9yYWdlLnNldChnZXRTdG9yYWdlS2V5QnlJZChpZCksIHNlcmlhbGl6ZWQsIHR0bCk7XG5cdGNvbnN0IHVzZXJLZXkgPSBnZXRTdG9yYWdlS2V5QnlVc2VySWQoYXBpS2V5LnVzZXJJZCk7XG5cdGNvbnN0IHVzZXJMaXN0RGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0KHVzZXJLZXkpO1xuXHRsZXQgdXNlcklkcyA9IFtdO1xuXHRpZiAodXNlckxpc3REYXRhICYmIHR5cGVvZiB1c2VyTGlzdERhdGEgPT09IFwic3RyaW5nXCIpIHRyeSB7XG5cdFx0dXNlcklkcyA9IEpTT04ucGFyc2UodXNlckxpc3REYXRhKTtcblx0fSBjYXRjaCB7XG5cdFx0dXNlcklkcyA9IFtdO1xuXHR9XG5cdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodXNlckxpc3REYXRhKSkgdXNlcklkcyA9IHVzZXJMaXN0RGF0YTtcblx0aWYgKCF1c2VySWRzLmluY2x1ZGVzKGlkKSkge1xuXHRcdHVzZXJJZHMucHVzaChpZCk7XG5cdFx0YXdhaXQgc3RvcmFnZS5zZXQodXNlcktleSwgSlNPTi5zdHJpbmdpZnkodXNlcklkcykpO1xuXHR9XG59XG4vKipcbiogRGVsZXRlIEFQSSBrZXkgZnJvbSBzZWNvbmRhcnkgc3RvcmFnZVxuKi9cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwaUtleUZyb21TdG9yYWdlKGN0eCwgYXBpS2V5LCBzdG9yYWdlKSB7XG5cdGNvbnN0IGhhc2hlZEtleSA9IGFwaUtleS5rZXk7XG5cdGNvbnN0IGlkID0gYXBpS2V5LmlkO1xuXHRjb25zdCB1c2VySWQgPSBhcGlLZXkudXNlcklkO1xuXHRhd2FpdCBzdG9yYWdlLmRlbGV0ZShnZXRTdG9yYWdlS2V5QnlIYXNoZWRLZXkoaGFzaGVkS2V5KSk7XG5cdGF3YWl0IHN0b3JhZ2UuZGVsZXRlKGdldFN0b3JhZ2VLZXlCeUlkKGlkKSk7XG5cdGNvbnN0IHVzZXJLZXkgPSBnZXRTdG9yYWdlS2V5QnlVc2VySWQodXNlcklkKTtcblx0Y29uc3QgdXNlckxpc3REYXRhID0gYXdhaXQgc3RvcmFnZS5nZXQodXNlcktleSk7XG5cdGxldCB1c2VySWRzID0gW107XG5cdGlmICh1c2VyTGlzdERhdGEgJiYgdHlwZW9mIHVzZXJMaXN0RGF0YSA9PT0gXCJzdHJpbmdcIikgdHJ5IHtcblx0XHR1c2VySWRzID0gSlNPTi5wYXJzZSh1c2VyTGlzdERhdGEpO1xuXHR9IGNhdGNoIHtcblx0XHR1c2VySWRzID0gW107XG5cdH1cblx0ZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh1c2VyTGlzdERhdGEpKSB1c2VySWRzID0gdXNlckxpc3REYXRhO1xuXHRjb25zdCBmaWx0ZXJlZElkcyA9IHVzZXJJZHMuZmlsdGVyKChrZXlJZCkgPT4ga2V5SWQgIT09IGlkKTtcblx0aWYgKGZpbHRlcmVkSWRzLmxlbmd0aCA9PT0gMCkgYXdhaXQgc3RvcmFnZS5kZWxldGUodXNlcktleSk7XG5cdGVsc2UgYXdhaXQgc3RvcmFnZS5zZXQodXNlcktleSwgSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWRJZHMpKTtcbn1cbi8qKlxuKiBVbmlmaWVkIGdldHRlciBmb3IgQVBJIGtleXMgd2l0aCBzdXBwb3J0IGZvciBhbGwgc3RvcmFnZSBtb2Rlc1xuKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEFwaUtleShjdHgsIGhhc2hlZEtleSwgb3B0cykge1xuXHRjb25zdCBzdG9yYWdlID0gZ2V0U3RvcmFnZUluc3RhbmNlKGN0eCwgb3B0cyk7XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgcmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwiYXBpa2V5XCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJrZXlcIixcblx0XHRcdHZhbHVlOiBoYXNoZWRLZXlcblx0XHR9XVxuXHR9KTtcblx0aWYgKG9wdHMuc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiICYmIG9wdHMuZmFsbGJhY2tUb0RhdGFiYXNlKSB7XG5cdFx0aWYgKHN0b3JhZ2UpIHtcblx0XHRcdGNvbnN0IGNhY2hlZCA9IGF3YWl0IGdldEFwaUtleUZyb21TdG9yYWdlKGN0eCwgaGFzaGVkS2V5LCBzdG9yYWdlKTtcblx0XHRcdGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cdFx0fVxuXHRcdGNvbnN0IGRiS2V5ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcImFwaWtleVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcImtleVwiLFxuXHRcdFx0XHR2YWx1ZTogaGFzaGVkS2V5XG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdGlmIChkYktleSAmJiBzdG9yYWdlKSBhd2FpdCBzZXRBcGlLZXlJblN0b3JhZ2UoY3R4LCBkYktleSwgc3RvcmFnZSwgY2FsY3VsYXRlVFRMKGRiS2V5KSk7XG5cdFx0cmV0dXJuIGRiS2V5O1xuXHR9XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIikge1xuXHRcdGlmICghc3RvcmFnZSkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIGF3YWl0IGdldEFwaUtleUZyb21TdG9yYWdlKGN0eCwgaGFzaGVkS2V5LCBzdG9yYWdlKTtcblx0fVxuXHRyZXR1cm4gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJhcGlrZXlcIixcblx0XHR3aGVyZTogW3tcblx0XHRcdGZpZWxkOiBcImtleVwiLFxuXHRcdFx0dmFsdWU6IGhhc2hlZEtleVxuXHRcdH1dXG5cdH0pO1xufVxuLyoqXG4qIFVuaWZpZWQgZ2V0dGVyIGZvciBBUEkga2V5cyBieSBJRFxuKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEFwaUtleUJ5SWQoY3R4LCBpZCwgb3B0cykge1xuXHRjb25zdCBzdG9yYWdlID0gZ2V0U3RvcmFnZUluc3RhbmNlKGN0eCwgb3B0cyk7XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgcmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwiYXBpa2V5XCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0dmFsdWU6IGlkXG5cdFx0fV1cblx0fSk7XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIiAmJiBvcHRzLmZhbGxiYWNrVG9EYXRhYmFzZSkge1xuXHRcdGlmIChzdG9yYWdlKSB7XG5cdFx0XHRjb25zdCBjYWNoZWQgPSBhd2FpdCBnZXRBcGlLZXlCeUlkRnJvbVN0b3JhZ2UoY3R4LCBpZCwgc3RvcmFnZSk7XG5cdFx0XHRpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xuXHRcdH1cblx0XHRjb25zdCBkYktleSA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRtb2RlbDogXCJhcGlrZXlcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogaWRcblx0XHRcdH1dXG5cdFx0fSk7XG5cdFx0aWYgKGRiS2V5ICYmIHN0b3JhZ2UpIGF3YWl0IHNldEFwaUtleUluU3RvcmFnZShjdHgsIGRiS2V5LCBzdG9yYWdlLCBjYWxjdWxhdGVUVEwoZGJLZXkpKTtcblx0XHRyZXR1cm4gZGJLZXk7XG5cdH1cblx0aWYgKG9wdHMuc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiKSB7XG5cdFx0aWYgKCFzdG9yYWdlKSByZXR1cm4gbnVsbDtcblx0XHRyZXR1cm4gYXdhaXQgZ2V0QXBpS2V5QnlJZEZyb21TdG9yYWdlKGN0eCwgaWQsIHN0b3JhZ2UpO1xuXHR9XG5cdHJldHVybiBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdG1vZGVsOiBcImFwaWtleVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdHZhbHVlOiBpZFxuXHRcdH1dXG5cdH0pO1xufVxuLyoqXG4qIFVuaWZpZWQgc2V0dGVyIGZvciBBUEkga2V5cyB3aXRoIHN1cHBvcnQgZm9yIGFsbCBzdG9yYWdlIG1vZGVzXG4qL1xuYXN5bmMgZnVuY3Rpb24gc2V0QXBpS2V5KGN0eCwgYXBpS2V5LCBvcHRzKSB7XG5cdGNvbnN0IHN0b3JhZ2UgPSBnZXRTdG9yYWdlSW5zdGFuY2UoY3R4LCBvcHRzKTtcblx0Y29uc3QgdHRsID0gY2FsY3VsYXRlVFRMKGFwaUtleSk7XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgcmV0dXJuO1xuXHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIpIHtcblx0XHRpZiAoIXN0b3JhZ2UpIHRocm93IG5ldyBFcnJvcihcIlNlY29uZGFyeSBzdG9yYWdlIGlzIHJlcXVpcmVkIHdoZW4gc3RvcmFnZSBtb2RlIGlzICdzZWNvbmRhcnktc3RvcmFnZSdcIik7XG5cdFx0YXdhaXQgc2V0QXBpS2V5SW5TdG9yYWdlKGN0eCwgYXBpS2V5LCBzdG9yYWdlLCB0dGwpO1xuXHRcdHJldHVybjtcblx0fVxufVxuLyoqXG4qIFVuaWZpZWQgZGVsZXRlciBmb3IgQVBJIGtleXMgd2l0aCBzdXBwb3J0IGZvciBhbGwgc3RvcmFnZSBtb2Rlc1xuKi9cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwaUtleShjdHgsIGFwaUtleSwgb3B0cykge1xuXHRjb25zdCBzdG9yYWdlID0gZ2V0U3RvcmFnZUluc3RhbmNlKGN0eCwgb3B0cyk7XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgcmV0dXJuO1xuXHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIpIHtcblx0XHRpZiAoIXN0b3JhZ2UpIHRocm93IG5ldyBFcnJvcihcIlNlY29uZGFyeSBzdG9yYWdlIGlzIHJlcXVpcmVkIHdoZW4gc3RvcmFnZSBtb2RlIGlzICdzZWNvbmRhcnktc3RvcmFnZSdcIik7XG5cdFx0YXdhaXQgZGVsZXRlQXBpS2V5RnJvbVN0b3JhZ2UoY3R4LCBhcGlLZXksIHN0b3JhZ2UpO1xuXHRcdHJldHVybjtcblx0fVxufVxuLyoqXG4qIExpc3QgQVBJIGtleXMgZm9yIGEgdXNlciB3aXRoIHN1cHBvcnQgZm9yIGFsbCBzdG9yYWdlIG1vZGVzXG4qL1xuYXN5bmMgZnVuY3Rpb24gbGlzdEFwaUtleXMoY3R4LCB1c2VySWQsIG9wdHMpIHtcblx0Y29uc3Qgc3RvcmFnZSA9IGdldFN0b3JhZ2VJbnN0YW5jZShjdHgsIG9wdHMpO1xuXHRpZiAob3B0cy5zdG9yYWdlID09PSBcImRhdGFiYXNlXCIpIHJldHVybiBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRNYW55KHtcblx0XHRtb2RlbDogXCJhcGlrZXlcIixcblx0XHR3aGVyZTogW3tcblx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdH1dXG5cdH0pO1xuXHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIgJiYgb3B0cy5mYWxsYmFja1RvRGF0YWJhc2UpIHtcblx0XHRjb25zdCB1c2VyS2V5ID0gZ2V0U3RvcmFnZUtleUJ5VXNlcklkKHVzZXJJZCk7XG5cdFx0aWYgKHN0b3JhZ2UpIHtcblx0XHRcdGNvbnN0IHVzZXJMaXN0RGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0KHVzZXJLZXkpO1xuXHRcdFx0bGV0IHVzZXJJZHMgPSBbXTtcblx0XHRcdGlmICh1c2VyTGlzdERhdGEgJiYgdHlwZW9mIHVzZXJMaXN0RGF0YSA9PT0gXCJzdHJpbmdcIikgdHJ5IHtcblx0XHRcdFx0dXNlcklkcyA9IEpTT04ucGFyc2UodXNlckxpc3REYXRhKTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHR1c2VySWRzID0gW107XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KHVzZXJMaXN0RGF0YSkpIHVzZXJJZHMgPSB1c2VyTGlzdERhdGE7XG5cdFx0XHRpZiAodXNlcklkcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGFwaUtleXMgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBpZCBvZiB1c2VySWRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYXBpS2V5ID0gYXdhaXQgZ2V0QXBpS2V5QnlJZEZyb21TdG9yYWdlKGN0eCwgaWQsIHN0b3JhZ2UpO1xuXHRcdFx0XHRcdGlmIChhcGlLZXkpIGFwaUtleXMucHVzaChhcGlLZXkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBhcGlLZXlzO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBkYktleXMgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRNYW55KHtcblx0XHRcdG1vZGVsOiBcImFwaWtleVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdGlmIChzdG9yYWdlICYmIGRiS2V5cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCB1c2VySWRzID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IGFwaUtleSBvZiBkYktleXMpIHtcblx0XHRcdFx0YXdhaXQgc2V0QXBpS2V5SW5TdG9yYWdlKGN0eCwgYXBpS2V5LCBzdG9yYWdlLCBjYWxjdWxhdGVUVEwoYXBpS2V5KSk7XG5cdFx0XHRcdHVzZXJJZHMucHVzaChhcGlLZXkuaWQpO1xuXHRcdFx0fVxuXHRcdFx0YXdhaXQgc3RvcmFnZS5zZXQodXNlcktleSwgSlNPTi5zdHJpbmdpZnkodXNlcklkcykpO1xuXHRcdH1cblx0XHRyZXR1cm4gZGJLZXlzO1xuXHR9XG5cdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIikge1xuXHRcdGlmICghc3RvcmFnZSkgcmV0dXJuIFtdO1xuXHRcdGNvbnN0IHVzZXJLZXkgPSBnZXRTdG9yYWdlS2V5QnlVc2VySWQodXNlcklkKTtcblx0XHRjb25zdCB1c2VyTGlzdERhdGEgPSBhd2FpdCBzdG9yYWdlLmdldCh1c2VyS2V5KTtcblx0XHRsZXQgdXNlcklkcyA9IFtdO1xuXHRcdGlmICh1c2VyTGlzdERhdGEgJiYgdHlwZW9mIHVzZXJMaXN0RGF0YSA9PT0gXCJzdHJpbmdcIikgdHJ5IHtcblx0XHRcdHVzZXJJZHMgPSBKU09OLnBhcnNlKHVzZXJMaXN0RGF0YSk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHRcdGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodXNlckxpc3REYXRhKSkgdXNlcklkcyA9IHVzZXJMaXN0RGF0YTtcblx0XHRlbHNlIHJldHVybiBbXTtcblx0XHRjb25zdCBhcGlLZXlzID0gW107XG5cdFx0Zm9yIChjb25zdCBpZCBvZiB1c2VySWRzKSB7XG5cdFx0XHRjb25zdCBhcGlLZXkgPSBhd2FpdCBnZXRBcGlLZXlCeUlkRnJvbVN0b3JhZ2UoY3R4LCBpZCwgc3RvcmFnZSk7XG5cdFx0XHRpZiAoYXBpS2V5KSBhcGlLZXlzLnB1c2goYXBpS2V5KTtcblx0XHR9XG5cdFx0cmV0dXJuIGFwaUtleXM7XG5cdH1cblx0cmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE1hbnkoe1xuXHRcdG1vZGVsOiBcImFwaWtleVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0fV1cblx0fSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYmF0Y2hNaWdyYXRlTGVnYWN5TWV0YWRhdGEsIGRlbGV0ZUFwaUtleSwgZ2V0QXBpS2V5LCBnZXRBcGlLZXlCeUlkLCBsaXN0QXBpS2V5cywgbWlncmF0ZURvdWJsZVN0cmluZ2lmaWVkTWV0YWRhdGEsIHBhcnNlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YSwgc2V0QXBpS2V5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/client.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/client.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeyClient: () => (/* binding */ apiKeyClient)\n/* harmony export */ });\n//#region src/plugins/api-key/client.ts\nconst apiKeyClient = () => {\n\treturn {\n\t\tid: \"api-key\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/api-key/create\": \"POST\",\n\t\t\t\"/api-key/delete\": \"POST\",\n\t\t\t\"/api-key/delete-all-expired-api-keys\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhcGkta2V5XFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L2NsaWVudC50c1xuY29uc3QgYXBpS2V5Q2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFwaS1rZXlcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9hcGkta2V5L2NyZWF0ZVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2FwaS1rZXkvZGVsZXRlXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpLWtleS9kZWxldGUtYWxsLWV4cGlyZWQtYXBpLWtleXNcIjogXCJQT1NUXCJcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFwaUtleUNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_KEY_TABLE_NAME: () => (/* binding */ API_KEY_TABLE_NAME),\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   apiKey: () => (/* binding */ apiKey),\n/* harmony export */   defaultKeyHasher: () => (/* binding */ defaultKeyHasher)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _routes_verify_api_key_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/verify-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/verify-api-key.mjs\");\n/* harmony import */ var _routes_index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/index.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/schema.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/index.ts\nconst defaultKeyHasher = async (key) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_11__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(key));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_12__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\nconst ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_9__.defineErrorCodes)({\n\tINVALID_METADATA_TYPE: \"metadata must be an object or undefined\",\n\tREFILL_AMOUNT_AND_INTERVAL_REQUIRED: \"refillAmount is required when refillInterval is provided\",\n\tREFILL_INTERVAL_AND_AMOUNT_REQUIRED: \"refillInterval is required when refillAmount is provided\",\n\tUSER_BANNED: \"User is banned\",\n\tUNAUTHORIZED_SESSION: \"Unauthorized or invalid session\",\n\tKEY_NOT_FOUND: \"API Key not found\",\n\tKEY_DISABLED: \"API Key is disabled\",\n\tKEY_EXPIRED: \"API Key has expired\",\n\tUSAGE_EXCEEDED: \"API Key has reached its usage limit\",\n\tKEY_NOT_RECOVERABLE: \"API Key is not recoverable\",\n\tEXPIRES_IN_IS_TOO_SMALL: \"The expiresIn is smaller than the predefined minimum value.\",\n\tEXPIRES_IN_IS_TOO_LARGE: \"The expiresIn is larger than the predefined maximum value.\",\n\tINVALID_REMAINING: \"The remaining count is either too large or too small.\",\n\tINVALID_PREFIX_LENGTH: \"The prefix length is either too large or too small.\",\n\tINVALID_NAME_LENGTH: \"The name length is either too large or too small.\",\n\tMETADATA_DISABLED: \"Metadata is disabled.\",\n\tRATE_LIMIT_EXCEEDED: \"Rate limit exceeded.\",\n\tNO_VALUES_TO_UPDATE: \"No values to update.\",\n\tKEY_DISABLED_EXPIRATION: \"Custom key expiration values are disabled.\",\n\tINVALID_API_KEY: \"Invalid API key.\",\n\tINVALID_USER_ID_FROM_API_KEY: \"The user id from the API key is invalid.\",\n\tINVALID_API_KEY_GETTER_RETURN_TYPE: \"API Key getter returned an invalid key type. Expected string.\",\n\tSERVER_ONLY_PROPERTY: \"The property you're trying to set can only be set from the server auth instance only.\",\n\tFAILED_TO_UPDATE_API_KEY: \"Failed to update API key\",\n\tNAME_REQUIRED: \"API Key name is required.\"\n});\nconst API_KEY_TABLE_NAME = \"apikey\";\nconst apiKey = (options) => {\n\tconst opts = {\n\t\t...options,\n\t\tapiKeyHeaders: options?.apiKeyHeaders ?? \"x-api-key\",\n\t\tdefaultKeyLength: options?.defaultKeyLength || 64,\n\t\tmaximumPrefixLength: options?.maximumPrefixLength ?? 32,\n\t\tminimumPrefixLength: options?.minimumPrefixLength ?? 1,\n\t\tmaximumNameLength: options?.maximumNameLength ?? 32,\n\t\tminimumNameLength: options?.minimumNameLength ?? 1,\n\t\tenableMetadata: options?.enableMetadata ?? false,\n\t\tdisableKeyHashing: options?.disableKeyHashing ?? false,\n\t\trequireName: options?.requireName ?? false,\n\t\tstorage: options?.storage ?? \"database\",\n\t\trateLimit: {\n\t\t\tenabled: options?.rateLimit?.enabled === void 0 ? true : options?.rateLimit?.enabled,\n\t\t\ttimeWindow: options?.rateLimit?.timeWindow ?? 1e3 * 60 * 60 * 24,\n\t\t\tmaxRequests: options?.rateLimit?.maxRequests ?? 10\n\t\t},\n\t\tkeyExpiration: {\n\t\t\tdefaultExpiresIn: options?.keyExpiration?.defaultExpiresIn ?? null,\n\t\t\tdisableCustomExpiresTime: options?.keyExpiration?.disableCustomExpiresTime ?? false,\n\t\t\tmaxExpiresIn: options?.keyExpiration?.maxExpiresIn ?? 365,\n\t\t\tminExpiresIn: options?.keyExpiration?.minExpiresIn ?? 1\n\t\t},\n\t\tstartingCharactersConfig: {\n\t\t\tshouldStore: options?.startingCharactersConfig?.shouldStore ?? true,\n\t\t\tcharactersLength: options?.startingCharactersConfig?.charactersLength ?? 6\n\t\t},\n\t\tenableSessionForAPIKeys: options?.enableSessionForAPIKeys ?? false,\n\t\tfallbackToDatabase: options?.fallbackToDatabase ?? false,\n\t\tcustomStorage: options?.customStorage,\n\t\tdeferUpdates: options?.deferUpdates ?? false\n\t};\n\tconst schema = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.mergeSchema)((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_8__.apiKeySchema)({\n\t\trateLimitMax: opts.rateLimit.maxRequests,\n\t\ttimeWindow: opts.rateLimit.timeWindow\n\t}), opts.schema);\n\tconst getter = opts.customAPIKeyGetter || ((ctx) => {\n\t\tif (Array.isArray(opts.apiKeyHeaders)) for (const header of opts.apiKeyHeaders) {\n\t\t\tconst value = ctx.headers?.get(header);\n\t\t\tif (value) return value;\n\t\t}\n\t\telse return ctx.headers?.get(opts.apiKeyHeaders);\n\t});\n\tconst routes = (0,_routes_index_mjs__WEBPACK_IMPORTED_MODULE_7__.createApiKeyRoutes)({\n\t\tkeyGenerator: opts.customKeyGenerator || (async (options$1) => {\n\t\t\tconst key = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_4__.generateRandomString)(options$1.length, \"a-z\", \"A-Z\");\n\t\t\treturn `${options$1.prefix || \"\"}${key}`;\n\t\t}),\n\t\topts,\n\t\tschema\n\t});\n\treturn {\n\t\tid: \"api-key\",\n\t\t$ERROR_CODES: ERROR_CODES,\n\t\thooks: { before: [{\n\t\t\tmatcher: (ctx) => !!getter(ctx) && opts.enableSessionForAPIKeys,\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst key = getter(ctx);\n\t\t\t\tif (typeof key !== \"string\") throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_API_KEY_GETTER_RETURN_TYPE });\n\t\t\t\tif (key.length < opts.defaultKeyLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.INVALID_API_KEY });\n\t\t\t\tif (opts.customAPIKeyValidator) {\n\t\t\t\t\tif (!await opts.customAPIKeyValidator({\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tkey\n\t\t\t\t\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.INVALID_API_KEY });\n\t\t\t\t}\n\t\t\t\tconst apiKey$1 = await (0,_routes_verify_api_key_mjs__WEBPACK_IMPORTED_MODULE_6__.validateApiKey)({\n\t\t\t\t\thashedKey: opts.disableKeyHashing ? key : await defaultKeyHasher(key),\n\t\t\t\t\tctx,\n\t\t\t\t\topts,\n\t\t\t\t\tschema\n\t\t\t\t});\n\t\t\t\tconst cleanupTask = (0,_routes_index_mjs__WEBPACK_IMPORTED_MODULE_7__.deleteAllExpiredApiKeys)(ctx.context).catch((err) => {\n\t\t\t\t\tctx.context.logger.error(\"Failed to delete expired API keys:\", err);\n\t\t\t\t});\n\t\t\t\tif (opts.deferUpdates) ctx.context.runInBackground(cleanupTask);\n\t\t\t\tconst user = await ctx.context.internalAdapter.findUserById(apiKey$1.userId);\n\t\t\t\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__.APIError(\"UNAUTHORIZED\", { message: ERROR_CODES.INVALID_USER_ID_FROM_API_KEY });\n\t\t\t\tconst session = {\n\t\t\t\t\tuser,\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tid: apiKey$1.id,\n\t\t\t\t\t\ttoken: key,\n\t\t\t\t\t\tuserId: apiKey$1.userId,\n\t\t\t\t\t\tuserAgent: ctx.request?.headers.get(\"user-agent\") ?? null,\n\t\t\t\t\t\tipAddress: ctx.request ? (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__.getIp)(ctx.request, ctx.context.options) : null,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\texpiresAt: apiKey$1.expiresAt || (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.session?.expiresIn || 3600 * 24 * 7, \"ms\")\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tctx.context.session = session;\n\t\t\t\tif (ctx.path === \"/get-session\") return session;\n\t\t\t\telse return { context: ctx };\n\t\t\t})\n\t\t}] },\n\t\tendpoints: {\n\t\t\tcreateApiKey: routes.createApiKey,\n\t\t\tverifyApiKey: routes.verifyApiKey,\n\t\t\tgetApiKey: routes.getApiKey,\n\t\t\tupdateApiKey: routes.updateApiKey,\n\t\t\tdeleteApiKey: routes.deleteApiKey,\n\t\t\tlistApiKeys: routes.listApiKeys,\n\t\t\tdeleteAllExpiredApiKeys: routes.deleteAllExpiredApiKeys\n\t\t},\n\t\tschema,\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ1E7QUFDTDtBQUN0QjtBQUNtQztBQUNoQjtBQUNjO0FBQ29CO0FBQ3JDO0FBQ2U7QUFDRTtBQUNSO0FBQ0M7O0FBRXREO0FBQ0E7QUFDQSxvQkFBb0Isb0VBQVU7QUFDOUIsUUFBUSxpRUFBUyxnQ0FBZ0MsZ0JBQWdCO0FBQ2pFO0FBQ0Esb0JBQW9CLHlFQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyREFBVyxDQUFDLHlEQUFZO0FBQ3hDO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGdCQUFnQixxRUFBa0I7QUFDbEM7QUFDQSxlQUFlLHdFQUFvQjtBQUNuQyxhQUFhLHVCQUF1QixFQUFFLElBQUk7QUFDMUMsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsWUFBWSw0RUFBb0I7QUFDaEM7QUFDQSwyQ0FBMkMsb0RBQVEsa0JBQWtCLHlEQUF5RDtBQUM5SCxzREFBc0Qsb0RBQVEsZ0JBQWdCLHNDQUFzQztBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sYUFBYSxvREFBUSxnQkFBZ0Isc0NBQXNDO0FBQ2pGO0FBQ0EsMkJBQTJCLDBFQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHdCQUF3QiwwRUFBdUI7QUFDL0M7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHlCQUF5QixvREFBUSxtQkFBbUIsbURBQW1EO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdFQUFLO0FBQ3BDO0FBQ0E7QUFDQSx1Q0FBdUMsd0RBQU87QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsSUFBSTtBQUNKLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUU7QUFDckUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhcGkta2V5XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyBtZXJnZVNjaGVtYSB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFwaUtleSB9IGZyb20gXCIuL3JvdXRlcy92ZXJpZnktYXBpLWtleS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUFwaUtleVJvdXRlcywgZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMgfSBmcm9tIFwiLi9yb3V0ZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBhcGlLZXlTY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hhc2hcIjtcbmltcG9ydCB7IGJhc2U2NFVybCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L2luZGV4LnRzXG5jb25zdCBkZWZhdWx0S2V5SGFzaGVyID0gYXN5bmMgKGtleSkgPT4ge1xuXHRjb25zdCBoYXNoID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShrZXkpKTtcblx0cmV0dXJuIGJhc2U2NFVybC5lbmNvZGUobmV3IFVpbnQ4QXJyYXkoaGFzaCksIHsgcGFkZGluZzogZmFsc2UgfSk7XG59O1xuY29uc3QgRVJST1JfQ09ERVMgPSBkZWZpbmVFcnJvckNvZGVzKHtcblx0SU5WQUxJRF9NRVRBREFUQV9UWVBFOiBcIm1ldGFkYXRhIG11c3QgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiLFxuXHRSRUZJTExfQU1PVU5UX0FORF9JTlRFUlZBTF9SRVFVSVJFRDogXCJyZWZpbGxBbW91bnQgaXMgcmVxdWlyZWQgd2hlbiByZWZpbGxJbnRlcnZhbCBpcyBwcm92aWRlZFwiLFxuXHRSRUZJTExfSU5URVJWQUxfQU5EX0FNT1VOVF9SRVFVSVJFRDogXCJyZWZpbGxJbnRlcnZhbCBpcyByZXF1aXJlZCB3aGVuIHJlZmlsbEFtb3VudCBpcyBwcm92aWRlZFwiLFxuXHRVU0VSX0JBTk5FRDogXCJVc2VyIGlzIGJhbm5lZFwiLFxuXHRVTkFVVEhPUklaRURfU0VTU0lPTjogXCJVbmF1dGhvcml6ZWQgb3IgaW52YWxpZCBzZXNzaW9uXCIsXG5cdEtFWV9OT1RfRk9VTkQ6IFwiQVBJIEtleSBub3QgZm91bmRcIixcblx0S0VZX0RJU0FCTEVEOiBcIkFQSSBLZXkgaXMgZGlzYWJsZWRcIixcblx0S0VZX0VYUElSRUQ6IFwiQVBJIEtleSBoYXMgZXhwaXJlZFwiLFxuXHRVU0FHRV9FWENFRURFRDogXCJBUEkgS2V5IGhhcyByZWFjaGVkIGl0cyB1c2FnZSBsaW1pdFwiLFxuXHRLRVlfTk9UX1JFQ09WRVJBQkxFOiBcIkFQSSBLZXkgaXMgbm90IHJlY292ZXJhYmxlXCIsXG5cdEVYUElSRVNfSU5fSVNfVE9PX1NNQUxMOiBcIlRoZSBleHBpcmVzSW4gaXMgc21hbGxlciB0aGFuIHRoZSBwcmVkZWZpbmVkIG1pbmltdW0gdmFsdWUuXCIsXG5cdEVYUElSRVNfSU5fSVNfVE9PX0xBUkdFOiBcIlRoZSBleHBpcmVzSW4gaXMgbGFyZ2VyIHRoYW4gdGhlIHByZWRlZmluZWQgbWF4aW11bSB2YWx1ZS5cIixcblx0SU5WQUxJRF9SRU1BSU5JTkc6IFwiVGhlIHJlbWFpbmluZyBjb3VudCBpcyBlaXRoZXIgdG9vIGxhcmdlIG9yIHRvbyBzbWFsbC5cIixcblx0SU5WQUxJRF9QUkVGSVhfTEVOR1RIOiBcIlRoZSBwcmVmaXggbGVuZ3RoIGlzIGVpdGhlciB0b28gbGFyZ2Ugb3IgdG9vIHNtYWxsLlwiLFxuXHRJTlZBTElEX05BTUVfTEVOR1RIOiBcIlRoZSBuYW1lIGxlbmd0aCBpcyBlaXRoZXIgdG9vIGxhcmdlIG9yIHRvbyBzbWFsbC5cIixcblx0TUVUQURBVEFfRElTQUJMRUQ6IFwiTWV0YWRhdGEgaXMgZGlzYWJsZWQuXCIsXG5cdFJBVEVfTElNSVRfRVhDRUVERUQ6IFwiUmF0ZSBsaW1pdCBleGNlZWRlZC5cIixcblx0Tk9fVkFMVUVTX1RPX1VQREFURTogXCJObyB2YWx1ZXMgdG8gdXBkYXRlLlwiLFxuXHRLRVlfRElTQUJMRURfRVhQSVJBVElPTjogXCJDdXN0b20ga2V5IGV4cGlyYXRpb24gdmFsdWVzIGFyZSBkaXNhYmxlZC5cIixcblx0SU5WQUxJRF9BUElfS0VZOiBcIkludmFsaWQgQVBJIGtleS5cIixcblx0SU5WQUxJRF9VU0VSX0lEX0ZST01fQVBJX0tFWTogXCJUaGUgdXNlciBpZCBmcm9tIHRoZSBBUEkga2V5IGlzIGludmFsaWQuXCIsXG5cdElOVkFMSURfQVBJX0tFWV9HRVRURVJfUkVUVVJOX1RZUEU6IFwiQVBJIEtleSBnZXR0ZXIgcmV0dXJuZWQgYW4gaW52YWxpZCBrZXkgdHlwZS4gRXhwZWN0ZWQgc3RyaW5nLlwiLFxuXHRTRVJWRVJfT05MWV9QUk9QRVJUWTogXCJUaGUgcHJvcGVydHkgeW91J3JlIHRyeWluZyB0byBzZXQgY2FuIG9ubHkgYmUgc2V0IGZyb20gdGhlIHNlcnZlciBhdXRoIGluc3RhbmNlIG9ubHkuXCIsXG5cdEZBSUxFRF9UT19VUERBVEVfQVBJX0tFWTogXCJGYWlsZWQgdG8gdXBkYXRlIEFQSSBrZXlcIixcblx0TkFNRV9SRVFVSVJFRDogXCJBUEkgS2V5IG5hbWUgaXMgcmVxdWlyZWQuXCJcbn0pO1xuY29uc3QgQVBJX0tFWV9UQUJMRV9OQU1FID0gXCJhcGlrZXlcIjtcbmNvbnN0IGFwaUtleSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRhcGlLZXlIZWFkZXJzOiBvcHRpb25zPy5hcGlLZXlIZWFkZXJzID8/IFwieC1hcGkta2V5XCIsXG5cdFx0ZGVmYXVsdEtleUxlbmd0aDogb3B0aW9ucz8uZGVmYXVsdEtleUxlbmd0aCB8fCA2NCxcblx0XHRtYXhpbXVtUHJlZml4TGVuZ3RoOiBvcHRpb25zPy5tYXhpbXVtUHJlZml4TGVuZ3RoID8/IDMyLFxuXHRcdG1pbmltdW1QcmVmaXhMZW5ndGg6IG9wdGlvbnM/Lm1pbmltdW1QcmVmaXhMZW5ndGggPz8gMSxcblx0XHRtYXhpbXVtTmFtZUxlbmd0aDogb3B0aW9ucz8ubWF4aW11bU5hbWVMZW5ndGggPz8gMzIsXG5cdFx0bWluaW11bU5hbWVMZW5ndGg6IG9wdGlvbnM/Lm1pbmltdW1OYW1lTGVuZ3RoID8/IDEsXG5cdFx0ZW5hYmxlTWV0YWRhdGE6IG9wdGlvbnM/LmVuYWJsZU1ldGFkYXRhID8/IGZhbHNlLFxuXHRcdGRpc2FibGVLZXlIYXNoaW5nOiBvcHRpb25zPy5kaXNhYmxlS2V5SGFzaGluZyA/PyBmYWxzZSxcblx0XHRyZXF1aXJlTmFtZTogb3B0aW9ucz8ucmVxdWlyZU5hbWUgPz8gZmFsc2UsXG5cdFx0c3RvcmFnZTogb3B0aW9ucz8uc3RvcmFnZSA/PyBcImRhdGFiYXNlXCIsXG5cdFx0cmF0ZUxpbWl0OiB7XG5cdFx0XHRlbmFibGVkOiBvcHRpb25zPy5yYXRlTGltaXQ/LmVuYWJsZWQgPT09IHZvaWQgMCA/IHRydWUgOiBvcHRpb25zPy5yYXRlTGltaXQ/LmVuYWJsZWQsXG5cdFx0XHR0aW1lV2luZG93OiBvcHRpb25zPy5yYXRlTGltaXQ/LnRpbWVXaW5kb3cgPz8gMWUzICogNjAgKiA2MCAqIDI0LFxuXHRcdFx0bWF4UmVxdWVzdHM6IG9wdGlvbnM/LnJhdGVMaW1pdD8ubWF4UmVxdWVzdHMgPz8gMTBcblx0XHR9LFxuXHRcdGtleUV4cGlyYXRpb246IHtcblx0XHRcdGRlZmF1bHRFeHBpcmVzSW46IG9wdGlvbnM/LmtleUV4cGlyYXRpb24/LmRlZmF1bHRFeHBpcmVzSW4gPz8gbnVsbCxcblx0XHRcdGRpc2FibGVDdXN0b21FeHBpcmVzVGltZTogb3B0aW9ucz8ua2V5RXhwaXJhdGlvbj8uZGlzYWJsZUN1c3RvbUV4cGlyZXNUaW1lID8/IGZhbHNlLFxuXHRcdFx0bWF4RXhwaXJlc0luOiBvcHRpb25zPy5rZXlFeHBpcmF0aW9uPy5tYXhFeHBpcmVzSW4gPz8gMzY1LFxuXHRcdFx0bWluRXhwaXJlc0luOiBvcHRpb25zPy5rZXlFeHBpcmF0aW9uPy5taW5FeHBpcmVzSW4gPz8gMVxuXHRcdH0sXG5cdFx0c3RhcnRpbmdDaGFyYWN0ZXJzQ29uZmlnOiB7XG5cdFx0XHRzaG91bGRTdG9yZTogb3B0aW9ucz8uc3RhcnRpbmdDaGFyYWN0ZXJzQ29uZmlnPy5zaG91bGRTdG9yZSA/PyB0cnVlLFxuXHRcdFx0Y2hhcmFjdGVyc0xlbmd0aDogb3B0aW9ucz8uc3RhcnRpbmdDaGFyYWN0ZXJzQ29uZmlnPy5jaGFyYWN0ZXJzTGVuZ3RoID8/IDZcblx0XHR9LFxuXHRcdGVuYWJsZVNlc3Npb25Gb3JBUElLZXlzOiBvcHRpb25zPy5lbmFibGVTZXNzaW9uRm9yQVBJS2V5cyA/PyBmYWxzZSxcblx0XHRmYWxsYmFja1RvRGF0YWJhc2U6IG9wdGlvbnM/LmZhbGxiYWNrVG9EYXRhYmFzZSA/PyBmYWxzZSxcblx0XHRjdXN0b21TdG9yYWdlOiBvcHRpb25zPy5jdXN0b21TdG9yYWdlLFxuXHRcdGRlZmVyVXBkYXRlczogb3B0aW9ucz8uZGVmZXJVcGRhdGVzID8/IGZhbHNlXG5cdH07XG5cdGNvbnN0IHNjaGVtYSA9IG1lcmdlU2NoZW1hKGFwaUtleVNjaGVtYSh7XG5cdFx0cmF0ZUxpbWl0TWF4OiBvcHRzLnJhdGVMaW1pdC5tYXhSZXF1ZXN0cyxcblx0XHR0aW1lV2luZG93OiBvcHRzLnJhdGVMaW1pdC50aW1lV2luZG93XG5cdH0pLCBvcHRzLnNjaGVtYSk7XG5cdGNvbnN0IGdldHRlciA9IG9wdHMuY3VzdG9tQVBJS2V5R2V0dGVyIHx8ICgoY3R4KSA9PiB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0cy5hcGlLZXlIZWFkZXJzKSkgZm9yIChjb25zdCBoZWFkZXIgb2Ygb3B0cy5hcGlLZXlIZWFkZXJzKSB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGN0eC5oZWFkZXJzPy5nZXQoaGVhZGVyKTtcblx0XHRcdGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuXHRcdH1cblx0XHRlbHNlIHJldHVybiBjdHguaGVhZGVycz8uZ2V0KG9wdHMuYXBpS2V5SGVhZGVycyk7XG5cdH0pO1xuXHRjb25zdCByb3V0ZXMgPSBjcmVhdGVBcGlLZXlSb3V0ZXMoe1xuXHRcdGtleUdlbmVyYXRvcjogb3B0cy5jdXN0b21LZXlHZW5lcmF0b3IgfHwgKGFzeW5jIChvcHRpb25zJDEpID0+IHtcblx0XHRcdGNvbnN0IGtleSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKG9wdGlvbnMkMS5sZW5ndGgsIFwiYS16XCIsIFwiQS1aXCIpO1xuXHRcdFx0cmV0dXJuIGAke29wdGlvbnMkMS5wcmVmaXggfHwgXCJcIn0ke2tleX1gO1xuXHRcdH0pLFxuXHRcdG9wdHMsXG5cdFx0c2NoZW1hXG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFwaS1rZXlcIixcblx0XHQkRVJST1JfQ09ERVM6IEVSUk9SX0NPREVTLFxuXHRcdGhvb2tzOiB7IGJlZm9yZTogW3tcblx0XHRcdG1hdGNoZXI6IChjdHgpID0+ICEhZ2V0dGVyKGN0eCkgJiYgb3B0cy5lbmFibGVTZXNzaW9uRm9yQVBJS2V5cyxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3Qga2V5ID0gZ2V0dGVyKGN0eCk7XG5cdFx0XHRcdGlmICh0eXBlb2Yga2V5ICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfQVBJX0tFWV9HRVRURVJfUkVUVVJOX1RZUEUgfSk7XG5cdFx0XHRcdGlmIChrZXkubGVuZ3RoIDwgb3B0cy5kZWZhdWx0S2V5TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX0FQSV9LRVkgfSk7XG5cdFx0XHRcdGlmIChvcHRzLmN1c3RvbUFQSUtleVZhbGlkYXRvcikge1xuXHRcdFx0XHRcdGlmICghYXdhaXQgb3B0cy5jdXN0b21BUElLZXlWYWxpZGF0b3Ioe1xuXHRcdFx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRcdFx0a2V5XG5cdFx0XHRcdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfQVBJX0tFWSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBhcGlLZXkkMSA9IGF3YWl0IHZhbGlkYXRlQXBpS2V5KHtcblx0XHRcdFx0XHRoYXNoZWRLZXk6IG9wdHMuZGlzYWJsZUtleUhhc2hpbmcgPyBrZXkgOiBhd2FpdCBkZWZhdWx0S2V5SGFzaGVyKGtleSksXG5cdFx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRcdG9wdHMsXG5cdFx0XHRcdFx0c2NoZW1hXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBjbGVhbnVwVGFzayA9IGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzKGN0eC5jb250ZXh0KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBleHBpcmVkIEFQSSBrZXlzOlwiLCBlcnIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKG9wdHMuZGVmZXJVcGRhdGVzKSBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmQoY2xlYW51cFRhc2spO1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChhcGlLZXkkMS51c2VySWQpO1xuXHRcdFx0XHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfVVNFUl9JRF9GUk9NX0FQSV9LRVkgfSk7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSB7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRpZDogYXBpS2V5JDEuaWQsXG5cdFx0XHRcdFx0XHR0b2tlbjoga2V5LFxuXHRcdFx0XHRcdFx0dXNlcklkOiBhcGlLZXkkMS51c2VySWQsXG5cdFx0XHRcdFx0XHR1c2VyQWdlbnQ6IGN0eC5yZXF1ZXN0Py5oZWFkZXJzLmdldChcInVzZXItYWdlbnRcIikgPz8gbnVsbCxcblx0XHRcdFx0XHRcdGlwQWRkcmVzczogY3R4LnJlcXVlc3QgPyBnZXRJcChjdHgucmVxdWVzdCwgY3R4LmNvbnRleHQub3B0aW9ucykgOiBudWxsLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHRleHBpcmVzQXQ6IGFwaUtleSQxLmV4cGlyZXNBdCB8fCBnZXREYXRlKGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luIHx8IDM2MDAgKiAyNCAqIDcsIFwibXNcIilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGN0eC5jb250ZXh0LnNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdFx0XHRpZiAoY3R4LnBhdGggPT09IFwiL2dldC1zZXNzaW9uXCIpIHJldHVybiBzZXNzaW9uO1xuXHRcdFx0XHRlbHNlIHJldHVybiB7IGNvbnRleHQ6IGN0eCB9O1xuXHRcdFx0fSlcblx0XHR9XSB9LFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0Y3JlYXRlQXBpS2V5OiByb3V0ZXMuY3JlYXRlQXBpS2V5LFxuXHRcdFx0dmVyaWZ5QXBpS2V5OiByb3V0ZXMudmVyaWZ5QXBpS2V5LFxuXHRcdFx0Z2V0QXBpS2V5OiByb3V0ZXMuZ2V0QXBpS2V5LFxuXHRcdFx0dXBkYXRlQXBpS2V5OiByb3V0ZXMudXBkYXRlQXBpS2V5LFxuXHRcdFx0ZGVsZXRlQXBpS2V5OiByb3V0ZXMuZGVsZXRlQXBpS2V5LFxuXHRcdFx0bGlzdEFwaUtleXM6IHJvdXRlcy5saXN0QXBpS2V5cyxcblx0XHRcdGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzOiByb3V0ZXMuZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9LFxuXHRcdHNjaGVtYSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFQSV9LRVlfVEFCTEVfTkFNRSwgRVJST1JfQ09ERVMsIGFwaUtleSwgZGVmYXVsdEtleUhhc2hlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/rate-limit.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/rate-limit.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isRateLimited: () => (/* binding */ isRateLimited)\n/* harmony export */ });\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n\n\n//#region src/plugins/api-key/rate-limit.ts\n/**\n* Determines if a request is allowed based on rate limiting parameters.\n*\n* @returns An object indicating whether the request is allowed and, if not,\n*          a message and updated ApiKey data.\n*/\nfunction isRateLimited(apiKey, opts) {\n\tconst now = /* @__PURE__ */ new Date();\n\tconst lastRequest = apiKey.lastRequest;\n\tconst rateLimitTimeWindow = apiKey.rateLimitTimeWindow;\n\tconst rateLimitMax = apiKey.rateLimitMax;\n\tlet requestCount = apiKey.requestCount;\n\tif (opts.rateLimit.enabled === false) return {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\tupdate: { lastRequest: now },\n\t\ttryAgainIn: null\n\t};\n\tif (apiKey.rateLimitEnabled === false) return {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\tupdate: { lastRequest: now },\n\t\ttryAgainIn: null\n\t};\n\tif (rateLimitTimeWindow === null || rateLimitMax === null) return {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\tupdate: null,\n\t\ttryAgainIn: null\n\t};\n\tif (lastRequest === null) return {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\tupdate: {\n\t\t\tlastRequest: now,\n\t\t\trequestCount: 1\n\t\t},\n\t\ttryAgainIn: null\n\t};\n\tconst timeSinceLastRequest = now.getTime() - new Date(lastRequest).getTime();\n\tif (timeSinceLastRequest > rateLimitTimeWindow) return {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\tupdate: {\n\t\t\tlastRequest: now,\n\t\t\trequestCount: 1\n\t\t},\n\t\ttryAgainIn: null\n\t};\n\tif (requestCount >= rateLimitMax) return {\n\t\tsuccess: false,\n\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_0__.ERROR_CODES.RATE_LIMIT_EXCEEDED,\n\t\tupdate: null,\n\t\ttryAgainIn: Math.ceil(rateLimitTimeWindow - timeSinceLastRequest)\n\t};\n\trequestCount++;\n\treturn {\n\t\tsuccess: true,\n\t\tmessage: null,\n\t\ttryAgainIn: null,\n\t\tupdate: {\n\t\t\tlastRequest: now,\n\t\t\trequestCount\n\t\t}\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=rate-limit.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcmF0ZS1saW1pdC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7O0FBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtREFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYXBpLWtleVxccmF0ZS1saW1pdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FwaS1rZXkvcmF0ZS1saW1pdC50c1xuLyoqXG4qIERldGVybWluZXMgaWYgYSByZXF1ZXN0IGlzIGFsbG93ZWQgYmFzZWQgb24gcmF0ZSBsaW1pdGluZyBwYXJhbWV0ZXJzLlxuKlxuKiBAcmV0dXJucyBBbiBvYmplY3QgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSByZXF1ZXN0IGlzIGFsbG93ZWQgYW5kLCBpZiBub3QsXG4qICAgICAgICAgIGEgbWVzc2FnZSBhbmQgdXBkYXRlZCBBcGlLZXkgZGF0YS5cbiovXG5mdW5jdGlvbiBpc1JhdGVMaW1pdGVkKGFwaUtleSwgb3B0cykge1xuXHRjb25zdCBub3cgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0Y29uc3QgbGFzdFJlcXVlc3QgPSBhcGlLZXkubGFzdFJlcXVlc3Q7XG5cdGNvbnN0IHJhdGVMaW1pdFRpbWVXaW5kb3cgPSBhcGlLZXkucmF0ZUxpbWl0VGltZVdpbmRvdztcblx0Y29uc3QgcmF0ZUxpbWl0TWF4ID0gYXBpS2V5LnJhdGVMaW1pdE1heDtcblx0bGV0IHJlcXVlc3RDb3VudCA9IGFwaUtleS5yZXF1ZXN0Q291bnQ7XG5cdGlmIChvcHRzLnJhdGVMaW1pdC5lbmFibGVkID09PSBmYWxzZSkgcmV0dXJuIHtcblx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IG51bGwsXG5cdFx0dXBkYXRlOiB7IGxhc3RSZXF1ZXN0OiBub3cgfSxcblx0XHR0cnlBZ2FpbkluOiBudWxsXG5cdH07XG5cdGlmIChhcGlLZXkucmF0ZUxpbWl0RW5hYmxlZCA9PT0gZmFsc2UpIHJldHVybiB7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBudWxsLFxuXHRcdHVwZGF0ZTogeyBsYXN0UmVxdWVzdDogbm93IH0sXG5cdFx0dHJ5QWdhaW5JbjogbnVsbFxuXHR9O1xuXHRpZiAocmF0ZUxpbWl0VGltZVdpbmRvdyA9PT0gbnVsbCB8fCByYXRlTGltaXRNYXggPT09IG51bGwpIHJldHVybiB7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBudWxsLFxuXHRcdHVwZGF0ZTogbnVsbCxcblx0XHR0cnlBZ2FpbkluOiBudWxsXG5cdH07XG5cdGlmIChsYXN0UmVxdWVzdCA9PT0gbnVsbCkgcmV0dXJuIHtcblx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IG51bGwsXG5cdFx0dXBkYXRlOiB7XG5cdFx0XHRsYXN0UmVxdWVzdDogbm93LFxuXHRcdFx0cmVxdWVzdENvdW50OiAxXG5cdFx0fSxcblx0XHR0cnlBZ2FpbkluOiBudWxsXG5cdH07XG5cdGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93LmdldFRpbWUoKSAtIG5ldyBEYXRlKGxhc3RSZXF1ZXN0KS5nZXRUaW1lKCk7XG5cdGlmICh0aW1lU2luY2VMYXN0UmVxdWVzdCA+IHJhdGVMaW1pdFRpbWVXaW5kb3cpIHJldHVybiB7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBudWxsLFxuXHRcdHVwZGF0ZToge1xuXHRcdFx0bGFzdFJlcXVlc3Q6IG5vdyxcblx0XHRcdHJlcXVlc3RDb3VudDogMVxuXHRcdH0sXG5cdFx0dHJ5QWdhaW5JbjogbnVsbFxuXHR9O1xuXHRpZiAocmVxdWVzdENvdW50ID49IHJhdGVMaW1pdE1heCkgcmV0dXJuIHtcblx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRtZXNzYWdlOiBFUlJPUl9DT0RFUy5SQVRFX0xJTUlUX0VYQ0VFREVELFxuXHRcdHVwZGF0ZTogbnVsbCxcblx0XHR0cnlBZ2FpbkluOiBNYXRoLmNlaWwocmF0ZUxpbWl0VGltZVdpbmRvdyAtIHRpbWVTaW5jZUxhc3RSZXF1ZXN0KVxuXHR9O1xuXHRyZXF1ZXN0Q291bnQrKztcblx0cmV0dXJuIHtcblx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IG51bGwsXG5cdFx0dHJ5QWdhaW5JbjogbnVsbCxcblx0XHR1cGRhdGU6IHtcblx0XHRcdGxhc3RSZXF1ZXN0OiBub3csXG5cdFx0XHRyZXF1ZXN0Q291bnRcblx0XHR9XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaXNSYXRlTGltaXRlZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmF0ZS1saW1pdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/rate-limit.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/create-api-key.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/create-api-key.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApiKey: () => (/* binding */ createApiKey)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/create-api-key.ts\nconst createApiKeyBodySchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"Name of the Api Key\" }).optional(),\n\texpiresIn: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Expiration time of the Api Key in seconds\" }).min(1).optional().nullable().default(null),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_8__.coerce.string().meta({ description: \"User Id of the user that the Api Key belongs to. server-only. Eg: \\\"user-id\\\"\" }).optional(),\n\tprefix: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"Prefix of the Api Key\" }).regex(/^[a-zA-Z0-9_-]+$/, { message: \"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens.\" }).optional(),\n\tremaining: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Remaining number of requests. Server side only\" }).min(0).optional().nullable().default(null),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_8__.any().optional(),\n\trefillAmount: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Amount to refill the remaining count of the Api Key. server-only. Eg: 100\" }).min(1).optional(),\n\trefillInterval: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Interval to refill the Api Key in milliseconds. server-only. Eg: 1000\" }).optional(),\n\trateLimitTimeWindow: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 1000\" }).optional(),\n\trateLimitMax: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100\" }).optional(),\n\trateLimitEnabled: zod__WEBPACK_IMPORTED_MODULE_8__.boolean().meta({ description: \"Whether the key has rate limiting enabled. server-only. Eg: true\" }).optional(),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string(), zod__WEBPACK_IMPORTED_MODULE_8__.array(zod__WEBPACK_IMPORTED_MODULE_8__.string())).meta({ description: \"Permissions of the Api Key.\" }).optional()\n});\nfunction createApiKey({ keyGenerator, opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__.createAuthEndpoint)(\"/api-key/create\", {\n\t\tmethod: \"POST\",\n\t\tbody: createApiKeyBodySchema,\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Create a new API key for a user\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API key created successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Unique identifier of the API key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Creation timestamp\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Last update timestamp\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Name of the API key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprefix: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Prefix of the API key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Starting characters of the key (if configured)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The full API key (only returned on creation)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Whether the key is enabled\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\texpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Expiration timestamp\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"ID of the user owning the key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRefillAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Last refill timestamp\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Last request timestamp\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\tdescription: \"Metadata associated with the key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitMax: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Maximum requests in time window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitTimeWindow: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Rate limit time window in milliseconds\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tremaining: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Remaining requests\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillAmount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Amount to refill\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillInterval: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Refill interval in milliseconds\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitEnabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Whether rate limiting is enabled\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequestCount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tdescription: \"Current request count in window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdescription: \"Permissions associated with the key\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"key\",\n\t\t\t\t\t\t\"enabled\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"rateLimitEnabled\",\n\t\t\t\t\t\t\"requestCount\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst { name, expiresIn, prefix, remaining, metadata, refillAmount, refillInterval, permissions, rateLimitMax, rateLimitTimeWindow, rateLimitEnabled } = ctx.body;\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__.getSessionFromCtx)(ctx);\n\t\tconst authRequired = ctx.request || ctx.headers;\n\t\tconst user = authRequired && !session ? null : session?.user || { id: ctx.body.userId };\n\t\tif (!user?.id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.UNAUTHORIZED_SESSION });\n\t\tif (session && ctx.body.userId && session?.user.id !== ctx.body.userId) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.UNAUTHORIZED_SESSION });\n\t\tif (authRequired) {\n\t\t\tif (refillAmount !== void 0 || refillInterval !== void 0 || rateLimitMax !== void 0 || rateLimitTimeWindow !== void 0 || rateLimitEnabled !== void 0 || permissions !== void 0 || remaining !== null) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.SERVER_ONLY_PROPERTY });\n\t\t}\n\t\tif (metadata) {\n\t\t\tif (opts.enableMetadata === false) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.METADATA_DISABLED });\n\t\t\tif (typeof metadata !== \"object\") throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_METADATA_TYPE });\n\t\t}\n\t\tif (refillAmount && !refillInterval) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.REFILL_AMOUNT_AND_INTERVAL_REQUIRED });\n\t\tif (refillInterval && !refillAmount) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.REFILL_INTERVAL_AND_AMOUNT_REQUIRED });\n\t\tif (expiresIn) {\n\t\t\tif (opts.keyExpiration.disableCustomExpiresTime === true) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.KEY_DISABLED_EXPIRATION });\n\t\t\tconst expiresIn_in_days = expiresIn / (3600 * 24);\n\t\t\tif (opts.keyExpiration.minExpiresIn > expiresIn_in_days) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.EXPIRES_IN_IS_TOO_SMALL });\n\t\t\telse if (opts.keyExpiration.maxExpiresIn < expiresIn_in_days) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.EXPIRES_IN_IS_TOO_LARGE });\n\t\t}\n\t\tif (prefix) {\n\t\t\tif (prefix.length < opts.minimumPrefixLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_PREFIX_LENGTH });\n\t\t\tif (prefix.length > opts.maximumPrefixLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_PREFIX_LENGTH });\n\t\t}\n\t\tif (name) {\n\t\t\tif (name.length < opts.minimumNameLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_NAME_LENGTH });\n\t\t\tif (name.length > opts.maximumNameLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_NAME_LENGTH });\n\t\t} else if (opts.requireName) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.NAME_REQUIRED });\n\t\tdeleteAllExpiredApiKeys(ctx.context);\n\t\tconst key = await keyGenerator({\n\t\t\tlength: opts.defaultKeyLength,\n\t\t\tprefix: prefix || opts.defaultPrefix\n\t\t});\n\t\tconst hashed = opts.disableKeyHashing ? key : await (0,_index_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultKeyHasher)(key);\n\t\tlet start = null;\n\t\tif (opts.startingCharactersConfig.shouldStore) start = key.substring(0, opts.startingCharactersConfig.charactersLength);\n\t\tconst defaultPermissions = opts.permissions?.defaultPermissions ? typeof opts.permissions.defaultPermissions === \"function\" ? await opts.permissions.defaultPermissions(user.id, ctx) : opts.permissions.defaultPermissions : void 0;\n\t\tconst permissionsToApply = permissions ? JSON.stringify(permissions) : defaultPermissions ? JSON.stringify(defaultPermissions) : void 0;\n\t\tconst data = {\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\tname: name ?? null,\n\t\t\tprefix: prefix ?? opts.defaultPrefix ?? null,\n\t\t\tstart,\n\t\t\tkey: hashed,\n\t\t\tenabled: true,\n\t\t\texpiresAt: expiresIn ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(expiresIn, \"sec\") : opts.keyExpiration.defaultExpiresIn ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.keyExpiration.defaultExpiresIn, \"sec\") : null,\n\t\t\tuserId: user.id,\n\t\t\tlastRefillAt: null,\n\t\t\tlastRequest: null,\n\t\t\tmetadata: null,\n\t\t\trateLimitMax: rateLimitMax ?? opts.rateLimit.maxRequests ?? null,\n\t\t\trateLimitTimeWindow: rateLimitTimeWindow ?? opts.rateLimit.timeWindow ?? null,\n\t\t\tremaining: remaining === null ? remaining : remaining ?? refillAmount ?? null,\n\t\t\trefillAmount: refillAmount ?? null,\n\t\t\trefillInterval: refillInterval ?? null,\n\t\t\trateLimitEnabled: rateLimitEnabled === void 0 ? opts.rateLimit.enabled ?? true : rateLimitEnabled,\n\t\t\trequestCount: 0,\n\t\t\tpermissions: permissionsToApply\n\t\t};\n\t\tif (metadata) data.metadata = metadata;\n\t\tlet apiKey;\n\t\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\tapiKey = await ctx.context.adapter.create({\n\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\tdata\n\t\t\t});\n\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_4__.setApiKey)(ctx, apiKey, opts);\n\t\t} else if (opts.storage === \"secondary-storage\") {\n\t\t\tconst id = ctx.context.generateId({ model: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME }) || (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.generateId)();\n\t\t\tapiKey = {\n\t\t\t\t...data,\n\t\t\t\tid\n\t\t\t};\n\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_4__.setApiKey)(ctx, apiKey, opts);\n\t\t} else apiKey = await ctx.context.adapter.create({\n\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\tdata\n\t\t});\n\t\treturn ctx.json({\n\t\t\t...apiKey,\n\t\t\tkey,\n\t\t\tmetadata: metadata ?? null,\n\t\t\tpermissions: apiKey.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__.safeJSONParse)(apiKey.permissions) : null\n\t\t});\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=create-api-key.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2NyZWF0ZS1hcGkta2V5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ2tCO0FBQ0U7QUFDcEI7QUFDUDtBQUNzQztBQUN6QjtBQUMvQjtBQUNrQzs7QUFFM0Q7QUFDQSwrQkFBK0IsdUNBQVE7QUFDdkMsT0FBTyx1Q0FBUSxVQUFVLG9DQUFvQztBQUM3RCxZQUFZLHVDQUFRLFVBQVUsMERBQTBEO0FBQ3hGLFNBQVMsOENBQWUsVUFBVSw4RkFBOEY7QUFDaEksU0FBUyx1Q0FBUSxVQUFVLHNDQUFzQyw4QkFBOEIsa0dBQWtHO0FBQ2pNLFlBQVksdUNBQVEsVUFBVSwrREFBK0Q7QUFDN0YsV0FBVyxvQ0FBSztBQUNoQixlQUFlLHVDQUFRLFVBQVUsMEZBQTBGO0FBQzNILGlCQUFpQix1Q0FBUSxVQUFVLHNGQUFzRjtBQUN6SCxzQkFBc0IsdUNBQVEsVUFBVSxvUEFBb1A7QUFDNVIsZUFBZSx1Q0FBUSxVQUFVLDJPQUEyTztBQUM1USxtQkFBbUIsd0NBQVMsVUFBVSxpRkFBaUY7QUFDdkgsY0FBYyx1Q0FBUSxDQUFDLHVDQUFRLElBQUksc0NBQU8sQ0FBQyx1Q0FBUSxZQUFZLDRDQUE0QztBQUMzRyxDQUFDO0FBQ0Qsd0JBQXdCLHFEQUFxRDtBQUM3RSxRQUFRLHlFQUFrQjtBQUMxQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixVQUFVLCtJQUErSTtBQUN6Six3QkFBd0IsMEVBQWlCO0FBQ3pDO0FBQ0Esb0VBQW9FO0FBQ3BFLDJCQUEyQixvREFBUSxtQkFBbUIsU0FBUyxtREFBVyx1QkFBdUI7QUFDakcsb0ZBQW9GLG9EQUFRLG1CQUFtQixTQUFTLG1EQUFXLHVCQUF1QjtBQUMxSjtBQUNBLG1OQUFtTixvREFBUSxrQkFBa0IsU0FBUyxtREFBVyx1QkFBdUI7QUFDeFI7QUFDQTtBQUNBLGdEQUFnRCxvREFBUSxrQkFBa0IsU0FBUyxtREFBVyxvQkFBb0I7QUFDbEgsK0NBQStDLG9EQUFRLGtCQUFrQixTQUFTLG1EQUFXLHdCQUF3QjtBQUNySDtBQUNBLGlEQUFpRCxvREFBUSxrQkFBa0IsU0FBUyxtREFBVyxzQ0FBc0M7QUFDckksaURBQWlELG9EQUFRLGtCQUFrQixTQUFTLG1EQUFXLHNDQUFzQztBQUNySTtBQUNBLHVFQUF1RSxvREFBUSxrQkFBa0IsU0FBUyxtREFBVywwQkFBMEI7QUFDL0k7QUFDQSxzRUFBc0Usb0RBQVEsa0JBQWtCLFNBQVMsbURBQVcsMEJBQTBCO0FBQzlJLDJFQUEyRSxvREFBUSxrQkFBa0IsU0FBUyxtREFBVywwQkFBMEI7QUFDbko7QUFDQTtBQUNBLDJEQUEyRCxvREFBUSxrQkFBa0IsU0FBUyxtREFBVyx3QkFBd0I7QUFDakksMkRBQTJELG9EQUFRLGtCQUFrQixTQUFTLG1EQUFXLHdCQUF3QjtBQUNqSTtBQUNBO0FBQ0EsdURBQXVELG9EQUFRLGtCQUFrQixTQUFTLG1EQUFXLHNCQUFzQjtBQUMzSCx1REFBdUQsb0RBQVEsa0JBQWtCLFNBQVMsbURBQVcsc0JBQXNCO0FBQzNILElBQUkscUNBQXFDLG9EQUFRLGtCQUFrQixTQUFTLG1EQUFXLGdCQUFnQjtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxzREFBc0QsNERBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBTywyREFBMkQsd0RBQU87QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMERBQWtCO0FBQzdCO0FBQ0EsSUFBSTtBQUNKLFNBQVMsdURBQVM7QUFDbEIsSUFBSTtBQUNKLHVDQUF1QyxPQUFPLDBEQUFrQixFQUFFLEtBQUssNERBQVk7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFTO0FBQ2xCLElBQUk7QUFDSixVQUFVLDBEQUFrQjtBQUM1QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzRUFBYTtBQUNsRCxHQUFHO0FBQ0gsRUFBRTtBQUNGOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYXBpLWtleVxccm91dGVzXFxjcmVhdGUtYXBpLWtleS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXRBcGlLZXkgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IEFQSV9LRVlfVEFCTEVfTkFNRSwgRVJST1JfQ09ERVMsIGRlZmF1bHRLZXlIYXNoZXIgfSBmcm9tIFwiLi4vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2NyZWF0ZS1hcGkta2V5LnRzXG5jb25zdCBjcmVhdGVBcGlLZXlCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRuYW1lOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJOYW1lIG9mIHRoZSBBcGkgS2V5XCIgfSkub3B0aW9uYWwoKSxcblx0ZXhwaXJlc0luOiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFeHBpcmF0aW9uIHRpbWUgb2YgdGhlIEFwaSBLZXkgaW4gc2Vjb25kc1wiIH0pLm1pbigxKS5vcHRpb25hbCgpLm51bGxhYmxlKCkuZGVmYXVsdChudWxsKSxcblx0dXNlcklkOiB6LmNvZXJjZS5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVXNlciBJZCBvZiB0aGUgdXNlciB0aGF0IHRoZSBBcGkgS2V5IGJlbG9uZ3MgdG8uIHNlcnZlci1vbmx5LiBFZzogXFxcInVzZXItaWRcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0cHJlZml4OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJQcmVmaXggb2YgdGhlIEFwaSBLZXlcIiB9KS5yZWdleCgvXlthLXpBLVowLTlfLV0rJC8sIHsgbWVzc2FnZTogXCJJbnZhbGlkIHByZWZpeCBmb3JtYXQsIG11c3QgYmUgYWxwaGFudW1lcmljIGFuZCBjb250YWluIG9ubHkgdW5kZXJzY29yZXMgYW5kIGh5cGhlbnMuXCIgfSkub3B0aW9uYWwoKSxcblx0cmVtYWluaW5nOiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJSZW1haW5pbmcgbnVtYmVyIG9mIHJlcXVlc3RzLiBTZXJ2ZXIgc2lkZSBvbmx5XCIgfSkubWluKDApLm9wdGlvbmFsKCkubnVsbGFibGUoKS5kZWZhdWx0KG51bGwpLFxuXHRtZXRhZGF0YTogei5hbnkoKS5vcHRpb25hbCgpLFxuXHRyZWZpbGxBbW91bnQ6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFtb3VudCB0byByZWZpbGwgdGhlIHJlbWFpbmluZyBjb3VudCBvZiB0aGUgQXBpIEtleS4gc2VydmVyLW9ubHkuIEVnOiAxMDBcIiB9KS5taW4oMSkub3B0aW9uYWwoKSxcblx0cmVmaWxsSW50ZXJ2YWw6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkludGVydmFsIHRvIHJlZmlsbCB0aGUgQXBpIEtleSBpbiBtaWxsaXNlY29uZHMuIHNlcnZlci1vbmx5LiBFZzogMTAwMFwiIH0pLm9wdGlvbmFsKCksXG5cdHJhdGVMaW1pdFRpbWVXaW5kb3c6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMgd2hlcmUgZWFjaCByZXF1ZXN0IGlzIGNvdW50ZWQuIE9uY2UgdGhlIGBtYXhSZXF1ZXN0c2AgaXMgcmVhY2hlZCwgdGhlIHJlcXVlc3Qgd2lsbCBiZSByZWplY3RlZCB1bnRpbCB0aGUgYHRpbWVXaW5kb3dgIGhhcyBwYXNzZWQsIGF0IHdoaWNoIHBvaW50IHRoZSBgdGltZVdpbmRvd2Agd2lsbCBiZSByZXNldC4gc2VydmVyLW9ubHkuIEVnOiAxMDAwXCIgfSkub3B0aW9uYWwoKSxcblx0cmF0ZUxpbWl0TWF4OiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJNYXhpbXVtIGFtb3VudCBvZiByZXF1ZXN0cyBhbGxvd2VkIHdpdGhpbiBhIHdpbmRvdy4gT25jZSB0aGUgYG1heFJlcXVlc3RzYCBpcyByZWFjaGVkLCB0aGUgcmVxdWVzdCB3aWxsIGJlIHJlamVjdGVkIHVudGlsIHRoZSBgdGltZVdpbmRvd2AgaGFzIHBhc3NlZCwgYXQgd2hpY2ggcG9pbnQgdGhlIGB0aW1lV2luZG93YCB3aWxsIGJlIHJlc2V0LiBzZXJ2ZXItb25seS4gRWc6IDEwMFwiIH0pLm9wdGlvbmFsKCksXG5cdHJhdGVMaW1pdEVuYWJsZWQ6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBrZXkgaGFzIHJhdGUgbGltaXRpbmcgZW5hYmxlZC4gc2VydmVyLW9ubHkuIEVnOiB0cnVlXCIgfSkub3B0aW9uYWwoKSxcblx0cGVybWlzc2lvbnM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJQZXJtaXNzaW9ucyBvZiB0aGUgQXBpIEtleS5cIiB9KS5vcHRpb25hbCgpXG59KTtcbmZ1bmN0aW9uIGNyZWF0ZUFwaUtleSh7IGtleUdlbmVyYXRvciwgb3B0cywgc2NoZW1hLCBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyB9KSB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYXBpLWtleS9jcmVhdGVcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogY3JlYXRlQXBpS2V5Qm9keVNjaGVtYSxcblx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgYSBuZXcgQVBJIGtleSBmb3IgYSB1c2VyXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBUEkga2V5IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgQVBJIGtleVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRpb24gdGltZXN0YW1wXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJMYXN0IHVwZGF0ZSB0aW1lc3RhbXBcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk5hbWUgb2YgdGhlIEFQSSBrZXlcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHByZWZpeDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUHJlZml4IG9mIHRoZSBBUEkga2V5XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdGFydDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3RhcnRpbmcgY2hhcmFjdGVycyBvZiB0aGUga2V5IChpZiBjb25maWd1cmVkKVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0a2V5OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBmdWxsIEFQSSBrZXkgKG9ubHkgcmV0dXJuZWQgb24gY3JlYXRpb24pXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRlbmFibGVkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBrZXkgaXMgZW5hYmxlZFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkV4cGlyYXRpb24gdGltZXN0YW1wXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSUQgb2YgdGhlIHVzZXIgb3duaW5nIHRoZSBrZXlcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGxhc3RSZWZpbGxBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJMYXN0IHJlZmlsbCB0aW1lc3RhbXBcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGxhc3RSZXF1ZXN0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkxhc3QgcmVxdWVzdCB0aW1lc3RhbXBcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXlcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJhdGVMaW1pdE1heDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTWF4aW11bSByZXF1ZXN0cyBpbiB0aW1lIHdpbmRvd1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmF0ZUxpbWl0VGltZVdpbmRvdzoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUmF0ZSBsaW1pdCB0aW1lIHdpbmRvdyBpbiBtaWxsaXNlY29uZHNcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlbWFpbmluZzoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUmVtYWluaW5nIHJlcXVlc3RzXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZWZpbGxBbW91bnQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFtb3VudCB0byByZWZpbGxcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlZmlsbEludGVydmFsOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJSZWZpbGwgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyYXRlTGltaXRFbmFibGVkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHJhdGUgbGltaXRpbmcgaXMgZW5hYmxlZFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWVzdENvdW50OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkN1cnJlbnQgcmVxdWVzdCBjb3VudCBpbiB3aW5kb3dcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBlcm1pc3Npb25zOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRhZGRpdGlvbmFsUHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRcdFx0XHRpdGVtczogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUGVybWlzc2lvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXlcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XCJrZXlcIixcblx0XHRcdFx0XHRcdFwiZW5hYmxlZFwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VySWRcIixcblx0XHRcdFx0XHRcdFwicmF0ZUxpbWl0RW5hYmxlZFwiLFxuXHRcdFx0XHRcdFx0XCJyZXF1ZXN0Q291bnRcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH0gfVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgeyBuYW1lLCBleHBpcmVzSW4sIHByZWZpeCwgcmVtYWluaW5nLCBtZXRhZGF0YSwgcmVmaWxsQW1vdW50LCByZWZpbGxJbnRlcnZhbCwgcGVybWlzc2lvbnMsIHJhdGVMaW1pdE1heCwgcmF0ZUxpbWl0VGltZVdpbmRvdywgcmF0ZUxpbWl0RW5hYmxlZCB9ID0gY3R4LmJvZHk7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0Y29uc3QgYXV0aFJlcXVpcmVkID0gY3R4LnJlcXVlc3QgfHwgY3R4LmhlYWRlcnM7XG5cdFx0Y29uc3QgdXNlciA9IGF1dGhSZXF1aXJlZCAmJiAhc2Vzc2lvbiA/IG51bGwgOiBzZXNzaW9uPy51c2VyIHx8IHsgaWQ6IGN0eC5ib2R5LnVzZXJJZCB9O1xuXHRcdGlmICghdXNlcj8uaWQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlVOQVVUSE9SSVpFRF9TRVNTSU9OIH0pO1xuXHRcdGlmIChzZXNzaW9uICYmIGN0eC5ib2R5LnVzZXJJZCAmJiBzZXNzaW9uPy51c2VyLmlkICE9PSBjdHguYm9keS51c2VySWQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlVOQVVUSE9SSVpFRF9TRVNTSU9OIH0pO1xuXHRcdGlmIChhdXRoUmVxdWlyZWQpIHtcblx0XHRcdGlmIChyZWZpbGxBbW91bnQgIT09IHZvaWQgMCB8fCByZWZpbGxJbnRlcnZhbCAhPT0gdm9pZCAwIHx8IHJhdGVMaW1pdE1heCAhPT0gdm9pZCAwIHx8IHJhdGVMaW1pdFRpbWVXaW5kb3cgIT09IHZvaWQgMCB8fCByYXRlTGltaXRFbmFibGVkICE9PSB2b2lkIDAgfHwgcGVybWlzc2lvbnMgIT09IHZvaWQgMCB8fCByZW1haW5pbmcgIT09IG51bGwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuU0VSVkVSX09OTFlfUFJPUEVSVFkgfSk7XG5cdFx0fVxuXHRcdGlmIChtZXRhZGF0YSkge1xuXHRcdFx0aWYgKG9wdHMuZW5hYmxlTWV0YWRhdGEgPT09IGZhbHNlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLk1FVEFEQVRBX0RJU0FCTEVEIH0pO1xuXHRcdFx0aWYgKHR5cGVvZiBtZXRhZGF0YSAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX01FVEFEQVRBX1RZUEUgfSk7XG5cdFx0fVxuXHRcdGlmIChyZWZpbGxBbW91bnQgJiYgIXJlZmlsbEludGVydmFsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlJFRklMTF9BTU9VTlRfQU5EX0lOVEVSVkFMX1JFUVVJUkVEIH0pO1xuXHRcdGlmIChyZWZpbGxJbnRlcnZhbCAmJiAhcmVmaWxsQW1vdW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlJFRklMTF9JTlRFUlZBTF9BTkRfQU1PVU5UX1JFUVVJUkVEIH0pO1xuXHRcdGlmIChleHBpcmVzSW4pIHtcblx0XHRcdGlmIChvcHRzLmtleUV4cGlyYXRpb24uZGlzYWJsZUN1c3RvbUV4cGlyZXNUaW1lID09PSB0cnVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLktFWV9ESVNBQkxFRF9FWFBJUkFUSU9OIH0pO1xuXHRcdFx0Y29uc3QgZXhwaXJlc0luX2luX2RheXMgPSBleHBpcmVzSW4gLyAoMzYwMCAqIDI0KTtcblx0XHRcdGlmIChvcHRzLmtleUV4cGlyYXRpb24ubWluRXhwaXJlc0luID4gZXhwaXJlc0luX2luX2RheXMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuRVhQSVJFU19JTl9JU19UT09fU01BTEwgfSk7XG5cdFx0XHRlbHNlIGlmIChvcHRzLmtleUV4cGlyYXRpb24ubWF4RXhwaXJlc0luIDwgZXhwaXJlc0luX2luX2RheXMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuRVhQSVJFU19JTl9JU19UT09fTEFSR0UgfSk7XG5cdFx0fVxuXHRcdGlmIChwcmVmaXgpIHtcblx0XHRcdGlmIChwcmVmaXgubGVuZ3RoIDwgb3B0cy5taW5pbXVtUHJlZml4TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfUFJFRklYX0xFTkdUSCB9KTtcblx0XHRcdGlmIChwcmVmaXgubGVuZ3RoID4gb3B0cy5tYXhpbXVtUHJlZml4TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfUFJFRklYX0xFTkdUSCB9KTtcblx0XHR9XG5cdFx0aWYgKG5hbWUpIHtcblx0XHRcdGlmIChuYW1lLmxlbmd0aCA8IG9wdHMubWluaW11bU5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9OQU1FX0xFTkdUSCB9KTtcblx0XHRcdGlmIChuYW1lLmxlbmd0aCA+IG9wdHMubWF4aW11bU5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9OQU1FX0xFTkdUSCB9KTtcblx0XHR9IGVsc2UgaWYgKG9wdHMucmVxdWlyZU5hbWUpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuTkFNRV9SRVFVSVJFRCB9KTtcblx0XHRkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyhjdHguY29udGV4dCk7XG5cdFx0Y29uc3Qga2V5ID0gYXdhaXQga2V5R2VuZXJhdG9yKHtcblx0XHRcdGxlbmd0aDogb3B0cy5kZWZhdWx0S2V5TGVuZ3RoLFxuXHRcdFx0cHJlZml4OiBwcmVmaXggfHwgb3B0cy5kZWZhdWx0UHJlZml4XG5cdFx0fSk7XG5cdFx0Y29uc3QgaGFzaGVkID0gb3B0cy5kaXNhYmxlS2V5SGFzaGluZyA/IGtleSA6IGF3YWl0IGRlZmF1bHRLZXlIYXNoZXIoa2V5KTtcblx0XHRsZXQgc3RhcnQgPSBudWxsO1xuXHRcdGlmIChvcHRzLnN0YXJ0aW5nQ2hhcmFjdGVyc0NvbmZpZy5zaG91bGRTdG9yZSkgc3RhcnQgPSBrZXkuc3Vic3RyaW5nKDAsIG9wdHMuc3RhcnRpbmdDaGFyYWN0ZXJzQ29uZmlnLmNoYXJhY3RlcnNMZW5ndGgpO1xuXHRcdGNvbnN0IGRlZmF1bHRQZXJtaXNzaW9ucyA9IG9wdHMucGVybWlzc2lvbnM/LmRlZmF1bHRQZXJtaXNzaW9ucyA/IHR5cGVvZiBvcHRzLnBlcm1pc3Npb25zLmRlZmF1bHRQZXJtaXNzaW9ucyA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgb3B0cy5wZXJtaXNzaW9ucy5kZWZhdWx0UGVybWlzc2lvbnModXNlci5pZCwgY3R4KSA6IG9wdHMucGVybWlzc2lvbnMuZGVmYXVsdFBlcm1pc3Npb25zIDogdm9pZCAwO1xuXHRcdGNvbnN0IHBlcm1pc3Npb25zVG9BcHBseSA9IHBlcm1pc3Npb25zID8gSlNPTi5zdHJpbmdpZnkocGVybWlzc2lvbnMpIDogZGVmYXVsdFBlcm1pc3Npb25zID8gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFBlcm1pc3Npb25zKSA6IHZvaWQgMDtcblx0XHRjb25zdCBkYXRhID0ge1xuXHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRuYW1lOiBuYW1lID8/IG51bGwsXG5cdFx0XHRwcmVmaXg6IHByZWZpeCA/PyBvcHRzLmRlZmF1bHRQcmVmaXggPz8gbnVsbCxcblx0XHRcdHN0YXJ0LFxuXHRcdFx0a2V5OiBoYXNoZWQsXG5cdFx0XHRlbmFibGVkOiB0cnVlLFxuXHRcdFx0ZXhwaXJlc0F0OiBleHBpcmVzSW4gPyBnZXREYXRlKGV4cGlyZXNJbiwgXCJzZWNcIikgOiBvcHRzLmtleUV4cGlyYXRpb24uZGVmYXVsdEV4cGlyZXNJbiA/IGdldERhdGUob3B0cy5rZXlFeHBpcmF0aW9uLmRlZmF1bHRFeHBpcmVzSW4sIFwic2VjXCIpIDogbnVsbCxcblx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdGxhc3RSZWZpbGxBdDogbnVsbCxcblx0XHRcdGxhc3RSZXF1ZXN0OiBudWxsLFxuXHRcdFx0bWV0YWRhdGE6IG51bGwsXG5cdFx0XHRyYXRlTGltaXRNYXg6IHJhdGVMaW1pdE1heCA/PyBvcHRzLnJhdGVMaW1pdC5tYXhSZXF1ZXN0cyA/PyBudWxsLFxuXHRcdFx0cmF0ZUxpbWl0VGltZVdpbmRvdzogcmF0ZUxpbWl0VGltZVdpbmRvdyA/PyBvcHRzLnJhdGVMaW1pdC50aW1lV2luZG93ID8/IG51bGwsXG5cdFx0XHRyZW1haW5pbmc6IHJlbWFpbmluZyA9PT0gbnVsbCA/IHJlbWFpbmluZyA6IHJlbWFpbmluZyA/PyByZWZpbGxBbW91bnQgPz8gbnVsbCxcblx0XHRcdHJlZmlsbEFtb3VudDogcmVmaWxsQW1vdW50ID8/IG51bGwsXG5cdFx0XHRyZWZpbGxJbnRlcnZhbDogcmVmaWxsSW50ZXJ2YWwgPz8gbnVsbCxcblx0XHRcdHJhdGVMaW1pdEVuYWJsZWQ6IHJhdGVMaW1pdEVuYWJsZWQgPT09IHZvaWQgMCA/IG9wdHMucmF0ZUxpbWl0LmVuYWJsZWQgPz8gdHJ1ZSA6IHJhdGVMaW1pdEVuYWJsZWQsXG5cdFx0XHRyZXF1ZXN0Q291bnQ6IDAsXG5cdFx0XHRwZXJtaXNzaW9uczogcGVybWlzc2lvbnNUb0FwcGx5XG5cdFx0fTtcblx0XHRpZiAobWV0YWRhdGEpIGRhdGEubWV0YWRhdGEgPSBtZXRhZGF0YTtcblx0XHRsZXQgYXBpS2V5O1xuXHRcdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIiAmJiBvcHRzLmZhbGxiYWNrVG9EYXRhYmFzZSkge1xuXHRcdFx0YXBpS2V5ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdFx0XHRkYXRhXG5cdFx0XHR9KTtcblx0XHRcdGF3YWl0IHNldEFwaUtleShjdHgsIGFwaUtleSwgb3B0cyk7XG5cdFx0fSBlbHNlIGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIikge1xuXHRcdFx0Y29uc3QgaWQgPSBjdHguY29udGV4dC5nZW5lcmF0ZUlkKHsgbW9kZWw6IEFQSV9LRVlfVEFCTEVfTkFNRSB9KSB8fCBnZW5lcmF0ZUlkJDEoKTtcblx0XHRcdGFwaUtleSA9IHtcblx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0aWRcblx0XHRcdH07XG5cdFx0XHRhd2FpdCBzZXRBcGlLZXkoY3R4LCBhcGlLZXksIG9wdHMpO1xuXHRcdH0gZWxzZSBhcGlLZXkgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdFx0ZGF0YVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHQuLi5hcGlLZXksXG5cdFx0XHRrZXksXG5cdFx0XHRtZXRhZGF0YTogbWV0YWRhdGEgPz8gbnVsbCxcblx0XHRcdHBlcm1pc3Npb25zOiBhcGlLZXkucGVybWlzc2lvbnMgPyBzYWZlSlNPTlBhcnNlKGFwaUtleS5wZXJtaXNzaW9ucykgOiBudWxsXG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUFwaUtleSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlLWFwaS1rZXkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/create-api-key.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-all-expired-api-keys.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/delete-all-expired-api-keys.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteAllExpiredApiKeysEndpoint: () => (/* binding */ deleteAllExpiredApiKeysEndpoint)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n//#region src/plugins/api-key/routes/delete-all-expired-api-keys.ts\nfunction deleteAllExpiredApiKeysEndpoint({ deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_0__.createAuthEndpoint)({ method: \"POST\" }, async (ctx) => {\n\t\ttry {\n\t\t\tawait deleteAllExpiredApiKeys(ctx.context, true);\n\t\t} catch (error) {\n\t\t\tctx.context.logger.error(\"[API KEY PLUGIN] Failed to delete expired API keys:\", error);\n\t\t\treturn ctx.json({\n\t\t\t\tsuccess: false,\n\t\t\t\terror\n\t\t\t});\n\t\t}\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\terror: null\n\t\t});\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=delete-all-expired-api-keys.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2RlbGV0ZS1hbGwtZXhwaXJlZC1hcGkta2V5cy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0EsMkNBQTJDLHlCQUF5QjtBQUNwRSxRQUFRLHlFQUFrQixHQUFHLGdCQUFnQjtBQUM3QztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcZGVsZXRlLWFsbC1leHBpcmVkLWFwaS1rZXlzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L3JvdXRlcy9kZWxldGUtYWxsLWV4cGlyZWQtYXBpLWtleXMudHNcbmZ1bmN0aW9uIGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzRW5kcG9pbnQoeyBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyB9KSB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoeyBtZXRob2Q6IFwiUE9TVFwiIH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMoY3R4LmNvbnRleHQsIHRydWUpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJbQVBJIEtFWSBQTFVHSU5dIEZhaWxlZCB0byBkZWxldGUgZXhwaXJlZCBBUEkga2V5czpcIiwgZXJyb3IpO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0c3VjY2VzczogZmFsc2UsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0XHRlcnJvcjogbnVsbFxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBkZWxldGVBbGxFeHBpcmVkQXBpS2V5c0VuZHBvaW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxldGUtYWxsLWV4cGlyZWQtYXBpLWtleXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-all-expired-api-keys.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-api-key.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/delete-api-key.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteApiKey: () => (/* binding */ deleteApiKey$1)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/delete-api-key.ts\nconst deleteApiKeyBodySchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({ keyId: zod__WEBPACK_IMPORTED_MODULE_5__.string().meta({ description: \"The id of the Api Key\" }) });\nfunction deleteApiKey$1({ opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthEndpoint)(\"/api-key/delete\", {\n\t\tmethod: \"POST\",\n\t\tbody: deleteApiKeyBodySchema,\n\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.sessionMiddleware],\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Delete an existing API key\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { keyId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The id of the API key to delete\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"keyId\"]\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API key deleted successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { success: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API key was successfully deleted\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"success\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst { keyId } = ctx.body;\n\t\tconst session = ctx.context.session;\n\t\tif (session.user.banned === true) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_3__.ERROR_CODES.USER_BANNED });\n\t\tlet apiKey = null;\n\t\tapiKey = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.getApiKeyById)(ctx, keyId, opts);\n\t\tif (!apiKey || apiKey.userId !== session.user.id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.APIError(\"NOT_FOUND\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_3__.ERROR_CODES.KEY_NOT_FOUND });\n\t\ttry {\n\t\t\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteApiKey)(ctx, apiKey, opts);\n\t\t\t\tawait ctx.context.adapter.delete({\n\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_3__.API_KEY_TABLE_NAME,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t} else if (opts.storage === \"database\") await ctx.context.adapter.delete({\n\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_3__.API_KEY_TABLE_NAME,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t}]\n\t\t\t});\n\t\t\telse await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteApiKey)(ctx, apiKey, opts);\n\t\t} catch (error) {\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", { message: error?.message });\n\t\t}\n\t\tdeleteAllExpiredApiKeys(ctx.context);\n\t\treturn ctx.json({ success: true });\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=delete-api-key.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2RlbGV0ZS1hcGkta2V5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9FO0FBQ2xCO0FBQ1c7QUFDRTtBQUN0QztBQUNrQzs7QUFFM0Q7QUFDQSwrQkFBK0IsdUNBQVEsR0FBRyxPQUFPLHVDQUFRLFVBQVUsc0NBQXNDLEdBQUc7QUFDNUcsMEJBQTBCLHVDQUF1QztBQUNqRSxRQUFRLHlFQUFrQjtBQUMxQjtBQUNBO0FBQ0EsUUFBUSxzRUFBaUI7QUFDekIsY0FBYztBQUNkO0FBQ0Esa0JBQWtCLFdBQVcsc0JBQXNCO0FBQ25EO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxVQUFVO0FBQ1YsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixVQUFVLFFBQVE7QUFDbEI7QUFDQSw4Q0FBOEMsb0RBQVEsbUJBQW1CLFNBQVMsbURBQVcsY0FBYztBQUMzRztBQUNBLGlCQUFpQiwyREFBYTtBQUM5Qiw4REFBOEQsb0RBQVEsZ0JBQWdCLFNBQVMsbURBQVcsZ0JBQWdCO0FBQzFIO0FBQ0E7QUFDQSxVQUFVLDBEQUFZO0FBQ3RCO0FBQ0EsWUFBWSwwREFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCxLQUFLO0FBQ0wsV0FBVywwREFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixjQUFjLDBEQUFZO0FBQzFCLElBQUk7QUFDSixhQUFhLG9EQUFRLDRCQUE0Qix5QkFBeUI7QUFDMUU7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DLEVBQUU7QUFDRjs7QUFFQTtBQUMwQztBQUMxQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcZGVsZXRlLWFwaS1rZXkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZUFwaUtleSwgZ2V0QXBpS2V5QnlJZCB9IGZyb20gXCIuLi9hZGFwdGVyLm1qc1wiO1xuaW1wb3J0IHsgQVBJX0tFWV9UQUJMRV9OQU1FLCBFUlJPUl9DT0RFUyB9IGZyb20gXCIuLi9pbmRleC5tanNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYXBpLWtleS9yb3V0ZXMvZGVsZXRlLWFwaS1rZXkudHNcbmNvbnN0IGRlbGV0ZUFwaUtleUJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IGtleUlkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIEFwaSBLZXlcIiB9KSB9KTtcbmZ1bmN0aW9uIGRlbGV0ZUFwaUtleSQxKHsgb3B0cywgc2NoZW1hLCBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyB9KSB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYXBpLWtleS9kZWxldGVcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogZGVsZXRlQXBpS2V5Qm9keVNjaGVtYSxcblx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiRGVsZXRlIGFuIGV4aXN0aW5nIEFQSSBrZXlcIixcblx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsga2V5SWQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBpZCBvZiB0aGUgQVBJIGtleSB0byBkZWxldGVcIlxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJrZXlJZFwiXVxuXHRcdFx0fSB9IH0gfSxcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBrZXkgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2Vzczoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIEFQSSBrZXkgd2FzIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJcblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1Y2Nlc3NcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH0gfVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgeyBrZXlJZCB9ID0gY3R4LmJvZHk7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdFx0aWYgKHNlc3Npb24udXNlci5iYW5uZWQgPT09IHRydWUpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlVTRVJfQkFOTkVEIH0pO1xuXHRcdGxldCBhcGlLZXkgPSBudWxsO1xuXHRcdGFwaUtleSA9IGF3YWl0IGdldEFwaUtleUJ5SWQoY3R4LCBrZXlJZCwgb3B0cyk7XG5cdFx0aWYgKCFhcGlLZXkgfHwgYXBpS2V5LnVzZXJJZCAhPT0gc2Vzc2lvbi51c2VyLmlkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5LRVlfTk9UX0ZPVU5EIH0pO1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIgJiYgb3B0cy5mYWxsYmFja1RvRGF0YWJhc2UpIHtcblx0XHRcdFx0YXdhaXQgZGVsZXRlQXBpS2V5KGN0eCwgYXBpS2V5LCBvcHRzKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhcGlLZXkuaWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdFx0ZWxzZSBhd2FpdCBkZWxldGVBcGlLZXkoY3R4LCBhcGlLZXksIG9wdHMpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBlcnJvcj8ubWVzc2FnZSB9KTtcblx0XHR9XG5cdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMoY3R4LmNvbnRleHQpO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG5cdH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRlbGV0ZUFwaUtleSQxIGFzIGRlbGV0ZUFwaUtleSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsZXRlLWFwaS1rZXkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-api-key.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/get-api-key.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/get-api-key.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getApiKey: () => (/* binding */ getApiKey)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/get-api-key.ts\nconst getApiKeyQuerySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ id: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The id of the Api Key\" }) });\nfunction getApiKey({ opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/api-key/get\", {\n\t\tmethod: \"GET\",\n\t\tquery: getApiKeyQuerySchema,\n\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.sessionMiddleware],\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Retrieve an existing API key by ID\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API key retrieved successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"ID\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The name of the key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key.\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprefix: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The API Key prefix. Stored as plain text.\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The owner of the user id\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillInterval: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillAmount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The amount to refill\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRefillAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The last refill date\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Sets if key is enabled or disabled\",\n\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitEnabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Whether the key has rate limiting enabled\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitTimeWindow: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The duration in milliseconds\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitMax: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Maximum amount of requests allowed within a window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequestCount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tdescription: \"The number of requests made within the rate limit time window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tremaining: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Remaining requests (every time api key is used this should updated and should be updated on refill as well)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"When last request occurred\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\texpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Expiry date of a key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"created at\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"updated at\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\tdescription: \"Extra metadata about the apiKey\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Permissions for the api key (stored as JSON string)\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"enabled\",\n\t\t\t\t\t\t\"rateLimitEnabled\",\n\t\t\t\t\t\t\"requestCount\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst { id } = ctx.query;\n\t\tconst session = ctx.context.session;\n\t\tlet apiKey = null;\n\t\tapiKey = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.getApiKeyById)(ctx, id, opts);\n\t\tif (apiKey && apiKey.userId !== session.user.id) apiKey = null;\n\t\tif (!apiKey) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"NOT_FOUND\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_3__.ERROR_CODES.KEY_NOT_FOUND });\n\t\tdeleteAllExpiredApiKeys(ctx.context);\n\t\tconst metadata = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.migrateDoubleStringifiedMetadata)(ctx, apiKey, opts);\n\t\tconst { key: _key, ...returningApiKey } = apiKey;\n\t\treturn ctx.json({\n\t\t\t...returningApiKey,\n\t\t\tmetadata,\n\t\t\tpermissions: returningApiKey.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.safeJSONParse)(returningApiKey.permissions) : null\n\t\t});\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=get-api-key.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2dldC1hcGkta2V5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0U7QUFDcEM7QUFDaUQ7QUFDdEM7QUFDYTtBQUNqQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBLDZCQUE2Qix1Q0FBUSxHQUFHLElBQUksdUNBQVEsVUFBVSxzQ0FBc0MsR0FBRztBQUN2RyxxQkFBcUIsdUNBQXVDO0FBQzVELFFBQVEseUVBQWtCO0FBQzFCO0FBQ0E7QUFDQSxRQUFRLHNFQUFpQjtBQUN6QixjQUFjO0FBQ2Q7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsVUFBVSxLQUFLO0FBQ2Y7QUFDQTtBQUNBLGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBLHlCQUF5QixpREFBUSxnQkFBZ0IsU0FBUyxtREFBVyxnQkFBZ0I7QUFDckY7QUFDQSx5QkFBeUIsOEVBQWdDO0FBQ3pELFVBQVUsZ0NBQWdDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxzRUFBYTtBQUMzRCxHQUFHO0FBQ0gsRUFBRTtBQUNGOztBQUVBO0FBQ3FCO0FBQ3JCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYXBpLWtleVxccm91dGVzXFxnZXQtYXBpLWtleS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0QXBpS2V5QnlJZCwgbWlncmF0ZURvdWJsZVN0cmluZ2lmaWVkTWV0YWRhdGEgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IEVSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYXBpLWtleS9yb3V0ZXMvZ2V0LWFwaS1rZXkudHNcbmNvbnN0IGdldEFwaUtleVF1ZXJ5U2NoZW1hID0gei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGlkIG9mIHRoZSBBcGkgS2V5XCIgfSkgfSk7XG5mdW5jdGlvbiBnZXRBcGlLZXkoeyBvcHRzLCBzY2hlbWEsIGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzIH0pIHtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hcGkta2V5L2dldFwiLCB7XG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdHF1ZXJ5OiBnZXRBcGlLZXlRdWVyeVNjaGVtYSxcblx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiUmV0cmlldmUgYW4gZXhpc3RpbmcgQVBJIGtleSBieSBJRFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQVBJIGtleSByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJRFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIGtleVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3RhcnQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNob3dzIHRoZSBmaXJzdCBmZXcgY2hhcmFjdGVycyBvZiB0aGUgQVBJIGtleSwgaW5jbHVkaW5nIHRoZSBwcmVmaXguIFRoaXMgYWxsb3dzIHlvdSB0byBzaG93IHRob3NlIGZldyBjaGFyYWN0ZXJzIGluIHRoZSBVSSB0byBtYWtlIGl0IGVhc2llciBmb3IgdXNlcnMgdG8gaWRlbnRpZnkgdGhlIEFQSSBrZXkuXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwcmVmaXg6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBBUEkgS2V5IHByZWZpeC4gU3RvcmVkIGFzIHBsYWluIHRleHQuXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG93bmVyIG9mIHRoZSB1c2VyIGlkXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZWZpbGxJbnRlcnZhbDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGludGVydmFsIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHJlZmlsbHMgb2YgdGhlIGByZW1haW5pbmdgIGNvdW50LiBFeGFtcGxlOiAzNjAwMDAwIC8vIHJlZmlsbCBldmVyeSBob3VyICgzNjAwMDAwbXMgPSAxaClcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlZmlsbEFtb3VudDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGFtb3VudCB0byByZWZpbGxcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGxhc3RSZWZpbGxBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbGFzdCByZWZpbGwgZGF0ZVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZW5hYmxlZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2V0cyBpZiBrZXkgaXMgZW5hYmxlZCBvciBkaXNhYmxlZFwiLFxuXHRcdFx0XHRcdFx0XHRkZWZhdWx0OiB0cnVlXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmF0ZUxpbWl0RW5hYmxlZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUga2V5IGhhcyByYXRlIGxpbWl0aW5nIGVuYWJsZWRcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJhdGVMaW1pdFRpbWVXaW5kb3c6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJhdGVMaW1pdE1heDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTWF4aW11bSBhbW91bnQgb2YgcmVxdWVzdHMgYWxsb3dlZCB3aXRoaW4gYSB3aW5kb3dcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVlc3RDb3VudDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbnVtYmVyIG9mIHJlcXVlc3RzIG1hZGUgd2l0aGluIHRoZSByYXRlIGxpbWl0IHRpbWUgd2luZG93XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZW1haW5pbmc6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlJlbWFpbmluZyByZXF1ZXN0cyAoZXZlcnkgdGltZSBhcGkga2V5IGlzIHVzZWQgdGhpcyBzaG91bGQgdXBkYXRlZCBhbmQgc2hvdWxkIGJlIHVwZGF0ZWQgb24gcmVmaWxsIGFzIHdlbGwpXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRsYXN0UmVxdWVzdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIGxhc3QgcmVxdWVzdCBvY2N1cnJlZFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkV4cGlyeSBkYXRlIG9mIGEga2V5XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJjcmVhdGVkIGF0XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJ1cGRhdGVkIGF0XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0YWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkV4dHJhIG1ldGFkYXRhIGFib3V0IHRoZSBhcGlLZXlcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBlcm1pc3Npb25zOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJQZXJtaXNzaW9ucyBmb3IgdGhlIGFwaSBrZXkgKHN0b3JlZCBhcyBKU09OIHN0cmluZylcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHRcImVuYWJsZWRcIixcblx0XHRcdFx0XHRcdFwicmF0ZUxpbWl0RW5hYmxlZFwiLFxuXHRcdFx0XHRcdFx0XCJyZXF1ZXN0Q291bnRcIixcblx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fSB9XG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRjb25zdCB7IGlkIH0gPSBjdHgucXVlcnk7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdFx0bGV0IGFwaUtleSA9IG51bGw7XG5cdFx0YXBpS2V5ID0gYXdhaXQgZ2V0QXBpS2V5QnlJZChjdHgsIGlkLCBvcHRzKTtcblx0XHRpZiAoYXBpS2V5ICYmIGFwaUtleS51c2VySWQgIT09IHNlc3Npb24udXNlci5pZCkgYXBpS2V5ID0gbnVsbDtcblx0XHRpZiAoIWFwaUtleSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX05PVF9GT1VORCB9KTtcblx0XHRkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyhjdHguY29udGV4dCk7XG5cdFx0Y29uc3QgbWV0YWRhdGEgPSBhd2FpdCBtaWdyYXRlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YShjdHgsIGFwaUtleSwgb3B0cyk7XG5cdFx0Y29uc3QgeyBrZXk6IF9rZXksIC4uLnJldHVybmluZ0FwaUtleSB9ID0gYXBpS2V5O1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHQuLi5yZXR1cm5pbmdBcGlLZXksXG5cdFx0XHRtZXRhZGF0YSxcblx0XHRcdHBlcm1pc3Npb25zOiByZXR1cm5pbmdBcGlLZXkucGVybWlzc2lvbnMgPyBzYWZlSlNPTlBhcnNlKHJldHVybmluZ0FwaUtleS5wZXJtaXNzaW9ucykgOiBudWxsXG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEFwaUtleSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0LWFwaS1rZXkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/get-api-key.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApiKeyRoutes: () => (/* binding */ createApiKeyRoutes),\n/* harmony export */   deleteAllExpiredApiKeys: () => (/* binding */ deleteAllExpiredApiKeys)\n/* harmony export */ });\n/* harmony import */ var _create_api_key_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./create-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/create-api-key.mjs\");\n/* harmony import */ var _delete_all_expired_api_keys_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./delete-all-expired-api-keys.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-all-expired-api-keys.mjs\");\n/* harmony import */ var _delete_api_key_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./delete-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/delete-api-key.mjs\");\n/* harmony import */ var _get_api_key_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./get-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/get-api-key.mjs\");\n/* harmony import */ var _list_api_keys_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./list-api-keys.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/list-api-keys.mjs\");\n/* harmony import */ var _update_api_key_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./update-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/update-api-key.mjs\");\n/* harmony import */ var _verify_api_key_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./verify-api-key.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/verify-api-key.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/index.ts\nlet lastChecked = null;\nasync function deleteAllExpiredApiKeys(ctx, byPassLastCheckTime = false) {\n\tif (lastChecked && !byPassLastCheckTime) {\n\t\tif ((/* @__PURE__ */ new Date()).getTime() - lastChecked.getTime() < 1e4) return;\n\t}\n\tlastChecked = /* @__PURE__ */ new Date();\n\tawait ctx.adapter.deleteMany({\n\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_7__.API_KEY_TABLE_NAME,\n\t\twhere: [{\n\t\t\tfield: \"expiresAt\",\n\t\t\toperator: \"lt\",\n\t\t\tvalue: /* @__PURE__ */ new Date()\n\t\t}, {\n\t\t\tfield: \"expiresAt\",\n\t\t\toperator: \"ne\",\n\t\t\tvalue: null\n\t\t}]\n\t}).catch((error) => {\n\t\tctx.logger.error(`Failed to delete expired API keys:`, error);\n\t});\n}\nfunction createApiKeyRoutes({ keyGenerator, opts, schema }) {\n\treturn {\n\t\tcreateApiKey: (0,_create_api_key_mjs__WEBPACK_IMPORTED_MODULE_0__.createApiKey)({\n\t\t\tkeyGenerator,\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tverifyApiKey: (0,_verify_api_key_mjs__WEBPACK_IMPORTED_MODULE_6__.verifyApiKey)({\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tgetApiKey: (0,_get_api_key_mjs__WEBPACK_IMPORTED_MODULE_3__.getApiKey)({\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tupdateApiKey: (0,_update_api_key_mjs__WEBPACK_IMPORTED_MODULE_5__.updateApiKey)({\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tdeleteApiKey: (0,_delete_api_key_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteApiKey)({\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tlistApiKeys: (0,_list_api_keys_mjs__WEBPACK_IMPORTED_MODULE_4__.listApiKeys)({\n\t\t\topts,\n\t\t\tschema,\n\t\t\tdeleteAllExpiredApiKeys\n\t\t}),\n\t\tdeleteAllExpiredApiKeys: (0,_delete_all_expired_api_keys_mjs__WEBPACK_IMPORTED_MODULE_1__.deleteAllExpiredApiKeysEndpoint)({ deleteAllExpiredApiKeys })\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ2dDO0FBQ2hDO0FBQ047QUFDSTtBQUNFO0FBQ0E7QUFDRjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMERBQWtCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQSw4QkFBOEIsNEJBQTRCO0FBQzFEO0FBQ0EsZ0JBQWdCLGlFQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixpRUFBWTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsYUFBYSwyREFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsZ0JBQWdCLGlFQUFZO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxnQkFBZ0IsaUVBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGVBQWUsK0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDJCQUEyQixpR0FBK0IsR0FBRyx5QkFBeUI7QUFDdEY7QUFDQTs7QUFFQTtBQUN1RDtBQUN2RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFwaUtleSB9IGZyb20gXCIuL2NyZWF0ZS1hcGkta2V5Lm1qc1wiO1xuaW1wb3J0IHsgZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNFbmRwb2ludCB9IGZyb20gXCIuL2RlbGV0ZS1hbGwtZXhwaXJlZC1hcGkta2V5cy5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZUFwaUtleSB9IGZyb20gXCIuL2RlbGV0ZS1hcGkta2V5Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0QXBpS2V5IH0gZnJvbSBcIi4vZ2V0LWFwaS1rZXkubWpzXCI7XG5pbXBvcnQgeyBsaXN0QXBpS2V5cyB9IGZyb20gXCIuL2xpc3QtYXBpLWtleXMubWpzXCI7XG5pbXBvcnQgeyB1cGRhdGVBcGlLZXkgfSBmcm9tIFwiLi91cGRhdGUtYXBpLWtleS5tanNcIjtcbmltcG9ydCB7IHZlcmlmeUFwaUtleSB9IGZyb20gXCIuL3ZlcmlmeS1hcGkta2V5Lm1qc1wiO1xuaW1wb3J0IHsgQVBJX0tFWV9UQUJMRV9OQU1FIH0gZnJvbSBcIi4uL2luZGV4Lm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYXBpLWtleS9yb3V0ZXMvaW5kZXgudHNcbmxldCBsYXN0Q2hlY2tlZCA9IG51bGw7XG5hc3luYyBmdW5jdGlvbiBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyhjdHgsIGJ5UGFzc0xhc3RDaGVja1RpbWUgPSBmYWxzZSkge1xuXHRpZiAobGFzdENoZWNrZWQgJiYgIWJ5UGFzc0xhc3RDaGVja1RpbWUpIHtcblx0XHRpZiAoKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSBsYXN0Q2hlY2tlZC5nZXRUaW1lKCkgPCAxZTQpIHJldHVybjtcblx0fVxuXHRsYXN0Q2hlY2tlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuXHRhd2FpdCBjdHguYWRhcHRlci5kZWxldGVNYW55KHtcblx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwiZXhwaXJlc0F0XCIsXG5cdFx0XHRvcGVyYXRvcjogXCJsdFwiLFxuXHRcdFx0dmFsdWU6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0fSwge1xuXHRcdFx0ZmllbGQ6IFwiZXhwaXJlc0F0XCIsXG5cdFx0XHRvcGVyYXRvcjogXCJuZVwiLFxuXHRcdFx0dmFsdWU6IG51bGxcblx0XHR9XVxuXHR9KS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRjdHgubG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIGV4cGlyZWQgQVBJIGtleXM6YCwgZXJyb3IpO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUFwaUtleVJvdXRlcyh7IGtleUdlbmVyYXRvciwgb3B0cywgc2NoZW1hIH0pIHtcblx0cmV0dXJuIHtcblx0XHRjcmVhdGVBcGlLZXk6IGNyZWF0ZUFwaUtleSh7XG5cdFx0XHRrZXlHZW5lcmF0b3IsXG5cdFx0XHRvcHRzLFxuXHRcdFx0c2NoZW1hLFxuXHRcdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9KSxcblx0XHR2ZXJpZnlBcGlLZXk6IHZlcmlmeUFwaUtleSh7XG5cdFx0XHRvcHRzLFxuXHRcdFx0c2NoZW1hLFxuXHRcdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9KSxcblx0XHRnZXRBcGlLZXk6IGdldEFwaUtleSh7XG5cdFx0XHRvcHRzLFxuXHRcdFx0c2NoZW1hLFxuXHRcdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9KSxcblx0XHR1cGRhdGVBcGlLZXk6IHVwZGF0ZUFwaUtleSh7XG5cdFx0XHRvcHRzLFxuXHRcdFx0c2NoZW1hLFxuXHRcdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9KSxcblx0XHRkZWxldGVBcGlLZXk6IGRlbGV0ZUFwaUtleSh7XG5cdFx0XHRvcHRzLFxuXHRcdFx0c2NoZW1hLFxuXHRcdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXNcblx0XHR9KSxcblx0XHRsaXN0QXBpS2V5czogbGlzdEFwaUtleXMoe1xuXHRcdFx0b3B0cyxcblx0XHRcdHNjaGVtYSxcblx0XHRcdGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzXG5cdFx0fSksXG5cdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXM6IGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzRW5kcG9pbnQoeyBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyB9KVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUFwaUtleVJvdXRlcywgZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/list-api-keys.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/list-api-keys.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   listApiKeys: () => (/* binding */ listApiKeys$1)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/list-api-keys.ts\nfunction listApiKeys$1({ opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthEndpoint)(\"/api-key/list\", {\n\t\tmethod: \"GET\",\n\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.sessionMiddleware],\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"List all API keys for the authenticated user\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API keys retrieved successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"array\",\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"ID\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The name of the key\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprefix: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The API Key prefix. Stored as plain text.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The owner of the user id\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trefillInterval: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trefillAmount: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The amount to refill\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlastRefillAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The last refill date\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tenabled: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Sets if key is enabled or disabled\",\n\t\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trateLimitEnabled: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the key has rate limiting enabled\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trateLimitTimeWindow: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The duration in milliseconds\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trateLimitMax: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Maximum amount of requests allowed within a window\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequestCount: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tdescription: \"The number of requests made within the rate limit time window\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tremaining: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Remaining requests (every time api key is used this should updated and should be updated on refill as well)\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"When last request occurred\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\texpiresAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Expiry date of a key\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"created at\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"updated at\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\t\tdescription: \"Extra metadata about the apiKey\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Permissions for the api key (stored as JSON string)\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\t\"enabled\",\n\t\t\t\t\t\t\t\"rateLimitEnabled\",\n\t\t\t\t\t\t\t\"requestCount\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst session = ctx.context.session;\n\t\tconst apiKeys = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.listApiKeys)(ctx, session.user.id, opts);\n\t\tdeleteAllExpiredApiKeys(ctx.context);\n\t\tconst returningApiKeys = apiKeys.map((apiKey) => {\n\t\t\tconst { key: _key, ...rest } = apiKey;\n\t\t\treturn {\n\t\t\t\t...rest,\n\t\t\t\tmetadata: (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.parseDoubleStringifiedMetadata)(apiKey.metadata),\n\t\t\t\tpermissions: rest.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.safeJSONParse)(rest.permissions) : null\n\t\t\t};\n\t\t});\n\t\tawait ctx.context.runInBackgroundOrAwait((0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.batchMigrateLegacyMetadata)(ctx, apiKeys, opts));\n\t\treturn ctx.json(returningApiKeys);\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=list-api-keys.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2xpc3QtYXBpLWtleXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRTtBQUNwQztBQUN5RTtBQUNqRDtBQUNHOztBQUUzRDtBQUNBLHlCQUF5Qix1Q0FBdUM7QUFDaEUsUUFBUSx5RUFBa0I7QUFDMUI7QUFDQSxRQUFRLHNFQUFpQjtBQUN6QixjQUFjO0FBQ2Q7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSx3QkFBd0IseURBQVc7QUFDbkM7QUFDQTtBQUNBLFdBQVcscUJBQXFCO0FBQ2hDO0FBQ0E7QUFDQSxjQUFjLDRFQUE4QjtBQUM1QyxvQ0FBb0Msc0VBQWE7QUFDakQ7QUFDQSxHQUFHO0FBQ0gsMkNBQTJDLHdFQUEwQjtBQUNyRTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcbGlzdC1hcGkta2V5cy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgYmF0Y2hNaWdyYXRlTGVnYWN5TWV0YWRhdGEsIGxpc3RBcGlLZXlzLCBwYXJzZURvdWJsZVN0cmluZ2lmaWVkTWV0YWRhdGEgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL2xpc3QtYXBpLWtleXMudHNcbmZ1bmN0aW9uIGxpc3RBcGlLZXlzJDEoeyBvcHRzLCBzY2hlbWEsIGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzIH0pIHtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hcGkta2V5L2xpc3RcIiwge1xuXHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgQVBJIGtleXMgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcIixcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBrZXlzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJRFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSBrZXlcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRzdGFydDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2hvd3MgdGhlIGZpcnN0IGZldyBjaGFyYWN0ZXJzIG9mIHRoZSBBUEkga2V5LCBpbmNsdWRpbmcgdGhlIHByZWZpeC4gVGhpcyBhbGxvd3MgeW91IHRvIHNob3cgdGhvc2UgZmV3IGNoYXJhY3RlcnMgaW4gdGhlIFVJIHRvIG1ha2UgaXQgZWFzaWVyIGZvciB1c2VycyB0byBpZGVudGlmeSB0aGUgQVBJIGtleS5cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRwcmVmaXg6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBBUEkgS2V5IHByZWZpeC4gU3RvcmVkIGFzIHBsYWluIHRleHQuXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dXNlcklkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgb3duZXIgb2YgdGhlIHVzZXIgaWRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZWZpbGxJbnRlcnZhbDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGludGVydmFsIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHJlZmlsbHMgb2YgdGhlIGByZW1haW5pbmdgIGNvdW50LiBFeGFtcGxlOiAzNjAwMDAwIC8vIHJlZmlsbCBldmVyeSBob3VyICgzNjAwMDAwbXMgPSAxaClcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZWZpbGxBbW91bnQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBhbW91bnQgdG8gcmVmaWxsXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bGFzdFJlZmlsbEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGxhc3QgcmVmaWxsIGRhdGVcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRlbmFibGVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2V0cyBpZiBrZXkgaXMgZW5hYmxlZCBvciBkaXNhYmxlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6IHRydWVcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmF0ZUxpbWl0RW5hYmxlZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGtleSBoYXMgcmF0ZSBsaW1pdGluZyBlbmFibGVkXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmF0ZUxpbWl0VGltZVdpbmRvdzoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kc1wiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHJhdGVMaW1pdE1heDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTWF4aW11bSBhbW91bnQgb2YgcmVxdWVzdHMgYWxsb3dlZCB3aXRoaW4gYSB3aW5kb3dcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0Q291bnQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBudW1iZXIgb2YgcmVxdWVzdHMgbWFkZSB3aXRoaW4gdGhlIHJhdGUgbGltaXQgdGltZSB3aW5kb3dcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZW1haW5pbmc6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm51bWJlclwiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlJlbWFpbmluZyByZXF1ZXN0cyAoZXZlcnkgdGltZSBhcGkga2V5IGlzIHVzZWQgdGhpcyBzaG91bGQgdXBkYXRlZCBhbmQgc2hvdWxkIGJlIHVwZGF0ZWQgb24gcmVmaWxsIGFzIHdlbGwpXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bGFzdFJlcXVlc3Q6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIGxhc3QgcmVxdWVzdCBvY2N1cnJlZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkV4cGlyeSBkYXRlIG9mIGEga2V5XCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiY3JlYXRlZCBhdFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcInVwZGF0ZWQgYXRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0YWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRXh0cmEgbWV0YWRhdGEgYWJvdXQgdGhlIGFwaUtleVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHBlcm1pc3Npb25zOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJQZXJtaXNzaW9ucyBmb3IgdGhlIGFwaSBrZXkgKHN0b3JlZCBhcyBKU09OIHN0cmluZylcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XHRcImVuYWJsZWRcIixcblx0XHRcdFx0XHRcdFx0XCJyYXRlTGltaXRFbmFibGVkXCIsXG5cdFx0XHRcdFx0XHRcdFwicmVxdWVzdENvdW50XCIsXG5cdFx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9IH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGNvbnN0IGFwaUtleXMgPSBhd2FpdCBsaXN0QXBpS2V5cyhjdHgsIHNlc3Npb24udXNlci5pZCwgb3B0cyk7XG5cdFx0ZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMoY3R4LmNvbnRleHQpO1xuXHRcdGNvbnN0IHJldHVybmluZ0FwaUtleXMgPSBhcGlLZXlzLm1hcCgoYXBpS2V5KSA9PiB7XG5cdFx0XHRjb25zdCB7IGtleTogX2tleSwgLi4ucmVzdCB9ID0gYXBpS2V5O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ucmVzdCxcblx0XHRcdFx0bWV0YWRhdGE6IHBhcnNlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YShhcGlLZXkubWV0YWRhdGEpLFxuXHRcdFx0XHRwZXJtaXNzaW9uczogcmVzdC5wZXJtaXNzaW9ucyA/IHNhZmVKU09OUGFyc2UocmVzdC5wZXJtaXNzaW9ucykgOiBudWxsXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoYmF0Y2hNaWdyYXRlTGVnYWN5TWV0YWRhdGEoY3R4LCBhcGlLZXlzLCBvcHRzKSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHJldHVybmluZ0FwaUtleXMpO1xuXHR9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBsaXN0QXBpS2V5cyQxIGFzIGxpc3RBcGlLZXlzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXN0LWFwaS1rZXlzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/list-api-keys.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/update-api-key.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/update-api-key.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateApiKey: () => (/* binding */ updateApiKey)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/update-api-key.ts\nconst updateApiKeyBodySchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n\tkeyId: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"The id of the Api Key\" }),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_8__.coerce.string().meta({ description: \"The id of the user which the api key belongs to. server-only. Eg: \\\"some-user-id\\\"\" }).optional(),\n\tname: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"The name of the key\" }).optional(),\n\tenabled: zod__WEBPACK_IMPORTED_MODULE_8__.boolean().meta({ description: \"Whether the Api Key is enabled or not\" }).optional(),\n\tremaining: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"The number of remaining requests\" }).min(1).optional(),\n\trefillAmount: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"The refill amount\" }).optional(),\n\trefillInterval: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"The refill interval\" }).optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_8__.any().optional(),\n\texpiresIn: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Expiration time of the Api Key in seconds\" }).min(1).optional().nullable(),\n\trateLimitEnabled: zod__WEBPACK_IMPORTED_MODULE_8__.boolean().meta({ description: \"Whether the key has rate limiting enabled.\" }).optional(),\n\trateLimitTimeWindow: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"The duration in milliseconds where each request is counted. server-only. Eg: 1000\" }).optional(),\n\trateLimitMax: zod__WEBPACK_IMPORTED_MODULE_8__.number().meta({ description: \"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100\" }).optional(),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string(), zod__WEBPACK_IMPORTED_MODULE_8__.array(zod__WEBPACK_IMPORTED_MODULE_8__.string())).meta({ description: \"Update the permissions on the API Key. server-only.\" }).optional().nullable()\n});\nfunction updateApiKey({ opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__.createAuthEndpoint)(\"/api-key/update\", {\n\t\tmethod: \"POST\",\n\t\tbody: updateApiKeyBodySchema,\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Update an existing API key by ID\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API key updated successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"ID\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The name of the key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key.\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprefix: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The API Key prefix. Stored as plain text.\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The owner of the user id\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillInterval: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefillAmount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The amount to refill\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRefillAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The last refill date\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tenabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Sets if key is enabled or disabled\",\n\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitEnabled: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Whether the key has rate limiting enabled\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitTimeWindow: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"The duration in milliseconds\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trateLimitMax: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Maximum amount of requests allowed within a window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequestCount: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tdescription: \"The number of requests made within the rate limit time window\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tremaining: {\n\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Remaining requests (every time api key is used this should updated and should be updated on refill as well)\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlastRequest: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"When last request occurred\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\texpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Expiry date of a key\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"created at\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"updated at\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\tdescription: \"Extra metadata about the apiKey\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Permissions for the api key (stored as JSON string)\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"enabled\",\n\t\t\t\t\t\t\"rateLimitEnabled\",\n\t\t\t\t\t\t\"requestCount\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst { keyId, expiresIn, enabled, metadata, refillAmount, refillInterval, remaining, name, permissions, rateLimitEnabled, rateLimitTimeWindow, rateLimitMax } = ctx.body;\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__.getSessionFromCtx)(ctx);\n\t\tconst authRequired = ctx.request || ctx.headers;\n\t\tconst user = authRequired && !session ? null : session?.user || { id: ctx.body.userId };\n\t\tif (!user?.id) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.UNAUTHORIZED_SESSION });\n\t\tif (session && ctx.body.userId && session?.user.id !== ctx.body.userId) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.UNAUTHORIZED_SESSION });\n\t\tif (authRequired) {\n\t\t\tif (refillAmount !== void 0 || refillInterval !== void 0 || rateLimitMax !== void 0 || rateLimitTimeWindow !== void 0 || rateLimitEnabled !== void 0 || remaining !== void 0 || permissions !== void 0) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.SERVER_ONLY_PROPERTY });\n\t\t}\n\t\tlet apiKey = null;\n\t\tapiKey = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getApiKeyById)(ctx, keyId, opts);\n\t\tif (apiKey && apiKey.userId !== user.id) apiKey = null;\n\t\tif (!apiKey) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.KEY_NOT_FOUND });\n\t\tconst newValues = {};\n\t\tif (name !== void 0) {\n\t\t\tif (name.length < opts.minimumNameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.INVALID_NAME_LENGTH });\n\t\t\telse if (name.length > opts.maximumNameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.INVALID_NAME_LENGTH });\n\t\t\tnewValues.name = name;\n\t\t}\n\t\tif (enabled !== void 0) newValues.enabled = enabled;\n\t\tif (expiresIn !== void 0) {\n\t\t\tif (opts.keyExpiration.disableCustomExpiresTime === true) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.KEY_DISABLED_EXPIRATION });\n\t\t\tif (expiresIn !== null) {\n\t\t\t\tconst expiresIn_in_days = expiresIn / (3600 * 24);\n\t\t\t\tif (expiresIn_in_days < opts.keyExpiration.minExpiresIn) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.EXPIRES_IN_IS_TOO_SMALL });\n\t\t\t\telse if (expiresIn_in_days > opts.keyExpiration.maxExpiresIn) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.EXPIRES_IN_IS_TOO_LARGE });\n\t\t\t}\n\t\t\tnewValues.expiresAt = expiresIn ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(expiresIn, \"sec\") : null;\n\t\t}\n\t\tif (metadata !== void 0 && opts.enableMetadata === true) {\n\t\t\tif (typeof metadata !== \"object\") throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.INVALID_METADATA_TYPE });\n\t\t\tnewValues.metadata = metadata;\n\t\t}\n\t\tif (remaining !== void 0) newValues.remaining = remaining;\n\t\tif (refillAmount !== void 0 || refillInterval !== void 0) {\n\t\t\tif (refillAmount !== void 0 && refillInterval === void 0) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.REFILL_AMOUNT_AND_INTERVAL_REQUIRED });\n\t\t\telse if (refillInterval !== void 0 && refillAmount === void 0) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.REFILL_INTERVAL_AND_AMOUNT_REQUIRED });\n\t\t\tnewValues.refillAmount = refillAmount;\n\t\t\tnewValues.refillInterval = refillInterval;\n\t\t}\n\t\tif (rateLimitEnabled !== void 0) newValues.rateLimitEnabled = rateLimitEnabled;\n\t\tif (rateLimitTimeWindow !== void 0) newValues.rateLimitTimeWindow = rateLimitTimeWindow;\n\t\tif (rateLimitMax !== void 0) newValues.rateLimitMax = rateLimitMax;\n\t\tif (permissions !== void 0) newValues.permissions = JSON.stringify(permissions);\n\t\tif (Object.keys(newValues).length === 0) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR_CODES.NO_VALUES_TO_UPDATE });\n\t\tlet newApiKey = apiKey;\n\t\ttry {\n\t\t\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\t\tconst dbUpdated = await ctx.context.adapter.update({\n\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.API_KEY_TABLE_NAME,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: newValues\n\t\t\t\t});\n\t\t\t\tif (dbUpdated) {\n\t\t\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.setApiKey)(ctx, dbUpdated, opts);\n\t\t\t\t\tnewApiKey = dbUpdated;\n\t\t\t\t}\n\t\t\t} else if (opts.storage === \"database\") {\n\t\t\t\tconst result = await ctx.context.adapter.update({\n\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_4__.API_KEY_TABLE_NAME,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: newValues\n\t\t\t\t});\n\t\t\t\tif (result) newApiKey = result;\n\t\t\t} else {\n\t\t\t\tconst updated = {\n\t\t\t\t\t...apiKey,\n\t\t\t\t\t...newValues,\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t};\n\t\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.setApiKey)(ctx, updated, opts);\n\t\t\t\tnewApiKey = updated;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: error?.message });\n\t\t}\n\t\tdeleteAllExpiredApiKeys(ctx.context);\n\t\tconst migratedMetadata = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.migrateDoubleStringifiedMetadata)(ctx, newApiKey, opts);\n\t\tconst { key: _key, ...returningApiKey } = newApiKey;\n\t\treturn ctx.json({\n\t\t\t...returningApiKey,\n\t\t\tmetadata: migratedMetadata,\n\t\t\tpermissions: returningApiKey.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(returningApiKey.permissions) : null\n\t\t});\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=update-api-key.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL3VwZGF0ZS1hcGkta2V5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ2tCO0FBQ3BDO0FBQzREO0FBQzdCO0FBQ1A7QUFDakI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQSwrQkFBK0IsdUNBQVE7QUFDdkMsUUFBUSx1Q0FBUSxVQUFVLHNDQUFzQztBQUNoRSxTQUFTLDhDQUFlLFVBQVUsbUdBQW1HO0FBQ3JJLE9BQU8sdUNBQVEsVUFBVSxvQ0FBb0M7QUFDN0QsVUFBVSx3Q0FBUyxVQUFVLHNEQUFzRDtBQUNuRixZQUFZLHVDQUFRLFVBQVUsaURBQWlEO0FBQy9FLGVBQWUsdUNBQVEsVUFBVSxrQ0FBa0M7QUFDbkUsaUJBQWlCLHVDQUFRLFVBQVUsb0NBQW9DO0FBQ3ZFLFdBQVcsb0NBQUs7QUFDaEIsWUFBWSx1Q0FBUSxVQUFVLDBEQUEwRDtBQUN4RixtQkFBbUIsd0NBQVMsVUFBVSwyREFBMkQ7QUFDakcsc0JBQXNCLHVDQUFRLFVBQVUsa0dBQWtHO0FBQzFJLGVBQWUsdUNBQVEsVUFBVSwyT0FBMk87QUFDNVEsY0FBYyx1Q0FBUSxDQUFDLHVDQUFRLElBQUksc0NBQU8sQ0FBQyx1Q0FBUSxZQUFZLG9FQUFvRTtBQUNuSSxDQUFDO0FBQ0Qsd0JBQXdCLHVDQUF1QztBQUMvRCxRQUFRLHlFQUFrQjtBQUMxQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLFVBQVUsdUpBQXVKO0FBQ2pLLHdCQUF3QiwwRUFBaUI7QUFDekM7QUFDQSxvRUFBb0U7QUFDcEUsMkJBQTJCLGlEQUFRLG1CQUFtQixTQUFTLG1EQUFXLHVCQUF1QjtBQUNqRyxvRkFBb0YsaURBQVEsbUJBQW1CLFNBQVMsbURBQVcsdUJBQXVCO0FBQzFKO0FBQ0EscU5BQXFOLGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLHVCQUF1QjtBQUMxUjtBQUNBO0FBQ0EsaUJBQWlCLDJEQUFhO0FBQzlCO0FBQ0EseUJBQXlCLGlEQUFRLGdCQUFnQixTQUFTLG1EQUFXLGdCQUFnQjtBQUNyRjtBQUNBO0FBQ0EsdURBQXVELGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLHNCQUFzQjtBQUMzSCw0REFBNEQsaURBQVEsa0JBQWtCLFNBQVMsbURBQVcsc0JBQXNCO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLDBCQUEwQjtBQUMvSTtBQUNBO0FBQ0EsdUVBQXVFLGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLDBCQUEwQjtBQUMvSSw0RUFBNEUsaURBQVEsa0JBQWtCLFNBQVMsbURBQVcsMEJBQTBCO0FBQ3BKO0FBQ0EscUNBQXFDLHdEQUFPO0FBQzVDO0FBQ0E7QUFDQSwrQ0FBK0MsaURBQVEsa0JBQWtCLFNBQVMsbURBQVcsd0JBQXdCO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLHNDQUFzQztBQUMzSiw0RUFBNEUsaURBQVEsa0JBQWtCLFNBQVMsbURBQVcsc0NBQXNDO0FBQ2hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGlEQUFRLGtCQUFrQixTQUFTLG1EQUFXLHNCQUFzQjtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMERBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVcsdURBQVM7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFlBQVksMERBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx1REFBUztBQUNuQjtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsaURBQVEsNEJBQTRCLHlCQUF5QjtBQUMxRTtBQUNBO0FBQ0EsaUNBQWlDLDhFQUFnQztBQUNqRSxVQUFVLGdDQUFnQztBQUMxQztBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsc0VBQWE7QUFDM0QsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcdXBkYXRlLWFwaS1rZXkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldEFwaUtleUJ5SWQsIG1pZ3JhdGVEb3VibGVTdHJpbmdpZmllZE1ldGFkYXRhLCBzZXRBcGlLZXkgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IEFQSV9LRVlfVEFCTEVfTkFNRSwgRVJST1JfQ09ERVMgfSBmcm9tIFwiLi4vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L3JvdXRlcy91cGRhdGUtYXBpLWtleS50c1xuY29uc3QgdXBkYXRlQXBpS2V5Qm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0a2V5SWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBpZCBvZiB0aGUgQXBpIEtleVwiIH0pLFxuXHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIHVzZXIgd2hpY2ggdGhlIGFwaSBrZXkgYmVsb25ncyB0by4gc2VydmVyLW9ubHkuIEVnOiBcXFwic29tZS11c2VyLWlkXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdG5hbWU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSBrZXlcIiB9KS5vcHRpb25hbCgpLFxuXHRlbmFibGVkOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgQXBpIEtleSBpcyBlbmFibGVkIG9yIG5vdFwiIH0pLm9wdGlvbmFsKCksXG5cdHJlbWFpbmluZzogei5udW1iZXIoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG51bWJlciBvZiByZW1haW5pbmcgcmVxdWVzdHNcIiB9KS5taW4oMSkub3B0aW9uYWwoKSxcblx0cmVmaWxsQW1vdW50OiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcmVmaWxsIGFtb3VudFwiIH0pLm9wdGlvbmFsKCksXG5cdHJlZmlsbEludGVydmFsOiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcmVmaWxsIGludGVydmFsXCIgfSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHouYW55KCkub3B0aW9uYWwoKSxcblx0ZXhwaXJlc0luOiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFeHBpcmF0aW9uIHRpbWUgb2YgdGhlIEFwaSBLZXkgaW4gc2Vjb25kc1wiIH0pLm1pbigxKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG5cdHJhdGVMaW1pdEVuYWJsZWQ6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBrZXkgaGFzIHJhdGUgbGltaXRpbmcgZW5hYmxlZC5cIiB9KS5vcHRpb25hbCgpLFxuXHRyYXRlTGltaXRUaW1lV2luZG93OiB6Lm51bWJlcigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIHdoZXJlIGVhY2ggcmVxdWVzdCBpcyBjb3VudGVkLiBzZXJ2ZXItb25seS4gRWc6IDEwMDBcIiB9KS5vcHRpb25hbCgpLFxuXHRyYXRlTGltaXRNYXg6IHoubnVtYmVyKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk1heGltdW0gYW1vdW50IG9mIHJlcXVlc3RzIGFsbG93ZWQgd2l0aGluIGEgd2luZG93LiBPbmNlIHRoZSBgbWF4UmVxdWVzdHNgIGlzIHJlYWNoZWQsIHRoZSByZXF1ZXN0IHdpbGwgYmUgcmVqZWN0ZWQgdW50aWwgdGhlIGB0aW1lV2luZG93YCBoYXMgcGFzc2VkLCBhdCB3aGljaCBwb2ludCB0aGUgYHRpbWVXaW5kb3dgIHdpbGwgYmUgcmVzZXQuIHNlcnZlci1vbmx5LiBFZzogMTAwXCIgfSkub3B0aW9uYWwoKSxcblx0cGVybWlzc2lvbnM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJVcGRhdGUgdGhlIHBlcm1pc3Npb25zIG9uIHRoZSBBUEkgS2V5LiBzZXJ2ZXItb25seS5cIiB9KS5vcHRpb25hbCgpLm51bGxhYmxlKClcbn0pO1xuZnVuY3Rpb24gdXBkYXRlQXBpS2V5KHsgb3B0cywgc2NoZW1hLCBkZWxldGVBbGxFeHBpcmVkQXBpS2V5cyB9KSB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvYXBpLWtleS91cGRhdGVcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogdXBkYXRlQXBpS2V5Qm9keVNjaGVtYSxcblx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJVcGRhdGUgYW4gZXhpc3RpbmcgQVBJIGtleSBieSBJRFwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQVBJIGtleSB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0aWQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSURcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSBrZXlcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN0YXJ0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTaG93cyB0aGUgZmlyc3QgZmV3IGNoYXJhY3RlcnMgb2YgdGhlIEFQSSBrZXksIGluY2x1ZGluZyB0aGUgcHJlZml4LiBUaGlzIGFsbG93cyB5b3UgdG8gc2hvdyB0aG9zZSBmZXcgY2hhcmFjdGVycyBpbiB0aGUgVUkgdG8gbWFrZSBpdCBlYXNpZXIgZm9yIHVzZXJzIHRvIGlkZW50aWZ5IHRoZSBBUEkga2V5LlwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cHJlZml4OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgQVBJIEtleSBwcmVmaXguIFN0b3JlZCBhcyBwbGFpbiB0ZXh0LlwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXNlcklkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBvd25lciBvZiB0aGUgdXNlciBpZFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVmaWxsSW50ZXJ2YWw6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiByZWZpbGxzIG9mIHRoZSBgcmVtYWluaW5nYCBjb3VudC4gRXhhbXBsZTogMzYwMDAwMCAvLyByZWZpbGwgZXZlcnkgaG91ciAoMzYwMDAwMG1zID0gMWgpXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZWZpbGxBbW91bnQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBhbW91bnQgdG8gcmVmaWxsXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRsYXN0UmVmaWxsQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGxhc3QgcmVmaWxsIGRhdGVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGVuYWJsZWQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNldHMgaWYga2V5IGlzIGVuYWJsZWQgb3IgZGlzYWJsZWRcIixcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDogdHJ1ZVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJhdGVMaW1pdEVuYWJsZWQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGtleSBoYXMgcmF0ZSBsaW1pdGluZyBlbmFibGVkXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyYXRlTGltaXRUaW1lV2luZG93OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyYXRlTGltaXRNYXg6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk1heGltdW0gYW1vdW50IG9mIHJlcXVlc3RzIGFsbG93ZWQgd2l0aGluIGEgd2luZG93XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1ZXN0Q291bnQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHdpdGhpbiB0aGUgcmF0ZSBsaW1pdCB0aW1lIHdpbmRvd1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVtYWluaW5nOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJSZW1haW5pbmcgcmVxdWVzdHMgKGV2ZXJ5IHRpbWUgYXBpIGtleSBpcyB1c2VkIHRoaXMgc2hvdWxkIHVwZGF0ZWQgYW5kIHNob3VsZCBiZSB1cGRhdGVkIG9uIHJlZmlsbCBhcyB3ZWxsKVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bGFzdFJlcXVlc3Q6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiBsYXN0IHJlcXVlc3Qgb2NjdXJyZWRcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFeHBpcnkgZGF0ZSBvZiBhIGtleVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiY3JlYXRlZCBhdFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwidXBkYXRlZCBhdFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFeHRyYSBtZXRhZGF0YSBhYm91dCB0aGUgYXBpS2V5XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwZXJtaXNzaW9uczoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUGVybWlzc2lvbnMgZm9yIHRoZSBhcGkga2V5IChzdG9yZWQgYXMgSlNPTiBzdHJpbmcpXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJlbmFibGVkXCIsXG5cdFx0XHRcdFx0XHRcInJhdGVMaW1pdEVuYWJsZWRcIixcblx0XHRcdFx0XHRcdFwicmVxdWVzdENvdW50XCIsXG5cdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH0gfVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgeyBrZXlJZCwgZXhwaXJlc0luLCBlbmFibGVkLCBtZXRhZGF0YSwgcmVmaWxsQW1vdW50LCByZWZpbGxJbnRlcnZhbCwgcmVtYWluaW5nLCBuYW1lLCBwZXJtaXNzaW9ucywgcmF0ZUxpbWl0RW5hYmxlZCwgcmF0ZUxpbWl0VGltZVdpbmRvdywgcmF0ZUxpbWl0TWF4IH0gPSBjdHguYm9keTtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRjb25zdCBhdXRoUmVxdWlyZWQgPSBjdHgucmVxdWVzdCB8fCBjdHguaGVhZGVycztcblx0XHRjb25zdCB1c2VyID0gYXV0aFJlcXVpcmVkICYmICFzZXNzaW9uID8gbnVsbCA6IHNlc3Npb24/LnVzZXIgfHwgeyBpZDogY3R4LmJvZHkudXNlcklkIH07XG5cdFx0aWYgKCF1c2VyPy5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuVU5BVVRIT1JJWkVEX1NFU1NJT04gfSk7XG5cdFx0aWYgKHNlc3Npb24gJiYgY3R4LmJvZHkudXNlcklkICYmIHNlc3Npb24/LnVzZXIuaWQgIT09IGN0eC5ib2R5LnVzZXJJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuVU5BVVRIT1JJWkVEX1NFU1NJT04gfSk7XG5cdFx0aWYgKGF1dGhSZXF1aXJlZCkge1xuXHRcdFx0aWYgKHJlZmlsbEFtb3VudCAhPT0gdm9pZCAwIHx8IHJlZmlsbEludGVydmFsICE9PSB2b2lkIDAgfHwgcmF0ZUxpbWl0TWF4ICE9PSB2b2lkIDAgfHwgcmF0ZUxpbWl0VGltZVdpbmRvdyAhPT0gdm9pZCAwIHx8IHJhdGVMaW1pdEVuYWJsZWQgIT09IHZvaWQgMCB8fCByZW1haW5pbmcgIT09IHZvaWQgMCB8fCBwZXJtaXNzaW9ucyAhPT0gdm9pZCAwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlNFUlZFUl9PTkxZX1BST1BFUlRZIH0pO1xuXHRcdH1cblx0XHRsZXQgYXBpS2V5ID0gbnVsbDtcblx0XHRhcGlLZXkgPSBhd2FpdCBnZXRBcGlLZXlCeUlkKGN0eCwga2V5SWQsIG9wdHMpO1xuXHRcdGlmIChhcGlLZXkgJiYgYXBpS2V5LnVzZXJJZCAhPT0gdXNlci5pZCkgYXBpS2V5ID0gbnVsbDtcblx0XHRpZiAoIWFwaUtleSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX05PVF9GT1VORCB9KTtcblx0XHRjb25zdCBuZXdWYWx1ZXMgPSB7fTtcblx0XHRpZiAobmFtZSAhPT0gdm9pZCAwKSB7XG5cdFx0XHRpZiAobmFtZS5sZW5ndGggPCBvcHRzLm1pbmltdW1OYW1lTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfTkFNRV9MRU5HVEggfSk7XG5cdFx0XHRlbHNlIGlmIChuYW1lLmxlbmd0aCA+IG9wdHMubWF4aW11bU5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9OQU1FX0xFTkdUSCB9KTtcblx0XHRcdG5ld1ZhbHVlcy5uYW1lID0gbmFtZTtcblx0XHR9XG5cdFx0aWYgKGVuYWJsZWQgIT09IHZvaWQgMCkgbmV3VmFsdWVzLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdGlmIChleHBpcmVzSW4gIT09IHZvaWQgMCkge1xuXHRcdFx0aWYgKG9wdHMua2V5RXhwaXJhdGlvbi5kaXNhYmxlQ3VzdG9tRXhwaXJlc1RpbWUgPT09IHRydWUpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX0RJU0FCTEVEX0VYUElSQVRJT04gfSk7XG5cdFx0XHRpZiAoZXhwaXJlc0luICE9PSBudWxsKSB7XG5cdFx0XHRcdGNvbnN0IGV4cGlyZXNJbl9pbl9kYXlzID0gZXhwaXJlc0luIC8gKDM2MDAgKiAyNCk7XG5cdFx0XHRcdGlmIChleHBpcmVzSW5faW5fZGF5cyA8IG9wdHMua2V5RXhwaXJhdGlvbi5taW5FeHBpcmVzSW4pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuRVhQSVJFU19JTl9JU19UT09fU01BTEwgfSk7XG5cdFx0XHRcdGVsc2UgaWYgKGV4cGlyZXNJbl9pbl9kYXlzID4gb3B0cy5rZXlFeHBpcmF0aW9uLm1heEV4cGlyZXNJbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5FWFBJUkVTX0lOX0lTX1RPT19MQVJHRSB9KTtcblx0XHRcdH1cblx0XHRcdG5ld1ZhbHVlcy5leHBpcmVzQXQgPSBleHBpcmVzSW4gPyBnZXREYXRlKGV4cGlyZXNJbiwgXCJzZWNcIikgOiBudWxsO1xuXHRcdH1cblx0XHRpZiAobWV0YWRhdGEgIT09IHZvaWQgMCAmJiBvcHRzLmVuYWJsZU1ldGFkYXRhID09PSB0cnVlKSB7XG5cdFx0XHRpZiAodHlwZW9mIG1ldGFkYXRhICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfTUVUQURBVEFfVFlQRSB9KTtcblx0XHRcdG5ld1ZhbHVlcy5tZXRhZGF0YSA9IG1ldGFkYXRhO1xuXHRcdH1cblx0XHRpZiAocmVtYWluaW5nICE9PSB2b2lkIDApIG5ld1ZhbHVlcy5yZW1haW5pbmcgPSByZW1haW5pbmc7XG5cdFx0aWYgKHJlZmlsbEFtb3VudCAhPT0gdm9pZCAwIHx8IHJlZmlsbEludGVydmFsICE9PSB2b2lkIDApIHtcblx0XHRcdGlmIChyZWZpbGxBbW91bnQgIT09IHZvaWQgMCAmJiByZWZpbGxJbnRlcnZhbCA9PT0gdm9pZCAwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLlJFRklMTF9BTU9VTlRfQU5EX0lOVEVSVkFMX1JFUVVJUkVEIH0pO1xuXHRcdFx0ZWxzZSBpZiAocmVmaWxsSW50ZXJ2YWwgIT09IHZvaWQgMCAmJiByZWZpbGxBbW91bnQgPT09IHZvaWQgMCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5SRUZJTExfSU5URVJWQUxfQU5EX0FNT1VOVF9SRVFVSVJFRCB9KTtcblx0XHRcdG5ld1ZhbHVlcy5yZWZpbGxBbW91bnQgPSByZWZpbGxBbW91bnQ7XG5cdFx0XHRuZXdWYWx1ZXMucmVmaWxsSW50ZXJ2YWwgPSByZWZpbGxJbnRlcnZhbDtcblx0XHR9XG5cdFx0aWYgKHJhdGVMaW1pdEVuYWJsZWQgIT09IHZvaWQgMCkgbmV3VmFsdWVzLnJhdGVMaW1pdEVuYWJsZWQgPSByYXRlTGltaXRFbmFibGVkO1xuXHRcdGlmIChyYXRlTGltaXRUaW1lV2luZG93ICE9PSB2b2lkIDApIG5ld1ZhbHVlcy5yYXRlTGltaXRUaW1lV2luZG93ID0gcmF0ZUxpbWl0VGltZVdpbmRvdztcblx0XHRpZiAocmF0ZUxpbWl0TWF4ICE9PSB2b2lkIDApIG5ld1ZhbHVlcy5yYXRlTGltaXRNYXggPSByYXRlTGltaXRNYXg7XG5cdFx0aWYgKHBlcm1pc3Npb25zICE9PSB2b2lkIDApIG5ld1ZhbHVlcy5wZXJtaXNzaW9ucyA9IEpTT04uc3RyaW5naWZ5KHBlcm1pc3Npb25zKTtcblx0XHRpZiAoT2JqZWN0LmtleXMobmV3VmFsdWVzKS5sZW5ndGggPT09IDApIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuTk9fVkFMVUVTX1RPX1VQREFURSB9KTtcblx0XHRsZXQgbmV3QXBpS2V5ID0gYXBpS2V5O1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIgJiYgb3B0cy5mYWxsYmFja1RvRGF0YWJhc2UpIHtcblx0XHRcdFx0Y29uc3QgZGJVcGRhdGVkID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0XHRcdH1dLFxuXHRcdFx0XHRcdHVwZGF0ZTogbmV3VmFsdWVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoZGJVcGRhdGVkKSB7XG5cdFx0XHRcdFx0YXdhaXQgc2V0QXBpS2V5KGN0eCwgZGJVcGRhdGVkLCBvcHRzKTtcblx0XHRcdFx0XHRuZXdBcGlLZXkgPSBkYlVwZGF0ZWQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAob3B0cy5zdG9yYWdlID09PSBcImRhdGFiYXNlXCIpIHtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0XHRcdH1dLFxuXHRcdFx0XHRcdHVwZGF0ZTogbmV3VmFsdWVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAocmVzdWx0KSBuZXdBcGlLZXkgPSByZXN1bHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkID0ge1xuXHRcdFx0XHRcdC4uLmFwaUtleSxcblx0XHRcdFx0XHQuLi5uZXdWYWx1ZXMsXG5cdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRhd2FpdCBzZXRBcGlLZXkoY3R4LCB1cGRhdGVkLCBvcHRzKTtcblx0XHRcdFx0bmV3QXBpS2V5ID0gdXBkYXRlZDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UgfSk7XG5cdFx0fVxuXHRcdGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzKGN0eC5jb250ZXh0KTtcblx0XHRjb25zdCBtaWdyYXRlZE1ldGFkYXRhID0gYXdhaXQgbWlncmF0ZURvdWJsZVN0cmluZ2lmaWVkTWV0YWRhdGEoY3R4LCBuZXdBcGlLZXksIG9wdHMpO1xuXHRcdGNvbnN0IHsga2V5OiBfa2V5LCAuLi5yZXR1cm5pbmdBcGlLZXkgfSA9IG5ld0FwaUtleTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0Li4ucmV0dXJuaW5nQXBpS2V5LFxuXHRcdFx0bWV0YWRhdGE6IG1pZ3JhdGVkTWV0YWRhdGEsXG5cdFx0XHRwZXJtaXNzaW9uczogcmV0dXJuaW5nQXBpS2V5LnBlcm1pc3Npb25zID8gc2FmZUpTT05QYXJzZShyZXR1cm5pbmdBcGlLZXkucGVybWlzc2lvbnMpIDogbnVsbFxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1cGRhdGVBcGlLZXkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZS1hcGkta2V5Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/update-api-key.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/verify-api-key.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/routes/verify-api-key.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateApiKey: () => (/* binding */ validateApiKey),\n/* harmony export */   verifyApiKey: () => (/* binding */ verifyApiKey)\n/* harmony export */ });\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../access/access.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/adapter.mjs\");\n/* harmony import */ var _rate_limit_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../rate-limit.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/rate-limit.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/api-key/routes/verify-api-key.ts\nasync function validateApiKey({ hashedKey, ctx, opts, schema, permissions }) {\n\tconst apiKey = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getApiKey)(ctx, hashedKey, opts);\n\tif (!apiKey) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", { message: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_API_KEY });\n\tif (apiKey.enabled === false) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", {\n\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.KEY_DISABLED,\n\t\tcode: \"KEY_DISABLED\"\n\t});\n\tif (apiKey.expiresAt) {\n\t\tif (Date.now() > new Date(apiKey.expiresAt).getTime()) {\n\t\t\tconst deleteExpiredKey = async () => {\n\t\t\t\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteApiKey)(ctx, apiKey, opts);\n\t\t\t\t\tawait ctx.context.adapter.delete({\n\t\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t} else if (opts.storage === \"secondary-storage\") await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteApiKey)(ctx, apiKey, opts);\n\t\t\t\telse await ctx.context.adapter.delete({\n\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (opts.deferUpdates) ctx.context.runInBackground(deleteExpiredKey().catch((error) => {\n\t\t\t\tctx.context.logger.error(\"Deferred update failed:\", error);\n\t\t\t}));\n\t\t\telse await deleteExpiredKey();\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.KEY_EXPIRED,\n\t\t\t\tcode: \"KEY_EXPIRED\"\n\t\t\t});\n\t\t}\n\t}\n\tif (permissions) {\n\t\tconst apiKeyPermissions = apiKey.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__.safeJSONParse)(apiKey.permissions) : null;\n\t\tif (!apiKeyPermissions) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", {\n\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.KEY_NOT_FOUND,\n\t\t\tcode: \"KEY_NOT_FOUND\"\n\t\t});\n\t\tif (!(0,_access_access_mjs__WEBPACK_IMPORTED_MODULE_1__.role)(apiKeyPermissions).authorize(permissions).success) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", {\n\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.KEY_NOT_FOUND,\n\t\t\tcode: \"KEY_NOT_FOUND\"\n\t\t});\n\t}\n\tlet remaining = apiKey.remaining;\n\tlet lastRefillAt = apiKey.lastRefillAt;\n\tif (apiKey.remaining === 0 && apiKey.refillAmount === null) {\n\t\tconst deleteExhaustedKey = async () => {\n\t\t\tif (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteApiKey)(ctx, apiKey, opts);\n\t\t\t\tawait ctx.context.adapter.delete({\n\t\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t} else if (opts.storage === \"secondary-storage\") await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteApiKey)(ctx, apiKey, opts);\n\t\t\telse await ctx.context.adapter.delete({\n\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t}]\n\t\t\t});\n\t\t};\n\t\tif (opts.deferUpdates) ctx.context.runInBackground(deleteExhaustedKey().catch((error) => {\n\t\t\tctx.context.logger.error(\"Deferred update failed:\", error);\n\t\t}));\n\t\telse await deleteExhaustedKey();\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"TOO_MANY_REQUESTS\", {\n\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.USAGE_EXCEEDED,\n\t\t\tcode: \"USAGE_EXCEEDED\"\n\t\t});\n\t} else if (remaining !== null) {\n\t\tconst now = Date.now();\n\t\tconst refillInterval = apiKey.refillInterval;\n\t\tconst refillAmount = apiKey.refillAmount;\n\t\tconst lastTime = new Date(lastRefillAt ?? apiKey.createdAt).getTime();\n\t\tif (refillInterval && refillAmount) {\n\t\t\tif (now - lastTime > refillInterval) {\n\t\t\t\tremaining = refillAmount;\n\t\t\t\tlastRefillAt = /* @__PURE__ */ new Date();\n\t\t\t}\n\t\t}\n\t\tif (remaining === 0) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"TOO_MANY_REQUESTS\", {\n\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.USAGE_EXCEEDED,\n\t\t\tcode: \"USAGE_EXCEEDED\"\n\t\t});\n\t\telse remaining--;\n\t}\n\tconst { message, success, update, tryAgainIn } = (0,_rate_limit_mjs__WEBPACK_IMPORTED_MODULE_4__.isRateLimited)(apiKey, opts);\n\tif (success === false) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"UNAUTHORIZED\", {\n\t\tmessage: message ?? void 0,\n\t\tcode: \"RATE_LIMITED\",\n\t\tdetails: { tryAgainIn }\n\t});\n\tconst updated = {\n\t\t...apiKey,\n\t\t...update,\n\t\tremaining,\n\t\tlastRefillAt,\n\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t};\n\tconst performUpdate = async () => {\n\t\tif (opts.storage === \"database\") return ctx.context.adapter.update({\n\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: apiKey.id\n\t\t\t}],\n\t\t\tupdate: {\n\t\t\t\t...updated,\n\t\t\t\tid: void 0\n\t\t\t}\n\t\t});\n\t\telse if (opts.storage === \"secondary-storage\" && opts.fallbackToDatabase) {\n\t\t\tconst dbUpdated = await ctx.context.adapter.update({\n\t\t\t\tmodel: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.API_KEY_TABLE_NAME,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: apiKey.id\n\t\t\t\t}],\n\t\t\t\tupdate: {\n\t\t\t\t\t...updated,\n\t\t\t\t\tid: void 0\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (dbUpdated) await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.setApiKey)(ctx, dbUpdated, opts);\n\t\t\treturn dbUpdated;\n\t\t} else {\n\t\t\tawait (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.setApiKey)(ctx, updated, opts);\n\t\t\treturn updated;\n\t\t}\n\t};\n\tlet newApiKey = null;\n\tif (opts.deferUpdates) {\n\t\tctx.context.runInBackground(performUpdate().catch((error) => {\n\t\t\tctx.context.logger.error(\"Failed to update API key:\", error);\n\t\t}));\n\t\tnewApiKey = updated;\n\t} else {\n\t\tnewApiKey = await performUpdate();\n\t\tif (!newApiKey) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.FAILED_TO_UPDATE_API_KEY,\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\"\n\t\t});\n\t}\n\treturn newApiKey;\n}\nconst verifyApiKeyBodySchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n\tkey: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"The key to verify\" }),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_8__.record(zod__WEBPACK_IMPORTED_MODULE_8__.string(), zod__WEBPACK_IMPORTED_MODULE_8__.array(zod__WEBPACK_IMPORTED_MODULE_8__.string())).meta({ description: \"The permissions to verify.\" }).optional()\n});\nfunction verifyApiKey({ opts, schema, deleteAllExpiredApiKeys }) {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__.createAuthEndpoint)({\n\t\tmethod: \"POST\",\n\t\tbody: verifyApiKeyBodySchema\n\t}, async (ctx) => {\n\t\tconst { key } = ctx.body;\n\t\tif (opts.customAPIKeyValidator) {\n\t\t\tif (!await opts.customAPIKeyValidator({\n\t\t\t\tctx,\n\t\t\t\tkey\n\t\t\t})) return ctx.json({\n\t\t\t\tvalid: false,\n\t\t\t\terror: {\n\t\t\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_API_KEY,\n\t\t\t\t\tcode: \"KEY_NOT_FOUND\"\n\t\t\t\t},\n\t\t\t\tkey: null\n\t\t\t});\n\t\t}\n\t\tconst hashed = opts.disableKeyHashing ? key : await (0,_index_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultKeyHasher)(key);\n\t\tlet apiKey = null;\n\t\ttry {\n\t\t\tapiKey = await validateApiKey({\n\t\t\t\thashedKey: hashed,\n\t\t\t\tpermissions: ctx.body.permissions,\n\t\t\t\tctx,\n\t\t\t\topts,\n\t\t\t\tschema\n\t\t\t});\n\t\t\tif (opts.deferUpdates) ctx.context.runInBackground(deleteAllExpiredApiKeys(ctx.context).catch((err) => {\n\t\t\t\tctx.context.logger.error(\"Failed to delete expired API keys:\", err);\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\tctx.context.logger.error(\"Failed to validate API key:\", error);\n\t\t\tif (error instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError) return ctx.json({\n\t\t\t\tvalid: false,\n\t\t\t\terror: {\n\t\t\t\t\tmessage: error.body?.message,\n\t\t\t\t\tcode: error.body?.code\n\t\t\t\t},\n\t\t\t\tkey: null\n\t\t\t});\n\t\t\treturn ctx.json({\n\t\t\t\tvalid: false,\n\t\t\t\terror: {\n\t\t\t\t\tmessage: _index_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES.INVALID_API_KEY,\n\t\t\t\t\tcode: \"INVALID_API_KEY\"\n\t\t\t\t},\n\t\t\t\tkey: null\n\t\t\t});\n\t\t}\n\t\tconst { key: _, ...returningApiKey } = apiKey ?? {\n\t\t\tkey: 1,\n\t\t\tpermissions: void 0\n\t\t};\n\t\tlet migratedMetadata = null;\n\t\tif (apiKey) migratedMetadata = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.migrateDoubleStringifiedMetadata)(ctx, apiKey, opts);\n\t\treturningApiKey.permissions = returningApiKey.permissions ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__.safeJSONParse)(returningApiKey.permissions) : null;\n\t\treturn ctx.json({\n\t\t\tvalid: true,\n\t\t\terror: null,\n\t\t\tkey: apiKey === null ? null : {\n\t\t\t\t...returningApiKey,\n\t\t\t\tmetadata: migratedMetadata\n\t\t\t}\n\t\t});\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=verify-api-key.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvcm91dGVzL3ZlcmlmeS1hcGkta2V5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNIO0FBQ2Y7QUFDc0U7QUFDcEQ7QUFDK0I7QUFDekI7QUFDL0I7QUFDa0M7O0FBRTNEO0FBQ0EsZ0NBQWdDLDJDQUEyQztBQUMzRSxzQkFBc0IsdURBQVM7QUFDL0Isd0JBQXdCLG9EQUFRLG1CQUFtQixTQUFTLG1EQUFXLGtCQUFrQjtBQUN6Rix5Q0FBeUMsb0RBQVE7QUFDakQsV0FBVyxtREFBVztBQUN0QjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMERBQVk7QUFDdkI7QUFDQSxhQUFhLDBEQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOLE1BQU0scURBQXFELDBEQUFZO0FBQ3ZFO0FBQ0EsWUFBWSwwREFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxhQUFhLG9EQUFRO0FBQ3JCLGFBQWEsbURBQVc7QUFDeEI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHNFQUFhO0FBQzlELG9DQUFvQyxvREFBUTtBQUM1QyxZQUFZLG1EQUFXO0FBQ3ZCO0FBQ0EsR0FBRztBQUNILE9BQU8sd0RBQUksOERBQThELG9EQUFRO0FBQ2pGLFlBQVksbURBQVc7QUFDdkI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwREFBWTtBQUN0QjtBQUNBLFlBQVksMERBQWtCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0wsS0FBSyxxREFBcUQsMERBQVk7QUFDdEU7QUFDQSxXQUFXLDBEQUFrQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFlBQVksb0RBQVE7QUFDcEIsWUFBWSxtREFBVztBQUN2QjtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0RBQVE7QUFDekMsWUFBWSxtREFBVztBQUN2QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUyx1Q0FBdUMsRUFBRSw4REFBYTtBQUMvRCxrQ0FBa0Msb0RBQVE7QUFDMUM7QUFDQTtBQUNBLGFBQWE7QUFDYixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwREFBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxXQUFXLDBEQUFrQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0JBQXdCLHVEQUFTO0FBQ2pDO0FBQ0EsSUFBSTtBQUNKLFNBQVMsdURBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSw0QkFBNEIsb0RBQVE7QUFDcEMsWUFBWSxtREFBVztBQUN2QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdUNBQVE7QUFDdkMsTUFBTSx1Q0FBUSxVQUFVLGtDQUFrQztBQUMxRCxjQUFjLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxzQ0FBTyxDQUFDLHVDQUFRLFlBQVksMkNBQTJDO0FBQzFHLENBQUM7QUFDRCx3QkFBd0IsdUNBQXVDO0FBQy9ELFFBQVEseUVBQWtCO0FBQzFCO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsVUFBVSxNQUFNO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxjQUFjLG1EQUFXO0FBQ3pCO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esc0RBQXNELDREQUFnQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0Esd0JBQXdCLG9EQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbURBQVc7QUFDekI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQSxVQUFVLDZCQUE2QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1Qyw4RUFBZ0M7QUFDdkUsOERBQThELHNFQUFhO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFwaS1rZXlcXHJvdXRlc1xcdmVyaWZ5LWFwaS1rZXkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IHJvbGUgfSBmcm9tIFwiLi4vLi4vYWNjZXNzL2FjY2Vzcy5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FjY2Vzcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZUFwaUtleSwgZ2V0QXBpS2V5LCBtaWdyYXRlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YSwgc2V0QXBpS2V5IH0gZnJvbSBcIi4uL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBpc1JhdGVMaW1pdGVkIH0gZnJvbSBcIi4uL3JhdGUtbGltaXQubWpzXCI7XG5pbXBvcnQgeyBBUElfS0VZX1RBQkxFX05BTUUsIEVSUk9SX0NPREVTLCBkZWZhdWx0S2V5SGFzaGVyIH0gZnJvbSBcIi4uL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L3JvdXRlcy92ZXJpZnktYXBpLWtleS50c1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBcGlLZXkoeyBoYXNoZWRLZXksIGN0eCwgb3B0cywgc2NoZW1hLCBwZXJtaXNzaW9ucyB9KSB7XG5cdGNvbnN0IGFwaUtleSA9IGF3YWl0IGdldEFwaUtleShjdHgsIGhhc2hlZEtleSwgb3B0cyk7XG5cdGlmICghYXBpS2V5KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX0FQSV9LRVkgfSk7XG5cdGlmIChhcGlLZXkuZW5hYmxlZCA9PT0gZmFsc2UpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0bWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX0RJU0FCTEVELFxuXHRcdGNvZGU6IFwiS0VZX0RJU0FCTEVEXCJcblx0fSk7XG5cdGlmIChhcGlLZXkuZXhwaXJlc0F0KSB7XG5cdFx0aWYgKERhdGUubm93KCkgPiBuZXcgRGF0ZShhcGlLZXkuZXhwaXJlc0F0KS5nZXRUaW1lKCkpIHtcblx0XHRcdGNvbnN0IGRlbGV0ZUV4cGlyZWRLZXkgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIiAmJiBvcHRzLmZhbGxiYWNrVG9EYXRhYmFzZSkge1xuXHRcdFx0XHRcdGF3YWl0IGRlbGV0ZUFwaUtleShjdHgsIGFwaUtleSwgb3B0cyk7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IEFQSV9LRVlfVEFCTEVfTkFNRSxcblx0XHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogYXBpS2V5LmlkXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG9wdHMuc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiKSBhd2FpdCBkZWxldGVBcGlLZXkoY3R4LCBhcGlLZXksIG9wdHMpO1xuXHRcdFx0XHRlbHNlIGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZGVsZXRlKHtcblx0XHRcdFx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBhcGlLZXkuaWRcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0XHRpZiAob3B0cy5kZWZlclVwZGF0ZXMpIGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZChkZWxldGVFeHBpcmVkS2V5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkRlZmVycmVkIHVwZGF0ZSBmYWlsZWQ6XCIsIGVycm9yKTtcblx0XHRcdH0pKTtcblx0XHRcdGVsc2UgYXdhaXQgZGVsZXRlRXhwaXJlZEtleSgpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0bWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX0VYUElSRUQsXG5cdFx0XHRcdGNvZGU6IFwiS0VZX0VYUElSRURcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGlmIChwZXJtaXNzaW9ucykge1xuXHRcdGNvbnN0IGFwaUtleVBlcm1pc3Npb25zID0gYXBpS2V5LnBlcm1pc3Npb25zID8gc2FmZUpTT05QYXJzZShhcGlLZXkucGVybWlzc2lvbnMpIDogbnVsbDtcblx0XHRpZiAoIWFwaUtleVBlcm1pc3Npb25zKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0bWVzc2FnZTogRVJST1JfQ09ERVMuS0VZX05PVF9GT1VORCxcblx0XHRcdGNvZGU6IFwiS0VZX05PVF9GT1VORFwiXG5cdFx0fSk7XG5cdFx0aWYgKCFyb2xlKGFwaUtleVBlcm1pc3Npb25zKS5hdXRob3JpemUocGVybWlzc2lvbnMpLnN1Y2Nlc3MpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBFUlJPUl9DT0RFUy5LRVlfTk9UX0ZPVU5ELFxuXHRcdFx0Y29kZTogXCJLRVlfTk9UX0ZPVU5EXCJcblx0XHR9KTtcblx0fVxuXHRsZXQgcmVtYWluaW5nID0gYXBpS2V5LnJlbWFpbmluZztcblx0bGV0IGxhc3RSZWZpbGxBdCA9IGFwaUtleS5sYXN0UmVmaWxsQXQ7XG5cdGlmIChhcGlLZXkucmVtYWluaW5nID09PSAwICYmIGFwaUtleS5yZWZpbGxBbW91bnQgPT09IG51bGwpIHtcblx0XHRjb25zdCBkZWxldGVFeGhhdXN0ZWRLZXkgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAob3B0cy5zdG9yYWdlID09PSBcInNlY29uZGFyeS1zdG9yYWdlXCIgJiYgb3B0cy5mYWxsYmFja1RvRGF0YWJhc2UpIHtcblx0XHRcdFx0YXdhaXQgZGVsZXRlQXBpS2V5KGN0eCwgYXBpS2V5LCBvcHRzKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIGlmIChvcHRzLnN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIikgYXdhaXQgZGVsZXRlQXBpS2V5KGN0eCwgYXBpS2V5LCBvcHRzKTtcblx0XHRcdGVsc2UgYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRtb2RlbDogQVBJX0tFWV9UQUJMRV9OQU1FLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhcGlLZXkuaWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0aWYgKG9wdHMuZGVmZXJVcGRhdGVzKSBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmQoZGVsZXRlRXhoYXVzdGVkS2V5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJEZWZlcnJlZCB1cGRhdGUgZmFpbGVkOlwiLCBlcnJvcik7XG5cdFx0fSkpO1xuXHRcdGVsc2UgYXdhaXQgZGVsZXRlRXhoYXVzdGVkS2V5KCk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVE9PX01BTllfUkVRVUVTVFNcIiwge1xuXHRcdFx0bWVzc2FnZTogRVJST1JfQ09ERVMuVVNBR0VfRVhDRUVERUQsXG5cdFx0XHRjb2RlOiBcIlVTQUdFX0VYQ0VFREVEXCJcblx0XHR9KTtcblx0fSBlbHNlIGlmIChyZW1haW5pbmcgIT09IG51bGwpIHtcblx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdGNvbnN0IHJlZmlsbEludGVydmFsID0gYXBpS2V5LnJlZmlsbEludGVydmFsO1xuXHRcdGNvbnN0IHJlZmlsbEFtb3VudCA9IGFwaUtleS5yZWZpbGxBbW91bnQ7XG5cdFx0Y29uc3QgbGFzdFRpbWUgPSBuZXcgRGF0ZShsYXN0UmVmaWxsQXQgPz8gYXBpS2V5LmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuXHRcdGlmIChyZWZpbGxJbnRlcnZhbCAmJiByZWZpbGxBbW91bnQpIHtcblx0XHRcdGlmIChub3cgLSBsYXN0VGltZSA+IHJlZmlsbEludGVydmFsKSB7XG5cdFx0XHRcdHJlbWFpbmluZyA9IHJlZmlsbEFtb3VudDtcblx0XHRcdFx0bGFzdFJlZmlsbEF0ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChyZW1haW5pbmcgPT09IDApIHRocm93IG5ldyBBUElFcnJvcihcIlRPT19NQU5ZX1JFUVVFU1RTXCIsIHtcblx0XHRcdG1lc3NhZ2U6IEVSUk9SX0NPREVTLlVTQUdFX0VYQ0VFREVELFxuXHRcdFx0Y29kZTogXCJVU0FHRV9FWENFRURFRFwiXG5cdFx0fSk7XG5cdFx0ZWxzZSByZW1haW5pbmctLTtcblx0fVxuXHRjb25zdCB7IG1lc3NhZ2UsIHN1Y2Nlc3MsIHVwZGF0ZSwgdHJ5QWdhaW5JbiB9ID0gaXNSYXRlTGltaXRlZChhcGlLZXksIG9wdHMpO1xuXHRpZiAoc3VjY2VzcyA9PT0gZmFsc2UpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0bWVzc2FnZTogbWVzc2FnZSA/PyB2b2lkIDAsXG5cdFx0Y29kZTogXCJSQVRFX0xJTUlURURcIixcblx0XHRkZXRhaWxzOiB7IHRyeUFnYWluSW4gfVxuXHR9KTtcblx0Y29uc3QgdXBkYXRlZCA9IHtcblx0XHQuLi5hcGlLZXksXG5cdFx0Li4udXBkYXRlLFxuXHRcdHJlbWFpbmluZyxcblx0XHRsYXN0UmVmaWxsQXQsXG5cdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHR9O1xuXHRjb25zdCBwZXJmb3JtVXBkYXRlID0gYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChvcHRzLnN0b3JhZ2UgPT09IFwiZGF0YWJhc2VcIikgcmV0dXJuIGN0eC5jb250ZXh0LmFkYXB0ZXIudXBkYXRlKHtcblx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0fV0sXG5cdFx0XHR1cGRhdGU6IHtcblx0XHRcdFx0Li4udXBkYXRlZCxcblx0XHRcdFx0aWQ6IHZvaWQgMFxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGVsc2UgaWYgKG9wdHMuc3RvcmFnZSA9PT0gXCJzZWNvbmRhcnktc3RvcmFnZVwiICYmIG9wdHMuZmFsbGJhY2tUb0RhdGFiYXNlKSB7XG5cdFx0XHRjb25zdCBkYlVwZGF0ZWQgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBBUElfS0VZX1RBQkxFX05BTUUsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGFwaUtleS5pZFxuXHRcdFx0XHR9XSxcblx0XHRcdFx0dXBkYXRlOiB7XG5cdFx0XHRcdFx0Li4udXBkYXRlZCxcblx0XHRcdFx0XHRpZDogdm9pZCAwXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGRiVXBkYXRlZCkgYXdhaXQgc2V0QXBpS2V5KGN0eCwgZGJVcGRhdGVkLCBvcHRzKTtcblx0XHRcdHJldHVybiBkYlVwZGF0ZWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGF3YWl0IHNldEFwaUtleShjdHgsIHVwZGF0ZWQsIG9wdHMpO1xuXHRcdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdFx0fVxuXHR9O1xuXHRsZXQgbmV3QXBpS2V5ID0gbnVsbDtcblx0aWYgKG9wdHMuZGVmZXJVcGRhdGVzKSB7XG5cdFx0Y3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kKHBlcmZvcm1VcGRhdGUoKS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgQVBJIGtleTpcIiwgZXJyb3IpO1xuXHRcdH0pKTtcblx0XHRuZXdBcGlLZXkgPSB1cGRhdGVkO1xuXHR9IGVsc2Uge1xuXHRcdG5ld0FwaUtleSA9IGF3YWl0IHBlcmZvcm1VcGRhdGUoKTtcblx0XHRpZiAoIW5ld0FwaUtleSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRcdG1lc3NhZ2U6IEVSUk9SX0NPREVTLkZBSUxFRF9UT19VUERBVEVfQVBJX0tFWSxcblx0XHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCJcblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gbmV3QXBpS2V5O1xufVxuY29uc3QgdmVyaWZ5QXBpS2V5Qm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0a2V5OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUga2V5IHRvIHZlcmlmeVwiIH0pLFxuXHRwZXJtaXNzaW9uczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwZXJtaXNzaW9ucyB0byB2ZXJpZnkuXCIgfSkub3B0aW9uYWwoKVxufSk7XG5mdW5jdGlvbiB2ZXJpZnlBcGlLZXkoeyBvcHRzLCBzY2hlbWEsIGRlbGV0ZUFsbEV4cGlyZWRBcGlLZXlzIH0pIHtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludCh7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB2ZXJpZnlBcGlLZXlCb2R5U2NoZW1hXG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRjb25zdCB7IGtleSB9ID0gY3R4LmJvZHk7XG5cdFx0aWYgKG9wdHMuY3VzdG9tQVBJS2V5VmFsaWRhdG9yKSB7XG5cdFx0XHRpZiAoIWF3YWl0IG9wdHMuY3VzdG9tQVBJS2V5VmFsaWRhdG9yKHtcblx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRrZXlcblx0XHRcdH0pKSByZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHR2YWxpZDogZmFsc2UsXG5cdFx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdFx0bWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9BUElfS0VZLFxuXHRcdFx0XHRcdGNvZGU6IFwiS0VZX05PVF9GT1VORFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGtleTogbnVsbFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGhhc2hlZCA9IG9wdHMuZGlzYWJsZUtleUhhc2hpbmcgPyBrZXkgOiBhd2FpdCBkZWZhdWx0S2V5SGFzaGVyKGtleSk7XG5cdFx0bGV0IGFwaUtleSA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdGFwaUtleSA9IGF3YWl0IHZhbGlkYXRlQXBpS2V5KHtcblx0XHRcdFx0aGFzaGVkS2V5OiBoYXNoZWQsXG5cdFx0XHRcdHBlcm1pc3Npb25zOiBjdHguYm9keS5wZXJtaXNzaW9ucyxcblx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRvcHRzLFxuXHRcdFx0XHRzY2hlbWFcblx0XHRcdH0pO1xuXHRcdFx0aWYgKG9wdHMuZGVmZXJVcGRhdGVzKSBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmQoZGVsZXRlQWxsRXhwaXJlZEFwaUtleXMoY3R4LmNvbnRleHQpLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlbGV0ZSBleHBpcmVkIEFQSSBrZXlzOlwiLCBlcnIpO1xuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gdmFsaWRhdGUgQVBJIGtleTpcIiwgZXJyb3IpO1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgQVBJRXJyb3IpIHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHZhbGlkOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0XHRtZXNzYWdlOiBlcnJvci5ib2R5Py5tZXNzYWdlLFxuXHRcdFx0XHRcdGNvZGU6IGVycm9yLmJvZHk/LmNvZGVcblx0XHRcdFx0fSxcblx0XHRcdFx0a2V5OiBudWxsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHZhbGlkOiBmYWxzZSxcblx0XHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0XHRtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX0FQSV9LRVksXG5cdFx0XHRcdFx0Y29kZTogXCJJTlZBTElEX0FQSV9LRVlcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRrZXk6IG51bGxcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRjb25zdCB7IGtleTogXywgLi4ucmV0dXJuaW5nQXBpS2V5IH0gPSBhcGlLZXkgPz8ge1xuXHRcdFx0a2V5OiAxLFxuXHRcdFx0cGVybWlzc2lvbnM6IHZvaWQgMFxuXHRcdH07XG5cdFx0bGV0IG1pZ3JhdGVkTWV0YWRhdGEgPSBudWxsO1xuXHRcdGlmIChhcGlLZXkpIG1pZ3JhdGVkTWV0YWRhdGEgPSBhd2FpdCBtaWdyYXRlRG91YmxlU3RyaW5naWZpZWRNZXRhZGF0YShjdHgsIGFwaUtleSwgb3B0cyk7XG5cdFx0cmV0dXJuaW5nQXBpS2V5LnBlcm1pc3Npb25zID0gcmV0dXJuaW5nQXBpS2V5LnBlcm1pc3Npb25zID8gc2FmZUpTT05QYXJzZShyZXR1cm5pbmdBcGlLZXkucGVybWlzc2lvbnMpIDogbnVsbDtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0dmFsaWQ6IHRydWUsXG5cdFx0XHRlcnJvcjogbnVsbCxcblx0XHRcdGtleTogYXBpS2V5ID09PSBudWxsID8gbnVsbCA6IHtcblx0XHRcdFx0Li4ucmV0dXJuaW5nQXBpS2V5LFxuXHRcdFx0XHRtZXRhZGF0YTogbWlncmF0ZWRNZXRhZGF0YVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB2YWxpZGF0ZUFwaUtleSwgdmVyaWZ5QXBpS2V5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJpZnktYXBpLWtleS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/routes/verify-api-key.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/api-key/schema.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/schema.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeySchema: () => (/* binding */ apiKeySchema)\n/* harmony export */ });\n/* harmony import */ var _client_parser_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/parser.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/parser.mjs\");\n\n\n//#region src/plugins/api-key/schema.ts\nconst apiKeySchema = ({ timeWindow, rateLimitMax }) => ({ apikey: { fields: {\n\tname: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tstart: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tprefix: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tkey: {\n\t\ttype: \"string\",\n\t\trequired: true,\n\t\tinput: false,\n\t\tindex: true\n\t},\n\tuserId: {\n\t\ttype: \"string\",\n\t\treferences: {\n\t\t\tmodel: \"user\",\n\t\t\tfield: \"id\",\n\t\t\tonDelete: \"cascade\"\n\t\t},\n\t\trequired: true,\n\t\tinput: false,\n\t\tindex: true\n\t},\n\trefillInterval: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\trefillAmount: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tlastRefillAt: {\n\t\ttype: \"date\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tenabled: {\n\t\ttype: \"boolean\",\n\t\trequired: false,\n\t\tinput: false,\n\t\tdefaultValue: true\n\t},\n\trateLimitEnabled: {\n\t\ttype: \"boolean\",\n\t\trequired: false,\n\t\tinput: false,\n\t\tdefaultValue: true\n\t},\n\trateLimitTimeWindow: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false,\n\t\tdefaultValue: timeWindow\n\t},\n\trateLimitMax: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false,\n\t\tdefaultValue: rateLimitMax\n\t},\n\trequestCount: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false,\n\t\tdefaultValue: 0\n\t},\n\tremaining: {\n\t\ttype: \"number\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tlastRequest: {\n\t\ttype: \"date\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\texpiresAt: {\n\t\ttype: \"date\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tcreatedAt: {\n\t\ttype: \"date\",\n\t\trequired: true,\n\t\tinput: false\n\t},\n\tupdatedAt: {\n\t\ttype: \"date\",\n\t\trequired: true,\n\t\tinput: false\n\t},\n\tpermissions: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tinput: false\n\t},\n\tmetadata: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tinput: true,\n\t\ttransform: {\n\t\t\tinput(value) {\n\t\t\t\treturn JSON.stringify(value);\n\t\t\t},\n\t\t\toutput(value) {\n\t\t\t\tif (!value) return null;\n\t\t\t\treturn (0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_0__.parseJSON)(value);\n\t\t\t}\n\t\t}\n\t}\n} } });\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvRDs7QUFFcEQ7QUFDQSx3QkFBd0IsMEJBQTBCLFFBQVEsVUFBVTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxXQUFXLDZEQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhcGkta2V5XFxzY2hlbWEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlSlNPTiB9IGZyb20gXCIuLi8uLi9jbGllbnQvcGFyc2VyLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYXBpLWtleS9zY2hlbWEudHNcbmNvbnN0IGFwaUtleVNjaGVtYSA9ICh7IHRpbWVXaW5kb3csIHJhdGVMaW1pdE1heCB9KSA9PiAoeyBhcGlrZXk6IHsgZmllbGRzOiB7XG5cdG5hbWU6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRpbnB1dDogZmFsc2Vcblx0fSxcblx0c3RhcnQ6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRpbnB1dDogZmFsc2Vcblx0fSxcblx0cHJlZml4OiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlXG5cdH0sXG5cdGtleToge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0aW5wdXQ6IGZhbHNlLFxuXHRcdGluZGV4OiB0cnVlXG5cdH0sXG5cdHVzZXJJZDoge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdG9uRGVsZXRlOiBcImNhc2NhZGVcIlxuXHRcdH0sXG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0aW5wdXQ6IGZhbHNlLFxuXHRcdGluZGV4OiB0cnVlXG5cdH0sXG5cdHJlZmlsbEludGVydmFsOiB7XG5cdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlXG5cdH0sXG5cdHJlZmlsbEFtb3VudDoge1xuXHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdGlucHV0OiBmYWxzZVxuXHR9LFxuXHRsYXN0UmVmaWxsQXQ6IHtcblx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlXG5cdH0sXG5cdGVuYWJsZWQ6IHtcblx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlLFxuXHRcdGRlZmF1bHRWYWx1ZTogdHJ1ZVxuXHR9LFxuXHRyYXRlTGltaXRFbmFibGVkOiB7XG5cdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdGlucHV0OiBmYWxzZSxcblx0XHRkZWZhdWx0VmFsdWU6IHRydWVcblx0fSxcblx0cmF0ZUxpbWl0VGltZVdpbmRvdzoge1xuXHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdGlucHV0OiBmYWxzZSxcblx0XHRkZWZhdWx0VmFsdWU6IHRpbWVXaW5kb3dcblx0fSxcblx0cmF0ZUxpbWl0TWF4OiB7XG5cdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlLFxuXHRcdGRlZmF1bHRWYWx1ZTogcmF0ZUxpbWl0TWF4XG5cdH0sXG5cdHJlcXVlc3RDb3VudDoge1xuXHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdGlucHV0OiBmYWxzZSxcblx0XHRkZWZhdWx0VmFsdWU6IDBcblx0fSxcblx0cmVtYWluaW5nOiB7XG5cdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlXG5cdH0sXG5cdGxhc3RSZXF1ZXN0OiB7XG5cdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdGlucHV0OiBmYWxzZVxuXHR9LFxuXHRleHBpcmVzQXQ6IHtcblx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0aW5wdXQ6IGZhbHNlXG5cdH0sXG5cdGNyZWF0ZWRBdDoge1xuXHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdGlucHV0OiBmYWxzZVxuXHR9LFxuXHR1cGRhdGVkQXQ6IHtcblx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRpbnB1dDogZmFsc2Vcblx0fSxcblx0cGVybWlzc2lvbnM6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRpbnB1dDogZmFsc2Vcblx0fSxcblx0bWV0YWRhdGE6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRpbnB1dDogdHJ1ZSxcblx0XHR0cmFuc2Zvcm06IHtcblx0XHRcdGlucHV0KHZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0b3V0cHV0KHZhbHVlKSB7XG5cdFx0XHRcdGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuXHRcdFx0XHRyZXR1cm4gcGFyc2VKU09OKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gfSB9KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhcGlLZXlTY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/api-key/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/bearer/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/bearer/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bearer: () => (/* binding */ bearer)\n/* harmony export */ });\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n//#region src/plugins/bearer/index.ts\n/**\n* Converts bearer token to session cookie\n*/\nconst bearer = (options) => {\n\treturn {\n\t\tid: \"bearer\",\n\t\thooks: {\n\t\t\tbefore: [{\n\t\t\t\tmatcher(context) {\n\t\t\t\t\treturn Boolean(context.request?.headers.get(\"authorization\") || context.headers?.get(\"authorization\"));\n\t\t\t\t},\n\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__.createAuthMiddleware)(async (c) => {\n\t\t\t\t\tconst token = c.request?.headers.get(\"authorization\")?.replace(\"Bearer \", \"\") || c.headers?.get(\"Authorization\")?.replace(\"Bearer \", \"\");\n\t\t\t\t\tif (!token) return;\n\t\t\t\t\tlet signedToken = \"\";\n\t\t\t\t\tif (token.includes(\".\")) signedToken = token.replace(\"=\", \"\");\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (options?.requireSignature) return;\n\t\t\t\t\t\tsignedToken = (await (0,better_call__WEBPACK_IMPORTED_MODULE_2__.serializeSignedCookie)(\"\", token, c.context.secret)).replace(\"=\", \"\");\n\t\t\t\t\t}\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst decodedToken = decodeURIComponent(signedToken);\n\t\t\t\t\t\tif (!await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_4__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(c.context.secret, decodedToken.split(\".\")[0], decodedToken.split(\".\")[1])) return;\n\t\t\t\t\t} catch {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst existingHeaders = c.request?.headers || c.headers;\n\t\t\t\t\tconst headers = new Headers({ ...Object.fromEntries(existingHeaders?.entries()) });\n\t\t\t\t\theaders.append(\"cookie\", `${c.context.authCookies.sessionToken.name}=${signedToken}`);\n\t\t\t\t\treturn { context: { headers } };\n\t\t\t\t})\n\t\t\t}],\n\t\t\tafter: [{\n\t\t\t\tmatcher(context) {\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\tconst setCookie = ctx.context.responseHeaders?.get(\"set-cookie\");\n\t\t\t\t\tif (!setCookie) return;\n\t\t\t\t\tconst parsedCookies = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSetCookieHeader)(setCookie);\n\t\t\t\t\tconst cookieName = ctx.context.authCookies.sessionToken.name;\n\t\t\t\t\tconst sessionCookie = parsedCookies.get(cookieName);\n\t\t\t\t\tif (!sessionCookie || !sessionCookie.value || sessionCookie[\"max-age\"] === 0) return;\n\t\t\t\t\tconst token = sessionCookie.value;\n\t\t\t\t\tconst exposedHeaders = ctx.context.responseHeaders?.get(\"access-control-expose-headers\") || \"\";\n\t\t\t\t\tconst headersSet = new Set(exposedHeaders.split(\",\").map((header) => header.trim()).filter(Boolean));\n\t\t\t\t\theadersSet.add(\"set-auth-token\");\n\t\t\t\t\tctx.setHeader(\"set-auth-token\", token);\n\t\t\t\t\tctx.setHeader(\"Access-Control-Expose-Headers\", Array.from(headersSet).join(\", \"));\n\t\t\t\t})\n\t\t\t}]\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2JlYXJlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNFO0FBQ3JDO0FBQ21CO0FBQ1M7QUFDUjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLDJFQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtRUFBVTtBQUMzQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLG1EQUFtRDtBQUN0RixpQ0FBaUMsd0NBQXdDLEdBQUcsWUFBWTtBQUN4RixjQUFjLFdBQVc7QUFDekIsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSwyRUFBb0I7QUFDakM7QUFDQTtBQUNBLDJCQUEyQiwrRUFBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ2tCO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYmVhcmVyXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VTZXRDb29raWVIZWFkZXIgfSBmcm9tIFwiLi4vLi4vY29va2llcy9jb29raWUtdXRpbHMubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplU2lnbmVkQ29va2llIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2htYWNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2JlYXJlci9pbmRleC50c1xuLyoqXG4qIENvbnZlcnRzIGJlYXJlciB0b2tlbiB0byBzZXNzaW9uIGNvb2tpZVxuKi9cbmNvbnN0IGJlYXJlciA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiYmVhcmVyXCIsXG5cdFx0aG9va3M6IHtcblx0XHRcdGJlZm9yZTogW3tcblx0XHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIEJvb2xlYW4oY29udGV4dC5yZXF1ZXN0Py5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIikgfHwgY29udGV4dC5oZWFkZXJzPy5nZXQoXCJhdXRob3JpemF0aW9uXCIpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGMpID0+IHtcblx0XHRcdFx0XHRjb25zdCB0b2tlbiA9IGMucmVxdWVzdD8uaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpPy5yZXBsYWNlKFwiQmVhcmVyIFwiLCBcIlwiKSB8fCBjLmhlYWRlcnM/LmdldChcIkF1dGhvcml6YXRpb25cIik/LnJlcGxhY2UoXCJCZWFyZXIgXCIsIFwiXCIpO1xuXHRcdFx0XHRcdGlmICghdG9rZW4pIHJldHVybjtcblx0XHRcdFx0XHRsZXQgc2lnbmVkVG9rZW4gPSBcIlwiO1xuXHRcdFx0XHRcdGlmICh0b2tlbi5pbmNsdWRlcyhcIi5cIikpIHNpZ25lZFRva2VuID0gdG9rZW4ucmVwbGFjZShcIj1cIiwgXCJcIik7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucz8ucmVxdWlyZVNpZ25hdHVyZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0c2lnbmVkVG9rZW4gPSAoYXdhaXQgc2VyaWFsaXplU2lnbmVkQ29va2llKFwiXCIsIHRva2VuLCBjLmNvbnRleHQuc2VjcmV0KSkucmVwbGFjZShcIj1cIiwgXCJcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCBkZWNvZGVkVG9rZW4gPSBkZWNvZGVVUklDb21wb25lbnQoc2lnbmVkVG9rZW4pO1xuXHRcdFx0XHRcdFx0aWYgKCFhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShjLmNvbnRleHQuc2VjcmV0LCBkZWNvZGVkVG9rZW4uc3BsaXQoXCIuXCIpWzBdLCBkZWNvZGVkVG9rZW4uc3BsaXQoXCIuXCIpWzFdKSkgcmV0dXJuO1xuXHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0hlYWRlcnMgPSBjLnJlcXVlc3Q/LmhlYWRlcnMgfHwgYy5oZWFkZXJzO1xuXHRcdFx0XHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh7IC4uLk9iamVjdC5mcm9tRW50cmllcyhleGlzdGluZ0hlYWRlcnM/LmVudHJpZXMoKSkgfSk7XG5cdFx0XHRcdFx0aGVhZGVycy5hcHBlbmQoXCJjb29raWVcIiwgYCR7Yy5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lfT0ke3NpZ25lZFRva2VufWApO1xuXHRcdFx0XHRcdHJldHVybiB7IGNvbnRleHQ6IHsgaGVhZGVycyB9IH07XG5cdFx0XHRcdH0pXG5cdFx0XHR9XSxcblx0XHRcdGFmdGVyOiBbe1xuXHRcdFx0XHRtYXRjaGVyKGNvbnRleHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNldENvb2tpZSA9IGN0eC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycz8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0XHRpZiAoIXNldENvb2tpZSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnNlZENvb2tpZXMgPSBwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWUpO1xuXHRcdFx0XHRcdGNvbnN0IGNvb2tpZU5hbWUgPSBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uQ29va2llID0gcGFyc2VkQ29va2llcy5nZXQoY29va2llTmFtZSk7XG5cdFx0XHRcdFx0aWYgKCFzZXNzaW9uQ29va2llIHx8ICFzZXNzaW9uQ29va2llLnZhbHVlIHx8IHNlc3Npb25Db29raWVbXCJtYXgtYWdlXCJdID09PSAwKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW4gPSBzZXNzaW9uQ29va2llLnZhbHVlO1xuXHRcdFx0XHRcdGNvbnN0IGV4cG9zZWRIZWFkZXJzID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzPy5nZXQoXCJhY2Nlc3MtY29udHJvbC1leHBvc2UtaGVhZGVyc1wiKSB8fCBcIlwiO1xuXHRcdFx0XHRcdGNvbnN0IGhlYWRlcnNTZXQgPSBuZXcgU2V0KGV4cG9zZWRIZWFkZXJzLnNwbGl0KFwiLFwiKS5tYXAoKGhlYWRlcikgPT4gaGVhZGVyLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pKTtcblx0XHRcdFx0XHRoZWFkZXJzU2V0LmFkZChcInNldC1hdXRoLXRva2VuXCIpO1xuXHRcdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJzZXQtYXV0aC10b2tlblwiLCB0b2tlbik7XG5cdFx0XHRcdFx0Y3R4LnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUV4cG9zZS1IZWFkZXJzXCIsIEFycmF5LmZyb20oaGVhZGVyc1NldCkuam9pbihcIiwgXCIpKTtcblx0XHRcdFx0fSlcblx0XHRcdH1dXG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGJlYXJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/bearer/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/constants.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/constants.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Providers: () => (/* binding */ Providers),\n/* harmony export */   defaultEndpoints: () => (/* binding */ defaultEndpoints),\n/* harmony export */   siteVerifyMap: () => (/* binding */ siteVerifyMap)\n/* harmony export */ });\n//#region src/plugins/captcha/constants.ts\nconst defaultEndpoints = [\n\t\"/sign-up/email\",\n\t\"/sign-in/email\",\n\t\"/request-password-reset\"\n];\nconst Providers = {\n\tCLOUDFLARE_TURNSTILE: \"cloudflare-turnstile\",\n\tGOOGLE_RECAPTCHA: \"google-recaptcha\",\n\tHCAPTCHA: \"hcaptcha\",\n\tCAPTCHAFOX: \"captchafox\"\n};\nconst siteVerifyMap = {\n\t[Providers.CLOUDFLARE_TURNSTILE]: \"https://challenges.cloudflare.com/turnstile/v0/siteverify\",\n\t[Providers.GOOGLE_RECAPTCHA]: \"https://www.google.com/recaptcha/api/siteverify\",\n\t[Providers.HCAPTCHA]: \"https://api.hcaptcha.com/siteverify\",\n\t[Providers.CAPTCHAFOX]: \"https://api.captchafox.com/siteverify\"\n};\n\n//#endregion\n\n//# sourceMappingURL=constants.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvY29uc3RhbnRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0Q7QUFDdEQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjYXB0Y2hhXFxjb25zdGFudHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9jYXB0Y2hhL2NvbnN0YW50cy50c1xuY29uc3QgZGVmYXVsdEVuZHBvaW50cyA9IFtcblx0XCIvc2lnbi11cC9lbWFpbFwiLFxuXHRcIi9zaWduLWluL2VtYWlsXCIsXG5cdFwiL3JlcXVlc3QtcGFzc3dvcmQtcmVzZXRcIlxuXTtcbmNvbnN0IFByb3ZpZGVycyA9IHtcblx0Q0xPVURGTEFSRV9UVVJOU1RJTEU6IFwiY2xvdWRmbGFyZS10dXJuc3RpbGVcIixcblx0R09PR0xFX1JFQ0FQVENIQTogXCJnb29nbGUtcmVjYXB0Y2hhXCIsXG5cdEhDQVBUQ0hBOiBcImhjYXB0Y2hhXCIsXG5cdENBUFRDSEFGT1g6IFwiY2FwdGNoYWZveFwiXG59O1xuY29uc3Qgc2l0ZVZlcmlmeU1hcCA9IHtcblx0W1Byb3ZpZGVycy5DTE9VREZMQVJFX1RVUk5TVElMRV06IFwiaHR0cHM6Ly9jaGFsbGVuZ2VzLmNsb3VkZmxhcmUuY29tL3R1cm5zdGlsZS92MC9zaXRldmVyaWZ5XCIsXG5cdFtQcm92aWRlcnMuR09PR0xFX1JFQ0FQVENIQV06IFwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpL3NpdGV2ZXJpZnlcIixcblx0W1Byb3ZpZGVycy5IQ0FQVENIQV06IFwiaHR0cHM6Ly9hcGkuaGNhcHRjaGEuY29tL3NpdGV2ZXJpZnlcIixcblx0W1Byb3ZpZGVycy5DQVBUQ0hBRk9YXTogXCJodHRwczovL2FwaS5jYXB0Y2hhZm94LmNvbS9zaXRldmVyaWZ5XCJcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUHJvdmlkZXJzLCBkZWZhdWx0RW5kcG9pbnRzLCBzaXRlVmVyaWZ5TWFwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdGFudHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/constants.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXTERNAL_ERROR_CODES: () => (/* binding */ EXTERNAL_ERROR_CODES),\n/* harmony export */   INTERNAL_ERROR_CODES: () => (/* binding */ INTERNAL_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/captcha/error-codes.ts\nconst EXTERNAL_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tVERIFICATION_FAILED: \"Captcha verification failed\",\n\tMISSING_RESPONSE: \"Missing CAPTCHA response\",\n\tUNKNOWN_ERROR: \"Something went wrong\"\n});\nconst INTERNAL_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tMISSING_SECRET_KEY: \"Missing secret key\",\n\tSERVICE_UNAVAILABLE: \"CAPTCHA service unavailable\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvZXJyb3ItY29kZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRDs7QUFFM0Q7QUFDQSw2QkFBNkIseUVBQWdCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCw2QkFBNkIseUVBQWdCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ3NEO0FBQ3REIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcY2FwdGNoYVxcZXJyb3ItY29kZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUVycm9yQ29kZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2NhcHRjaGEvZXJyb3ItY29kZXMudHNcbmNvbnN0IEVYVEVSTkFMX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdFZFUklGSUNBVElPTl9GQUlMRUQ6IFwiQ2FwdGNoYSB2ZXJpZmljYXRpb24gZmFpbGVkXCIsXG5cdE1JU1NJTkdfUkVTUE9OU0U6IFwiTWlzc2luZyBDQVBUQ0hBIHJlc3BvbnNlXCIsXG5cdFVOS05PV05fRVJST1I6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIlxufSk7XG5jb25zdCBJTlRFUk5BTF9FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuXHRNSVNTSU5HX1NFQ1JFVF9LRVk6IFwiTWlzc2luZyBzZWNyZXQga2V5XCIsXG5cdFNFUlZJQ0VfVU5BVkFJTEFCTEU6IFwiQ0FQVENIQSBzZXJ2aWNlIHVuYXZhaWxhYmxlXCJcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVYVEVSTkFMX0VSUk9SX0NPREVTLCBJTlRFUk5BTF9FUlJPUl9DT0RFUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3ItY29kZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   captcha: () => (/* binding */ captcha)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/middleware-response.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\");\n/* harmony import */ var _constants_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/constants.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\");\n/* harmony import */ var _verify_handlers_captchafox_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./verify-handlers/captchafox.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/captchafox.mjs\");\n/* harmony import */ var _verify_handlers_cloudflare_turnstile_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./verify-handlers/cloudflare-turnstile.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/cloudflare-turnstile.mjs\");\n/* harmony import */ var _verify_handlers_google_recaptcha_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./verify-handlers/google-recaptcha.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/google-recaptcha.mjs\");\n/* harmony import */ var _verify_handlers_h_captcha_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./verify-handlers/h-captcha.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/h-captcha.mjs\");\n/* harmony import */ var _verify_handlers_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./verify-handlers/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/captcha/index.ts\nconst captcha = (options) => ({\n\tid: \"captcha\",\n\tonRequest: async (request, ctx) => {\n\t\ttry {\n\t\t\tif (!(options.endpoints?.length ? options.endpoints : _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultEndpoints).some((endpoint) => request.url.includes(endpoint))) return void 0;\n\t\t\tif (!options.secretKey) throw new Error(_error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__.INTERNAL_ERROR_CODES.MISSING_SECRET_KEY);\n\t\t\tconst captchaResponse = request.headers.get(\"x-captcha-response\");\n\t\t\tconst remoteUserIP = (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp)(request, ctx.options) ?? void 0;\n\t\t\tif (!captchaResponse) return (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_1__.middlewareResponse)({\n\t\t\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__.EXTERNAL_ERROR_CODES.MISSING_RESPONSE,\n\t\t\t\tstatus: 400\n\t\t\t});\n\t\t\tconst handlerParams = {\n\t\t\t\tsiteVerifyURL: options.siteVerifyURLOverride || _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.siteVerifyMap[options.provider],\n\t\t\t\tcaptchaResponse,\n\t\t\t\tsecretKey: options.secretKey,\n\t\t\t\tremoteIP: remoteUserIP\n\t\t\t};\n\t\t\tif (options.provider === _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.Providers.CLOUDFLARE_TURNSTILE) return await (0,_verify_handlers_cloudflare_turnstile_mjs__WEBPACK_IMPORTED_MODULE_5__.cloudflareTurnstile)(handlerParams);\n\t\t\tif (options.provider === _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.Providers.GOOGLE_RECAPTCHA) return await (0,_verify_handlers_google_recaptcha_mjs__WEBPACK_IMPORTED_MODULE_6__.googleRecaptcha)({\n\t\t\t\t...handlerParams,\n\t\t\t\tminScore: options.minScore\n\t\t\t});\n\t\t\tif (options.provider === _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.Providers.HCAPTCHA) return await (0,_verify_handlers_h_captcha_mjs__WEBPACK_IMPORTED_MODULE_7__.hCaptcha)({\n\t\t\t\t...handlerParams,\n\t\t\t\tsiteKey: options.siteKey\n\t\t\t});\n\t\t\tif (options.provider === _constants_mjs__WEBPACK_IMPORTED_MODULE_2__.Providers.CAPTCHAFOX) return await (0,_verify_handlers_captchafox_mjs__WEBPACK_IMPORTED_MODULE_4__.captchaFox)({\n\t\t\t\t...handlerParams,\n\t\t\t\tsiteKey: options.siteKey\n\t\t\t});\n\t\t} catch (_error) {\n\t\t\tconst errorMessage = _error instanceof Error ? _error.message : void 0;\n\t\t\tctx.logger.error(errorMessage ?? \"Unknown error\", {\n\t\t\t\tendpoint: request.url,\n\t\t\t\tmessage: _error\n\t\t\t});\n\t\t\treturn (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_1__.middlewareResponse)({\n\t\t\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__.EXTERNAL_ERROR_CODES.UNKNOWN_ERROR,\n\t\t\t\tstatus: 500\n\t\t\t});\n\t\t}\n\t},\n\toptions\n});\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDa0I7QUFDSTtBQUNFO0FBQ2pCO0FBQ21CO0FBQ1I7QUFDZDtBQUN0Qjs7QUFFckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCw0REFBZ0I7QUFDekUsMkNBQTJDLGtFQUFvQjtBQUMvRDtBQUNBLHdCQUF3QixnRUFBSztBQUM3QixnQ0FBZ0Msa0ZBQWtCO0FBQ2xELGFBQWEsa0VBQW9CO0FBQ2pDO0FBQ0EsSUFBSTtBQUNKO0FBQ0Esb0RBQW9ELHlEQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFEQUFTLG9DQUFvQyw4RkFBbUI7QUFDNUYsNEJBQTRCLHFEQUFTLGdDQUFnQyxzRkFBZTtBQUNwRjtBQUNBO0FBQ0EsSUFBSTtBQUNKLDRCQUE0QixxREFBUyx3QkFBd0Isd0VBQVE7QUFDckU7QUFDQTtBQUNBLElBQUk7QUFDSiw0QkFBNEIscURBQVMsMEJBQTBCLDJFQUFVO0FBQ3pFO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVUsa0ZBQWtCO0FBQzVCLGFBQWEsa0VBQW9CO0FBQ2pDO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGNhcHRjaGFcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi8uLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IG1pZGRsZXdhcmVSZXNwb25zZSB9IGZyb20gXCIuLi8uLi91dGlscy9taWRkbGV3YXJlLXJlc3BvbnNlLm1qc1wiO1xuaW1wb3J0IHsgUHJvdmlkZXJzLCBkZWZhdWx0RW5kcG9pbnRzLCBzaXRlVmVyaWZ5TWFwIH0gZnJvbSBcIi4vY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgRVhURVJOQUxfRVJST1JfQ09ERVMsIElOVEVSTkFMX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBjYXB0Y2hhRm94IH0gZnJvbSBcIi4vdmVyaWZ5LWhhbmRsZXJzL2NhcHRjaGFmb3gubWpzXCI7XG5pbXBvcnQgeyBjbG91ZGZsYXJlVHVybnN0aWxlIH0gZnJvbSBcIi4vdmVyaWZ5LWhhbmRsZXJzL2Nsb3VkZmxhcmUtdHVybnN0aWxlLm1qc1wiO1xuaW1wb3J0IHsgZ29vZ2xlUmVjYXB0Y2hhIH0gZnJvbSBcIi4vdmVyaWZ5LWhhbmRsZXJzL2dvb2dsZS1yZWNhcHRjaGEubWpzXCI7XG5pbXBvcnQgeyBoQ2FwdGNoYSB9IGZyb20gXCIuL3ZlcmlmeS1oYW5kbGVycy9oLWNhcHRjaGEubWpzXCI7XG5pbXBvcnQgXCIuL3ZlcmlmeS1oYW5kbGVycy9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2NhcHRjaGEvaW5kZXgudHNcbmNvbnN0IGNhcHRjaGEgPSAob3B0aW9ucykgPT4gKHtcblx0aWQ6IFwiY2FwdGNoYVwiLFxuXHRvblJlcXVlc3Q6IGFzeW5jIChyZXF1ZXN0LCBjdHgpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCEob3B0aW9ucy5lbmRwb2ludHM/Lmxlbmd0aCA/IG9wdGlvbnMuZW5kcG9pbnRzIDogZGVmYXVsdEVuZHBvaW50cykuc29tZSgoZW5kcG9pbnQpID0+IHJlcXVlc3QudXJsLmluY2x1ZGVzKGVuZHBvaW50KSkpIHJldHVybiB2b2lkIDA7XG5cdFx0XHRpZiAoIW9wdGlvbnMuc2VjcmV0S2V5KSB0aHJvdyBuZXcgRXJyb3IoSU5URVJOQUxfRVJST1JfQ09ERVMuTUlTU0lOR19TRUNSRVRfS0VZKTtcblx0XHRcdGNvbnN0IGNhcHRjaGFSZXNwb25zZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LWNhcHRjaGEtcmVzcG9uc2VcIik7XG5cdFx0XHRjb25zdCByZW1vdGVVc2VySVAgPSBnZXRJcChyZXF1ZXN0LCBjdHgub3B0aW9ucykgPz8gdm9pZCAwO1xuXHRcdFx0aWYgKCFjYXB0Y2hhUmVzcG9uc2UpIHJldHVybiBtaWRkbGV3YXJlUmVzcG9uc2Uoe1xuXHRcdFx0XHRtZXNzYWdlOiBFWFRFUk5BTF9FUlJPUl9DT0RFUy5NSVNTSU5HX1JFU1BPTlNFLFxuXHRcdFx0XHRzdGF0dXM6IDQwMFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBoYW5kbGVyUGFyYW1zID0ge1xuXHRcdFx0XHRzaXRlVmVyaWZ5VVJMOiBvcHRpb25zLnNpdGVWZXJpZnlVUkxPdmVycmlkZSB8fCBzaXRlVmVyaWZ5TWFwW29wdGlvbnMucHJvdmlkZXJdLFxuXHRcdFx0XHRjYXB0Y2hhUmVzcG9uc2UsXG5cdFx0XHRcdHNlY3JldEtleTogb3B0aW9ucy5zZWNyZXRLZXksXG5cdFx0XHRcdHJlbW90ZUlQOiByZW1vdGVVc2VySVBcblx0XHRcdH07XG5cdFx0XHRpZiAob3B0aW9ucy5wcm92aWRlciA9PT0gUHJvdmlkZXJzLkNMT1VERkxBUkVfVFVSTlNUSUxFKSByZXR1cm4gYXdhaXQgY2xvdWRmbGFyZVR1cm5zdGlsZShoYW5kbGVyUGFyYW1zKTtcblx0XHRcdGlmIChvcHRpb25zLnByb3ZpZGVyID09PSBQcm92aWRlcnMuR09PR0xFX1JFQ0FQVENIQSkgcmV0dXJuIGF3YWl0IGdvb2dsZVJlY2FwdGNoYSh7XG5cdFx0XHRcdC4uLmhhbmRsZXJQYXJhbXMsXG5cdFx0XHRcdG1pblNjb3JlOiBvcHRpb25zLm1pblNjb3JlXG5cdFx0XHR9KTtcblx0XHRcdGlmIChvcHRpb25zLnByb3ZpZGVyID09PSBQcm92aWRlcnMuSENBUFRDSEEpIHJldHVybiBhd2FpdCBoQ2FwdGNoYSh7XG5cdFx0XHRcdC4uLmhhbmRsZXJQYXJhbXMsXG5cdFx0XHRcdHNpdGVLZXk6IG9wdGlvbnMuc2l0ZUtleVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAob3B0aW9ucy5wcm92aWRlciA9PT0gUHJvdmlkZXJzLkNBUFRDSEFGT1gpIHJldHVybiBhd2FpdCBjYXB0Y2hhRm94KHtcblx0XHRcdFx0Li4uaGFuZGxlclBhcmFtcyxcblx0XHRcdFx0c2l0ZUtleTogb3B0aW9ucy5zaXRlS2V5XG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChfZXJyb3IpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IF9lcnJvciBpbnN0YW5jZW9mIEVycm9yID8gX2Vycm9yLm1lc3NhZ2UgOiB2b2lkIDA7XG5cdFx0XHRjdHgubG9nZ2VyLmVycm9yKGVycm9yTWVzc2FnZSA/PyBcIlVua25vd24gZXJyb3JcIiwge1xuXHRcdFx0XHRlbmRwb2ludDogcmVxdWVzdC51cmwsXG5cdFx0XHRcdG1lc3NhZ2U6IF9lcnJvclxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gbWlkZGxld2FyZVJlc3BvbnNlKHtcblx0XHRcdFx0bWVzc2FnZTogRVhURVJOQUxfRVJST1JfQ09ERVMuVU5LTk9XTl9FUlJPUixcblx0XHRcdFx0c3RhdHVzOiA1MDBcblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblx0b3B0aW9uc1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2FwdGNoYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/utils.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/utils.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeToURLParams: () => (/* binding */ encodeToURLParams)\n/* harmony export */ });\n//#region src/plugins/captcha/utils.ts\nconst encodeToURLParams = (obj) => {\n\tif (typeof obj !== \"object\" || obj === null || Array.isArray(obj)) throw new Error(\"Input must be a non-null object.\");\n\tconst params = new URLSearchParams();\n\tfor (const [key, value] of Object.entries(obj)) if (value !== void 0 && value !== null) params.append(key, String(value));\n\treturn params.toString();\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGNhcHRjaGFcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvY2FwdGNoYS91dGlscy50c1xuY29uc3QgZW5jb2RlVG9VUkxQYXJhbXMgPSAob2JqKSA9PiB7XG5cdGlmICh0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiIHx8IG9iaiA9PT0gbnVsbCB8fCBBcnJheS5pc0FycmF5KG9iaikpIHRocm93IG5ldyBFcnJvcihcIklucHV0IG11c3QgYmUgYSBub24tbnVsbCBvYmplY3QuXCIpO1xuXHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIGlmICh2YWx1ZSAhPT0gdm9pZCAwICYmIHZhbHVlICE9PSBudWxsKSBwYXJhbXMuYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG5cdHJldHVybiBwYXJhbXMudG9TdHJpbmcoKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZW5jb2RlVG9VUkxQYXJhbXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/captchafox.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/verify-handlers/captchafox.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   captchaFox: () => (/* binding */ captchaFox)\n/* harmony export */ });\n/* harmony import */ var _utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/middleware-response.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/utils.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n//#region src/plugins/captcha/verify-handlers/captchafox.ts\nconst captchaFox = async ({ siteVerifyURL, captchaResponse, secretKey, siteKey, remoteIP }) => {\n\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__.betterFetch)(siteVerifyURL, {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n\t\tbody: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.encodeToURLParams)({\n\t\t\tsecret: secretKey,\n\t\t\tresponse: captchaResponse,\n\t\t\t...siteKey && { sitekey: siteKey },\n\t\t\t...remoteIP && { remoteIp: remoteIP }\n\t\t})\n\t});\n\tif (!response.data || response.error) throw new Error(_error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.INTERNAL_ERROR_CODES.SERVICE_UNAVAILABLE);\n\tif (!response.data.success) return (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__.middlewareResponse)({\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.EXTERNAL_ERROR_CODES.VERIFICATION_FAILED,\n\t\tstatus: 403\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=captchafox.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2NhcHRjaGFmb3gubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRFO0FBQ0k7QUFDL0I7QUFDQzs7QUFFbEQ7QUFDQSw0QkFBNEIsOERBQThEO0FBQzFGLHdCQUF3QixnRUFBVztBQUNuQztBQUNBLGFBQWEscURBQXFEO0FBQ2xFLFFBQVEsNkRBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDLG9CQUFvQjtBQUNwQixHQUFHO0FBQ0gsRUFBRTtBQUNGLHVEQUF1RCxrRUFBb0I7QUFDM0Usb0NBQW9DLGtGQUFrQjtBQUN0RCxXQUFXLGtFQUFvQjtBQUMvQjtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGNhcHRjaGFcXHZlcmlmeS1oYW5kbGVyc1xcY2FwdGNoYWZveC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWlkZGxld2FyZVJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL21pZGRsZXdhcmUtcmVzcG9uc2UubWpzXCI7XG5pbXBvcnQgeyBFWFRFUk5BTF9FUlJPUl9DT0RFUywgSU5URVJOQUxfRVJST1JfQ09ERVMgfSBmcm9tIFwiLi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBlbmNvZGVUb1VSTFBhcmFtcyB9IGZyb20gXCIuLi91dGlscy5tanNcIjtcbmltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSBcIkBiZXR0ZXItZmV0Y2gvZmV0Y2hcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2NhcHRjaGFmb3gudHNcbmNvbnN0IGNhcHRjaGFGb3ggPSBhc3luYyAoeyBzaXRlVmVyaWZ5VVJMLCBjYXB0Y2hhUmVzcG9uc2UsIHNlY3JldEtleSwgc2l0ZUtleSwgcmVtb3RlSVAgfSkgPT4ge1xuXHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGJldHRlckZldGNoKHNpdGVWZXJpZnlVUkwsIHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiB9LFxuXHRcdGJvZHk6IGVuY29kZVRvVVJMUGFyYW1zKHtcblx0XHRcdHNlY3JldDogc2VjcmV0S2V5LFxuXHRcdFx0cmVzcG9uc2U6IGNhcHRjaGFSZXNwb25zZSxcblx0XHRcdC4uLnNpdGVLZXkgJiYgeyBzaXRla2V5OiBzaXRlS2V5IH0sXG5cdFx0XHQuLi5yZW1vdGVJUCAmJiB7IHJlbW90ZUlwOiByZW1vdGVJUCB9XG5cdFx0fSlcblx0fSk7XG5cdGlmICghcmVzcG9uc2UuZGF0YSB8fCByZXNwb25zZS5lcnJvcikgdGhyb3cgbmV3IEVycm9yKElOVEVSTkFMX0VSUk9SX0NPREVTLlNFUlZJQ0VfVU5BVkFJTEFCTEUpO1xuXHRpZiAoIXJlc3BvbnNlLmRhdGEuc3VjY2VzcykgcmV0dXJuIG1pZGRsZXdhcmVSZXNwb25zZSh7XG5cdFx0bWVzc2FnZTogRVhURVJOQUxfRVJST1JfQ09ERVMuVkVSSUZJQ0FUSU9OX0ZBSUxFRCxcblx0XHRzdGF0dXM6IDQwM1xuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2FwdGNoYUZveCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FwdGNoYWZveC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/captchafox.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/cloudflare-turnstile.mjs":
/*!************************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/verify-handlers/cloudflare-turnstile.mjs ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloudflareTurnstile: () => (/* binding */ cloudflareTurnstile)\n/* harmony export */ });\n/* harmony import */ var _utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/middleware-response.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n//#region src/plugins/captcha/verify-handlers/cloudflare-turnstile.ts\nconst cloudflareTurnstile = async ({ siteVerifyURL, captchaResponse, secretKey, remoteIP }) => {\n\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_2__.betterFetch)(siteVerifyURL, {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\tbody: JSON.stringify({\n\t\t\tsecret: secretKey,\n\t\t\tresponse: captchaResponse,\n\t\t\t...remoteIP && { remoteip: remoteIP }\n\t\t})\n\t});\n\tif (!response.data || response.error) throw new Error(_error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.INTERNAL_ERROR_CODES.SERVICE_UNAVAILABLE);\n\tif (!response.data.success) return (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__.middlewareResponse)({\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.EXTERNAL_ERROR_CODES.VERIFICATION_FAILED,\n\t\tstatus: 403\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=cloudflare-turnstile.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2Nsb3VkZmxhcmUtdHVybnN0aWxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRFO0FBQ0k7QUFDOUI7O0FBRWxEO0FBQ0EscUNBQXFDLHFEQUFxRDtBQUMxRix3QkFBd0IsZ0VBQVc7QUFDbkM7QUFDQSxhQUFhLG9DQUFvQztBQUNqRDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsR0FBRztBQUNILEVBQUU7QUFDRix1REFBdUQsa0VBQW9CO0FBQzNFLG9DQUFvQyxrRkFBa0I7QUFDdEQsV0FBVyxrRUFBb0I7QUFDL0I7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjYXB0Y2hhXFx2ZXJpZnktaGFuZGxlcnNcXGNsb3VkZmxhcmUtdHVybnN0aWxlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtaWRkbGV3YXJlUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvbWlkZGxld2FyZS1yZXNwb25zZS5tanNcIjtcbmltcG9ydCB7IEVYVEVSTkFMX0VSUk9SX0NPREVTLCBJTlRFUk5BTF9FUlJPUl9DT0RFUyB9IGZyb20gXCIuLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSBcIkBiZXR0ZXItZmV0Y2gvZmV0Y2hcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2Nsb3VkZmxhcmUtdHVybnN0aWxlLnRzXG5jb25zdCBjbG91ZGZsYXJlVHVybnN0aWxlID0gYXN5bmMgKHsgc2l0ZVZlcmlmeVVSTCwgY2FwdGNoYVJlc3BvbnNlLCBzZWNyZXRLZXksIHJlbW90ZUlQIH0pID0+IHtcblx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBiZXR0ZXJGZXRjaChzaXRlVmVyaWZ5VVJMLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0c2VjcmV0OiBzZWNyZXRLZXksXG5cdFx0XHRyZXNwb25zZTogY2FwdGNoYVJlc3BvbnNlLFxuXHRcdFx0Li4ucmVtb3RlSVAgJiYgeyByZW1vdGVpcDogcmVtb3RlSVAgfVxuXHRcdH0pXG5cdH0pO1xuXHRpZiAoIXJlc3BvbnNlLmRhdGEgfHwgcmVzcG9uc2UuZXJyb3IpIHRocm93IG5ldyBFcnJvcihJTlRFUk5BTF9FUlJPUl9DT0RFUy5TRVJWSUNFX1VOQVZBSUxBQkxFKTtcblx0aWYgKCFyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHJldHVybiBtaWRkbGV3YXJlUmVzcG9uc2Uoe1xuXHRcdG1lc3NhZ2U6IEVYVEVSTkFMX0VSUk9SX0NPREVTLlZFUklGSUNBVElPTl9GQUlMRUQsXG5cdFx0c3RhdHVzOiA0MDNcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNsb3VkZmxhcmVUdXJuc3RpbGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb3VkZmxhcmUtdHVybnN0aWxlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/cloudflare-turnstile.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/google-recaptcha.mjs":
/*!********************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/verify-handlers/google-recaptcha.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   googleRecaptcha: () => (/* binding */ googleRecaptcha)\n/* harmony export */ });\n/* harmony import */ var _utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/middleware-response.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/utils.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n//#region src/plugins/captcha/verify-handlers/google-recaptcha.ts\nconst isV3 = (response) => {\n\treturn \"score\" in response && typeof response.score === \"number\";\n};\nconst googleRecaptcha = async ({ siteVerifyURL, captchaResponse, secretKey, minScore = .5, remoteIP }) => {\n\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__.betterFetch)(siteVerifyURL, {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n\t\tbody: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.encodeToURLParams)({\n\t\t\tsecret: secretKey,\n\t\t\tresponse: captchaResponse,\n\t\t\t...remoteIP && { remoteip: remoteIP }\n\t\t})\n\t});\n\tif (!response.data || response.error) throw new Error(_error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.INTERNAL_ERROR_CODES.SERVICE_UNAVAILABLE);\n\tif (!response.data.success || isV3(response.data) && response.data.score < minScore) return (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__.middlewareResponse)({\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.EXTERNAL_ERROR_CODES.VERIFICATION_FAILED,\n\t\tstatus: 403\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=google-recaptcha.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2dvb2dsZS1yZWNhcHRjaGEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTRFO0FBQ0k7QUFDL0I7QUFDQzs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0VBQW9FO0FBQ3JHLHdCQUF3QixnRUFBVztBQUNuQztBQUNBLGFBQWEscURBQXFEO0FBQ2xFLFFBQVEsNkRBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsR0FBRztBQUNILEVBQUU7QUFDRix1REFBdUQsa0VBQW9CO0FBQzNFLDZGQUE2RixrRkFBa0I7QUFDL0csV0FBVyxrRUFBb0I7QUFDL0I7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjYXB0Y2hhXFx2ZXJpZnktaGFuZGxlcnNcXGdvb2dsZS1yZWNhcHRjaGEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1pZGRsZXdhcmVSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9taWRkbGV3YXJlLXJlc3BvbnNlLm1qc1wiO1xuaW1wb3J0IHsgRVhURVJOQUxfRVJST1JfQ09ERVMsIElOVEVSTkFMX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVG9VUkxQYXJhbXMgfSBmcm9tIFwiLi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9jYXB0Y2hhL3ZlcmlmeS1oYW5kbGVycy9nb29nbGUtcmVjYXB0Y2hhLnRzXG5jb25zdCBpc1YzID0gKHJlc3BvbnNlKSA9PiB7XG5cdHJldHVybiBcInNjb3JlXCIgaW4gcmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLnNjb3JlID09PSBcIm51bWJlclwiO1xufTtcbmNvbnN0IGdvb2dsZVJlY2FwdGNoYSA9IGFzeW5jICh7IHNpdGVWZXJpZnlVUkwsIGNhcHRjaGFSZXNwb25zZSwgc2VjcmV0S2V5LCBtaW5TY29yZSA9IC41LCByZW1vdGVJUCB9KSA9PiB7XG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2goc2l0ZVZlcmlmeVVSTCwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0aGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiIH0sXG5cdFx0Ym9keTogZW5jb2RlVG9VUkxQYXJhbXMoe1xuXHRcdFx0c2VjcmV0OiBzZWNyZXRLZXksXG5cdFx0XHRyZXNwb25zZTogY2FwdGNoYVJlc3BvbnNlLFxuXHRcdFx0Li4ucmVtb3RlSVAgJiYgeyByZW1vdGVpcDogcmVtb3RlSVAgfVxuXHRcdH0pXG5cdH0pO1xuXHRpZiAoIXJlc3BvbnNlLmRhdGEgfHwgcmVzcG9uc2UuZXJyb3IpIHRocm93IG5ldyBFcnJvcihJTlRFUk5BTF9FUlJPUl9DT0RFUy5TRVJWSUNFX1VOQVZBSUxBQkxFKTtcblx0aWYgKCFyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgfHwgaXNWMyhyZXNwb25zZS5kYXRhKSAmJiByZXNwb25zZS5kYXRhLnNjb3JlIDwgbWluU2NvcmUpIHJldHVybiBtaWRkbGV3YXJlUmVzcG9uc2Uoe1xuXHRcdG1lc3NhZ2U6IEVYVEVSTkFMX0VSUk9SX0NPREVTLlZFUklGSUNBVElPTl9GQUlMRUQsXG5cdFx0c3RhdHVzOiA0MDNcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdvb2dsZVJlY2FwdGNoYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z29vZ2xlLXJlY2FwdGNoYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/google-recaptcha.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/h-captcha.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/verify-handlers/h-captcha.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hCaptcha: () => (/* binding */ hCaptcha)\n/* harmony export */ });\n/* harmony import */ var _utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/middleware-response.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/error-codes.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/utils.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n//#region src/plugins/captcha/verify-handlers/h-captcha.ts\nconst hCaptcha = async ({ siteVerifyURL, captchaResponse, secretKey, siteKey, remoteIP }) => {\n\tconst response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_3__.betterFetch)(siteVerifyURL, {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n\t\tbody: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.encodeToURLParams)({\n\t\t\tsecret: secretKey,\n\t\t\tresponse: captchaResponse,\n\t\t\t...siteKey && { sitekey: siteKey },\n\t\t\t...remoteIP && { remoteip: remoteIP }\n\t\t})\n\t});\n\tif (!response.data || response.error) throw new Error(_error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.INTERNAL_ERROR_CODES.SERVICE_UNAVAILABLE);\n\tif (!response.data.success) return (0,_utils_middleware_response_mjs__WEBPACK_IMPORTED_MODULE_0__.middlewareResponse)({\n\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.EXTERNAL_ERROR_CODES.VERIFICATION_FAILED,\n\t\tstatus: 403\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=h-captcha.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2gtY2FwdGNoYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEU7QUFDSTtBQUMvQjtBQUNDOztBQUVsRDtBQUNBLDBCQUEwQiw4REFBOEQ7QUFDeEYsd0JBQXdCLGdFQUFXO0FBQ25DO0FBQ0EsYUFBYSxxREFBcUQ7QUFDbEUsUUFBUSw2REFBaUI7QUFDekI7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckMsb0JBQW9CO0FBQ3BCLEdBQUc7QUFDSCxFQUFFO0FBQ0YsdURBQXVELGtFQUFvQjtBQUMzRSxvQ0FBb0Msa0ZBQWtCO0FBQ3RELFdBQVcsa0VBQW9CO0FBQy9CO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ29CO0FBQ3BCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcY2FwdGNoYVxcdmVyaWZ5LWhhbmRsZXJzXFxoLWNhcHRjaGEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1pZGRsZXdhcmVSZXNwb25zZSB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9taWRkbGV3YXJlLXJlc3BvbnNlLm1qc1wiO1xuaW1wb3J0IHsgRVhURVJOQUxfRVJST1JfQ09ERVMsIElOVEVSTkFMX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVG9VUkxQYXJhbXMgfSBmcm9tIFwiLi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9jYXB0Y2hhL3ZlcmlmeS1oYW5kbGVycy9oLWNhcHRjaGEudHNcbmNvbnN0IGhDYXB0Y2hhID0gYXN5bmMgKHsgc2l0ZVZlcmlmeVVSTCwgY2FwdGNoYVJlc3BvbnNlLCBzZWNyZXRLZXksIHNpdGVLZXksIHJlbW90ZUlQIH0pID0+IHtcblx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBiZXR0ZXJGZXRjaChzaXRlVmVyaWZ5VVJMLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgfSxcblx0XHRib2R5OiBlbmNvZGVUb1VSTFBhcmFtcyh7XG5cdFx0XHRzZWNyZXQ6IHNlY3JldEtleSxcblx0XHRcdHJlc3BvbnNlOiBjYXB0Y2hhUmVzcG9uc2UsXG5cdFx0XHQuLi5zaXRlS2V5ICYmIHsgc2l0ZWtleTogc2l0ZUtleSB9LFxuXHRcdFx0Li4ucmVtb3RlSVAgJiYgeyByZW1vdGVpcDogcmVtb3RlSVAgfVxuXHRcdH0pXG5cdH0pO1xuXHRpZiAoIXJlc3BvbnNlLmRhdGEgfHwgcmVzcG9uc2UuZXJyb3IpIHRocm93IG5ldyBFcnJvcihJTlRFUk5BTF9FUlJPUl9DT0RFUy5TRVJWSUNFX1VOQVZBSUxBQkxFKTtcblx0aWYgKCFyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHJldHVybiBtaWRkbGV3YXJlUmVzcG9uc2Uoe1xuXHRcdG1lc3NhZ2U6IEVYVEVSTkFMX0VSUk9SX0NPREVTLlZFUklGSUNBVElPTl9GQUlMRUQsXG5cdFx0c3RhdHVzOiA0MDNcblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGhDYXB0Y2hhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oLWNhcHRjaGEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/h-captcha.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/index.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/captcha/verify-handlers/index.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _captchafox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./captchafox.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/captchafox.mjs\");\n/* harmony import */ var _cloudflare_turnstile_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cloudflare-turnstile.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/cloudflare-turnstile.mjs\");\n/* harmony import */ var _google_recaptcha_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./google-recaptcha.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/google-recaptcha.mjs\");\n/* harmony import */ var _h_captcha_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./h-captcha.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/h-captcha.mjs\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2NhcHRjaGEvdmVyaWZ5LWhhbmRsZXJzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUNtQjtBQUNSO0FBQ2QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjYXB0Y2hhXFx2ZXJpZnktaGFuZGxlcnNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYXB0Y2hhRm94IH0gZnJvbSBcIi4vY2FwdGNoYWZveC5tanNcIjtcbmltcG9ydCB7IGNsb3VkZmxhcmVUdXJuc3RpbGUgfSBmcm9tIFwiLi9jbG91ZGZsYXJlLXR1cm5zdGlsZS5tanNcIjtcbmltcG9ydCB7IGdvb2dsZVJlY2FwdGNoYSB9IGZyb20gXCIuL2dvb2dsZS1yZWNhcHRjaGEubWpzXCI7XG5pbXBvcnQgeyBoQ2FwdGNoYSB9IGZyb20gXCIuL2gtY2FwdGNoYS5tanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/captcha/verify-handlers/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/custom-session/client.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customSessionClient: () => (/* binding */ customSessionClient)\n/* harmony export */ });\n/* harmony import */ var _client_plugins_infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/plugins/infer-plugin.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\");\n/* harmony import */ var _client_plugins_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/plugins/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/plugins/index.mjs\");\n\n\n\n//#region src/plugins/custom-session/client.ts\nconst customSessionClient = () => {\n\treturn (0,_client_plugins_infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_0__.InferServerPlugin)();\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2N1c3RvbS1zZXNzaW9uL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBFO0FBQ2xDOztBQUV4QztBQUNBO0FBQ0EsUUFBUSxtRkFBaUI7QUFDekI7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjdXN0b20tc2Vzc2lvblxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmZlclNlcnZlclBsdWdpbiB9IGZyb20gXCIuLi8uLi9jbGllbnQvcGx1Z2lucy9pbmZlci1wbHVnaW4ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jbGllbnQvcGx1Z2lucy9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2N1c3RvbS1zZXNzaW9uL2NsaWVudC50c1xuY29uc3QgY3VzdG9tU2Vzc2lvbkNsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIEluZmVyU2VydmVyUGx1Z2luKCk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGN1c3RvbVNlc3Npb25DbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/custom-session/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/custom-session/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customSession: () => (/* binding */ customSession)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/plugin-helper.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/plugin-helper.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/plugins/custom-session/index.ts\nconst getSessionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_4__.optional(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n\tdisableCookieCache: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().meta({ description: \"Disable cookie cache and fetch session from database\" }).or(zod__WEBPACK_IMPORTED_MODULE_4__.string().transform((v) => v === \"true\")).optional(),\n\tdisableRefresh: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().meta({ description: \"Disable session refresh. Useful for checking session status, without updating the session\" }).optional()\n}));\nconst customSession = (fn, options, pluginOptions) => {\n\treturn {\n\t\tid: \"custom-session\",\n\t\thooks: { after: [{\n\t\t\tmatcher: (ctx) => ctx.path === \"/multi-session/list-device-sessions\" && (pluginOptions?.shouldMutateListDeviceSessionsEndpoint ?? false),\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst response = await (0,_utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_2__.getEndpointResponse)(ctx);\n\t\t\t\tif (!response) return;\n\t\t\t\tconst newResponse = await Promise.all(response.map(async (v) => await fn(v, ctx)));\n\t\t\t\treturn ctx.json(newResponse);\n\t\t\t})\n\t\t}] },\n\t\tendpoints: { getSession: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_3__.createAuthEndpoint)(\"/get-session\", {\n\t\t\tmethod: \"GET\",\n\t\t\tquery: getSessionQuerySchema,\n\t\t\tmetadata: {\n\t\t\t\tCUSTOM_SESSION: true,\n\t\t\t\topenapi: {\n\t\t\t\t\tdescription: \"Get custom session data\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t}\n\t\t\t},\n\t\t\trequireHeaders: true\n\t\t}, async (ctx) => {\n\t\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.getSession)()({\n\t\t\t\t...ctx,\n\t\t\t\tasResponse: false,\n\t\t\t\theaders: ctx.headers,\n\t\t\t\treturnHeaders: true\n\t\t\t}).catch((e) => {\n\t\t\t\treturn null;\n\t\t\t});\n\t\t\tif (!session?.response) return ctx.json(null);\n\t\t\tconst fnResult = await fn(session.response, ctx);\n\t\t\tconst setCookie = session.headers.get(\"set-cookie\");\n\t\t\tif (setCookie) {\n\t\t\t\tctx.setHeader(\"set-cookie\", setCookie);\n\t\t\t\tsession.headers.delete(\"set-cookie\");\n\t\t\t}\n\t\t\tsession.headers.forEach((value, key) => {\n\t\t\t\tctx.setHeader(key, value);\n\t\t\t});\n\t\t\treturn ctx.json(fnResult);\n\t\t}) },\n\t\t$Infer: { Session: {} },\n\t\toptions: pluginOptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2N1c3RvbS1zZXNzaW9uL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEQ7QUFDN0I7QUFDdUM7QUFDM0M7QUFDd0Q7O0FBRWpGO0FBQ0EsOEJBQThCLHlDQUFVLENBQUMsdUNBQVE7QUFDakQscUJBQXFCLHdDQUFTLFVBQVUscUVBQXFFLEtBQUssdUNBQVE7QUFDMUgsaUJBQWlCLHdDQUFTLFVBQVUsMEdBQTBHO0FBQzlJLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxZQUFZLDJFQUFvQjtBQUNoQywyQkFBMkIsNkVBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTixlQUFlLFlBQVkseUVBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLG1FQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUcsR0FBRztBQUNOLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjdXN0b20tc2Vzc2lvblxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnRSZXNwb25zZSB9IGZyb20gXCIuLi8uLi91dGlscy9wbHVnaW4taGVscGVyLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvY3VzdG9tLXNlc3Npb24vaW5kZXgudHNcbmNvbnN0IGdldFNlc3Npb25RdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3Qoe1xuXHRkaXNhYmxlQ29va2llQ2FjaGU6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIGNvb2tpZSBjYWNoZSBhbmQgZmV0Y2ggc2Vzc2lvbiBmcm9tIGRhdGFiYXNlXCIgfSkub3Ioei5zdHJpbmcoKS50cmFuc2Zvcm0oKHYpID0+IHYgPT09IFwidHJ1ZVwiKSkub3B0aW9uYWwoKSxcblx0ZGlzYWJsZVJlZnJlc2g6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIHNlc3Npb24gcmVmcmVzaC4gVXNlZnVsIGZvciBjaGVja2luZyBzZXNzaW9uIHN0YXR1cywgd2l0aG91dCB1cGRhdGluZyB0aGUgc2Vzc2lvblwiIH0pLm9wdGlvbmFsKClcbn0pKTtcbmNvbnN0IGN1c3RvbVNlc3Npb24gPSAoZm4sIG9wdGlvbnMsIHBsdWdpbk9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJjdXN0b20tc2Vzc2lvblwiLFxuXHRcdGhvb2tzOiB7IGFmdGVyOiBbe1xuXHRcdFx0bWF0Y2hlcjogKGN0eCkgPT4gY3R4LnBhdGggPT09IFwiL211bHRpLXNlc3Npb24vbGlzdC1kZXZpY2Utc2Vzc2lvbnNcIiAmJiAocGx1Z2luT3B0aW9ucz8uc2hvdWxkTXV0YXRlTGlzdERldmljZVNlc3Npb25zRW5kcG9pbnQgPz8gZmFsc2UpLFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEVuZHBvaW50UmVzcG9uc2UoY3R4KTtcblx0XHRcdFx0aWYgKCFyZXNwb25zZSkgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBuZXdSZXNwb25zZSA9IGF3YWl0IFByb21pc2UuYWxsKHJlc3BvbnNlLm1hcChhc3luYyAodikgPT4gYXdhaXQgZm4odiwgY3R4KSkpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obmV3UmVzcG9uc2UpO1xuXHRcdFx0fSlcblx0XHR9XSB9LFxuXHRcdGVuZHBvaW50czogeyBnZXRTZXNzaW9uOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZ2V0LXNlc3Npb25cIiwge1xuXHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0cXVlcnk6IGdldFNlc3Npb25RdWVyeVNjaGVtYSxcblx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdENVU1RPTV9TRVNTSU9OOiB0cnVlLFxuXHRcdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiR2V0IGN1c3RvbSBzZXNzaW9uIGRhdGFcIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0aXRlbXM6IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlXG5cdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKSh7XG5cdFx0XHRcdC4uLmN0eCxcblx0XHRcdFx0YXNSZXNwb25zZTogZmFsc2UsXG5cdFx0XHRcdGhlYWRlcnM6IGN0eC5oZWFkZXJzLFxuXHRcdFx0XHRyZXR1cm5IZWFkZXJzOiB0cnVlXG5cdFx0XHR9KS5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFzZXNzaW9uPy5yZXNwb25zZSkgcmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdFx0Y29uc3QgZm5SZXN1bHQgPSBhd2FpdCBmbihzZXNzaW9uLnJlc3BvbnNlLCBjdHgpO1xuXHRcdFx0Y29uc3Qgc2V0Q29va2llID0gc2Vzc2lvbi5oZWFkZXJzLmdldChcInNldC1jb29raWVcIik7XG5cdFx0XHRpZiAoc2V0Q29va2llKSB7XG5cdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJzZXQtY29va2llXCIsIHNldENvb2tpZSk7XG5cdFx0XHRcdHNlc3Npb24uaGVhZGVycy5kZWxldGUoXCJzZXQtY29va2llXCIpO1xuXHRcdFx0fVxuXHRcdFx0c2Vzc2lvbi5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdFx0Y3R4LnNldEhlYWRlcihrZXksIHZhbHVlKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKGZuUmVzdWx0KTtcblx0XHR9KSB9LFxuXHRcdCRJbmZlcjogeyBTZXNzaW9uOiB7fSB9LFxuXHRcdG9wdGlvbnM6IHBsdWdpbk9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3VzdG9tU2Vzc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/custom-session/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/client.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deviceAuthorizationClient: () => (/* binding */ deviceAuthorizationClient)\n/* harmony export */ });\n//#region src/plugins/device-authorization/client.ts\nconst deviceAuthorizationClient = () => {\n\treturn {\n\t\tid: \"device-authorization\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/device/code\": \"POST\",\n\t\t\t\"/device/token\": \"POST\",\n\t\t\t\"/device\": \"GET\",\n\t\t\t\"/device/approve\": \"POST\",\n\t\t\t\"/device/deny\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGRldmljZS1hdXRob3JpemF0aW9uXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9kZXZpY2UtYXV0aG9yaXphdGlvbi9jbGllbnQudHNcbmNvbnN0IGRldmljZUF1dGhvcml6YXRpb25DbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZGV2aWNlLWF1dGhvcml6YXRpb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9kZXZpY2UvY29kZVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RldmljZS90b2tlblwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RldmljZVwiOiBcIkdFVFwiLFxuXHRcdFx0XCIvZGV2aWNlL2FwcHJvdmVcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi9kZXZpY2UvZGVueVwiOiBcIlBPU1RcIlxuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGV2aWNlQXV0aG9yaXphdGlvbkNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/error-codes.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/error-codes.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEVICE_AUTHORIZATION_ERROR_CODES: () => (/* binding */ DEVICE_AUTHORIZATION_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/device-authorization/error-codes.ts\nconst DEVICE_AUTHORIZATION_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tINVALID_DEVICE_CODE: \"Invalid device code\",\n\tEXPIRED_DEVICE_CODE: \"Device code has expired\",\n\tEXPIRED_USER_CODE: \"User code has expired\",\n\tAUTHORIZATION_PENDING: \"Authorization pending\",\n\tACCESS_DENIED: \"Access denied\",\n\tINVALID_USER_CODE: \"Invalid user code\",\n\tDEVICE_CODE_ALREADY_PROCESSED: \"Device code already processed\",\n\tPOLLING_TOO_FREQUENTLY: \"Polling too frequently\",\n\tUSER_NOT_FOUND: \"User not found\",\n\tFAILED_TO_CREATE_SESSION: \"Failed to create session\",\n\tINVALID_DEVICE_CODE_STATUS: \"Invalid device code status\",\n\tAUTHENTICATION_REQUIRED: \"Authentication required\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2Vycm9yLWNvZGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRDs7QUFFM0Q7QUFDQSx5Q0FBeUMseUVBQWdCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDNEM7QUFDNUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxkZXZpY2UtYXV0aG9yaXphdGlvblxcZXJyb3ItY29kZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUVycm9yQ29kZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2Vycm9yLWNvZGVzLnRzXG5jb25zdCBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuXHRJTlZBTElEX0RFVklDRV9DT0RFOiBcIkludmFsaWQgZGV2aWNlIGNvZGVcIixcblx0RVhQSVJFRF9ERVZJQ0VfQ09ERTogXCJEZXZpY2UgY29kZSBoYXMgZXhwaXJlZFwiLFxuXHRFWFBJUkVEX1VTRVJfQ09ERTogXCJVc2VyIGNvZGUgaGFzIGV4cGlyZWRcIixcblx0QVVUSE9SSVpBVElPTl9QRU5ESU5HOiBcIkF1dGhvcml6YXRpb24gcGVuZGluZ1wiLFxuXHRBQ0NFU1NfREVOSUVEOiBcIkFjY2VzcyBkZW5pZWRcIixcblx0SU5WQUxJRF9VU0VSX0NPREU6IFwiSW52YWxpZCB1c2VyIGNvZGVcIixcblx0REVWSUNFX0NPREVfQUxSRUFEWV9QUk9DRVNTRUQ6IFwiRGV2aWNlIGNvZGUgYWxyZWFkeSBwcm9jZXNzZWRcIixcblx0UE9MTElOR19UT09fRlJFUVVFTlRMWTogXCJQb2xsaW5nIHRvbyBmcmVxdWVudGx5XCIsXG5cdFVTRVJfTk9UX0ZPVU5EOiBcIlVzZXIgbm90IGZvdW5kXCIsXG5cdEZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTjogXCJGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb25cIixcblx0SU5WQUxJRF9ERVZJQ0VfQ09ERV9TVEFUVVM6IFwiSW52YWxpZCBkZXZpY2UgY29kZSBzdGF0dXNcIixcblx0QVVUSEVOVElDQVRJT05fUkVRVUlSRUQ6IFwiQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIlxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yLWNvZGVzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/index.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/index.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deviceAuthorization: () => (/* binding */ deviceAuthorization),\n/* harmony export */   deviceAuthorizationOptionsSchema: () => (/* binding */ deviceAuthorizationOptionsSchema)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/time.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/error-codes.mjs\");\n/* harmony import */ var _routes_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./routes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/routes.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/schema.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n\n\n\n//#region src/plugins/device-authorization/index.ts\nconst timeStringSchema = zod__WEBPACK_IMPORTED_MODULE_6__.custom((val) => {\n\tif (typeof val !== \"string\") return false;\n\ttry {\n\t\t(0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__.ms)(val);\n\t\treturn true;\n\t} catch {\n\t\treturn false;\n\t}\n}, { message: \"Invalid time string format. Use formats like '30m', '5s', '1h', etc.\" });\nconst deviceAuthorizationOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_6__.object({\n\texpiresIn: timeStringSchema.default(\"30m\").describe(\"Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc.\"),\n\tinterval: timeStringSchema.default(\"5s\").describe(\"Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc.\"),\n\tdeviceCodeLength: zod__WEBPACK_IMPORTED_MODULE_6__.number().int().positive().default(40).describe(\"Length of the device code to be generated. Default is 40 characters.\"),\n\tuserCodeLength: zod__WEBPACK_IMPORTED_MODULE_6__.number().int().positive().default(8).describe(\"Length of the user code to be generated. Default is 8 characters.\"),\n\tgenerateDeviceCode: zod__WEBPACK_IMPORTED_MODULE_6__.custom((val) => typeof val === \"function\", { message: \"generateDeviceCode must be a function that returns a string or a promise that resolves to a string.\" }).optional().describe(\"Function to generate a device code. If not provided, a default random string generator will be used.\"),\n\tgenerateUserCode: zod__WEBPACK_IMPORTED_MODULE_6__.custom((val) => typeof val === \"function\", { message: \"generateUserCode must be a function that returns a string or a promise that resolves to a string.\" }).optional().describe(\"Function to generate a user code. If not provided, a default random string generator will be used.\"),\n\tvalidateClient: zod__WEBPACK_IMPORTED_MODULE_6__.custom((val) => typeof val === \"function\", { message: \"validateClient must be a function that returns a boolean or a promise that resolves to a boolean.\" }).optional().describe(\"Function to validate the client ID. If not provided, no validation will be performed.\"),\n\tonDeviceAuthRequest: zod__WEBPACK_IMPORTED_MODULE_6__.custom((val) => typeof val === \"function\", { message: \"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void.\" }).optional().describe(\"Function to handle device authorization requests. If not provided, no additional actions will be taken.\"),\n\tverificationUri: zod__WEBPACK_IMPORTED_MODULE_6__.string().optional().describe(\"The URI where users verify their device code. Can be an absolute URL (https://example.com/device) or relative path (/custom-path). This will be returned as verification_uri in the device code response. If not provided, defaults to /device.\"),\n\tschema: zod__WEBPACK_IMPORTED_MODULE_6__.custom(() => true)\n});\nconst deviceAuthorization = (options = {}) => {\n\tconst opts = deviceAuthorizationOptionsSchema.parse(options);\n\treturn {\n\t\tid: \"device-authorization\",\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_5__.schema, options?.schema),\n\t\tendpoints: {\n\t\t\tdeviceCode: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_4__.deviceCode)(opts),\n\t\t\tdeviceToken: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_4__.deviceToken)(opts),\n\t\t\tdeviceVerify: _routes_mjs__WEBPACK_IMPORTED_MODULE_4__.deviceVerify,\n\t\t\tdeviceApprove: _routes_mjs__WEBPACK_IMPORTED_MODULE_4__.deviceApprove,\n\t\t\tdeviceDeny: _routes_mjs__WEBPACK_IMPORTED_MODULE_4__.deviceDeny\n\t\t},\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_3__.DEVICE_AUTHORIZATION_ERROR_CODES,\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDdEI7QUFDYztBQUMyQjtBQUMyQjtBQUMxRDtBQUNiOztBQUV6QjtBQUNBLHlCQUF5Qix1Q0FBUTtBQUNqQztBQUNBO0FBQ0EsRUFBRSxtREFBRTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDLElBQUksaUZBQWlGO0FBQ3RGLHlDQUF5Qyx1Q0FBUTtBQUNqRDtBQUNBO0FBQ0EsbUJBQW1CLHVDQUFRO0FBQzNCLGlCQUFpQix1Q0FBUTtBQUN6QixxQkFBcUIsdUNBQVEsdUNBQXVDLGdIQUFnSDtBQUNwTCxtQkFBbUIsdUNBQVEsdUNBQXVDLDhHQUE4RztBQUNoTCxpQkFBaUIsdUNBQVEsdUNBQXVDLDhHQUE4RztBQUM5SyxzQkFBc0IsdUNBQVEsdUNBQXVDLHlHQUF5RztBQUM5SyxrQkFBa0IsdUNBQVE7QUFDMUIsU0FBUyx1Q0FBUTtBQUNqQixDQUFDO0FBQ0QseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMkRBQVcsQ0FBQywrQ0FBTTtBQUM1QjtBQUNBLGVBQWUsdURBQVU7QUFDekIsZ0JBQWdCLHdEQUFXO0FBQzNCLGVBQWU7QUFDZixnQkFBZ0I7QUFDaEIsYUFBYTtBQUNiLEdBQUc7QUFDSCxnQkFBZ0IsOEVBQWdDO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNpRTtBQUNqRSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGRldmljZS1hdXRob3JpemF0aW9uXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2VTY2hlbWEgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vZGIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtcyB9IGZyb20gXCIuLi8uLi91dGlscy90aW1lLm1qc1wiO1xuaW1wb3J0IHsgREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IGRldmljZUFwcHJvdmUsIGRldmljZUNvZGUsIGRldmljZURlbnksIGRldmljZVRva2VuLCBkZXZpY2VWZXJpZnkgfSBmcm9tIFwiLi9yb3V0ZXMubWpzXCI7XG5pbXBvcnQgeyBzY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2luZGV4LnRzXG5jb25zdCB0aW1lU3RyaW5nU2NoZW1hID0gei5jdXN0b20oKHZhbCkgPT4ge1xuXHRpZiAodHlwZW9mIHZhbCAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIGZhbHNlO1xuXHR0cnkge1xuXHRcdG1zKHZhbCk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSwgeyBtZXNzYWdlOiBcIkludmFsaWQgdGltZSBzdHJpbmcgZm9ybWF0LiBVc2UgZm9ybWF0cyBsaWtlICczMG0nLCAnNXMnLCAnMWgnLCBldGMuXCIgfSk7XG5jb25zdCBkZXZpY2VBdXRob3JpemF0aW9uT3B0aW9uc1NjaGVtYSA9IHoub2JqZWN0KHtcblx0ZXhwaXJlc0luOiB0aW1lU3RyaW5nU2NoZW1hLmRlZmF1bHQoXCIzMG1cIikuZGVzY3JpYmUoXCJUaW1lIGluIHNlY29uZHMgdW50aWwgdGhlIGRldmljZSBjb2RlIGV4cGlyZXMuIFVzZSBmb3JtYXRzIGxpa2UgJzMwbScsICc1cycsICcxaCcsIGV0Yy5cIiksXG5cdGludGVydmFsOiB0aW1lU3RyaW5nU2NoZW1hLmRlZmF1bHQoXCI1c1wiKS5kZXNjcmliZShcIlRpbWUgaW4gc2Vjb25kcyBiZXR3ZWVuIHBvbGxpbmcgYXR0ZW1wdHMuIFVzZSBmb3JtYXRzIGxpa2UgJzMwbScsICc1cycsICcxaCcsIGV0Yy5cIiksXG5cdGRldmljZUNvZGVMZW5ndGg6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5kZWZhdWx0KDQwKS5kZXNjcmliZShcIkxlbmd0aCBvZiB0aGUgZGV2aWNlIGNvZGUgdG8gYmUgZ2VuZXJhdGVkLiBEZWZhdWx0IGlzIDQwIGNoYXJhY3RlcnMuXCIpLFxuXHR1c2VyQ29kZUxlbmd0aDogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLmRlZmF1bHQoOCkuZGVzY3JpYmUoXCJMZW5ndGggb2YgdGhlIHVzZXIgY29kZSB0byBiZSBnZW5lcmF0ZWQuIERlZmF1bHQgaXMgOCBjaGFyYWN0ZXJzLlwiKSxcblx0Z2VuZXJhdGVEZXZpY2VDb2RlOiB6LmN1c3RvbSgodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIsIHsgbWVzc2FnZTogXCJnZW5lcmF0ZURldmljZUNvZGUgbXVzdCBiZSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZyBvciBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZy5cIiB9KS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSBkZXZpY2UgY29kZS4gSWYgbm90IHByb3ZpZGVkLCBhIGRlZmF1bHQgcmFuZG9tIHN0cmluZyBnZW5lcmF0b3Igd2lsbCBiZSB1c2VkLlwiKSxcblx0Z2VuZXJhdGVVc2VyQ29kZTogei5jdXN0b20oKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiLCB7IG1lc3NhZ2U6IFwiZ2VuZXJhdGVVc2VyQ29kZSBtdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nLlwiIH0pLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJGdW5jdGlvbiB0byBnZW5lcmF0ZSBhIHVzZXIgY29kZS4gSWYgbm90IHByb3ZpZGVkLCBhIGRlZmF1bHQgcmFuZG9tIHN0cmluZyBnZW5lcmF0b3Igd2lsbCBiZSB1c2VkLlwiKSxcblx0dmFsaWRhdGVDbGllbnQ6IHouY3VzdG9tKCh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiwgeyBtZXNzYWdlOiBcInZhbGlkYXRlQ2xpZW50IG11c3QgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgYm9vbGVhbi5cIiB9KS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiRnVuY3Rpb24gdG8gdmFsaWRhdGUgdGhlIGNsaWVudCBJRC4gSWYgbm90IHByb3ZpZGVkLCBubyB2YWxpZGF0aW9uIHdpbGwgYmUgcGVyZm9ybWVkLlwiKSxcblx0b25EZXZpY2VBdXRoUmVxdWVzdDogei5jdXN0b20oKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiLCB7IG1lc3NhZ2U6IFwib25EZXZpY2VBdXRoUmVxdWVzdCBtdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHZvaWQgb3IgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdm9pZC5cIiB9KS5vcHRpb25hbCgpLmRlc2NyaWJlKFwiRnVuY3Rpb24gdG8gaGFuZGxlIGRldmljZSBhdXRob3JpemF0aW9uIHJlcXVlc3RzLiBJZiBub3QgcHJvdmlkZWQsIG5vIGFkZGl0aW9uYWwgYWN0aW9ucyB3aWxsIGJlIHRha2VuLlwiKSxcblx0dmVyaWZpY2F0aW9uVXJpOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVzY3JpYmUoXCJUaGUgVVJJIHdoZXJlIHVzZXJzIHZlcmlmeSB0aGVpciBkZXZpY2UgY29kZS4gQ2FuIGJlIGFuIGFic29sdXRlIFVSTCAoaHR0cHM6Ly9leGFtcGxlLmNvbS9kZXZpY2UpIG9yIHJlbGF0aXZlIHBhdGggKC9jdXN0b20tcGF0aCkuIFRoaXMgd2lsbCBiZSByZXR1cm5lZCBhcyB2ZXJpZmljYXRpb25fdXJpIGluIHRoZSBkZXZpY2UgY29kZSByZXNwb25zZS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byAvZGV2aWNlLlwiKSxcblx0c2NoZW1hOiB6LmN1c3RvbSgoKSA9PiB0cnVlKVxufSk7XG5jb25zdCBkZXZpY2VBdXRob3JpemF0aW9uID0gKG9wdGlvbnMgPSB7fSkgPT4ge1xuXHRjb25zdCBvcHRzID0gZGV2aWNlQXV0aG9yaXphdGlvbk9wdGlvbnNTY2hlbWEucGFyc2Uob3B0aW9ucyk7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZGV2aWNlLWF1dGhvcml6YXRpb25cIixcblx0XHRzY2hlbWE6IG1lcmdlU2NoZW1hKHNjaGVtYSwgb3B0aW9ucz8uc2NoZW1hKSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdGRldmljZUNvZGU6IGRldmljZUNvZGUob3B0cyksXG5cdFx0XHRkZXZpY2VUb2tlbjogZGV2aWNlVG9rZW4ob3B0cyksXG5cdFx0XHRkZXZpY2VWZXJpZnksXG5cdFx0XHRkZXZpY2VBcHByb3ZlLFxuXHRcdFx0ZGV2aWNlRGVueVxuXHRcdH0sXG5cdFx0JEVSUk9SX0NPREVTOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUyxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRldmljZUF1dGhvcml6YXRpb24sIGRldmljZUF1dGhvcml6YXRpb25PcHRpb25zU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/routes.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/routes.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deviceApprove: () => (/* binding */ deviceApprove),\n/* harmony export */   deviceCode: () => (/* binding */ deviceCode),\n/* harmony export */   deviceDeny: () => (/* binding */ deviceDeny),\n/* harmony export */   deviceToken: () => (/* binding */ deviceToken),\n/* harmony export */   deviceVerify: () => (/* binding */ deviceVerify)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/time.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/error-codes.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/device-authorization/routes.ts\nconst defaultCharset = \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\";\nconst deviceCodeBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tclient_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The client ID of the application\" }),\n\tscope: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Space-separated list of scopes\" }).optional()\n});\nconst deviceCodeErrorSchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"invalid_request\", \"invalid_client\"]).meta({ description: \"Error code\" }),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Detailed error description\" })\n});\nconst deviceCode = (opts) => {\n\tconst generateDeviceCode = async () => {\n\t\tif (opts.generateDeviceCode) return opts.generateDeviceCode();\n\t\treturn defaultGenerateDeviceCode(opts.deviceCodeLength);\n\t};\n\tconst generateUserCode = async () => {\n\t\tif (opts.generateUserCode) return opts.generateUserCode();\n\t\treturn defaultGenerateUserCode(opts.userCodeLength);\n\t};\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/device/code\", {\n\t\tmethod: \"POST\",\n\t\tbody: deviceCodeBodySchema,\n\t\terror: deviceCodeErrorSchema,\n\t\tmetadata: { openapi: {\n\t\t\tdescription: `Request a device and user code\n\nFollow [rfc8628#section-3.2](https://datatracker.ietf.org/doc/html/rfc8628#section-3.2)`,\n\t\t\tresponses: {\n\t\t\t\t200: {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tdevice_code: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The device verification code\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser_code: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The user code to display\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tverification_uri: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tdescription: \"The URL for user verification. Defaults to /device if not configured.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tverification_uri_complete: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tdescription: \"The complete URL with user code as query parameter.\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\texpires_in: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tdescription: \"Lifetime in seconds of the device code\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tinterval: {\n\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\tdescription: \"Minimum polling interval in seconds\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t400: {\n\t\t\t\t\tdescription: \"Error response\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tenum: [\"invalid_request\", \"invalid_client\"]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror_description: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t} }\n\t}, async (ctx) => {\n\t\tif (opts.validateClient) {\n\t\t\tif (!await opts.validateClient(ctx.body.client_id)) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\t\t\terror: \"invalid_client\",\n\t\t\t\terror_description: \"Invalid client ID\"\n\t\t\t});\n\t\t}\n\t\tif (opts.onDeviceAuthRequest) await opts.onDeviceAuthRequest(ctx.body.client_id, ctx.body.scope);\n\t\tconst deviceCode$1 = await generateDeviceCode();\n\t\tconst userCode = await generateUserCode();\n\t\tconst expiresIn = (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__.ms)(opts.expiresIn);\n\t\tconst expiresAt = new Date(Date.now() + expiresIn);\n\t\tawait ctx.context.adapter.create({\n\t\t\tmodel: \"deviceCode\",\n\t\t\tdata: {\n\t\t\t\tdeviceCode: deviceCode$1,\n\t\t\t\tuserCode,\n\t\t\t\texpiresAt,\n\t\t\t\tstatus: \"pending\",\n\t\t\t\tpollingInterval: (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__.ms)(opts.interval),\n\t\t\t\tclientId: ctx.body.client_id,\n\t\t\t\tscope: ctx.body.scope\n\t\t\t}\n\t\t});\n\t\tconst { verificationUri, verificationUriComplete } = buildVerificationUris(opts.verificationUri, ctx.context.baseURL, userCode);\n\t\treturn ctx.json({\n\t\t\tdevice_code: deviceCode$1,\n\t\t\tuser_code: userCode,\n\t\t\tverification_uri: verificationUri,\n\t\t\tverification_uri_complete: verificationUriComplete,\n\t\t\texpires_in: Math.floor(expiresIn / 1e3),\n\t\t\tinterval: Math.floor((0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_2__.ms)(opts.interval) / 1e3)\n\t\t}, { headers: { \"Cache-Control\": \"no-store\" } });\n\t});\n};\nconst deviceTokenBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tgrant_type: zod__WEBPACK_IMPORTED_MODULE_7__.literal(\"urn:ietf:params:oauth:grant-type:device_code\").meta({ description: \"The grant type for device flow\" }),\n\tdevice_code: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The device verification code\" }),\n\tclient_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The client ID of the application\" })\n});\nconst deviceTokenErrorSchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\n\t\t\"authorization_pending\",\n\t\t\"slow_down\",\n\t\t\"expired_token\",\n\t\t\"access_denied\",\n\t\t\"invalid_request\",\n\t\t\"invalid_grant\"\n\t]).meta({ description: \"Error code\" }),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Detailed error description\" })\n});\nconst deviceToken = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/device/token\", {\n\tmethod: \"POST\",\n\tbody: deviceTokenBodySchema,\n\terror: deviceTokenErrorSchema,\n\tmetadata: { openapi: {\n\t\tdescription: `Exchange device code for access token\n\nFollow [rfc8628#section-3.4](https://datatracker.ietf.org/doc/html/rfc8628#section-3.4)`,\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: {\n\t\t\t\tdescription: \"Error response\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\t\"authorization_pending\",\n\t\t\t\t\t\t\t\t\"slow_down\",\n\t\t\t\t\t\t\t\t\"expired_token\",\n\t\t\t\t\t\t\t\t\"access_denied\",\n\t\t\t\t\t\t\t\t\"invalid_request\",\n\t\t\t\t\t\t\t\t\"invalid_grant\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror_description: { type: \"string\" }\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { device_code, client_id } = ctx.body;\n\tif (opts.validateClient) {\n\t\tif (!await opts.validateClient(client_id)) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\t\terror: \"invalid_grant\",\n\t\t\terror_description: \"Invalid client ID\"\n\t\t});\n\t}\n\tconst deviceCodeRecord = await ctx.context.adapter.findOne({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"deviceCode\",\n\t\t\tvalue: device_code\n\t\t}]\n\t});\n\tif (!deviceCodeRecord) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_grant\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.INVALID_DEVICE_CODE\n\t});\n\tif (deviceCodeRecord.clientId && deviceCodeRecord.clientId !== client_id) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_grant\",\n\t\terror_description: \"Client ID mismatch\"\n\t});\n\tif (deviceCodeRecord.lastPolledAt && deviceCodeRecord.pollingInterval) {\n\t\tif (Date.now() - new Date(deviceCodeRecord.lastPolledAt).getTime() < deviceCodeRecord.pollingInterval) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\t\terror: \"slow_down\",\n\t\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.POLLING_TOO_FREQUENTLY\n\t\t});\n\t}\n\tawait ctx.context.adapter.update({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"id\",\n\t\t\tvalue: deviceCodeRecord.id\n\t\t}],\n\t\tupdate: { lastPolledAt: /* @__PURE__ */ new Date() }\n\t});\n\tif (deviceCodeRecord.expiresAt < /* @__PURE__ */ new Date()) {\n\t\tawait ctx.context.adapter.delete({\n\t\t\tmodel: \"deviceCode\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: deviceCodeRecord.id\n\t\t\t}]\n\t\t});\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\t\terror: \"expired_token\",\n\t\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.EXPIRED_DEVICE_CODE\n\t\t});\n\t}\n\tif (deviceCodeRecord.status === \"pending\") throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"authorization_pending\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.AUTHORIZATION_PENDING\n\t});\n\tif (deviceCodeRecord.status === \"denied\") {\n\t\tawait ctx.context.adapter.delete({\n\t\t\tmodel: \"deviceCode\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: deviceCodeRecord.id\n\t\t\t}]\n\t\t});\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\t\terror: \"access_denied\",\n\t\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.ACCESS_DENIED\n\t\t});\n\t}\n\tif (deviceCodeRecord.status === \"approved\" && deviceCodeRecord.userId) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(deviceCodeRecord.userId);\n\t\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\terror: \"server_error\",\n\t\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.USER_NOT_FOUND\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(user.id);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\terror: \"server_error\",\n\t\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.FAILED_TO_CREATE_SESSION\n\t\t});\n\t\tctx.context.setNewSession({\n\t\t\tsession,\n\t\t\tuser\n\t\t});\n\t\tif (ctx.context.options.secondaryStorage) await ctx.context.secondaryStorage?.set(session.token, JSON.stringify({\n\t\t\tuser,\n\t\t\tsession\n\t\t}), Math.floor((new Date(session.expiresAt).getTime() - Date.now()) / 1e3));\n\t\tawait ctx.context.adapter.delete({\n\t\t\tmodel: \"deviceCode\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: deviceCodeRecord.id\n\t\t\t}]\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccess_token: session.token,\n\t\t\ttoken_type: \"Bearer\",\n\t\t\texpires_in: Math.floor((new Date(session.expiresAt).getTime() - Date.now()) / 1e3),\n\t\t\tscope: deviceCodeRecord.scope || \"\"\n\t\t}, { headers: {\n\t\t\t\"Cache-Control\": \"no-store\",\n\t\t\tPragma: \"no-cache\"\n\t\t} });\n\t}\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\terror: \"server_error\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.INVALID_DEVICE_CODE_STATUS\n\t});\n});\nconst deviceVerify = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/device\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_7__.object({ user_code: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The user code to verify\" }) }),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\terror: zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\"invalid_request\"]).meta({ description: \"Error code\" }),\n\t\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Detailed error description\" })\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify user code and get device authorization status\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Device authorization status\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser_code: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user code to verify\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\n\t\t\t\t\t\t\t\"pending\",\n\t\t\t\t\t\t\t\"approved\",\n\t\t\t\t\t\t\t\"denied\"\n\t\t\t\t\t\t],\n\t\t\t\t\t\tdescription: \"Current status of the device authorization\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { user_code } = ctx.query;\n\tconst cleanUserCode = user_code.replace(/-/g, \"\");\n\tconst deviceCodeRecord = await ctx.context.adapter.findOne({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"userCode\",\n\t\t\tvalue: cleanUserCode\n\t\t}]\n\t});\n\tif (!deviceCodeRecord) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_request\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.INVALID_USER_CODE\n\t});\n\tif (deviceCodeRecord.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"expired_token\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.EXPIRED_USER_CODE\n\t});\n\treturn ctx.json({\n\t\tuser_code,\n\t\tstatus: deviceCodeRecord.status\n\t});\n});\nconst deviceApprove = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/device/approve\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_7__.object({ userCode: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The user code to approve\" }) }),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\terror: zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\n\t\t\t\"invalid_request\",\n\t\t\t\"expired_token\",\n\t\t\t\"device_code_already_processed\",\n\t\t\t\"unauthorized\",\n\t\t\t\"access_denied\"\n\t\t]).meta({ description: \"Error code\" }),\n\t\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Detailed error description\" })\n\t}),\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Approve device authorization\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"UNAUTHORIZED\", {\n\t\terror: \"unauthorized\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.AUTHENTICATION_REQUIRED\n\t});\n\tconst { userCode } = ctx.body;\n\tconst cleanUserCode = userCode.replace(/-/g, \"\");\n\tconst deviceCodeRecord = await ctx.context.adapter.findOne({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"userCode\",\n\t\t\tvalue: cleanUserCode\n\t\t}]\n\t});\n\tif (!deviceCodeRecord) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_request\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.INVALID_USER_CODE\n\t});\n\tif (deviceCodeRecord.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"expired_token\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.EXPIRED_USER_CODE\n\t});\n\tif (deviceCodeRecord.status !== \"pending\") throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_request\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.DEVICE_CODE_ALREADY_PROCESSED\n\t});\n\tif (deviceCodeRecord.userId && deviceCodeRecord.userId !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"FORBIDDEN\", {\n\t\terror: \"access_denied\",\n\t\terror_description: \"You are not authorized to approve this device authorization\"\n\t});\n\tawait ctx.context.adapter.update({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"id\",\n\t\t\tvalue: deviceCodeRecord.id\n\t\t}],\n\t\tupdate: {\n\t\t\tstatus: \"approved\",\n\t\t\tuserId: session.user.id\n\t\t}\n\t});\n\treturn ctx.json({ success: true });\n});\nconst deviceDeny = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/device/deny\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_7__.object({ userCode: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The user code to deny\" }) }),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\terror: zod__WEBPACK_IMPORTED_MODULE_7__[\"enum\"]([\n\t\t\t\"invalid_request\",\n\t\t\t\"expired_token\",\n\t\t\t\"unauthorized\",\n\t\t\t\"access_denied\"\n\t\t]).meta({ description: \"Error code\" }),\n\t\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"Detailed error description\" })\n\t}),\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Deny device authorization\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"UNAUTHORIZED\", {\n\t\terror: \"unauthorized\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.AUTHENTICATION_REQUIRED\n\t});\n\tconst { userCode } = ctx.body;\n\tconst cleanUserCode = userCode.replace(/-/g, \"\");\n\tconst deviceCodeRecord = await ctx.context.adapter.findOne({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"userCode\",\n\t\t\tvalue: cleanUserCode\n\t\t}]\n\t});\n\tif (!deviceCodeRecord) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_request\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.INVALID_USER_CODE\n\t});\n\tif (deviceCodeRecord.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"expired_token\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.EXPIRED_USER_CODE\n\t});\n\tif (deviceCodeRecord.status !== \"pending\") throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"BAD_REQUEST\", {\n\t\terror: \"invalid_request\",\n\t\terror_description: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.DEVICE_AUTHORIZATION_ERROR_CODES.DEVICE_CODE_ALREADY_PROCESSED\n\t});\n\tif (deviceCodeRecord.userId && deviceCodeRecord.userId !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_5__.APIError(\"FORBIDDEN\", {\n\t\terror: \"access_denied\",\n\t\terror_description: \"You are not authorized to deny this device authorization\"\n\t});\n\tawait ctx.context.adapter.update({\n\t\tmodel: \"deviceCode\",\n\t\twhere: [{\n\t\t\tfield: \"id\",\n\t\t\tvalue: deviceCodeRecord.id\n\t\t}],\n\t\tupdate: {\n\t\t\tstatus: \"denied\",\n\t\t\tuserId: deviceCodeRecord.userId || session.user.id\n\t\t}\n\t});\n\treturn ctx.json({ success: true });\n});\n/**\n* @internal\n*/\nconst buildVerificationUris = (verificationUri, baseURL, userCode) => {\n\tconst uri = verificationUri || \"/device\";\n\tlet verificationUrl;\n\ttry {\n\t\tverificationUrl = new URL(uri);\n\t} catch {\n\t\tverificationUrl = new URL(uri, baseURL);\n\t}\n\tconst verificationUriCompleteUrl = new URL(verificationUrl);\n\tverificationUriCompleteUrl.searchParams.set(\"user_code\", userCode);\n\treturn {\n\t\tverificationUri: verificationUrl.toString(),\n\t\tverificationUriComplete: verificationUriCompleteUrl.toString()\n\t};\n};\n/**\n* @internal\n*/\nconst defaultGenerateDeviceCode = (length) => {\n\treturn (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(length, \"a-z\", \"A-Z\", \"0-9\");\n};\n/**\n* @internal\n*/\nconst defaultGenerateUserCode = (length) => {\n\tconst chars = new Uint8Array(length);\n\treturn Array.from(crypto.getRandomValues(chars)).map((byte) => defaultCharset[byte % 32]).join(\"\");\n};\n\n//#endregion\n\n//# sourceMappingURL=routes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL3JvdXRlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErRDtBQUMvQjtBQUNVO0FBQ3VCO0FBQ0k7QUFDOUI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQTtBQUNBLDZCQUE2Qix1Q0FBUTtBQUNyQyxZQUFZLHVDQUFRLFVBQVUsaURBQWlEO0FBQy9FLFFBQVEsdUNBQVEsVUFBVSwrQ0FBK0M7QUFDekUsQ0FBQztBQUNELDhCQUE4Qix1Q0FBUTtBQUN0QyxRQUFRLHdDQUFNLCtDQUErQywyQkFBMkI7QUFDeEYsb0JBQW9CLHVDQUFRLFVBQVUsMkNBQTJDO0FBQ2pGLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHlFQUFrQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLGlFQUFpRSxpREFBUTtBQUN6RTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1EQUFFO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbURBQUU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFVBQVUsMkNBQTJDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixtREFBRTtBQUMxQixHQUFHLElBQUksV0FBVywrQkFBK0I7QUFDakQsRUFBRTtBQUNGO0FBQ0EsOEJBQThCLHVDQUFRO0FBQ3RDLGFBQWEsd0NBQVMsd0RBQXdELCtDQUErQztBQUM3SCxjQUFjLHVDQUFRLFVBQVUsNkNBQTZDO0FBQzdFLFlBQVksdUNBQVEsVUFBVSxpREFBaUQ7QUFDL0UsQ0FBQztBQUNELCtCQUErQix1Q0FBUTtBQUN2QyxRQUFRLHdDQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQkFBMkI7QUFDdEMsb0JBQW9CLHVDQUFRLFVBQVUsMkNBQTJDO0FBQ2pGLENBQUM7QUFDRCw4QkFBOEIseUVBQWtCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQSxpQkFBaUIsc0NBQXNDO0FBQ3ZELGNBQWM7QUFDZDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyx5QkFBeUI7QUFDbEM7QUFDQSx1REFBdUQsaURBQVE7QUFDL0Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGLGtDQUFrQyxpREFBUTtBQUMxQztBQUNBLHFCQUFxQiw4RUFBZ0M7QUFDckQsRUFBRTtBQUNGLHFGQUFxRixpREFBUTtBQUM3RjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsbUhBQW1ILGlEQUFRO0FBQzNIO0FBQ0Esc0JBQXNCLDhFQUFnQztBQUN0RCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVk7QUFDWixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0Esc0JBQXNCLDhFQUFnQztBQUN0RCxHQUFHO0FBQ0g7QUFDQSxzREFBc0QsaURBQVE7QUFDOUQ7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNILFlBQVksaURBQVE7QUFDcEI7QUFDQSxzQkFBc0IsOEVBQWdDO0FBQ3RELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaURBQVE7QUFDL0I7QUFDQSxzQkFBc0IsOEVBQWdDO0FBQ3RELEdBQUc7QUFDSDtBQUNBLDBCQUEwQixpREFBUTtBQUNsQztBQUNBLHNCQUFzQiw4RUFBZ0M7QUFDdEQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxXQUFXLGlEQUFRO0FBQ25CO0FBQ0EscUJBQXFCLDhFQUFnQztBQUNyRCxFQUFFO0FBQ0YsQ0FBQztBQUNELHFCQUFxQix5RUFBa0I7QUFDdkM7QUFDQSxRQUFRLHVDQUFRLEdBQUcsV0FBVyx1Q0FBUSxVQUFVLHdDQUF3QyxHQUFHO0FBQzNGLFFBQVEsdUNBQVE7QUFDaEIsU0FBUyx3Q0FBTSw2QkFBNkIsMkJBQTJCO0FBQ3ZFLHFCQUFxQix1Q0FBUSxVQUFVLDJDQUEyQztBQUNsRixFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLFlBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRixrQ0FBa0MsaURBQVE7QUFDMUM7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRix3RUFBd0UsaURBQVE7QUFDaEY7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQSxPQUFPLHVDQUFRLEdBQUcsVUFBVSx1Q0FBUSxVQUFVLHlDQUF5QyxHQUFHO0FBQzFGLFFBQVEsdUNBQVE7QUFDaEIsU0FBUyx3Q0FBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QyxxQkFBcUIsdUNBQVEsVUFBVSwyQ0FBMkM7QUFDbEYsRUFBRTtBQUNGO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsdUJBQXVCLDBFQUFpQjtBQUN4Qyx5QkFBeUIsaURBQVE7QUFDakM7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRixTQUFTLFdBQVc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRixrQ0FBa0MsaURBQVE7QUFDMUM7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRix3RUFBd0UsaURBQVE7QUFDaEY7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRixzREFBc0QsaURBQVE7QUFDOUQ7QUFDQSxxQkFBcUIsOEVBQWdDO0FBQ3JELEVBQUU7QUFDRix1RkFBdUYsaURBQVE7QUFDL0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCxtQkFBbUIseUVBQWtCO0FBQ3JDO0FBQ0EsT0FBTyx1Q0FBUSxHQUFHLFVBQVUsdUNBQVEsVUFBVSxzQ0FBc0MsR0FBRztBQUN2RixRQUFRLHVDQUFRO0FBQ2hCLFNBQVMsd0NBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkJBQTJCO0FBQ3ZDLHFCQUFxQix1Q0FBUSxVQUFVLDJDQUEyQztBQUNsRixFQUFFO0FBQ0Y7QUFDQSxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx1QkFBdUIsMEVBQWlCO0FBQ3hDLHlCQUF5QixpREFBUTtBQUNqQztBQUNBLHFCQUFxQiw4RUFBZ0M7QUFDckQsRUFBRTtBQUNGLFNBQVMsV0FBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGLGtDQUFrQyxpREFBUTtBQUMxQztBQUNBLHFCQUFxQiw4RUFBZ0M7QUFDckQsRUFBRTtBQUNGLHdFQUF3RSxpREFBUTtBQUNoRjtBQUNBLHFCQUFxQiw4RUFBZ0M7QUFDckQsRUFBRTtBQUNGLHNEQUFzRCxpREFBUTtBQUM5RDtBQUNBLHFCQUFxQiw4RUFBZ0M7QUFDckQsRUFBRTtBQUNGLHVGQUF1RixpREFBUTtBQUMvRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGVBQWU7QUFDbEMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHdFQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRFO0FBQzVFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZGV2aWNlLWF1dGhvcml6YXRpb25cXHJvdXRlcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1zIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3RpbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZGV2aWNlLWF1dGhvcml6YXRpb24vcm91dGVzLnRzXG5jb25zdCBkZWZhdWx0Q2hhcnNldCA9IFwiQUJDREVGR0hKS0xNTlBRUlNUVVZXWFlaMjM0NTY3ODlcIjtcbmNvbnN0IGRldmljZUNvZGVCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRjbGllbnRfaWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjbGllbnQgSUQgb2YgdGhlIGFwcGxpY2F0aW9uXCIgfSksXG5cdHNjb3BlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJTcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBzY29wZXNcIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IGRldmljZUNvZGVFcnJvclNjaGVtYSA9IHoub2JqZWN0KHtcblx0ZXJyb3I6IHouZW51bShbXCJpbnZhbGlkX3JlcXVlc3RcIiwgXCJpbnZhbGlkX2NsaWVudFwiXSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVycm9yIGNvZGVcIiB9KSxcblx0ZXJyb3JfZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRldGFpbGVkIGVycm9yIGRlc2NyaXB0aW9uXCIgfSlcbn0pO1xuY29uc3QgZGV2aWNlQ29kZSA9IChvcHRzKSA9PiB7XG5cdGNvbnN0IGdlbmVyYXRlRGV2aWNlQ29kZSA9IGFzeW5jICgpID0+IHtcblx0XHRpZiAob3B0cy5nZW5lcmF0ZURldmljZUNvZGUpIHJldHVybiBvcHRzLmdlbmVyYXRlRGV2aWNlQ29kZSgpO1xuXHRcdHJldHVybiBkZWZhdWx0R2VuZXJhdGVEZXZpY2VDb2RlKG9wdHMuZGV2aWNlQ29kZUxlbmd0aCk7XG5cdH07XG5cdGNvbnN0IGdlbmVyYXRlVXNlckNvZGUgPSBhc3luYyAoKSA9PiB7XG5cdFx0aWYgKG9wdHMuZ2VuZXJhdGVVc2VyQ29kZSkgcmV0dXJuIG9wdHMuZ2VuZXJhdGVVc2VyQ29kZSgpO1xuXHRcdHJldHVybiBkZWZhdWx0R2VuZXJhdGVVc2VyQ29kZShvcHRzLnVzZXJDb2RlTGVuZ3RoKTtcblx0fTtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZXZpY2UvY29kZVwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiBkZXZpY2VDb2RlQm9keVNjaGVtYSxcblx0XHRlcnJvcjogZGV2aWNlQ29kZUVycm9yU2NoZW1hLFxuXHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBgUmVxdWVzdCBhIGRldmljZSBhbmQgdXNlciBjb2RlXG5cbkZvbGxvdyBbcmZjODYyOCNzZWN0aW9uLTMuMl0oaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM4NjI4I3NlY3Rpb24tMy4yKWAsXG5cdFx0XHRyZXNwb25zZXM6IHtcblx0XHRcdFx0MjAwOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRkZXZpY2VfY29kZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGRldmljZSB2ZXJpZmljYXRpb24gY29kZVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVzZXJfY29kZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgY29kZSB0byBkaXNwbGF5XCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dmVyaWZpY2F0aW9uX3VyaToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgZm9yIHVzZXIgdmVyaWZpY2F0aW9uLiBEZWZhdWx0cyB0byAvZGV2aWNlIGlmIG5vdCBjb25maWd1cmVkLlwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHZlcmlmaWNhdGlvbl91cmlfY29tcGxldGU6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJ1cmlcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgY29tcGxldGUgVVJMIHdpdGggdXNlciBjb2RlIGFzIHF1ZXJ5IHBhcmFtZXRlci5cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzX2luOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJMaWZldGltZSBpbiBzZWNvbmRzIG9mIHRoZSBkZXZpY2UgY29kZVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGludGVydmFsOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJNaW5pbXVtIHBvbGxpbmcgaW50ZXJ2YWwgaW4gc2Vjb25kc1wiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQ0MDA6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFcnJvciByZXNwb25zZVwiLFxuXHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZW51bTogW1wiaW52YWxpZF9yZXF1ZXN0XCIsIFwiaW52YWxpZF9jbGllbnRcIl1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gfVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0aWYgKG9wdHMudmFsaWRhdGVDbGllbnQpIHtcblx0XHRcdGlmICghYXdhaXQgb3B0cy52YWxpZGF0ZUNsaWVudChjdHguYm9keS5jbGllbnRfaWQpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCIsXG5cdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIkludmFsaWQgY2xpZW50IElEXCJcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAob3B0cy5vbkRldmljZUF1dGhSZXF1ZXN0KSBhd2FpdCBvcHRzLm9uRGV2aWNlQXV0aFJlcXVlc3QoY3R4LmJvZHkuY2xpZW50X2lkLCBjdHguYm9keS5zY29wZSk7XG5cdFx0Y29uc3QgZGV2aWNlQ29kZSQxID0gYXdhaXQgZ2VuZXJhdGVEZXZpY2VDb2RlKCk7XG5cdFx0Y29uc3QgdXNlckNvZGUgPSBhd2FpdCBnZW5lcmF0ZVVzZXJDb2RlKCk7XG5cdFx0Y29uc3QgZXhwaXJlc0luID0gbXMob3B0cy5leHBpcmVzSW4pO1xuXHRcdGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBleHBpcmVzSW4pO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuY3JlYXRlKHtcblx0XHRcdG1vZGVsOiBcImRldmljZUNvZGVcIixcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0ZGV2aWNlQ29kZTogZGV2aWNlQ29kZSQxLFxuXHRcdFx0XHR1c2VyQ29kZSxcblx0XHRcdFx0ZXhwaXJlc0F0LFxuXHRcdFx0XHRzdGF0dXM6IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRwb2xsaW5nSW50ZXJ2YWw6IG1zKG9wdHMuaW50ZXJ2YWwpLFxuXHRcdFx0XHRjbGllbnRJZDogY3R4LmJvZHkuY2xpZW50X2lkLFxuXHRcdFx0XHRzY29wZTogY3R4LmJvZHkuc2NvcGVcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCB7IHZlcmlmaWNhdGlvblVyaSwgdmVyaWZpY2F0aW9uVXJpQ29tcGxldGUgfSA9IGJ1aWxkVmVyaWZpY2F0aW9uVXJpcyhvcHRzLnZlcmlmaWNhdGlvblVyaSwgY3R4LmNvbnRleHQuYmFzZVVSTCwgdXNlckNvZGUpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRkZXZpY2VfY29kZTogZGV2aWNlQ29kZSQxLFxuXHRcdFx0dXNlcl9jb2RlOiB1c2VyQ29kZSxcblx0XHRcdHZlcmlmaWNhdGlvbl91cmk6IHZlcmlmaWNhdGlvblVyaSxcblx0XHRcdHZlcmlmaWNhdGlvbl91cmlfY29tcGxldGU6IHZlcmlmaWNhdGlvblVyaUNvbXBsZXRlLFxuXHRcdFx0ZXhwaXJlc19pbjogTWF0aC5mbG9vcihleHBpcmVzSW4gLyAxZTMpLFxuXHRcdFx0aW50ZXJ2YWw6IE1hdGguZmxvb3IobXMob3B0cy5pbnRlcnZhbCkgLyAxZTMpXG5cdFx0fSwgeyBoZWFkZXJzOiB7IFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIgfSB9KTtcblx0fSk7XG59O1xuY29uc3QgZGV2aWNlVG9rZW5Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRncmFudF90eXBlOiB6LmxpdGVyYWwoXCJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Z3JhbnQtdHlwZTpkZXZpY2VfY29kZVwiKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGdyYW50IHR5cGUgZm9yIGRldmljZSBmbG93XCIgfSksXG5cdGRldmljZV9jb2RlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZGV2aWNlIHZlcmlmaWNhdGlvbiBjb2RlXCIgfSksXG5cdGNsaWVudF9pZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGNsaWVudCBJRCBvZiB0aGUgYXBwbGljYXRpb25cIiB9KVxufSk7XG5jb25zdCBkZXZpY2VUb2tlbkVycm9yU2NoZW1hID0gei5vYmplY3Qoe1xuXHRlcnJvcjogei5lbnVtKFtcblx0XHRcImF1dGhvcml6YXRpb25fcGVuZGluZ1wiLFxuXHRcdFwic2xvd19kb3duXCIsXG5cdFx0XCJleHBpcmVkX3Rva2VuXCIsXG5cdFx0XCJhY2Nlc3NfZGVuaWVkXCIsXG5cdFx0XCJpbnZhbGlkX3JlcXVlc3RcIixcblx0XHRcImludmFsaWRfZ3JhbnRcIlxuXHRdKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXJyb3IgY29kZVwiIH0pLFxuXHRlcnJvcl9kZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGV0YWlsZWQgZXJyb3IgZGVzY3JpcHRpb25cIiB9KVxufSk7XG5jb25zdCBkZXZpY2VUb2tlbiA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZGV2aWNlL3Rva2VuXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogZGV2aWNlVG9rZW5Cb2R5U2NoZW1hLFxuXHRlcnJvcjogZGV2aWNlVG9rZW5FcnJvclNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBgRXhjaGFuZ2UgZGV2aWNlIGNvZGUgZm9yIGFjY2VzcyB0b2tlblxuXG5Gb2xsb3cgW3JmYzg2Mjgjc2VjdGlvbi0zLjRdKGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjODYyOCNzZWN0aW9uLTMuNClgLFxuXHRcdHJlc3BvbnNlczoge1xuXHRcdFx0MjAwOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSxcblx0XHRcdFx0XHRcdHVzZXI6IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCIgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHQ0MDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRXJyb3IgcmVzcG9uc2VcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGVudW06IFtcblx0XHRcdFx0XHRcdFx0XHRcImF1dGhvcml6YXRpb25fcGVuZGluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFwic2xvd19kb3duXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJleHBpcmVkX3Rva2VuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJhY2Nlc3NfZGVuaWVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJpbnZhbGlkX3JlcXVlc3RcIixcblx0XHRcdFx0XHRcdFx0XHRcImludmFsaWRfZ3JhbnRcIlxuXHRcdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgZGV2aWNlX2NvZGUsIGNsaWVudF9pZCB9ID0gY3R4LmJvZHk7XG5cdGlmIChvcHRzLnZhbGlkYXRlQ2xpZW50KSB7XG5cdFx0aWYgKCFhd2FpdCBvcHRzLnZhbGlkYXRlQ2xpZW50KGNsaWVudF9pZCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdGVycm9yOiBcImludmFsaWRfZ3JhbnRcIixcblx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIkludmFsaWQgY2xpZW50IElEXCJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBkZXZpY2VDb2RlUmVjb3JkID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJkZXZpY2VDb2RlXCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJkZXZpY2VDb2RlXCIsXG5cdFx0XHR2YWx1ZTogZGV2aWNlX2NvZGVcblx0XHR9XVxuXHR9KTtcblx0aWYgKCFkZXZpY2VDb2RlUmVjb3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0ZXJyb3I6IFwiaW52YWxpZF9ncmFudFwiLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZBTElEX0RFVklDRV9DT0RFXG5cdH0pO1xuXHRpZiAoZGV2aWNlQ29kZVJlY29yZC5jbGllbnRJZCAmJiBkZXZpY2VDb2RlUmVjb3JkLmNsaWVudElkICE9PSBjbGllbnRfaWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRlcnJvcjogXCJpbnZhbGlkX2dyYW50XCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiQ2xpZW50IElEIG1pc21hdGNoXCJcblx0fSk7XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLmxhc3RQb2xsZWRBdCAmJiBkZXZpY2VDb2RlUmVjb3JkLnBvbGxpbmdJbnRlcnZhbCkge1xuXHRcdGlmIChEYXRlLm5vdygpIC0gbmV3IERhdGUoZGV2aWNlQ29kZVJlY29yZC5sYXN0UG9sbGVkQXQpLmdldFRpbWUoKSA8IGRldmljZUNvZGVSZWNvcmQucG9sbGluZ0ludGVydmFsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRlcnJvcjogXCJzbG93X2Rvd25cIixcblx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5QT0xMSU5HX1RPT19GUkVRVUVOVExZXG5cdFx0fSk7XG5cdH1cblx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdG1vZGVsOiBcImRldmljZUNvZGVcIixcblx0XHR3aGVyZTogW3tcblx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHR2YWx1ZTogZGV2aWNlQ29kZVJlY29yZC5pZFxuXHRcdH1dLFxuXHRcdHVwZGF0ZTogeyBsYXN0UG9sbGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpIH1cblx0fSk7XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0bW9kZWw6IFwiZGV2aWNlQ29kZVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBkZXZpY2VDb2RlUmVjb3JkLmlkXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdGVycm9yOiBcImV4cGlyZWRfdG9rZW5cIixcblx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5FWFBJUkVEX0RFVklDRV9DT0RFXG5cdFx0fSk7XG5cdH1cblx0aWYgKGRldmljZUNvZGVSZWNvcmQuc3RhdHVzID09PSBcInBlbmRpbmdcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdGVycm9yOiBcImF1dGhvcml6YXRpb25fcGVuZGluZ1wiLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5BVVRIT1JJWkFUSU9OX1BFTkRJTkdcblx0fSk7XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLnN0YXR1cyA9PT0gXCJkZW5pZWRcIikge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZGVsZXRlKHtcblx0XHRcdG1vZGVsOiBcImRldmljZUNvZGVcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogZGV2aWNlQ29kZVJlY29yZC5pZFxuXHRcdFx0fV1cblx0XHR9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRlcnJvcjogXCJhY2Nlc3NfZGVuaWVkXCIsXG5cdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMuQUNDRVNTX0RFTklFRFxuXHRcdH0pO1xuXHR9XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiICYmIGRldmljZUNvZGVSZWNvcmQudXNlcklkKSB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQoZGV2aWNlQ29kZVJlY29yZC51c2VySWQpO1xuXHRcdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRcdGVycm9yOiBcInNlcnZlcl9lcnJvclwiLFxuXHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfTk9UX0ZPVU5EXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIuaWQpO1xuXHRcdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRcdGVycm9yOiBcInNlcnZlcl9lcnJvclwiLFxuXHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTlxuXHRcdH0pO1xuXHRcdGN0eC5jb250ZXh0LnNldE5ld1Nlc3Npb24oe1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXJcblx0XHR9KTtcblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlKSBhd2FpdCBjdHguY29udGV4dC5zZWNvbmRhcnlTdG9yYWdlPy5zZXQoc2Vzc2lvbi50b2tlbiwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0dXNlcixcblx0XHRcdHNlc3Npb25cblx0XHR9KSwgTWF0aC5mbG9vcigobmV3IERhdGUoc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkpIC8gMWUzKSk7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0bW9kZWw6IFwiZGV2aWNlQ29kZVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBkZXZpY2VDb2RlUmVjb3JkLmlkXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRhY2Nlc3NfdG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHR0b2tlbl90eXBlOiBcIkJlYXJlclwiLFxuXHRcdFx0ZXhwaXJlc19pbjogTWF0aC5mbG9vcigobmV3IERhdGUoc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkpIC8gMWUzKSxcblx0XHRcdHNjb3BlOiBkZXZpY2VDb2RlUmVjb3JkLnNjb3BlIHx8IFwiXCJcblx0XHR9LCB7IGhlYWRlcnM6IHtcblx0XHRcdFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIsXG5cdFx0XHRQcmFnbWE6IFwibm8tY2FjaGVcIlxuXHRcdH0gfSk7XG5cdH1cblx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHtcblx0XHRlcnJvcjogXCJzZXJ2ZXJfZXJyb3JcIixcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMuSU5WQUxJRF9ERVZJQ0VfQ09ERV9TVEFUVVNcblx0fSk7XG59KTtcbmNvbnN0IGRldmljZVZlcmlmeSA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZXZpY2VcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7IHVzZXJfY29kZTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgY29kZSB0byB2ZXJpZnlcIiB9KSB9KSxcblx0ZXJyb3I6IHoub2JqZWN0KHtcblx0XHRlcnJvcjogei5lbnVtKFtcImludmFsaWRfcmVxdWVzdFwiXSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVycm9yIGNvZGVcIiB9KSxcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGV0YWlsZWQgZXJyb3IgZGVzY3JpcHRpb25cIiB9KVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlZlcmlmeSB1c2VyIGNvZGUgYW5kIGdldCBkZXZpY2UgYXV0aG9yaXphdGlvbiBzdGF0dXNcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJEZXZpY2UgYXV0aG9yaXphdGlvbiBzdGF0dXNcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR1c2VyX2NvZGU6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBjb2RlIHRvIHZlcmlmeVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbXG5cdFx0XHRcdFx0XHRcdFwicGVuZGluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcImFwcHJvdmVkXCIsXG5cdFx0XHRcdFx0XHRcdFwiZGVuaWVkXCJcblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDdXJyZW50IHN0YXR1cyBvZiB0aGUgZGV2aWNlIGF1dGhvcml6YXRpb25cIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgdXNlcl9jb2RlIH0gPSBjdHgucXVlcnk7XG5cdGNvbnN0IGNsZWFuVXNlckNvZGUgPSB1c2VyX2NvZGUucmVwbGFjZSgvLS9nLCBcIlwiKTtcblx0Y29uc3QgZGV2aWNlQ29kZVJlY29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwiZGV2aWNlQ29kZVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwidXNlckNvZGVcIixcblx0XHRcdHZhbHVlOiBjbGVhblVzZXJDb2RlXG5cdFx0fV1cblx0fSk7XG5cdGlmICghZGV2aWNlQ29kZVJlY29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZBTElEX1VTRVJfQ09ERVxuXHR9KTtcblx0aWYgKGRldmljZUNvZGVSZWNvcmQuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRlcnJvcjogXCJleHBpcmVkX3Rva2VuXCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLkVYUElSRURfVVNFUl9DT0RFXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHVzZXJfY29kZSxcblx0XHRzdGF0dXM6IGRldmljZUNvZGVSZWNvcmQuc3RhdHVzXG5cdH0pO1xufSk7XG5jb25zdCBkZXZpY2VBcHByb3ZlID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2RldmljZS9hcHByb3ZlXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3QoeyB1c2VyQ29kZTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgY29kZSB0byBhcHByb3ZlXCIgfSkgfSksXG5cdGVycm9yOiB6Lm9iamVjdCh7XG5cdFx0ZXJyb3I6IHouZW51bShbXG5cdFx0XHRcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdFx0XCJleHBpcmVkX3Rva2VuXCIsXG5cdFx0XHRcImRldmljZV9jb2RlX2FscmVhZHlfcHJvY2Vzc2VkXCIsXG5cdFx0XHRcInVuYXV0aG9yaXplZFwiLFxuXHRcdFx0XCJhY2Nlc3NfZGVuaWVkXCJcblx0XHRdKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXJyb3IgY29kZVwiIH0pLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEZXRhaWxlZCBlcnJvciBkZXNjcmlwdGlvblwiIH0pXG5cdH0pLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkFwcHJvdmUgZGV2aWNlIGF1dGhvcml6YXRpb25cIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN1Y2Nlc3M6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRlcnJvcjogXCJ1bmF1dGhvcml6ZWRcIixcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMuQVVUSEVOVElDQVRJT05fUkVRVUlSRURcblx0fSk7XG5cdGNvbnN0IHsgdXNlckNvZGUgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBjbGVhblVzZXJDb2RlID0gdXNlckNvZGUucmVwbGFjZSgvLS9nLCBcIlwiKTtcblx0Y29uc3QgZGV2aWNlQ29kZVJlY29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwiZGV2aWNlQ29kZVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwidXNlckNvZGVcIixcblx0XHRcdHZhbHVlOiBjbGVhblVzZXJDb2RlXG5cdFx0fV1cblx0fSk7XG5cdGlmICghZGV2aWNlQ29kZVJlY29yZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZBTElEX1VTRVJfQ09ERVxuXHR9KTtcblx0aWYgKGRldmljZUNvZGVSZWNvcmQuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRlcnJvcjogXCJleHBpcmVkX3Rva2VuXCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLkVYUElSRURfVVNFUl9DT0RFXG5cdH0pO1xuXHRpZiAoZGV2aWNlQ29kZVJlY29yZC5zdGF0dXMgIT09IFwicGVuZGluZ1wiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLkRFVklDRV9DT0RFX0FMUkVBRFlfUFJPQ0VTU0VEXG5cdH0pO1xuXHRpZiAoZGV2aWNlQ29kZVJlY29yZC51c2VySWQgJiYgZGV2aWNlQ29kZVJlY29yZC51c2VySWQgIT09IHNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHtcblx0XHRlcnJvcjogXCJhY2Nlc3NfZGVuaWVkXCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBhcHByb3ZlIHRoaXMgZGV2aWNlIGF1dGhvcml6YXRpb25cIlxuXHR9KTtcblx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdG1vZGVsOiBcImRldmljZUNvZGVcIixcblx0XHR3aGVyZTogW3tcblx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHR2YWx1ZTogZGV2aWNlQ29kZVJlY29yZC5pZFxuXHRcdH1dLFxuXHRcdHVwZGF0ZToge1xuXHRcdFx0c3RhdHVzOiBcImFwcHJvdmVkXCIsXG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZFxuXHRcdH1cblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbmNvbnN0IGRldmljZURlbnkgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZGV2aWNlL2RlbnlcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7IHVzZXJDb2RlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBjb2RlIHRvIGRlbnlcIiB9KSB9KSxcblx0ZXJyb3I6IHoub2JqZWN0KHtcblx0XHRlcnJvcjogei5lbnVtKFtcblx0XHRcdFwiaW52YWxpZF9yZXF1ZXN0XCIsXG5cdFx0XHRcImV4cGlyZWRfdG9rZW5cIixcblx0XHRcdFwidW5hdXRob3JpemVkXCIsXG5cdFx0XHRcImFjY2Vzc19kZW5pZWRcIlxuXHRcdF0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFcnJvciBjb2RlXCIgfSksXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRldGFpbGVkIGVycm9yIGRlc2NyaXB0aW9uXCIgfSlcblx0fSksXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiRGVueSBkZXZpY2UgYXV0aG9yaXphdGlvblwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdGVycm9yOiBcInVuYXV0aG9yaXplZFwiLFxuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBERVZJQ0VfQVVUSE9SSVpBVElPTl9FUlJPUl9DT0RFUy5BVVRIRU5USUNBVElPTl9SRVFVSVJFRFxuXHR9KTtcblx0Y29uc3QgeyB1c2VyQ29kZSB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IGNsZWFuVXNlckNvZGUgPSB1c2VyQ29kZS5yZXBsYWNlKC8tL2csIFwiXCIpO1xuXHRjb25zdCBkZXZpY2VDb2RlUmVjb3JkID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJkZXZpY2VDb2RlXCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJ1c2VyQ29kZVwiLFxuXHRcdFx0dmFsdWU6IGNsZWFuVXNlckNvZGVcblx0XHR9XVxuXHR9KTtcblx0aWYgKCFkZXZpY2VDb2RlUmVjb3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IERFVklDRV9BVVRIT1JJWkFUSU9OX0VSUk9SX0NPREVTLklOVkFMSURfVVNFUl9DT0RFXG5cdH0pO1xuXHRpZiAoZGV2aWNlQ29kZVJlY29yZC5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdGVycm9yOiBcImV4cGlyZWRfdG9rZW5cIixcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMuRVhQSVJFRF9VU0VSX0NPREVcblx0fSk7XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLnN0YXR1cyAhPT0gXCJwZW5kaW5nXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIixcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogREVWSUNFX0FVVEhPUklaQVRJT05fRVJST1JfQ09ERVMuREVWSUNFX0NPREVfQUxSRUFEWV9QUk9DRVNTRURcblx0fSk7XG5cdGlmIChkZXZpY2VDb2RlUmVjb3JkLnVzZXJJZCAmJiBkZXZpY2VDb2RlUmVjb3JkLnVzZXJJZCAhPT0gc2Vzc2lvbi51c2VyLmlkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwge1xuXHRcdGVycm9yOiBcImFjY2Vzc19kZW5pZWRcIixcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJZb3UgYXJlIG5vdCBhdXRob3JpemVkIHRvIGRlbnkgdGhpcyBkZXZpY2UgYXV0aG9yaXphdGlvblwiXG5cdH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLnVwZGF0ZSh7XG5cdFx0bW9kZWw6IFwiZGV2aWNlQ29kZVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdHZhbHVlOiBkZXZpY2VDb2RlUmVjb3JkLmlkXG5cdFx0fV0sXG5cdFx0dXBkYXRlOiB7XG5cdFx0XHRzdGF0dXM6IFwiZGVuaWVkXCIsXG5cdFx0XHR1c2VySWQ6IGRldmljZUNvZGVSZWNvcmQudXNlcklkIHx8IHNlc3Npb24udXNlci5pZFxuXHRcdH1cblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbi8qKlxuKiBAaW50ZXJuYWxcbiovXG5jb25zdCBidWlsZFZlcmlmaWNhdGlvblVyaXMgPSAodmVyaWZpY2F0aW9uVXJpLCBiYXNlVVJMLCB1c2VyQ29kZSkgPT4ge1xuXHRjb25zdCB1cmkgPSB2ZXJpZmljYXRpb25VcmkgfHwgXCIvZGV2aWNlXCI7XG5cdGxldCB2ZXJpZmljYXRpb25Vcmw7XG5cdHRyeSB7XG5cdFx0dmVyaWZpY2F0aW9uVXJsID0gbmV3IFVSTCh1cmkpO1xuXHR9IGNhdGNoIHtcblx0XHR2ZXJpZmljYXRpb25VcmwgPSBuZXcgVVJMKHVyaSwgYmFzZVVSTCk7XG5cdH1cblx0Y29uc3QgdmVyaWZpY2F0aW9uVXJpQ29tcGxldGVVcmwgPSBuZXcgVVJMKHZlcmlmaWNhdGlvblVybCk7XG5cdHZlcmlmaWNhdGlvblVyaUNvbXBsZXRlVXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ1c2VyX2NvZGVcIiwgdXNlckNvZGUpO1xuXHRyZXR1cm4ge1xuXHRcdHZlcmlmaWNhdGlvblVyaTogdmVyaWZpY2F0aW9uVXJsLnRvU3RyaW5nKCksXG5cdFx0dmVyaWZpY2F0aW9uVXJpQ29tcGxldGU6IHZlcmlmaWNhdGlvblVyaUNvbXBsZXRlVXJsLnRvU3RyaW5nKClcblx0fTtcbn07XG4vKipcbiogQGludGVybmFsXG4qL1xuY29uc3QgZGVmYXVsdEdlbmVyYXRlRGV2aWNlQ29kZSA9IChsZW5ndGgpID0+IHtcblx0cmV0dXJuIGdlbmVyYXRlUmFuZG9tU3RyaW5nKGxlbmd0aCwgXCJhLXpcIiwgXCJBLVpcIiwgXCIwLTlcIik7XG59O1xuLyoqXG4qIEBpbnRlcm5hbFxuKi9cbmNvbnN0IGRlZmF1bHRHZW5lcmF0ZVVzZXJDb2RlID0gKGxlbmd0aCkgPT4ge1xuXHRjb25zdCBjaGFycyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG5cdHJldHVybiBBcnJheS5mcm9tKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoY2hhcnMpKS5tYXAoKGJ5dGUpID0+IGRlZmF1bHRDaGFyc2V0W2J5dGUgJSAzMl0pLmpvaW4oXCJcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRldmljZUFwcHJvdmUsIGRldmljZUNvZGUsIGRldmljZURlbnksIGRldmljZVRva2VuLCBkZXZpY2VWZXJpZnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/routes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/schema.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/schema.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n//#region src/plugins/device-authorization/schema.ts\nconst schema = { deviceCode: { fields: {\n\tdeviceCode: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tuserCode: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tuserId: {\n\t\ttype: \"string\",\n\t\trequired: false\n\t},\n\texpiresAt: {\n\t\ttype: \"date\",\n\t\trequired: true\n\t},\n\tstatus: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tlastPolledAt: {\n\t\ttype: \"date\",\n\t\trequired: false\n\t},\n\tpollingInterval: {\n\t\ttype: \"number\",\n\t\trequired: false\n\t},\n\tclientId: {\n\t\ttype: \"string\",\n\t\trequired: false\n\t},\n\tscope: {\n\t\ttype: \"string\",\n\t\trequired: false\n\t}\n} } };\nzod__WEBPACK_IMPORTED_MODULE_0__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tdeviceCode: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tuserCode: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_0__.date(),\n\tstatus: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tlastPolledAt: zod__WEBPACK_IMPORTED_MODULE_0__.date().optional(),\n\tpollingInterval: zod__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n\tclientId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\tscope: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL3NjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUI7O0FBRXpCO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQVE7QUFDUixLQUFLLHVDQUFRO0FBQ2IsYUFBYSx1Q0FBUTtBQUNyQixXQUFXLHVDQUFRO0FBQ25CLFNBQVMsdUNBQVE7QUFDakIsWUFBWSxxQ0FBTTtBQUNsQixTQUFTLHVDQUFRO0FBQ2pCLGVBQWUscUNBQU07QUFDckIsa0JBQWtCLHVDQUFRO0FBQzFCLFdBQVcsdUNBQVE7QUFDbkIsUUFBUSx1Q0FBUTtBQUNoQixDQUFDOztBQUVEO0FBQ2tCO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZGV2aWNlLWF1dGhvcml6YXRpb25cXHNjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9kZXZpY2UtYXV0aG9yaXphdGlvbi9zY2hlbWEudHNcbmNvbnN0IHNjaGVtYSA9IHsgZGV2aWNlQ29kZTogeyBmaWVsZHM6IHtcblx0ZGV2aWNlQ29kZToge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IHRydWVcblx0fSxcblx0dXNlckNvZGU6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiB0cnVlXG5cdH0sXG5cdHVzZXJJZDoge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdH0sXG5cdGV4cGlyZXNBdDoge1xuXHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdHJlcXVpcmVkOiB0cnVlXG5cdH0sXG5cdHN0YXR1czoge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IHRydWVcblx0fSxcblx0bGFzdFBvbGxlZEF0OiB7XG5cdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdH0sXG5cdHBvbGxpbmdJbnRlcnZhbDoge1xuXHRcdHR5cGU6IFwibnVtYmVyXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdH0sXG5cdGNsaWVudElkOiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZXF1aXJlZDogZmFsc2Vcblx0fSxcblx0c2NvcGU6IHtcblx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdHJlcXVpcmVkOiBmYWxzZVxuXHR9XG59IH0gfTtcbnoub2JqZWN0KHtcblx0aWQ6IHouc3RyaW5nKCksXG5cdGRldmljZUNvZGU6IHouc3RyaW5nKCksXG5cdHVzZXJDb2RlOiB6LnN0cmluZygpLFxuXHR1c2VySWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXhwaXJlc0F0OiB6LmRhdGUoKSxcblx0c3RhdHVzOiB6LnN0cmluZygpLFxuXHRsYXN0UG9sbGVkQXQ6IHouZGF0ZSgpLm9wdGlvbmFsKCksXG5cdHBvbGxpbmdJbnRlcnZhbDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuXHRjbGllbnRJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRzY29wZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/client.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailOTPClient: () => (/* binding */ emailOTPClient)\n/* harmony export */ });\n//#region src/plugins/email-otp/client.ts\nconst emailOTPClient = () => {\n\treturn {\n\t\tid: \"email-otp\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/email-otp/verify-email\" || path === \"/sign-in/email-otp\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGVtYWlsLW90cFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvZW1haWwtb3RwL2NsaWVudC50c1xuY29uc3QgZW1haWxPVFBDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZW1haWwtb3RwXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fSxcblx0XHRhdG9tTGlzdGVuZXJzOiBbe1xuXHRcdFx0bWF0Y2hlcjogKHBhdGgpID0+IHBhdGggPT09IFwiL2VtYWlsLW90cC92ZXJpZnktZW1haWxcIiB8fCBwYXRoID09PSBcIi9zaWduLWluL2VtYWlsLW90cFwiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlbWFpbE9UUENsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/email-otp/index.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/index.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailOTP: () => (/* binding */ emailOTP)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/plugin-helper.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/plugin-helper.mjs\");\n/* harmony import */ var _otp_token_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./otp-token.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/otp-token.mjs\");\n/* harmony import */ var _routes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/routes.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n//#region src/plugins/email-otp/index.ts\nconst defaultOTPGenerator = (options) => (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(options.otpLength ?? 6, \"0-9\");\nconst emailOTP = (options) => {\n\tconst opts = {\n\t\texpiresIn: 300,\n\t\tgenerateOTP: () => defaultOTPGenerator(options),\n\t\tstoreOTP: \"plain\",\n\t\t...options\n\t};\n\tconst sendVerificationOTPAction = (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.sendVerificationOTP)(opts);\n\treturn {\n\t\tid: \"email-otp\",\n\t\tinit(ctx) {\n\t\t\tif (!opts.overrideDefaultEmailVerification) return;\n\t\t\treturn { options: { emailVerification: { async sendVerificationEmail(data, request) {\n\t\t\t\tawait ctx.runInBackgroundOrAwait(sendVerificationOTPAction({\n\t\t\t\t\tcontext: ctx,\n\t\t\t\t\trequest,\n\t\t\t\t\tbody: {\n\t\t\t\t\t\temail: data.user.email,\n\t\t\t\t\t\ttype: \"email-verification\"\n\t\t\t\t\t},\n\t\t\t\t\tctx\n\t\t\t\t}));\n\t\t\t} } } };\n\t\t},\n\t\tendpoints: {\n\t\t\tsendVerificationOTP: sendVerificationOTPAction,\n\t\t\tcreateVerificationOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.createVerificationOTP)(opts),\n\t\t\tgetVerificationOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.getVerificationOTP)(opts),\n\t\t\tcheckVerificationOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.checkVerificationOTP)(opts),\n\t\t\tverifyEmailOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.verifyEmailOTP)(opts),\n\t\t\tsignInEmailOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.signInEmailOTP)(opts),\n\t\t\trequestPasswordResetEmailOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.requestPasswordResetEmailOTP)(opts),\n\t\t\tforgetPasswordEmailOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.forgetPasswordEmailOTP)(opts),\n\t\t\tresetPasswordEmailOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_5__.resetPasswordEmailOTP)(opts)\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher(context) {\n\t\t\t\treturn !!(context.path?.startsWith(\"/sign-up\") && opts.sendVerificationOnSignUp && !opts.overrideDefaultEmailVerification);\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst email = (await (0,_utils_plugin_helper_mjs__WEBPACK_IMPORTED_MODULE_3__.getEndpointResponse)(ctx))?.user.email;\n\t\t\t\tif (email) {\n\t\t\t\t\tconst otp = opts.generateOTP({\n\t\t\t\t\t\temail,\n\t\t\t\t\t\ttype: ctx.body.type\n\t\t\t\t\t}, ctx) || defaultOTPGenerator(opts);\n\t\t\t\t\tconst storedOTP = await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_4__.storeOTP)(ctx, opts, otp);\n\t\t\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\t\t\tvalue: `${storedOTP}:0`,\n\t\t\t\t\t\tidentifier: `email-verification-otp-${email}`,\n\t\t\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.runInBackgroundOrAwait(options.sendVerificationOTP({\n\t\t\t\t\t\temail,\n\t\t\t\t\t\totp,\n\t\t\t\t\t\ttype: \"email-verification\"\n\t\t\t\t\t}, ctx));\n\t\t\t\t}\n\t\t\t})\n\t\t}] },\n\t\t$ERROR_CODES: _routes_mjs__WEBPACK_IMPORTED_MODULE_5__.ERROR_CODES,\n\t\trateLimit: [\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/email-otp/send-verification-otp\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/email-otp/check-verification-otp\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/email-otp/verify-email\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/sign-in/email-otp\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/email-otp/request-password-reset\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/email-otp/reset-password\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\tpathMatcher(path) {\n\t\t\t\t\treturn path === \"/forget-password/email-otp\";\n\t\t\t\t},\n\t\t\t\twindow: 60,\n\t\t\t\tmax: 3\n\t\t\t}\n\t\t],\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0M7QUFDZ0I7QUFDL0I7QUFDb0M7QUFDekI7QUFDbU07QUFDakw7O0FBRTdEO0FBQ0EseUNBQXlDLHdFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnRUFBbUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVcscUJBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsMEJBQTBCLGtFQUFxQjtBQUMvQyx1QkFBdUIsK0RBQWtCO0FBQ3pDLHlCQUF5QixpRUFBb0I7QUFDN0MsbUJBQW1CLDJEQUFjO0FBQ2pDLG1CQUFtQiwyREFBYztBQUNqQyxpQ0FBaUMseUVBQTRCO0FBQzdELDJCQUEyQixtRUFBc0I7QUFDakQsMEJBQTBCLGtFQUFxQjtBQUMvQyxHQUFHO0FBQ0gsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEMseUJBQXlCLDZFQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw2QkFBNkIsd0RBQVE7QUFDckM7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQiw0Q0FBNEMsTUFBTTtBQUNsRCxpQkFBaUIsd0RBQU87QUFDeEIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsSUFBSTtBQUNKLEdBQUcsR0FBRztBQUNOLGdCQUFnQixvREFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNvQjtBQUNwQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGVtYWlsLW90cFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRFbmRwb2ludFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3BsdWdpbi1oZWxwZXIubWpzXCI7XG5pbXBvcnQgeyBzdG9yZU9UUCB9IGZyb20gXCIuL290cC10b2tlbi5tanNcIjtcbmltcG9ydCB7IEVSUk9SX0NPREVTLCBjaGVja1ZlcmlmaWNhdGlvbk9UUCwgY3JlYXRlVmVyaWZpY2F0aW9uT1RQLCBmb3JnZXRQYXNzd29yZEVtYWlsT1RQLCBnZXRWZXJpZmljYXRpb25PVFAsIHJlcXVlc3RQYXNzd29yZFJlc2V0RW1haWxPVFAsIHJlc2V0UGFzc3dvcmRFbWFpbE9UUCwgc2VuZFZlcmlmaWNhdGlvbk9UUCwgc2lnbkluRW1haWxPVFAsIHZlcmlmeUVtYWlsT1RQIH0gZnJvbSBcIi4vcm91dGVzLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9lbWFpbC1vdHAvaW5kZXgudHNcbmNvbnN0IGRlZmF1bHRPVFBHZW5lcmF0b3IgPSAob3B0aW9ucykgPT4gZ2VuZXJhdGVSYW5kb21TdHJpbmcob3B0aW9ucy5vdHBMZW5ndGggPz8gNiwgXCIwLTlcIik7XG5jb25zdCBlbWFpbE9UUCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0ZXhwaXJlc0luOiAzMDAsXG5cdFx0Z2VuZXJhdGVPVFA6ICgpID0+IGRlZmF1bHRPVFBHZW5lcmF0b3Iob3B0aW9ucyksXG5cdFx0c3RvcmVPVFA6IFwicGxhaW5cIixcblx0XHQuLi5vcHRpb25zXG5cdH07XG5cdGNvbnN0IHNlbmRWZXJpZmljYXRpb25PVFBBY3Rpb24gPSBzZW5kVmVyaWZpY2F0aW9uT1RQKG9wdHMpO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImVtYWlsLW90cFwiLFxuXHRcdGluaXQoY3R4KSB7XG5cdFx0XHRpZiAoIW9wdHMub3ZlcnJpZGVEZWZhdWx0RW1haWxWZXJpZmljYXRpb24pIHJldHVybjtcblx0XHRcdHJldHVybiB7IG9wdGlvbnM6IHsgZW1haWxWZXJpZmljYXRpb246IHsgYXN5bmMgc2VuZFZlcmlmaWNhdGlvbkVtYWlsKGRhdGEsIHJlcXVlc3QpIHtcblx0XHRcdFx0YXdhaXQgY3R4LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoc2VuZFZlcmlmaWNhdGlvbk9UUEFjdGlvbih7XG5cdFx0XHRcdFx0Y29udGV4dDogY3R4LFxuXHRcdFx0XHRcdHJlcXVlc3QsXG5cdFx0XHRcdFx0Ym9keToge1xuXHRcdFx0XHRcdFx0ZW1haWw6IGRhdGEudXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdHR5cGU6IFwiZW1haWwtdmVyaWZpY2F0aW9uXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGN0eFxuXHRcdFx0XHR9KSk7XG5cdFx0XHR9IH0gfSB9O1xuXHRcdH0sXG5cdFx0ZW5kcG9pbnRzOiB7XG5cdFx0XHRzZW5kVmVyaWZpY2F0aW9uT1RQOiBzZW5kVmVyaWZpY2F0aW9uT1RQQWN0aW9uLFxuXHRcdFx0Y3JlYXRlVmVyaWZpY2F0aW9uT1RQOiBjcmVhdGVWZXJpZmljYXRpb25PVFAob3B0cyksXG5cdFx0XHRnZXRWZXJpZmljYXRpb25PVFA6IGdldFZlcmlmaWNhdGlvbk9UUChvcHRzKSxcblx0XHRcdGNoZWNrVmVyaWZpY2F0aW9uT1RQOiBjaGVja1ZlcmlmaWNhdGlvbk9UUChvcHRzKSxcblx0XHRcdHZlcmlmeUVtYWlsT1RQOiB2ZXJpZnlFbWFpbE9UUChvcHRzKSxcblx0XHRcdHNpZ25JbkVtYWlsT1RQOiBzaWduSW5FbWFpbE9UUChvcHRzKSxcblx0XHRcdHJlcXVlc3RQYXNzd29yZFJlc2V0RW1haWxPVFA6IHJlcXVlc3RQYXNzd29yZFJlc2V0RW1haWxPVFAob3B0cyksXG5cdFx0XHRmb3JnZXRQYXNzd29yZEVtYWlsT1RQOiBmb3JnZXRQYXNzd29yZEVtYWlsT1RQKG9wdHMpLFxuXHRcdFx0cmVzZXRQYXNzd29yZEVtYWlsT1RQOiByZXNldFBhc3N3b3JkRW1haWxPVFAob3B0cylcblx0XHR9LFxuXHRcdGhvb2tzOiB7IGFmdGVyOiBbe1xuXHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdHJldHVybiAhIShjb250ZXh0LnBhdGg/LnN0YXJ0c1dpdGgoXCIvc2lnbi11cFwiKSAmJiBvcHRzLnNlbmRWZXJpZmljYXRpb25PblNpZ25VcCAmJiAhb3B0cy5vdmVycmlkZURlZmF1bHRFbWFpbFZlcmlmaWNhdGlvbik7XG5cdFx0XHR9LFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBlbWFpbCA9IChhd2FpdCBnZXRFbmRwb2ludFJlc3BvbnNlKGN0eCkpPy51c2VyLmVtYWlsO1xuXHRcdFx0XHRpZiAoZW1haWwpIHtcblx0XHRcdFx0XHRjb25zdCBvdHAgPSBvcHRzLmdlbmVyYXRlT1RQKHtcblx0XHRcdFx0XHRcdGVtYWlsLFxuXHRcdFx0XHRcdFx0dHlwZTogY3R4LmJvZHkudHlwZVxuXHRcdFx0XHRcdH0sIGN0eCkgfHwgZGVmYXVsdE9UUEdlbmVyYXRvcihvcHRzKTtcblx0XHRcdFx0XHRjb25zdCBzdG9yZWRPVFAgPSBhd2FpdCBzdG9yZU9UUChjdHgsIG9wdHMsIG90cCk7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdFx0XHRcdHZhbHVlOiBgJHtzdG9yZWRPVFB9OjBgLFxuXHRcdFx0XHRcdFx0aWRlbnRpZmllcjogYGVtYWlsLXZlcmlmaWNhdGlvbi1vdHAtJHtlbWFpbH1gLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBnZXREYXRlKG9wdHMuZXhwaXJlc0luLCBcInNlY1wiKVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQob3B0aW9ucy5zZW5kVmVyaWZpY2F0aW9uT1RQKHtcblx0XHRcdFx0XHRcdGVtYWlsLFxuXHRcdFx0XHRcdFx0b3RwLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJlbWFpbC12ZXJpZmljYXRpb25cIlxuXHRcdFx0XHRcdH0sIGN0eCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1dIH0sXG5cdFx0JEVSUk9SX0NPREVTOiBFUlJPUl9DT0RFUyxcblx0XHRyYXRlTGltaXQ6IFtcblx0XHRcdHtcblx0XHRcdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoID09PSBcIi9lbWFpbC1vdHAvc2VuZC12ZXJpZmljYXRpb24tb3RwXCI7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHdpbmRvdzogNjAsXG5cdFx0XHRcdG1heDogM1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoID09PSBcIi9lbWFpbC1vdHAvY2hlY2stdmVyaWZpY2F0aW9uLW90cFwiO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR3aW5kb3c6IDYwLFxuXHRcdFx0XHRtYXg6IDNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhdGhNYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0aCA9PT0gXCIvZW1haWwtb3RwL3ZlcmlmeS1lbWFpbFwiO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR3aW5kb3c6IDYwLFxuXHRcdFx0XHRtYXg6IDNcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhdGhNYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0aCA9PT0gXCIvc2lnbi1pbi9lbWFpbC1vdHBcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0d2luZG93OiA2MCxcblx0XHRcdFx0bWF4OiAzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL2VtYWlsLW90cC9yZXF1ZXN0LXBhc3N3b3JkLXJlc2V0XCI7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHdpbmRvdzogNjAsXG5cdFx0XHRcdG1heDogM1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoID09PSBcIi9lbWFpbC1vdHAvcmVzZXQtcGFzc3dvcmRcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0d2luZG93OiA2MCxcblx0XHRcdFx0bWF4OiAzXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL2ZvcmdldC1wYXNzd29yZC9lbWFpbC1vdHBcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0d2luZG93OiA2MCxcblx0XHRcdFx0bWF4OiAzXG5cdFx0XHR9XG5cdFx0XSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGVtYWlsT1RQIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/email-otp/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/email-otp/otp-token.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/otp-token.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   storeOTP: () => (/* binding */ storeOTP),\n/* harmony export */   verifyStoredOTP: () => (/* binding */ verifyStoredOTP)\n/* harmony export */ });\n/* harmony import */ var _crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/utils.mjs\");\n\n\n\n\n//#region src/plugins/email-otp/otp-token.ts\nasync function storeOTP(ctx, opts, otp) {\n\tif (opts.storeOTP === \"encrypted\") return await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncrypt)({\n\t\tkey: ctx.context.secret,\n\t\tdata: otp\n\t});\n\tif (opts.storeOTP === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultKeyHasher)(otp);\n\tif (typeof opts.storeOTP === \"object\" && \"hash\" in opts.storeOTP) return await opts.storeOTP.hash(otp);\n\tif (typeof opts.storeOTP === \"object\" && \"encrypt\" in opts.storeOTP) return await opts.storeOTP.encrypt(otp);\n\treturn otp;\n}\nasync function verifyStoredOTP(ctx, opts, storedOtp, otp) {\n\tif (opts.storeOTP === \"encrypted\") return (0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecrypt)({\n\t\tkey: ctx.context.secret,\n\t\tdata: storedOtp\n\t}), otp);\n\tif (opts.storeOTP === \"hashed\") return (0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultKeyHasher)(otp), storedOtp);\n\tif (typeof opts.storeOTP === \"object\" && \"hash\" in opts.storeOTP) return (0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await opts.storeOTP.hash(otp), storedOtp);\n\tif (typeof opts.storeOTP === \"object\" && \"decrypt\" in opts.storeOTP) return (0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await opts.storeOTP.decrypt(storedOtp), otp);\n\treturn (0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(otp, storedOtp);\n}\n\n//#endregion\n\n//# sourceMappingURL=otp-token.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC9vdHAtdG9rZW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTREO0FBQ2dCO0FBQzdCOztBQUUvQztBQUNBO0FBQ0EsaURBQWlELG1FQUFnQjtBQUNqRTtBQUNBO0FBQ0EsRUFBRTtBQUNGLDhDQUE4Qyw0REFBZ0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxxRUFBaUIsT0FBTyxtRUFBZ0I7QUFDbkY7QUFDQTtBQUNBLEVBQUU7QUFDRix3Q0FBd0MscUVBQWlCLE9BQU8sNERBQWdCO0FBQ2hGLDBFQUEwRSxxRUFBaUI7QUFDM0YsNkVBQTZFLHFFQUFpQjtBQUM5RixRQUFRLHFFQUFpQjtBQUN6Qjs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGVtYWlsLW90cFxcb3RwLXRva2VuLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25zdGFudFRpbWVFcXVhbCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vYnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0S2V5SGFzaGVyIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9lbWFpbC1vdHAvb3RwLXRva2VuLnRzXG5hc3luYyBmdW5jdGlvbiBzdG9yZU9UUChjdHgsIG9wdHMsIG90cCkge1xuXHRpZiAob3B0cy5zdG9yZU9UUCA9PT0gXCJlbmNyeXB0ZWRcIikgcmV0dXJuIGF3YWl0IHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdGRhdGE6IG90cFxuXHR9KTtcblx0aWYgKG9wdHMuc3RvcmVPVFAgPT09IFwiaGFzaGVkXCIpIHJldHVybiBhd2FpdCBkZWZhdWx0S2V5SGFzaGVyKG90cCk7XG5cdGlmICh0eXBlb2Ygb3B0cy5zdG9yZU9UUCA9PT0gXCJvYmplY3RcIiAmJiBcImhhc2hcIiBpbiBvcHRzLnN0b3JlT1RQKSByZXR1cm4gYXdhaXQgb3B0cy5zdG9yZU9UUC5oYXNoKG90cCk7XG5cdGlmICh0eXBlb2Ygb3B0cy5zdG9yZU9UUCA9PT0gXCJvYmplY3RcIiAmJiBcImVuY3J5cHRcIiBpbiBvcHRzLnN0b3JlT1RQKSByZXR1cm4gYXdhaXQgb3B0cy5zdG9yZU9UUC5lbmNyeXB0KG90cCk7XG5cdHJldHVybiBvdHA7XG59XG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlTdG9yZWRPVFAoY3R4LCBvcHRzLCBzdG9yZWRPdHAsIG90cCkge1xuXHRpZiAob3B0cy5zdG9yZU9UUCA9PT0gXCJlbmNyeXB0ZWRcIikgcmV0dXJuIGNvbnN0YW50VGltZUVxdWFsKGF3YWl0IHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdGRhdGE6IHN0b3JlZE90cFxuXHR9KSwgb3RwKTtcblx0aWYgKG9wdHMuc3RvcmVPVFAgPT09IFwiaGFzaGVkXCIpIHJldHVybiBjb25zdGFudFRpbWVFcXVhbChhd2FpdCBkZWZhdWx0S2V5SGFzaGVyKG90cCksIHN0b3JlZE90cCk7XG5cdGlmICh0eXBlb2Ygb3B0cy5zdG9yZU9UUCA9PT0gXCJvYmplY3RcIiAmJiBcImhhc2hcIiBpbiBvcHRzLnN0b3JlT1RQKSByZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYXdhaXQgb3B0cy5zdG9yZU9UUC5oYXNoKG90cCksIHN0b3JlZE90cCk7XG5cdGlmICh0eXBlb2Ygb3B0cy5zdG9yZU9UUCA9PT0gXCJvYmplY3RcIiAmJiBcImRlY3J5cHRcIiBpbiBvcHRzLnN0b3JlT1RQKSByZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYXdhaXQgb3B0cy5zdG9yZU9UUC5kZWNyeXB0KHN0b3JlZE90cCksIG90cCk7XG5cdHJldHVybiBjb25zdGFudFRpbWVFcXVhbChvdHAsIHN0b3JlZE90cCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc3RvcmVPVFAsIHZlcmlmeVN0b3JlZE9UUCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3RwLXRva2VuLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/email-otp/otp-token.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/email-otp/routes.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/routes.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_CODES: () => (/* binding */ ERROR_CODES),\n/* harmony export */   checkVerificationOTP: () => (/* binding */ checkVerificationOTP),\n/* harmony export */   createVerificationOTP: () => (/* binding */ createVerificationOTP),\n/* harmony export */   forgetPasswordEmailOTP: () => (/* binding */ forgetPasswordEmailOTP),\n/* harmony export */   getVerificationOTP: () => (/* binding */ getVerificationOTP),\n/* harmony export */   requestPasswordResetEmailOTP: () => (/* binding */ requestPasswordResetEmailOTP),\n/* harmony export */   resetPasswordEmailOTP: () => (/* binding */ resetPasswordEmailOTP),\n/* harmony export */   sendVerificationOTP: () => (/* binding */ sendVerificationOTP),\n/* harmony export */   signInEmailOTP: () => (/* binding */ signInEmailOTP),\n/* harmony export */   verifyEmailOTP: () => (/* binding */ verifyEmailOTP)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/utils.mjs\");\n/* harmony import */ var _otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./otp-token.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/otp-token.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/email-otp/routes.ts\nconst types = [\n\t\"email-verification\",\n\t\"sign-in\",\n\t\"forget-password\"\n];\nconst ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_10__.defineErrorCodes)({\n\tOTP_EXPIRED: \"OTP expired\",\n\tINVALID_OTP: \"Invalid OTP\",\n\tTOO_MANY_ATTEMPTS: \"Too many attempts\"\n});\nconst sendVerificationOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string({}).meta({ description: \"Email address to send the OTP\" }),\n\ttype: zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](types).meta({ description: \"Type of the OTP\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/email-otp/send-verification-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.sendVerificationOTP`\n*\n* **client:**\n* `authClient.emailOtp.sendVerificationOtp`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-email-otp-send-verification-otp)\n*/\nconst sendVerificationOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/email-otp/send-verification-otp\", {\n\tmethod: \"POST\",\n\tbody: sendVerificationOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"sendEmailVerificationOTP\",\n\t\tdescription: \"Send a verification OTP to an email\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!opts?.sendVerificationOTP) {\n\t\tctx.context.logger.error(\"send email verification is not implemented\");\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"send email verification is not implemented\" });\n\t}\n\tconst email = ctx.body.email.toLowerCase();\n\tif (!zod__WEBPACK_IMPORTED_MODULE_12__.email().safeParse(email).success) throw ctx.error(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst otp = opts.generateOTP({\n\t\temail,\n\t\ttype: ctx.body.type\n\t}, ctx) || defaultOTPGenerator(opts);\n\tconst storedOTP = await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.storeOTP)(ctx, opts, otp);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: `${storedOTP}:0`,\n\t\tidentifier: `${ctx.body.type}-otp-${email}`,\n\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t}).catch(async (error) => {\n\t\tawait ctx.context.internalAdapter.deleteVerificationByIdentifier(`${ctx.body.type}-otp-${email}`);\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: `${storedOTP}:0`,\n\t\t\tidentifier: `${ctx.body.type}-otp-${email}`,\n\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t\t});\n\t});\n\tif (!await ctx.context.internalAdapter.findUserByEmail(email)) if (ctx.body.type === \"sign-in\" && !opts.disableSignUp) {} else {\n\t\tawait ctx.context.internalAdapter.deleteVerificationByIdentifier(`${ctx.body.type}-otp-${email}`);\n\t\treturn ctx.json({ success: true });\n\t}\n\tawait ctx.context.runInBackgroundOrAwait(opts.sendVerificationOTP({\n\t\temail,\n\t\totp,\n\t\ttype: ctx.body.type\n\t}, ctx));\n\treturn ctx.json({ success: true });\n});\nconst createVerificationOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string({}).meta({ description: \"Email address to send the OTP\" }),\n\ttype: zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](types).meta({\n\t\trequired: true,\n\t\tdescription: \"Type of the OTP\"\n\t})\n});\nconst createVerificationOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)({\n\tmethod: \"POST\",\n\tbody: createVerificationOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"createEmailVerificationOTP\",\n\t\tdescription: \"Create a verification OTP for an email\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: { type: \"string\" } } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email.toLowerCase();\n\tconst otp = opts.generateOTP({\n\t\temail,\n\t\ttype: ctx.body.type\n\t}, ctx) || defaultOTPGenerator(opts);\n\tconst storedOTP = await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.storeOTP)(ctx, opts, otp);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: `${storedOTP}:0`,\n\t\tidentifier: `${ctx.body.type}-otp-${email}`,\n\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t});\n\treturn otp;\n});\nconst getVerificationOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string({}).meta({ description: \"Email address the OTP was sent to\" }),\n\ttype: zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](types).meta({\n\t\trequired: true,\n\t\tdescription: \"Type of the OTP\"\n\t})\n});\n/**\n* ### Endpoint\n*\n* GET `/email-otp/get-verification-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.getVerificationOTP`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-email-otp-get-verification-otp)\n*/\nconst getVerificationOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)({\n\tmethod: \"GET\",\n\tquery: getVerificationOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"getEmailVerificationOTP\",\n\t\tdescription: \"Get a verification OTP for an email\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"OTP retrieved successfully or not found/expired\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { otp: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tnullable: true,\n\t\t\t\t\tdescription: \"The stored OTP, or null if not found or expired\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"otp\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.query.email.toLowerCase();\n\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(`${ctx.query.type}-otp-${email}`);\n\tif (!verificationValue || verificationValue.expiresAt < /* @__PURE__ */ new Date()) return ctx.json({ otp: null });\n\tif (opts.storeOTP === \"hashed\" || typeof opts.storeOTP === \"object\" && \"hash\" in opts.storeOTP) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"OTP is hashed, cannot return the plain text OTP\" });\n\tconst [storedOtp, _attempts] = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.splitAtLastColon)(verificationValue.value);\n\tlet otp = storedOtp;\n\tif (opts.storeOTP === \"encrypted\") otp = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecrypt)({\n\t\tkey: ctx.context.secret,\n\t\tdata: storedOtp\n\t});\n\tif (typeof opts.storeOTP === \"object\" && \"decrypt\" in opts.storeOTP) otp = await opts.storeOTP.decrypt(storedOtp);\n\treturn ctx.json({ otp });\n});\nconst checkVerificationOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"Email address the OTP was sent to\" }),\n\ttype: zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](types).meta({\n\t\trequired: true,\n\t\tdescription: \"Type of the OTP\"\n\t}),\n\totp: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({\n\t\trequired: true,\n\t\tdescription: \"OTP to verify\"\n\t})\n});\n/**\n* ### Endpoint\n*\n* GET `/email-otp/check-verification-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.checkVerificationOTP`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-email-otp-check-verification-otp)\n*/\nconst checkVerificationOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/email-otp/check-verification-otp\", {\n\tmethod: \"POST\",\n\tbody: checkVerificationOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"verifyEmailWithOTP\",\n\t\tdescription: \"Verify an email with an OTP\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email.toLowerCase();\n\tif (!zod__WEBPACK_IMPORTED_MODULE_12__.email().safeParse(email).success) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tif (!await ctx.context.internalAdapter.findUserByEmail(email)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(`${ctx.body.type}-otp-${email}`);\n\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.OTP_EXPIRED });\n\t}\n\tconst [otpValue, attempts] = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.splitAtLastColon)(verificationValue.value);\n\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t}\n\tif (!await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyStoredOTP)(ctx, opts, otpValue, ctx.body.otp)) {\n\t\tawait ctx.context.internalAdapter.updateVerificationValue(verificationValue.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\t}\n\treturn ctx.json({ success: true });\n});\nconst verifyEmailOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string({}).meta({ description: \"Email address to verify\" }),\n\totp: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({\n\t\trequired: true,\n\t\tdescription: \"OTP to verify\"\n\t})\n});\n/**\n* ### Endpoint\n*\n* POST `/email-otp/verify-email`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.verifyEmailOTP`\n*\n* **client:**\n* `authClient.emailOtp.verifyEmail`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-email-otp-verify-email)\n*/\nconst verifyEmailOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/email-otp/verify-email\", {\n\tmethod: \"POST\",\n\tbody: verifyEmailOTPBodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify email with OTP\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the verification was successful\",\n\t\t\t\t\t\tenum: [true]\n\t\t\t\t\t},\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"Session token if autoSignInAfterVerification is enabled, otherwise null\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"status\",\n\t\t\t\t\t\"token\",\n\t\t\t\t\t\"user\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email.toLowerCase();\n\tif (!zod__WEBPACK_IMPORTED_MODULE_12__.email().safeParse(email).success) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(`email-verification-otp-${email}`);\n\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.OTP_EXPIRED });\n\tconst [otpValue, attempts] = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.splitAtLastColon)(verificationValue.value);\n\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t}\n\tif (!await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyStoredOTP)(ctx, opts, otpValue, ctx.body.otp)) {\n\t\tawait ctx.context.internalAdapter.updateVerificationValue(verificationValue.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\t}\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\tif (!user)\n /**\n\t* safe to leak the existence of a user, given the user has already the OTP from the\n\t* email\n\t*/\n\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\tif (ctx.context.options.emailVerification?.beforeEmailVerification) await ctx.context.options.emailVerification.beforeEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(user.user.id, {\n\t\temail,\n\t\temailVerified: true\n\t});\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(updatedUser, ctx.request);\n\tawait ctx.context.options.emailVerification?.afterEmailVerification?.(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst session = await ctx.context.internalAdapter.createSession(updatedUser.id);\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser: updatedUser\n\t\t});\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, updatedUser)\n\t\t});\n\t}\n\tconst currentSession = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\tif (currentSession && updatedUser.emailVerified) {\n\t\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setCookieCache)(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t}, !!dontRememberMeCookie);\n\t}\n\treturn ctx.json({\n\t\tstatus: true,\n\t\ttoken: null,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, updatedUser)\n\t});\n});\nconst signInEmailOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string({}).meta({ description: \"Email address to sign in\" }),\n\totp: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({\n\t\trequired: true,\n\t\tdescription: \"OTP sent to the email\"\n\t})\n});\n/**\n* ### Endpoint\n*\n* POST `/sign-in/email-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.signInEmailOTP`\n*\n* **client:**\n* `authClient.signIn.emailOtp`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-sign-in-email-otp)\n*/\nconst signInEmailOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/sign-in/email-otp\", {\n\tmethod: \"POST\",\n\tbody: signInEmailOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"signInWithEmailOTP\",\n\t\tdescription: \"Sign in with email and OTP\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Session token for the authenticated session\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"token\", \"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email.toLowerCase();\n\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(`sign-in-otp-${email}`);\n\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.OTP_EXPIRED });\n\tconst [otpValue, attempts] = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.splitAtLastColon)(verificationValue.value);\n\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t}\n\tif (!await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyStoredOTP)(ctx, opts, otpValue, ctx.body.otp)) {\n\t\tawait ctx.context.internalAdapter.updateVerificationValue(verificationValue.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\t}\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\tif (!user) {\n\t\tif (opts.disableSignUp) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\t\tconst newUser = await ctx.context.internalAdapter.createUser({\n\t\t\temail,\n\t\t\temailVerified: true,\n\t\t\tname: \"\"\n\t\t});\n\t\tconst session$1 = await ctx.context.internalAdapter.createSession(newUser.id);\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession: session$1,\n\t\t\tuser: newUser\n\t\t});\n\t\treturn ctx.json({\n\t\t\ttoken: session$1.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, newUser)\n\t\t});\n\t}\n\tif (!user.user.emailVerified) await ctx.context.internalAdapter.updateUser(user.user.id, { emailVerified: true });\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t});\n\treturn ctx.json({\n\t\ttoken: session.token,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user.user)\n\t});\n});\nconst requestPasswordResetEmailOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({ email: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"Email address to send the OTP\" }) });\n/**\n* ### Endpoint\n*\n* POST `/email-otp/request-password-reset`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.requestPasswordResetEmailOTP`\n*\n* **client:**\n* `authClient.emailOtp.requestPasswordReset`\n*\n* @see [Read our docs to learn more.](https://www.better-auth.com/docs/plugins/email-otp#reset-password-with-otp)\n*/\nconst requestPasswordResetEmailOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/email-otp/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: requestPasswordResetEmailOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordResetWithEmailOTP\",\n\t\tdescription: \"Request password reset with email and OTP\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the OTP was sent successfully\"\n\t\t\t\t} }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email;\n\tconst otp = opts.generateOTP({\n\t\temail,\n\t\ttype: \"forget-password\"\n\t}, ctx) || defaultOTPGenerator(opts);\n\tconst storedOTP = await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.storeOTP)(ctx, opts, otp);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: `${storedOTP}:0`,\n\t\tidentifier: `forget-password-otp-${email}`,\n\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t});\n\tif (!await ctx.context.internalAdapter.findUserByEmail(email)) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationByIdentifier(`forget-password-otp-${email}`);\n\t\treturn ctx.json({ success: true });\n\t}\n\tawait ctx.context.runInBackgroundOrAwait(opts.sendVerificationOTP({\n\t\temail,\n\t\totp,\n\t\ttype: \"forget-password\"\n\t}, ctx));\n\treturn ctx.json({ success: true });\n});\nconst forgetPasswordEmailOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({ email: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"Email address to send the OTP\" }) });\n/**\n* ### Endpoint\n*\n* POST `/forget-password/email-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.forgetPasswordEmailOTP`\n*\n* **client:**\n* `authClient.forgetPassword.emailOtp`\n*\n* @deprecated Use `/email-otp/request-password-reset` instead.\n* @see [Read our docs to learn more.](https://www.better-auth.com/docs/plugins/email-otp#reset-password-with-otp)\n*/\nconst forgetPasswordEmailOTP = (opts) => {\n\tconst warnDeprecation = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_10__.deprecate)(() => {}, \"The \\\"/forget-password/email-otp\\\" endpoint is deprecated. Please use \\\"/email-otp/request-password-reset\\\" instead. This endpoint will be removed in the next major version.\");\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/forget-password/email-otp\", {\n\t\tmethod: \"POST\",\n\t\tbody: forgetPasswordEmailOTPBodySchema,\n\t\tmetadata: { openapi: {\n\t\t\toperationId: \"forgetPasswordWithEmailOTP\",\n\t\t\tdescription: \"Deprecated: Use /email-otp/request-password-reset instead.\",\n\t\t\tresponses: { 200: {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { success: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the OTP was sent successfully\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\twarnDeprecation();\n\t\tconst email = ctx.body.email;\n\t\tconst otp = opts.generateOTP({\n\t\t\temail,\n\t\t\ttype: \"forget-password\"\n\t\t}, ctx) || defaultOTPGenerator(opts);\n\t\tconst storedOTP = await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.storeOTP)(ctx, opts, otp);\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: `${storedOTP}:0`,\n\t\t\tidentifier: `forget-password-otp-${email}`,\n\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t\t});\n\t\tif (!await ctx.context.internalAdapter.findUserByEmail(email)) {\n\t\t\tawait ctx.context.internalAdapter.deleteVerificationByIdentifier(`forget-password-otp-${email}`);\n\t\t\treturn ctx.json({ success: true });\n\t\t}\n\t\tawait ctx.context.runInBackgroundOrAwait(opts.sendVerificationOTP({\n\t\t\temail,\n\t\t\totp,\n\t\t\ttype: \"forget-password\"\n\t\t}, ctx));\n\t\treturn ctx.json({ success: true });\n\t});\n};\nconst resetPasswordEmailOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"Email address to reset the password\" }),\n\totp: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"OTP sent to the email\" }),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"New password\" })\n});\n/**\n* ### Endpoint\n*\n* POST `/email-otp/reset-password`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.resetPasswordEmailOTP`\n*\n* **client:**\n* `authClient.emailOtp.resetPassword`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/email-otp#api-method-email-otp-reset-password)\n*/\nconst resetPasswordEmailOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/email-otp/reset-password\", {\n\tmethod: \"POST\",\n\tbody: resetPasswordEmailOTPBodySchema,\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordWithEmailOTP\",\n\t\tdescription: \"Reset password with email and OTP\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontnt: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst email = ctx.body.email;\n\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(`forget-password-otp-${email}`);\n\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.OTP_EXPIRED });\n\t}\n\tconst [otpValue, attempts] = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.splitAtLastColon)(verificationValue.value);\n\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"FORBIDDEN\", { message: ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t}\n\tif (!await (0,_otp_token_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyStoredOTP)(ctx, opts, otpValue, ctx.body.otp)) {\n\t\tawait ctx.context.internalAdapter.updateVerificationValue(verificationValue.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: ERROR_CODES.INVALID_OTP });\n\t}\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (ctx.body.password.length < minPasswordLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (ctx.body.password.length > maxPasswordLength) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst passwordHash = await ctx.context.password.hash(ctx.body.password);\n\tif (!user.accounts?.find((account) => account.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId: user.user.id,\n\t\tproviderId: \"credential\",\n\t\taccountId: user.user.id,\n\t\tpassword: passwordHash\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(user.user.id, passwordHash);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) await ctx.context.options.emailAndPassword.onPasswordReset({ user: user.user }, ctx.request);\n\tif (!user.user.emailVerified) await ctx.context.internalAdapter.updateUser(user.user.id, { emailVerified: true });\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(user.user.id);\n\treturn ctx.json({ success: true });\n});\nconst defaultOTPGenerator = (options) => (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(options.otpLength ?? 6, \"0-9\");\n\n//#endregion\n\n//# sourceMappingURL=routes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC9yb3V0ZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ087QUFDUztBQUNMO0FBQ2lCO0FBQ1Y7QUFDbEI7QUFDQTtBQUNhO0FBQ0Q7QUFDVztBQUM3QztBQUNrQzs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsc0NBQXNDLHdDQUFRO0FBQzlDLFFBQVEsd0NBQVEsR0FBRyxTQUFTLDhDQUE4QztBQUMxRSxPQUFPLHlDQUFNLGVBQWUsZ0NBQWdDO0FBQzVELENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsMEVBQWtCO0FBQ3hEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLG9EQUFRLGtCQUFrQix1REFBdUQ7QUFDN0Y7QUFDQTtBQUNBLE1BQU0sdUNBQU8sOERBQThELFNBQVMscUVBQWdCLGdCQUFnQjtBQUNwSDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YseUJBQXlCLHdEQUFRO0FBQ2pDO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCLGlCQUFpQixjQUFjLE9BQU8sTUFBTTtBQUM1QyxhQUFhLHdEQUFPO0FBQ3BCLEVBQUU7QUFDRixzRUFBc0UsY0FBYyxPQUFPLE1BQU07QUFDakc7QUFDQSxhQUFhLFVBQVU7QUFDdkIsa0JBQWtCLGNBQWMsT0FBTyxNQUFNO0FBQzdDLGNBQWMsd0RBQU87QUFDckIsR0FBRztBQUNILEVBQUU7QUFDRiwySEFBMkg7QUFDM0gsc0VBQXNFLGNBQWMsT0FBTyxNQUFNO0FBQ2pHLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGVBQWU7QUFDbEMsQ0FBQztBQUNELHdDQUF3Qyx3Q0FBUTtBQUNoRCxRQUFRLHdDQUFRLEdBQUcsU0FBUyw4Q0FBOEM7QUFDMUUsT0FBTyx5Q0FBTTtBQUNiO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELHdDQUF3QywwRUFBa0I7QUFDMUQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0IsVUFBVTtBQUM5QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHlCQUF5Qix3REFBUTtBQUNqQztBQUNBLFlBQVksVUFBVTtBQUN0QixpQkFBaUIsY0FBYyxPQUFPLE1BQU07QUFDNUMsYUFBYSx3REFBTztBQUNwQixFQUFFO0FBQ0Y7QUFDQSxDQUFDO0FBQ0QscUNBQXFDLHdDQUFRO0FBQzdDLFFBQVEsd0NBQVEsR0FBRyxTQUFTLGtEQUFrRDtBQUM5RSxPQUFPLHlDQUFNO0FBQ2I7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDBFQUFrQjtBQUN2RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxzRkFBc0YsZUFBZSxPQUFPLE1BQU07QUFDbEgsdUdBQXVHLFdBQVc7QUFDbEgsMkdBQTJHLG9EQUFRLGtCQUFrQiw0REFBNEQ7QUFDak0sZ0NBQWdDLDREQUFnQjtBQUNoRDtBQUNBLGdEQUFnRCxtRUFBZ0I7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLG1CQUFtQixLQUFLO0FBQ3hCLENBQUM7QUFDRCx1Q0FBdUMsd0NBQVE7QUFDL0MsUUFBUSx3Q0FBUSxVQUFVLGtEQUFrRDtBQUM1RSxPQUFPLHlDQUFNO0FBQ2I7QUFDQTtBQUNBLEVBQUU7QUFDRixNQUFNLHdDQUFRO0FBQ2Q7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBFQUFrQjtBQUN6RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLE1BQU0sdUNBQU8sdUNBQXVDLG9EQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDdkgsMEVBQTBFLG9EQUFRLGtCQUFrQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDOUksc0ZBQXNGLGNBQWMsT0FBTyxNQUFNO0FBQ2pILG1DQUFtQyxvREFBUSxrQkFBa0Isa0NBQWtDO0FBQy9GO0FBQ0E7QUFDQSxZQUFZLG9EQUFRLGtCQUFrQixrQ0FBa0M7QUFDeEU7QUFDQSw4QkFBOEIsNERBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0RBQVEsZ0JBQWdCLHdDQUF3QztBQUM1RTtBQUNBLFlBQVksK0RBQWU7QUFDM0Isb0ZBQW9GLFVBQVUsU0FBUyxHQUFHLDhCQUE4QixHQUFHO0FBQzNJLFlBQVksb0RBQVEsa0JBQWtCLGtDQUFrQztBQUN4RTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCxpQ0FBaUMsd0NBQVE7QUFDekMsUUFBUSx3Q0FBUSxHQUFHLFNBQVMsd0NBQXdDO0FBQ3BFLE1BQU0sd0NBQVE7QUFDZDtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMEVBQWtCO0FBQ25EO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sYUFBYTtBQUNiLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsTUFBTSx1Q0FBTyx1Q0FBdUMsb0RBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN2SCw2R0FBNkcsTUFBTTtBQUNuSCxtQ0FBbUMsb0RBQVEsa0JBQWtCLGtDQUFrQztBQUMvRix5RUFBeUUsb0RBQVEsa0JBQWtCLGtDQUFrQztBQUNySSw4QkFBOEIsNERBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0RBQVEsZ0JBQWdCLHdDQUF3QztBQUM1RTtBQUNBLFlBQVksK0RBQWU7QUFDM0Isb0ZBQW9GLFVBQVUsU0FBUyxHQUFHLDhCQUE4QixHQUFHO0FBQzNJLFlBQVksb0RBQVEsa0JBQWtCLGtDQUFrQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsaUJBQWlCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBLDhCQUE4QiwwRUFBaUI7QUFDL0M7QUFDQTtBQUNBLFFBQVEsa0VBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQWU7QUFDdkIsRUFBRTtBQUNGLENBQUM7QUFDRCxpQ0FBaUMsd0NBQVE7QUFDekMsUUFBUSx3Q0FBUSxHQUFHLFNBQVMseUNBQXlDO0FBQ3JFLE1BQU0sd0NBQVE7QUFDZDtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMEVBQWtCO0FBQ25EO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sYUFBYTtBQUNiLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGtHQUFrRyxNQUFNO0FBQ3hHLG1DQUFtQyxvREFBUSxrQkFBa0Isa0NBQWtDO0FBQy9GLHlFQUF5RSxvREFBUSxrQkFBa0Isa0NBQWtDO0FBQ3JJLDhCQUE4Qiw0REFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBUSxnQkFBZ0Isd0NBQXdDO0FBQzVFO0FBQ0EsWUFBWSwrREFBZTtBQUMzQixvRkFBb0YsVUFBVSxTQUFTLEdBQUcsOEJBQThCLEdBQUc7QUFDM0ksWUFBWSxvREFBUSxrQkFBa0Isa0NBQWtDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG9EQUFRLGtCQUFrQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBLDRGQUE0RixxQkFBcUI7QUFDakg7QUFDQSxPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDO0FBQ0QsK0NBQStDLHdDQUFRLEdBQUcsT0FBTyx3Q0FBUSxVQUFVLDhDQUE4QyxHQUFHO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQywwRUFBa0I7QUFDakU7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHlCQUF5Qix3REFBUTtBQUNqQztBQUNBLFlBQVksVUFBVTtBQUN0QixxQ0FBcUMsTUFBTTtBQUMzQyxhQUFhLHdEQUFPO0FBQ3BCLEVBQUU7QUFDRjtBQUNBLDBGQUEwRixNQUFNO0FBQ2hHLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGVBQWU7QUFDbEMsQ0FBQztBQUNELHlDQUF5Qyx3Q0FBUSxHQUFHLE9BQU8sd0NBQVEsVUFBVSw4Q0FBOEMsR0FBRztBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG1FQUFTLFNBQVM7QUFDM0MsUUFBUSwwRUFBa0I7QUFDMUI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMEJBQTBCLHdEQUFRO0FBQ2xDO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCLHNDQUFzQyxNQUFNO0FBQzVDLGNBQWMsd0RBQU87QUFDckIsR0FBRztBQUNIO0FBQ0EsMkZBQTJGLE1BQU07QUFDakcscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxvQkFBb0IsZUFBZTtBQUNuQyxFQUFFO0FBQ0Y7QUFDQSx3Q0FBd0Msd0NBQVE7QUFDaEQsUUFBUSx3Q0FBUSxVQUFVLG9EQUFvRDtBQUM5RSxNQUFNLHdDQUFRLFVBQVUsc0NBQXNDO0FBQzlELFdBQVcsd0NBQVEsVUFBVSw2QkFBNkI7QUFDMUQsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwRUFBa0I7QUFDMUQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsYUFBYSxzQkFBc0I7QUFDbkM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSwwR0FBMEcsTUFBTTtBQUNoSCxtQ0FBbUMsb0RBQVEsa0JBQWtCLGtDQUFrQztBQUMvRjtBQUNBO0FBQ0EsWUFBWSxvREFBUSxrQkFBa0Isa0NBQWtDO0FBQ3hFO0FBQ0EsOEJBQThCLDREQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQSxZQUFZLG9EQUFRLGdCQUFnQix3Q0FBd0M7QUFDNUU7QUFDQSxZQUFZLCtEQUFlO0FBQzNCLG9GQUFvRixVQUFVLFNBQVMsR0FBRyw4QkFBOEIsR0FBRztBQUMzSSxZQUFZLG9EQUFRLGtCQUFrQixrQ0FBa0M7QUFDeEU7QUFDQTtBQUNBLHlFQUF5RSx1QkFBdUI7QUFDaEcsc0JBQXNCLG9EQUFRLGtCQUFrQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDMUY7QUFDQSw2REFBNkQsb0RBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNySTtBQUNBLDZEQUE2RCxvREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLHlIQUF5SCxpQkFBaUI7QUFDMUksNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLENBQUM7QUFDRCx5Q0FBeUMsd0VBQW9COztBQUU3RDtBQUMwTjtBQUMxTiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGVtYWlsLW90cFxccm91dGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCB7IHN5bW1ldHJpY0RlY3J5cHQgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2V0Q29va2llQ2FjaGUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNwbGl0QXRMYXN0Q29sb24gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IHN0b3JlT1RQLCB2ZXJpZnlTdG9yZWRPVFAgfSBmcm9tIFwiLi9vdHAtdG9rZW4ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzLCBkZXByZWNhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZW1haWwtb3RwL3JvdXRlcy50c1xuY29uc3QgdHlwZXMgPSBbXG5cdFwiZW1haWwtdmVyaWZpY2F0aW9uXCIsXG5cdFwic2lnbi1pblwiLFxuXHRcImZvcmdldC1wYXNzd29yZFwiXG5dO1xuY29uc3QgRVJST1JfQ09ERVMgPSBkZWZpbmVFcnJvckNvZGVzKHtcblx0T1RQX0VYUElSRUQ6IFwiT1RQIGV4cGlyZWRcIixcblx0SU5WQUxJRF9PVFA6IFwiSW52YWxpZCBPVFBcIixcblx0VE9PX01BTllfQVRURU1QVFM6IFwiVG9vIG1hbnkgYXR0ZW1wdHNcIlxufSk7XG5jb25zdCBzZW5kVmVyaWZpY2F0aW9uT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0ZW1haWw6IHouc3RyaW5nKHt9KS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRW1haWwgYWRkcmVzcyB0byBzZW5kIHRoZSBPVFBcIiB9KSxcblx0dHlwZTogei5lbnVtKHR5cGVzKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVHlwZSBvZiB0aGUgT1RQXCIgfSlcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvZW1haWwtb3RwL3NlbmQtdmVyaWZpY2F0aW9uLW90cGBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5zZW5kVmVyaWZpY2F0aW9uT1RQYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5lbWFpbE90cC5zZW5kVmVyaWZpY2F0aW9uT3RwYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvZW1haWwtb3RwI2FwaS1tZXRob2QtZW1haWwtb3RwLXNlbmQtdmVyaWZpY2F0aW9uLW90cClcbiovXG5jb25zdCBzZW5kVmVyaWZpY2F0aW9uT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9lbWFpbC1vdHAvc2VuZC12ZXJpZmljYXRpb24tb3RwXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogc2VuZFZlcmlmaWNhdGlvbk9UUEJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJzZW5kRW1haWxWZXJpZmljYXRpb25PVFBcIixcblx0XHRkZXNjcmlwdGlvbjogXCJTZW5kIGEgdmVyaWZpY2F0aW9uIE9UUCB0byBhbiBlbWFpbFwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIW9wdHM/LnNlbmRWZXJpZmljYXRpb25PVFApIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJzZW5kIGVtYWlsIHZlcmlmaWNhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcInNlbmQgZW1haWwgdmVyaWZpY2F0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWwudG9Mb3dlckNhc2UoKTtcblx0aWYgKCF6LmVtYWlsKCkuc2FmZVBhcnNlKGVtYWlsKS5zdWNjZXNzKSB0aHJvdyBjdHguZXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTCB9KTtcblx0Y29uc3Qgb3RwID0gb3B0cy5nZW5lcmF0ZU9UUCh7XG5cdFx0ZW1haWwsXG5cdFx0dHlwZTogY3R4LmJvZHkudHlwZVxuXHR9LCBjdHgpIHx8IGRlZmF1bHRPVFBHZW5lcmF0b3Iob3B0cyk7XG5cdGNvbnN0IHN0b3JlZE9UUCA9IGF3YWl0IHN0b3JlT1RQKGN0eCwgb3B0cywgb3RwKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHR2YWx1ZTogYCR7c3RvcmVkT1RQfTowYCxcblx0XHRpZGVudGlmaWVyOiBgJHtjdHguYm9keS50eXBlfS1vdHAtJHtlbWFpbH1gLFxuXHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShvcHRzLmV4cGlyZXNJbiwgXCJzZWNcIilcblx0fSkuY2F0Y2goYXN5bmMgKGVycm9yKSA9PiB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvbkJ5SWRlbnRpZmllcihgJHtjdHguYm9keS50eXBlfS1vdHAtJHtlbWFpbH1gKTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdFx0dmFsdWU6IGAke3N0b3JlZE9UUH06MGAsXG5cdFx0XHRpZGVudGlmaWVyOiBgJHtjdHguYm9keS50eXBlfS1vdHAtJHtlbWFpbH1gLFxuXHRcdFx0ZXhwaXJlc0F0OiBnZXREYXRlKG9wdHMuZXhwaXJlc0luLCBcInNlY1wiKVxuXHRcdH0pO1xuXHR9KTtcblx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsKSkgaWYgKGN0eC5ib2R5LnR5cGUgPT09IFwic2lnbi1pblwiICYmICFvcHRzLmRpc2FibGVTaWduVXApIHt9IGVsc2Uge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25CeUlkZW50aWZpZXIoYCR7Y3R4LmJvZHkudHlwZX0tb3RwLSR7ZW1haWx9YCk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcblx0fVxuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KG9wdHMuc2VuZFZlcmlmaWNhdGlvbk9UUCh7XG5cdFx0ZW1haWwsXG5cdFx0b3RwLFxuXHRcdHR5cGU6IGN0eC5ib2R5LnR5cGVcblx0fSwgY3R4KSk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcbmNvbnN0IGNyZWF0ZVZlcmlmaWNhdGlvbk9UUEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVtYWlsOiB6LnN0cmluZyh7fSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIGFkZHJlc3MgdG8gc2VuZCB0aGUgT1RQXCIgfSksXG5cdHR5cGU6IHouZW51bSh0eXBlcykubWV0YSh7XG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0ZGVzY3JpcHRpb246IFwiVHlwZSBvZiB0aGUgT1RQXCJcblx0fSlcbn0pO1xuY29uc3QgY3JlYXRlVmVyaWZpY2F0aW9uT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludCh7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IGNyZWF0ZVZlcmlmaWNhdGlvbk9UUEJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJjcmVhdGVFbWFpbFZlcmlmaWNhdGlvbk9UUFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIHZlcmlmaWNhdGlvbiBPVFAgZm9yIGFuIGVtYWlsXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgZW1haWwgPSBjdHguYm9keS5lbWFpbC50b0xvd2VyQ2FzZSgpO1xuXHRjb25zdCBvdHAgPSBvcHRzLmdlbmVyYXRlT1RQKHtcblx0XHRlbWFpbCxcblx0XHR0eXBlOiBjdHguYm9keS50eXBlXG5cdH0sIGN0eCkgfHwgZGVmYXVsdE9UUEdlbmVyYXRvcihvcHRzKTtcblx0Y29uc3Qgc3RvcmVkT1RQID0gYXdhaXQgc3RvcmVPVFAoY3R4LCBvcHRzLCBvdHApO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdHZhbHVlOiBgJHtzdG9yZWRPVFB9OjBgLFxuXHRcdGlkZW50aWZpZXI6IGAke2N0eC5ib2R5LnR5cGV9LW90cC0ke2VtYWlsfWAsXG5cdFx0ZXhwaXJlc0F0OiBnZXREYXRlKG9wdHMuZXhwaXJlc0luLCBcInNlY1wiKVxuXHR9KTtcblx0cmV0dXJuIG90cDtcbn0pO1xuY29uc3QgZ2V0VmVyaWZpY2F0aW9uT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0ZW1haWw6IHouc3RyaW5nKHt9KS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRW1haWwgYWRkcmVzcyB0aGUgT1RQIHdhcyBzZW50IHRvXCIgfSksXG5cdHR5cGU6IHouZW51bSh0eXBlcykubWV0YSh7XG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0ZGVzY3JpcHRpb246IFwiVHlwZSBvZiB0aGUgT1RQXCJcblx0fSlcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBHRVQgYC9lbWFpbC1vdHAvZ2V0LXZlcmlmaWNhdGlvbi1vdHBgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkuZ2V0VmVyaWZpY2F0aW9uT1RQYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvZW1haWwtb3RwI2FwaS1tZXRob2QtZW1haWwtb3RwLWdldC12ZXJpZmljYXRpb24tb3RwKVxuKi9cbmNvbnN0IGdldFZlcmlmaWNhdGlvbk9UUCA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoe1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHF1ZXJ5OiBnZXRWZXJpZmljYXRpb25PVFBCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiZ2V0RW1haWxWZXJpZmljYXRpb25PVFBcIixcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgYSB2ZXJpZmljYXRpb24gT1RQIGZvciBhbiBlbWFpbFwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJPVFAgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseSBvciBub3QgZm91bmQvZXhwaXJlZFwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBvdHA6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBzdG9yZWQgT1RQLCBvciBudWxsIGlmIG5vdCBmb3VuZCBvciBleHBpcmVkXCJcblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wib3RwXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgZW1haWwgPSBjdHgucXVlcnkuZW1haWwudG9Mb3dlckNhc2UoKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uVmFsdWUgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGAke2N0eC5xdWVyeS50eXBlfS1vdHAtJHtlbWFpbH1gKTtcblx0aWYgKCF2ZXJpZmljYXRpb25WYWx1ZSB8fCB2ZXJpZmljYXRpb25WYWx1ZS5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgcmV0dXJuIGN0eC5qc29uKHsgb3RwOiBudWxsIH0pO1xuXHRpZiAob3B0cy5zdG9yZU9UUCA9PT0gXCJoYXNoZWRcIiB8fCB0eXBlb2Ygb3B0cy5zdG9yZU9UUCA9PT0gXCJvYmplY3RcIiAmJiBcImhhc2hcIiBpbiBvcHRzLnN0b3JlT1RQKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiT1RQIGlzIGhhc2hlZCwgY2Fubm90IHJldHVybiB0aGUgcGxhaW4gdGV4dCBPVFBcIiB9KTtcblx0Y29uc3QgW3N0b3JlZE90cCwgX2F0dGVtcHRzXSA9IHNwbGl0QXRMYXN0Q29sb24odmVyaWZpY2F0aW9uVmFsdWUudmFsdWUpO1xuXHRsZXQgb3RwID0gc3RvcmVkT3RwO1xuXHRpZiAob3B0cy5zdG9yZU9UUCA9PT0gXCJlbmNyeXB0ZWRcIikgb3RwID0gYXdhaXQgc3ltbWV0cmljRGVjcnlwdCh7XG5cdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0ZGF0YTogc3RvcmVkT3RwXG5cdH0pO1xuXHRpZiAodHlwZW9mIG9wdHMuc3RvcmVPVFAgPT09IFwib2JqZWN0XCIgJiYgXCJkZWNyeXB0XCIgaW4gb3B0cy5zdG9yZU9UUCkgb3RwID0gYXdhaXQgb3B0cy5zdG9yZU9UUC5kZWNyeXB0KHN0b3JlZE90cCk7XG5cdHJldHVybiBjdHguanNvbih7IG90cCB9KTtcbn0pO1xuY29uc3QgY2hlY2tWZXJpZmljYXRpb25PVFBCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRlbWFpbDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRW1haWwgYWRkcmVzcyB0aGUgT1RQIHdhcyBzZW50IHRvXCIgfSksXG5cdHR5cGU6IHouZW51bSh0eXBlcykubWV0YSh7XG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0ZGVzY3JpcHRpb246IFwiVHlwZSBvZiB0aGUgT1RQXCJcblx0fSksXG5cdG90cDogei5zdHJpbmcoKS5tZXRhKHtcblx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRkZXNjcmlwdGlvbjogXCJPVFAgdG8gdmVyaWZ5XCJcblx0fSlcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBHRVQgYC9lbWFpbC1vdHAvY2hlY2stdmVyaWZpY2F0aW9uLW90cGBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5jaGVja1ZlcmlmaWNhdGlvbk9UUGBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2VtYWlsLW90cCNhcGktbWV0aG9kLWVtYWlsLW90cC1jaGVjay12ZXJpZmljYXRpb24tb3RwKVxuKi9cbmNvbnN0IGNoZWNrVmVyaWZpY2F0aW9uT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9lbWFpbC1vdHAvY2hlY2stdmVyaWZpY2F0aW9uLW90cFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IGNoZWNrVmVyaWZpY2F0aW9uT1RQQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInZlcmlmeUVtYWlsV2l0aE9UUFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlZlcmlmeSBhbiBlbWFpbCB3aXRoIGFuIE9UUFwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBlbWFpbCA9IGN0eC5ib2R5LmVtYWlsLnRvTG93ZXJDYXNlKCk7XG5cdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5VU0VSX05PVF9GT1VORCB9KTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uVmFsdWUgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGAke2N0eC5ib2R5LnR5cGV9LW90cC0ke2VtYWlsfWApO1xuXHRpZiAoIXZlcmlmaWNhdGlvblZhbHVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfT1RQIH0pO1xuXHRpZiAodmVyaWZpY2F0aW9uVmFsdWUuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uVmFsdWUuaWQpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuT1RQX0VYUElSRUQgfSk7XG5cdH1cblx0Y29uc3QgW290cFZhbHVlLCBhdHRlbXB0c10gPSBzcGxpdEF0TGFzdENvbG9uKHZlcmlmaWNhdGlvblZhbHVlLnZhbHVlKTtcblx0Y29uc3QgYWxsb3dlZEF0dGVtcHRzID0gb3B0cz8uYWxsb3dlZEF0dGVtcHRzIHx8IDM7XG5cdGlmIChhdHRlbXB0cyAmJiBwYXJzZUludChhdHRlbXB0cykgPj0gYWxsb3dlZEF0dGVtcHRzKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5UT09fTUFOWV9BVFRFTVBUUyB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IHZlcmlmeVN0b3JlZE9UUChjdHgsIG9wdHMsIG90cFZhbHVlLCBjdHguYm9keS5vdHApKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkLCB7IHZhbHVlOiBgJHtvdHBWYWx1ZX06JHtwYXJzZUludChhdHRlbXB0cyB8fCBcIjBcIikgKyAxfWAgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX09UUCB9KTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5jb25zdCB2ZXJpZnlFbWFpbE9UUEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVtYWlsOiB6LnN0cmluZyh7fSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIGFkZHJlc3MgdG8gdmVyaWZ5XCIgfSksXG5cdG90cDogei5zdHJpbmcoKS5tZXRhKHtcblx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRkZXNjcmlwdGlvbjogXCJPVFAgdG8gdmVyaWZ5XCJcblx0fSlcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvZW1haWwtb3RwL3ZlcmlmeS1lbWFpbGBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS52ZXJpZnlFbWFpbE9UUGBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQuZW1haWxPdHAudmVyaWZ5RW1haWxgXG4qXG4qIEBzZWUgW1JlYWQgb3VyIGRvY3MgdG8gbGVhcm4gbW9yZS5dKGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9lbWFpbC1vdHAjYXBpLW1ldGhvZC1lbWFpbC1vdHAtdmVyaWZ5LWVtYWlsKVxuKi9cbmNvbnN0IHZlcmlmeUVtYWlsT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9lbWFpbC1vdHAvdmVyaWZ5LWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogdmVyaWZ5RW1haWxPVFBCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiVmVyaWZ5IGVtYWlsIHdpdGggT1RQXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHN0YXR1czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHZlcmlmaWNhdGlvbiB3YXMgc3VjY2Vzc2Z1bFwiLFxuXHRcdFx0XHRcdFx0ZW51bTogW3RydWVdXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiB0b2tlbiBpZiBhdXRvU2lnbkluQWZ0ZXJWZXJpZmljYXRpb24gaXMgZW5hYmxlZCwgb3RoZXJ3aXNlIG51bGxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XCJzdGF0dXNcIixcblx0XHRcdFx0XHRcInRva2VuXCIsXG5cdFx0XHRcdFx0XCJ1c2VyXCJcblx0XHRcdFx0XVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWwudG9Mb3dlckNhc2UoKTtcblx0aWYgKCF6LmVtYWlsKCkuc2FmZVBhcnNlKGVtYWlsKS5zdWNjZXNzKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTCB9KTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uVmFsdWUgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGBlbWFpbC12ZXJpZmljYXRpb24tb3RwLSR7ZW1haWx9YCk7XG5cdGlmICghdmVyaWZpY2F0aW9uVmFsdWUpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9PVFAgfSk7XG5cdGlmICh2ZXJpZmljYXRpb25WYWx1ZS5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5PVFBfRVhQSVJFRCB9KTtcblx0Y29uc3QgW290cFZhbHVlLCBhdHRlbXB0c10gPSBzcGxpdEF0TGFzdENvbG9uKHZlcmlmaWNhdGlvblZhbHVlLnZhbHVlKTtcblx0Y29uc3QgYWxsb3dlZEF0dGVtcHRzID0gb3B0cz8uYWxsb3dlZEF0dGVtcHRzIHx8IDM7XG5cdGlmIChhdHRlbXB0cyAmJiBwYXJzZUludChhdHRlbXB0cykgPj0gYWxsb3dlZEF0dGVtcHRzKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5UT09fTUFOWV9BVFRFTVBUUyB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IHZlcmlmeVN0b3JlZE9UUChjdHgsIG9wdHMsIG90cFZhbHVlLCBjdHguYm9keS5vdHApKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkLCB7IHZhbHVlOiBgJHtvdHBWYWx1ZX06JHtwYXJzZUludChhdHRlbXB0cyB8fCBcIjBcIikgKyAxfWAgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX09UUCB9KTtcblx0fVxuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uVmFsdWUuaWQpO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCk7XG5cdGlmICghdXNlcilcbiAvKipcblx0KiBzYWZlIHRvIGxlYWsgdGhlIGV4aXN0ZW5jZSBvZiBhIHVzZXIsIGdpdmVuIHRoZSB1c2VyIGhhcyBhbHJlYWR5IHRoZSBPVFAgZnJvbSB0aGVcblx0KiBlbWFpbFxuXHQqL1xuXHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9OT1RfRk9VTkQgfSk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbih1c2VyLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcih1c2VyLnVzZXIuaWQsIHtcblx0XHRlbWFpbCxcblx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8ub25FbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uKHVwZGF0ZWRVc2VyLCBjdHgucmVxdWVzdCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmFmdGVyRW1haWxWZXJpZmljYXRpb24/Lih1cGRhdGVkVXNlciwgY3R4LnJlcXVlc3QpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYXV0b1NpZ25JbkFmdGVyVmVyaWZpY2F0aW9uKSB7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVwZGF0ZWRVc2VyLmlkKTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXI6IHVwZGF0ZWRVc2VyXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyKVxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKGN1cnJlbnRTZXNzaW9uICYmIHVwZGF0ZWRVc2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRjb25zdCBkb250UmVtZW1iZXJNZUNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4ubmFtZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRhd2FpdCBzZXRDb29raWVDYWNoZShjdHgsIHtcblx0XHRcdHNlc3Npb246IGN1cnJlbnRTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHR1c2VyOiB7XG5cdFx0XHRcdC4uLmN1cnJlbnRTZXNzaW9uLnVzZXIsXG5cdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWVcblx0XHRcdH1cblx0XHR9LCAhIWRvbnRSZW1lbWJlck1lQ29va2llKTtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHN0YXR1czogdHJ1ZSxcblx0XHR0b2tlbjogbnVsbCxcblx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXBkYXRlZFVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCBzaWduSW5FbWFpbE9UUEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVtYWlsOiB6LnN0cmluZyh7fSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIGFkZHJlc3MgdG8gc2lnbiBpblwiIH0pLFxuXHRvdHA6IHouc3RyaW5nKCkubWV0YSh7XG5cdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0ZGVzY3JpcHRpb246IFwiT1RQIHNlbnQgdG8gdGhlIGVtYWlsXCJcblx0fSlcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvc2lnbi1pbi9lbWFpbC1vdHBgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkuc2lnbkluRW1haWxPVFBgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LnNpZ25Jbi5lbWFpbE90cGBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL2VtYWlsLW90cCNhcGktbWV0aG9kLXNpZ24taW4tZW1haWwtb3RwKVxuKi9cbmNvbnN0IHNpZ25JbkVtYWlsT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL2VtYWlsLW90cFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHNpZ25JbkVtYWlsT1RQQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNpZ25JbldpdGhFbWFpbE9UUFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgT1RQXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiB0b2tlbiBmb3IgdGhlIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInRva2VuXCIsIFwidXNlclwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWwudG9Mb3dlckNhc2UoKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uVmFsdWUgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGBzaWduLWluLW90cC0ke2VtYWlsfWApO1xuXHRpZiAoIXZlcmlmaWNhdGlvblZhbHVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfT1RQIH0pO1xuXHRpZiAodmVyaWZpY2F0aW9uVmFsdWUuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuT1RQX0VYUElSRUQgfSk7XG5cdGNvbnN0IFtvdHBWYWx1ZSwgYXR0ZW1wdHNdID0gc3BsaXRBdExhc3RDb2xvbih2ZXJpZmljYXRpb25WYWx1ZS52YWx1ZSk7XG5cdGNvbnN0IGFsbG93ZWRBdHRlbXB0cyA9IG9wdHM/LmFsbG93ZWRBdHRlbXB0cyB8fCAzO1xuXHRpZiAoYXR0ZW1wdHMgJiYgcGFyc2VJbnQoYXR0ZW1wdHMpID49IGFsbG93ZWRBdHRlbXB0cykge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb25WYWx1ZS5pZCk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuVE9PX01BTllfQVRURU1QVFMgfSk7XG5cdH1cblx0aWYgKCFhd2FpdCB2ZXJpZnlTdG9yZWRPVFAoY3R4LCBvcHRzLCBvdHBWYWx1ZSwgY3R4LmJvZHkub3RwKSkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb25WYWx1ZS5pZCwgeyB2YWx1ZTogYCR7b3RwVmFsdWV9OiR7cGFyc2VJbnQoYXR0ZW1wdHMgfHwgXCIwXCIpICsgMX1gIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9PVFAgfSk7XG5cdH1cblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuXHRpZiAoIXVzZXIpIHtcblx0XHRpZiAob3B0cy5kaXNhYmxlU2lnblVwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9OT1RfRk9VTkQgfSk7XG5cdFx0Y29uc3QgbmV3VXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVVc2VyKHtcblx0XHRcdGVtYWlsLFxuXHRcdFx0ZW1haWxWZXJpZmllZDogdHJ1ZSxcblx0XHRcdG5hbWU6IFwiXCJcblx0XHR9KTtcblx0XHRjb25zdCBzZXNzaW9uJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihuZXdVc2VyLmlkKTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogc2Vzc2lvbiQxLFxuXHRcdFx0dXNlcjogbmV3VXNlclxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHR0b2tlbjogc2Vzc2lvbiQxLnRva2VuLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIG5ld1VzZXIpXG5cdFx0fSk7XG5cdH1cblx0aWYgKCF1c2VyLnVzZXIuZW1haWxWZXJpZmllZCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIodXNlci51c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlcjogdXNlci51c2VyXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1c2VyLnVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldEVtYWlsT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgZW1haWw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIGFkZHJlc3MgdG8gc2VuZCB0aGUgT1RQXCIgfSkgfSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9lbWFpbC1vdHAvcmVxdWVzdC1wYXNzd29yZC1yZXNldGBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5yZXF1ZXN0UGFzc3dvcmRSZXNldEVtYWlsT1RQYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5lbWFpbE90cC5yZXF1ZXN0UGFzc3dvcmRSZXNldGBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly93d3cuYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9lbWFpbC1vdHAjcmVzZXQtcGFzc3dvcmQtd2l0aC1vdHApXG4qL1xuY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXRFbWFpbE9UUCA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZW1haWwtb3RwL3JlcXVlc3QtcGFzc3dvcmQtcmVzZXRcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiByZXF1ZXN0UGFzc3dvcmRSZXNldEVtYWlsT1RQQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInJlcXVlc3RQYXNzd29yZFJlc2V0V2l0aEVtYWlsT1RQXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiUmVxdWVzdCBwYXNzd29yZCByZXNldCB3aXRoIGVtYWlsIGFuZCBPVFBcIixcblx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN1Y2Nlc3M6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIE9UUCB3YXMgc2VudCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHR9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBlbWFpbCA9IGN0eC5ib2R5LmVtYWlsO1xuXHRjb25zdCBvdHAgPSBvcHRzLmdlbmVyYXRlT1RQKHtcblx0XHRlbWFpbCxcblx0XHR0eXBlOiBcImZvcmdldC1wYXNzd29yZFwiXG5cdH0sIGN0eCkgfHwgZGVmYXVsdE9UUEdlbmVyYXRvcihvcHRzKTtcblx0Y29uc3Qgc3RvcmVkT1RQID0gYXdhaXQgc3RvcmVPVFAoY3R4LCBvcHRzLCBvdHApO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdHZhbHVlOiBgJHtzdG9yZWRPVFB9OjBgLFxuXHRcdGlkZW50aWZpZXI6IGBmb3JnZXQtcGFzc3dvcmQtb3RwLSR7ZW1haWx9YCxcblx0XHRleHBpcmVzQXQ6IGdldERhdGUob3B0cy5leHBpcmVzSW4sIFwic2VjXCIpXG5cdH0pO1xuXHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvbkJ5SWRlbnRpZmllcihgZm9yZ2V0LXBhc3N3b3JkLW90cC0ke2VtYWlsfWApO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG5cdH1cblx0YXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChvcHRzLnNlbmRWZXJpZmljYXRpb25PVFAoe1xuXHRcdGVtYWlsLFxuXHRcdG90cCxcblx0XHR0eXBlOiBcImZvcmdldC1wYXNzd29yZFwiXG5cdH0sIGN0eCkpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5jb25zdCBmb3JnZXRQYXNzd29yZEVtYWlsT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgZW1haWw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIGFkZHJlc3MgdG8gc2VuZCB0aGUgT1RQXCIgfSkgfSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9mb3JnZXQtcGFzc3dvcmQvZW1haWwtb3RwYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLmZvcmdldFBhc3N3b3JkRW1haWxPVFBgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmZvcmdldFBhc3N3b3JkLmVtYWlsT3RwYFxuKlxuKiBAZGVwcmVjYXRlZCBVc2UgYC9lbWFpbC1vdHAvcmVxdWVzdC1wYXNzd29yZC1yZXNldGAgaW5zdGVhZC5cbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly93d3cuYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9lbWFpbC1vdHAjcmVzZXQtcGFzc3dvcmQtd2l0aC1vdHApXG4qL1xuY29uc3QgZm9yZ2V0UGFzc3dvcmRFbWFpbE9UUCA9IChvcHRzKSA9PiB7XG5cdGNvbnN0IHdhcm5EZXByZWNhdGlvbiA9IGRlcHJlY2F0ZSgoKSA9PiB7fSwgXCJUaGUgXFxcIi9mb3JnZXQtcGFzc3dvcmQvZW1haWwtb3RwXFxcIiBlbmRwb2ludCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFxcXCIvZW1haWwtb3RwL3JlcXVlc3QtcGFzc3dvcmQtcmVzZXRcXFwiIGluc3RlYWQuIFRoaXMgZW5kcG9pbnQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uXCIpO1xuXHRyZXR1cm4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2ZvcmdldC1wYXNzd29yZC9lbWFpbC1vdHBcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogZm9yZ2V0UGFzc3dvcmRFbWFpbE9UUEJvZHlTY2hlbWEsXG5cdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0b3BlcmF0aW9uSWQ6IFwiZm9yZ2V0UGFzc3dvcmRXaXRoRW1haWxPVFBcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkRlcHJlY2F0ZWQ6IFVzZSAvZW1haWwtb3RwL3JlcXVlc3QtcGFzc3dvcmQtcmVzZXQgaW5zdGVhZC5cIixcblx0XHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBzdWNjZXNzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgT1RQIHdhcyBzZW50IHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9IH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdHdhcm5EZXByZWNhdGlvbigpO1xuXHRcdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWw7XG5cdFx0Y29uc3Qgb3RwID0gb3B0cy5nZW5lcmF0ZU9UUCh7XG5cdFx0XHRlbWFpbCxcblx0XHRcdHR5cGU6IFwiZm9yZ2V0LXBhc3N3b3JkXCJcblx0XHR9LCBjdHgpIHx8IGRlZmF1bHRPVFBHZW5lcmF0b3Iob3B0cyk7XG5cdFx0Y29uc3Qgc3RvcmVkT1RQID0gYXdhaXQgc3RvcmVPVFAoY3R4LCBvcHRzLCBvdHApO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHR2YWx1ZTogYCR7c3RvcmVkT1RQfTowYCxcblx0XHRcdGlkZW50aWZpZXI6IGBmb3JnZXQtcGFzc3dvcmQtb3RwLSR7ZW1haWx9YCxcblx0XHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShvcHRzLmV4cGlyZXNJbiwgXCJzZWNcIilcblx0XHR9KTtcblx0XHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpKSB7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uQnlJZGVudGlmaWVyKGBmb3JnZXQtcGFzc3dvcmQtb3RwLSR7ZW1haWx9YCk7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuXHRcdH1cblx0XHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KG9wdHMuc2VuZFZlcmlmaWNhdGlvbk9UUCh7XG5cdFx0XHRlbWFpbCxcblx0XHRcdG90cCxcblx0XHRcdHR5cGU6IFwiZm9yZ2V0LXBhc3N3b3JkXCJcblx0XHR9LCBjdHgpKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuXHR9KTtcbn07XG5jb25zdCByZXNldFBhc3N3b3JkRW1haWxPVFBCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRlbWFpbDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRW1haWwgYWRkcmVzcyB0byByZXNldCB0aGUgcGFzc3dvcmRcIiB9KSxcblx0b3RwOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJPVFAgc2VudCB0byB0aGUgZW1haWxcIiB9KSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk5ldyBwYXNzd29yZFwiIH0pXG59KTtcbi8qKlxuKiAjIyMgRW5kcG9pbnRcbipcbiogUE9TVCBgL2VtYWlsLW90cC9yZXNldC1wYXNzd29yZGBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5yZXNldFBhc3N3b3JkRW1haWxPVFBgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LmVtYWlsT3RwLnJlc2V0UGFzc3dvcmRgXG4qXG4qIEBzZWUgW1JlYWQgb3VyIGRvY3MgdG8gbGVhcm4gbW9yZS5dKGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9lbWFpbC1vdHAjYXBpLW1ldGhvZC1lbWFpbC1vdHAtcmVzZXQtcGFzc3dvcmQpXG4qL1xuY29uc3QgcmVzZXRQYXNzd29yZEVtYWlsT1RQID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9lbWFpbC1vdHAvcmVzZXQtcGFzc3dvcmRcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiByZXNldFBhc3N3b3JkRW1haWxPVFBCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwicmVzZXRQYXNzd29yZFdpdGhFbWFpbE9UUFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJlc2V0IHBhc3N3b3JkIHdpdGggZW1haWwgYW5kIE9UUFwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdWNjZXNzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IGVtYWlsID0gY3R4LmJvZHkuZW1haWw7XG5cdGNvbnN0IHZlcmlmaWNhdGlvblZhbHVlID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShgZm9yZ2V0LXBhc3N3b3JkLW90cC0ke2VtYWlsfWApO1xuXHRpZiAoIXZlcmlmaWNhdGlvblZhbHVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfT1RQIH0pO1xuXHRpZiAodmVyaWZpY2F0aW9uVmFsdWUuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uVmFsdWUuaWQpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuT1RQX0VYUElSRUQgfSk7XG5cdH1cblx0Y29uc3QgW290cFZhbHVlLCBhdHRlbXB0c10gPSBzcGxpdEF0TGFzdENvbG9uKHZlcmlmaWNhdGlvblZhbHVlLnZhbHVlKTtcblx0Y29uc3QgYWxsb3dlZEF0dGVtcHRzID0gb3B0cz8uYWxsb3dlZEF0dGVtcHRzIHx8IDM7XG5cdGlmIChhdHRlbXB0cyAmJiBwYXJzZUludChhdHRlbXB0cykgPj0gYWxsb3dlZEF0dGVtcHRzKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5UT09fTUFOWV9BVFRFTVBUUyB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IHZlcmlmeVN0b3JlZE9UUChjdHgsIG9wdHMsIG90cFZhbHVlLCBjdHguYm9keS5vdHApKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkLCB7IHZhbHVlOiBgJHtvdHBWYWx1ZX06JHtwYXJzZUludChhdHRlbXB0cyB8fCBcIjBcIikgKyAxfWAgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX09UUCB9KTtcblx0fVxuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uVmFsdWUuaWQpO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwgeyBpbmNsdWRlQWNjb3VudHM6IHRydWUgfSk7XG5cdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfTk9UX0ZPVU5EIH0pO1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKGN0eC5ib2R5LnBhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHRjb25zdCBtYXhQYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5tYXhQYXNzd29yZExlbmd0aDtcblx0aWYgKGN0eC5ib2R5LnBhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdGNvbnN0IHBhc3N3b3JkSGFzaCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2goY3R4LmJvZHkucGFzc3dvcmQpO1xuXHRpZiAoIXVzZXIuYWNjb3VudHM/LmZpbmQoKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpKSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0dXNlcklkOiB1c2VyLnVzZXIuaWQsXG5cdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0YWNjb3VudElkOiB1c2VyLnVzZXIuaWQsXG5cdFx0cGFzc3dvcmQ6IHBhc3N3b3JkSGFzaFxuXHR9KTtcblx0ZWxzZSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlUGFzc3dvcmQodXNlci51c2VyLmlkLCBwYXNzd29yZEhhc2gpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5vblBhc3N3b3JkUmVzZXQpIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5vblBhc3N3b3JkUmVzZXQoeyB1c2VyOiB1c2VyLnVzZXIgfSwgY3R4LnJlcXVlc3QpO1xuXHRpZiAoIXVzZXIudXNlci5lbWFpbFZlcmlmaWVkKSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcih1c2VyLnVzZXIuaWQsIHsgZW1haWxWZXJpZmllZDogdHJ1ZSB9KTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmV2b2tlU2Vzc2lvbnNPblBhc3N3b3JkUmVzZXQpIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyh1c2VyLnVzZXIuaWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xufSk7XG5jb25zdCBkZWZhdWx0T1RQR2VuZXJhdG9yID0gKG9wdGlvbnMpID0+IGdlbmVyYXRlUmFuZG9tU3RyaW5nKG9wdGlvbnMub3RwTGVuZ3RoID8/IDYsIFwiMC05XCIpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEVSUk9SX0NPREVTLCBjaGVja1ZlcmlmaWNhdGlvbk9UUCwgY3JlYXRlVmVyaWZpY2F0aW9uT1RQLCBmb3JnZXRQYXNzd29yZEVtYWlsT1RQLCBnZXRWZXJpZmljYXRpb25PVFAsIHJlcXVlc3RQYXNzd29yZFJlc2V0RW1haWxPVFAsIHJlc2V0UGFzc3dvcmRFbWFpbE9UUCwgc2VuZFZlcmlmaWNhdGlvbk9UUCwgc2lnbkluRW1haWxPVFAsIHZlcmlmeUVtYWlsT1RQIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3V0ZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/email-otp/routes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/email-otp/utils.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/utils.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultKeyHasher: () => (/* binding */ defaultKeyHasher),\n/* harmony export */   splitAtLastColon: () => (/* binding */ splitAtLastColon)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n//#region src/plugins/email-otp/utils.ts\nconst defaultKeyHasher = async (otp) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(otp));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\nfunction splitAtLastColon(input) {\n\tconst idx = input.lastIndexOf(\":\");\n\tif (idx === -1) return [input, \"\"];\n\treturn [input.slice(0, idx), input.slice(idx + 1)];\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDtBQUNDOztBQUV0RDtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFVO0FBQzlCLFFBQVEsZ0VBQVMsZ0NBQWdDLGdCQUFnQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEM7QUFDOUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxlbWFpbC1vdHBcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZW1haWwtb3RwL3V0aWxzLnRzXG5jb25zdCBkZWZhdWx0S2V5SGFzaGVyID0gYXN5bmMgKG90cCkgPT4ge1xuXHRjb25zdCBoYXNoID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShvdHApKTtcblx0cmV0dXJuIGJhc2U2NFVybC5lbmNvZGUobmV3IFVpbnQ4QXJyYXkoaGFzaCksIHsgcGFkZGluZzogZmFsc2UgfSk7XG59O1xuZnVuY3Rpb24gc3BsaXRBdExhc3RDb2xvbihpbnB1dCkge1xuXHRjb25zdCBpZHggPSBpbnB1dC5sYXN0SW5kZXhPZihcIjpcIik7XG5cdGlmIChpZHggPT09IC0xKSByZXR1cm4gW2lucHV0LCBcIlwiXTtcblx0cmV0dXJuIFtpbnB1dC5zbGljZSgwLCBpZHgpLCBpbnB1dC5zbGljZShpZHggKyAxKV07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmYXVsdEtleUhhc2hlciwgc3BsaXRBdExhc3RDb2xvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/email-otp/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   genericOAuthClient: () => (/* binding */ genericOAuthClient)\n/* harmony export */ });\n//#region src/plugins/generic-oauth/client.ts\nconst genericOAuthClient = () => {\n\treturn {\n\t\tid: \"generic-oauth-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxnZW5lcmljLW9hdXRoXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9nZW5lcmljLW9hdXRoL2NsaWVudC50c1xuY29uc3QgZ2VuZXJpY09BdXRoQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImdlbmVyaWMtb2F1dGgtY2xpZW50XCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZW5lcmljT0F1dGhDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/error-codes.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/error-codes.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GENERIC_OAUTH_ERROR_CODES: () => (/* binding */ GENERIC_OAUTH_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/generic-oauth/error-codes.ts\nconst GENERIC_OAUTH_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tINVALID_OAUTH_CONFIGURATION: \"Invalid OAuth configuration\",\n\tTOKEN_URL_NOT_FOUND: \"Invalid OAuth configuration. Token URL not found.\",\n\tPROVIDER_CONFIG_NOT_FOUND: \"No config found for provider\",\n\tPROVIDER_ID_REQUIRED: \"Provider ID is required\",\n\tINVALID_OAUTH_CONFIG: \"Invalid OAuth configuration.\",\n\tSESSION_REQUIRED: \"Session is required\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvZXJyb3ItY29kZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEOztBQUUzRDtBQUNBLGtDQUFrQyx5RUFBZ0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGdlbmVyaWMtb2F1dGhcXGVycm9yLWNvZGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9nZW5lcmljLW9hdXRoL2Vycm9yLWNvZGVzLnRzXG5jb25zdCBHRU5FUklDX09BVVRIX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdElOVkFMSURfT0FVVEhfQ09ORklHVVJBVElPTjogXCJJbnZhbGlkIE9BdXRoIGNvbmZpZ3VyYXRpb25cIixcblx0VE9LRU5fVVJMX05PVF9GT1VORDogXCJJbnZhbGlkIE9BdXRoIGNvbmZpZ3VyYXRpb24uIFRva2VuIFVSTCBub3QgZm91bmQuXCIsXG5cdFBST1ZJREVSX0NPTkZJR19OT1RfRk9VTkQ6IFwiTm8gY29uZmlnIGZvdW5kIGZvciBwcm92aWRlclwiLFxuXHRQUk9WSURFUl9JRF9SRVFVSVJFRDogXCJQcm92aWRlciBJRCBpcyByZXF1aXJlZFwiLFxuXHRJTlZBTElEX09BVVRIX0NPTkZJRzogXCJJbnZhbGlkIE9BdXRoIGNvbmZpZ3VyYXRpb24uXCIsXG5cdFNFU1NJT05fUkVRVUlSRUQ6IFwiU2Vzc2lvbiBpcyByZXF1aXJlZFwiXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBHRU5FUklDX09BVVRIX0VSUk9SX0NPREVTIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci1jb2Rlcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/index.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/index.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth0: () => (/* reexport safe */ _providers_auth0_mjs__WEBPACK_IMPORTED_MODULE_2__.auth0),\n/* harmony export */   genericOAuth: () => (/* binding */ genericOAuth),\n/* harmony export */   gumroad: () => (/* reexport safe */ _providers_gumroad_mjs__WEBPACK_IMPORTED_MODULE_3__.gumroad),\n/* harmony export */   hubspot: () => (/* reexport safe */ _providers_hubspot_mjs__WEBPACK_IMPORTED_MODULE_4__.hubspot),\n/* harmony export */   keycloak: () => (/* reexport safe */ _providers_keycloak_mjs__WEBPACK_IMPORTED_MODULE_5__.keycloak),\n/* harmony export */   line: () => (/* reexport safe */ _providers_line_mjs__WEBPACK_IMPORTED_MODULE_6__.line),\n/* harmony export */   microsoftEntraId: () => (/* reexport safe */ _providers_microsoft_entra_id_mjs__WEBPACK_IMPORTED_MODULE_7__.microsoftEntraId),\n/* harmony export */   okta: () => (/* reexport safe */ _providers_okta_mjs__WEBPACK_IMPORTED_MODULE_8__.okta),\n/* harmony export */   patreon: () => (/* reexport safe */ _providers_patreon_mjs__WEBPACK_IMPORTED_MODULE_9__.patreon),\n/* harmony export */   slack: () => (/* reexport safe */ _providers_slack_mjs__WEBPACK_IMPORTED_MODULE_10__.slack)\n/* harmony export */ });\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/error-codes.mjs\");\n/* harmony import */ var _routes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/routes.mjs\");\n/* harmony import */ var _providers_auth0_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./providers/auth0.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs\");\n/* harmony import */ var _providers_gumroad_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./providers/gumroad.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs\");\n/* harmony import */ var _providers_hubspot_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./providers/hubspot.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs\");\n/* harmony import */ var _providers_keycloak_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./providers/keycloak.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs\");\n/* harmony import */ var _providers_line_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./providers/line.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs\");\n/* harmony import */ var _providers_microsoft_entra_id_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./providers/microsoft-entra-id.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs\");\n/* harmony import */ var _providers_okta_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./providers/okta.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs\");\n/* harmony import */ var _providers_patreon_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./providers/patreon.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs\");\n/* harmony import */ var _providers_slack_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./providers/slack.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs\");\n/* harmony import */ var _providers_index_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./providers/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/generic-oauth/index.ts\n/**\n* A generic OAuth plugin that can be used to add OAuth support to any provider\n*/\nconst genericOAuth = (options) => {\n\treturn {\n\t\tid: \"generic-oauth\",\n\t\tinit: (ctx) => {\n\t\t\treturn { context: { socialProviders: options.config.map((c) => {\n\t\t\t\tlet finalUserInfoUrl = c.userInfoUrl;\n\t\t\t\treturn {\n\t\t\t\t\tid: c.providerId,\n\t\t\t\t\tname: c.providerId,\n\t\t\t\t\tasync createAuthorizationURL(data) {\n\t\t\t\t\t\tlet finalAuthUrl = c.authorizationUrl;\n\t\t\t\t\t\tif (!finalAuthUrl && c.discoveryUrl) {\n\t\t\t\t\t\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_14__.betterFetch)(c.discoveryUrl, {\n\t\t\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\t\t\theaders: c.discoveryHeaders\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (discovery.data) {\n\t\t\t\t\t\t\t\tfinalAuthUrl = discovery.data.authorization_endpoint;\n\t\t\t\t\t\t\t\tfinalUserInfoUrl = finalUserInfoUrl ?? discovery.data.userinfo_endpoint;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!finalAuthUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_0__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIGURATION });\n\t\t\t\t\t\treturn (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationURL)({\n\t\t\t\t\t\t\tid: c.providerId,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tclientId: c.clientId,\n\t\t\t\t\t\t\t\tclientSecret: c.clientSecret,\n\t\t\t\t\t\t\t\tredirectURI: c.redirectURI\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tauthorizationEndpoint: finalAuthUrl,\n\t\t\t\t\t\t\tstate: data.state,\n\t\t\t\t\t\t\tcodeVerifier: c.pkce ? data.codeVerifier : void 0,\n\t\t\t\t\t\t\tscopes: c.scopes || [],\n\t\t\t\t\t\t\tredirectURI: `${ctx.baseURL}/oauth2/callback/${c.providerId}`\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tasync validateAuthorizationCode(data) {\n\t\t\t\t\t\tif (c.getToken) return c.getToken(data);\n\t\t\t\t\t\tlet finalTokenUrl = c.tokenUrl;\n\t\t\t\t\t\tif (c.discoveryUrl) {\n\t\t\t\t\t\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_14__.betterFetch)(c.discoveryUrl, {\n\t\t\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\t\t\theaders: c.discoveryHeaders\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (discovery.data) {\n\t\t\t\t\t\t\t\tfinalTokenUrl = discovery.data.token_endpoint;\n\t\t\t\t\t\t\t\tfinalUserInfoUrl = discovery.data.userinfo_endpoint;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!finalTokenUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_0__.GENERIC_OAUTH_ERROR_CODES.TOKEN_URL_NOT_FOUND });\n\t\t\t\t\t\treturn (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateAuthorizationCode)({\n\t\t\t\t\t\t\theaders: c.authorizationHeaders,\n\t\t\t\t\t\t\tcode: data.code,\n\t\t\t\t\t\t\tcodeVerifier: data.codeVerifier,\n\t\t\t\t\t\t\tredirectURI: data.redirectURI,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tclientId: c.clientId,\n\t\t\t\t\t\t\t\tclientSecret: c.clientSecret,\n\t\t\t\t\t\t\t\tredirectURI: c.redirectURI\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttokenEndpoint: finalTokenUrl,\n\t\t\t\t\t\t\tauthentication: c.authentication\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tasync refreshAccessToken(refreshToken) {\n\t\t\t\t\t\tlet finalTokenUrl = c.tokenUrl;\n\t\t\t\t\t\tif (c.discoveryUrl) {\n\t\t\t\t\t\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_14__.betterFetch)(c.discoveryUrl, {\n\t\t\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\t\t\theaders: c.discoveryHeaders\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (discovery.data) finalTokenUrl = discovery.data.token_endpoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!finalTokenUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_0__.GENERIC_OAUTH_ERROR_CODES.TOKEN_URL_NOT_FOUND });\n\t\t\t\t\t\treturn (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.refreshAccessToken)({\n\t\t\t\t\t\t\trefreshToken,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tclientId: c.clientId,\n\t\t\t\t\t\t\t\tclientSecret: c.clientSecret\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tauthentication: c.authentication,\n\t\t\t\t\t\t\ttokenEndpoint: finalTokenUrl\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tasync getUserInfo(tokens) {\n\t\t\t\t\t\tconst userInfo = c.getUserInfo ? await c.getUserInfo(tokens) : await (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_1__.getUserInfo)(tokens, finalUserInfoUrl);\n\t\t\t\t\t\tif (!userInfo) return null;\n\t\t\t\t\t\tconst userMap = await c.mapProfileToUser?.(userInfo);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\tid: userInfo?.id,\n\t\t\t\t\t\t\t\temail: userInfo?.email,\n\t\t\t\t\t\t\t\temailVerified: userInfo?.emailVerified,\n\t\t\t\t\t\t\t\timage: userInfo?.image,\n\t\t\t\t\t\t\t\tname: userInfo?.name,\n\t\t\t\t\t\t\t\t...userMap\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata: userInfo\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\toptions: { overrideUserInfoOnSignIn: c.overrideUserInfo }\n\t\t\t\t};\n\t\t\t}).concat(ctx.socialProviders) } };\n\t\t},\n\t\tendpoints: {\n\t\t\tsignInWithOAuth2: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_1__.signInWithOAuth2)(options),\n\t\t\toAuth2Callback: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuth2Callback)(options),\n\t\t\toAuth2LinkAccount: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_1__.oAuth2LinkAccount)(options)\n\t\t},\n\t\toptions,\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_0__.GENERIC_OAUTH_ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDa0M7QUFDbEQ7QUFDSTtBQUNBO0FBQ0U7QUFDUjtBQUMwQjtBQUMxQjtBQUNNO0FBQ0o7QUFDZjtBQUNrRjtBQUMxRTtBQUNXOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFXO0FBQzFDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxrREFBUSxrQkFBa0IsU0FBUyx1RUFBeUIsOEJBQThCO0FBQzdILGFBQWEsaUZBQXNCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWSxtQkFBbUIsYUFBYTtBQUNuRSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFXO0FBQzFDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxrREFBUSxrQkFBa0IsU0FBUyx1RUFBeUIsc0JBQXNCO0FBQ3RILGFBQWEsb0ZBQXlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlFQUFXO0FBQzFDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLG9DQUFvQyxrREFBUSxrQkFBa0IsU0FBUyx1RUFBeUIsc0JBQXNCO0FBQ3RILGFBQWEsNkVBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0EsMkVBQTJFLHdEQUFXO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0JBQWdCO0FBQ2hCO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHFCQUFxQiw2REFBZ0I7QUFDckMsbUJBQW1CLDJEQUFjO0FBQ2pDLHNCQUFzQiw4REFBaUI7QUFDdkMsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCLHVFQUF5QjtBQUN6QztBQUNBOztBQUVBO0FBQ3lHO0FBQ3pHIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZ2VuZXJpYy1vYXV0aFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IGdldFVzZXJJbmZvLCBvQXV0aDJDYWxsYmFjaywgb0F1dGgyTGlua0FjY291bnQsIHNpZ25JbldpdGhPQXV0aDIgfSBmcm9tIFwiLi9yb3V0ZXMubWpzXCI7XG5pbXBvcnQgeyBhdXRoMCB9IGZyb20gXCIuL3Byb3ZpZGVycy9hdXRoMC5tanNcIjtcbmltcG9ydCB7IGd1bXJvYWQgfSBmcm9tIFwiLi9wcm92aWRlcnMvZ3Vtcm9hZC5tanNcIjtcbmltcG9ydCB7IGh1YnNwb3QgfSBmcm9tIFwiLi9wcm92aWRlcnMvaHVic3BvdC5tanNcIjtcbmltcG9ydCB7IGtleWNsb2FrIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2tleWNsb2FrLm1qc1wiO1xuaW1wb3J0IHsgbGluZSB9IGZyb20gXCIuL3Byb3ZpZGVycy9saW5lLm1qc1wiO1xuaW1wb3J0IHsgbWljcm9zb2Z0RW50cmFJZCB9IGZyb20gXCIuL3Byb3ZpZGVycy9taWNyb3NvZnQtZW50cmEtaWQubWpzXCI7XG5pbXBvcnQgeyBva3RhIH0gZnJvbSBcIi4vcHJvdmlkZXJzL29rdGEubWpzXCI7XG5pbXBvcnQgeyBwYXRyZW9uIH0gZnJvbSBcIi4vcHJvdmlkZXJzL3BhdHJlb24ubWpzXCI7XG5pbXBvcnQgeyBzbGFjayB9IGZyb20gXCIuL3Byb3ZpZGVycy9zbGFjay5tanNcIjtcbmltcG9ydCBcIi4vcHJvdmlkZXJzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aG9yaXphdGlvblVSTCwgcmVmcmVzaEFjY2Vzc1Rva2VuLCB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL29hdXRoMlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSBcIkBiZXR0ZXItZmV0Y2gvZmV0Y2hcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvaW5kZXgudHNcbi8qKlxuKiBBIGdlbmVyaWMgT0F1dGggcGx1Z2luIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIE9BdXRoIHN1cHBvcnQgdG8gYW55IHByb3ZpZGVyXG4qL1xuY29uc3QgZ2VuZXJpY09BdXRoID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJnZW5lcmljLW9hdXRoXCIsXG5cdFx0aW5pdDogKGN0eCkgPT4ge1xuXHRcdFx0cmV0dXJuIHsgY29udGV4dDogeyBzb2NpYWxQcm92aWRlcnM6IG9wdGlvbnMuY29uZmlnLm1hcCgoYykgPT4ge1xuXHRcdFx0XHRsZXQgZmluYWxVc2VySW5mb1VybCA9IGMudXNlckluZm9Vcmw7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0aWQ6IGMucHJvdmlkZXJJZCxcblx0XHRcdFx0XHRuYW1lOiBjLnByb3ZpZGVySWQsXG5cdFx0XHRcdFx0YXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTChkYXRhKSB7XG5cdFx0XHRcdFx0XHRsZXQgZmluYWxBdXRoVXJsID0gYy5hdXRob3JpemF0aW9uVXJsO1xuXHRcdFx0XHRcdFx0aWYgKCFmaW5hbEF1dGhVcmwgJiYgYy5kaXNjb3ZlcnlVcmwpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZGlzY292ZXJ5ID0gYXdhaXQgYmV0dGVyRmV0Y2goYy5kaXNjb3ZlcnlVcmwsIHtcblx0XHRcdFx0XHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdFx0XHRcdFx0aGVhZGVyczogYy5kaXNjb3ZlcnlIZWFkZXJzXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRpZiAoZGlzY292ZXJ5LmRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRmaW5hbEF1dGhVcmwgPSBkaXNjb3ZlcnkuZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50O1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsVXNlckluZm9VcmwgPSBmaW5hbFVzZXJJbmZvVXJsID8/IGRpc2NvdmVyeS5kYXRhLnVzZXJpbmZvX2VuZHBvaW50O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIWZpbmFsQXV0aFVybCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBHRU5FUklDX09BVVRIX0VSUk9SX0NPREVTLklOVkFMSURfT0FVVEhfQ09ORklHVVJBVElPTiB9KTtcblx0XHRcdFx0XHRcdHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRcdFx0XHRcdFx0aWQ6IGMucHJvdmlkZXJJZCxcblx0XHRcdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiBjLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudFNlY3JldDogYy5jbGllbnRTZWNyZXQsXG5cdFx0XHRcdFx0XHRcdFx0cmVkaXJlY3RVUkk6IGMucmVkaXJlY3RVUklcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBmaW5hbEF1dGhVcmwsXG5cdFx0XHRcdFx0XHRcdHN0YXRlOiBkYXRhLnN0YXRlLFxuXHRcdFx0XHRcdFx0XHRjb2RlVmVyaWZpZXI6IGMucGtjZSA/IGRhdGEuY29kZVZlcmlmaWVyIDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0XHRzY29wZXM6IGMuc2NvcGVzIHx8IFtdLFxuXHRcdFx0XHRcdFx0XHRyZWRpcmVjdFVSSTogYCR7Y3R4LmJhc2VVUkx9L29hdXRoMi9jYWxsYmFjay8ke2MucHJvdmlkZXJJZH1gXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFzeW5jIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoZGF0YSkge1xuXHRcdFx0XHRcdFx0aWYgKGMuZ2V0VG9rZW4pIHJldHVybiBjLmdldFRva2VuKGRhdGEpO1xuXHRcdFx0XHRcdFx0bGV0IGZpbmFsVG9rZW5VcmwgPSBjLnRva2VuVXJsO1xuXHRcdFx0XHRcdFx0aWYgKGMuZGlzY292ZXJ5VXJsKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRpc2NvdmVyeSA9IGF3YWl0IGJldHRlckZldGNoKGMuZGlzY292ZXJ5VXJsLCB7XG5cdFx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHRcdGhlYWRlcnM6IGMuZGlzY292ZXJ5SGVhZGVyc1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0aWYgKGRpc2NvdmVyeS5kYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmluYWxUb2tlblVybCA9IGRpc2NvdmVyeS5kYXRhLnRva2VuX2VuZHBvaW50O1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsVXNlckluZm9VcmwgPSBkaXNjb3ZlcnkuZGF0YS51c2VyaW5mb19lbmRwb2ludDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFmaW5hbFRva2VuVXJsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMuVE9LRU5fVVJMX05PVF9GT1VORCB9KTtcblx0XHRcdFx0XHRcdHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogYy5hdXRob3JpemF0aW9uSGVhZGVycyxcblx0XHRcdFx0XHRcdFx0Y29kZTogZGF0YS5jb2RlLFxuXHRcdFx0XHRcdFx0XHRjb2RlVmVyaWZpZXI6IGRhdGEuY29kZVZlcmlmaWVyLFxuXHRcdFx0XHRcdFx0XHRyZWRpcmVjdFVSSTogZGF0YS5yZWRpcmVjdFVSSSxcblx0XHRcdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiBjLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudFNlY3JldDogYy5jbGllbnRTZWNyZXQsXG5cdFx0XHRcdFx0XHRcdFx0cmVkaXJlY3RVUkk6IGMucmVkaXJlY3RVUklcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dG9rZW5FbmRwb2ludDogZmluYWxUb2tlblVybCxcblx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRpb246IGMuYXV0aGVudGljYXRpb25cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YXN5bmMgcmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hUb2tlbikge1xuXHRcdFx0XHRcdFx0bGV0IGZpbmFsVG9rZW5VcmwgPSBjLnRva2VuVXJsO1xuXHRcdFx0XHRcdFx0aWYgKGMuZGlzY292ZXJ5VXJsKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRpc2NvdmVyeSA9IGF3YWl0IGJldHRlckZldGNoKGMuZGlzY292ZXJ5VXJsLCB7XG5cdFx0XHRcdFx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRcdFx0XHRcdGhlYWRlcnM6IGMuZGlzY292ZXJ5SGVhZGVyc1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0aWYgKGRpc2NvdmVyeS5kYXRhKSBmaW5hbFRva2VuVXJsID0gZGlzY292ZXJ5LmRhdGEudG9rZW5fZW5kcG9pbnQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIWZpbmFsVG9rZW5VcmwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogR0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5UT0tFTl9VUkxfTk9UX0ZPVU5EIH0pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG5cdFx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiBjLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudFNlY3JldDogYy5jbGllbnRTZWNyZXRcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRpb246IGMuYXV0aGVudGljYXRpb24sXG5cdFx0XHRcdFx0XHRcdHRva2VuRW5kcG9pbnQ6IGZpbmFsVG9rZW5Vcmxcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YXN5bmMgZ2V0VXNlckluZm8odG9rZW5zKSB7XG5cdFx0XHRcdFx0XHRjb25zdCB1c2VySW5mbyA9IGMuZ2V0VXNlckluZm8gPyBhd2FpdCBjLmdldFVzZXJJbmZvKHRva2VucykgOiBhd2FpdCBnZXRVc2VySW5mbyh0b2tlbnMsIGZpbmFsVXNlckluZm9VcmwpO1xuXHRcdFx0XHRcdFx0aWYgKCF1c2VySW5mbykgcmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0XHRjb25zdCB1c2VyTWFwID0gYXdhaXQgYy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckluZm8pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHRcdGlkOiB1c2VySW5mbz8uaWQsXG5cdFx0XHRcdFx0XHRcdFx0ZW1haWw6IHVzZXJJbmZvPy5lbWFpbCxcblx0XHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mbz8uZW1haWxWZXJpZmllZCxcblx0XHRcdFx0XHRcdFx0XHRpbWFnZTogdXNlckluZm8/LmltYWdlLFxuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHVzZXJJbmZvPy5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdC4uLnVzZXJNYXBcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZGF0YTogdXNlckluZm9cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvcHRpb25zOiB7IG92ZXJyaWRlVXNlckluZm9PblNpZ25JbjogYy5vdmVycmlkZVVzZXJJbmZvIH1cblx0XHRcdFx0fTtcblx0XHRcdH0pLmNvbmNhdChjdHguc29jaWFsUHJvdmlkZXJzKSB9IH07XG5cdFx0fSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNpZ25JbldpdGhPQXV0aDI6IHNpZ25JbldpdGhPQXV0aDIob3B0aW9ucyksXG5cdFx0XHRvQXV0aDJDYWxsYmFjazogb0F1dGgyQ2FsbGJhY2sob3B0aW9ucyksXG5cdFx0XHRvQXV0aDJMaW5rQWNjb3VudDogb0F1dGgyTGlua0FjY291bnQob3B0aW9ucylcblx0XHR9LFxuXHRcdG9wdGlvbnMsXG5cdFx0JEVSUk9SX0NPREVTOiBHRU5FUklDX09BVVRIX0VSUk9SX0NPREVTXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGF1dGgwLCBnZW5lcmljT0F1dGgsIGd1bXJvYWQsIGh1YnNwb3QsIGtleWNsb2FrLCBsaW5lLCBtaWNyb3NvZnRFbnRyYUlkLCBva3RhLCBwYXRyZW9uLCBzbGFjayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth0: () => (/* binding */ auth0)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/auth0.ts\n/**\n* Auth0 OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, auth0 } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         auth0({\n*           clientId: process.env.AUTH0_CLIENT_ID,\n*           clientSecret: process.env.AUTH0_CLIENT_SECRET,\n*           domain: process.env.AUTH0_DOMAIN,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction auth0(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst domain = options.domain.replace(/^https?:\\/\\//, \"\");\n\tconst discoveryUrl = `https://${domain}/.well-known/openid-configuration`;\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(`https://${domain}/userinfo`, { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile.sub,\n\t\t\tname: profile.name ?? profile.nickname ?? void 0,\n\t\t\temail: profile.email ?? void 0,\n\t\t\timage: profile.picture,\n\t\t\temailVerified: profile.email_verified ?? false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"auth0\",\n\t\tdiscoveryUrl,\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=auth0.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2F1dGgwLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRDs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxPQUFPO0FBQ3hDO0FBQ0EsVUFBVSx1QkFBdUIsUUFBUSxnRUFBVyxZQUFZLE9BQU8sY0FBYyxXQUFXLHlCQUF5QixtQkFBbUIsS0FBSztBQUNqSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lCO0FBQ2pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZ2VuZXJpYy1vYXV0aFxccHJvdmlkZXJzXFxhdXRoMC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvYXV0aDAudHNcbi8qKlxuKiBBdXRoMCBPQXV0aCBwcm92aWRlciBoZWxwZXJcbipcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogaW1wb3J0IHsgZ2VuZXJpY09BdXRoLCBhdXRoMCB9IGZyb20gXCJiZXR0ZXItYXV0aC9wbHVnaW5zL2dlbmVyaWMtb2F1dGhcIjtcbipcbiogZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogICBwbHVnaW5zOiBbXG4qICAgICBnZW5lcmljT0F1dGgoe1xuKiAgICAgICBjb25maWc6IFtcbiogICAgICAgICBhdXRoMCh7XG4qICAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQVVUSDBfQ0xJRU5UX0lELFxuKiAgICAgICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5BVVRIMF9DTElFTlRfU0VDUkVULFxuKiAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5BVVRIMF9ET01BSU4sXG4qICAgICAgICAgfSksXG4qICAgICAgIF0sXG4qICAgICB9KSxcbiogICBdLFxuKiB9KTtcbiogYGBgXG4qL1xuZnVuY3Rpb24gYXV0aDAob3B0aW9ucykge1xuXHRjb25zdCBkZWZhdWx0U2NvcGVzID0gW1xuXHRcdFwib3BlbmlkXCIsXG5cdFx0XCJwcm9maWxlXCIsXG5cdFx0XCJlbWFpbFwiXG5cdF07XG5cdGNvbnN0IGRvbWFpbiA9IG9wdGlvbnMuZG9tYWluLnJlcGxhY2UoL15odHRwcz86XFwvXFwvLywgXCJcIik7XG5cdGNvbnN0IGRpc2NvdmVyeVVybCA9IGBodHRwczovLyR7ZG9tYWlufS8ud2VsbC1rbm93bi9vcGVuaWQtY29uZmlndXJhdGlvbmA7XG5cdGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHRva2VucykgPT4ge1xuXHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKGBodHRwczovLyR7ZG9tYWlufS91c2VyaW5mb2AsIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW5zLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgPz8gcHJvZmlsZS5uaWNrbmFtZSA/PyB2b2lkIDAsXG5cdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCA/PyB2b2lkIDAsXG5cdFx0XHRpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuXHRcdFx0ZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA/PyBmYWxzZVxuXHRcdH07XG5cdH07XG5cdHJldHVybiB7XG5cdFx0cHJvdmlkZXJJZDogXCJhdXRoMFwiLFxuXHRcdGRpc2NvdmVyeVVybCxcblx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0LFxuXHRcdHNjb3Blczogb3B0aW9ucy5zY29wZXMgPz8gZGVmYXVsdFNjb3Blcyxcblx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSxcblx0XHRwa2NlOiBvcHRpb25zLnBrY2UsXG5cdFx0ZGlzYWJsZUltcGxpY2l0U2lnblVwOiBvcHRpb25zLmRpc2FibGVJbXBsaWNpdFNpZ25VcCxcblx0XHRkaXNhYmxlU2lnblVwOiBvcHRpb25zLmRpc2FibGVTaWduVXAsXG5cdFx0b3ZlcnJpZGVVc2VySW5mbzogb3B0aW9ucy5vdmVycmlkZVVzZXJJbmZvLFxuXHRcdGdldFVzZXJJbmZvXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYXV0aDAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF1dGgwLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gumroad: () => (/* binding */ gumroad)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/gumroad.ts\n/**\n* Gumroad OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, gumroad } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         gumroad({\n*           clientId: process.env.GUMROAD_CLIENT_ID,\n*           clientSecret: process.env.GUMROAD_CLIENT_SECRET,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*\n* @see https://app.gumroad.com/oauth\n*/\nfunction gumroad(options) {\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.gumroad.com/v2/user\", {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: { Authorization: `Bearer ${tokens.accessToken}` }\n\t\t});\n\t\tif (error || !profile?.success || !profile.user) return null;\n\t\treturn {\n\t\t\tid: profile.user.user_id,\n\t\t\tname: profile.user.name,\n\t\t\temail: profile.user.email,\n\t\t\timage: profile.user.profile_url,\n\t\t\temailVerified: false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"gumroad\",\n\t\tauthorizationUrl: \"https://gumroad.com/oauth/authorize\",\n\t\ttokenUrl: \"https://api.gumroad.com/oauth/token\",\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? [\"view_profile\"],\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=gumroad.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2d1bXJvYWQubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUJBQXVCLFFBQVEsZ0VBQVc7QUFDcEQ7QUFDQSxjQUFjLHlCQUF5QixtQkFBbUI7QUFDMUQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGdlbmVyaWMtb2F1dGhcXHByb3ZpZGVyc1xcZ3Vtcm9hZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvZ3Vtcm9hZC50c1xuLyoqXG4qIEd1bXJvYWQgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGdlbmVyaWNPQXV0aCwgZ3Vtcm9hZCB9IGZyb20gXCJiZXR0ZXItYXV0aC9wbHVnaW5zL2dlbmVyaWMtb2F1dGhcIjtcbipcbiogZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogICBwbHVnaW5zOiBbXG4qICAgICBnZW5lcmljT0F1dGgoe1xuKiAgICAgICBjb25maWc6IFtcbiogICAgICAgICBndW1yb2FkKHtcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HVU1ST0FEX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR1VNUk9BRF9DTElFTlRfU0VDUkVULFxuKiAgICAgICAgIH0pLFxuKiAgICAgICBdLFxuKiAgICAgfSksXG4qICAgXSxcbiogfSk7XG4qIGBgYFxuKlxuKiBAc2VlIGh0dHBzOi8vYXBwLmd1bXJvYWQuY29tL29hdXRoXG4qL1xuZnVuY3Rpb24gZ3Vtcm9hZChvcHRpb25zKSB7XG5cdGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHRva2VucykgPT4ge1xuXHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuZ3Vtcm9hZC5jb20vdjIvdXNlclwiLCB7XG5cdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbnMuYWNjZXNzVG9rZW59YCB9XG5cdFx0fSk7XG5cdFx0aWYgKGVycm9yIHx8ICFwcm9maWxlPy5zdWNjZXNzIHx8ICFwcm9maWxlLnVzZXIpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS51c2VyLnVzZXJfaWQsXG5cdFx0XHRuYW1lOiBwcm9maWxlLnVzZXIubmFtZSxcblx0XHRcdGVtYWlsOiBwcm9maWxlLnVzZXIuZW1haWwsXG5cdFx0XHRpbWFnZTogcHJvZmlsZS51c2VyLnByb2ZpbGVfdXJsLFxuXHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHR9O1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHByb3ZpZGVySWQ6IFwiZ3Vtcm9hZFwiLFxuXHRcdGF1dGhvcml6YXRpb25Vcmw6IFwiaHR0cHM6Ly9ndW1yb2FkLmNvbS9vYXV0aC9hdXRob3JpemVcIixcblx0XHR0b2tlblVybDogXCJodHRwczovL2FwaS5ndW1yb2FkLmNvbS9vYXV0aC90b2tlblwiLFxuXHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXQsXG5cdFx0c2NvcGVzOiBvcHRpb25zLnNjb3BlcyA/PyBbXCJ2aWV3X3Byb2ZpbGVcIl0sXG5cdFx0cmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkksXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGd1bXJvYWQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1bXJvYWQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hubspot: () => (/* binding */ hubspot)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/hubspot.ts\n/**\n* HubSpot OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, hubspot } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         hubspot({\n*           clientId: process.env.HUBSPOT_CLIENT_ID,\n*           clientSecret: process.env.HUBSPOT_CLIENT_SECRET,\n*           scopes: [\"oauth\", \"contacts\"],\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction hubspot(options) {\n\tconst defaultScopes = [\"oauth\"];\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(`https://api.hubapi.com/oauth/v1/access-tokens/${tokens.accessToken}`, { headers: { \"Content-Type\": \"application/json\" } });\n\t\tif (error || !profile) return null;\n\t\tconst id = profile.user_id ?? profile.signed_access_token?.userId;\n\t\tif (!id) return null;\n\t\treturn {\n\t\t\tid,\n\t\t\tname: profile.user,\n\t\t\temail: profile.user,\n\t\t\timage: void 0,\n\t\t\temailVerified: false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"hubspot\",\n\t\tauthorizationUrl: \"https://app.hubspot.com/oauth/authorize\",\n\t\ttokenUrl: \"https://api.hubapi.com/oauth/v1/token\",\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tauthentication: \"post\",\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=hubspot.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2h1YnNwb3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdUJBQXVCLFFBQVEsZ0VBQVcsa0RBQWtELG1CQUFtQixLQUFLLFdBQVcsc0NBQXNDO0FBQy9LO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNtQjtBQUNuQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGdlbmVyaWMtb2F1dGhcXHByb3ZpZGVyc1xcaHVic3BvdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvaHVic3BvdC50c1xuLyoqXG4qIEh1YlNwb3QgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGdlbmVyaWNPQXV0aCwgaHVic3BvdCB9IGZyb20gXCJiZXR0ZXItYXV0aC9wbHVnaW5zL2dlbmVyaWMtb2F1dGhcIjtcbipcbiogZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogICBwbHVnaW5zOiBbXG4qICAgICBnZW5lcmljT0F1dGgoe1xuKiAgICAgICBjb25maWc6IFtcbiogICAgICAgICBodWJzcG90KHtcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5IVUJTUE9UX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuSFVCU1BPVF9DTElFTlRfU0VDUkVULFxuKiAgICAgICAgICAgc2NvcGVzOiBbXCJvYXV0aFwiLCBcImNvbnRhY3RzXCJdLFxuKiAgICAgICAgIH0pLFxuKiAgICAgICBdLFxuKiAgICAgfSksXG4qICAgXSxcbiogfSk7XG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGh1YnNwb3Qob3B0aW9ucykge1xuXHRjb25zdCBkZWZhdWx0U2NvcGVzID0gW1wib2F1dGhcIl07XG5cdGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHRva2VucykgPT4ge1xuXHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKGBodHRwczovL2FwaS5odWJhcGkuY29tL29hdXRoL3YxL2FjY2Vzcy10b2tlbnMvJHt0b2tlbnMuYWNjZXNzVG9rZW59YCwgeyBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0gfSk7XG5cdFx0aWYgKGVycm9yIHx8ICFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRjb25zdCBpZCA9IHByb2ZpbGUudXNlcl9pZCA/PyBwcm9maWxlLnNpZ25lZF9hY2Nlc3NfdG9rZW4/LnVzZXJJZDtcblx0XHRpZiAoIWlkKSByZXR1cm4gbnVsbDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aWQsXG5cdFx0XHRuYW1lOiBwcm9maWxlLnVzZXIsXG5cdFx0XHRlbWFpbDogcHJvZmlsZS51c2VyLFxuXHRcdFx0aW1hZ2U6IHZvaWQgMCxcblx0XHRcdGVtYWlsVmVyaWZpZWQ6IGZhbHNlXG5cdFx0fTtcblx0fTtcblx0cmV0dXJuIHtcblx0XHRwcm92aWRlcklkOiBcImh1YnNwb3RcIixcblx0XHRhdXRob3JpemF0aW9uVXJsOiBcImh0dHBzOi8vYXBwLmh1YnNwb3QuY29tL29hdXRoL2F1dGhvcml6ZVwiLFxuXHRcdHRva2VuVXJsOiBcImh0dHBzOi8vYXBpLmh1YmFwaS5jb20vb2F1dGgvdjEvdG9rZW5cIixcblx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0LFxuXHRcdHNjb3Blczogb3B0aW9ucy5zY29wZXMgPz8gZGVmYXVsdFNjb3Blcyxcblx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSxcblx0XHRhdXRoZW50aWNhdGlvbjogXCJwb3N0XCIsXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGh1YnNwb3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh1YnNwb3QubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/index.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/index.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth0_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth0.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs\");\n/* harmony import */ var _gumroad_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gumroad.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs\");\n/* harmony import */ var _hubspot_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hubspot.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs\");\n/* harmony import */ var _keycloak_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./keycloak.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs\");\n/* harmony import */ var _line_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./line.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs\");\n/* harmony import */ var _microsoft_entra_id_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./microsoft-entra-id.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs\");\n/* harmony import */ var _okta_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./okta.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs\");\n/* harmony import */ var _patreon_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./patreon.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs\");\n/* harmony import */ var _slack_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./slack.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs\");\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDQTtBQUNFO0FBQ1I7QUFDMEI7QUFDMUI7QUFDTTtBQUNKIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZ2VuZXJpYy1vYXV0aFxccHJvdmlkZXJzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXV0aDAgfSBmcm9tIFwiLi9hdXRoMC5tanNcIjtcbmltcG9ydCB7IGd1bXJvYWQgfSBmcm9tIFwiLi9ndW1yb2FkLm1qc1wiO1xuaW1wb3J0IHsgaHVic3BvdCB9IGZyb20gXCIuL2h1YnNwb3QubWpzXCI7XG5pbXBvcnQgeyBrZXljbG9hayB9IGZyb20gXCIuL2tleWNsb2FrLm1qc1wiO1xuaW1wb3J0IHsgbGluZSB9IGZyb20gXCIuL2xpbmUubWpzXCI7XG5pbXBvcnQgeyBtaWNyb3NvZnRFbnRyYUlkIH0gZnJvbSBcIi4vbWljcm9zb2Z0LWVudHJhLWlkLm1qc1wiO1xuaW1wb3J0IHsgb2t0YSB9IGZyb20gXCIuL29rdGEubWpzXCI7XG5pbXBvcnQgeyBwYXRyZW9uIH0gZnJvbSBcIi4vcGF0cmVvbi5tanNcIjtcbmltcG9ydCB7IHNsYWNrIH0gZnJvbSBcIi4vc2xhY2subWpzXCI7XG5cbmV4cG9ydCB7ICB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keycloak: () => (/* binding */ keycloak)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/keycloak.ts\n/**\n* Keycloak OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, keycloak } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         keycloak({\n*           clientId: process.env.KEYCLOAK_CLIENT_ID,\n*           clientSecret: process.env.KEYCLOAK_CLIENT_SECRET,\n*           issuer: process.env.KEYCLOAK_ISSUER,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction keycloak(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst issuer = options.issuer.replace(/\\/$/, \"\");\n\tconst discoveryUrl = `${issuer}/.well-known/openid-configuration`;\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(`${issuer}/protocol/openid-connect/userinfo`, { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile.sub,\n\t\t\tname: profile.name ?? profile.preferred_username ?? void 0,\n\t\t\temail: profile.email ?? void 0,\n\t\t\timage: profile.picture,\n\t\t\temailVerified: profile.email_verified ?? false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"keycloak\",\n\t\tdiscoveryUrl,\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=keycloak.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2tleWNsb2FrLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRDs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixPQUFPO0FBQ2hDO0FBQ0EsVUFBVSx1QkFBdUIsUUFBUSxnRUFBVyxJQUFJLE9BQU8sc0NBQXNDLFdBQVcseUJBQXlCLG1CQUFtQixLQUFLO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDb0I7QUFDcEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxnZW5lcmljLW9hdXRoXFxwcm92aWRlcnNcXGtleWNsb2FrLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9nZW5lcmljLW9hdXRoL3Byb3ZpZGVycy9rZXljbG9hay50c1xuLyoqXG4qIEtleWNsb2FrIE9BdXRoIHByb3ZpZGVyIGhlbHBlclxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBnZW5lcmljT0F1dGgsIGtleWNsb2FrIH0gZnJvbSBcImJldHRlci1hdXRoL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aFwiO1xuKlxuKiBleHBvcnQgY29uc3QgYXV0aCA9IGJldHRlckF1dGgoe1xuKiAgIHBsdWdpbnM6IFtcbiogICAgIGdlbmVyaWNPQXV0aCh7XG4qICAgICAgIGNvbmZpZzogW1xuKiAgICAgICAgIGtleWNsb2FrKHtcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5LRVlDTE9BS19DTElFTlRfSUQsXG4qICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LktFWUNMT0FLX0NMSUVOVF9TRUNSRVQsXG4qICAgICAgICAgICBpc3N1ZXI6IHByb2Nlc3MuZW52LktFWUNMT0FLX0lTU1VFUixcbiogICAgICAgICB9KSxcbiogICAgICAgXSxcbiogICAgIH0pLFxuKiAgIF0sXG4qIH0pO1xuKiBgYGBcbiovXG5mdW5jdGlvbiBrZXljbG9hayhvcHRpb25zKSB7XG5cdGNvbnN0IGRlZmF1bHRTY29wZXMgPSBbXG5cdFx0XCJvcGVuaWRcIixcblx0XHRcInByb2ZpbGVcIixcblx0XHRcImVtYWlsXCJcblx0XTtcblx0Y29uc3QgaXNzdWVyID0gb3B0aW9ucy5pc3N1ZXIucmVwbGFjZSgvXFwvJC8sIFwiXCIpO1xuXHRjb25zdCBkaXNjb3ZlcnlVcmwgPSBgJHtpc3N1ZXJ9Ly53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uYDtcblx0Y29uc3QgZ2V0VXNlckluZm8gPSBhc3luYyAodG9rZW5zKSA9PiB7XG5cdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goYCR7aXNzdWVyfS9wcm90b2NvbC9vcGVuaWQtY29ubmVjdC91c2VyaW5mb2AsIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW5zLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgPz8gcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUgPz8gdm9pZCAwLFxuXHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwgPz8gdm9pZCAwLFxuXHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcblx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2Vcblx0XHR9O1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHByb3ZpZGVySWQ6IFwia2V5Y2xvYWtcIixcblx0XHRkaXNjb3ZlcnlVcmwsXG5cdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcblx0XHRzY29wZXM6IG9wdGlvbnMuc2NvcGVzID8/IGRlZmF1bHRTY29wZXMsXG5cdFx0cmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkksXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGtleWNsb2FrIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXljbG9hay5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   line: () => (/* binding */ line)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/decode_jwt.js\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n//#region src/plugins/generic-oauth/providers/line.ts\n/**\n* LINE OAuth provider helper\n*\n* LINE requires separate channels for different countries (Japan, Thailand, Taiwan, etc.).\n* Each channel has its own clientId and clientSecret. To support multiple countries,\n* call this function multiple times with different providerIds and credentials.\n*\n* @example\n* ```ts\n* import { genericOAuth, line } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         // Japan channel\n*         line({\n*           providerId: \"line-jp\",\n*           clientId: process.env.LINE_JP_CLIENT_ID,\n*           clientSecret: process.env.LINE_JP_CLIENT_SECRET,\n*         }),\n*         // Thailand channel\n*         line({\n*           providerId: \"line-th\",\n*           clientId: process.env.LINE_TH_CLIENT_ID,\n*           clientSecret: process.env.LINE_TH_CLIENT_SECRET,\n*         }),\n*         // Taiwan channel\n*         line({\n*           providerId: \"line-tw\",\n*           clientId: process.env.LINE_TW_CLIENT_ID,\n*           clientSecret: process.env.LINE_TW_CLIENT_SECRET,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction line(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst authorizationUrl = \"https://access.line.me/oauth2/v2.1/authorize\";\n\tconst tokenUrl = \"https://api.line.me/oauth2/v2.1/token\";\n\tconst userInfoUrl = \"https://api.line.me/oauth2/v2.1/userinfo\";\n\tconst getUserInfo = async (tokens) => {\n\t\tlet profile = null;\n\t\tif (tokens.idToken) try {\n\t\t\tprofile = (0,jose__WEBPACK_IMPORTED_MODULE_1__.decodeJwt)(tokens.idToken);\n\t\t} catch {}\n\t\tif (!profile) {\n\t\t\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(userInfoUrl, { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\t\tif (error || !data) return null;\n\t\t\tprofile = data;\n\t\t}\n\t\tif (!profile) return null;\n\t\treturn {\n\t\t\tid: profile.sub,\n\t\t\tname: profile.name,\n\t\t\temail: profile.email,\n\t\t\timage: profile.picture,\n\t\t\temailVerified: false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: options.providerId ?? \"line\",\n\t\tauthorizationUrl,\n\t\ttokenUrl,\n\t\tuserInfoUrl,\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=line.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL2xpbmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNpQjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsK0NBQVM7QUFDdEIsSUFBSTtBQUNKO0FBQ0EsV0FBVyxjQUFjLFFBQVEsZ0VBQVcsZ0JBQWdCLFdBQVcseUJBQXlCLG1CQUFtQixLQUFLO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dCO0FBQ2hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZ2VuZXJpYy1vYXV0aFxccHJvdmlkZXJzXFxsaW5lLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGVKd3QgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvbGluZS50c1xuLyoqXG4qIExJTkUgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIExJTkUgcmVxdWlyZXMgc2VwYXJhdGUgY2hhbm5lbHMgZm9yIGRpZmZlcmVudCBjb3VudHJpZXMgKEphcGFuLCBUaGFpbGFuZCwgVGFpd2FuLCBldGMuKS5cbiogRWFjaCBjaGFubmVsIGhhcyBpdHMgb3duIGNsaWVudElkIGFuZCBjbGllbnRTZWNyZXQuIFRvIHN1cHBvcnQgbXVsdGlwbGUgY291bnRyaWVzLFxuKiBjYWxsIHRoaXMgZnVuY3Rpb24gbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgcHJvdmlkZXJJZHMgYW5kIGNyZWRlbnRpYWxzLlxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBnZW5lcmljT0F1dGgsIGxpbmUgfSBmcm9tIFwiYmV0dGVyLWF1dGgvcGx1Z2lucy9nZW5lcmljLW9hdXRoXCI7XG4qXG4qIGV4cG9ydCBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qICAgcGx1Z2luczogW1xuKiAgICAgZ2VuZXJpY09BdXRoKHtcbiogICAgICAgY29uZmlnOiBbXG4qICAgICAgICAgLy8gSmFwYW4gY2hhbm5lbFxuKiAgICAgICAgIGxpbmUoe1xuKiAgICAgICAgICAgcHJvdmlkZXJJZDogXCJsaW5lLWpwXCIsXG4qICAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuTElORV9KUF9DTElFTlRfSUQsXG4qICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkxJTkVfSlBfQ0xJRU5UX1NFQ1JFVCxcbiogICAgICAgICB9KSxcbiogICAgICAgICAvLyBUaGFpbGFuZCBjaGFubmVsXG4qICAgICAgICAgbGluZSh7XG4qICAgICAgICAgICBwcm92aWRlcklkOiBcImxpbmUtdGhcIixcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5MSU5FX1RIX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuTElORV9USF9DTElFTlRfU0VDUkVULFxuKiAgICAgICAgIH0pLFxuKiAgICAgICAgIC8vIFRhaXdhbiBjaGFubmVsXG4qICAgICAgICAgbGluZSh7XG4qICAgICAgICAgICBwcm92aWRlcklkOiBcImxpbmUtdHdcIixcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5MSU5FX1RXX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuTElORV9UV19DTElFTlRfU0VDUkVULFxuKiAgICAgICAgIH0pLFxuKiAgICAgICBdLFxuKiAgICAgfSksXG4qICAgXSxcbiogfSk7XG4qIGBgYFxuKi9cbmZ1bmN0aW9uIGxpbmUob3B0aW9ucykge1xuXHRjb25zdCBkZWZhdWx0U2NvcGVzID0gW1xuXHRcdFwib3BlbmlkXCIsXG5cdFx0XCJwcm9maWxlXCIsXG5cdFx0XCJlbWFpbFwiXG5cdF07XG5cdGNvbnN0IGF1dGhvcml6YXRpb25VcmwgPSBcImh0dHBzOi8vYWNjZXNzLmxpbmUubWUvb2F1dGgyL3YyLjEvYXV0aG9yaXplXCI7XG5cdGNvbnN0IHRva2VuVXJsID0gXCJodHRwczovL2FwaS5saW5lLm1lL29hdXRoMi92Mi4xL3Rva2VuXCI7XG5cdGNvbnN0IHVzZXJJbmZvVXJsID0gXCJodHRwczovL2FwaS5saW5lLm1lL29hdXRoMi92Mi4xL3VzZXJpbmZvXCI7XG5cdGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHRva2VucykgPT4ge1xuXHRcdGxldCBwcm9maWxlID0gbnVsbDtcblx0XHRpZiAodG9rZW5zLmlkVG9rZW4pIHRyeSB7XG5cdFx0XHRwcm9maWxlID0gZGVjb2RlSnd0KHRva2Vucy5pZFRva2VuKTtcblx0XHR9IGNhdGNoIHt9XG5cdFx0aWYgKCFwcm9maWxlKSB7XG5cdFx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh1c2VySW5mb1VybCwgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbnMuYWNjZXNzVG9rZW59YCB9IH0pO1xuXHRcdFx0aWYgKGVycm9yIHx8ICFkYXRhKSByZXR1cm4gbnVsbDtcblx0XHRcdHByb2ZpbGUgPSBkYXRhO1xuXHRcdH1cblx0XHRpZiAoIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUsXG5cdFx0XHRlbWFpbDogcHJvZmlsZS5lbWFpbCxcblx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG5cdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZVxuXHRcdH07XG5cdH07XG5cdHJldHVybiB7XG5cdFx0cHJvdmlkZXJJZDogb3B0aW9ucy5wcm92aWRlcklkID8/IFwibGluZVwiLFxuXHRcdGF1dGhvcml6YXRpb25VcmwsXG5cdFx0dG9rZW5VcmwsXG5cdFx0dXNlckluZm9VcmwsXG5cdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcblx0XHRzY29wZXM6IG9wdGlvbnMuc2NvcGVzID8/IGRlZmF1bHRTY29wZXMsXG5cdFx0cmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkksXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGxpbmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpbmUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs":
/*!**********************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   microsoftEntraId: () => (/* binding */ microsoftEntraId)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/microsoft-entra-id.ts\n/**\n* Microsoft Entra ID (Azure AD) OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, microsoftEntraId } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         microsoftEntraId({\n*           clientId: process.env.MS_APP_ID,\n*           clientSecret: process.env.MS_CLIENT_SECRET,\n*           tenantId: process.env.MS_TENANT_ID,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction microsoftEntraId(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst tenantId = options.tenantId;\n\tconst authorizationUrl = `https://login.microsoftonline.com/${tenantId}/oauth2/v2.0/authorize`;\n\tconst tokenUrl = `https://login.microsoftonline.com/${tenantId}/oauth2/v2.0/token`;\n\tconst userInfoUrl = \"https://graph.microsoft.com/oidc/userinfo\";\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(userInfoUrl, { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile.sub,\n\t\t\tname: profile.name ?? (`${profile.given_name ?? \"\"} ${profile.family_name ?? \"\"}`.trim() || void 0),\n\t\t\temail: profile.email ?? profile.preferred_username ?? void 0,\n\t\t\timage: profile.picture,\n\t\t\temailVerified: profile.email_verified ?? false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"microsoft-entra-id\",\n\t\tauthorizationUrl,\n\t\ttokenUrl,\n\t\tuserInfoUrl,\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=microsoft-entra-id.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL21pY3Jvc29mdC1lbnRyYS1pZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0Q7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUNBQWlDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0QsU0FBUztBQUN4RSx1REFBdUQsU0FBUztBQUNoRTtBQUNBO0FBQ0EsVUFBVSx1QkFBdUIsUUFBUSxnRUFBVyxnQkFBZ0IsV0FBVyx5QkFBeUIsbUJBQW1CLEtBQUs7QUFDaEk7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBCQUEwQixFQUFFLDBCQUEwQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxnZW5lcmljLW9hdXRoXFxwcm92aWRlcnNcXG1pY3Jvc29mdC1lbnRyYS1pZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvbWljcm9zb2Z0LWVudHJhLWlkLnRzXG4vKipcbiogTWljcm9zb2Z0IEVudHJhIElEIChBenVyZSBBRCkgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGdlbmVyaWNPQXV0aCwgbWljcm9zb2Z0RW50cmFJZCB9IGZyb20gXCJiZXR0ZXItYXV0aC9wbHVnaW5zL2dlbmVyaWMtb2F1dGhcIjtcbipcbiogZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogICBwbHVnaW5zOiBbXG4qICAgICBnZW5lcmljT0F1dGgoe1xuKiAgICAgICBjb25maWc6IFtcbiogICAgICAgICBtaWNyb3NvZnRFbnRyYUlkKHtcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5NU19BUFBfSUQsXG4qICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52Lk1TX0NMSUVOVF9TRUNSRVQsXG4qICAgICAgICAgICB0ZW5hbnRJZDogcHJvY2Vzcy5lbnYuTVNfVEVOQU5UX0lELFxuKiAgICAgICAgIH0pLFxuKiAgICAgICBdLFxuKiAgICAgfSksXG4qICAgXSxcbiogfSk7XG4qIGBgYFxuKi9cbmZ1bmN0aW9uIG1pY3Jvc29mdEVudHJhSWQob3B0aW9ucykge1xuXHRjb25zdCBkZWZhdWx0U2NvcGVzID0gW1xuXHRcdFwib3BlbmlkXCIsXG5cdFx0XCJwcm9maWxlXCIsXG5cdFx0XCJlbWFpbFwiXG5cdF07XG5cdGNvbnN0IHRlbmFudElkID0gb3B0aW9ucy50ZW5hbnRJZDtcblx0Y29uc3QgYXV0aG9yaXphdGlvblVybCA9IGBodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vJHt0ZW5hbnRJZH0vb2F1dGgyL3YyLjAvYXV0aG9yaXplYDtcblx0Y29uc3QgdG9rZW5VcmwgPSBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7dGVuYW50SWR9L29hdXRoMi92Mi4wL3Rva2VuYDtcblx0Y29uc3QgdXNlckluZm9VcmwgPSBcImh0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS9vaWRjL3VzZXJpbmZvXCI7XG5cdGNvbnN0IGdldFVzZXJJbmZvID0gYXN5bmMgKHRva2VucykgPT4ge1xuXHRcdGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKHVzZXJJbmZvVXJsLCB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2Vucy5hY2Nlc3NUb2tlbn1gIH0gfSk7XG5cdFx0aWYgKGVycm9yIHx8ICFwcm9maWxlKSByZXR1cm4gbnVsbDtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aWQ6IHByb2ZpbGUuc3ViLFxuXHRcdFx0bmFtZTogcHJvZmlsZS5uYW1lID8/IChgJHtwcm9maWxlLmdpdmVuX25hbWUgPz8gXCJcIn0gJHtwcm9maWxlLmZhbWlseV9uYW1lID8/IFwiXCJ9YC50cmltKCkgfHwgdm9pZCAwKSxcblx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsID8/IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lID8/IHZvaWQgMCxcblx0XHRcdGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG5cdFx0XHRlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlXG5cdFx0fTtcblx0fTtcblx0cmV0dXJuIHtcblx0XHRwcm92aWRlcklkOiBcIm1pY3Jvc29mdC1lbnRyYS1pZFwiLFxuXHRcdGF1dGhvcml6YXRpb25VcmwsXG5cdFx0dG9rZW5VcmwsXG5cdFx0dXNlckluZm9VcmwsXG5cdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcblx0XHRzY29wZXM6IG9wdGlvbnMuc2NvcGVzID8/IGRlZmF1bHRTY29wZXMsXG5cdFx0cmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkksXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1pY3Jvc29mdEVudHJhSWQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pY3Jvc29mdC1lbnRyYS1pZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   okta: () => (/* binding */ okta)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/okta.ts\n/**\n* Okta OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, okta } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         okta({\n*           clientId: process.env.OKTA_CLIENT_ID,\n*           clientSecret: process.env.OKTA_CLIENT_SECRET,\n*           issuer: process.env.OKTA_ISSUER,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction okta(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst issuer = options.issuer.replace(/\\/$/, \"\");\n\tconst discoveryUrl = `${issuer}/.well-known/openid-configuration`;\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(`${issuer}/oauth2/v1/userinfo`, { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile.sub,\n\t\t\tname: profile.name ?? profile.preferred_username ?? void 0,\n\t\t\temail: profile.email ?? void 0,\n\t\t\timage: profile.picture,\n\t\t\temailVerified: profile.email_verified ?? false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"okta\",\n\t\tdiscoveryUrl,\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=okta.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL29rdGEubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFCQUFxQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE9BQU87QUFDaEM7QUFDQSxVQUFVLHVCQUF1QixRQUFRLGdFQUFXLElBQUksT0FBTyx3QkFBd0IsV0FBVyx5QkFBeUIsbUJBQW1CLEtBQUs7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQjtBQUNoQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGdlbmVyaWMtb2F1dGhcXHByb3ZpZGVyc1xcb2t0YS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvb2t0YS50c1xuLyoqXG4qIE9rdGEgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGdlbmVyaWNPQXV0aCwgb2t0YSB9IGZyb20gXCJiZXR0ZXItYXV0aC9wbHVnaW5zL2dlbmVyaWMtb2F1dGhcIjtcbipcbiogZXhwb3J0IGNvbnN0IGF1dGggPSBiZXR0ZXJBdXRoKHtcbiogICBwbHVnaW5zOiBbXG4qICAgICBnZW5lcmljT0F1dGgoe1xuKiAgICAgICBjb25maWc6IFtcbiogICAgICAgICBva3RhKHtcbiogICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5PS1RBX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuT0tUQV9DTElFTlRfU0VDUkVULFxuKiAgICAgICAgICAgaXNzdWVyOiBwcm9jZXNzLmVudi5PS1RBX0lTU1VFUixcbiogICAgICAgICB9KSxcbiogICAgICAgXSxcbiogICAgIH0pLFxuKiAgIF0sXG4qIH0pO1xuKiBgYGBcbiovXG5mdW5jdGlvbiBva3RhKG9wdGlvbnMpIHtcblx0Y29uc3QgZGVmYXVsdFNjb3BlcyA9IFtcblx0XHRcIm9wZW5pZFwiLFxuXHRcdFwicHJvZmlsZVwiLFxuXHRcdFwiZW1haWxcIlxuXHRdO1xuXHRjb25zdCBpc3N1ZXIgPSBvcHRpb25zLmlzc3Vlci5yZXBsYWNlKC9cXC8kLywgXCJcIik7XG5cdGNvbnN0IGRpc2NvdmVyeVVybCA9IGAke2lzc3Vlcn0vLndlbGwta25vd24vb3BlbmlkLWNvbmZpZ3VyYXRpb25gO1xuXHRjb25zdCBnZXRVc2VySW5mbyA9IGFzeW5jICh0b2tlbnMpID0+IHtcblx0XHRjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChgJHtpc3N1ZXJ9L29hdXRoMi92MS91c2VyaW5mb2AsIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW5zLmFjY2Vzc1Rva2VufWAgfSB9KTtcblx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS5zdWIsXG5cdFx0XHRuYW1lOiBwcm9maWxlLm5hbWUgPz8gcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUgPz8gdm9pZCAwLFxuXHRcdFx0ZW1haWw6IHByb2ZpbGUuZW1haWwgPz8gdm9pZCAwLFxuXHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcblx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2Vcblx0XHR9O1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHByb3ZpZGVySWQ6IFwib2t0YVwiLFxuXHRcdGRpc2NvdmVyeVVybCxcblx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0LFxuXHRcdHNjb3Blczogb3B0aW9ucy5zY29wZXMgPz8gZGVmYXVsdFNjb3Blcyxcblx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSxcblx0XHRwa2NlOiBvcHRpb25zLnBrY2UsXG5cdFx0ZGlzYWJsZUltcGxpY2l0U2lnblVwOiBvcHRpb25zLmRpc2FibGVJbXBsaWNpdFNpZ25VcCxcblx0XHRkaXNhYmxlU2lnblVwOiBvcHRpb25zLmRpc2FibGVTaWduVXAsXG5cdFx0b3ZlcnJpZGVVc2VySW5mbzogb3B0aW9ucy5vdmVycmlkZVVzZXJJbmZvLFxuXHRcdGdldFVzZXJJbmZvXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb2t0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2t0YS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patreon: () => (/* binding */ patreon)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/patreon.ts\n/**\n* Patreon OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, patreon } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         patreon({\n*           clientId: process.env.PATREON_CLIENT_ID,\n*           clientSecret: process.env.PATREON_CLIENT_SECRET,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction patreon(options) {\n\tconst defaultScopes = [\"identity[email]\"];\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://www.patreon.com/api/oauth2/v2/identity?fields[user]=email,full_name,image_url,is_email_verified\", {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: { Authorization: `Bearer ${tokens.accessToken}` }\n\t\t});\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile.data.id,\n\t\t\tname: profile.data.attributes.full_name,\n\t\t\temail: profile.data.attributes.email,\n\t\t\timage: profile.data.attributes.image_url,\n\t\t\temailVerified: profile.data.attributes.is_email_verified\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"patreon\",\n\t\tauthorizationUrl: \"https://www.patreon.com/oauth2/authorize\",\n\t\ttokenUrl: \"https://www.patreon.com/api/oauth2/token\",\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=patreon.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3BhdHJlb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHdCQUF3QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixRQUFRLGdFQUFXO0FBQ3BEO0FBQ0EsY0FBYyx5QkFBeUIsbUJBQW1CO0FBQzFELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxnZW5lcmljLW9hdXRoXFxwcm92aWRlcnNcXHBhdHJlb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSBcIkBiZXR0ZXItZmV0Y2gvZmV0Y2hcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3BhdHJlb24udHNcbi8qKlxuKiBQYXRyZW9uIE9BdXRoIHByb3ZpZGVyIGhlbHBlclxuKlxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBnZW5lcmljT0F1dGgsIHBhdHJlb24gfSBmcm9tIFwiYmV0dGVyLWF1dGgvcGx1Z2lucy9nZW5lcmljLW9hdXRoXCI7XG4qXG4qIGV4cG9ydCBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qICAgcGx1Z2luczogW1xuKiAgICAgZ2VuZXJpY09BdXRoKHtcbiogICAgICAgY29uZmlnOiBbXG4qICAgICAgICAgcGF0cmVvbih7XG4qICAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuUEFUUkVPTl9DTElFTlRfSUQsXG4qICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LlBBVFJFT05fQ0xJRU5UX1NFQ1JFVCxcbiogICAgICAgICB9KSxcbiogICAgICAgXSxcbiogICAgIH0pLFxuKiAgIF0sXG4qIH0pO1xuKiBgYGBcbiovXG5mdW5jdGlvbiBwYXRyZW9uKG9wdGlvbnMpIHtcblx0Y29uc3QgZGVmYXVsdFNjb3BlcyA9IFtcImlkZW50aXR5W2VtYWlsXVwiXTtcblx0Y29uc3QgZ2V0VXNlckluZm8gPSBhc3luYyAodG9rZW5zKSA9PiB7XG5cdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9hcGkvb2F1dGgyL3YyL2lkZW50aXR5P2ZpZWxkc1t1c2VyXT1lbWFpbCxmdWxsX25hbWUsaW1hZ2VfdXJsLGlzX2VtYWlsX3ZlcmlmaWVkXCIsIHtcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2Vucy5hY2Nlc3NUb2tlbn1gIH1cblx0XHR9KTtcblx0XHRpZiAoZXJyb3IgfHwgIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRpZDogcHJvZmlsZS5kYXRhLmlkLFxuXHRcdFx0bmFtZTogcHJvZmlsZS5kYXRhLmF0dHJpYnV0ZXMuZnVsbF9uYW1lLFxuXHRcdFx0ZW1haWw6IHByb2ZpbGUuZGF0YS5hdHRyaWJ1dGVzLmVtYWlsLFxuXHRcdFx0aW1hZ2U6IHByb2ZpbGUuZGF0YS5hdHRyaWJ1dGVzLmltYWdlX3VybCxcblx0XHRcdGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZGF0YS5hdHRyaWJ1dGVzLmlzX2VtYWlsX3ZlcmlmaWVkXG5cdFx0fTtcblx0fTtcblx0cmV0dXJuIHtcblx0XHRwcm92aWRlcklkOiBcInBhdHJlb25cIixcblx0XHRhdXRob3JpemF0aW9uVXJsOiBcImh0dHBzOi8vd3d3LnBhdHJlb24uY29tL29hdXRoMi9hdXRob3JpemVcIixcblx0XHR0b2tlblVybDogXCJodHRwczovL3d3dy5wYXRyZW9uLmNvbS9hcGkvb2F1dGgyL3Rva2VuXCIsXG5cdFx0Y2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG5cdFx0Y2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldCxcblx0XHRzY29wZXM6IG9wdGlvbnMuc2NvcGVzID8/IGRlZmF1bHRTY29wZXMsXG5cdFx0cmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkksXG5cdFx0cGtjZTogb3B0aW9ucy5wa2NlLFxuXHRcdGRpc2FibGVJbXBsaWNpdFNpZ25VcDogb3B0aW9ucy5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG5cdFx0ZGlzYWJsZVNpZ25VcDogb3B0aW9ucy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IG9wdGlvbnMub3ZlcnJpZGVVc2VySW5mbyxcblx0XHRnZXRVc2VySW5mb1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBhdHJlb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhdHJlb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   slack: () => (/* binding */ slack)\n/* harmony export */ });\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n//#region src/plugins/generic-oauth/providers/slack.ts\n/**\n* Slack OAuth provider helper\n*\n* @example\n* ```ts\n* import { genericOAuth, slack } from \"better-auth/plugins/generic-oauth\";\n*\n* export const auth = betterAuth({\n*   plugins: [\n*     genericOAuth({\n*       config: [\n*         slack({\n*           clientId: process.env.SLACK_CLIENT_ID,\n*           clientSecret: process.env.SLACK_CLIENT_SECRET,\n*         }),\n*       ],\n*     }),\n*   ],\n* });\n* ```\n*/\nfunction slack(options) {\n\tconst defaultScopes = [\n\t\t\"openid\",\n\t\t\"profile\",\n\t\t\"email\"\n\t];\n\tconst getUserInfo = async (tokens) => {\n\t\tconst { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://slack.com/api/openid.connect.userInfo\", { headers: { Authorization: `Bearer ${tokens.accessToken}` } });\n\t\tif (error || !profile) return null;\n\t\treturn {\n\t\t\tid: profile[\"https://slack.com/user_id\"] ?? profile.sub,\n\t\t\tname: profile.name,\n\t\t\temail: profile.email,\n\t\t\timage: profile.picture ?? profile[\"https://slack.com/user_image_512\"],\n\t\t\temailVerified: profile.email_verified ?? false\n\t\t};\n\t};\n\treturn {\n\t\tproviderId: \"slack\",\n\t\tauthorizationUrl: \"https://slack.com/openid/connect/authorize\",\n\t\ttokenUrl: \"https://slack.com/api/openid.connect.token\",\n\t\tuserInfoUrl: \"https://slack.com/api/openid.connect.userInfo\",\n\t\tclientId: options.clientId,\n\t\tclientSecret: options.clientSecret,\n\t\tscopes: options.scopes ?? defaultScopes,\n\t\tredirectURI: options.redirectURI,\n\t\tpkce: options.pkce,\n\t\tdisableImplicitSignUp: options.disableImplicitSignUp,\n\t\tdisableSignUp: options.disableSignUp,\n\t\toverrideUserInfo: options.overrideUserInfo,\n\t\tgetUserInfo\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=slack.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3NsYWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFrRDs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHVCQUF1QixRQUFRLGdFQUFXLG9EQUFvRCxXQUFXLHlCQUF5QixtQkFBbUIsS0FBSztBQUNwSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpQjtBQUNqQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGdlbmVyaWMtb2F1dGhcXHByb3ZpZGVyc1xcc2xhY2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJldHRlckZldGNoIH0gZnJvbSBcIkBiZXR0ZXItZmV0Y2gvZmV0Y2hcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3NsYWNrLnRzXG4vKipcbiogU2xhY2sgT0F1dGggcHJvdmlkZXIgaGVscGVyXG4qXG4qIEBleGFtcGxlXG4qIGBgYHRzXG4qIGltcG9ydCB7IGdlbmVyaWNPQXV0aCwgc2xhY2sgfSBmcm9tIFwiYmV0dGVyLWF1dGgvcGx1Z2lucy9nZW5lcmljLW9hdXRoXCI7XG4qXG4qIGV4cG9ydCBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qICAgcGx1Z2luczogW1xuKiAgICAgZ2VuZXJpY09BdXRoKHtcbiogICAgICAgY29uZmlnOiBbXG4qICAgICAgICAgc2xhY2soe1xuKiAgICAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LlNMQUNLX0NMSUVOVF9JRCxcbiogICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuU0xBQ0tfQ0xJRU5UX1NFQ1JFVCxcbiogICAgICAgICB9KSxcbiogICAgICAgXSxcbiogICAgIH0pLFxuKiAgIF0sXG4qIH0pO1xuKiBgYGBcbiovXG5mdW5jdGlvbiBzbGFjayhvcHRpb25zKSB7XG5cdGNvbnN0IGRlZmF1bHRTY29wZXMgPSBbXG5cdFx0XCJvcGVuaWRcIixcblx0XHRcInByb2ZpbGVcIixcblx0XHRcImVtYWlsXCJcblx0XTtcblx0Y29uc3QgZ2V0VXNlckluZm8gPSBhc3luYyAodG9rZW5zKSA9PiB7XG5cdFx0Y29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudXNlckluZm9cIiwgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbnMuYWNjZXNzVG9rZW59YCB9IH0pO1xuXHRcdGlmIChlcnJvciB8fCAhcHJvZmlsZSkgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGlkOiBwcm9maWxlW1wiaHR0cHM6Ly9zbGFjay5jb20vdXNlcl9pZFwiXSA/PyBwcm9maWxlLnN1Yixcblx0XHRcdG5hbWU6IHByb2ZpbGUubmFtZSxcblx0XHRcdGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuXHRcdFx0aW1hZ2U6IHByb2ZpbGUucGljdHVyZSA/PyBwcm9maWxlW1wiaHR0cHM6Ly9zbGFjay5jb20vdXNlcl9pbWFnZV81MTJcIl0sXG5cdFx0XHRlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlXG5cdFx0fTtcblx0fTtcblx0cmV0dXJuIHtcblx0XHRwcm92aWRlcklkOiBcInNsYWNrXCIsXG5cdFx0YXV0aG9yaXphdGlvblVybDogXCJodHRwczovL3NsYWNrLmNvbS9vcGVuaWQvY29ubmVjdC9hdXRob3JpemVcIixcblx0XHR0b2tlblVybDogXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudG9rZW5cIixcblx0XHR1c2VySW5mb1VybDogXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudXNlckluZm9cIixcblx0XHRjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcblx0XHRjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0LFxuXHRcdHNjb3Blczogb3B0aW9ucy5zY29wZXMgPz8gZGVmYXVsdFNjb3Blcyxcblx0XHRyZWRpcmVjdFVSSTogb3B0aW9ucy5yZWRpcmVjdFVSSSxcblx0XHRwa2NlOiBvcHRpb25zLnBrY2UsXG5cdFx0ZGlzYWJsZUltcGxpY2l0U2lnblVwOiBvcHRpb25zLmRpc2FibGVJbXBsaWNpdFNpZ25VcCxcblx0XHRkaXNhYmxlU2lnblVwOiBvcHRpb25zLmRpc2FibGVTaWduVXAsXG5cdFx0b3ZlcnJpZGVVc2VySW5mbzogb3B0aW9ucy5vdmVycmlkZVVzZXJJbmZvLFxuXHRcdGdldFVzZXJJbmZvXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2xhY2sgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNsYWNrLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/routes.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/routes.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserInfo: () => (/* binding */ getUserInfo),\n/* harmony export */   oAuth2Callback: () => (/* binding */ oAuth2Callback),\n/* harmony export */   oAuth2LinkAccount: () => (/* binding */ oAuth2LinkAccount),\n/* harmony export */   signInWithOAuth2: () => (/* binding */ signInWithOAuth2)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/error-codes.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/decode_jwt.js\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/generic-oauth/routes.ts\nconst signInWithOAuth2BodySchema = zod__WEBPACK_IMPORTED_MODULE_14__.object({\n\tproviderId: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The URL to redirect to after sign in\" }).optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The URL to redirect to if an error occurs\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The URL to redirect to after login if the user is new. Eg: \\\"/welcome\\\"\" }).optional(),\n\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_14__.boolean().meta({ description: \"Disable redirect\" }).optional(),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_14__.array(zod__WEBPACK_IMPORTED_MODULE_14__.string()).meta({ description: \"Scopes to be passed to the provider authorization request.\" }).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_14__.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider. Eg: false\" }).optional(),\n\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_14__.record(zod__WEBPACK_IMPORTED_MODULE_14__.string(), zod__WEBPACK_IMPORTED_MODULE_14__.any()).optional()\n});\n/**\n* ### Endpoint\n*\n* POST `/sign-in/oauth2`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.signInWithOAuth2`\n*\n* **client:**\n* `authClient.signIn.oauth2`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/sign-in#api-method-sign-in-oauth2)\n*/\nconst signInWithOAuth2 = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_12__.createAuthEndpoint)(\"/sign-in/oauth2\", {\n\tmethod: \"POST\",\n\tbody: signInWithOAuth2BodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Sign in with OAuth2\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Sign in with OAuth2\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\tredirect: { type: \"boolean\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId } = ctx.body;\n\tconst config = options.config.find((c) => c.providerId === providerId);\n\tif (!config) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: `${_error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.PROVIDER_CONFIG_NOT_FOUND} ${providerId}` });\n\tconst { discoveryUrl, authorizationUrl, tokenUrl, clientId, clientSecret, scopes, redirectURI, responseType, pkce, prompt, accessType, authorizationUrlParams, responseMode } = config;\n\tlet finalAuthUrl = authorizationUrl;\n\tlet finalTokenUrl = tokenUrl;\n\tif (discoveryUrl) {\n\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_13__.betterFetch)(discoveryUrl, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: config.discoveryHeaders,\n\t\t\tonError(context) {\n\t\t\t\tctx.context.logger.error(context.error.message, context.error, { discoveryUrl });\n\t\t\t}\n\t\t});\n\t\tif (discovery.data) {\n\t\t\tfinalAuthUrl = discovery.data.authorization_endpoint;\n\t\t\tfinalTokenUrl = discovery.data.token_endpoint;\n\t\t}\n\t}\n\tif (!finalAuthUrl || !finalTokenUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIGURATION });\n\tif (authorizationUrlParams) {\n\t\tconst withAdditionalParams = new URL(finalAuthUrl);\n\t\tfor (const [paramName, paramValue] of Object.entries(authorizationUrlParams)) withAdditionalParams.searchParams.set(paramName, paramValue);\n\t\tfinalAuthUrl = withAdditionalParams.toString();\n\t}\n\tconst additionalParams = typeof authorizationUrlParams === \"function\" ? authorizationUrlParams(ctx) : authorizationUrlParams;\n\tconst { state, codeVerifier } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.generateState)(ctx, void 0, ctx.body.additionalData);\n\tconst authUrl = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_10__.createAuthorizationURL)({\n\t\tid: providerId,\n\t\toptions: {\n\t\t\tclientId,\n\t\t\tclientSecret,\n\t\t\tredirectURI\n\t\t},\n\t\tauthorizationEndpoint: finalAuthUrl,\n\t\tstate,\n\t\tcodeVerifier: pkce ? codeVerifier : void 0,\n\t\tscopes: ctx.body.scopes ? [...ctx.body.scopes, ...scopes || []] : scopes || [],\n\t\tredirectURI: `${ctx.context.baseURL}/oauth2/callback/${providerId}`,\n\t\tprompt,\n\t\taccessType,\n\t\tresponseType,\n\t\tresponseMode,\n\t\tadditionalParams\n\t});\n\treturn ctx.json({\n\t\turl: authUrl.toString(),\n\t\tredirect: !ctx.body.disableRedirect\n\t});\n});\nconst OAuth2CallbackQuerySchema = zod__WEBPACK_IMPORTED_MODULE_14__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The OAuth2 code\" }).optional(),\n\terror: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The error message, if any\" }).optional(),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The error description, if any\" }).optional(),\n\tstate: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The state parameter from the OAuth2 request\" }).optional()\n});\nconst oAuth2Callback = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_12__.createAuthEndpoint)(\"/oauth2/callback/:providerId\", {\n\tmethod: \"GET\",\n\tquery: OAuth2CallbackQuerySchema,\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_5__.HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\topenapi: {\n\t\t\tdescription: \"OAuth2 callback\",\n\t\t\tresponses: { 200: {\n\t\t\t\tdescription: \"OAuth2 callback\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { url: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst defaultErrorURL = ctx.context.options.onAPIError?.errorURL || `${ctx.context.baseURL}/error`;\n\tif (ctx.query.error || !ctx.query.code) throw ctx.redirect(`${defaultErrorURL}?error=${ctx.query.error || \"oAuth_code_missing\"}&error_description=${ctx.query.error_description}`);\n\tconst providerId = ctx.params?.providerId;\n\tif (!providerId) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.PROVIDER_ID_REQUIRED });\n\tconst providerConfig = options.config.find((p) => p.providerId === providerId);\n\tif (!providerConfig) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: `${_error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.PROVIDER_CONFIG_NOT_FOUND} ${providerId}` });\n\tlet tokens = void 0;\n\tconst { callbackURL, codeVerifier, errorURL, requestSignUp, newUserURL, link } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState)(ctx);\n\tconst code = ctx.query.code;\n\tfunction redirectOnError(error) {\n\t\tconst defaultErrorURL$1 = ctx.context.options.onAPIError?.errorURL || `${ctx.context.baseURL}/error`;\n\t\tlet url = errorURL || defaultErrorURL$1;\n\t\tif (url.includes(\"?\")) url = `${url}&error=${error}`;\n\t\telse url = `${url}?error=${error}`;\n\t\tthrow ctx.redirect(url);\n\t}\n\tlet finalTokenUrl = providerConfig.tokenUrl;\n\tlet finalUserInfoUrl = providerConfig.userInfoUrl;\n\tif (providerConfig.discoveryUrl) {\n\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_13__.betterFetch)(providerConfig.discoveryUrl, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: providerConfig.discoveryHeaders\n\t\t});\n\t\tif (discovery.data) {\n\t\t\tfinalTokenUrl = discovery.data.token_endpoint;\n\t\t\tfinalUserInfoUrl = discovery.data.userinfo_endpoint;\n\t\t}\n\t}\n\ttry {\n\t\tif (providerConfig.getToken) tokens = await providerConfig.getToken({\n\t\t\tcode,\n\t\t\tredirectURI: `${ctx.context.baseURL}/oauth2/callback/${providerConfig.providerId}`,\n\t\t\tcodeVerifier: providerConfig.pkce ? codeVerifier : void 0\n\t\t});\n\t\telse {\n\t\t\tif (!finalTokenUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIG });\n\t\t\tconst additionalParams = typeof providerConfig.tokenUrlParams === \"function\" ? providerConfig.tokenUrlParams(ctx) : providerConfig.tokenUrlParams;\n\t\t\ttokens = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_10__.validateAuthorizationCode)({\n\t\t\t\theaders: providerConfig.authorizationHeaders,\n\t\t\t\tcode,\n\t\t\t\tcodeVerifier: providerConfig.pkce ? codeVerifier : void 0,\n\t\t\t\tredirectURI: `${ctx.context.baseURL}/oauth2/callback/${providerConfig.providerId}`,\n\t\t\t\toptions: {\n\t\t\t\t\tclientId: providerConfig.clientId,\n\t\t\t\t\tclientSecret: providerConfig.clientSecret,\n\t\t\t\t\tredirectURI: providerConfig.redirectURI\n\t\t\t\t},\n\t\t\t\ttokenEndpoint: finalTokenUrl,\n\t\t\t\tauthentication: providerConfig.authentication,\n\t\t\t\tadditionalParams\n\t\t\t});\n\t\t}\n\t} catch (e) {\n\t\tctx.context.logger.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\tthrow redirectOnError(\"oauth_code_verification_failed\");\n\t}\n\tif (!tokens) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIG });\n\tconst userInfo = await (async function handleUserInfo() {\n\t\tconst userInfo$1 = providerConfig.getUserInfo ? await providerConfig.getUserInfo(tokens) : await getUserInfo(tokens, finalUserInfoUrl);\n\t\tif (!userInfo$1) throw redirectOnError(\"user_info_is_missing\");\n\t\tconst mapUser = providerConfig.mapProfileToUser ? await providerConfig.mapProfileToUser(userInfo$1) : userInfo$1;\n\t\tconst email = mapUser.email ? mapUser.email.toLowerCase() : userInfo$1.email?.toLowerCase();\n\t\tif (!email) {\n\t\t\tctx.context.logger.error(\"Unable to get user info\", userInfo$1);\n\t\t\tthrow redirectOnError(\"email_is_missing\");\n\t\t}\n\t\tconst id = mapUser.id ? String(mapUser.id) : String(userInfo$1.id);\n\t\tconst name = mapUser.name ? mapUser.name : userInfo$1.name;\n\t\tif (!name) {\n\t\t\tctx.context.logger.error(\"Unable to get user info\", userInfo$1);\n\t\t\tthrow redirectOnError(\"name_is_missing\");\n\t\t}\n\t\treturn {\n\t\t\t...userInfo$1,\n\t\t\t...mapUser,\n\t\t\temail,\n\t\t\tid,\n\t\t\tname\n\t\t};\n\t})();\n\tif (link) {\n\t\tif (ctx.context.options.account?.accountLinking?.allowDifferentEmails !== true && link.email !== userInfo.email) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await ctx.context.internalAdapter.findAccountByProviderId(String(userInfo.id), providerConfig.providerId);\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId !== link.userId) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait ctx.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await ctx.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: providerConfig.providerId,\n\t\t\taccountId: userInfo.id,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\"),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\tidToken: tokens.idToken\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow ctx.redirect(toRedirectTo$1);\n\t}\n\tconst result = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__.handleOAuthUserInfo)(ctx, {\n\t\tuserInfo,\n\t\taccount: {\n\t\t\tproviderId: providerConfig.providerId,\n\t\t\taccountId: userInfo.id,\n\t\t\t...tokens,\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t},\n\t\tcallbackURL,\n\t\tdisableSignUp: providerConfig.disableImplicitSignUp && !requestSignUp || providerConfig.disableSignUp,\n\t\toverrideUserInfo: providerConfig.overrideUserInfo\n\t});\n\tif (result.error) return redirectOnError(result.error.split(\" \").join(\"_\"));\n\tconst { session, user } = result.data;\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow ctx.redirect(toRedirectTo);\n});\nconst OAuth2LinkAccountBodySchema = zod__WEBPACK_IMPORTED_MODULE_14__.object({\n\tproviderId: zod__WEBPACK_IMPORTED_MODULE_14__.string(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_14__.string(),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_14__.array(zod__WEBPACK_IMPORTED_MODULE_14__.string()).meta({ description: \"Additional scopes to request when linking the account\" }).optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional()\n});\n/**\n* ### Endpoint\n*\n* POST `/oauth2/link`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.oAuth2LinkAccount`\n*\n* **client:**\n* `authClient.oauth2.link`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/generic-oauth#api-method-oauth2-link)\n*/\nconst oAuth2LinkAccount = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_12__.createAuthEndpoint)(\"/oauth2/link\", {\n\tmethod: \"POST\",\n\tbody: OAuth2LinkAccountBodySchema,\n\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link an OAuth2 account to the current user session\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Authorization URL generated successfully for linking an OAuth2 account\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to for linking the OAuth2 account\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates that the client should redirect to the provided URL\",\n\t\t\t\t\t\tenum: [true]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"url\", \"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.SESSION_REQUIRED });\n\tconst provider = options.config.find((p) => p.providerId === c.body.providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_9__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\tconst { providerId, clientId, clientSecret, redirectURI, authorizationUrl, discoveryUrl, pkce, scopes, prompt, accessType, authorizationUrlParams } = provider;\n\tlet finalAuthUrl = authorizationUrl;\n\tif (!finalAuthUrl) {\n\t\tif (!discoveryUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIGURATION });\n\t\tconst discovery = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_13__.betterFetch)(discoveryUrl, {\n\t\t\tmethod: \"GET\",\n\t\t\theaders: provider.discoveryHeaders,\n\t\t\tonError(context) {\n\t\t\t\tc.context.logger.error(context.error.message, context.error, { discoveryUrl });\n\t\t\t}\n\t\t});\n\t\tif (discovery.data) finalAuthUrl = discovery.data.authorization_endpoint;\n\t}\n\tif (!finalAuthUrl) throw new better_call__WEBPACK_IMPORTED_MODULE_11__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_8__.GENERIC_OAUTH_ERROR_CODES.INVALID_OAUTH_CONFIGURATION });\n\tconst state = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.generateState)(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, void 0);\n\tconst additionalParams = typeof authorizationUrlParams === \"function\" ? authorizationUrlParams(c) : authorizationUrlParams;\n\tconst url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_10__.createAuthorizationURL)({\n\t\tid: providerId,\n\t\toptions: {\n\t\t\tclientId,\n\t\t\tclientSecret,\n\t\t\tredirectURI: redirectURI || `${c.context.baseURL}/oauth2/callback/${providerId}`\n\t\t},\n\t\tauthorizationEndpoint: finalAuthUrl,\n\t\tstate: state.state,\n\t\tcodeVerifier: pkce ? state.codeVerifier : void 0,\n\t\tscopes: c.body.scopes || scopes || [],\n\t\tredirectURI: redirectURI || `${c.context.baseURL}/oauth2/callback/${providerId}`,\n\t\tprompt,\n\t\taccessType,\n\t\tadditionalParams\n\t});\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: true\n\t});\n});\nasync function getUserInfo(tokens, finalUserInfoUrl) {\n\tif (tokens.idToken) {\n\t\tconst decoded = (0,jose__WEBPACK_IMPORTED_MODULE_15__.decodeJwt)(tokens.idToken);\n\t\tif (decoded) {\n\t\t\tif (decoded.sub && decoded.email) return {\n\t\t\t\tid: decoded.sub,\n\t\t\t\temailVerified: decoded.email_verified,\n\t\t\t\timage: decoded.picture,\n\t\t\t\t...decoded\n\t\t\t};\n\t\t}\n\t}\n\tif (!finalUserInfoUrl) return null;\n\tconst userInfo = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_13__.betterFetch)(finalUserInfoUrl, {\n\t\tmethod: \"GET\",\n\t\theaders: { Authorization: `Bearer ${tokens.accessToken}` }\n\t});\n\treturn {\n\t\tid: userInfo.data?.sub ?? \"\",\n\t\temailVerified: userInfo.data?.email_verified ?? false,\n\t\temail: userInfo.data?.email,\n\t\timage: userInfo.data?.picture,\n\t\tname: userInfo.data?.name,\n\t\t...userInfo.data\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=routes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvcm91dGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyRDtBQUNRO0FBQ2I7QUFDVztBQUNHO0FBQ047QUFDL0I7QUFDRjtBQUNpQztBQUNIO0FBQ2tDO0FBQ3REO0FBQ2Q7QUFDa0M7QUFDMUI7QUFDaUI7O0FBRWxEO0FBQ0EsbUNBQW1DLHdDQUFRO0FBQzNDLGFBQWEsd0NBQVEsVUFBVSx1REFBdUQ7QUFDdEYsY0FBYyx3Q0FBUSxVQUFVLHFEQUFxRDtBQUNyRixtQkFBbUIsd0NBQVEsVUFBVSwwREFBMEQ7QUFDL0YscUJBQXFCLHdDQUFRLFVBQVUsd0ZBQXdGO0FBQy9ILGtCQUFrQix5Q0FBUyxVQUFVLGlDQUFpQztBQUN0RSxTQUFTLHVDQUFPLENBQUMsd0NBQVEsV0FBVywyRUFBMkU7QUFDL0csZ0JBQWdCLHlDQUFTLFVBQVUsbUhBQW1IO0FBQ3RKLGlCQUFpQix3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUs7QUFDM0MsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywwRUFBa0I7QUFDeEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxhQUFhO0FBQ3RCO0FBQ0Esd0JBQXdCLGtEQUFRLGtCQUFrQixZQUFZLHVFQUF5Qiw0QkFBNEIsRUFBRSxXQUFXLEdBQUc7QUFDbkksU0FBUyxzS0FBc0s7QUFDL0s7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlFQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxjQUFjO0FBQ25GO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsa0RBQVEsa0JBQWtCLFNBQVMsdUVBQXlCLDhCQUE4QjtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNCQUFzQixRQUFRLGdFQUFhO0FBQ3BELHVCQUF1QixpRkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0IsbUJBQW1CLFdBQVc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELGtDQUFrQyx3Q0FBUTtBQUMxQyxPQUFPLHdDQUFRLFVBQVUsZ0NBQWdDO0FBQ3pELFFBQVEsd0NBQVEsVUFBVSwwQ0FBMEM7QUFDcEUsb0JBQW9CLHdDQUFRLFVBQVUsOENBQThDO0FBQ3BGLFFBQVEsd0NBQVEsVUFBVSw0REFBNEQ7QUFDdEYsQ0FBQztBQUNELG9DQUFvQywwRUFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSyxtRUFBYTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHdFQUF3RSxvQkFBb0I7QUFDNUYsK0RBQStELGdCQUFnQixTQUFTLHdDQUF3QyxxQkFBcUIsNEJBQTRCO0FBQ2pMO0FBQ0EsNEJBQTRCLGtEQUFRLGtCQUFrQixTQUFTLHVFQUF5Qix1QkFBdUI7QUFDL0c7QUFDQSxnQ0FBZ0Msa0RBQVEsa0JBQWtCLFlBQVksdUVBQXlCLDRCQUE0QixFQUFFLFdBQVcsR0FBRztBQUMzSTtBQUNBLFNBQVMsdUVBQXVFLFFBQVEsNkRBQVU7QUFDbEc7QUFDQTtBQUNBLDJFQUEyRSxvQkFBb0I7QUFDL0Y7QUFDQSxrQ0FBa0MsSUFBSSxTQUFTLE1BQU07QUFDckQsZ0JBQWdCLElBQUksU0FBUyxNQUFNO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsaUVBQVc7QUFDckM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9CQUFvQixtQkFBbUIsMEJBQTBCO0FBQ3BGO0FBQ0EsR0FBRztBQUNIO0FBQ0EsaUNBQWlDLGtEQUFRLGtCQUFrQixTQUFTLHVFQUF5Qix1QkFBdUI7QUFDcEg7QUFDQSxrQkFBa0Isb0ZBQXlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0IsbUJBQW1CLDBCQUEwQjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtEQUFRLGtCQUFrQixTQUFTLHVFQUF5Qix1QkFBdUI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0Esd0JBQXdCLCtEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2RUFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCLE9BQU8sb0VBQWdCO0FBQ3ZCO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxvQ0FBb0Msd0NBQVE7QUFDNUMsYUFBYSx3Q0FBUTtBQUNyQixjQUFjLHdDQUFRO0FBQ3RCLFNBQVMsdUNBQU8sQ0FBQyx3Q0FBUSxXQUFXLHNFQUFzRTtBQUMxRyxtQkFBbUIsd0NBQVEsVUFBVSxvRkFBb0Y7QUFDekgsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywwRUFBa0I7QUFDekQ7QUFDQTtBQUNBLE9BQU8sc0VBQWlCO0FBQ3hCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EseUJBQXlCLGtEQUFRLG1CQUFtQixTQUFTLHVFQUF5QixtQkFBbUI7QUFDekc7QUFDQSwwQkFBMEIsa0RBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNoRyxTQUFTLDRJQUE0STtBQUNySjtBQUNBO0FBQ0EsK0JBQStCLGtEQUFRLGtCQUFrQixTQUFTLHVFQUF5Qiw4QkFBOEI7QUFDekgsMEJBQTBCLGlFQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxjQUFjO0FBQ2pGO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw4QkFBOEIsa0RBQVEsa0JBQWtCLFNBQVMsdUVBQXlCLDhCQUE4QjtBQUN4SCxxQkFBcUIsZ0VBQWE7QUFDbEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLG1CQUFtQixpRkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0JBQWtCLG1CQUFtQixXQUFXO0FBQ2xGLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxrQkFBa0IsbUJBQW1CLFdBQVc7QUFDakY7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Q7QUFDQTtBQUNBLGtCQUFrQixnREFBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpRUFBVztBQUNuQztBQUNBLGFBQWEseUJBQXlCLG1CQUFtQjtBQUN6RCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRFO0FBQzVFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcZ2VuZXJpYy1vYXV0aFxccm91dGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IHNldFRva2VuVXRpbCB9IGZyb20gXCIuLi8uLi9vYXV0aDIvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9saW5rLWFjY291bnQubWpzXCI7XG5pbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi91dGlscy9pbmRleC5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMgfSBmcm9tIFwiLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwsIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvb2F1dGgyXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBkZWNvZGVKd3QgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvZ2VuZXJpYy1vYXV0aC9yb3V0ZXMudHNcbmNvbnN0IHNpZ25JbldpdGhPQXV0aDJCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRwcm92aWRlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcHJvdmlkZXIgSUQgZm9yIHRoZSBPQXV0aCBwcm92aWRlclwiIH0pLFxuXHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBhZnRlciBzaWduIGluXCIgfSkub3B0aW9uYWwoKSxcblx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBpZiBhbiBlcnJvciBvY2N1cnNcIiB9KS5vcHRpb25hbCgpLFxuXHRuZXdVc2VyQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgbG9naW4gaWYgdGhlIHVzZXIgaXMgbmV3LiBFZzogXFxcIi93ZWxjb21lXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdGRpc2FibGVSZWRpcmVjdDogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgcmVkaXJlY3RcIiB9KS5vcHRpb25hbCgpLFxuXHRzY29wZXM6IHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlNjb3BlcyB0byBiZSBwYXNzZWQgdG8gdGhlIHByb3ZpZGVyIGF1dGhvcml6YXRpb24gcmVxdWVzdC5cIiB9KS5vcHRpb25hbCgpLFxuXHRyZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXhwbGljaXRseSByZXF1ZXN0IHNpZ24tdXAuIFVzZWZ1bCB3aGVuIGRpc2FibGVJbXBsaWNpdFNpZ25VcCBpcyB0cnVlIGZvciB0aGlzIHByb3ZpZGVyLiBFZzogZmFsc2VcIiB9KS5vcHRpb25hbCgpLFxuXHRhZGRpdGlvbmFsRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKVxufSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9zaWduLWluL29hdXRoMmBcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5zaWduSW5XaXRoT0F1dGgyYFxuKlxuKiAqKmNsaWVudDoqKlxuKiBgYXV0aENsaWVudC5zaWduSW4ub2F1dGgyYFxuKlxuKiBAc2VlIFtSZWFkIG91ciBkb2NzIHRvIGxlYXJuIG1vcmUuXShodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvc2lnbi1pbiNhcGktbWV0aG9kLXNpZ24taW4tb2F1dGgyKVxuKi9cbmNvbnN0IHNpZ25JbldpdGhPQXV0aDIgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24taW4vb2F1dGgyXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogc2lnbkluV2l0aE9BdXRoMkJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggT0F1dGgyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIE9BdXRoMlwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHVybDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0cmVkaXJlY3Q6IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdFx0XHR9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBwcm92aWRlcklkIH0gPSBjdHguYm9keTtcblx0Y29uc3QgY29uZmlnID0gb3B0aW9ucy5jb25maWcuZmluZCgoYykgPT4gYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFjb25maWcpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYCR7R0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5QUk9WSURFUl9DT05GSUdfTk9UX0ZPVU5EfSAke3Byb3ZpZGVySWR9YCB9KTtcblx0Y29uc3QgeyBkaXNjb3ZlcnlVcmwsIGF1dGhvcml6YXRpb25VcmwsIHRva2VuVXJsLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBzY29wZXMsIHJlZGlyZWN0VVJJLCByZXNwb25zZVR5cGUsIHBrY2UsIHByb21wdCwgYWNjZXNzVHlwZSwgYXV0aG9yaXphdGlvblVybFBhcmFtcywgcmVzcG9uc2VNb2RlIH0gPSBjb25maWc7XG5cdGxldCBmaW5hbEF1dGhVcmwgPSBhdXRob3JpemF0aW9uVXJsO1xuXHRsZXQgZmluYWxUb2tlblVybCA9IHRva2VuVXJsO1xuXHRpZiAoZGlzY292ZXJ5VXJsKSB7XG5cdFx0Y29uc3QgZGlzY292ZXJ5ID0gYXdhaXQgYmV0dGVyRmV0Y2goZGlzY292ZXJ5VXJsLCB7XG5cdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRoZWFkZXJzOiBjb25maWcuZGlzY292ZXJ5SGVhZGVycyxcblx0XHRcdG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoY29udGV4dC5lcnJvci5tZXNzYWdlLCBjb250ZXh0LmVycm9yLCB7IGRpc2NvdmVyeVVybCB9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoZGlzY292ZXJ5LmRhdGEpIHtcblx0XHRcdGZpbmFsQXV0aFVybCA9IGRpc2NvdmVyeS5kYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQ7XG5cdFx0XHRmaW5hbFRva2VuVXJsID0gZGlzY292ZXJ5LmRhdGEudG9rZW5fZW5kcG9pbnQ7XG5cdFx0fVxuXHR9XG5cdGlmICghZmluYWxBdXRoVXJsIHx8ICFmaW5hbFRva2VuVXJsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMuSU5WQUxJRF9PQVVUSF9DT05GSUdVUkFUSU9OIH0pO1xuXHRpZiAoYXV0aG9yaXphdGlvblVybFBhcmFtcykge1xuXHRcdGNvbnN0IHdpdGhBZGRpdGlvbmFsUGFyYW1zID0gbmV3IFVSTChmaW5hbEF1dGhVcmwpO1xuXHRcdGZvciAoY29uc3QgW3BhcmFtTmFtZSwgcGFyYW1WYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXV0aG9yaXphdGlvblVybFBhcmFtcykpIHdpdGhBZGRpdGlvbmFsUGFyYW1zLnNlYXJjaFBhcmFtcy5zZXQocGFyYW1OYW1lLCBwYXJhbVZhbHVlKTtcblx0XHRmaW5hbEF1dGhVcmwgPSB3aXRoQWRkaXRpb25hbFBhcmFtcy50b1N0cmluZygpO1xuXHR9XG5cdGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB0eXBlb2YgYXV0aG9yaXphdGlvblVybFBhcmFtcyA9PT0gXCJmdW5jdGlvblwiID8gYXV0aG9yaXphdGlvblVybFBhcmFtcyhjdHgpIDogYXV0aG9yaXphdGlvblVybFBhcmFtcztcblx0Y29uc3QgeyBzdGF0ZSwgY29kZVZlcmlmaWVyIH0gPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGN0eCwgdm9pZCAwLCBjdHguYm9keS5hZGRpdGlvbmFsRGF0YSk7XG5cdGNvbnN0IGF1dGhVcmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRpZDogcHJvdmlkZXJJZCxcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRjbGllbnRJZCxcblx0XHRcdGNsaWVudFNlY3JldCxcblx0XHRcdHJlZGlyZWN0VVJJXG5cdFx0fSxcblx0XHRhdXRob3JpemF0aW9uRW5kcG9pbnQ6IGZpbmFsQXV0aFVybCxcblx0XHRzdGF0ZSxcblx0XHRjb2RlVmVyaWZpZXI6IHBrY2UgPyBjb2RlVmVyaWZpZXIgOiB2b2lkIDAsXG5cdFx0c2NvcGVzOiBjdHguYm9keS5zY29wZXMgPyBbLi4uY3R4LmJvZHkuc2NvcGVzLCAuLi5zY29wZXMgfHwgW11dIDogc2NvcGVzIHx8IFtdLFxuXHRcdHJlZGlyZWN0VVJJOiBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9vYXV0aDIvY2FsbGJhY2svJHtwcm92aWRlcklkfWAsXG5cdFx0cHJvbXB0LFxuXHRcdGFjY2Vzc1R5cGUsXG5cdFx0cmVzcG9uc2VUeXBlLFxuXHRcdHJlc3BvbnNlTW9kZSxcblx0XHRhZGRpdGlvbmFsUGFyYW1zXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHVybDogYXV0aFVybC50b1N0cmluZygpLFxuXHRcdHJlZGlyZWN0OiAhY3R4LmJvZHkuZGlzYWJsZVJlZGlyZWN0XG5cdH0pO1xufSk7XG5jb25zdCBPQXV0aDJDYWxsYmFja1F1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRjb2RlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgT0F1dGgyIGNvZGVcIiB9KS5vcHRpb25hbCgpLFxuXHRlcnJvcjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGVycm9yIG1lc3NhZ2UsIGlmIGFueVwiIH0pLm9wdGlvbmFsKCksXG5cdGVycm9yX2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZXJyb3IgZGVzY3JpcHRpb24sIGlmIGFueVwiIH0pLm9wdGlvbmFsKCksXG5cdHN0YXRlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc3RhdGUgcGFyYW1ldGVyIGZyb20gdGhlIE9BdXRoMiByZXF1ZXN0XCIgfSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBvQXV0aDJDYWxsYmFjayA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb2F1dGgyL2NhbGxiYWNrLzpwcm92aWRlcklkXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRxdWVyeTogT0F1dGgyQ2FsbGJhY2tRdWVyeVNjaGVtYSxcblx0bWV0YWRhdGE6IHtcblx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIk9BdXRoMiBjYWxsYmFja1wiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJPQXV0aDIgY2FsbGJhY2tcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgdXJsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgZGVmYXVsdEVycm9yVVJMID0gY3R4LmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdGlmIChjdHgucXVlcnkuZXJyb3IgfHwgIWN0eC5xdWVyeS5jb2RlKSB0aHJvdyBjdHgucmVkaXJlY3QoYCR7ZGVmYXVsdEVycm9yVVJMfT9lcnJvcj0ke2N0eC5xdWVyeS5lcnJvciB8fCBcIm9BdXRoX2NvZGVfbWlzc2luZ1wifSZlcnJvcl9kZXNjcmlwdGlvbj0ke2N0eC5xdWVyeS5lcnJvcl9kZXNjcmlwdGlvbn1gKTtcblx0Y29uc3QgcHJvdmlkZXJJZCA9IGN0eC5wYXJhbXM/LnByb3ZpZGVySWQ7XG5cdGlmICghcHJvdmlkZXJJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBHRU5FUklDX09BVVRIX0VSUk9SX0NPREVTLlBST1ZJREVSX0lEX1JFUVVJUkVEIH0pO1xuXHRjb25zdCBwcm92aWRlckNvbmZpZyA9IG9wdGlvbnMuY29uZmlnLmZpbmQoKHApID0+IHAucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCk7XG5cdGlmICghcHJvdmlkZXJDb25maWcpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYCR7R0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5QUk9WSURFUl9DT05GSUdfTk9UX0ZPVU5EfSAke3Byb3ZpZGVySWR9YCB9KTtcblx0bGV0IHRva2VucyA9IHZvaWQgMDtcblx0Y29uc3QgeyBjYWxsYmFja1VSTCwgY29kZVZlcmlmaWVyLCBlcnJvclVSTCwgcmVxdWVzdFNpZ25VcCwgbmV3VXNlclVSTCwgbGluayB9ID0gYXdhaXQgcGFyc2VTdGF0ZShjdHgpO1xuXHRjb25zdCBjb2RlID0gY3R4LnF1ZXJ5LmNvZGU7XG5cdGZ1bmN0aW9uIHJlZGlyZWN0T25FcnJvcihlcnJvcikge1xuXHRcdGNvbnN0IGRlZmF1bHRFcnJvclVSTCQxID0gY3R4LmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdFx0bGV0IHVybCA9IGVycm9yVVJMIHx8IGRlZmF1bHRFcnJvclVSTCQxO1xuXHRcdGlmICh1cmwuaW5jbHVkZXMoXCI/XCIpKSB1cmwgPSBgJHt1cmx9JmVycm9yPSR7ZXJyb3J9YDtcblx0XHRlbHNlIHVybCA9IGAke3VybH0/ZXJyb3I9JHtlcnJvcn1gO1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdCh1cmwpO1xuXHR9XG5cdGxldCBmaW5hbFRva2VuVXJsID0gcHJvdmlkZXJDb25maWcudG9rZW5Vcmw7XG5cdGxldCBmaW5hbFVzZXJJbmZvVXJsID0gcHJvdmlkZXJDb25maWcudXNlckluZm9Vcmw7XG5cdGlmIChwcm92aWRlckNvbmZpZy5kaXNjb3ZlcnlVcmwpIHtcblx0XHRjb25zdCBkaXNjb3ZlcnkgPSBhd2FpdCBiZXR0ZXJGZXRjaChwcm92aWRlckNvbmZpZy5kaXNjb3ZlcnlVcmwsIHtcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdGhlYWRlcnM6IHByb3ZpZGVyQ29uZmlnLmRpc2NvdmVyeUhlYWRlcnNcblx0XHR9KTtcblx0XHRpZiAoZGlzY292ZXJ5LmRhdGEpIHtcblx0XHRcdGZpbmFsVG9rZW5VcmwgPSBkaXNjb3ZlcnkuZGF0YS50b2tlbl9lbmRwb2ludDtcblx0XHRcdGZpbmFsVXNlckluZm9VcmwgPSBkaXNjb3ZlcnkuZGF0YS51c2VyaW5mb19lbmRwb2ludDtcblx0XHR9XG5cdH1cblx0dHJ5IHtcblx0XHRpZiAocHJvdmlkZXJDb25maWcuZ2V0VG9rZW4pIHRva2VucyA9IGF3YWl0IHByb3ZpZGVyQ29uZmlnLmdldFRva2VuKHtcblx0XHRcdGNvZGUsXG5cdFx0XHRyZWRpcmVjdFVSSTogYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vb2F1dGgyL2NhbGxiYWNrLyR7cHJvdmlkZXJDb25maWcucHJvdmlkZXJJZH1gLFxuXHRcdFx0Y29kZVZlcmlmaWVyOiBwcm92aWRlckNvbmZpZy5wa2NlID8gY29kZVZlcmlmaWVyIDogdm9pZCAwXG5cdFx0fSk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRpZiAoIWZpbmFsVG9rZW5VcmwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogR0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5JTlZBTElEX09BVVRIX0NPTkZJRyB9KTtcblx0XHRcdGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB0eXBlb2YgcHJvdmlkZXJDb25maWcudG9rZW5VcmxQYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHByb3ZpZGVyQ29uZmlnLnRva2VuVXJsUGFyYW1zKGN0eCkgOiBwcm92aWRlckNvbmZpZy50b2tlblVybFBhcmFtcztcblx0XHRcdHRva2VucyA9IGF3YWl0IHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0XHRoZWFkZXJzOiBwcm92aWRlckNvbmZpZy5hdXRob3JpemF0aW9uSGVhZGVycyxcblx0XHRcdFx0Y29kZSxcblx0XHRcdFx0Y29kZVZlcmlmaWVyOiBwcm92aWRlckNvbmZpZy5wa2NlID8gY29kZVZlcmlmaWVyIDogdm9pZCAwLFxuXHRcdFx0XHRyZWRpcmVjdFVSSTogYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vb2F1dGgyL2NhbGxiYWNrLyR7cHJvdmlkZXJDb25maWcucHJvdmlkZXJJZH1gLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IHByb3ZpZGVyQ29uZmlnLmNsaWVudElkLFxuXHRcdFx0XHRcdGNsaWVudFNlY3JldDogcHJvdmlkZXJDb25maWcuY2xpZW50U2VjcmV0LFxuXHRcdFx0XHRcdHJlZGlyZWN0VVJJOiBwcm92aWRlckNvbmZpZy5yZWRpcmVjdFVSSVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0b2tlbkVuZHBvaW50OiBmaW5hbFRva2VuVXJsLFxuXHRcdFx0XHRhdXRoZW50aWNhdGlvbjogcHJvdmlkZXJDb25maWcuYXV0aGVudGljYXRpb24sXG5cdFx0XHRcdGFkZGl0aW9uYWxQYXJhbXNcblx0XHRcdH0pO1xuXHRcdH1cblx0fSBjYXRjaCAoZSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIFwibmFtZVwiIGluIGUgPyBlLm5hbWUgOiBcIlwiLCBlKTtcblx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJvYXV0aF9jb2RlX3ZlcmlmaWNhdGlvbl9mYWlsZWRcIik7XG5cdH1cblx0aWYgKCF0b2tlbnMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogR0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5JTlZBTElEX09BVVRIX0NPTkZJRyB9KTtcblx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCAoYXN5bmMgZnVuY3Rpb24gaGFuZGxlVXNlckluZm8oKSB7XG5cdFx0Y29uc3QgdXNlckluZm8kMSA9IHByb3ZpZGVyQ29uZmlnLmdldFVzZXJJbmZvID8gYXdhaXQgcHJvdmlkZXJDb25maWcuZ2V0VXNlckluZm8odG9rZW5zKSA6IGF3YWl0IGdldFVzZXJJbmZvKHRva2VucywgZmluYWxVc2VySW5mb1VybCk7XG5cdFx0aWYgKCF1c2VySW5mbyQxKSB0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJ1c2VyX2luZm9faXNfbWlzc2luZ1wiKTtcblx0XHRjb25zdCBtYXBVc2VyID0gcHJvdmlkZXJDb25maWcubWFwUHJvZmlsZVRvVXNlciA/IGF3YWl0IHByb3ZpZGVyQ29uZmlnLm1hcFByb2ZpbGVUb1VzZXIodXNlckluZm8kMSkgOiB1c2VySW5mbyQxO1xuXHRcdGNvbnN0IGVtYWlsID0gbWFwVXNlci5lbWFpbCA/IG1hcFVzZXIuZW1haWwudG9Mb3dlckNhc2UoKSA6IHVzZXJJbmZvJDEuZW1haWw/LnRvTG93ZXJDYXNlKCk7XG5cdFx0aWYgKCFlbWFpbCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGdldCB1c2VyIGluZm9cIiwgdXNlckluZm8kMSk7XG5cdFx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJlbWFpbF9pc19taXNzaW5nXCIpO1xuXHRcdH1cblx0XHRjb25zdCBpZCA9IG1hcFVzZXIuaWQgPyBTdHJpbmcobWFwVXNlci5pZCkgOiBTdHJpbmcodXNlckluZm8kMS5pZCk7XG5cdFx0Y29uc3QgbmFtZSA9IG1hcFVzZXIubmFtZSA/IG1hcFVzZXIubmFtZSA6IHVzZXJJbmZvJDEubmFtZTtcblx0XHRpZiAoIW5hbWUpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBnZXQgdXNlciBpbmZvXCIsIHVzZXJJbmZvJDEpO1xuXHRcdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibmFtZV9pc19taXNzaW5nXCIpO1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4udXNlckluZm8kMSxcblx0XHRcdC4uLm1hcFVzZXIsXG5cdFx0XHRlbWFpbCxcblx0XHRcdGlkLFxuXHRcdFx0bmFtZVxuXHRcdH07XG5cdH0pKCk7XG5cdGlmIChsaW5rKSB7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlICYmIGxpbmsuZW1haWwgIT09IHVzZXJJbmZvLmVtYWlsKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfZG9lc24ndF9tYXRjaFwiKTtcblx0XHRjb25zdCBleGlzdGluZ0FjY291bnQgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRCeVByb3ZpZGVySWQoU3RyaW5nKHVzZXJJbmZvLmlkKSwgcHJvdmlkZXJDb25maWcucHJvdmlkZXJJZCk7XG5cdFx0aWYgKGV4aXN0aW5nQWNjb3VudCkge1xuXHRcdFx0aWYgKGV4aXN0aW5nQWNjb3VudC51c2VySWQgIT09IGxpbmsudXNlcklkKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiYWNjb3VudF9hbHJlYWR5X2xpbmtlZF90b19kaWZmZXJlbnRfdXNlclwiKTtcblx0XHRcdGNvbnN0IHVwZGF0ZURhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoe1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKHRva2Vucy5hY2Nlc3NUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbnMuaWRUb2tlbixcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuXHRcdFx0fSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdm9pZCAwKSk7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChleGlzdGluZ0FjY291bnQuaWQsIHVwZGF0ZURhdGEpO1xuXHRcdH0gZWxzZSBpZiAoIWF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogbGluay51c2VySWQsXG5cdFx0XHRwcm92aWRlcklkOiBwcm92aWRlckNvbmZpZy5wcm92aWRlcklkLFxuXHRcdFx0YWNjb3VudElkOiB1c2VySW5mby5pZCxcblx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW5cblx0XHR9KSkgcmV0dXJuIHJlZGlyZWN0T25FcnJvcihcInVuYWJsZV90b19saW5rX2FjY291bnRcIik7XG5cdFx0bGV0IHRvUmVkaXJlY3RUbyQxO1xuXHRcdHRyeSB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMLnRvU3RyaW5nKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHR0b1JlZGlyZWN0VG8kMSA9IGNhbGxiYWNrVVJMO1xuXHRcdH1cblx0XHR0aHJvdyBjdHgucmVkaXJlY3QodG9SZWRpcmVjdFRvJDEpO1xuXHR9XG5cdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZU9BdXRoVXNlckluZm8oY3R4LCB7XG5cdFx0dXNlckluZm8sXG5cdFx0YWNjb3VudDoge1xuXHRcdFx0cHJvdmlkZXJJZDogcHJvdmlkZXJDb25maWcucHJvdmlkZXJJZCxcblx0XHRcdGFjY291bnRJZDogdXNlckluZm8uaWQsXG5cdFx0XHQuLi50b2tlbnMsXG5cdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIilcblx0XHR9LFxuXHRcdGNhbGxiYWNrVVJMLFxuXHRcdGRpc2FibGVTaWduVXA6IHByb3ZpZGVyQ29uZmlnLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhcmVxdWVzdFNpZ25VcCB8fCBwcm92aWRlckNvbmZpZy5kaXNhYmxlU2lnblVwLFxuXHRcdG92ZXJyaWRlVXNlckluZm86IHByb3ZpZGVyQ29uZmlnLm92ZXJyaWRlVXNlckluZm9cblx0fSk7XG5cdGlmIChyZXN1bHQuZXJyb3IpIHJldHVybiByZWRpcmVjdE9uRXJyb3IocmVzdWx0LmVycm9yLnNwbGl0KFwiIFwiKS5qb2luKFwiX1wiKSk7XG5cdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gcmVzdWx0LmRhdGE7XG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0c2Vzc2lvbixcblx0XHR1c2VyXG5cdH0pO1xuXHRsZXQgdG9SZWRpcmVjdFRvO1xuXHR0cnkge1xuXHRcdHRvUmVkaXJlY3RUbyA9IChyZXN1bHQuaXNSZWdpc3RlciA/IG5ld1VzZXJVUkwgfHwgY2FsbGJhY2tVUkwgOiBjYWxsYmFja1VSTCkudG9TdHJpbmcoKTtcblx0fSBjYXRjaCB7XG5cdFx0dG9SZWRpcmVjdFRvID0gcmVzdWx0LmlzUmVnaXN0ZXIgPyBuZXdVc2VyVVJMIHx8IGNhbGxiYWNrVVJMIDogY2FsbGJhY2tVUkw7XG5cdH1cblx0dGhyb3cgY3R4LnJlZGlyZWN0KHRvUmVkaXJlY3RUbyk7XG59KTtcbmNvbnN0IE9BdXRoMkxpbmtBY2NvdW50Qm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0cHJvdmlkZXJJZDogei5zdHJpbmcoKSxcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCksXG5cdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQWRkaXRpb25hbCBzY29wZXMgdG8gcmVxdWVzdCB3aGVuIGxpbmtpbmcgdGhlIGFjY291bnRcIiB9KS5vcHRpb25hbCgpLFxuXHRlcnJvckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGlmIHRoZXJlIGlzIGFuIGVycm9yIGR1cmluZyB0aGUgbGluayBwcm9jZXNzXCIgfSkub3B0aW9uYWwoKVxufSk7XG4vKipcbiogIyMjIEVuZHBvaW50XG4qXG4qIFBPU1QgYC9vYXV0aDIvbGlua2BcbipcbiogIyMjIEFQSSBNZXRob2RzXG4qXG4qICoqc2VydmVyOioqXG4qIGBhdXRoLmFwaS5vQXV0aDJMaW5rQWNjb3VudGBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQub2F1dGgyLmxpbmtgXG4qXG4qIEBzZWUgW1JlYWQgb3VyIGRvY3MgdG8gbGVhcm4gbW9yZS5dKGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9nZW5lcmljLW9hdXRoI2FwaS1tZXRob2Qtb2F1dGgyLWxpbmspXG4qL1xuY29uc3Qgb0F1dGgyTGlua0FjY291bnQgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29hdXRoMi9saW5rXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogT0F1dGgyTGlua0FjY291bnRCb2R5U2NoZW1hLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJMaW5rIGFuIE9BdXRoMiBhY2NvdW50IHRvIHRoZSBjdXJyZW50IHVzZXIgc2Vzc2lvblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRob3JpemF0aW9uIFVSTCBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5IGZvciBsaW5raW5nIGFuIE9BdXRoMiBhY2NvdW50XCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXJsOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGF1dGhvcml6YXRpb24gVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIGZvciBsaW5raW5nIHRoZSBPQXV0aDIgYWNjb3VudFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZWRpcmVjdDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgdGhhdCB0aGUgY2xpZW50IHNob3VsZCByZWRpcmVjdCB0byB0aGUgcHJvdmlkZWQgVVJMXCIsXG5cdFx0XHRcdFx0XHRlbnVtOiBbdHJ1ZV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJ1cmxcIiwgXCJyZWRpcmVjdFwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYy5jb250ZXh0LnNlc3Npb247XG5cdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogR0VORVJJQ19PQVVUSF9FUlJPUl9DT0RFUy5TRVNTSU9OX1JFUVVJUkVEIH0pO1xuXHRjb25zdCBwcm92aWRlciA9IG9wdGlvbnMuY29uZmlnLmZpbmQoKHApID0+IHAucHJvdmlkZXJJZCA9PT0gYy5ib2R5LnByb3ZpZGVySWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBST1ZJREVSX05PVF9GT1VORCB9KTtcblx0Y29uc3QgeyBwcm92aWRlcklkLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCByZWRpcmVjdFVSSSwgYXV0aG9yaXphdGlvblVybCwgZGlzY292ZXJ5VXJsLCBwa2NlLCBzY29wZXMsIHByb21wdCwgYWNjZXNzVHlwZSwgYXV0aG9yaXphdGlvblVybFBhcmFtcyB9ID0gcHJvdmlkZXI7XG5cdGxldCBmaW5hbEF1dGhVcmwgPSBhdXRob3JpemF0aW9uVXJsO1xuXHRpZiAoIWZpbmFsQXV0aFVybCkge1xuXHRcdGlmICghZGlzY292ZXJ5VXJsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMuSU5WQUxJRF9PQVVUSF9DT05GSUdVUkFUSU9OIH0pO1xuXHRcdGNvbnN0IGRpc2NvdmVyeSA9IGF3YWl0IGJldHRlckZldGNoKGRpc2NvdmVyeVVybCwge1xuXHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0aGVhZGVyczogcHJvdmlkZXIuZGlzY292ZXJ5SGVhZGVycyxcblx0XHRcdG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKGNvbnRleHQuZXJyb3IubWVzc2FnZSwgY29udGV4dC5lcnJvciwgeyBkaXNjb3ZlcnlVcmwgfSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKGRpc2NvdmVyeS5kYXRhKSBmaW5hbEF1dGhVcmwgPSBkaXNjb3ZlcnkuZGF0YS5hdXRob3JpemF0aW9uX2VuZHBvaW50O1xuXHR9XG5cdGlmICghZmluYWxBdXRoVXJsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEdFTkVSSUNfT0FVVEhfRVJST1JfQ09ERVMuSU5WQUxJRF9PQVVUSF9DT05GSUdVUkFUSU9OIH0pO1xuXHRjb25zdCBzdGF0ZSA9IGF3YWl0IGdlbmVyYXRlU3RhdGUoYywge1xuXHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWxcblx0fSwgdm9pZCAwKTtcblx0Y29uc3QgYWRkaXRpb25hbFBhcmFtcyA9IHR5cGVvZiBhdXRob3JpemF0aW9uVXJsUGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBhdXRob3JpemF0aW9uVXJsUGFyYW1zKGMpIDogYXV0aG9yaXphdGlvblVybFBhcmFtcztcblx0Y29uc3QgdXJsID0gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG5cdFx0aWQ6IHByb3ZpZGVySWQsXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0Y2xpZW50SWQsXG5cdFx0XHRjbGllbnRTZWNyZXQsXG5cdFx0XHRyZWRpcmVjdFVSSTogcmVkaXJlY3RVUkkgfHwgYCR7Yy5jb250ZXh0LmJhc2VVUkx9L29hdXRoMi9jYWxsYmFjay8ke3Byb3ZpZGVySWR9YFxuXHRcdH0sXG5cdFx0YXV0aG9yaXphdGlvbkVuZHBvaW50OiBmaW5hbEF1dGhVcmwsXG5cdFx0c3RhdGU6IHN0YXRlLnN0YXRlLFxuXHRcdGNvZGVWZXJpZmllcjogcGtjZSA/IHN0YXRlLmNvZGVWZXJpZmllciA6IHZvaWQgMCxcblx0XHRzY29wZXM6IGMuYm9keS5zY29wZXMgfHwgc2NvcGVzIHx8IFtdLFxuXHRcdHJlZGlyZWN0VVJJOiByZWRpcmVjdFVSSSB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vb2F1dGgyL2NhbGxiYWNrLyR7cHJvdmlkZXJJZH1gLFxuXHRcdHByb21wdCxcblx0XHRhY2Nlc3NUeXBlLFxuXHRcdGFkZGl0aW9uYWxQYXJhbXNcblx0fSk7XG5cdHJldHVybiBjLmpzb24oe1xuXHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0cmVkaXJlY3Q6IHRydWVcblx0fSk7XG59KTtcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJbmZvKHRva2VucywgZmluYWxVc2VySW5mb1VybCkge1xuXHRpZiAodG9rZW5zLmlkVG9rZW4pIHtcblx0XHRjb25zdCBkZWNvZGVkID0gZGVjb2RlSnd0KHRva2Vucy5pZFRva2VuKTtcblx0XHRpZiAoZGVjb2RlZCkge1xuXHRcdFx0aWYgKGRlY29kZWQuc3ViICYmIGRlY29kZWQuZW1haWwpIHJldHVybiB7XG5cdFx0XHRcdGlkOiBkZWNvZGVkLnN1Yixcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogZGVjb2RlZC5lbWFpbF92ZXJpZmllZCxcblx0XHRcdFx0aW1hZ2U6IGRlY29kZWQucGljdHVyZSxcblx0XHRcdFx0Li4uZGVjb2RlZFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0aWYgKCFmaW5hbFVzZXJJbmZvVXJsKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBiZXR0ZXJGZXRjaChmaW5hbFVzZXJJbmZvVXJsLCB7XG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2Vucy5hY2Nlc3NUb2tlbn1gIH1cblx0fSk7XG5cdHJldHVybiB7XG5cdFx0aWQ6IHVzZXJJbmZvLmRhdGE/LnN1YiA/PyBcIlwiLFxuXHRcdGVtYWlsVmVyaWZpZWQ6IHVzZXJJbmZvLmRhdGE/LmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlLFxuXHRcdGVtYWlsOiB1c2VySW5mby5kYXRhPy5lbWFpbCxcblx0XHRpbWFnZTogdXNlckluZm8uZGF0YT8ucGljdHVyZSxcblx0XHRuYW1lOiB1c2VySW5mby5kYXRhPy5uYW1lLFxuXHRcdC4uLnVzZXJJbmZvLmRhdGFcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRVc2VySW5mbywgb0F1dGgyQ2FsbGJhY2ssIG9BdXRoMkxpbmtBY2NvdW50LCBzaWduSW5XaXRoT0F1dGgyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3V0ZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/routes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/haveibeenpwned/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/haveibeenpwned/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   haveIBeenPwned: () => (/* binding */ haveIBeenPwned)\n/* harmony export */ });\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n//#region src/plugins/haveibeenpwned/index.ts\nconst ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.defineErrorCodes)({ PASSWORD_COMPROMISED: \"The password you entered has been compromised. Please choose a different password.\" });\nasync function checkPasswordCompromise(password, customMessage) {\n\tif (!password) return;\n\tconst sha1Hash = (await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_3__.createHash)(\"SHA-1\", \"hex\").digest(password)).toUpperCase();\n\tconst prefix = sha1Hash.substring(0, 5);\n\tconst suffix = sha1Hash.substring(5);\n\ttry {\n\t\tconst { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__.betterFetch)(`https://api.pwnedpasswords.com/range/${prefix}`, { headers: {\n\t\t\t\"Add-Padding\": \"true\",\n\t\t\t\"User-Agent\": \"BetterAuth Password Checker\"\n\t\t} });\n\t\tif (error) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `Failed to check password. Status: ${error.status}` });\n\t\tif (data.split(\"\\n\").some((line) => line.split(\":\")[0].toUpperCase() === suffix.toUpperCase())) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: customMessage || ERROR_CODES.PASSWORD_COMPROMISED,\n\t\t\tcode: \"PASSWORD_COMPROMISED\"\n\t\t});\n\t} catch (error) {\n\t\tif (error instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError) throw error;\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to check password. Please try again later.\" });\n\t}\n}\nconst haveIBeenPwned = (options) => {\n\tconst paths = options?.paths || [\n\t\t\"/sign-up/email\",\n\t\t\"/change-password\",\n\t\t\"/reset-password\"\n\t];\n\treturn {\n\t\tid: \"haveIBeenPwned\",\n\t\tinit(ctx) {\n\t\t\treturn { context: { password: {\n\t\t\t\t...ctx.password,\n\t\t\t\tasync hash(password) {\n\t\t\t\t\tconst c = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_1__.getCurrentAuthContext)();\n\t\t\t\t\tif (!c.path || !paths.includes(c.path)) return ctx.password.hash(password);\n\t\t\t\t\tawait checkPasswordCompromise(password, options?.customPasswordCompromisedMessage);\n\t\t\t\t\treturn ctx.password.hash(password);\n\t\t\t\t}\n\t\t\t} } };\n\t\t},\n\t\toptions,\n\t\t$ERROR_CODES: ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2hhdmVpYmVlbnB3bmVkL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0M7QUFDbUI7QUFDUDtBQUNOO0FBQ0g7O0FBRWxEO0FBQ0Esb0JBQW9CLHlFQUFnQixHQUFHLDRHQUE0RztBQUNuSjtBQUNBO0FBQ0EseUJBQXlCLG1FQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLFVBQVUsY0FBYyxRQUFRLGdFQUFXLHlDQUF5QyxPQUFPLEtBQUs7QUFDaEc7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsb0RBQVEsNEJBQTRCLDhDQUE4QyxhQUFhLEdBQUc7QUFDekgsNEdBQTRHLG9EQUFRO0FBQ3BIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNILHVCQUF1QixvREFBUTtBQUMvQixZQUFZLG9EQUFRLDRCQUE0Qiw4REFBOEQ7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksV0FBVztBQUN2QjtBQUNBO0FBQ0EscUJBQXFCLGdGQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcaGF2ZWliZWVucHduZWRcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QXV0aENvbnRleHQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaGFzaFwiO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tIFwiQGJldHRlci1mZXRjaC9mZXRjaFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvaGF2ZWliZWVucHduZWQvaW5kZXgudHNcbmNvbnN0IEVSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7IFBBU1NXT1JEX0NPTVBST01JU0VEOiBcIlRoZSBwYXNzd29yZCB5b3UgZW50ZXJlZCBoYXMgYmVlbiBjb21wcm9taXNlZC4gUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBwYXNzd29yZC5cIiB9KTtcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrUGFzc3dvcmRDb21wcm9taXNlKHBhc3N3b3JkLCBjdXN0b21NZXNzYWdlKSB7XG5cdGlmICghcGFzc3dvcmQpIHJldHVybjtcblx0Y29uc3Qgc2hhMUhhc2ggPSAoYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0xXCIsIFwiaGV4XCIpLmRpZ2VzdChwYXNzd29yZCkpLnRvVXBwZXJDYXNlKCk7XG5cdGNvbnN0IHByZWZpeCA9IHNoYTFIYXNoLnN1YnN0cmluZygwLCA1KTtcblx0Y29uc3Qgc3VmZml4ID0gc2hhMUhhc2guc3Vic3RyaW5nKDUpO1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKGBodHRwczovL2FwaS5wd25lZHBhc3N3b3Jkcy5jb20vcmFuZ2UvJHtwcmVmaXh9YCwgeyBoZWFkZXJzOiB7XG5cdFx0XHRcIkFkZC1QYWRkaW5nXCI6IFwidHJ1ZVwiLFxuXHRcdFx0XCJVc2VyLUFnZW50XCI6IFwiQmV0dGVyQXV0aCBQYXNzd29yZCBDaGVja2VyXCJcblx0XHR9IH0pO1xuXHRcdGlmIChlcnJvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYEZhaWxlZCB0byBjaGVjayBwYXNzd29yZC4gU3RhdHVzOiAke2Vycm9yLnN0YXR1c31gIH0pO1xuXHRcdGlmIChkYXRhLnNwbGl0KFwiXFxuXCIpLnNvbWUoKGxpbmUpID0+IGxpbmUuc3BsaXQoXCI6XCIpWzBdLnRvVXBwZXJDYXNlKCkgPT09IHN1ZmZpeC50b1VwcGVyQ2FzZSgpKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0bWVzc2FnZTogY3VzdG9tTWVzc2FnZSB8fCBFUlJPUl9DT0RFUy5QQVNTV09SRF9DT01QUk9NSVNFRCxcblx0XHRcdGNvZGU6IFwiUEFTU1dPUkRfQ09NUFJPTUlTRURcIlxuXHRcdH0pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSUVycm9yKSB0aHJvdyBlcnJvcjtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkZhaWxlZCB0byBjaGVjayBwYXNzd29yZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIiB9KTtcblx0fVxufVxuY29uc3QgaGF2ZUlCZWVuUHduZWQgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBwYXRocyA9IG9wdGlvbnM/LnBhdGhzIHx8IFtcblx0XHRcIi9zaWduLXVwL2VtYWlsXCIsXG5cdFx0XCIvY2hhbmdlLXBhc3N3b3JkXCIsXG5cdFx0XCIvcmVzZXQtcGFzc3dvcmRcIlxuXHRdO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImhhdmVJQmVlblB3bmVkXCIsXG5cdFx0aW5pdChjdHgpIHtcblx0XHRcdHJldHVybiB7IGNvbnRleHQ6IHsgcGFzc3dvcmQ6IHtcblx0XHRcdFx0Li4uY3R4LnBhc3N3b3JkLFxuXHRcdFx0XHRhc3luYyBoYXNoKHBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0Y29uc3QgYyA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpO1xuXHRcdFx0XHRcdGlmICghYy5wYXRoIHx8ICFwYXRocy5pbmNsdWRlcyhjLnBhdGgpKSByZXR1cm4gY3R4LnBhc3N3b3JkLmhhc2gocGFzc3dvcmQpO1xuXHRcdFx0XHRcdGF3YWl0IGNoZWNrUGFzc3dvcmRDb21wcm9taXNlKHBhc3N3b3JkLCBvcHRpb25zPy5jdXN0b21QYXNzd29yZENvbXByb21pc2VkTWVzc2FnZSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5wYXNzd29yZC5oYXNoKHBhc3N3b3JkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSB9IH07XG5cdFx0fSxcblx0XHRvcHRpb25zLFxuXHRcdCRFUlJPUl9DT0RFUzogRVJST1JfQ09ERVNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaGF2ZUlCZWVuUHduZWQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/haveibeenpwned/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/index.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/index.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_KEY_TABLE_NAME: () => (/* reexport safe */ _api_key_index_mjs__WEBPACK_IMPORTED_MODULE_7__.API_KEY_TABLE_NAME),\n/* harmony export */   ERROR_CODES: () => (/* reexport safe */ _api_key_index_mjs__WEBPACK_IMPORTED_MODULE_7__.ERROR_CODES),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA),\n/* harmony export */   TWO_FACTOR_ERROR_CODES: () => (/* reexport safe */ _two_factor_error_code_mjs__WEBPACK_IMPORTED_MODULE_42__.TWO_FACTOR_ERROR_CODES),\n/* harmony export */   USERNAME_ERROR_CODES: () => (/* reexport safe */ _username_error_codes_mjs__WEBPACK_IMPORTED_MODULE_44__.USERNAME_ERROR_CODES),\n/* harmony export */   admin: () => (/* reexport safe */ _admin_admin_mjs__WEBPACK_IMPORTED_MODULE_4__.admin),\n/* harmony export */   anonymous: () => (/* reexport safe */ _anonymous_index_mjs__WEBPACK_IMPORTED_MODULE_6__.anonymous),\n/* harmony export */   apiKey: () => (/* reexport safe */ _api_key_index_mjs__WEBPACK_IMPORTED_MODULE_7__.apiKey),\n/* harmony export */   auth0: () => (/* reexport safe */ _generic_oauth_providers_auth0_mjs__WEBPACK_IMPORTED_MODULE_13__.auth0),\n/* harmony export */   bearer: () => (/* reexport safe */ _bearer_index_mjs__WEBPACK_IMPORTED_MODULE_8__.bearer),\n/* harmony export */   captcha: () => (/* reexport safe */ _captcha_index_mjs__WEBPACK_IMPORTED_MODULE_9__.captcha),\n/* harmony export */   createAccessControl: () => (/* reexport safe */ _access_access_mjs__WEBPACK_IMPORTED_MODULE_1__.createAccessControl),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_46__.createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_46__.createAuthMiddleware),\n/* harmony export */   createJwk: () => (/* reexport safe */ _jwt_utils_mjs__WEBPACK_IMPORTED_MODULE_24__.createJwk),\n/* harmony export */   customSession: () => (/* reexport safe */ _custom_session_index_mjs__WEBPACK_IMPORTED_MODULE_10__.customSession),\n/* harmony export */   defaultKeyHasher: () => (/* reexport safe */ _api_key_index_mjs__WEBPACK_IMPORTED_MODULE_7__.defaultKeyHasher),\n/* harmony export */   deviceAuthorization: () => (/* reexport safe */ _device_authorization_index_mjs__WEBPACK_IMPORTED_MODULE_11__.deviceAuthorization),\n/* harmony export */   deviceAuthorizationOptionsSchema: () => (/* reexport safe */ _device_authorization_index_mjs__WEBPACK_IMPORTED_MODULE_11__.deviceAuthorizationOptionsSchema),\n/* harmony export */   emailOTP: () => (/* reexport safe */ _email_otp_index_mjs__WEBPACK_IMPORTED_MODULE_12__.emailOTP),\n/* harmony export */   generateExportedKeyPair: () => (/* reexport safe */ _jwt_utils_mjs__WEBPACK_IMPORTED_MODULE_24__.generateExportedKeyPair),\n/* harmony export */   genericOAuth: () => (/* reexport safe */ _generic_oauth_index_mjs__WEBPACK_IMPORTED_MODULE_22__.genericOAuth),\n/* harmony export */   getClient: () => (/* reexport safe */ _oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_30__.getClient),\n/* harmony export */   getJwtToken: () => (/* reexport safe */ _jwt_sign_mjs__WEBPACK_IMPORTED_MODULE_25__.getJwtToken),\n/* harmony export */   getMCPProtectedResourceMetadata: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.getMCPProtectedResourceMetadata),\n/* harmony export */   getMCPProviderMetadata: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.getMCPProviderMetadata),\n/* harmony export */   getMetadata: () => (/* reexport safe */ _oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_30__.getMetadata),\n/* harmony export */   getOrgAdapter: () => (/* reexport safe */ _organization_adapter_mjs__WEBPACK_IMPORTED_MODULE_37__.getOrgAdapter),\n/* harmony export */   gumroad: () => (/* reexport safe */ _generic_oauth_providers_gumroad_mjs__WEBPACK_IMPORTED_MODULE_14__.gumroad),\n/* harmony export */   haveIBeenPwned: () => (/* reexport safe */ _haveibeenpwned_index_mjs__WEBPACK_IMPORTED_MODULE_23__.haveIBeenPwned),\n/* harmony export */   hubspot: () => (/* reexport safe */ _generic_oauth_providers_hubspot_mjs__WEBPACK_IMPORTED_MODULE_15__.hubspot),\n/* harmony export */   jwt: () => (/* reexport safe */ _jwt_index_mjs__WEBPACK_IMPORTED_MODULE_27__.jwt),\n/* harmony export */   keycloak: () => (/* reexport safe */ _generic_oauth_providers_keycloak_mjs__WEBPACK_IMPORTED_MODULE_16__.keycloak),\n/* harmony export */   lastLoginMethod: () => (/* reexport safe */ _last_login_method_index_mjs__WEBPACK_IMPORTED_MODULE_28__.lastLoginMethod),\n/* harmony export */   line: () => (/* reexport safe */ _generic_oauth_providers_line_mjs__WEBPACK_IMPORTED_MODULE_17__.line),\n/* harmony export */   magicLink: () => (/* reexport safe */ _magic_link_index_mjs__WEBPACK_IMPORTED_MODULE_29__.magicLink),\n/* harmony export */   mcp: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.mcp),\n/* harmony export */   microsoftEntraId: () => (/* reexport safe */ _generic_oauth_providers_microsoft_entra_id_mjs__WEBPACK_IMPORTED_MODULE_18__.microsoftEntraId),\n/* harmony export */   multiSession: () => (/* reexport safe */ _multi_session_index_mjs__WEBPACK_IMPORTED_MODULE_32__.multiSession),\n/* harmony export */   oAuthDiscoveryMetadata: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.oAuthDiscoveryMetadata),\n/* harmony export */   oAuthProtectedResourceMetadata: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.oAuthProtectedResourceMetadata),\n/* harmony export */   oAuthProxy: () => (/* reexport safe */ _oauth_proxy_index_mjs__WEBPACK_IMPORTED_MODULE_33__.oAuthProxy),\n/* harmony export */   oidcProvider: () => (/* reexport safe */ _oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_30__.oidcProvider),\n/* harmony export */   okta: () => (/* reexport safe */ _generic_oauth_providers_okta_mjs__WEBPACK_IMPORTED_MODULE_19__.okta),\n/* harmony export */   oneTap: () => (/* reexport safe */ _one_tap_index_mjs__WEBPACK_IMPORTED_MODULE_34__.oneTap),\n/* harmony export */   oneTimeToken: () => (/* reexport safe */ _one_time_token_index_mjs__WEBPACK_IMPORTED_MODULE_35__.oneTimeToken),\n/* harmony export */   openAPI: () => (/* reexport safe */ _open_api_index_mjs__WEBPACK_IMPORTED_MODULE_36__.openAPI),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_46__.optionsMiddleware),\n/* harmony export */   organization: () => (/* reexport safe */ _organization_organization_mjs__WEBPACK_IMPORTED_MODULE_38__.organization),\n/* harmony export */   parseRoles: () => (/* reexport safe */ _organization_organization_mjs__WEBPACK_IMPORTED_MODULE_38__.parseRoles),\n/* harmony export */   patreon: () => (/* reexport safe */ _generic_oauth_providers_patreon_mjs__WEBPACK_IMPORTED_MODULE_20__.patreon),\n/* harmony export */   phoneNumber: () => (/* reexport safe */ _phone_number_index_mjs__WEBPACK_IMPORTED_MODULE_40__.phoneNumber),\n/* harmony export */   role: () => (/* reexport safe */ _access_access_mjs__WEBPACK_IMPORTED_MODULE_1__.role),\n/* harmony export */   signJWT: () => (/* reexport safe */ _jwt_sign_mjs__WEBPACK_IMPORTED_MODULE_25__.signJWT),\n/* harmony export */   siwe: () => (/* reexport safe */ _siwe_index_mjs__WEBPACK_IMPORTED_MODULE_41__.siwe),\n/* harmony export */   slack: () => (/* reexport safe */ _generic_oauth_providers_slack_mjs__WEBPACK_IMPORTED_MODULE_21__.slack),\n/* harmony export */   toExpJWT: () => (/* reexport safe */ _jwt_utils_mjs__WEBPACK_IMPORTED_MODULE_24__.toExpJWT),\n/* harmony export */   twoFactor: () => (/* reexport safe */ _two_factor_index_mjs__WEBPACK_IMPORTED_MODULE_43__.twoFactor),\n/* harmony export */   twoFactorClient: () => (/* reexport safe */ _two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_3__.twoFactorClient),\n/* harmony export */   username: () => (/* reexport safe */ _username_index_mjs__WEBPACK_IMPORTED_MODULE_45__.username),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _jwt_verify_mjs__WEBPACK_IMPORTED_MODULE_26__.verifyJWT),\n/* harmony export */   withMcpAuth: () => (/* reexport safe */ _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__.withMcpAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/access.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n/* harmony import */ var _two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./two-factor/client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\");\n/* harmony import */ var _admin_admin_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./admin/admin.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/admin.mjs\");\n/* harmony import */ var _admin_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./admin/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/admin/index.mjs\");\n/* harmony import */ var _anonymous_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./anonymous/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/anonymous/index.mjs\");\n/* harmony import */ var _api_key_index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./api-key/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/api-key/index.mjs\");\n/* harmony import */ var _bearer_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./bearer/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/bearer/index.mjs\");\n/* harmony import */ var _captcha_index_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./captcha/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/captcha/index.mjs\");\n/* harmony import */ var _custom_session_index_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./custom-session/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/custom-session/index.mjs\");\n/* harmony import */ var _device_authorization_index_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./device-authorization/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/device-authorization/index.mjs\");\n/* harmony import */ var _email_otp_index_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./email-otp/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/email-otp/index.mjs\");\n/* harmony import */ var _generic_oauth_providers_auth0_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./generic-oauth/providers/auth0.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/auth0.mjs\");\n/* harmony import */ var _generic_oauth_providers_gumroad_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./generic-oauth/providers/gumroad.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/gumroad.mjs\");\n/* harmony import */ var _generic_oauth_providers_hubspot_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./generic-oauth/providers/hubspot.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/hubspot.mjs\");\n/* harmony import */ var _generic_oauth_providers_keycloak_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./generic-oauth/providers/keycloak.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/keycloak.mjs\");\n/* harmony import */ var _generic_oauth_providers_line_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./generic-oauth/providers/line.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/line.mjs\");\n/* harmony import */ var _generic_oauth_providers_microsoft_entra_id_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./generic-oauth/providers/microsoft-entra-id.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/microsoft-entra-id.mjs\");\n/* harmony import */ var _generic_oauth_providers_okta_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./generic-oauth/providers/okta.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/okta.mjs\");\n/* harmony import */ var _generic_oauth_providers_patreon_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./generic-oauth/providers/patreon.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/patreon.mjs\");\n/* harmony import */ var _generic_oauth_providers_slack_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./generic-oauth/providers/slack.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/providers/slack.mjs\");\n/* harmony import */ var _generic_oauth_index_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./generic-oauth/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/generic-oauth/index.mjs\");\n/* harmony import */ var _haveibeenpwned_index_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./haveibeenpwned/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/haveibeenpwned/index.mjs\");\n/* harmony import */ var _jwt_utils_mjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./jwt/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/utils.mjs\");\n/* harmony import */ var _jwt_sign_mjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./jwt/sign.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/sign.mjs\");\n/* harmony import */ var _jwt_verify_mjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./jwt/verify.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/verify.mjs\");\n/* harmony import */ var _jwt_index_mjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./jwt/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/index.mjs\");\n/* harmony import */ var _last_login_method_index_mjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./last-login-method/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/index.mjs\");\n/* harmony import */ var _magic_link_index_mjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./magic-link/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/magic-link/index.mjs\");\n/* harmony import */ var _oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./oidc-provider/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs\");\n/* harmony import */ var _mcp_index_mjs__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./mcp/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/mcp/index.mjs\");\n/* harmony import */ var _multi_session_index_mjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./multi-session/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/multi-session/index.mjs\");\n/* harmony import */ var _oauth_proxy_index_mjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./oauth-proxy/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/index.mjs\");\n/* harmony import */ var _one_tap_index_mjs__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./one-tap/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/one-tap/index.mjs\");\n/* harmony import */ var _one_time_token_index_mjs__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./one-time-token/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/index.mjs\");\n/* harmony import */ var _open_api_index_mjs__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./open-api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/open-api/index.mjs\");\n/* harmony import */ var _organization_adapter_mjs__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./organization/adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _organization_organization_mjs__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./organization/organization.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs\");\n/* harmony import */ var _organization_index_mjs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./organization/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/index.mjs\");\n/* harmony import */ var _phone_number_index_mjs__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./phone-number/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/index.mjs\");\n/* harmony import */ var _siwe_index_mjs__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./siwe/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/siwe/index.mjs\");\n/* harmony import */ var _two_factor_error_code_mjs__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./two-factor/error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _two_factor_index_mjs__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./two-factor/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/index.mjs\");\n/* harmony import */ var _username_error_codes_mjs__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./username/error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/username/error-codes.mjs\");\n/* harmony import */ var _username_index_mjs__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./username/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/username/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ0s7QUFDcEM7QUFDOEI7QUFDaEI7QUFDZjtBQUN1QjtBQUM4QztBQUNwRDtBQUNFO0FBQ2E7QUFDOEM7QUFDeEQ7QUFDVztBQUNJO0FBQ0E7QUFDRTtBQUNSO0FBQzBCO0FBQzFCO0FBQ007QUFDSjtBQUNIO0FBQ0c7QUFDbUI7QUFDekI7QUFDVDtBQUNQO0FBQzBCO0FBQ2I7QUFDOEI7QUFDbUY7QUFDM0c7QUFDSjtBQUNSO0FBQ2E7QUFDWDtBQUNZO0FBQ2dCO0FBQ3pDO0FBQ3FCO0FBQ2Y7QUFDNkI7QUFDbEI7QUFDZTtBQUNsQjtBQUNvRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVBY2Nlc3NDb250cm9sLCByb2xlIH0gZnJvbSBcIi4vYWNjZXNzL2FjY2Vzcy5tanNcIjtcbmltcG9ydCBcIi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdHdvRmFjdG9yQ2xpZW50IH0gZnJvbSBcIi4vdHdvLWZhY3Rvci9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBhZG1pbiB9IGZyb20gXCIuL2FkbWluL2FkbWluLm1qc1wiO1xuaW1wb3J0IFwiLi9hZG1pbi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGFub255bW91cyB9IGZyb20gXCIuL2Fub255bW91cy9pbmRleC5tanNcIjtcbmltcG9ydCB7IEFQSV9LRVlfVEFCTEVfTkFNRSwgRVJST1JfQ09ERVMsIGFwaUtleSwgZGVmYXVsdEtleUhhc2hlciB9IGZyb20gXCIuL2FwaS1rZXkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBiZWFyZXIgfSBmcm9tIFwiLi9iZWFyZXIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjYXB0Y2hhIH0gZnJvbSBcIi4vY2FwdGNoYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGN1c3RvbVNlc3Npb24gfSBmcm9tIFwiLi9jdXN0b20tc2Vzc2lvbi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRldmljZUF1dGhvcml6YXRpb24sIGRldmljZUF1dGhvcml6YXRpb25PcHRpb25zU2NoZW1hIH0gZnJvbSBcIi4vZGV2aWNlLWF1dGhvcml6YXRpb24vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBlbWFpbE9UUCB9IGZyb20gXCIuL2VtYWlsLW90cC9pbmRleC5tanNcIjtcbmltcG9ydCB7IGF1dGgwIH0gZnJvbSBcIi4vZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvYXV0aDAubWpzXCI7XG5pbXBvcnQgeyBndW1yb2FkIH0gZnJvbSBcIi4vZ2VuZXJpYy1vYXV0aC9wcm92aWRlcnMvZ3Vtcm9hZC5tanNcIjtcbmltcG9ydCB7IGh1YnNwb3QgfSBmcm9tIFwiLi9nZW5lcmljLW9hdXRoL3Byb3ZpZGVycy9odWJzcG90Lm1qc1wiO1xuaW1wb3J0IHsga2V5Y2xvYWsgfSBmcm9tIFwiLi9nZW5lcmljLW9hdXRoL3Byb3ZpZGVycy9rZXljbG9hay5tanNcIjtcbmltcG9ydCB7IGxpbmUgfSBmcm9tIFwiLi9nZW5lcmljLW9hdXRoL3Byb3ZpZGVycy9saW5lLm1qc1wiO1xuaW1wb3J0IHsgbWljcm9zb2Z0RW50cmFJZCB9IGZyb20gXCIuL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL21pY3Jvc29mdC1lbnRyYS1pZC5tanNcIjtcbmltcG9ydCB7IG9rdGEgfSBmcm9tIFwiLi9nZW5lcmljLW9hdXRoL3Byb3ZpZGVycy9va3RhLm1qc1wiO1xuaW1wb3J0IHsgcGF0cmVvbiB9IGZyb20gXCIuL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3BhdHJlb24ubWpzXCI7XG5pbXBvcnQgeyBzbGFjayB9IGZyb20gXCIuL2dlbmVyaWMtb2F1dGgvcHJvdmlkZXJzL3NsYWNrLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJpY09BdXRoIH0gZnJvbSBcIi4vZ2VuZXJpYy1vYXV0aC9pbmRleC5tanNcIjtcbmltcG9ydCB7IGhhdmVJQmVlblB3bmVkIH0gZnJvbSBcIi4vaGF2ZWliZWVucHduZWQvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVKd2ssIGdlbmVyYXRlRXhwb3J0ZWRLZXlQYWlyLCB0b0V4cEpXVCB9IGZyb20gXCIuL2p3dC91dGlscy5tanNcIjtcbmltcG9ydCB7IGdldEp3dFRva2VuLCBzaWduSldUIH0gZnJvbSBcIi4vand0L3NpZ24ubWpzXCI7XG5pbXBvcnQgeyB2ZXJpZnlKV1QgfSBmcm9tIFwiLi9qd3QvdmVyaWZ5Lm1qc1wiO1xuaW1wb3J0IHsgand0IH0gZnJvbSBcIi4vand0L2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbGFzdExvZ2luTWV0aG9kIH0gZnJvbSBcIi4vbGFzdC1sb2dpbi1tZXRob2QvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtYWdpY0xpbmsgfSBmcm9tIFwiLi9tYWdpYy1saW5rL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q2xpZW50LCBnZXRNZXRhZGF0YSwgb2lkY1Byb3ZpZGVyIH0gZnJvbSBcIi4vb2lkYy1wcm92aWRlci9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldE1DUFByb3RlY3RlZFJlc291cmNlTWV0YWRhdGEsIGdldE1DUFByb3ZpZGVyTWV0YWRhdGEsIG1jcCwgb0F1dGhEaXNjb3ZlcnlNZXRhZGF0YSwgb0F1dGhQcm90ZWN0ZWRSZXNvdXJjZU1ldGFkYXRhLCB3aXRoTWNwQXV0aCB9IGZyb20gXCIuL21jcC9pbmRleC5tanNcIjtcbmltcG9ydCB7IG11bHRpU2Vzc2lvbiB9IGZyb20gXCIuL211bHRpLXNlc3Npb24vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBvQXV0aFByb3h5IH0gZnJvbSBcIi4vb2F1dGgtcHJveHkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBvbmVUYXAgfSBmcm9tIFwiLi9vbmUtdGFwL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgb25lVGltZVRva2VuIH0gZnJvbSBcIi4vb25lLXRpbWUtdG9rZW4vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBvcGVuQVBJIH0gZnJvbSBcIi4vb3Blbi1hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRPcmdBZGFwdGVyIH0gZnJvbSBcIi4vb3JnYW5pemF0aW9uL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBvcmdhbml6YXRpb24sIHBhcnNlUm9sZXMgfSBmcm9tIFwiLi9vcmdhbml6YXRpb24vb3JnYW5pemF0aW9uLm1qc1wiO1xuaW1wb3J0IFwiLi9vcmdhbml6YXRpb24vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBwaG9uZU51bWJlciB9IGZyb20gXCIuL3Bob25lLW51bWJlci9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNpd2UgfSBmcm9tIFwiLi9zaXdlL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL3R3by1mYWN0b3IvZXJyb3ItY29kZS5tanNcIjtcbmltcG9ydCB7IHR3b0ZhY3RvciB9IGZyb20gXCIuL3R3by1mYWN0b3IvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVU0VSTkFNRV9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL3VzZXJuYW1lL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgdXNlcm5hbWUgfSBmcm9tIFwiLi91c2VybmFtZS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUsIG9wdGlvbnNNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG5leHBvcnQgeyBBUElfS0VZX1RBQkxFX05BTUUsIEVSUk9SX0NPREVTLCBISURFX01FVEFEQVRBLCBUV09fRkFDVE9SX0VSUk9SX0NPREVTLCBVU0VSTkFNRV9FUlJPUl9DT0RFUywgYWRtaW4sIGFub255bW91cywgYXBpS2V5LCBhdXRoMCwgYmVhcmVyLCBjYXB0Y2hhLCBjcmVhdGVBY2Nlc3NDb250cm9sLCBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBjcmVhdGVKd2ssIGN1c3RvbVNlc3Npb24sIGRlZmF1bHRLZXlIYXNoZXIsIGRldmljZUF1dGhvcml6YXRpb24sIGRldmljZUF1dGhvcml6YXRpb25PcHRpb25zU2NoZW1hLCBlbWFpbE9UUCwgZ2VuZXJhdGVFeHBvcnRlZEtleVBhaXIsIGdlbmVyaWNPQXV0aCwgZ2V0Q2xpZW50LCBnZXRKd3RUb2tlbiwgZ2V0TUNQUHJvdGVjdGVkUmVzb3VyY2VNZXRhZGF0YSwgZ2V0TUNQUHJvdmlkZXJNZXRhZGF0YSwgZ2V0TWV0YWRhdGEsIGdldE9yZ0FkYXB0ZXIsIGd1bXJvYWQsIGhhdmVJQmVlblB3bmVkLCBodWJzcG90LCBqd3QsIGtleWNsb2FrLCBsYXN0TG9naW5NZXRob2QsIGxpbmUsIG1hZ2ljTGluaywgbWNwLCBtaWNyb3NvZnRFbnRyYUlkLCBtdWx0aVNlc3Npb24sIG9BdXRoRGlzY292ZXJ5TWV0YWRhdGEsIG9BdXRoUHJvdGVjdGVkUmVzb3VyY2VNZXRhZGF0YSwgb0F1dGhQcm94eSwgb2lkY1Byb3ZpZGVyLCBva3RhLCBvbmVUYXAsIG9uZVRpbWVUb2tlbiwgb3BlbkFQSSwgb3B0aW9uc01pZGRsZXdhcmUsIG9yZ2FuaXphdGlvbiwgcGFyc2VSb2xlcywgcGF0cmVvbiwgcGhvbmVOdW1iZXIsIHJvbGUsIHNpZ25KV1QsIHNpd2UsIHNsYWNrLCB0b0V4cEpXVCwgdHdvRmFjdG9yLCB0d29GYWN0b3JDbGllbnQsIHVzZXJuYW1lLCB2ZXJpZnlKV1QsIHdpdGhNY3BBdXRoIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/adapter.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getJwksAdapter: () => (/* binding */ getJwksAdapter)\n/* harmony export */ });\n//#region src/plugins/jwt/adapter.ts\nconst getJwksAdapter = (adapter, options) => {\n\treturn {\n\t\tgetAllKeys: async (ctx) => {\n\t\t\tif (options?.adapter?.getJwks) return await options.adapter.getJwks(ctx);\n\t\t\treturn await adapter.findMany({ model: \"jwks\" });\n\t\t},\n\t\tgetLatestKey: async (ctx) => {\n\t\t\tif (options?.adapter?.getJwks) return (await options.adapter.getJwks(ctx))?.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())[0];\n\t\t\treturn (await adapter.findMany({ model: \"jwks\" }))?.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())[0];\n\t\t},\n\t\tcreateJwk: async (ctx, webKey) => {\n\t\t\tif (options?.adapter?.createJwk) return await options.adapter.createJwk(webKey, ctx);\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"jwks\",\n\t\t\t\tdata: {\n\t\t\t\t\t...webKey,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxlQUFlO0FBQ2xELEdBQUc7QUFDSDtBQUNBO0FBQ0Esb0NBQW9DLGVBQWU7QUFDbkQsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcand0XFxhZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvand0L2FkYXB0ZXIudHNcbmNvbnN0IGdldEp3a3NBZGFwdGVyID0gKGFkYXB0ZXIsIG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRnZXRBbGxLZXlzOiBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRpZiAob3B0aW9ucz8uYWRhcHRlcj8uZ2V0SndrcykgcmV0dXJuIGF3YWl0IG9wdGlvbnMuYWRhcHRlci5nZXRKd2tzKGN0eCk7XG5cdFx0XHRyZXR1cm4gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7IG1vZGVsOiBcImp3a3NcIiB9KTtcblx0XHR9LFxuXHRcdGdldExhdGVzdEtleTogYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0aWYgKG9wdGlvbnM/LmFkYXB0ZXI/LmdldEp3a3MpIHJldHVybiAoYXdhaXQgb3B0aW9ucy5hZGFwdGVyLmdldEp3a3MoY3R4KSk/LnNvcnQoKGEsIGIpID0+IGIuY3JlYXRlZEF0LmdldFRpbWUoKSAtIGEuY3JlYXRlZEF0LmdldFRpbWUoKSlbMF07XG5cdFx0XHRyZXR1cm4gKGF3YWl0IGFkYXB0ZXIuZmluZE1hbnkoeyBtb2RlbDogXCJqd2tzXCIgfSkpPy5zb3J0KChhLCBiKSA9PiBiLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLSBhLmNyZWF0ZWRBdC5nZXRUaW1lKCkpWzBdO1xuXHRcdH0sXG5cdFx0Y3JlYXRlSndrOiBhc3luYyAoY3R4LCB3ZWJLZXkpID0+IHtcblx0XHRcdGlmIChvcHRpb25zPy5hZGFwdGVyPy5jcmVhdGVKd2spIHJldHVybiBhd2FpdCBvcHRpb25zLmFkYXB0ZXIuY3JlYXRlSndrKHdlYktleSwgY3R4KTtcblx0XHRcdHJldHVybiBhd2FpdCBhZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcImp3a3NcIixcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdC4uLndlYktleSxcblx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0Sndrc0FkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkYXB0ZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/client.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/client.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   jwtClient: () => (/* binding */ jwtClient)\n/* harmony export */ });\n//#region src/plugins/jwt/client.ts\nconst jwtClient = (options) => {\n\tconst jwksPath = options?.jwks?.jwksPath ?? \"/jwks\";\n\treturn {\n\t\tid: \"better-auth-client\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: { [jwksPath]: \"GET\" },\n\t\tgetActions: ($fetch) => ({ jwks: async (fetchOptions) => {\n\t\t\treturn await $fetch(jwksPath, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\t...fetchOptions\n\t\t\t});\n\t\t} })\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLGlCQUFpQixtQkFBbUI7QUFDcEMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGp3dFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvand0L2NsaWVudC50c1xuY29uc3Qgand0Q2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgandrc1BhdGggPSBvcHRpb25zPy5qd2tzPy5qd2tzUGF0aCA/PyBcIi9qd2tzXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiYmV0dGVyLWF1dGgtY2xpZW50XCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fSxcblx0XHRwYXRoTWV0aG9kczogeyBbandrc1BhdGhdOiBcIkdFVFwiIH0sXG5cdFx0Z2V0QWN0aW9uczogKCRmZXRjaCkgPT4gKHsgandrczogYXN5bmMgKGZldGNoT3B0aW9ucykgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0ICRmZXRjaChqd2tzUGF0aCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdC4uLmZldGNoT3B0aW9uc1xuXHRcdFx0fSk7XG5cdFx0fSB9KVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBqd3RDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createJwk: () => (/* reexport safe */ _utils_mjs__WEBPACK_IMPORTED_MODULE_5__.createJwk),\n/* harmony export */   generateExportedKeyPair: () => (/* reexport safe */ _utils_mjs__WEBPACK_IMPORTED_MODULE_5__.generateExportedKeyPair),\n/* harmony export */   getJwtToken: () => (/* reexport safe */ _sign_mjs__WEBPACK_IMPORTED_MODULE_6__.getJwtToken),\n/* harmony export */   jwt: () => (/* binding */ jwt),\n/* harmony export */   signJWT: () => (/* reexport safe */ _sign_mjs__WEBPACK_IMPORTED_MODULE_6__.signJWT),\n/* harmony export */   toExpJWT: () => (/* reexport safe */ _utils_mjs__WEBPACK_IMPORTED_MODULE_5__.toExpJWT),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _verify_mjs__WEBPACK_IMPORTED_MODULE_7__.verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/schema.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/utils.mjs\");\n/* harmony import */ var _sign_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./sign.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/sign.mjs\");\n/* harmony import */ var _verify_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./verify.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/verify.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/jwt/index.ts\nconst signJWTBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tpayload: zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()),\n\toverrideOptions: zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()).optional()\n});\nconst verifyJWTBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\ttoken: zod__WEBPACK_IMPORTED_MODULE_10__.string(),\n\tissuer: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional()\n});\nconst jwt = (options) => {\n\tif (options?.jwt?.sign && !options.jwks?.remoteUrl) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"options.jwks.remoteUrl must be set when using options.jwt.sign\");\n\tif (options?.jwks?.remoteUrl && !options.jwks?.keyPairConfig?.alg) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"options.jwks.keyPairConfig.alg must be specified when using the oidc plugin with options.jwks.remoteUrl\");\n\tconst jwksPath = options?.jwks?.jwksPath ?? \"/jwks\";\n\tif (typeof jwksPath !== \"string\" || jwksPath.length === 0 || !jwksPath.startsWith(\"/\") || jwksPath.includes(\"..\")) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"options.jwks.jwksPath must be a non-empty string starting with '/' and not contain '..'\");\n\treturn {\n\t\tid: \"jwt\",\n\t\toptions,\n\t\tendpoints: {\n\t\t\tgetJwks: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(jwksPath, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\toperationId: \"getJSONWebKeySet\",\n\t\t\t\t\tdescription: \"Get the JSON Web Key Set\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"JSON Web Key Set retrieved successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { keys: {\n\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\tdescription: \"Array of public JSON Web Keys\",\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\tkid: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Key ID uniquely identifying the key, corresponds to the 'id' from the stored Jwk\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tkty: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Key type (e.g., 'RSA', 'EC', 'OKP')\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\talg: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Algorithm intended for use with the key (e.g., 'EdDSA', 'RS256')\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tuse: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Intended use of the public key (e.g., 'sig' for signature)\",\n\t\t\t\t\t\t\t\t\t\t\tenum: [\"sig\"],\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tn: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Modulus for RSA keys (base64url-encoded)\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\te: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Exponent for RSA keys (base64url-encoded)\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcrv: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Curve name for elliptic curve keys (e.g., 'Ed25519', 'P-256')\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tx: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"X coordinate for elliptic curve keys (base64url-encoded)\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ty: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Y coordinate for elliptic curve keys (base64url-encoded)\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\t\"kid\",\n\t\t\t\t\t\t\t\t\t\t\"kty\",\n\t\t\t\t\t\t\t\t\t\t\"alg\"\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} },\n\t\t\t\t\t\t\trequired: [\"keys\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (options?.jwks?.remoteUrl) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"NOT_FOUND\");\n\t\t\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getJwksAdapter)(ctx.context.adapter, options);\n\t\t\t\tlet keySets = await adapter.getAllKeys(ctx);\n\t\t\t\tif (!keySets || keySets?.length === 0) {\n\t\t\t\t\tawait (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.createJwk)(ctx, options);\n\t\t\t\t\tkeySets = await adapter.getAllKeys(ctx);\n\t\t\t\t}\n\t\t\t\tif (!keySets?.length) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BetterAuthError(\"No key sets found. Make sure you have a key in your database.\");\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst gracePeriod = (options?.jwks?.gracePeriod ?? 3600 * 24 * 30) * 1e3;\n\t\t\t\tconst keys = keySets.filter((key) => {\n\t\t\t\t\tif (!key.expiresAt) return true;\n\t\t\t\t\treturn key.expiresAt.getTime() + gracePeriod > now;\n\t\t\t\t});\n\t\t\t\tconst keyPairConfig = options?.jwks?.keyPairConfig;\n\t\t\t\tconst defaultCrv = keyPairConfig ? \"crv\" in keyPairConfig ? keyPairConfig.crv : void 0 : void 0;\n\t\t\t\treturn ctx.json({ keys: keys.map((keySet) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\talg: keySet.alg ?? options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\",\n\t\t\t\t\t\tcrv: keySet.crv ?? defaultCrv,\n\t\t\t\t\t\t...JSON.parse(keySet.publicKey),\n\t\t\t\t\t\tkid: keySet.id\n\t\t\t\t\t};\n\t\t\t\t}) });\n\t\t\t}),\n\t\t\tgetToken: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/token\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\trequireHeaders: true,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\toperationId: \"getJSONWebToken\",\n\t\t\t\t\tdescription: \"Get a JWT token\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst jwt$1 = await (0,_sign_mjs__WEBPACK_IMPORTED_MODULE_6__.getJwtToken)(ctx, options);\n\t\t\t\treturn ctx.json({ token: jwt$1 });\n\t\t\t}),\n\t\t\tsignJWT: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmetadata: { $Infer: { body: {} } },\n\t\t\t\tbody: signJWTBodySchema\n\t\t\t}, async (c) => {\n\t\t\t\tconst jwt$1 = await (0,_sign_mjs__WEBPACK_IMPORTED_MODULE_6__.signJWT)(c, {\n\t\t\t\t\toptions: {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\t...c.body.overrideOptions\n\t\t\t\t\t},\n\t\t\t\t\tpayload: c.body.payload\n\t\t\t\t});\n\t\t\t\treturn c.json({ token: jwt$1 });\n\t\t\t}),\n\t\t\tverifyJWT: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tmetadata: { $Infer: {\n\t\t\t\t\tbody: {},\n\t\t\t\t\tresponse: {}\n\t\t\t\t} },\n\t\t\t\tbody: verifyJWTBodySchema\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst overrideOptions = ctx.body.issuer ? {\n\t\t\t\t\t...options,\n\t\t\t\t\tjwt: {\n\t\t\t\t\t\t...options?.jwt,\n\t\t\t\t\t\tissuer: ctx.body.issuer\n\t\t\t\t\t}\n\t\t\t\t} : options;\n\t\t\t\tconst payload = await (0,_verify_mjs__WEBPACK_IMPORTED_MODULE_7__.verifyJWT)(ctx.body.token, overrideOptions);\n\t\t\t\treturn ctx.json({ payload });\n\t\t\t})\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher(context) {\n\t\t\t\treturn context.path === \"/get-session\";\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tif (options?.disableSettingJwtHeader) return;\n\t\t\t\tconst session = ctx.context.session || ctx.context.newSession;\n\t\t\t\tif (session && session.session) {\n\t\t\t\t\tconst jwt$1 = await (0,_sign_mjs__WEBPACK_IMPORTED_MODULE_6__.getJwtToken)(ctx, options);\n\t\t\t\t\tconst exposedHeaders = ctx.context.responseHeaders?.get(\"access-control-expose-headers\") || \"\";\n\t\t\t\t\tconst headersSet = new Set(exposedHeaders.split(\",\").map((header) => header.trim()).filter(Boolean));\n\t\t\t\t\theadersSet.add(\"set-auth-jwt\");\n\t\t\t\t\tctx.setHeader(\"set-auth-jwt\", jwt$1);\n\t\t\t\t\tctx.setHeader(\"Access-Control-Expose-Headers\", Array.from(headersSet).join(\", \"));\n\t\t\t\t}\n\t\t\t})\n\t\t}] },\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_4__.schema, options?.schema)\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ2U7QUFDbEI7QUFDQTtBQUNUO0FBQ3FDO0FBQ3pCO0FBQ1Q7QUFDaUI7QUFDakM7QUFDd0Q7O0FBRWpGO0FBQ0EsMEJBQTBCLHdDQUFRO0FBQ2xDLFVBQVUsd0NBQVEsQ0FBQyx3Q0FBUSxJQUFJLHFDQUFLO0FBQ3BDLGtCQUFrQix3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUs7QUFDNUMsQ0FBQztBQUNELDRCQUE0Qix3Q0FBUTtBQUNwQyxRQUFRLHdDQUFRO0FBQ2hCLFNBQVMsd0NBQVE7QUFDakIsQ0FBQztBQUNEO0FBQ0EsK0RBQStELG9FQUFlO0FBQzlFLDhFQUE4RSxvRUFBZTtBQUM3RjtBQUNBLDhIQUE4SCxvRUFBZTtBQUM3STtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUVBQWtCO0FBQzlCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDRDQUE0QyxvREFBUTtBQUNwRCxvQkFBb0IsNERBQWM7QUFDbEM7QUFDQTtBQUNBLFdBQVcscURBQVM7QUFDcEI7QUFDQTtBQUNBLG9DQUFvQyxvRUFBZTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxHQUFHO0FBQ1IsSUFBSTtBQUNKLGFBQWEseUVBQWtCO0FBQy9CO0FBQ0E7QUFDQSxVQUFVLHNFQUFpQjtBQUMzQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osd0JBQXdCLHNEQUFXO0FBQ25DLHNCQUFzQixjQUFjO0FBQ3BDLElBQUk7QUFDSixZQUFZLHlFQUFrQjtBQUM5QjtBQUNBLGdCQUFnQixVQUFVLFlBQVk7QUFDdEM7QUFDQSxJQUFJO0FBQ0osd0JBQXdCLGtEQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTCxvQkFBb0IsY0FBYztBQUNsQyxJQUFJO0FBQ0osY0FBYyx5RUFBa0I7QUFDaEM7QUFDQSxnQkFBZ0I7QUFDaEIsYUFBYTtBQUNiO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiwwQkFBMEIsc0RBQVM7QUFDbkMsc0JBQXNCLFNBQVM7QUFDL0IsSUFBSTtBQUNKLEdBQUc7QUFDSCxXQUFXO0FBQ1g7QUFDQTtBQUNBLElBQUk7QUFDSixZQUFZLDJFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUcsR0FBRztBQUNOLFVBQVUsMkRBQVcsQ0FBQywrQ0FBTTtBQUM1QjtBQUNBOztBQUVBO0FBQzhGO0FBQzlGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcand0XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2VTY2hlbWEgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0Sndrc0FkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVyLm1qc1wiO1xuaW1wb3J0IHsgc2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlSndrLCBnZW5lcmF0ZUV4cG9ydGVkS2V5UGFpciwgdG9FeHBKV1QgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IGdldEp3dFRva2VuLCBzaWduSldUIH0gZnJvbSBcIi4vc2lnbi5tanNcIjtcbmltcG9ydCB7IHZlcmlmeUpXVCB9IGZyb20gXCIuL3ZlcmlmeS5tanNcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvand0L2luZGV4LnRzXG5jb25zdCBzaWduSldUQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0cGF5bG9hZDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG5cdG92ZXJyaWRlT3B0aW9uczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCB2ZXJpZnlKV1RCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHR0b2tlbjogei5zdHJpbmcoKSxcblx0aXNzdWVyOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuY29uc3Qgand0ID0gKG9wdGlvbnMpID0+IHtcblx0aWYgKG9wdGlvbnM/Lmp3dD8uc2lnbiAmJiAhb3B0aW9ucy5qd2tzPy5yZW1vdGVVcmwpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJvcHRpb25zLmp3a3MucmVtb3RlVXJsIG11c3QgYmUgc2V0IHdoZW4gdXNpbmcgb3B0aW9ucy5qd3Quc2lnblwiKTtcblx0aWYgKG9wdGlvbnM/Lmp3a3M/LnJlbW90ZVVybCAmJiAhb3B0aW9ucy5qd2tzPy5rZXlQYWlyQ29uZmlnPy5hbGcpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJvcHRpb25zLmp3a3Mua2V5UGFpckNvbmZpZy5hbGcgbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0aGUgb2lkYyBwbHVnaW4gd2l0aCBvcHRpb25zLmp3a3MucmVtb3RlVXJsXCIpO1xuXHRjb25zdCBqd2tzUGF0aCA9IG9wdGlvbnM/Lmp3a3M/Lmp3a3NQYXRoID8/IFwiL2p3a3NcIjtcblx0aWYgKHR5cGVvZiBqd2tzUGF0aCAhPT0gXCJzdHJpbmdcIiB8fCBqd2tzUGF0aC5sZW5ndGggPT09IDAgfHwgIWp3a3NQYXRoLnN0YXJ0c1dpdGgoXCIvXCIpIHx8IGp3a3NQYXRoLmluY2x1ZGVzKFwiLi5cIikpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJvcHRpb25zLmp3a3Muandrc1BhdGggbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgc3RhcnRpbmcgd2l0aCAnLycgYW5kIG5vdCBjb250YWluICcuLidcIik7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiand0XCIsXG5cdFx0b3B0aW9ucyxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdGdldEp3a3M6IGNyZWF0ZUF1dGhFbmRwb2ludChqd2tzUGF0aCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRvcGVyYXRpb25JZDogXCJnZXRKU09OV2ViS2V5U2V0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiR2V0IHRoZSBKU09OIFdlYiBLZXkgU2V0XCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkpTT04gV2ViIEtleSBTZXQgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogeyBrZXlzOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFycmF5IG9mIHB1YmxpYyBKU09OIFdlYiBLZXlzXCIsXG5cdFx0XHRcdFx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGtpZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiS2V5IElEIHVuaXF1ZWx5IGlkZW50aWZ5aW5nIHRoZSBrZXksIGNvcnJlc3BvbmRzIHRvIHRoZSAnaWQnIGZyb20gdGhlIHN0b3JlZCBKd2tcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRrdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIktleSB0eXBlIChlLmcuLCAnUlNBJywgJ0VDJywgJ09LUCcpXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0YWxnOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBbGdvcml0aG0gaW50ZW5kZWQgZm9yIHVzZSB3aXRoIHRoZSBrZXkgKGUuZy4sICdFZERTQScsICdSUzI1NicpXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dXNlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbnRlbmRlZCB1c2Ugb2YgdGhlIHB1YmxpYyBrZXkgKGUuZy4sICdzaWcnIGZvciBzaWduYXR1cmUpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW51bTogW1wic2lnXCJdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG46IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk1vZHVsdXMgZm9yIFJTQSBrZXlzIChiYXNlNjR1cmwtZW5jb2RlZClcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJFeHBvbmVudCBmb3IgUlNBIGtleXMgKGJhc2U2NHVybC1lbmNvZGVkKVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNydjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3VydmUgbmFtZSBmb3IgZWxsaXB0aWMgY3VydmUga2V5cyAoZS5nLiwgJ0VkMjU1MTknLCAnUC0yNTYnKVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlggY29vcmRpbmF0ZSBmb3IgZWxsaXB0aWMgY3VydmUga2V5cyAoYmFzZTY0dXJsLWVuY29kZWQpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiWSBjb29yZGluYXRlIGZvciBlbGxpcHRpYyBjdXJ2ZSBrZXlzIChiYXNlNjR1cmwtZW5jb2RlZClcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJraWRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJrdHlcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJhbGdcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1wia2V5c1wiXVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGlmIChvcHRpb25zPy5qd2tzPy5yZW1vdGVVcmwpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcblx0XHRcdFx0Y29uc3QgYWRhcHRlciA9IGdldEp3a3NBZGFwdGVyKGN0eC5jb250ZXh0LmFkYXB0ZXIsIG9wdGlvbnMpO1xuXHRcdFx0XHRsZXQga2V5U2V0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0QWxsS2V5cyhjdHgpO1xuXHRcdFx0XHRpZiAoIWtleVNldHMgfHwga2V5U2V0cz8ubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgY3JlYXRlSndrKGN0eCwgb3B0aW9ucyk7XG5cdFx0XHRcdFx0a2V5U2V0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0QWxsS2V5cyhjdHgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICgha2V5U2V0cz8ubGVuZ3RoKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiTm8ga2V5IHNldHMgZm91bmQuIE1ha2Ugc3VyZSB5b3UgaGF2ZSBhIGtleSBpbiB5b3VyIGRhdGFiYXNlLlwiKTtcblx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0Y29uc3QgZ3JhY2VQZXJpb2QgPSAob3B0aW9ucz8uandrcz8uZ3JhY2VQZXJpb2QgPz8gMzYwMCAqIDI0ICogMzApICogMWUzO1xuXHRcdFx0XHRjb25zdCBrZXlzID0ga2V5U2V0cy5maWx0ZXIoKGtleSkgPT4ge1xuXHRcdFx0XHRcdGlmICgha2V5LmV4cGlyZXNBdCkgcmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuIGtleS5leHBpcmVzQXQuZ2V0VGltZSgpICsgZ3JhY2VQZXJpb2QgPiBub3c7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBrZXlQYWlyQ29uZmlnID0gb3B0aW9ucz8uandrcz8ua2V5UGFpckNvbmZpZztcblx0XHRcdFx0Y29uc3QgZGVmYXVsdENydiA9IGtleVBhaXJDb25maWcgPyBcImNydlwiIGluIGtleVBhaXJDb25maWcgPyBrZXlQYWlyQ29uZmlnLmNydiA6IHZvaWQgMCA6IHZvaWQgMDtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHsga2V5czoga2V5cy5tYXAoKGtleVNldCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRhbGc6IGtleVNldC5hbGcgPz8gb3B0aW9ucz8uandrcz8ua2V5UGFpckNvbmZpZz8uYWxnID8/IFwiRWREU0FcIixcblx0XHRcdFx0XHRcdGNydjoga2V5U2V0LmNydiA/PyBkZWZhdWx0Q3J2LFxuXHRcdFx0XHRcdFx0Li4uSlNPTi5wYXJzZShrZXlTZXQucHVibGljS2V5KSxcblx0XHRcdFx0XHRcdGtpZDoga2V5U2V0LmlkXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSkgfSk7XG5cdFx0XHR9KSxcblx0XHRcdGdldFRva2VuOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdG9rZW5cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdFx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRvcGVyYXRpb25JZDogXCJnZXRKU09OV2ViVG9rZW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJHZXQgYSBKV1QgdG9rZW5cIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3Qgand0JDEgPSBhd2FpdCBnZXRKd3RUb2tlbihjdHgsIG9wdGlvbnMpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyB0b2tlbjogand0JDEgfSk7XG5cdFx0XHR9KSxcblx0XHRcdHNpZ25KV1Q6IGNyZWF0ZUF1dGhFbmRwb2ludCh7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdG1ldGFkYXRhOiB7ICRJbmZlcjogeyBib2R5OiB7fSB9IH0sXG5cdFx0XHRcdGJvZHk6IHNpZ25KV1RCb2R5U2NoZW1hXG5cdFx0XHR9LCBhc3luYyAoYykgPT4ge1xuXHRcdFx0XHRjb25zdCBqd3QkMSA9IGF3YWl0IHNpZ25KV1QoYywge1xuXHRcdFx0XHRcdG9wdGlvbnM6IHtcblx0XHRcdFx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRcdFx0XHQuLi5jLmJvZHkub3ZlcnJpZGVPcHRpb25zXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXlsb2FkOiBjLmJvZHkucGF5bG9hZFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGMuanNvbih7IHRva2VuOiBqd3QkMSB9KTtcblx0XHRcdH0pLFxuXHRcdFx0dmVyaWZ5SldUOiBjcmVhdGVBdXRoRW5kcG9pbnQoe1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRtZXRhZGF0YTogeyAkSW5mZXI6IHtcblx0XHRcdFx0XHRib2R5OiB7fSxcblx0XHRcdFx0XHRyZXNwb25zZToge31cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRib2R5OiB2ZXJpZnlKV1RCb2R5U2NoZW1hXG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IG92ZXJyaWRlT3B0aW9ucyA9IGN0eC5ib2R5Lmlzc3VlciA/IHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGp3dDoge1xuXHRcdFx0XHRcdFx0Li4ub3B0aW9ucz8uand0LFxuXHRcdFx0XHRcdFx0aXNzdWVyOiBjdHguYm9keS5pc3N1ZXJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gOiBvcHRpb25zO1xuXHRcdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgdmVyaWZ5SldUKGN0eC5ib2R5LnRva2VuLCBvdmVycmlkZU9wdGlvbnMpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBwYXlsb2FkIH0pO1xuXHRcdFx0fSlcblx0XHR9LFxuXHRcdGhvb2tzOiB7IGFmdGVyOiBbe1xuXHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnBhdGggPT09IFwiL2dldC1zZXNzaW9uXCI7XG5cdFx0XHR9LFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZVNldHRpbmdKd3RIZWFkZXIpIHJldHVybjtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb24gfHwgY3R4LmNvbnRleHQubmV3U2Vzc2lvbjtcblx0XHRcdFx0aWYgKHNlc3Npb24gJiYgc2Vzc2lvbi5zZXNzaW9uKSB7XG5cdFx0XHRcdFx0Y29uc3Qgand0JDEgPSBhd2FpdCBnZXRKd3RUb2tlbihjdHgsIG9wdGlvbnMpO1xuXHRcdFx0XHRcdGNvbnN0IGV4cG9zZWRIZWFkZXJzID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzPy5nZXQoXCJhY2Nlc3MtY29udHJvbC1leHBvc2UtaGVhZGVyc1wiKSB8fCBcIlwiO1xuXHRcdFx0XHRcdGNvbnN0IGhlYWRlcnNTZXQgPSBuZXcgU2V0KGV4cG9zZWRIZWFkZXJzLnNwbGl0KFwiLFwiKS5tYXAoKGhlYWRlcikgPT4gaGVhZGVyLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pKTtcblx0XHRcdFx0XHRoZWFkZXJzU2V0LmFkZChcInNldC1hdXRoLWp3dFwiKTtcblx0XHRcdFx0XHRjdHguc2V0SGVhZGVyKFwic2V0LWF1dGgtand0XCIsIGp3dCQxKTtcblx0XHRcdFx0XHRjdHguc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnNcIiwgQXJyYXkuZnJvbShoZWFkZXJzU2V0KS5qb2luKFwiLCBcIikpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1dIH0sXG5cdFx0c2NoZW1hOiBtZXJnZVNjaGVtYShzY2hlbWEsIG9wdGlvbnM/LnNjaGVtYSlcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlSndrLCBnZW5lcmF0ZUV4cG9ydGVkS2V5UGFpciwgZ2V0Snd0VG9rZW4sIGp3dCwgc2lnbkpXVCwgdG9FeHBKV1QsIHZlcmlmeUpXVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/schema.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/schema.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/jwt/schema.ts\nconst schema = { jwks: { fields: {\n\tpublicKey: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tprivateKey: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tcreatedAt: {\n\t\ttype: \"date\",\n\t\trequired: true\n\t},\n\texpiresAt: {\n\t\ttype: \"date\",\n\t\trequired: false\n\t}\n} } };\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxqd3RcXHNjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2p3dC9zY2hlbWEudHNcbmNvbnN0IHNjaGVtYSA9IHsgandrczogeyBmaWVsZHM6IHtcblx0cHVibGljS2V5OiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZXF1aXJlZDogdHJ1ZVxuXHR9LFxuXHRwcml2YXRlS2V5OiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZXF1aXJlZDogdHJ1ZVxuXHR9LFxuXHRjcmVhdGVkQXQ6IHtcblx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRyZXF1aXJlZDogdHJ1ZVxuXHR9LFxuXHRleHBpcmVzQXQ6IHtcblx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRyZXF1aXJlZDogZmFsc2Vcblx0fVxufSB9IH07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/sign.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/sign.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getJwtToken: () => (/* binding */ getJwtToken),\n/* harmony export */   signJWT: () => (/* binding */ signJWT)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/utils.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n\n\n\n\n\n\n//#region src/plugins/jwt/sign.ts\nasync function signJWT(ctx, config) {\n\tconst { options } = config;\n\tconst payload = config.payload;\n\tconst nowSeconds = Math.floor(Date.now() / 1e3);\n\tconst iat = payload.iat;\n\tlet exp = payload.exp;\n\tconst defaultExp = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.toExpJWT)(options?.jwt?.expirationTime ?? \"15m\", iat ?? nowSeconds);\n\texp = exp ?? defaultExp;\n\tconst nbf = payload.nbf;\n\tconst iss = payload.iss;\n\tconst defaultIss = options?.jwt?.issuer ?? ctx.context.options.baseURL;\n\tconst aud = payload.aud;\n\tconst defaultAud = options?.jwt?.audience ?? ctx.context.options.baseURL;\n\tif (options?.jwt?.sign) {\n\t\tconst jwtPayload = {\n\t\t\t...payload,\n\t\t\tiat,\n\t\t\texp,\n\t\t\tnbf,\n\t\t\tiss: iss ?? defaultIss,\n\t\t\taud: aud ?? defaultAud\n\t\t};\n\t\treturn options.jwt.sign(jwtPayload);\n\t}\n\tlet key = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__.getJwksAdapter)(ctx.context.adapter, options).getLatestKey(ctx);\n\tif (!key || key.expiresAt && key.expiresAt < /* @__PURE__ */ new Date()) key = await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.createJwk)(ctx, options);\n\tconst privateWebKey = !options?.jwks?.disablePrivateKeyEncryption ? await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\tkey: ctx.context.secret,\n\t\tdata: JSON.parse(key.privateKey)\n\t}).catch(() => {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"Failed to decrypt private key. Make sure the secret currently in use is the same as the one used to encrypt the private key. If you are using a different secret, either clean up your JWKS or disable private key encryption.\");\n\t}) : key.privateKey;\n\tconst alg = key.alg ?? options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\";\n\tconst privateKey = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.importJWK)(JSON.parse(privateWebKey), alg);\n\tconst jwt = new jose__WEBPACK_IMPORTED_MODULE_5__.SignJWT(payload).setProtectedHeader({\n\t\talg,\n\t\tkid: key.id\n\t}).setExpirationTime(exp).setIssuer(iss ?? defaultIss).setAudience(aud ?? defaultAud);\n\tif (iat) jwt.setIssuedAt(iat);\n\tif (payload.sub) jwt.setSubject(payload.sub);\n\tif (payload.nbf) jwt.setNotBefore(payload.nbf);\n\tif (payload.jti) jwt.setJti(payload.jti);\n\treturn await jwt.sign(privateKey);\n}\nasync function getJwtToken(ctx, options) {\n\tconst payload = !options?.jwt?.definePayload ? ctx.context.session.user : await options.jwt.definePayload(ctx.context.session);\n\treturn await signJWT(ctx, {\n\t\toptions,\n\t\tpayload: {\n\t\t\tiat: Math.floor(Date.now() / 1e3),\n\t\t\t...payload,\n\t\t\tsub: await options?.jwt?.getSubject?.(ctx.context.session) ?? ctx.context.session.user.id\n\t\t}\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=sign.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9zaWduLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUEwRDtBQUNYO0FBQ0c7QUFDUTtBQUNoQjs7QUFFMUM7QUFDQTtBQUNBLFNBQVMsVUFBVTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvREFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDREQUFjO0FBQy9CLHNGQUFzRixxREFBUztBQUMvRiwyRUFBMkUsbUVBQWdCO0FBQzNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsWUFBWSxvRUFBZTtBQUMzQixFQUFFO0FBQ0Y7QUFDQSwwQkFBMEIsK0NBQVM7QUFDbkMsaUJBQWlCLHlDQUFPO0FBQ3hCO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcand0XFxzaWduLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzeW1tZXRyaWNEZWNyeXB0IH0gZnJvbSBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldEp3a3NBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUp3aywgdG9FeHBKV1QgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgU2lnbkpXVCwgaW1wb3J0SldLIH0gZnJvbSBcImpvc2VcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2p3dC9zaWduLnRzXG5hc3luYyBmdW5jdGlvbiBzaWduSldUKGN0eCwgY29uZmlnKSB7XG5cdGNvbnN0IHsgb3B0aW9ucyB9ID0gY29uZmlnO1xuXHRjb25zdCBwYXlsb2FkID0gY29uZmlnLnBheWxvYWQ7XG5cdGNvbnN0IG5vd1NlY29uZHMgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpO1xuXHRjb25zdCBpYXQgPSBwYXlsb2FkLmlhdDtcblx0bGV0IGV4cCA9IHBheWxvYWQuZXhwO1xuXHRjb25zdCBkZWZhdWx0RXhwID0gdG9FeHBKV1Qob3B0aW9ucz8uand0Py5leHBpcmF0aW9uVGltZSA/PyBcIjE1bVwiLCBpYXQgPz8gbm93U2Vjb25kcyk7XG5cdGV4cCA9IGV4cCA/PyBkZWZhdWx0RXhwO1xuXHRjb25zdCBuYmYgPSBwYXlsb2FkLm5iZjtcblx0Y29uc3QgaXNzID0gcGF5bG9hZC5pc3M7XG5cdGNvbnN0IGRlZmF1bHRJc3MgPSBvcHRpb25zPy5qd3Q/Lmlzc3VlciA/PyBjdHguY29udGV4dC5vcHRpb25zLmJhc2VVUkw7XG5cdGNvbnN0IGF1ZCA9IHBheWxvYWQuYXVkO1xuXHRjb25zdCBkZWZhdWx0QXVkID0gb3B0aW9ucz8uand0Py5hdWRpZW5jZSA/PyBjdHguY29udGV4dC5vcHRpb25zLmJhc2VVUkw7XG5cdGlmIChvcHRpb25zPy5qd3Q/LnNpZ24pIHtcblx0XHRjb25zdCBqd3RQYXlsb2FkID0ge1xuXHRcdFx0Li4ucGF5bG9hZCxcblx0XHRcdGlhdCxcblx0XHRcdGV4cCxcblx0XHRcdG5iZixcblx0XHRcdGlzczogaXNzID8/IGRlZmF1bHRJc3MsXG5cdFx0XHRhdWQ6IGF1ZCA/PyBkZWZhdWx0QXVkXG5cdFx0fTtcblx0XHRyZXR1cm4gb3B0aW9ucy5qd3Quc2lnbihqd3RQYXlsb2FkKTtcblx0fVxuXHRsZXQga2V5ID0gYXdhaXQgZ2V0Sndrc0FkYXB0ZXIoY3R4LmNvbnRleHQuYWRhcHRlciwgb3B0aW9ucykuZ2V0TGF0ZXN0S2V5KGN0eCk7XG5cdGlmICgha2V5IHx8IGtleS5leHBpcmVzQXQgJiYga2V5LmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSBrZXkgPSBhd2FpdCBjcmVhdGVKd2soY3R4LCBvcHRpb25zKTtcblx0Y29uc3QgcHJpdmF0ZVdlYktleSA9ICFvcHRpb25zPy5qd2tzPy5kaXNhYmxlUHJpdmF0ZUtleUVuY3J5cHRpb24gPyBhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRrZXk6IGN0eC5jb250ZXh0LnNlY3JldCxcblx0XHRkYXRhOiBKU09OLnBhcnNlKGtleS5wcml2YXRlS2V5KVxuXHR9KS5jYXRjaCgoKSA9PiB7XG5cdFx0dGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZhaWxlZCB0byBkZWNyeXB0IHByaXZhdGUga2V5LiBNYWtlIHN1cmUgdGhlIHNlY3JldCBjdXJyZW50bHkgaW4gdXNlIGlzIHRoZSBzYW1lIGFzIHRoZSBvbmUgdXNlZCB0byBlbmNyeXB0IHRoZSBwcml2YXRlIGtleS4gSWYgeW91IGFyZSB1c2luZyBhIGRpZmZlcmVudCBzZWNyZXQsIGVpdGhlciBjbGVhbiB1cCB5b3VyIEpXS1Mgb3IgZGlzYWJsZSBwcml2YXRlIGtleSBlbmNyeXB0aW9uLlwiKTtcblx0fSkgOiBrZXkucHJpdmF0ZUtleTtcblx0Y29uc3QgYWxnID0ga2V5LmFsZyA/PyBvcHRpb25zPy5qd2tzPy5rZXlQYWlyQ29uZmlnPy5hbGcgPz8gXCJFZERTQVwiO1xuXHRjb25zdCBwcml2YXRlS2V5ID0gYXdhaXQgaW1wb3J0SldLKEpTT04ucGFyc2UocHJpdmF0ZVdlYktleSksIGFsZyk7XG5cdGNvbnN0IGp3dCA9IG5ldyBTaWduSldUKHBheWxvYWQpLnNldFByb3RlY3RlZEhlYWRlcih7XG5cdFx0YWxnLFxuXHRcdGtpZDoga2V5LmlkXG5cdH0pLnNldEV4cGlyYXRpb25UaW1lKGV4cCkuc2V0SXNzdWVyKGlzcyA/PyBkZWZhdWx0SXNzKS5zZXRBdWRpZW5jZShhdWQgPz8gZGVmYXVsdEF1ZCk7XG5cdGlmIChpYXQpIGp3dC5zZXRJc3N1ZWRBdChpYXQpO1xuXHRpZiAocGF5bG9hZC5zdWIpIGp3dC5zZXRTdWJqZWN0KHBheWxvYWQuc3ViKTtcblx0aWYgKHBheWxvYWQubmJmKSBqd3Quc2V0Tm90QmVmb3JlKHBheWxvYWQubmJmKTtcblx0aWYgKHBheWxvYWQuanRpKSBqd3Quc2V0SnRpKHBheWxvYWQuanRpKTtcblx0cmV0dXJuIGF3YWl0IGp3dC5zaWduKHByaXZhdGVLZXkpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Snd0VG9rZW4oY3R4LCBvcHRpb25zKSB7XG5cdGNvbnN0IHBheWxvYWQgPSAhb3B0aW9ucz8uand0Py5kZWZpbmVQYXlsb2FkID8gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyIDogYXdhaXQgb3B0aW9ucy5qd3QuZGVmaW5lUGF5bG9hZChjdHguY29udGV4dC5zZXNzaW9uKTtcblx0cmV0dXJuIGF3YWl0IHNpZ25KV1QoY3R4LCB7XG5cdFx0b3B0aW9ucyxcblx0XHRwYXlsb2FkOiB7XG5cdFx0XHRpYXQ6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMyksXG5cdFx0XHQuLi5wYXlsb2FkLFxuXHRcdFx0c3ViOiBhd2FpdCBvcHRpb25zPy5qd3Q/LmdldFN1YmplY3Q/LihjdHguY29udGV4dC5zZXNzaW9uKSA/PyBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWRcblx0XHR9XG5cdH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEp3dFRva2VuLCBzaWduSldUIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/sign.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/utils.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/utils.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createJwk: () => (/* binding */ createJwk),\n/* harmony export */   generateExportedKeyPair: () => (/* binding */ generateExportedKeyPair),\n/* harmony export */   toExpJWT: () => (/* binding */ toExpJWT)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/time.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/key/generate_key_pair.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/key/export.js\");\n\n\n\n\n\n//#region src/plugins/jwt/utils.ts\n/**\n* Converts an expirationTime to ISO seconds expiration time (the format of JWT exp)\n*\n* See https://github.com/panva/jose/blob/main/src/lib/jwt_claims_set.ts#L245\n*\n* @param expirationTime - see options.jwt.expirationTime\n* @param iat - the iat time to consolidate on\n* @returns\n*/\nfunction toExpJWT(expirationTime, iat) {\n\tif (typeof expirationTime === \"number\") return expirationTime;\n\telse if (expirationTime instanceof Date) return Math.floor(expirationTime.getTime() / 1e3);\n\telse return iat + (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_1__.sec)(expirationTime);\n}\nasync function generateExportedKeyPair(options) {\n\tconst { alg, ...cfg } = options?.jwks?.keyPairConfig ?? {\n\t\talg: \"EdDSA\",\n\t\tcrv: \"Ed25519\"\n\t};\n\tconst { publicKey, privateKey } = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.generateKeyPair)(alg, {\n\t\t...cfg,\n\t\textractable: true\n\t});\n\treturn {\n\t\tpublicWebKey: await (0,jose__WEBPACK_IMPORTED_MODULE_4__.exportJWK)(publicKey),\n\t\tprivateWebKey: await (0,jose__WEBPACK_IMPORTED_MODULE_4__.exportJWK)(privateKey),\n\t\talg,\n\t\tcfg\n\t};\n}\n/**\n* Creates a Jwk on the database\n*\n* @param ctx\n* @param options\n* @returns\n*/\nasync function createJwk(ctx, options) {\n\tconst { publicWebKey, privateWebKey, alg, cfg } = await generateExportedKeyPair(options);\n\tconst stringifiedPrivateWebKey = JSON.stringify(privateWebKey);\n\tconst privateKeyEncryptionEnabled = !options?.jwks?.disablePrivateKeyEncryption;\n\tconst jwk = {\n\t\talg,\n\t\t...cfg && \"crv\" in cfg ? { crv: cfg.crv } : {},\n\t\tpublicKey: JSON.stringify(publicWebKey),\n\t\tprivateKey: privateKeyEncryptionEnabled ? JSON.stringify(await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncrypt)({\n\t\t\tkey: ctx.context.secret,\n\t\t\tdata: stringifiedPrivateWebKey\n\t\t})) : stringifiedPrivateWebKey,\n\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t...options?.jwks?.rotationInterval ? { expiresAt: new Date(Date.now() + options.jwks.rotationInterval * 1e3) } : {}\n\t};\n\treturn await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_2__.getJwksAdapter)(ctx.context.adapter, options).createJwk(ctx, jwk);\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC91dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZjtBQUNJO0FBQ0c7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9EQUFHO0FBQ3RCO0FBQ0E7QUFDQSxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3QkFBd0IsUUFBUSxxREFBZTtBQUN4RDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0Esc0JBQXNCLCtDQUFTO0FBQy9CLHVCQUF1QiwrQ0FBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdDQUF3QztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixlQUFlLElBQUk7QUFDaEQ7QUFDQSxpRUFBaUUsbUVBQWdCO0FBQ2pGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5Q0FBeUMsd0VBQXdFO0FBQ2pIO0FBQ0EsY0FBYyw0REFBYztBQUM1Qjs7QUFFQTtBQUN3RDtBQUN4RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGp3dFxcdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN5bW1ldHJpY0VuY3J5cHQgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2VjIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3RpbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRKd2tzQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBleHBvcnRKV0ssIGdlbmVyYXRlS2V5UGFpciB9IGZyb20gXCJqb3NlXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9qd3QvdXRpbHMudHNcbi8qKlxuKiBDb252ZXJ0cyBhbiBleHBpcmF0aW9uVGltZSB0byBJU08gc2Vjb25kcyBleHBpcmF0aW9uIHRpbWUgKHRoZSBmb3JtYXQgb2YgSldUIGV4cClcbipcbiogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9wYW52YS9qb3NlL2Jsb2IvbWFpbi9zcmMvbGliL2p3dF9jbGFpbXNfc2V0LnRzI0wyNDVcbipcbiogQHBhcmFtIGV4cGlyYXRpb25UaW1lIC0gc2VlIG9wdGlvbnMuand0LmV4cGlyYXRpb25UaW1lXG4qIEBwYXJhbSBpYXQgLSB0aGUgaWF0IHRpbWUgdG8gY29uc29saWRhdGUgb25cbiogQHJldHVybnNcbiovXG5mdW5jdGlvbiB0b0V4cEpXVChleHBpcmF0aW9uVGltZSwgaWF0KSB7XG5cdGlmICh0eXBlb2YgZXhwaXJhdGlvblRpbWUgPT09IFwibnVtYmVyXCIpIHJldHVybiBleHBpcmF0aW9uVGltZTtcblx0ZWxzZSBpZiAoZXhwaXJhdGlvblRpbWUgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gTWF0aC5mbG9vcihleHBpcmF0aW9uVGltZS5nZXRUaW1lKCkgLyAxZTMpO1xuXHRlbHNlIHJldHVybiBpYXQgKyBzZWMoZXhwaXJhdGlvblRpbWUpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVFeHBvcnRlZEtleVBhaXIob3B0aW9ucykge1xuXHRjb25zdCB7IGFsZywgLi4uY2ZnIH0gPSBvcHRpb25zPy5qd2tzPy5rZXlQYWlyQ29uZmlnID8/IHtcblx0XHRhbGc6IFwiRWREU0FcIixcblx0XHRjcnY6IFwiRWQyNTUxOVwiXG5cdH07XG5cdGNvbnN0IHsgcHVibGljS2V5LCBwcml2YXRlS2V5IH0gPSBhd2FpdCBnZW5lcmF0ZUtleVBhaXIoYWxnLCB7XG5cdFx0Li4uY2ZnLFxuXHRcdGV4dHJhY3RhYmxlOiB0cnVlXG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdHB1YmxpY1dlYktleTogYXdhaXQgZXhwb3J0SldLKHB1YmxpY0tleSksXG5cdFx0cHJpdmF0ZVdlYktleTogYXdhaXQgZXhwb3J0SldLKHByaXZhdGVLZXkpLFxuXHRcdGFsZyxcblx0XHRjZmdcblx0fTtcbn1cbi8qKlxuKiBDcmVhdGVzIGEgSndrIG9uIHRoZSBkYXRhYmFzZVxuKlxuKiBAcGFyYW0gY3R4XG4qIEBwYXJhbSBvcHRpb25zXG4qIEByZXR1cm5zXG4qL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSndrKGN0eCwgb3B0aW9ucykge1xuXHRjb25zdCB7IHB1YmxpY1dlYktleSwgcHJpdmF0ZVdlYktleSwgYWxnLCBjZmcgfSA9IGF3YWl0IGdlbmVyYXRlRXhwb3J0ZWRLZXlQYWlyKG9wdGlvbnMpO1xuXHRjb25zdCBzdHJpbmdpZmllZFByaXZhdGVXZWJLZXkgPSBKU09OLnN0cmluZ2lmeShwcml2YXRlV2ViS2V5KTtcblx0Y29uc3QgcHJpdmF0ZUtleUVuY3J5cHRpb25FbmFibGVkID0gIW9wdGlvbnM/Lmp3a3M/LmRpc2FibGVQcml2YXRlS2V5RW5jcnlwdGlvbjtcblx0Y29uc3QgandrID0ge1xuXHRcdGFsZyxcblx0XHQuLi5jZmcgJiYgXCJjcnZcIiBpbiBjZmcgPyB7IGNydjogY2ZnLmNydiB9IDoge30sXG5cdFx0cHVibGljS2V5OiBKU09OLnN0cmluZ2lmeShwdWJsaWNXZWJLZXkpLFxuXHRcdHByaXZhdGVLZXk6IHByaXZhdGVLZXlFbmNyeXB0aW9uRW5hYmxlZCA/IEpTT04uc3RyaW5naWZ5KGF3YWl0IHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0XHRkYXRhOiBzdHJpbmdpZmllZFByaXZhdGVXZWJLZXlcblx0XHR9KSkgOiBzdHJpbmdpZmllZFByaXZhdGVXZWJLZXksXG5cdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHQuLi5vcHRpb25zPy5qd2tzPy5yb3RhdGlvbkludGVydmFsID8geyBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyBvcHRpb25zLmp3a3Mucm90YXRpb25JbnRlcnZhbCAqIDFlMykgfSA6IHt9XG5cdH07XG5cdHJldHVybiBhd2FpdCBnZXRKd2tzQWRhcHRlcihjdHguY29udGV4dC5hZGFwdGVyLCBvcHRpb25zKS5jcmVhdGVKd2soY3R4LCBqd2spO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUp3aywgZ2VuZXJhdGVFeHBvcnRlZEtleVBhaXIsIHRvRXhwSldUIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/jwt/verify.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/verify.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/adapter.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/key/import.js\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n\n\n//#region src/plugins/jwt/verify.ts\n/**\n* Verify a JWT token using the JWKS public keys\n* Returns the payload if valid, null otherwise\n*/\nasync function verifyJWT(token, options) {\n\tconst ctx = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_1__.getCurrentAuthContext)();\n\ttry {\n\t\tconst parts = token.split(\".\");\n\t\tif (parts.length !== 3) return null;\n\t\tconst headerStr = new TextDecoder().decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_2__.base64.decode(parts[0]));\n\t\tconst kid = JSON.parse(headerStr).kid;\n\t\tif (!kid) {\n\t\t\tctx.context.logger.debug(\"JWT missing kid in header\");\n\t\t\treturn null;\n\t\t}\n\t\tconst keys = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.getJwksAdapter)(ctx.context.adapter, options).getAllKeys(ctx);\n\t\tif (!keys || keys.length === 0) {\n\t\t\tctx.context.logger.debug(\"No JWKS keys available\");\n\t\t\treturn null;\n\t\t}\n\t\tconst key = keys.find((k) => k.id === kid);\n\t\tif (!key) {\n\t\t\tctx.context.logger.debug(`No JWKS key found for kid: ${kid}`);\n\t\t\treturn null;\n\t\t}\n\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.jwtVerify)(token, await (0,jose__WEBPACK_IMPORTED_MODULE_4__.importJWK)(JSON.parse(key.publicKey), key.alg ?? options?.jwks?.keyPairConfig?.alg ?? \"EdDSA\"), {\n\t\t\tissuer: options?.jwt?.issuer ?? ctx.context.options.baseURL,\n\t\t\taudience: options?.jwt?.audience ?? ctx.context.options.baseURL\n\t\t});\n\t\tif (!payload.sub || !payload.aud) return null;\n\t\treturn payload;\n\t} catch (error) {\n\t\tctx.context.logger.debug(\"JWT verification failed\", error);\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=verify.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC92ZXJpZnkubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQztBQUNtQjtBQUN0QjtBQUNPOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0ZBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw2REFBTTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDREQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxJQUFJO0FBQzlEO0FBQ0E7QUFDQSxVQUFVLFVBQVUsUUFBUSwrQ0FBUyxjQUFjLCtDQUFTO0FBQzVEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGp3dFxcdmVyaWZ5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRKd2tzQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QXV0aENvbnRleHQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgaW1wb3J0SldLLCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgYmFzZTY0IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iYXNlNjRcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2p3dC92ZXJpZnkudHNcbi8qKlxuKiBWZXJpZnkgYSBKV1QgdG9rZW4gdXNpbmcgdGhlIEpXS1MgcHVibGljIGtleXNcbiogUmV0dXJucyB0aGUgcGF5bG9hZCBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2VcbiovXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlKV1QodG9rZW4sIG9wdGlvbnMpIHtcblx0Y29uc3QgY3R4ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdChcIi5cIik7XG5cdFx0aWYgKHBhcnRzLmxlbmd0aCAhPT0gMykgcmV0dXJuIG51bGw7XG5cdFx0Y29uc3QgaGVhZGVyU3RyID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJhc2U2NC5kZWNvZGUocGFydHNbMF0pKTtcblx0XHRjb25zdCBraWQgPSBKU09OLnBhcnNlKGhlYWRlclN0cikua2lkO1xuXHRcdGlmICgha2lkKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZGVidWcoXCJKV1QgbWlzc2luZyBraWQgaW4gaGVhZGVyXCIpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IGtleXMgPSBhd2FpdCBnZXRKd2tzQWRhcHRlcihjdHguY29udGV4dC5hZGFwdGVyLCBvcHRpb25zKS5nZXRBbGxLZXlzKGN0eCk7XG5cdFx0aWYgKCFrZXlzIHx8IGtleXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZGVidWcoXCJObyBKV0tTIGtleXMgYXZhaWxhYmxlXCIpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IGtleSA9IGtleXMuZmluZCgoaykgPT4gay5pZCA9PT0ga2lkKTtcblx0XHRpZiAoIWtleSkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmRlYnVnKGBObyBKV0tTIGtleSBmb3VuZCBmb3Iga2lkOiAke2tpZH1gKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgYXdhaXQgaW1wb3J0SldLKEpTT04ucGFyc2Uoa2V5LnB1YmxpY0tleSksIGtleS5hbGcgPz8gb3B0aW9ucz8uandrcz8ua2V5UGFpckNvbmZpZz8uYWxnID8/IFwiRWREU0FcIiksIHtcblx0XHRcdGlzc3Vlcjogb3B0aW9ucz8uand0Py5pc3N1ZXIgPz8gY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlVVJMLFxuXHRcdFx0YXVkaWVuY2U6IG9wdGlvbnM/Lmp3dD8uYXVkaWVuY2UgPz8gY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlVVJMXG5cdFx0fSk7XG5cdFx0aWYgKCFwYXlsb2FkLnN1YiB8fCAhcGF5bG9hZC5hdWQpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiBwYXlsb2FkO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5kZWJ1ZyhcIkpXVCB2ZXJpZmljYXRpb24gZmFpbGVkXCIsIGVycm9yKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHZlcmlmeUpXVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmVyaWZ5Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/jwt/verify.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/last-login-method/client.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   lastLoginMethodClient: () => (/* binding */ lastLoginMethodClient)\n/* harmony export */ });\n//#region src/plugins/last-login-method/client.ts\nfunction getCookieValue(name) {\n\tif (typeof document === \"undefined\") return null;\n\tconst cookie = document.cookie.split(\"; \").find((row) => row.startsWith(`${name}=`));\n\treturn cookie ? cookie.split(\"=\")[1] : null;\n}\n/**\n* Client-side plugin to retrieve the last used login method\n*/\nconst lastLoginMethodClient = (config = {}) => {\n\tconst cookieName = config.cookieName || \"better-auth.last_used_login_method\";\n\treturn {\n\t\tid: \"last-login-method-client\",\n\t\tgetActions() {\n\t\t\treturn {\n\t\t\t\tgetLastUsedLoginMethod: () => {\n\t\t\t\t\treturn getCookieValue(cookieName);\n\t\t\t\t},\n\t\t\t\tclearLastUsedLoginMethod: () => {\n\t\t\t\t\tif (typeof document !== \"undefined\") document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n\t\t\t\t},\n\t\t\t\tisLastUsedLoginMethod: (method) => {\n\t\t\t\t\treturn getCookieValue(cookieName) === method;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2xhc3QtbG9naW4tbWV0aG9kL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxtQ0FBbUMsS0FBSztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsK0RBQStELFdBQVcsR0FBRyx1Q0FBdUMsT0FBTztBQUMzSCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxsYXN0LWxvZ2luLW1ldGhvZFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvbGFzdC1sb2dpbi1tZXRob2QvY2xpZW50LnRzXG5mdW5jdGlvbiBnZXRDb29raWVWYWx1ZShuYW1lKSB7XG5cdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuXHRjb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7IFwiKS5maW5kKChyb3cpID0+IHJvdy5zdGFydHNXaXRoKGAke25hbWV9PWApKTtcblx0cmV0dXJuIGNvb2tpZSA/IGNvb2tpZS5zcGxpdChcIj1cIilbMV0gOiBudWxsO1xufVxuLyoqXG4qIENsaWVudC1zaWRlIHBsdWdpbiB0byByZXRyaWV2ZSB0aGUgbGFzdCB1c2VkIGxvZ2luIG1ldGhvZFxuKi9cbmNvbnN0IGxhc3RMb2dpbk1ldGhvZENsaWVudCA9IChjb25maWcgPSB7fSkgPT4ge1xuXHRjb25zdCBjb29raWVOYW1lID0gY29uZmlnLmNvb2tpZU5hbWUgfHwgXCJiZXR0ZXItYXV0aC5sYXN0X3VzZWRfbG9naW5fbWV0aG9kXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibGFzdC1sb2dpbi1tZXRob2QtY2xpZW50XCIsXG5cdFx0Z2V0QWN0aW9ucygpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGdldExhc3RVc2VkTG9naW5NZXRob2Q6ICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gZ2V0Q29va2llVmFsdWUoY29va2llTmFtZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNsZWFyTGFzdFVzZWRMb2dpbk1ldGhvZDogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIGRvY3VtZW50LmNvb2tpZSA9IGAke2Nvb2tpZU5hbWV9PTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQzsgcGF0aD0vO2A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGlzTGFzdFVzZWRMb2dpbk1ldGhvZDogKG1ldGhvZCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBnZXRDb29raWVWYWx1ZShjb29raWVOYW1lKSA9PT0gbWV0aG9kO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbGFzdExvZ2luTWV0aG9kQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/index.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/last-login-method/index.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   lastLoginMethod: () => (/* binding */ lastLoginMethod)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n//#region src/plugins/last-login-method/index.ts\n/**\n* Plugin to track the last used login method\n*/\nconst lastLoginMethod = (userConfig) => {\n\tconst paths = [\n\t\t\"/callback/:id\",\n\t\t\"/oauth2/callback/:providerId\",\n\t\t\"/sign-in/email\",\n\t\t\"/sign-up/email\"\n\t];\n\tconst defaultResolveMethod = (ctx) => {\n\t\tif (paths.includes(ctx.path)) return ctx.params?.id || ctx.params?.providerId || ctx.path.split(\"/\").pop();\n\t\tif (ctx.path.includes(\"siwe\")) return \"siwe\";\n\t\tif (ctx.path.includes(\"/passkey/verify-authentication\")) return \"passkey\";\n\t\treturn null;\n\t};\n\tconst config = {\n\t\tcookieName: \"better-auth.last_used_login_method\",\n\t\tmaxAge: 3600 * 24 * 30,\n\t\t...userConfig\n\t};\n\treturn {\n\t\tid: \"last-login-method\",\n\t\tinit(ctx) {\n\t\t\treturn { options: { databaseHooks: {\n\t\t\t\tuser: { create: { async before(user, context) {\n\t\t\t\t\tif (!config.storeInDatabase) return;\n\t\t\t\t\tif (!context) return;\n\t\t\t\t\tconst lastUsedLoginMethod = config.customResolveMethod?.(context) ?? defaultResolveMethod(context);\n\t\t\t\t\tif (lastUsedLoginMethod) return { data: {\n\t\t\t\t\t\t...user,\n\t\t\t\t\t\tlastLoginMethod: lastUsedLoginMethod\n\t\t\t\t\t} };\n\t\t\t\t} } },\n\t\t\t\tsession: { create: { async after(session, context) {\n\t\t\t\t\tif (!config.storeInDatabase) return;\n\t\t\t\t\tif (!context) return;\n\t\t\t\t\tconst lastUsedLoginMethod = config.customResolveMethod?.(context) ?? defaultResolveMethod(context);\n\t\t\t\t\tif (lastUsedLoginMethod && session?.userId) try {\n\t\t\t\t\t\tawait ctx.internalAdapter.updateUser(session.userId, { lastLoginMethod: lastUsedLoginMethod });\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tctx.logger.error(\"Failed to update lastLoginMethod\", error);\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t} } };\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher() {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_0__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst lastUsedLoginMethod = config.customResolveMethod?.(ctx) ?? defaultResolveMethod(ctx);\n\t\t\t\tif (lastUsedLoginMethod) {\n\t\t\t\t\tconst setCookie = ctx.context.responseHeaders?.get(\"set-cookie\");\n\t\t\t\t\tconst sessionTokenName = ctx.context.authCookies.sessionToken.name;\n\t\t\t\t\tif (setCookie && setCookie.includes(sessionTokenName)) {\n\t\t\t\t\t\tconst cookieAttributes = {\n\t\t\t\t\t\t\t...ctx.context.authCookies.sessionToken.attributes,\n\t\t\t\t\t\t\tmaxAge: config.maxAge,\n\t\t\t\t\t\t\thttpOnly: false\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctx.setCookie(config.cookieName, lastUsedLoginMethod, cookieAttributes);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}] },\n\t\tschema: config.storeInDatabase ? { user: { fields: { lastLoginMethod: {\n\t\t\ttype: \"string\",\n\t\t\tinput: false,\n\t\t\trequired: false,\n\t\t\tfieldName: config.schema?.user?.lastLoginMethod || \"lastLoginMethod\"\n\t\t} } } } : void 0,\n\t\toptions: userConfig\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2xhc3QtbG9naW4tbWV0aG9kL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVc7QUFDdkIsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELHNDQUFzQztBQUNuRyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRyxHQUFHO0FBQ04scUNBQXFDLFFBQVEsVUFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxsYXN0LWxvZ2luLW1ldGhvZFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvbGFzdC1sb2dpbi1tZXRob2QvaW5kZXgudHNcbi8qKlxuKiBQbHVnaW4gdG8gdHJhY2sgdGhlIGxhc3QgdXNlZCBsb2dpbiBtZXRob2RcbiovXG5jb25zdCBsYXN0TG9naW5NZXRob2QgPSAodXNlckNvbmZpZykgPT4ge1xuXHRjb25zdCBwYXRocyA9IFtcblx0XHRcIi9jYWxsYmFjay86aWRcIixcblx0XHRcIi9vYXV0aDIvY2FsbGJhY2svOnByb3ZpZGVySWRcIixcblx0XHRcIi9zaWduLWluL2VtYWlsXCIsXG5cdFx0XCIvc2lnbi11cC9lbWFpbFwiXG5cdF07XG5cdGNvbnN0IGRlZmF1bHRSZXNvbHZlTWV0aG9kID0gKGN0eCkgPT4ge1xuXHRcdGlmIChwYXRocy5pbmNsdWRlcyhjdHgucGF0aCkpIHJldHVybiBjdHgucGFyYW1zPy5pZCB8fCBjdHgucGFyYW1zPy5wcm92aWRlcklkIHx8IGN0eC5wYXRoLnNwbGl0KFwiL1wiKS5wb3AoKTtcblx0XHRpZiAoY3R4LnBhdGguaW5jbHVkZXMoXCJzaXdlXCIpKSByZXR1cm4gXCJzaXdlXCI7XG5cdFx0aWYgKGN0eC5wYXRoLmluY2x1ZGVzKFwiL3Bhc3NrZXkvdmVyaWZ5LWF1dGhlbnRpY2F0aW9uXCIpKSByZXR1cm4gXCJwYXNza2V5XCI7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cdGNvbnN0IGNvbmZpZyA9IHtcblx0XHRjb29raWVOYW1lOiBcImJldHRlci1hdXRoLmxhc3RfdXNlZF9sb2dpbl9tZXRob2RcIixcblx0XHRtYXhBZ2U6IDM2MDAgKiAyNCAqIDMwLFxuXHRcdC4uLnVzZXJDb25maWdcblx0fTtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJsYXN0LWxvZ2luLW1ldGhvZFwiLFxuXHRcdGluaXQoY3R4KSB7XG5cdFx0XHRyZXR1cm4geyBvcHRpb25zOiB7IGRhdGFiYXNlSG9va3M6IHtcblx0XHRcdFx0dXNlcjogeyBjcmVhdGU6IHsgYXN5bmMgYmVmb3JlKHVzZXIsIGNvbnRleHQpIHtcblx0XHRcdFx0XHRpZiAoIWNvbmZpZy5zdG9yZUluRGF0YWJhc2UpIHJldHVybjtcblx0XHRcdFx0XHRpZiAoIWNvbnRleHQpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBsYXN0VXNlZExvZ2luTWV0aG9kID0gY29uZmlnLmN1c3RvbVJlc29sdmVNZXRob2Q/Lihjb250ZXh0KSA/PyBkZWZhdWx0UmVzb2x2ZU1ldGhvZChjb250ZXh0KTtcblx0XHRcdFx0XHRpZiAobGFzdFVzZWRMb2dpbk1ldGhvZCkgcmV0dXJuIHsgZGF0YToge1xuXHRcdFx0XHRcdFx0Li4udXNlcixcblx0XHRcdFx0XHRcdGxhc3RMb2dpbk1ldGhvZDogbGFzdFVzZWRMb2dpbk1ldGhvZFxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0fSB9IH0sXG5cdFx0XHRcdHNlc3Npb246IHsgY3JlYXRlOiB7IGFzeW5jIGFmdGVyKHNlc3Npb24sIGNvbnRleHQpIHtcblx0XHRcdFx0XHRpZiAoIWNvbmZpZy5zdG9yZUluRGF0YWJhc2UpIHJldHVybjtcblx0XHRcdFx0XHRpZiAoIWNvbnRleHQpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBsYXN0VXNlZExvZ2luTWV0aG9kID0gY29uZmlnLmN1c3RvbVJlc29sdmVNZXRob2Q/Lihjb250ZXh0KSA/PyBkZWZhdWx0UmVzb2x2ZU1ldGhvZChjb250ZXh0KTtcblx0XHRcdFx0XHRpZiAobGFzdFVzZWRMb2dpbk1ldGhvZCAmJiBzZXNzaW9uPy51c2VySWQpIHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBjdHguaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VySWQsIHsgbGFzdExvZ2luTWV0aG9kOiBsYXN0VXNlZExvZ2luTWV0aG9kIH0pO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRjdHgubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBsYXN0TG9naW5NZXRob2RcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfSB9O1xuXHRcdH0sXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGxhc3RVc2VkTG9naW5NZXRob2QgPSBjb25maWcuY3VzdG9tUmVzb2x2ZU1ldGhvZD8uKGN0eCkgPz8gZGVmYXVsdFJlc29sdmVNZXRob2QoY3R4KTtcblx0XHRcdFx0aWYgKGxhc3RVc2VkTG9naW5NZXRob2QpIHtcblx0XHRcdFx0XHRjb25zdCBzZXRDb29raWUgPSBjdHguY29udGV4dC5yZXNwb25zZUhlYWRlcnM/LmdldChcInNldC1jb29raWVcIik7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRva2VuTmFtZSA9IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lO1xuXHRcdFx0XHRcdGlmIChzZXRDb29raWUgJiYgc2V0Q29va2llLmluY2x1ZGVzKHNlc3Npb25Ub2tlbk5hbWUpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb29raWVBdHRyaWJ1dGVzID0ge1xuXHRcdFx0XHRcdFx0XHQuLi5jdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4uYXR0cmlidXRlcyxcblx0XHRcdFx0XHRcdFx0bWF4QWdlOiBjb25maWcubWF4QWdlLFxuXHRcdFx0XHRcdFx0XHRodHRwT25seTogZmFsc2Vcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjdHguc2V0Q29va2llKGNvbmZpZy5jb29raWVOYW1lLCBsYXN0VXNlZExvZ2luTWV0aG9kLCBjb29raWVBdHRyaWJ1dGVzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRzY2hlbWE6IGNvbmZpZy5zdG9yZUluRGF0YWJhc2UgPyB7IHVzZXI6IHsgZmllbGRzOiB7IGxhc3RMb2dpbk1ldGhvZDoge1xuXHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdGlucHV0OiBmYWxzZSxcblx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdGZpZWxkTmFtZTogY29uZmlnLnNjaGVtYT8udXNlcj8ubGFzdExvZ2luTWV0aG9kIHx8IFwibGFzdExvZ2luTWV0aG9kXCJcblx0XHR9IH0gfSB9IDogdm9pZCAwLFxuXHRcdG9wdGlvbnM6IHVzZXJDb25maWdcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbGFzdExvZ2luTWV0aG9kIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/last-login-method/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/magic-link/client.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   magicLinkClient: () => (/* binding */ magicLinkClient)\n/* harmony export */ });\n//#region src/plugins/magic-link/client.ts\nconst magicLinkClient = () => {\n\treturn {\n\t\tid: \"magic-link\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21hZ2ljLWxpbmsvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxtYWdpYy1saW5rXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tYWdpYy1saW5rL2NsaWVudC50c1xuY29uc3QgbWFnaWNMaW5rQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm1hZ2ljLWxpbmtcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1hZ2ljTGlua0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/magic-link/index.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/magic-link/index.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   magicLink: () => (/* binding */ magicLink)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/magic-link/utils.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/magic-link/index.ts\nconst signInMagicLinkBodySchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_8__.email().meta({ description: \"Email address to send the magic link\" }),\n\tname: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"User display name. Only used if the user is registering for the first time. Eg: \\\"my-name\\\"\" }).optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after magic link verification\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after new user signup. Only used if the user is registering for the first time.\" }).optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after error.\" }).optional()\n});\nconst magicLinkVerifyQuerySchema = zod__WEBPACK_IMPORTED_MODULE_8__.object({\n\ttoken: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"Verification token\" }),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after magic link verification, if not provided the user will be redirected to the root URL. Eg: \\\"/dashboard\\\"\" }).optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after error.\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_8__.string().meta({ description: \"URL to redirect after new user signup. Only used if the user is registering for the first time.\" }).optional()\n});\nconst magicLink = (options) => {\n\tconst opts = {\n\t\tstoreToken: \"plain\",\n\t\t...options\n\t};\n\tasync function storeToken(ctx, token) {\n\t\tif (opts.storeToken === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.defaultKeyHasher)(token);\n\t\tif (typeof opts.storeToken === \"object\" && \"type\" in opts.storeToken && opts.storeToken.type === \"custom-hasher\") return await opts.storeToken.hash(token);\n\t\treturn token;\n\t}\n\treturn {\n\t\tid: \"magic-link\",\n\t\tendpoints: {\n\t\t\tsignInMagicLink: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__.createAuthEndpoint)(\"/sign-in/magic-link\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\trequireHeaders: true,\n\t\t\t\tbody: signInMagicLinkBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\toperationId: \"signInWithMagicLink\",\n\t\t\t\t\tdescription: \"Sign in with magic link\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst { email } = ctx.body;\n\t\t\t\tconst verificationToken = opts?.generateToken ? await opts.generateToken(email) : (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst storedToken = await storeToken(ctx, verificationToken);\n\t\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\t\tidentifier: storedToken,\n\t\t\t\t\tvalue: JSON.stringify({\n\t\t\t\t\t\temail,\n\t\t\t\t\t\tname: ctx.body.name\n\t\t\t\t\t}),\n\t\t\t\t\texpiresAt: new Date(Date.now() + (opts.expiresIn || 300) * 1e3)\n\t\t\t\t});\n\t\t\t\tconst realBaseURL = new URL(ctx.context.baseURL);\n\t\t\t\tconst pathname = realBaseURL.pathname === \"/\" ? \"\" : realBaseURL.pathname;\n\t\t\t\tconst basePath = pathname ? \"\" : ctx.context.options.basePath || \"\";\n\t\t\t\tconst url = new URL(`${pathname}${basePath}/magic-link/verify`, realBaseURL.origin);\n\t\t\t\turl.searchParams.set(\"token\", verificationToken);\n\t\t\t\turl.searchParams.set(\"callbackURL\", ctx.body.callbackURL || \"/\");\n\t\t\t\tif (ctx.body.newUserCallbackURL) url.searchParams.set(\"newUserCallbackURL\", ctx.body.newUserCallbackURL);\n\t\t\t\tif (ctx.body.errorCallbackURL) url.searchParams.set(\"errorCallbackURL\", ctx.body.errorCallbackURL);\n\t\t\t\tawait options.sendMagicLink({\n\t\t\t\t\temail,\n\t\t\t\t\turl: url.toString(),\n\t\t\t\t\ttoken: verificationToken\n\t\t\t\t}, ctx);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}),\n\t\t\tmagicLinkVerify: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_7__.createAuthEndpoint)(\"/magic-link/verify\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tquery: magicLinkVerifyQuerySchema,\n\t\t\t\tuse: [\n\t\t\t\t\t(0,_api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => {\n\t\t\t\t\t\treturn ctx.query.callbackURL ? decodeURIComponent(ctx.query.callbackURL) : \"/\";\n\t\t\t\t\t}),\n\t\t\t\t\t(0,_api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => {\n\t\t\t\t\t\treturn ctx.query.newUserCallbackURL ? decodeURIComponent(ctx.query.newUserCallbackURL) : \"/\";\n\t\t\t\t\t}),\n\t\t\t\t\t(0,_api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => {\n\t\t\t\t\t\treturn ctx.query.errorCallbackURL ? decodeURIComponent(ctx.query.errorCallbackURL) : \"/\";\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\trequireHeaders: true,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\toperationId: \"verifyMagicLink\",\n\t\t\t\t\tdescription: \"Verify magic link\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst token = ctx.query.token;\n\t\t\t\tconst callbackURL = new URL(ctx.query.callbackURL ? decodeURIComponent(ctx.query.callbackURL) : \"/\", ctx.context.baseURL).toString();\n\t\t\t\tconst errorCallbackURL = new URL(ctx.query.errorCallbackURL ? decodeURIComponent(ctx.query.errorCallbackURL) : callbackURL, ctx.context.baseURL);\n\t\t\t\tfunction redirectWithError(error) {\n\t\t\t\t\terrorCallbackURL.searchParams.set(\"error\", error);\n\t\t\t\t\tthrow ctx.redirect(errorCallbackURL.toString());\n\t\t\t\t}\n\t\t\t\tconst newUserCallbackURL = new URL(ctx.query.newUserCallbackURL ? decodeURIComponent(ctx.query.newUserCallbackURL) : callbackURL, ctx.context.baseURL).toString();\n\t\t\t\tconst storedToken = await storeToken(ctx, token);\n\t\t\t\tconst tokenValue = await ctx.context.internalAdapter.findVerificationValue(storedToken);\n\t\t\t\tif (!tokenValue) redirectWithError(\"INVALID_TOKEN\");\n\t\t\t\tif (tokenValue.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(tokenValue.id);\n\t\t\t\t\tredirectWithError(\"EXPIRED_TOKEN\");\n\t\t\t\t}\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(tokenValue.id);\n\t\t\t\tconst { email, name } = JSON.parse(tokenValue.value);\n\t\t\t\tlet isNewUser = false;\n\t\t\t\tlet user = await ctx.context.internalAdapter.findUserByEmail(email).then((res) => res?.user);\n\t\t\t\tif (!user) if (!opts.disableSignUp) {\n\t\t\t\t\tconst newUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\t\t\temail,\n\t\t\t\t\t\temailVerified: true,\n\t\t\t\t\t\tname: name || \"\"\n\t\t\t\t\t});\n\t\t\t\t\tisNewUser = true;\n\t\t\t\t\tuser = newUser;\n\t\t\t\t\tif (!user) redirectWithError(\"failed_to_create_user\");\n\t\t\t\t} else redirectWithError(\"new_user_signup_disabled\");\n\t\t\t\tif (!user.emailVerified) user = await ctx.context.internalAdapter.updateUser(user.id, { emailVerified: true });\n\t\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.id);\n\t\t\t\tif (!session) redirectWithError(\"failed_to_create_session\");\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t});\n\t\t\t\tif (!ctx.query.callbackURL) return ctx.json({\n\t\t\t\t\ttoken: session.token,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user)\n\t\t\t\t});\n\t\t\t\tif (isNewUser) throw ctx.redirect(newUserCallbackURL);\n\t\t\t\tthrow ctx.redirect(callbackURL);\n\t\t\t})\n\t\t},\n\t\trateLimit: [{\n\t\t\tpathMatcher(path) {\n\t\t\t\treturn path.startsWith(\"/sign-in/magic-link\") || path.startsWith(\"/magic-link/verify\");\n\t\t\t},\n\t\t\twindow: opts.rateLimit?.window || 60,\n\t\t\tmax: opts.rateLimit?.max || 5\n\t\t}],\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21hZ2ljLWxpbmsvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDZTtBQUNOO0FBQy9CO0FBQzJCO0FBQzlCO0FBQ2tCO0FBQ3RCO0FBQ2tDOztBQUUzRDtBQUNBLGtDQUFrQyx1Q0FBUTtBQUMxQyxRQUFRLHNDQUFPLFVBQVUscURBQXFEO0FBQzlFLE9BQU8sdUNBQVEsVUFBVSw0R0FBNEc7QUFDckksY0FBYyx1Q0FBUSxVQUFVLDhEQUE4RDtBQUM5RixxQkFBcUIsdUNBQVEsVUFBVSxnSEFBZ0g7QUFDdkosbUJBQW1CLHVDQUFRLFVBQVUsNkNBQTZDO0FBQ2xGLENBQUM7QUFDRCxtQ0FBbUMsdUNBQVE7QUFDM0MsUUFBUSx1Q0FBUSxVQUFVLG1DQUFtQztBQUM3RCxjQUFjLHVDQUFRLFVBQVUsK0lBQStJO0FBQy9LLG1CQUFtQix1Q0FBUSxVQUFVLDZDQUE2QztBQUNsRixxQkFBcUIsdUNBQVEsVUFBVSxnSEFBZ0g7QUFDdkosQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw0REFBZ0I7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlFQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSxRQUFRO0FBQ3BCLHNGQUFzRix3RUFBb0I7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixTQUFTLEVBQUUsU0FBUztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNCQUFzQixjQUFjO0FBQ3BDLElBQUk7QUFDSixvQkFBb0IseUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLEtBQUssOEVBQVc7QUFDaEI7QUFDQSxNQUFNO0FBQ04sS0FBSyw4RUFBVztBQUNoQjtBQUNBLE1BQU07QUFDTixLQUFLLDhFQUFXO0FBQ2hCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBLG1CQUFtQixzQ0FBc0M7QUFDekQsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw0RkFBNEYscUJBQXFCO0FBQ2pIO0FBQ0E7QUFDQSxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxXQUFXLCtEQUFlO0FBQzFCLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxtYWdpYy1saW5rXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IG9yaWdpbkNoZWNrIH0gZnJvbSBcIi4uLy4uL2FwaS9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdEtleUhhc2hlciB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tYWdpYy1saW5rL2luZGV4LnRzXG5jb25zdCBzaWduSW5NYWdpY0xpbmtCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRlbWFpbDogei5lbWFpbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFbWFpbCBhZGRyZXNzIHRvIHNlbmQgdGhlIG1hZ2ljIGxpbmtcIiB9KSxcblx0bmFtZTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVXNlciBkaXNwbGF5IG5hbWUuIE9ubHkgdXNlZCBpZiB0aGUgdXNlciBpcyByZWdpc3RlcmluZyBmb3IgdGhlIGZpcnN0IHRpbWUuIEVnOiBcXFwibXktbmFtZVxcXCJcIiB9KS5vcHRpb25hbCgpLFxuXHRjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVVJMIHRvIHJlZGlyZWN0IGFmdGVyIG1hZ2ljIGxpbmsgdmVyaWZpY2F0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0bmV3VXNlckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJVUkwgdG8gcmVkaXJlY3QgYWZ0ZXIgbmV3IHVzZXIgc2lnbnVwLiBPbmx5IHVzZWQgaWYgdGhlIHVzZXIgaXMgcmVnaXN0ZXJpbmcgZm9yIHRoZSBmaXJzdCB0aW1lLlwiIH0pLm9wdGlvbmFsKCksXG5cdGVycm9yQ2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlVSTCB0byByZWRpcmVjdCBhZnRlciBlcnJvci5cIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IG1hZ2ljTGlua1ZlcmlmeVF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuXHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVmVyaWZpY2F0aW9uIHRva2VuXCIgfSksXG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJVUkwgdG8gcmVkaXJlY3QgYWZ0ZXIgbWFnaWMgbGluayB2ZXJpZmljYXRpb24sIGlmIG5vdCBwcm92aWRlZCB0aGUgdXNlciB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gdGhlIHJvb3QgVVJMLiBFZzogXFxcIi9kYXNoYm9hcmRcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVVJMIHRvIHJlZGlyZWN0IGFmdGVyIGVycm9yLlwiIH0pLm9wdGlvbmFsKCksXG5cdG5ld1VzZXJDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVVJMIHRvIHJlZGlyZWN0IGFmdGVyIG5ldyB1c2VyIHNpZ251cC4gT25seSB1c2VkIGlmIHRoZSB1c2VyIGlzIHJlZ2lzdGVyaW5nIGZvciB0aGUgZmlyc3QgdGltZS5cIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IG1hZ2ljTGluayA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0c3RvcmVUb2tlbjogXCJwbGFpblwiLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblx0YXN5bmMgZnVuY3Rpb24gc3RvcmVUb2tlbihjdHgsIHRva2VuKSB7XG5cdFx0aWYgKG9wdHMuc3RvcmVUb2tlbiA9PT0gXCJoYXNoZWRcIikgcmV0dXJuIGF3YWl0IGRlZmF1bHRLZXlIYXNoZXIodG9rZW4pO1xuXHRcdGlmICh0eXBlb2Ygb3B0cy5zdG9yZVRva2VuID09PSBcIm9iamVjdFwiICYmIFwidHlwZVwiIGluIG9wdHMuc3RvcmVUb2tlbiAmJiBvcHRzLnN0b3JlVG9rZW4udHlwZSA9PT0gXCJjdXN0b20taGFzaGVyXCIpIHJldHVybiBhd2FpdCBvcHRzLnN0b3JlVG9rZW4uaGFzaCh0b2tlbik7XG5cdFx0cmV0dXJuIHRva2VuO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibWFnaWMtbGlua1wiLFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0c2lnbkluTWFnaWNMaW5rOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvc2lnbi1pbi9tYWdpYy1saW5rXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdFx0XHRcdGJvZHk6IHNpZ25Jbk1hZ2ljTGlua0JvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRvcGVyYXRpb25JZDogXCJzaWduSW5XaXRoTWFnaWNMaW5rXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIG1hZ2ljIGxpbmtcIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCB7IGVtYWlsIH0gPSBjdHguYm9keTtcblx0XHRcdFx0Y29uc3QgdmVyaWZpY2F0aW9uVG9rZW4gPSBvcHRzPy5nZW5lcmF0ZVRva2VuID8gYXdhaXQgb3B0cy5nZW5lcmF0ZVRva2VuKGVtYWlsKSA6IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcImEtelwiLCBcIkEtWlwiKTtcblx0XHRcdFx0Y29uc3Qgc3RvcmVkVG9rZW4gPSBhd2FpdCBzdG9yZVRva2VuKGN0eCwgdmVyaWZpY2F0aW9uVG9rZW4pO1xuXHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdFx0XHRcdGlkZW50aWZpZXI6IHN0b3JlZFRva2VuLFxuXHRcdFx0XHRcdHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRlbWFpbCxcblx0XHRcdFx0XHRcdG5hbWU6IGN0eC5ib2R5Lm5hbWVcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAob3B0cy5leHBpcmVzSW4gfHwgMzAwKSAqIDFlMylcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHJlYWxCYXNlVVJMID0gbmV3IFVSTChjdHguY29udGV4dC5iYXNlVVJMKTtcblx0XHRcdFx0Y29uc3QgcGF0aG5hbWUgPSByZWFsQmFzZVVSTC5wYXRobmFtZSA9PT0gXCIvXCIgPyBcIlwiIDogcmVhbEJhc2VVUkwucGF0aG5hbWU7XG5cdFx0XHRcdGNvbnN0IGJhc2VQYXRoID0gcGF0aG5hbWUgPyBcIlwiIDogY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlUGF0aCB8fCBcIlwiO1xuXHRcdFx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKGAke3BhdGhuYW1lfSR7YmFzZVBhdGh9L21hZ2ljLWxpbmsvdmVyaWZ5YCwgcmVhbEJhc2VVUkwub3JpZ2luKTtcblx0XHRcdFx0dXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0b2tlblwiLCB2ZXJpZmljYXRpb25Ub2tlbik7XG5cdFx0XHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2FsbGJhY2tVUkxcIiwgY3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCIpO1xuXHRcdFx0XHRpZiAoY3R4LmJvZHkubmV3VXNlckNhbGxiYWNrVVJMKSB1cmwuc2VhcmNoUGFyYW1zLnNldChcIm5ld1VzZXJDYWxsYmFja1VSTFwiLCBjdHguYm9keS5uZXdVc2VyQ2FsbGJhY2tVUkwpO1xuXHRcdFx0XHRpZiAoY3R4LmJvZHkuZXJyb3JDYWxsYmFja1VSTCkgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJlcnJvckNhbGxiYWNrVVJMXCIsIGN0eC5ib2R5LmVycm9yQ2FsbGJhY2tVUkwpO1xuXHRcdFx0XHRhd2FpdCBvcHRpb25zLnNlbmRNYWdpY0xpbmsoe1xuXHRcdFx0XHRcdGVtYWlsLFxuXHRcdFx0XHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0dG9rZW46IHZlcmlmaWNhdGlvblRva2VuXG5cdFx0XHRcdH0sIGN0eCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHRcdH0pLFxuXHRcdFx0bWFnaWNMaW5rVmVyaWZ5OiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbWFnaWMtbGluay92ZXJpZnlcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdHF1ZXJ5OiBtYWdpY0xpbmtWZXJpZnlRdWVyeVNjaGVtYSxcblx0XHRcdFx0dXNlOiBbXG5cdFx0XHRcdFx0b3JpZ2luQ2hlY2soKGN0eCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGN0eC5xdWVyeS5jYWxsYmFja1VSTCA/IGRlY29kZVVSSUNvbXBvbmVudChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIDogXCIvXCI7XG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0b3JpZ2luQ2hlY2soKGN0eCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGN0eC5xdWVyeS5uZXdVc2VyQ2FsbGJhY2tVUkwgPyBkZWNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5Lm5ld1VzZXJDYWxsYmFja1VSTCkgOiBcIi9cIjtcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRvcmlnaW5DaGVjaygoY3R4KSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4LnF1ZXJ5LmVycm9yQ2FsbGJhY2tVUkwgPyBkZWNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5LmVycm9yQ2FsbGJhY2tVUkwpIDogXCIvXCI7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XSxcblx0XHRcdFx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRvcGVyYXRpb25JZDogXCJ2ZXJpZnlNYWdpY0xpbmtcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgbWFnaWMgbGlua1wiLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH0sXG5cdFx0XHRcdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGN0eC5xdWVyeS50b2tlbjtcblx0XHRcdFx0Y29uc3QgY2FsbGJhY2tVUkwgPSBuZXcgVVJMKGN0eC5xdWVyeS5jYWxsYmFja1VSTCA/IGRlY29kZVVSSUNvbXBvbmVudChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIDogXCIvXCIsIGN0eC5jb250ZXh0LmJhc2VVUkwpLnRvU3RyaW5nKCk7XG5cdFx0XHRcdGNvbnN0IGVycm9yQ2FsbGJhY2tVUkwgPSBuZXcgVVJMKGN0eC5xdWVyeS5lcnJvckNhbGxiYWNrVVJMID8gZGVjb2RlVVJJQ29tcG9uZW50KGN0eC5xdWVyeS5lcnJvckNhbGxiYWNrVVJMKSA6IGNhbGxiYWNrVVJMLCBjdHguY29udGV4dC5iYXNlVVJMKTtcblx0XHRcdFx0ZnVuY3Rpb24gcmVkaXJlY3RXaXRoRXJyb3IoZXJyb3IpIHtcblx0XHRcdFx0XHRlcnJvckNhbGxiYWNrVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJlcnJvclwiLCBlcnJvcik7XG5cdFx0XHRcdFx0dGhyb3cgY3R4LnJlZGlyZWN0KGVycm9yQ2FsbGJhY2tVUkwudG9TdHJpbmcoKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgbmV3VXNlckNhbGxiYWNrVVJMID0gbmV3IFVSTChjdHgucXVlcnkubmV3VXNlckNhbGxiYWNrVVJMID8gZGVjb2RlVVJJQ29tcG9uZW50KGN0eC5xdWVyeS5uZXdVc2VyQ2FsbGJhY2tVUkwpIDogY2FsbGJhY2tVUkwsIGN0eC5jb250ZXh0LmJhc2VVUkwpLnRvU3RyaW5nKCk7XG5cdFx0XHRcdGNvbnN0IHN0b3JlZFRva2VuID0gYXdhaXQgc3RvcmVUb2tlbihjdHgsIHRva2VuKTtcblx0XHRcdFx0Y29uc3QgdG9rZW5WYWx1ZSA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoc3RvcmVkVG9rZW4pO1xuXHRcdFx0XHRpZiAoIXRva2VuVmFsdWUpIHJlZGlyZWN0V2l0aEVycm9yKFwiSU5WQUxJRF9UT0tFTlwiKTtcblx0XHRcdFx0aWYgKHRva2VuVmFsdWUuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodG9rZW5WYWx1ZS5pZCk7XG5cdFx0XHRcdFx0cmVkaXJlY3RXaXRoRXJyb3IoXCJFWFBJUkVEX1RPS0VOXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh0b2tlblZhbHVlLmlkKTtcblx0XHRcdFx0Y29uc3QgeyBlbWFpbCwgbmFtZSB9ID0gSlNPTi5wYXJzZSh0b2tlblZhbHVlLnZhbHVlKTtcblx0XHRcdFx0bGV0IGlzTmV3VXNlciA9IGZhbHNlO1xuXHRcdFx0XHRsZXQgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpLnRoZW4oKHJlcykgPT4gcmVzPy51c2VyKTtcblx0XHRcdFx0aWYgKCF1c2VyKSBpZiAoIW9wdHMuZGlzYWJsZVNpZ25VcCkge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVXNlcih7XG5cdFx0XHRcdFx0XHRlbWFpbCxcblx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHRuYW1lOiBuYW1lIHx8IFwiXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpc05ld1VzZXIgPSB0cnVlO1xuXHRcdFx0XHRcdHVzZXIgPSBuZXdVc2VyO1xuXHRcdFx0XHRcdGlmICghdXNlcikgcmVkaXJlY3RXaXRoRXJyb3IoXCJmYWlsZWRfdG9fY3JlYXRlX3VzZXJcIik7XG5cdFx0XHRcdH0gZWxzZSByZWRpcmVjdFdpdGhFcnJvcihcIm5ld191c2VyX3NpZ251cF9kaXNhYmxlZFwiKTtcblx0XHRcdFx0aWYgKCF1c2VyLmVtYWlsVmVyaWZpZWQpIHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcih1c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLmlkKTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uKSByZWRpcmVjdFdpdGhFcnJvcihcImZhaWxlZF90b19jcmVhdGVfc2Vzc2lvblwiKTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSByZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1c2VyKVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGlzTmV3VXNlcikgdGhyb3cgY3R4LnJlZGlyZWN0KG5ld1VzZXJDYWxsYmFja1VSTCk7XG5cdFx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChjYWxsYmFja1VSTCk7XG5cdFx0XHR9KVxuXHRcdH0sXG5cdFx0cmF0ZUxpbWl0OiBbe1xuXHRcdFx0cGF0aE1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRyZXR1cm4gcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24taW4vbWFnaWMtbGlua1wiKSB8fCBwYXRoLnN0YXJ0c1dpdGgoXCIvbWFnaWMtbGluay92ZXJpZnlcIik7XG5cdFx0XHR9LFxuXHRcdFx0d2luZG93OiBvcHRzLnJhdGVMaW1pdD8ud2luZG93IHx8IDYwLFxuXHRcdFx0bWF4OiBvcHRzLnJhdGVMaW1pdD8ubWF4IHx8IDVcblx0XHR9XSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1hZ2ljTGluayB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/magic-link/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/magic-link/utils.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/magic-link/utils.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultKeyHasher: () => (/* binding */ defaultKeyHasher)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n//#region src/plugins/magic-link/utils.ts\nconst defaultKeyHasher = async (otp) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(otp));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21hZ2ljLWxpbmsvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNDOztBQUV0RDtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFVO0FBQzlCLFFBQVEsZ0VBQVMsZ0NBQWdDLGdCQUFnQjtBQUNqRTs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG1hZ2ljLWxpbmtcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvbWFnaWMtbGluay91dGlscy50c1xuY29uc3QgZGVmYXVsdEtleUhhc2hlciA9IGFzeW5jIChvdHApID0+IHtcblx0Y29uc3QgaGFzaCA9IGF3YWl0IGNyZWF0ZUhhc2goXCJTSEEtMjU2XCIpLmRpZ2VzdChuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUob3RwKSk7XG5cdHJldHVybiBiYXNlNjRVcmwuZW5jb2RlKG5ldyBVaW50OEFycmF5KGhhc2gpLCB7IHBhZGRpbmc6IGZhbHNlIH0pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBkZWZhdWx0S2V5SGFzaGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/magic-link/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/mcp/authorize.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/mcp/authorize.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authorizeMCPOAuth: () => (/* binding */ authorizeMCPOAuth)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n//#region src/plugins/mcp/authorize.ts\nfunction redirectErrorURL(url, error, description) {\n\treturn `${url.includes(\"?\") ? \"&\" : \"?\"}error=${error}&error_description=${description}`;\n}\nasync function authorizeMCPOAuth(ctx, options) {\n\tctx.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n\tctx.setHeader(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n\tctx.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n\tctx.setHeader(\"Access-Control-Max-Age\", \"86400\");\n\tconst opts = {\n\t\tcodeExpiresIn: 600,\n\t\tdefaultScope: \"openid\",\n\t\t...options,\n\t\tscopes: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\",\n\t\t\t...options?.scopes || []\n\t\t]\n\t};\n\tif (!ctx.request) throw new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\", {\n\t\terror_description: \"request not found\",\n\t\terror: \"invalid_request\"\n\t});\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\t/**\n\t\t* If the user is not logged in, we need to redirect them to the\n\t\t* login page.\n\t\t*/\n\t\tawait ctx.setSignedCookie(\"oidc_login_prompt\", JSON.stringify(ctx.query), ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\tconst queryFromURL = ctx.request.url?.split(\"?\")[1];\n\t\tthrow ctx.redirect(`${options.loginPage}?${queryFromURL}`);\n\t}\n\tconst query = ctx.query;\n\tif (!query.client_id) throw ctx.redirect(`${ctx.context.baseURL}/error?error=invalid_client`);\n\tif (!query.response_type) throw ctx.redirect(redirectErrorURL(`${ctx.context.baseURL}/error`, \"invalid_request\", \"response_type is required\"));\n\tconst client = await ctx.context.adapter.findOne({\n\t\tmodel: \"oauthApplication\",\n\t\twhere: [{\n\t\t\tfield: \"clientId\",\n\t\t\tvalue: ctx.query.client_id\n\t\t}]\n\t}).then((res) => {\n\t\tif (!res) return null;\n\t\treturn {\n\t\t\t...res,\n\t\t\tredirectUrls: res.redirectUrls.split(\",\"),\n\t\t\tmetadata: res.metadata ? JSON.parse(res.metadata) : {}\n\t\t};\n\t});\n\tif (!client) throw ctx.redirect(`${ctx.context.baseURL}/error?error=invalid_client`);\n\tconst redirectURI = client.redirectUrls.find((url) => url === ctx.query.redirect_uri);\n\tif (!redirectURI || !query.redirect_uri)\n /**\n\t* show UI error here warning the user that the redirect URI is invalid\n\t*/\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"Invalid redirect URI\" });\n\tif (client.disabled) throw ctx.redirect(`${ctx.context.baseURL}/error?error=client_disabled`);\n\tif (query.response_type !== \"code\") throw ctx.redirect(`${ctx.context.baseURL}/error?error=unsupported_response_type`);\n\tconst requestScope = query.scope?.split(\" \").filter((s) => s) || opts.defaultScope.split(\" \");\n\tconst invalidScopes = requestScope.filter((scope) => {\n\t\treturn !opts.scopes.includes(scope);\n\t});\n\tif (invalidScopes.length) throw ctx.redirect(redirectErrorURL(query.redirect_uri, \"invalid_scope\", `The following scopes are invalid: ${invalidScopes.join(\", \")}`));\n\tif ((!query.code_challenge || !query.code_challenge_method) && options.requirePKCE) throw ctx.redirect(redirectErrorURL(query.redirect_uri, \"invalid_request\", \"pkce is required\"));\n\tif (!query.code_challenge_method) query.code_challenge_method = \"plain\";\n\tif (![\"s256\", options.allowPlainCodeChallengeMethod ? \"plain\" : \"s256\"].includes(query.code_challenge_method?.toLowerCase() || \"\")) throw ctx.redirect(redirectErrorURL(query.redirect_uri, \"invalid_request\", \"invalid code_challenge method\"));\n\tconst code = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32, \"a-z\", \"A-Z\", \"0-9\");\n\tconst codeExpiresInMs = opts.codeExpiresIn * 1e3;\n\tconst expiresAt = new Date(Date.now() + codeExpiresInMs);\n\ttry {\n\t\t/**\n\t\t* Save the code in the database\n\t\t*/\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: JSON.stringify({\n\t\t\t\tclientId: client.clientId,\n\t\t\t\tredirectURI: query.redirect_uri,\n\t\t\t\tscope: requestScope,\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tauthTime: new Date(session.session.createdAt).getTime(),\n\t\t\t\trequireConsent: query.prompt === \"consent\",\n\t\t\t\tstate: query.prompt === \"consent\" ? query.state : null,\n\t\t\t\tcodeChallenge: query.code_challenge,\n\t\t\t\tcodeChallengeMethod: query.code_challenge_method,\n\t\t\t\tnonce: query.nonce\n\t\t\t}),\n\t\t\tidentifier: code,\n\t\t\texpiresAt\n\t\t});\n\t} catch {\n\t\tthrow ctx.redirect(redirectErrorURL(query.redirect_uri, \"server_error\", \"An error occurred while processing the request\"));\n\t}\n\tif (query.prompt !== \"consent\") {\n\t\tconst redirectURIWithCode$1 = new URL(redirectURI);\n\t\tredirectURIWithCode$1.searchParams.set(\"code\", code);\n\t\tif (ctx.query.state) redirectURIWithCode$1.searchParams.set(\"state\", ctx.query.state);\n\t\tthrow ctx.redirect(redirectURIWithCode$1.toString());\n\t}\n\tif (options?.consentPage) {\n\t\tawait ctx.setSignedCookie(\"oidc_consent_prompt\", code, ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\tconst urlParams = new URLSearchParams();\n\t\turlParams.set(\"consent_code\", code);\n\t\turlParams.set(\"client_id\", client.clientId);\n\t\turlParams.set(\"scope\", requestScope.join(\" \"));\n\t\tconst consentURI = `${options.consentPage}?${urlParams.toString()}`;\n\t\tthrow ctx.redirect(consentURI);\n\t}\n\tconst redirectURIWithCode = new URL(redirectURI);\n\tredirectURIWithCode.searchParams.set(\"code\", code);\n\tif (ctx.query.state) redirectURIWithCode.searchParams.set(\"state\", ctx.query.state);\n\tthrow ctx.redirect(redirectURIWithCode.toString());\n}\n\n//#endregion\n\n//# sourceMappingURL=authorize.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21jcC9hdXRob3JpemUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErRDtBQUMvQjtBQUNpQztBQUNwQztBQUNVOztBQUV2QztBQUNBO0FBQ0EsV0FBVyw4QkFBOEIsUUFBUSxNQUFNLHFCQUFxQixZQUFZO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBUTtBQUNyQztBQUNBO0FBQ0EsRUFBRTtBQUNGLHVCQUF1QiwwRUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esd0JBQXdCLGtCQUFrQixHQUFHLGFBQWE7QUFDMUQ7QUFDQTtBQUNBLDZDQUE2QyxvQkFBb0I7QUFDakUsa0VBQWtFLG9CQUFvQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysb0NBQW9DLG9CQUFvQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBUSxrQkFBa0IsaUNBQWlDO0FBQ3RFLDRDQUE0QyxvQkFBb0I7QUFDaEUsMkRBQTJELG9CQUFvQjtBQUMvRTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YseUlBQXlJLHlCQUF5QjtBQUNsSztBQUNBO0FBQ0E7QUFDQSxjQUFjLHdFQUFvQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0JBQW9CLEdBQUcscUJBQXFCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcbWNwXFxhdXRob3JpemUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvbWNwL2F1dGhvcml6ZS50c1xuZnVuY3Rpb24gcmVkaXJlY3RFcnJvclVSTCh1cmwsIGVycm9yLCBkZXNjcmlwdGlvbikge1xuXHRyZXR1cm4gYCR7dXJsLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9ZXJyb3I9JHtlcnJvcn0mZXJyb3JfZGVzY3JpcHRpb249JHtkZXNjcmlwdGlvbn1gO1xufVxuYXN5bmMgZnVuY3Rpb24gYXV0aG9yaXplTUNQT0F1dGgoY3R4LCBvcHRpb25zKSB7XG5cdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xuXHRjdHguc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIlBPU1QsIE9QVElPTlNcIik7XG5cdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsIFwiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uXCIpO1xuXHRjdHguc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtTWF4LUFnZVwiLCBcIjg2NDAwXCIpO1xuXHRjb25zdCBvcHRzID0ge1xuXHRcdGNvZGVFeHBpcmVzSW46IDYwMCxcblx0XHRkZWZhdWx0U2NvcGU6IFwib3BlbmlkXCIsXG5cdFx0Li4ub3B0aW9ucyxcblx0XHRzY29wZXM6IFtcblx0XHRcdFwib3BlbmlkXCIsXG5cdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFwiZW1haWxcIixcblx0XHRcdFwib2ZmbGluZV9hY2Nlc3NcIixcblx0XHRcdC4uLm9wdGlvbnM/LnNjb3BlcyB8fCBbXVxuXHRcdF1cblx0fTtcblx0aWYgKCFjdHgucmVxdWVzdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJyZXF1ZXN0IG5vdCBmb3VuZFwiLFxuXHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdH0pO1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0LyoqXG5cdFx0KiBJZiB0aGUgdXNlciBpcyBub3QgbG9nZ2VkIGluLCB3ZSBuZWVkIHRvIHJlZGlyZWN0IHRoZW0gdG8gdGhlXG5cdFx0KiBsb2dpbiBwYWdlLlxuXHRcdCovXG5cdFx0YXdhaXQgY3R4LnNldFNpZ25lZENvb2tpZShcIm9pZGNfbG9naW5fcHJvbXB0XCIsIEpTT04uc3RyaW5naWZ5KGN0eC5xdWVyeSksIGN0eC5jb250ZXh0LnNlY3JldCwge1xuXHRcdFx0bWF4QWdlOiA2MDAsXG5cdFx0XHRwYXRoOiBcIi9cIixcblx0XHRcdHNhbWVTaXRlOiBcImxheFwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgcXVlcnlGcm9tVVJMID0gY3R4LnJlcXVlc3QudXJsPy5zcGxpdChcIj9cIilbMV07XG5cdFx0dGhyb3cgY3R4LnJlZGlyZWN0KGAke29wdGlvbnMubG9naW5QYWdlfT8ke3F1ZXJ5RnJvbVVSTH1gKTtcblx0fVxuXHRjb25zdCBxdWVyeSA9IGN0eC5xdWVyeTtcblx0aWYgKCFxdWVyeS5jbGllbnRfaWQpIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcj9lcnJvcj1pbnZhbGlkX2NsaWVudGApO1xuXHRpZiAoIXF1ZXJ5LnJlc3BvbnNlX3R5cGUpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yVVJMKGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYCwgXCJpbnZhbGlkX3JlcXVlc3RcIiwgXCJyZXNwb25zZV90eXBlIGlzIHJlcXVpcmVkXCIpKTtcblx0Y29uc3QgY2xpZW50ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJvYXV0aEFwcGxpY2F0aW9uXCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJjbGllbnRJZFwiLFxuXHRcdFx0dmFsdWU6IGN0eC5xdWVyeS5jbGllbnRfaWRcblx0XHR9XVxuXHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRpZiAoIXJlcykgcmV0dXJuIG51bGw7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnJlcyxcblx0XHRcdHJlZGlyZWN0VXJsczogcmVzLnJlZGlyZWN0VXJscy5zcGxpdChcIixcIiksXG5cdFx0XHRtZXRhZGF0YTogcmVzLm1ldGFkYXRhID8gSlNPTi5wYXJzZShyZXMubWV0YWRhdGEpIDoge31cblx0XHR9O1xuXHR9KTtcblx0aWYgKCFjbGllbnQpIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcj9lcnJvcj1pbnZhbGlkX2NsaWVudGApO1xuXHRjb25zdCByZWRpcmVjdFVSSSA9IGNsaWVudC5yZWRpcmVjdFVybHMuZmluZCgodXJsKSA9PiB1cmwgPT09IGN0eC5xdWVyeS5yZWRpcmVjdF91cmkpO1xuXHRpZiAoIXJlZGlyZWN0VVJJIHx8ICFxdWVyeS5yZWRpcmVjdF91cmkpXG4gLyoqXG5cdCogc2hvdyBVSSBlcnJvciBoZXJlIHdhcm5pbmcgdGhlIHVzZXIgdGhhdCB0aGUgcmVkaXJlY3QgVVJJIGlzIGludmFsaWRcblx0Ki9cblx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkludmFsaWQgcmVkaXJlY3QgVVJJXCIgfSk7XG5cdGlmIChjbGllbnQuZGlzYWJsZWQpIHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcj9lcnJvcj1jbGllbnRfZGlzYWJsZWRgKTtcblx0aWYgKHF1ZXJ5LnJlc3BvbnNlX3R5cGUgIT09IFwiY29kZVwiKSB0aHJvdyBjdHgucmVkaXJlY3QoYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vZXJyb3I/ZXJyb3I9dW5zdXBwb3J0ZWRfcmVzcG9uc2VfdHlwZWApO1xuXHRjb25zdCByZXF1ZXN0U2NvcGUgPSBxdWVyeS5zY29wZT8uc3BsaXQoXCIgXCIpLmZpbHRlcigocykgPT4gcykgfHwgb3B0cy5kZWZhdWx0U2NvcGUuc3BsaXQoXCIgXCIpO1xuXHRjb25zdCBpbnZhbGlkU2NvcGVzID0gcmVxdWVzdFNjb3BlLmZpbHRlcigoc2NvcGUpID0+IHtcblx0XHRyZXR1cm4gIW9wdHMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKTtcblx0fSk7XG5cdGlmIChpbnZhbGlkU2NvcGVzLmxlbmd0aCkgdGhyb3cgY3R4LnJlZGlyZWN0KHJlZGlyZWN0RXJyb3JVUkwocXVlcnkucmVkaXJlY3RfdXJpLCBcImludmFsaWRfc2NvcGVcIiwgYFRoZSBmb2xsb3dpbmcgc2NvcGVzIGFyZSBpbnZhbGlkOiAke2ludmFsaWRTY29wZXMuam9pbihcIiwgXCIpfWApKTtcblx0aWYgKCghcXVlcnkuY29kZV9jaGFsbGVuZ2UgfHwgIXF1ZXJ5LmNvZGVfY2hhbGxlbmdlX21ldGhvZCkgJiYgb3B0aW9ucy5yZXF1aXJlUEtDRSkgdGhyb3cgY3R4LnJlZGlyZWN0KHJlZGlyZWN0RXJyb3JVUkwocXVlcnkucmVkaXJlY3RfdXJpLCBcImludmFsaWRfcmVxdWVzdFwiLCBcInBrY2UgaXMgcmVxdWlyZWRcIikpO1xuXHRpZiAoIXF1ZXJ5LmNvZGVfY2hhbGxlbmdlX21ldGhvZCkgcXVlcnkuY29kZV9jaGFsbGVuZ2VfbWV0aG9kID0gXCJwbGFpblwiO1xuXHRpZiAoIVtcInMyNTZcIiwgb3B0aW9ucy5hbGxvd1BsYWluQ29kZUNoYWxsZW5nZU1ldGhvZCA/IFwicGxhaW5cIiA6IFwiczI1NlwiXS5pbmNsdWRlcyhxdWVyeS5jb2RlX2NoYWxsZW5nZV9tZXRob2Q/LnRvTG93ZXJDYXNlKCkgfHwgXCJcIikpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yVVJMKHF1ZXJ5LnJlZGlyZWN0X3VyaSwgXCJpbnZhbGlkX3JlcXVlc3RcIiwgXCJpbnZhbGlkIGNvZGVfY2hhbGxlbmdlIG1ldGhvZFwiKSk7XG5cdGNvbnN0IGNvZGUgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJhLXpcIiwgXCJBLVpcIiwgXCIwLTlcIik7XG5cdGNvbnN0IGNvZGVFeHBpcmVzSW5NcyA9IG9wdHMuY29kZUV4cGlyZXNJbiAqIDFlMztcblx0Y29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIGNvZGVFeHBpcmVzSW5Ncyk7XG5cdHRyeSB7XG5cdFx0LyoqXG5cdFx0KiBTYXZlIHRoZSBjb2RlIGluIHRoZSBkYXRhYmFzZVxuXHRcdCovXG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdGNsaWVudElkOiBjbGllbnQuY2xpZW50SWQsXG5cdFx0XHRcdHJlZGlyZWN0VVJJOiBxdWVyeS5yZWRpcmVjdF91cmksXG5cdFx0XHRcdHNjb3BlOiByZXF1ZXN0U2NvcGUsXG5cdFx0XHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdFx0XHRhdXRoVGltZTogbmV3IERhdGUoc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpLFxuXHRcdFx0XHRyZXF1aXJlQ29uc2VudDogcXVlcnkucHJvbXB0ID09PSBcImNvbnNlbnRcIixcblx0XHRcdFx0c3RhdGU6IHF1ZXJ5LnByb21wdCA9PT0gXCJjb25zZW50XCIgPyBxdWVyeS5zdGF0ZSA6IG51bGwsXG5cdFx0XHRcdGNvZGVDaGFsbGVuZ2U6IHF1ZXJ5LmNvZGVfY2hhbGxlbmdlLFxuXHRcdFx0XHRjb2RlQ2hhbGxlbmdlTWV0aG9kOiBxdWVyeS5jb2RlX2NoYWxsZW5nZV9tZXRob2QsXG5cdFx0XHRcdG5vbmNlOiBxdWVyeS5ub25jZVxuXHRcdFx0fSksXG5cdFx0XHRpZGVudGlmaWVyOiBjb2RlLFxuXHRcdFx0ZXhwaXJlc0F0XG5cdFx0fSk7XG5cdH0gY2F0Y2gge1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yVVJMKHF1ZXJ5LnJlZGlyZWN0X3VyaSwgXCJzZXJ2ZXJfZXJyb3JcIiwgXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSByZXF1ZXN0XCIpKTtcblx0fVxuXHRpZiAocXVlcnkucHJvbXB0ICE9PSBcImNvbnNlbnRcIikge1xuXHRcdGNvbnN0IHJlZGlyZWN0VVJJV2l0aENvZGUkMSA9IG5ldyBVUkwocmVkaXJlY3RVUkkpO1xuXHRcdHJlZGlyZWN0VVJJV2l0aENvZGUkMS5zZWFyY2hQYXJhbXMuc2V0KFwiY29kZVwiLCBjb2RlKTtcblx0XHRpZiAoY3R4LnF1ZXJ5LnN0YXRlKSByZWRpcmVjdFVSSVdpdGhDb2RlJDEuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIGN0eC5xdWVyeS5zdGF0ZSk7XG5cdFx0dGhyb3cgY3R4LnJlZGlyZWN0KHJlZGlyZWN0VVJJV2l0aENvZGUkMS50b1N0cmluZygpKTtcblx0fVxuXHRpZiAob3B0aW9ucz8uY29uc2VudFBhZ2UpIHtcblx0XHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKFwib2lkY19jb25zZW50X3Byb21wdFwiLCBjb2RlLCBjdHguY29udGV4dC5zZWNyZXQsIHtcblx0XHRcdG1heEFnZTogNjAwLFxuXHRcdFx0cGF0aDogXCIvXCIsXG5cdFx0XHRzYW1lU2l0ZTogXCJsYXhcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0XHR1cmxQYXJhbXMuc2V0KFwiY29uc2VudF9jb2RlXCIsIGNvZGUpO1xuXHRcdHVybFBhcmFtcy5zZXQoXCJjbGllbnRfaWRcIiwgY2xpZW50LmNsaWVudElkKTtcblx0XHR1cmxQYXJhbXMuc2V0KFwic2NvcGVcIiwgcmVxdWVzdFNjb3BlLmpvaW4oXCIgXCIpKTtcblx0XHRjb25zdCBjb25zZW50VVJJID0gYCR7b3B0aW9ucy5jb25zZW50UGFnZX0/JHt1cmxQYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdChjb25zZW50VVJJKTtcblx0fVxuXHRjb25zdCByZWRpcmVjdFVSSVdpdGhDb2RlID0gbmV3IFVSTChyZWRpcmVjdFVSSSk7XG5cdHJlZGlyZWN0VVJJV2l0aENvZGUuc2VhcmNoUGFyYW1zLnNldChcImNvZGVcIiwgY29kZSk7XG5cdGlmIChjdHgucXVlcnkuc3RhdGUpIHJlZGlyZWN0VVJJV2l0aENvZGUuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIGN0eC5xdWVyeS5zdGF0ZSk7XG5cdHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdFVSSVdpdGhDb2RlLnRvU3RyaW5nKCkpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGF1dGhvcml6ZU1DUE9BdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRob3JpemUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/mcp/authorize.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/mcp/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/mcp/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMCPProtectedResourceMetadata: () => (/* binding */ getMCPProtectedResourceMetadata),\n/* harmony export */   getMCPProviderMetadata: () => (/* binding */ getMCPProviderMetadata),\n/* harmony export */   mcp: () => (/* binding */ mcp),\n/* harmony export */   oAuthDiscoveryMetadata: () => (/* binding */ oAuthDiscoveryMetadata),\n/* harmony export */   oAuthProtectedResourceMetadata: () => (/* binding */ oAuthProtectedResourceMetadata),\n/* harmony export */   withMcpAuth: () => (/* binding */ withMcpAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _oidc_provider_utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../oidc-provider/utils/prompt.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs\");\n/* harmony import */ var _oidc_provider_schema_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../oidc-provider/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/schema.mjs\");\n/* harmony import */ var _oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../oidc-provider/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs\");\n/* harmony import */ var _authorize_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./authorize.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/mcp/authorize.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/mcp/index.ts\nconst getMCPProviderMetadata = (ctx, options) => {\n\tconst issuer = ctx.context.options.baseURL;\n\tconst baseURL = ctx.context.baseURL;\n\tif (!issuer || !baseURL) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\terror: \"invalid_issuer\",\n\t\terror_description: \"issuer or baseURL is not set. If you're the app developer, please make sure to set the `baseURL` in your auth config.\"\n\t});\n\treturn {\n\t\tissuer,\n\t\tauthorization_endpoint: `${baseURL}/mcp/authorize`,\n\t\ttoken_endpoint: `${baseURL}/mcp/token`,\n\t\tuserinfo_endpoint: `${baseURL}/mcp/userinfo`,\n\t\tjwks_uri: `${baseURL}/mcp/jwks`,\n\t\tregistration_endpoint: `${baseURL}/mcp/register`,\n\t\tscopes_supported: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\"\n\t\t],\n\t\tresponse_types_supported: [\"code\"],\n\t\tresponse_modes_supported: [\"query\"],\n\t\tgrant_types_supported: [\"authorization_code\", \"refresh_token\"],\n\t\tacr_values_supported: [\"urn:mace:incommon:iap:silver\", \"urn:mace:incommon:iap:bronze\"],\n\t\tsubject_types_supported: [\"public\"],\n\t\tid_token_signing_alg_values_supported: [\"RS256\", \"none\"],\n\t\ttoken_endpoint_auth_methods_supported: [\n\t\t\t\"client_secret_basic\",\n\t\t\t\"client_secret_post\",\n\t\t\t\"none\"\n\t\t],\n\t\tcode_challenge_methods_supported: [\"S256\"],\n\t\tclaims_supported: [\n\t\t\t\"sub\",\n\t\t\t\"iss\",\n\t\t\t\"aud\",\n\t\t\t\"exp\",\n\t\t\t\"nbf\",\n\t\t\t\"iat\",\n\t\t\t\"jti\",\n\t\t\t\"email\",\n\t\t\t\"email_verified\",\n\t\t\t\"name\"\n\t\t],\n\t\t...options?.metadata\n\t};\n};\nconst getMCPProtectedResourceMetadata = (ctx, options) => {\n\tconst baseURL = ctx.context.baseURL;\n\tconst origin = new URL(baseURL).origin;\n\treturn {\n\t\tresource: options?.resource ?? origin,\n\t\tauthorization_servers: [origin],\n\t\tjwks_uri: options?.oidcConfig?.metadata?.jwks_uri ?? `${baseURL}/mcp/jwks`,\n\t\tscopes_supported: options?.oidcConfig?.metadata?.scopes_supported ?? [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\"\n\t\t],\n\t\tbearer_methods_supported: [\"header\"],\n\t\tresource_signing_alg_values_supported: [\"RS256\", \"none\"]\n\t};\n};\nconst registerMcpClientBodySchema = zod__WEBPACK_IMPORTED_MODULE_19__.object({\n\tredirect_uris: zod__WEBPACK_IMPORTED_MODULE_19__.array(zod__WEBPACK_IMPORTED_MODULE_19__.string()),\n\ttoken_endpoint_auth_method: zod__WEBPACK_IMPORTED_MODULE_19__[\"enum\"]([\n\t\t\"none\",\n\t\t\"client_secret_basic\",\n\t\t\"client_secret_post\"\n\t]).default(\"client_secret_basic\").optional(),\n\tgrant_types: zod__WEBPACK_IMPORTED_MODULE_19__.array(zod__WEBPACK_IMPORTED_MODULE_19__[\"enum\"]([\n\t\t\"authorization_code\",\n\t\t\"implicit\",\n\t\t\"password\",\n\t\t\"client_credentials\",\n\t\t\"refresh_token\",\n\t\t\"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n\t\t\"urn:ietf:params:oauth:grant-type:saml2-bearer\"\n\t])).default([\"authorization_code\"]).optional(),\n\tresponse_types: zod__WEBPACK_IMPORTED_MODULE_19__.array(zod__WEBPACK_IMPORTED_MODULE_19__[\"enum\"]([\"code\", \"token\"])).default([\"code\"]).optional(),\n\tclient_name: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tclient_uri: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tlogo_uri: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tscope: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tcontacts: zod__WEBPACK_IMPORTED_MODULE_19__.array(zod__WEBPACK_IMPORTED_MODULE_19__.string()).optional(),\n\ttos_uri: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tpolicy_uri: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tjwks_uri: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tjwks: zod__WEBPACK_IMPORTED_MODULE_19__.record(zod__WEBPACK_IMPORTED_MODULE_19__.string(), zod__WEBPACK_IMPORTED_MODULE_19__.any()).optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_19__.record(zod__WEBPACK_IMPORTED_MODULE_19__.any(), zod__WEBPACK_IMPORTED_MODULE_19__.any()).optional(),\n\tsoftware_id: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tsoftware_version: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional(),\n\tsoftware_statement: zod__WEBPACK_IMPORTED_MODULE_19__.string().optional()\n});\nconst mcpOAuthTokenBodySchema = zod__WEBPACK_IMPORTED_MODULE_19__.record(zod__WEBPACK_IMPORTED_MODULE_19__.any(), zod__WEBPACK_IMPORTED_MODULE_19__.any());\nconst mcp = (options) => {\n\tconst opts = {\n\t\tcodeExpiresIn: 600,\n\t\tdefaultScope: \"openid\",\n\t\taccessTokenExpiresIn: 3600,\n\t\trefreshTokenExpiresIn: 604800,\n\t\tallowPlainCodeChallengeMethod: true,\n\t\t...options.oidcConfig,\n\t\tloginPage: options.loginPage,\n\t\tscopes: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\",\n\t\t\t...options.oidcConfig?.scopes || []\n\t\t]\n\t};\n\tconst modelName = {\n\t\toauthClient: \"oauthApplication\",\n\t\toauthAccessToken: \"oauthAccessToken\",\n\t\toauthConsent: \"oauthConsent\"\n\t};\n\tconst provider = (0,_oidc_provider_index_mjs__WEBPACK_IMPORTED_MODULE_11__.oidcProvider)(opts);\n\treturn {\n\t\tid: \"mcp\",\n\t\thooks: { after: [{\n\t\t\tmatcher() {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst cookie = await ctx.getSignedCookie(\"oidc_login_prompt\", ctx.context.secret);\n\t\t\t\tconst cookieName = ctx.context.authCookies.sessionToken.name;\n\t\t\t\tconst parsedSetCookieHeader = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.parseSetCookieHeader)(ctx.context.responseHeaders?.get(\"set-cookie\") || \"\");\n\t\t\t\tconst hasSessionToken = parsedSetCookieHeader.has(cookieName);\n\t\t\t\tif (!cookie || !hasSessionToken) return;\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.expireCookie)(ctx, {\n\t\t\t\t\tname: \"oidc_login_prompt\",\n\t\t\t\t\tattributes: { path: \"/\" }\n\t\t\t\t});\n\t\t\t\tconst sessionToken = (parsedSetCookieHeader.get(cookieName)?.value)?.split(\".\")[0];\n\t\t\t\tif (!sessionToken) return;\n\t\t\t\tconst session = await ctx.context.internalAdapter.findSession(sessionToken) || ctx.context.newSession;\n\t\t\t\tif (!session) return;\n\t\t\t\tconst parsedCookie = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_14__.safeJSONParse)(cookie);\n\t\t\t\tif (!parsedCookie) return;\n\t\t\t\tctx.query = parsedCookie;\n\t\t\t\tconst promptSet = (0,_oidc_provider_utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_9__.parsePrompt)(String(ctx.query?.prompt));\n\t\t\t\tif (promptSet.has(\"login\")) {\n\t\t\t\t\tconst newPromptSet = new Set(promptSet);\n\t\t\t\t\tnewPromptSet.delete(\"login\");\n\t\t\t\t\tctx.query = {\n\t\t\t\t\t\t...ctx.query,\n\t\t\t\t\t\tprompt: Array.from(newPromptSet).join(\" \")\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tctx.context.session = session;\n\t\t\t\treturn await (0,_authorize_mjs__WEBPACK_IMPORTED_MODULE_12__.authorizeMCPOAuth)(ctx, opts);\n\t\t\t})\n\t\t}] },\n\t\tendpoints: {\n\t\t\toAuthConsent: provider.endpoints.oAuthConsent,\n\t\t\tgetMcpOAuthConfig: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/.well-known/oauth-authorization-server\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmetadata: _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_6__.HIDE_METADATA\n\t\t\t}, async (c) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst metadata = getMCPProviderMetadata(c, options);\n\t\t\t\t\treturn c.json(metadata);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t\treturn c.json(null);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tgetMCPProtectedResource: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/.well-known/oauth-protected-resource\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmetadata: _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_6__.HIDE_METADATA\n\t\t\t}, async (c) => {\n\t\t\t\tconst metadata = getMCPProtectedResourceMetadata(c, options);\n\t\t\t\treturn c.json(metadata);\n\t\t\t}),\n\t\t\tmcpOAuthAuthorize: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/mcp/authorize\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tquery: zod__WEBPACK_IMPORTED_MODULE_19__.record(zod__WEBPACK_IMPORTED_MODULE_19__.string(), zod__WEBPACK_IMPORTED_MODULE_19__.any()),\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Authorize an OAuth2 request using MCP\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Authorization response generated successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\tdescription: \"Authorization response, contents depend on the authorize function implementation\"\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\treturn (0,_authorize_mjs__WEBPACK_IMPORTED_MODULE_12__.authorizeMCPOAuth)(ctx, opts);\n\t\t\t}),\n\t\t\tmcpOAuthToken: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/mcp/token\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: mcpOAuthTokenBodySchema,\n\t\t\t\tmetadata: {\n\t\t\t\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_6__.HIDE_METADATA,\n\t\t\t\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t\t\t\t}\n\t\t\t}, async (ctx) => {\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n\t\t\t\tctx.setHeader(\"Access-Control-Max-Age\", \"86400\");\n\t\t\t\tlet { body } = ctx;\n\t\t\t\tif (!body) throw ctx.error(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"request body not found\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (body instanceof FormData) body = Object.fromEntries(body.entries());\n\t\t\t\tif (!(body instanceof Object)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"request body is not an object\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tlet { client_id, client_secret } = body;\n\t\t\t\tconst authorization = ctx.request?.headers.get(\"authorization\") || null;\n\t\t\t\tif (authorization && !client_id && !client_secret && authorization.startsWith(\"Basic \")) try {\n\t\t\t\t\tconst encoded = authorization.replace(\"Basic \", \"\");\n\t\t\t\t\tconst decoded = new TextDecoder().decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_18__.base64.decode(encoded));\n\t\t\t\t\tif (!decoded.includes(\":\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tconst [id, secret] = decoded.split(\":\");\n\t\t\t\t\tif (!id || !secret) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tclient_id = id;\n\t\t\t\t\tclient_secret = secret;\n\t\t\t\t} catch {\n\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst { grant_type, code, redirect_uri, refresh_token, code_verifier } = body;\n\t\t\t\tif (grant_type === \"refresh_token\") {\n\t\t\t\t\tif (!refresh_token) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror_description: \"refresh_token is required\",\n\t\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t\t});\n\t\t\t\t\tconst token = await ctx.context.adapter.findOne({\n\t\t\t\t\t\tmodel: \"oauthAccessToken\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"refreshToken\",\n\t\t\t\t\t\t\tvalue: refresh_token.toString()\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tif (!token) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid refresh token\",\n\t\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t\t});\n\t\t\t\t\tif (token.clientId !== client_id?.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tif (token.refreshTokenExpiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"refresh token expired\",\n\t\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t\t});\n\t\t\t\t\tconst accessToken$1 = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\t\tconst newRefreshToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\t\tconst accessTokenExpiresAt$1 = new Date(Date.now() + opts.accessTokenExpiresIn * 1e3);\n\t\t\t\t\tconst refreshTokenExpiresAt$1 = new Date(Date.now() + opts.refreshTokenExpiresIn * 1e3);\n\t\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taccessToken: accessToken$1,\n\t\t\t\t\t\t\trefreshToken: newRefreshToken,\n\t\t\t\t\t\t\taccessTokenExpiresAt: accessTokenExpiresAt$1,\n\t\t\t\t\t\t\trefreshTokenExpiresAt: refreshTokenExpiresAt$1,\n\t\t\t\t\t\t\tclientId: client_id.toString(),\n\t\t\t\t\t\t\tuserId: token.userId,\n\t\t\t\t\t\t\tscopes: token.scopes,\n\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\taccess_token: accessToken$1,\n\t\t\t\t\t\ttoken_type: \"bearer\",\n\t\t\t\t\t\texpires_in: opts.accessTokenExpiresIn,\n\t\t\t\t\t\trefresh_token: newRefreshToken,\n\t\t\t\t\t\tscope: token.scopes\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!code) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (opts.requirePKCE && !code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code verifier is missing\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\t/**\n\t\t\t\t* We need to check if the code is valid before we can proceed\n\t\t\t\t* with the rest of the request.\n\t\t\t\t*/\n\t\t\t\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(code.toString());\n\t\t\t\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid code\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"code expired\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\t\t\tif (!client_id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"client_id is required\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (!grant_type) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"grant_type is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (grant_type !== \"authorization_code\") throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"grant_type must be 'authorization_code'\",\n\t\t\t\t\terror: \"unsupported_grant_type\"\n\t\t\t\t});\n\t\t\t\tif (!redirect_uri) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"redirect_uri is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst client = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: modelName.oauthClient,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"clientId\",\n\t\t\t\t\t\tvalue: client_id.toString()\n\t\t\t\t\t}]\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif (!res) return null;\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...res,\n\t\t\t\t\t\tredirectUrls: res.redirectUrls.split(\",\"),\n\t\t\t\t\t\tmetadata: res.metadata ? JSON.parse(res.metadata) : {}\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tif (!client) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (client.disabled) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"client is disabled\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (client.type === \"public\") {\n\t\t\t\t\tif (!code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror_description: \"code verifier is required for public clients\",\n\t\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (!client_secret) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"client_secret is required for confidential clients\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tif (!(client.clientSecret === client_secret.toString())) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid client_secret\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst value = JSON.parse(verificationValue.value);\n\t\t\t\tif (value.clientId !== client_id.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (value.redirectURI !== redirect_uri.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid redirect_uri\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (value.codeChallenge && !code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code verifier is missing\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif ((value.codeChallengeMethod === \"plain\" ? code_verifier : await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_17__.createHash)(\"SHA-256\", \"base64urlnopad\").digest(code_verifier)) !== value.codeChallenge) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"code verification failed\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst requestedScopes = value.scope;\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\t\t\tconst accessToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst refreshToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"A-Z\", \"a-z\");\n\t\t\t\tconst accessTokenExpiresAt = new Date(Date.now() + opts.accessTokenExpiresIn * 1e3);\n\t\t\t\tconst refreshTokenExpiresAt = new Date(Date.now() + opts.refreshTokenExpiresIn * 1e3);\n\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taccessToken,\n\t\t\t\t\t\trefreshToken,\n\t\t\t\t\t\taccessTokenExpiresAt,\n\t\t\t\t\t\trefreshTokenExpiresAt,\n\t\t\t\t\t\tclientId: client_id.toString(),\n\t\t\t\t\t\tuserId: value.userId,\n\t\t\t\t\t\tscopes: requestedScopes.join(\" \"),\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst user = await ctx.context.internalAdapter.findUserById(value.userId);\n\t\t\t\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"user not found\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tconst secretKey = {\n\t\t\t\t\talg: \"HS256\",\n\t\t\t\t\tkey: await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_16__.getWebcryptoSubtle)().generateKey({\n\t\t\t\t\t\tname: \"HMAC\",\n\t\t\t\t\t\thash: \"SHA-256\"\n\t\t\t\t\t}, true, [\"sign\", \"verify\"])\n\t\t\t\t};\n\t\t\t\tconst profile = {\n\t\t\t\t\tgiven_name: user.name.split(\" \")[0],\n\t\t\t\t\tfamily_name: user.name.split(\" \")[1],\n\t\t\t\t\tname: user.name,\n\t\t\t\t\tprofile: user.image,\n\t\t\t\t\tupdated_at: Math.floor(new Date(user.updatedAt).getTime() / 1e3)\n\t\t\t\t};\n\t\t\t\tconst email = {\n\t\t\t\t\temail: user.email,\n\t\t\t\t\temail_verified: user.emailVerified\n\t\t\t\t};\n\t\t\t\tconst userClaims = {\n\t\t\t\t\t...requestedScopes.includes(\"profile\") ? profile : {},\n\t\t\t\t\t...requestedScopes.includes(\"email\") ? email : {}\n\t\t\t\t};\n\t\t\t\tconst additionalUserClaims = opts.getAdditionalUserInfoClaim ? await opts.getAdditionalUserInfoClaim(user, requestedScopes, client) : {};\n\t\t\t\tconst idToken = await new jose__WEBPACK_IMPORTED_MODULE_20__.SignJWT({\n\t\t\t\t\tsub: user.id,\n\t\t\t\t\taud: client_id.toString(),\n\t\t\t\t\tiat: Date.now(),\n\t\t\t\t\tauth_time: ctx.context.session ? new Date(ctx.context.session.session.createdAt).getTime() : void 0,\n\t\t\t\t\tnonce: value.nonce,\n\t\t\t\t\tacr: \"urn:mace:incommon:iap:silver\",\n\t\t\t\t\t...userClaims,\n\t\t\t\t\t...additionalUserClaims\n\t\t\t\t}).setProtectedHeader({ alg: secretKey.alg }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + opts.accessTokenExpiresIn).sign(secretKey.key);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\taccess_token: accessToken,\n\t\t\t\t\ttoken_type: \"Bearer\",\n\t\t\t\t\texpires_in: opts.accessTokenExpiresIn,\n\t\t\t\t\trefresh_token: requestedScopes.includes(\"offline_access\") ? refreshToken : void 0,\n\t\t\t\t\tscope: requestedScopes.join(\" \"),\n\t\t\t\t\tid_token: requestedScopes.includes(\"openid\") ? idToken : void 0\n\t\t\t\t}, { headers: {\n\t\t\t\t\t\"Cache-Control\": \"no-store\",\n\t\t\t\t\tPragma: \"no-cache\"\n\t\t\t\t} });\n\t\t\t}),\n\t\t\tregisterMcpClient: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/mcp/register\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: registerMcpClientBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Register an OAuth2 application\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"OAuth2 application registered successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Name of the OAuth2 application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Icon URL for the application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Additional metadata for the application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclientId: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier for the client\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclientSecret: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Secret key for the client. Not included for public clients.\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tredirectUrls: {\n\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdescription: \"List of allowed redirect URLs\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Type of the client\",\n\t\t\t\t\t\t\t\t\tenum: [\"web\", \"public\"]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tauthenticationScheme: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Authentication scheme used by the client\",\n\t\t\t\t\t\t\t\t\tenum: [\"client_secret\", \"none\"]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdisabled: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tdescription: \"Whether the client is disabled\",\n\t\t\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"ID of the user who registered the client, null if registered anonymously\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Creation timestamp\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Last update timestamp\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\"clientId\",\n\t\t\t\t\t\t\t\t\"redirectUrls\",\n\t\t\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\t\t\"authenticationScheme\",\n\t\t\t\t\t\t\t\t\"disabled\",\n\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst body = ctx.body;\n\t\t\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Methods\", \"POST, OPTIONS\");\n\t\t\t\tctx.setHeader(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n\t\t\t\tctx.setHeader(\"Access-Control-Max-Age\", \"86400\");\n\t\t\t\tctx.headers?.set(\"Access-Control-Max-Age\", \"86400\");\n\t\t\t\tif ((!body.grant_types || body.grant_types.includes(\"authorization_code\") || body.grant_types.includes(\"implicit\")) && (!body.redirect_uris || body.redirect_uris.length === 0)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror: \"invalid_redirect_uri\",\n\t\t\t\t\terror_description: \"Redirect URIs are required for authorization_code and implicit grant types\"\n\t\t\t\t});\n\t\t\t\tif (body.grant_types && body.response_types) {\n\t\t\t\t\tif (body.grant_types.includes(\"authorization_code\") && !body.response_types.includes(\"code\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client_metadata\",\n\t\t\t\t\t\terror_description: \"When 'authorization_code' grant type is used, 'code' response type must be included\"\n\t\t\t\t\t});\n\t\t\t\t\tif (body.grant_types.includes(\"implicit\") && !body.response_types.includes(\"token\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client_metadata\",\n\t\t\t\t\t\terror_description: \"When 'implicit' grant type is used, 'token' response type must be included\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst clientId = opts.generateClientId?.() || (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst clientSecret = opts.generateClientSecret?.() || (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst clientType = body.token_endpoint_auth_method === \"none\" ? \"public\" : \"web\";\n\t\t\t\tconst finalClientSecret = clientType === \"public\" ? \"\" : clientSecret;\n\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\tmodel: modelName.oauthClient,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: body.client_name,\n\t\t\t\t\t\ticon: body.logo_uri,\n\t\t\t\t\t\tmetadata: body.metadata ? JSON.stringify(body.metadata) : null,\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tclientSecret: finalClientSecret,\n\t\t\t\t\t\tredirectUrls: body.redirect_uris.join(\",\"),\n\t\t\t\t\t\ttype: clientType,\n\t\t\t\t\t\tauthenticationScheme: body.token_endpoint_auth_method || \"client_secret_basic\",\n\t\t\t\t\t\tdisabled: false,\n\t\t\t\t\t\tuserId: session?.session.userId,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst responseData = {\n\t\t\t\t\tclient_id: clientId,\n\t\t\t\t\tclient_id_issued_at: Math.floor(Date.now() / 1e3),\n\t\t\t\t\tredirect_uris: body.redirect_uris,\n\t\t\t\t\ttoken_endpoint_auth_method: body.token_endpoint_auth_method || \"client_secret_basic\",\n\t\t\t\t\tgrant_types: body.grant_types || [\"authorization_code\"],\n\t\t\t\t\tresponse_types: body.response_types || [\"code\"],\n\t\t\t\t\tclient_name: body.client_name,\n\t\t\t\t\tclient_uri: body.client_uri,\n\t\t\t\t\tlogo_uri: body.logo_uri,\n\t\t\t\t\tscope: body.scope,\n\t\t\t\t\tcontacts: body.contacts,\n\t\t\t\t\ttos_uri: body.tos_uri,\n\t\t\t\t\tpolicy_uri: body.policy_uri,\n\t\t\t\t\tjwks_uri: body.jwks_uri,\n\t\t\t\t\tjwks: body.jwks,\n\t\t\t\t\tsoftware_id: body.software_id,\n\t\t\t\t\tsoftware_version: body.software_version,\n\t\t\t\t\tsoftware_statement: body.software_statement,\n\t\t\t\t\tmetadata: body.metadata,\n\t\t\t\t\t...clientType !== \"public\" ? {\n\t\t\t\t\t\tclient_secret: finalClientSecret,\n\t\t\t\t\t\tclient_secret_expires_at: 0\n\t\t\t\t\t} : {}\n\t\t\t\t};\n\t\t\t\treturn new Response(JSON.stringify(responseData), {\n\t\t\t\t\tstatus: 201,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\t\t\"Cache-Control\": \"no-store\",\n\t\t\t\t\t\tPragma: \"no-cache\"\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t\tgetMcpSession: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/mcp/get-session\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\trequireHeaders: true\n\t\t\t}, async (c) => {\n\t\t\t\tconst accessToken = c.headers?.get(\"Authorization\")?.replace(\"Bearer \", \"\");\n\t\t\t\tif (!accessToken) {\n\t\t\t\t\tc.headers?.set(\"WWW-Authenticate\", \"Bearer\");\n\t\t\t\t\treturn c.json(null);\n\t\t\t\t}\n\t\t\t\tconst accessTokenData = await c.context.adapter.findOne({\n\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"accessToken\",\n\t\t\t\t\t\tvalue: accessToken\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!accessTokenData) return c.json(null);\n\t\t\t\treturn c.json(accessTokenData);\n\t\t\t})\n\t\t},\n\t\tschema: _oidc_provider_schema_mjs__WEBPACK_IMPORTED_MODULE_10__.schema,\n\t\toptions\n\t};\n};\nconst withMcpAuth = (auth, handler) => {\n\treturn async (req) => {\n\t\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(auth.options.baseURL, auth.options.basePath);\n\t\tif (!baseURL && !_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction) _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.logger.warn(\"Unable to get the baseURL, please check your config!\");\n\t\tconst session = await auth.api.getMcpSession({ headers: req.headers });\n\t\tconst wwwAuthenticateValue = `Bearer resource_metadata=\"${baseURL}/.well-known/oauth-protected-resource\"`;\n\t\tif (!session) return Response.json({\n\t\t\tjsonrpc: \"2.0\",\n\t\t\terror: {\n\t\t\t\tcode: -32e3,\n\t\t\t\tmessage: \"Unauthorized: Authentication required\",\n\t\t\t\t\"www-authenticate\": wwwAuthenticateValue\n\t\t\t},\n\t\t\tid: null\n\t\t}, {\n\t\t\tstatus: 401,\n\t\t\theaders: {\n\t\t\t\t\"WWW-Authenticate\": wwwAuthenticateValue,\n\t\t\t\t\"Access-Control-Expose-Headers\": \"WWW-Authenticate\"\n\t\t\t}\n\t\t});\n\t\treturn handler(req, session);\n\t};\n};\nconst oAuthDiscoveryMetadata = (auth) => {\n\treturn async (request) => {\n\t\tconst res = await auth.api.getMcpOAuthConfig();\n\t\treturn new Response(JSON.stringify(res), {\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n\t\t\t\t\"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n\t\t\t\t\"Access-Control-Max-Age\": \"86400\"\n\t\t\t}\n\t\t});\n\t};\n};\nconst oAuthProtectedResourceMetadata = (auth) => {\n\treturn async (request) => {\n\t\tconst res = await auth.api.getMCPProtectedResource();\n\t\treturn new Response(JSON.stringify(res), {\n\t\t\tstatus: 200,\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\n\t\t\t\t\"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n\t\t\t\t\"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n\t\t\t\t\"Access-Control-Max-Age\": \"86400\"\n\t\t\t}\n\t\t});\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21jcC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ2M7QUFDL0I7QUFDc0M7QUFDZjtBQUNVO0FBQ0g7QUFDL0I7QUFDZ0I7QUFDaUI7QUFDWDtBQUNLO0FBQ047QUFDUztBQUNMO0FBQy9CO0FBQ3dEO0FBQ3pCO0FBQ0g7QUFDdEI7QUFDb0I7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG9EQUFRO0FBQzVDO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLDZCQUE2QixRQUFRO0FBQ3JDLHFCQUFxQixRQUFRO0FBQzdCLHdCQUF3QixRQUFRO0FBQ2hDLGVBQWUsUUFBUTtBQUN2Qiw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsUUFBUTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyx3Q0FBUTtBQUM1QyxnQkFBZ0IsdUNBQU8sQ0FBQyx3Q0FBUTtBQUNoQyw2QkFBNkIseUNBQU07QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHVDQUFPLENBQUMseUNBQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix1Q0FBTyxDQUFDLHlDQUFNO0FBQy9CLGNBQWMsd0NBQVE7QUFDdEIsYUFBYSx3Q0FBUTtBQUNyQixXQUFXLHdDQUFRO0FBQ25CLFFBQVEsd0NBQVE7QUFDaEIsV0FBVyx1Q0FBTyxDQUFDLHdDQUFRO0FBQzNCLFVBQVUsd0NBQVE7QUFDbEIsYUFBYSx3Q0FBUTtBQUNyQixXQUFXLHdDQUFRO0FBQ25CLE9BQU8sd0NBQVEsQ0FBQyx3Q0FBUSxJQUFJLHFDQUFLO0FBQ2pDLFdBQVcsd0NBQVEsQ0FBQyxxQ0FBSyxJQUFJLHFDQUFLO0FBQ2xDLGNBQWMsd0NBQVE7QUFDdEIsbUJBQW1CLHdDQUFRO0FBQzNCLHFCQUFxQix3Q0FBUTtBQUM3QixDQUFDO0FBQ0QsZ0NBQWdDLHdDQUFRLENBQUMscUNBQUssSUFBSSxxQ0FBSztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1RUFBWTtBQUM5QjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSw0RUFBb0I7QUFDaEM7QUFDQTtBQUNBLGtDQUFrQywrRUFBb0I7QUFDdEQ7QUFDQTtBQUNBLElBQUksZ0VBQVk7QUFDaEI7QUFDQSxtQkFBbUI7QUFDbkIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVFQUFhO0FBQ3RDO0FBQ0E7QUFDQSxzQkFBc0IsNEVBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtFQUFpQjtBQUNsQyxJQUFJO0FBQ0osR0FBRyxHQUFHO0FBQ047QUFDQTtBQUNBLHNCQUFzQiwwRUFBa0I7QUFDeEM7QUFDQSxjQUFjLG1FQUFhO0FBQzNCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDRCQUE0QiwwRUFBa0I7QUFDOUM7QUFDQSxjQUFjLG1FQUFhO0FBQzNCLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLHNCQUFzQiwwRUFBa0I7QUFDeEM7QUFDQSxXQUFXLHdDQUFRLENBQUMsd0NBQVEsSUFBSSxxQ0FBSztBQUNyQyxnQkFBZ0I7QUFDaEI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixXQUFXLGtFQUFpQjtBQUM1QixJQUFJO0FBQ0osa0JBQWtCLDBFQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQSxRQUFRLG1FQUFhO0FBQ3JCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkNBQTZDLG9EQUFRO0FBQ3JEO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsVUFBVSwyQkFBMkI7QUFDckM7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDhEQUFNO0FBQ3BELDJDQUEyQyxvREFBUTtBQUNuRDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsbUNBQW1DLG9EQUFRO0FBQzNDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixlQUFlLG9EQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxZQUFZLCtEQUErRDtBQUMzRTtBQUNBLG1DQUFtQyxvREFBUTtBQUMzQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOLDJCQUEyQixvREFBUTtBQUNuQztBQUNBO0FBQ0EsTUFBTTtBQUNOLDZEQUE2RCxvREFBUTtBQUNyRTtBQUNBO0FBQ0EsTUFBTTtBQUNOLDZFQUE2RSxvREFBUTtBQUNyRjtBQUNBO0FBQ0EsTUFBTTtBQUNOLDJCQUEyQix3RUFBb0I7QUFDL0MsNkJBQTZCLHdFQUFvQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EseUJBQXlCLG9EQUFRO0FBQ2pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsc0RBQXNELG9EQUFRO0FBQzlEO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxvREFBUTtBQUM5QztBQUNBO0FBQ0EsS0FBSztBQUNMLDRFQUE0RSxvREFBUTtBQUNwRjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOEJBQThCLG9EQUFRO0FBQ3RDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsK0JBQStCLG9EQUFRO0FBQ3ZDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdURBQXVELG9EQUFRO0FBQy9EO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaUNBQWlDLG9EQUFRO0FBQ3pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLDJCQUEyQixvREFBUTtBQUNuQztBQUNBO0FBQ0EsS0FBSztBQUNMLG1DQUFtQyxvREFBUTtBQUMzQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsbUNBQW1DLG9EQUFRO0FBQzNDO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTTtBQUNOLG1DQUFtQyxvREFBUTtBQUMzQztBQUNBO0FBQ0EsTUFBTTtBQUNOLHdFQUF3RSxvREFBUTtBQUNoRjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSwyREFBMkQsb0RBQVE7QUFDbkU7QUFDQTtBQUNBLEtBQUs7QUFDTCxpRUFBaUUsb0RBQVE7QUFDekU7QUFDQTtBQUNBLEtBQUs7QUFDTCx5REFBeUQsb0RBQVE7QUFDakU7QUFDQTtBQUNBLEtBQUs7QUFDTCx1RUFBdUUsb0VBQVUsd0ZBQXdGLG9EQUFRO0FBQ2pMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLHdCQUF3Qix3RUFBb0I7QUFDNUMseUJBQXlCLHdFQUFvQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5QkFBeUIsb0RBQVE7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsZ0JBQWdCLHVFQUFrQjtBQUNsQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwwQ0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyx1QkFBdUIsb0JBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUCxJQUFJO0FBQ0osc0JBQXNCLDBFQUFrQjtBQUN4QztBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwwQkFBMEIsMEVBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrTEFBK0wsb0RBQVE7QUFDdk07QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZHQUE2RyxvREFBUTtBQUNySDtBQUNBO0FBQ0EsTUFBTTtBQUNOLG9HQUFvRyxvREFBUTtBQUM1RztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0Esa0RBQWtELHdFQUFvQjtBQUN0RSwwREFBMEQsd0VBQW9CO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLGtCQUFrQiwwRUFBa0I7QUFDcEM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMERBQVU7QUFDNUIsbUJBQW1CLGdFQUFZLEVBQUUsMERBQU07QUFDdkMsaURBQWlELHNCQUFzQjtBQUN2RSw0REFBNEQsUUFBUTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzZJO0FBQzdJIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcbWNwXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QmFzZVVSTCB9IGZyb20gXCIuLi8uLi91dGlscy91cmwubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTZXRDb29raWVIZWFkZXIgfSBmcm9tIFwiLi4vLi4vY29va2llcy9jb29raWUtdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBleHBpcmVDb29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9tcHQgfSBmcm9tIFwiLi4vb2lkYy1wcm92aWRlci91dGlscy9wcm9tcHQubWpzXCI7XG5pbXBvcnQgeyBzY2hlbWEgfSBmcm9tIFwiLi4vb2lkYy1wcm92aWRlci9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBvaWRjUHJvdmlkZXIgfSBmcm9tIFwiLi4vb2lkYy1wcm92aWRlci9pbmRleC5tanNcIjtcbmltcG9ydCB7IGF1dGhvcml6ZU1DUE9BdXRoIH0gZnJvbSBcIi4vYXV0aG9yaXplLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9kdWN0aW9uLCBsb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBnZXRXZWJjcnlwdG9TdWJ0bGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyBTaWduSldUIH0gZnJvbSBcImpvc2VcIjtcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tY3AvaW5kZXgudHNcbmNvbnN0IGdldE1DUFByb3ZpZGVyTWV0YWRhdGEgPSAoY3R4LCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGlzc3VlciA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuYmFzZVVSTDtcblx0Y29uc3QgYmFzZVVSTCA9IGN0eC5jb250ZXh0LmJhc2VVUkw7XG5cdGlmICghaXNzdWVyIHx8ICFiYXNlVVJMKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwge1xuXHRcdGVycm9yOiBcImludmFsaWRfaXNzdWVyXCIsXG5cdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaXNzdWVyIG9yIGJhc2VVUkwgaXMgbm90IHNldC4gSWYgeW91J3JlIHRoZSBhcHAgZGV2ZWxvcGVyLCBwbGVhc2UgbWFrZSBzdXJlIHRvIHNldCB0aGUgYGJhc2VVUkxgIGluIHlvdXIgYXV0aCBjb25maWcuXCJcblx0fSk7XG5cdHJldHVybiB7XG5cdFx0aXNzdWVyLFxuXHRcdGF1dGhvcml6YXRpb25fZW5kcG9pbnQ6IGAke2Jhc2VVUkx9L21jcC9hdXRob3JpemVgLFxuXHRcdHRva2VuX2VuZHBvaW50OiBgJHtiYXNlVVJMfS9tY3AvdG9rZW5gLFxuXHRcdHVzZXJpbmZvX2VuZHBvaW50OiBgJHtiYXNlVVJMfS9tY3AvdXNlcmluZm9gLFxuXHRcdGp3a3NfdXJpOiBgJHtiYXNlVVJMfS9tY3Avandrc2AsXG5cdFx0cmVnaXN0cmF0aW9uX2VuZHBvaW50OiBgJHtiYXNlVVJMfS9tY3AvcmVnaXN0ZXJgLFxuXHRcdHNjb3Blc19zdXBwb3J0ZWQ6IFtcblx0XHRcdFwib3BlbmlkXCIsXG5cdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFwiZW1haWxcIixcblx0XHRcdFwib2ZmbGluZV9hY2Nlc3NcIlxuXHRcdF0sXG5cdFx0cmVzcG9uc2VfdHlwZXNfc3VwcG9ydGVkOiBbXCJjb2RlXCJdLFxuXHRcdHJlc3BvbnNlX21vZGVzX3N1cHBvcnRlZDogW1wicXVlcnlcIl0sXG5cdFx0Z3JhbnRfdHlwZXNfc3VwcG9ydGVkOiBbXCJhdXRob3JpemF0aW9uX2NvZGVcIiwgXCJyZWZyZXNoX3Rva2VuXCJdLFxuXHRcdGFjcl92YWx1ZXNfc3VwcG9ydGVkOiBbXCJ1cm46bWFjZTppbmNvbW1vbjppYXA6c2lsdmVyXCIsIFwidXJuOm1hY2U6aW5jb21tb246aWFwOmJyb256ZVwiXSxcblx0XHRzdWJqZWN0X3R5cGVzX3N1cHBvcnRlZDogW1wicHVibGljXCJdLFxuXHRcdGlkX3Rva2VuX3NpZ25pbmdfYWxnX3ZhbHVlc19zdXBwb3J0ZWQ6IFtcIlJTMjU2XCIsIFwibm9uZVwiXSxcblx0XHR0b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZHNfc3VwcG9ydGVkOiBbXG5cdFx0XHRcImNsaWVudF9zZWNyZXRfYmFzaWNcIixcblx0XHRcdFwiY2xpZW50X3NlY3JldF9wb3N0XCIsXG5cdFx0XHRcIm5vbmVcIlxuXHRcdF0sXG5cdFx0Y29kZV9jaGFsbGVuZ2VfbWV0aG9kc19zdXBwb3J0ZWQ6IFtcIlMyNTZcIl0sXG5cdFx0Y2xhaW1zX3N1cHBvcnRlZDogW1xuXHRcdFx0XCJzdWJcIixcblx0XHRcdFwiaXNzXCIsXG5cdFx0XHRcImF1ZFwiLFxuXHRcdFx0XCJleHBcIixcblx0XHRcdFwibmJmXCIsXG5cdFx0XHRcImlhdFwiLFxuXHRcdFx0XCJqdGlcIixcblx0XHRcdFwiZW1haWxcIixcblx0XHRcdFwiZW1haWxfdmVyaWZpZWRcIixcblx0XHRcdFwibmFtZVwiXG5cdFx0XSxcblx0XHQuLi5vcHRpb25zPy5tZXRhZGF0YVxuXHR9O1xufTtcbmNvbnN0IGdldE1DUFByb3RlY3RlZFJlc291cmNlTWV0YWRhdGEgPSAoY3R4LCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGJhc2VVUkwgPSBjdHguY29udGV4dC5iYXNlVVJMO1xuXHRjb25zdCBvcmlnaW4gPSBuZXcgVVJMKGJhc2VVUkwpLm9yaWdpbjtcblx0cmV0dXJuIHtcblx0XHRyZXNvdXJjZTogb3B0aW9ucz8ucmVzb3VyY2UgPz8gb3JpZ2luLFxuXHRcdGF1dGhvcml6YXRpb25fc2VydmVyczogW29yaWdpbl0sXG5cdFx0andrc191cmk6IG9wdGlvbnM/Lm9pZGNDb25maWc/Lm1ldGFkYXRhPy5qd2tzX3VyaSA/PyBgJHtiYXNlVVJMfS9tY3Avandrc2AsXG5cdFx0c2NvcGVzX3N1cHBvcnRlZDogb3B0aW9ucz8ub2lkY0NvbmZpZz8ubWV0YWRhdGE/LnNjb3Blc19zdXBwb3J0ZWQgPz8gW1xuXHRcdFx0XCJvcGVuaWRcIixcblx0XHRcdFwicHJvZmlsZVwiLFxuXHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XCJvZmZsaW5lX2FjY2Vzc1wiXG5cdFx0XSxcblx0XHRiZWFyZXJfbWV0aG9kc19zdXBwb3J0ZWQ6IFtcImhlYWRlclwiXSxcblx0XHRyZXNvdXJjZV9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkOiBbXCJSUzI1NlwiLCBcIm5vbmVcIl1cblx0fTtcbn07XG5jb25zdCByZWdpc3Rlck1jcENsaWVudEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHJlZGlyZWN0X3VyaXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG5cdHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiB6LmVudW0oW1xuXHRcdFwibm9uZVwiLFxuXHRcdFwiY2xpZW50X3NlY3JldF9iYXNpY1wiLFxuXHRcdFwiY2xpZW50X3NlY3JldF9wb3N0XCJcblx0XSkuZGVmYXVsdChcImNsaWVudF9zZWNyZXRfYmFzaWNcIikub3B0aW9uYWwoKSxcblx0Z3JhbnRfdHlwZXM6IHouYXJyYXkoei5lbnVtKFtcblx0XHRcImF1dGhvcml6YXRpb25fY29kZVwiLFxuXHRcdFwiaW1wbGljaXRcIixcblx0XHRcInBhc3N3b3JkXCIsXG5cdFx0XCJjbGllbnRfY3JlZGVudGlhbHNcIixcblx0XHRcInJlZnJlc2hfdG9rZW5cIixcblx0XHRcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOmp3dC1iZWFyZXJcIixcblx0XHRcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOnNhbWwyLWJlYXJlclwiXG5cdF0pKS5kZWZhdWx0KFtcImF1dGhvcml6YXRpb25fY29kZVwiXSkub3B0aW9uYWwoKSxcblx0cmVzcG9uc2VfdHlwZXM6IHouYXJyYXkoei5lbnVtKFtcImNvZGVcIiwgXCJ0b2tlblwiXSkpLmRlZmF1bHQoW1wiY29kZVwiXSkub3B0aW9uYWwoKSxcblx0Y2xpZW50X25hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0Y2xpZW50X3VyaTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRsb2dvX3VyaTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRzY29wZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRjb250YWN0czogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuXHR0b3NfdXJpOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHBvbGljeV91cmk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0andrc191cmk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0andrczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHoucmVjb3JkKHouYW55KCksIHouYW55KCkpLm9wdGlvbmFsKCksXG5cdHNvZnR3YXJlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHNvZnR3YXJlX3ZlcnNpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0c29mdHdhcmVfc3RhdGVtZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgbWNwT0F1dGhUb2tlbkJvZHlTY2hlbWEgPSB6LnJlY29yZCh6LmFueSgpLCB6LmFueSgpKTtcbmNvbnN0IG1jcCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0Y29kZUV4cGlyZXNJbjogNjAwLFxuXHRcdGRlZmF1bHRTY29wZTogXCJvcGVuaWRcIixcblx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNJbjogMzYwMCxcblx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzSW46IDYwNDgwMCxcblx0XHRhbGxvd1BsYWluQ29kZUNoYWxsZW5nZU1ldGhvZDogdHJ1ZSxcblx0XHQuLi5vcHRpb25zLm9pZGNDb25maWcsXG5cdFx0bG9naW5QYWdlOiBvcHRpb25zLmxvZ2luUGFnZSxcblx0XHRzY29wZXM6IFtcblx0XHRcdFwib3BlbmlkXCIsXG5cdFx0XHRcInByb2ZpbGVcIixcblx0XHRcdFwiZW1haWxcIixcblx0XHRcdFwib2ZmbGluZV9hY2Nlc3NcIixcblx0XHRcdC4uLm9wdGlvbnMub2lkY0NvbmZpZz8uc2NvcGVzIHx8IFtdXG5cdFx0XVxuXHR9O1xuXHRjb25zdCBtb2RlbE5hbWUgPSB7XG5cdFx0b2F1dGhDbGllbnQ6IFwib2F1dGhBcHBsaWNhdGlvblwiLFxuXHRcdG9hdXRoQWNjZXNzVG9rZW46IFwib2F1dGhBY2Nlc3NUb2tlblwiLFxuXHRcdG9hdXRoQ29uc2VudDogXCJvYXV0aENvbnNlbnRcIlxuXHR9O1xuXHRjb25zdCBwcm92aWRlciA9IG9pZGNQcm92aWRlcihvcHRzKTtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJtY3BcIixcblx0XHRob29rczogeyBhZnRlcjogW3tcblx0XHRcdG1hdGNoZXIoKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgY29va2llID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShcIm9pZGNfbG9naW5fcHJvbXB0XCIsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZU5hbWUgPSBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZTtcblx0XHRcdFx0Y29uc3QgcGFyc2VkU2V0Q29va2llSGVhZGVyID0gcGFyc2VTZXRDb29raWVIZWFkZXIoY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzPy5nZXQoXCJzZXQtY29va2llXCIpIHx8IFwiXCIpO1xuXHRcdFx0XHRjb25zdCBoYXNTZXNzaW9uVG9rZW4gPSBwYXJzZWRTZXRDb29raWVIZWFkZXIuaGFzKGNvb2tpZU5hbWUpO1xuXHRcdFx0XHRpZiAoIWNvb2tpZSB8fCAhaGFzU2Vzc2lvblRva2VuKSByZXR1cm47XG5cdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRuYW1lOiBcIm9pZGNfbG9naW5fcHJvbXB0XCIsXG5cdFx0XHRcdFx0YXR0cmlidXRlczogeyBwYXRoOiBcIi9cIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uVG9rZW4gPSAocGFyc2VkU2V0Q29va2llSGVhZGVyLmdldChjb29raWVOYW1lKT8udmFsdWUpPy5zcGxpdChcIi5cIilbMF07XG5cdFx0XHRcdGlmICghc2Vzc2lvblRva2VuKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24oc2Vzc2lvblRva2VuKSB8fCBjdHguY29udGV4dC5uZXdTZXNzaW9uO1xuXHRcdFx0XHRpZiAoIXNlc3Npb24pIHJldHVybjtcblx0XHRcdFx0Y29uc3QgcGFyc2VkQ29va2llID0gc2FmZUpTT05QYXJzZShjb29raWUpO1xuXHRcdFx0XHRpZiAoIXBhcnNlZENvb2tpZSkgcmV0dXJuO1xuXHRcdFx0XHRjdHgucXVlcnkgPSBwYXJzZWRDb29raWU7XG5cdFx0XHRcdGNvbnN0IHByb21wdFNldCA9IHBhcnNlUHJvbXB0KFN0cmluZyhjdHgucXVlcnk/LnByb21wdCkpO1xuXHRcdFx0XHRpZiAocHJvbXB0U2V0LmhhcyhcImxvZ2luXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3UHJvbXB0U2V0ID0gbmV3IFNldChwcm9tcHRTZXQpO1xuXHRcdFx0XHRcdG5ld1Byb21wdFNldC5kZWxldGUoXCJsb2dpblwiKTtcblx0XHRcdFx0XHRjdHgucXVlcnkgPSB7XG5cdFx0XHRcdFx0XHQuLi5jdHgucXVlcnksXG5cdFx0XHRcdFx0XHRwcm9tcHQ6IEFycmF5LmZyb20obmV3UHJvbXB0U2V0KS5qb2luKFwiIFwiKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdHJldHVybiBhd2FpdCBhdXRob3JpemVNQ1BPQXV0aChjdHgsIG9wdHMpO1xuXHRcdFx0fSlcblx0XHR9XSB9LFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0b0F1dGhDb25zZW50OiBwcm92aWRlci5lbmRwb2ludHMub0F1dGhDb25zZW50LFxuXHRcdFx0Z2V0TWNwT0F1dGhDb25maWc6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi8ud2VsbC1rbm93bi9vYXV0aC1hdXRob3JpemF0aW9uLXNlcnZlclwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0bWV0YWRhdGE6IEhJREVfTUVUQURBVEFcblx0XHRcdH0sIGFzeW5jIChjKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgbWV0YWRhdGEgPSBnZXRNQ1BQcm92aWRlck1ldGFkYXRhKGMsIG9wdGlvbnMpO1xuXHRcdFx0XHRcdHJldHVybiBjLmpzb24obWV0YWRhdGEpO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0XHRcdFx0cmV0dXJuIGMuanNvbihudWxsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSksXG5cdFx0XHRnZXRNQ1BQcm90ZWN0ZWRSZXNvdXJjZTogY3JlYXRlQXV0aEVuZHBvaW50KFwiLy53ZWxsLWtub3duL29hdXRoLXByb3RlY3RlZC1yZXNvdXJjZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0bWV0YWRhdGE6IEhJREVfTUVUQURBVEFcblx0XHRcdH0sIGFzeW5jIChjKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gZ2V0TUNQUHJvdGVjdGVkUmVzb3VyY2VNZXRhZGF0YShjLCBvcHRpb25zKTtcblx0XHRcdFx0cmV0dXJuIGMuanNvbihtZXRhZGF0YSk7XG5cdFx0XHR9KSxcblx0XHRcdG1jcE9BdXRoQXV0aG9yaXplOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbWNwL2F1dGhvcml6ZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0cXVlcnk6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQXV0aG9yaXplIGFuIE9BdXRoMiByZXF1ZXN0IHVzaW5nIE1DUFwiLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRob3JpemF0aW9uIHJlc3BvbnNlIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRob3JpemF0aW9uIHJlc3BvbnNlLCBjb250ZW50cyBkZXBlbmQgb24gdGhlIGF1dGhvcml6ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvblwiXG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0cmV0dXJuIGF1dGhvcml6ZU1DUE9BdXRoKGN0eCwgb3B0cyk7XG5cdFx0XHR9KSxcblx0XHRcdG1jcE9BdXRoVG9rZW46IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9tY3AvdG9rZW5cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBtY3BPQXV0aFRva2VuQm9keVNjaGVtYSxcblx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdFx0XHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdXG5cdFx0XHRcdH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y3R4LnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7XG5cdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzXCIsIFwiUE9TVCwgT1BUSU9OU1wiKTtcblx0XHRcdFx0Y3R4LnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIiwgXCJDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb25cIik7XG5cdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1NYXgtQWdlXCIsIFwiODY0MDBcIik7XG5cdFx0XHRcdGxldCB7IGJvZHkgfSA9IGN0eDtcblx0XHRcdFx0aWYgKCFib2R5KSB0aHJvdyBjdHguZXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwicmVxdWVzdCBib2R5IG5vdCBmb3VuZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSBib2R5ID0gT2JqZWN0LmZyb21FbnRyaWVzKGJvZHkuZW50cmllcygpKTtcblx0XHRcdFx0aWYgKCEoYm9keSBpbnN0YW5jZW9mIE9iamVjdCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJyZXF1ZXN0IGJvZHkgaXMgbm90IGFuIG9iamVjdFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsZXQgeyBjbGllbnRfaWQsIGNsaWVudF9zZWNyZXQgfSA9IGJvZHk7XG5cdFx0XHRcdGNvbnN0IGF1dGhvcml6YXRpb24gPSBjdHgucmVxdWVzdD8uaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpIHx8IG51bGw7XG5cdFx0XHRcdGlmIChhdXRob3JpemF0aW9uICYmICFjbGllbnRfaWQgJiYgIWNsaWVudF9zZWNyZXQgJiYgYXV0aG9yaXphdGlvbi5zdGFydHNXaXRoKFwiQmFzaWMgXCIpKSB0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGVuY29kZWQgPSBhdXRob3JpemF0aW9uLnJlcGxhY2UoXCJCYXNpYyBcIiwgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgZGVjb2RlZCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShiYXNlNjQuZGVjb2RlKGVuY29kZWQpKTtcblx0XHRcdFx0XHRpZiAoIWRlY29kZWQuaW5jbHVkZXMoXCI6XCIpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3JtYXRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCBbaWQsIHNlY3JldF0gPSBkZWNvZGVkLnNwbGl0KFwiOlwiKTtcblx0XHRcdFx0XHRpZiAoIWlkIHx8ICFzZWNyZXQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyIGZvcm1hdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNsaWVudF9pZCA9IGlkO1xuXHRcdFx0XHRcdGNsaWVudF9zZWNyZXQgPSBzZWNyZXQ7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyIGZvcm1hdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHsgZ3JhbnRfdHlwZSwgY29kZSwgcmVkaXJlY3RfdXJpLCByZWZyZXNoX3Rva2VuLCBjb2RlX3ZlcmlmaWVyIH0gPSBib2R5O1xuXHRcdFx0XHRpZiAoZ3JhbnRfdHlwZSA9PT0gXCJyZWZyZXNoX3Rva2VuXCIpIHtcblx0XHRcdFx0XHRpZiAoIXJlZnJlc2hfdG9rZW4pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcInJlZnJlc2hfdG9rZW4gaXMgcmVxdWlyZWRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IFwib2F1dGhBY2Nlc3NUb2tlblwiLFxuXHRcdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcInJlZnJlc2hUb2tlblwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogcmVmcmVzaF90b2tlbi50b1N0cmluZygpXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICghdG9rZW4pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIHJlZnJlc2ggdG9rZW5cIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfZ3JhbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICh0b2tlbi5jbGllbnRJZCAhPT0gY2xpZW50X2lkPy50b1N0cmluZygpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCBjbGllbnRfaWRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAodG9rZW4ucmVmcmVzaFRva2VuRXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJyZWZyZXNoIHRva2VuIGV4cGlyZWRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfZ3JhbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuJDEgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJhLXpcIiwgXCJBLVpcIik7XG5cdFx0XHRcdFx0Y29uc3QgbmV3UmVmcmVzaFRva2VuID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0JDEgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgb3B0cy5hY2Nlc3NUb2tlbkV4cGlyZXNJbiAqIDFlMyk7XG5cdFx0XHRcdFx0Y29uc3QgcmVmcmVzaFRva2VuRXhwaXJlc0F0JDEgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgb3B0cy5yZWZyZXNoVG9rZW5FeHBpcmVzSW4gKiAxZTMpO1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuY3JlYXRlKHtcblx0XHRcdFx0XHRcdG1vZGVsOiBtb2RlbE5hbWUub2F1dGhBY2Nlc3NUb2tlbixcblx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0YWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VuJDEsXG5cdFx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbjogbmV3UmVmcmVzaFRva2VuLFxuXHRcdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogYWNjZXNzVG9rZW5FeHBpcmVzQXQkMSxcblx0XHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiByZWZyZXNoVG9rZW5FeHBpcmVzQXQkMSxcblx0XHRcdFx0XHRcdFx0Y2xpZW50SWQ6IGNsaWVudF9pZC50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHR1c2VySWQ6IHRva2VuLnVzZXJJZCxcblx0XHRcdFx0XHRcdFx0c2NvcGVzOiB0b2tlbi5zY29wZXMsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0YWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlbiQxLFxuXHRcdFx0XHRcdFx0dG9rZW5fdHlwZTogXCJiZWFyZXJcIixcblx0XHRcdFx0XHRcdGV4cGlyZXNfaW46IG9wdHMuYWNjZXNzVG9rZW5FeHBpcmVzSW4sXG5cdFx0XHRcdFx0XHRyZWZyZXNoX3Rva2VuOiBuZXdSZWZyZXNoVG9rZW4sXG5cdFx0XHRcdFx0XHRzY29wZTogdG9rZW4uc2NvcGVzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFjb2RlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY29kZSBpcyByZXF1aXJlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAob3B0cy5yZXF1aXJlUEtDRSAmJiAhY29kZV92ZXJpZmllcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgdmVyaWZpZXIgaXMgbWlzc2luZ1wiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQvKipcblx0XHRcdFx0KiBXZSBuZWVkIHRvIGNoZWNrIGlmIHRoZSBjb2RlIGlzIHZhbGlkIGJlZm9yZSB3ZSBjYW4gcHJvY2VlZFxuXHRcdFx0XHQqIHdpdGggdGhlIHJlc3Qgb2YgdGhlIHJlcXVlc3QuXG5cdFx0XHRcdCovXG5cdFx0XHRcdGNvbnN0IHZlcmlmaWNhdGlvblZhbHVlID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRWZXJpZmljYXRpb25WYWx1ZShjb2RlLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRpZiAoIXZlcmlmaWNhdGlvblZhbHVlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImludmFsaWQgY29kZVwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfZ3JhbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHZlcmlmaWNhdGlvblZhbHVlLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgZXhwaXJlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfZ3JhbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0XHRcdFx0aWYgKCFjbGllbnRfaWQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY2xpZW50X2lkIGlzIHJlcXVpcmVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFncmFudF90eXBlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiZ3JhbnRfdHlwZSBpcyByZXF1aXJlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoZ3JhbnRfdHlwZSAhPT0gXCJhdXRob3JpemF0aW9uX2NvZGVcIikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImdyYW50X3R5cGUgbXVzdCBiZSAnYXV0aG9yaXphdGlvbl9jb2RlJ1wiLFxuXHRcdFx0XHRcdGVycm9yOiBcInVuc3VwcG9ydGVkX2dyYW50X3R5cGVcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFyZWRpcmVjdF91cmkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJyZWRpcmVjdF91cmkgaXMgcmVxdWlyZWRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgY2xpZW50ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogbW9kZWxOYW1lLm9hdXRoQ2xpZW50LFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiY2xpZW50SWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBjbGllbnRfaWQudG9TdHJpbmcoKVxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdGlmICghcmVzKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Li4ucmVzLFxuXHRcdFx0XHRcdFx0cmVkaXJlY3RVcmxzOiByZXMucmVkaXJlY3RVcmxzLnNwbGl0KFwiLFwiKSxcblx0XHRcdFx0XHRcdG1ldGFkYXRhOiByZXMubWV0YWRhdGEgPyBKU09OLnBhcnNlKHJlcy5tZXRhZGF0YSkgOiB7fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIWNsaWVudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNsaWVudF9pZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChjbGllbnQuZGlzYWJsZWQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY2xpZW50IGlzIGRpc2FibGVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGNsaWVudC50eXBlID09PSBcInB1YmxpY1wiKSB7XG5cdFx0XHRcdFx0aWYgKCFjb2RlX3ZlcmlmaWVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjb2RlIHZlcmlmaWVyIGlzIHJlcXVpcmVkIGZvciBwdWJsaWMgY2xpZW50c1wiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWNsaWVudF9zZWNyZXQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjbGllbnRfc2VjcmV0IGlzIHJlcXVpcmVkIGZvciBjb25maWRlbnRpYWwgY2xpZW50c1wiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICghKGNsaWVudC5jbGllbnRTZWNyZXQgPT09IGNsaWVudF9zZWNyZXQudG9TdHJpbmcoKSkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNsaWVudF9zZWNyZXRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB2YWx1ZSA9IEpTT04ucGFyc2UodmVyaWZpY2F0aW9uVmFsdWUudmFsdWUpO1xuXHRcdFx0XHRpZiAodmFsdWUuY2xpZW50SWQgIT09IGNsaWVudF9pZC50b1N0cmluZygpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImludmFsaWQgY2xpZW50X2lkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHZhbHVlLnJlZGlyZWN0VVJJICE9PSByZWRpcmVjdF91cmkudG9TdHJpbmcoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIHJlZGlyZWN0X3VyaVwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh2YWx1ZS5jb2RlQ2hhbGxlbmdlICYmICFjb2RlX3ZlcmlmaWVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY29kZSB2ZXJpZmllciBpcyBtaXNzaW5nXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICgodmFsdWUuY29kZUNoYWxsZW5nZU1ldGhvZCA9PT0gXCJwbGFpblwiID8gY29kZV92ZXJpZmllciA6IGF3YWl0IGNyZWF0ZUhhc2goXCJTSEEtMjU2XCIsIFwiYmFzZTY0dXJsbm9wYWRcIikuZGlnZXN0KGNvZGVfdmVyaWZpZXIpKSAhPT0gdmFsdWUuY29kZUNoYWxsZW5nZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjb2RlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgcmVxdWVzdGVkU2NvcGVzID0gdmFsdWUuc2NvcGU7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb25WYWx1ZS5pZCk7XG5cdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIpO1xuXHRcdFx0XHRjb25zdCByZWZyZXNoVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJBLVpcIiwgXCJhLXpcIik7XG5cdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIG9wdHMuYWNjZXNzVG9rZW5FeHBpcmVzSW4gKiAxZTMpO1xuXHRcdFx0XHRjb25zdCByZWZyZXNoVG9rZW5FeHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgb3B0cy5yZWZyZXNoVG9rZW5FeHBpcmVzSW4gKiAxZTMpO1xuXHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRcdFx0bW9kZWw6IG1vZGVsTmFtZS5vYXV0aEFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0XHRjbGllbnRJZDogY2xpZW50X2lkLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0XHR1c2VySWQ6IHZhbHVlLnVzZXJJZCxcblx0XHRcdFx0XHRcdHNjb3BlczogcmVxdWVzdGVkU2NvcGVzLmpvaW4oXCIgXCIpLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZCh2YWx1ZS51c2VySWQpO1xuXHRcdFx0XHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwidXNlciBub3QgZm91bmRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2dyYW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHNlY3JldEtleSA9IHtcblx0XHRcdFx0XHRhbGc6IFwiSFMyNTZcIixcblx0XHRcdFx0XHRrZXk6IGF3YWl0IGdldFdlYmNyeXB0b1N1YnRsZSgpLmdlbmVyYXRlS2V5KHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiSE1BQ1wiLFxuXHRcdFx0XHRcdFx0aGFzaDogXCJTSEEtMjU2XCJcblx0XHRcdFx0XHR9LCB0cnVlLCBbXCJzaWduXCIsIFwidmVyaWZ5XCJdKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBwcm9maWxlID0ge1xuXHRcdFx0XHRcdGdpdmVuX25hbWU6IHVzZXIubmFtZS5zcGxpdChcIiBcIilbMF0sXG5cdFx0XHRcdFx0ZmFtaWx5X25hbWU6IHVzZXIubmFtZS5zcGxpdChcIiBcIilbMV0sXG5cdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdHByb2ZpbGU6IHVzZXIuaW1hZ2UsXG5cdFx0XHRcdFx0dXBkYXRlZF9hdDogTWF0aC5mbG9vcihuZXcgRGF0ZSh1c2VyLnVwZGF0ZWRBdCkuZ2V0VGltZSgpIC8gMWUzKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBlbWFpbCA9IHtcblx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRlbWFpbF92ZXJpZmllZDogdXNlci5lbWFpbFZlcmlmaWVkXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHVzZXJDbGFpbXMgPSB7XG5cdFx0XHRcdFx0Li4ucmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwicHJvZmlsZVwiKSA/IHByb2ZpbGUgOiB7fSxcblx0XHRcdFx0XHQuLi5yZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJlbWFpbFwiKSA/IGVtYWlsIDoge31cblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgYWRkaXRpb25hbFVzZXJDbGFpbXMgPSBvcHRzLmdldEFkZGl0aW9uYWxVc2VySW5mb0NsYWltID8gYXdhaXQgb3B0cy5nZXRBZGRpdGlvbmFsVXNlckluZm9DbGFpbSh1c2VyLCByZXF1ZXN0ZWRTY29wZXMsIGNsaWVudCkgOiB7fTtcblx0XHRcdFx0Y29uc3QgaWRUb2tlbiA9IGF3YWl0IG5ldyBTaWduSldUKHtcblx0XHRcdFx0XHRzdWI6IHVzZXIuaWQsXG5cdFx0XHRcdFx0YXVkOiBjbGllbnRfaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRpYXQ6IERhdGUubm93KCksXG5cdFx0XHRcdFx0YXV0aF90aW1lOiBjdHguY29udGV4dC5zZXNzaW9uID8gbmV3IERhdGUoY3R4LmNvbnRleHQuc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpIDogdm9pZCAwLFxuXHRcdFx0XHRcdG5vbmNlOiB2YWx1ZS5ub25jZSxcblx0XHRcdFx0XHRhY3I6IFwidXJuOm1hY2U6aW5jb21tb246aWFwOnNpbHZlclwiLFxuXHRcdFx0XHRcdC4uLnVzZXJDbGFpbXMsXG5cdFx0XHRcdFx0Li4uYWRkaXRpb25hbFVzZXJDbGFpbXNcblx0XHRcdFx0fSkuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiBzZWNyZXRLZXkuYWxnIH0pLnNldElzc3VlZEF0KCkuc2V0RXhwaXJhdGlvblRpbWUoTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSArIG9wdHMuYWNjZXNzVG9rZW5FeHBpcmVzSW4pLnNpZ24oc2VjcmV0S2V5LmtleSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0YWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlbixcblx0XHRcdFx0XHR0b2tlbl90eXBlOiBcIkJlYXJlclwiLFxuXHRcdFx0XHRcdGV4cGlyZXNfaW46IG9wdHMuYWNjZXNzVG9rZW5FeHBpcmVzSW4sXG5cdFx0XHRcdFx0cmVmcmVzaF90b2tlbjogcmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwib2ZmbGluZV9hY2Nlc3NcIikgPyByZWZyZXNoVG9rZW4gOiB2b2lkIDAsXG5cdFx0XHRcdFx0c2NvcGU6IHJlcXVlc3RlZFNjb3Blcy5qb2luKFwiIFwiKSxcblx0XHRcdFx0XHRpZF90b2tlbjogcmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwib3BlbmlkXCIpID8gaWRUb2tlbiA6IHZvaWQgMFxuXHRcdFx0XHR9LCB7IGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiLFxuXHRcdFx0XHRcdFByYWdtYTogXCJuby1jYWNoZVwiXG5cdFx0XHRcdH0gfSk7XG5cdFx0XHR9KSxcblx0XHRcdHJlZ2lzdGVyTWNwQ2xpZW50OiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbWNwL3JlZ2lzdGVyXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogcmVnaXN0ZXJNY3BDbGllbnRCb2R5U2NoZW1hLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUmVnaXN0ZXIgYW4gT0F1dGgyIGFwcGxpY2F0aW9uXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk9BdXRoMiBhcHBsaWNhdGlvbiByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJOYW1lIG9mIHRoZSBPQXV0aDIgYXBwbGljYXRpb25cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSWNvbiBVUkwgZm9yIHRoZSBhcHBsaWNhdGlvblwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBZGRpdGlvbmFsIG1ldGFkYXRhIGZvciB0aGUgYXBwbGljYXRpb25cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50SWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNsaWVudFwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTZWNyZXQga2V5IGZvciB0aGUgY2xpZW50LiBOb3QgaW5jbHVkZWQgZm9yIHB1YmxpYyBjbGllbnRzLlwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRyZWRpcmVjdFVybHM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW1zOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJ1cmlcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkxpc3Qgb2YgYWxsb3dlZCByZWRpcmVjdCBVUkxzXCJcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUeXBlIG9mIHRoZSBjbGllbnRcIixcblx0XHRcdFx0XHRcdFx0XHRcdGVudW06IFtcIndlYlwiLCBcInB1YmxpY1wiXVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0YXV0aGVudGljYXRpb25TY2hlbWU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBdXRoZW50aWNhdGlvbiBzY2hlbWUgdXNlZCBieSB0aGUgY2xpZW50XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRlbnVtOiBbXCJjbGllbnRfc2VjcmV0XCIsIFwibm9uZVwiXVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0ZGlzYWJsZWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgY2xpZW50IGlzIGRpc2FibGVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRlbnVtOiBbZmFsc2VdXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIklEIG9mIHRoZSB1c2VyIHdobyByZWdpc3RlcmVkIHRoZSBjbGllbnQsIG51bGwgaWYgcmVnaXN0ZXJlZCBhbm9ueW1vdXNseVwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGlvbiB0aW1lc3RhbXBcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTGFzdCB1cGRhdGUgdGltZXN0YW1wXCJcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJjbGllbnRJZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwicmVkaXJlY3RVcmxzXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJhdXRoZW50aWNhdGlvblNjaGVtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiZGlzYWJsZWRcIixcblx0XHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGJvZHkgPSBjdHguYm9keTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xuXHRcdFx0XHRjdHguc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIlBPU1QsIE9QVElPTlNcIik7XG5cdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsIFwiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uXCIpO1xuXHRcdFx0XHRjdHguc2V0SGVhZGVyKFwiQWNjZXNzLUNvbnRyb2wtTWF4LUFnZVwiLCBcIjg2NDAwXCIpO1xuXHRcdFx0XHRjdHguaGVhZGVycz8uc2V0KFwiQWNjZXNzLUNvbnRyb2wtTWF4LUFnZVwiLCBcIjg2NDAwXCIpO1xuXHRcdFx0XHRpZiAoKCFib2R5LmdyYW50X3R5cGVzIHx8IGJvZHkuZ3JhbnRfdHlwZXMuaW5jbHVkZXMoXCJhdXRob3JpemF0aW9uX2NvZGVcIikgfHwgYm9keS5ncmFudF90eXBlcy5pbmNsdWRlcyhcImltcGxpY2l0XCIpKSAmJiAoIWJvZHkucmVkaXJlY3RfdXJpcyB8fCBib2R5LnJlZGlyZWN0X3VyaXMubGVuZ3RoID09PSAwKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVkaXJlY3RfdXJpXCIsXG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiUmVkaXJlY3QgVVJJcyBhcmUgcmVxdWlyZWQgZm9yIGF1dGhvcml6YXRpb25fY29kZSBhbmQgaW1wbGljaXQgZ3JhbnQgdHlwZXNcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGJvZHkuZ3JhbnRfdHlwZXMgJiYgYm9keS5yZXNwb25zZV90eXBlcykge1xuXHRcdFx0XHRcdGlmIChib2R5LmdyYW50X3R5cGVzLmluY2x1ZGVzKFwiYXV0aG9yaXphdGlvbl9jb2RlXCIpICYmICFib2R5LnJlc3BvbnNlX3R5cGVzLmluY2x1ZGVzKFwiY29kZVwiKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRfbWV0YWRhdGFcIixcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIldoZW4gJ2F1dGhvcml6YXRpb25fY29kZScgZ3JhbnQgdHlwZSBpcyB1c2VkLCAnY29kZScgcmVzcG9uc2UgdHlwZSBtdXN0IGJlIGluY2x1ZGVkXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoYm9keS5ncmFudF90eXBlcy5pbmNsdWRlcyhcImltcGxpY2l0XCIpICYmICFib2R5LnJlc3BvbnNlX3R5cGVzLmluY2x1ZGVzKFwidG9rZW5cIikpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50X21ldGFkYXRhXCIsXG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJXaGVuICdpbXBsaWNpdCcgZ3JhbnQgdHlwZSBpcyB1c2VkLCAndG9rZW4nIHJlc3BvbnNlIHR5cGUgbXVzdCBiZSBpbmNsdWRlZFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgY2xpZW50SWQgPSBvcHRzLmdlbmVyYXRlQ2xpZW50SWQ/LigpIHx8IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcImEtelwiLCBcIkEtWlwiKTtcblx0XHRcdFx0Y29uc3QgY2xpZW50U2VjcmV0ID0gb3B0cy5nZW5lcmF0ZUNsaWVudFNlY3JldD8uKCkgfHwgZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIpO1xuXHRcdFx0XHRjb25zdCBjbGllbnRUeXBlID0gYm9keS50b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCA9PT0gXCJub25lXCIgPyBcInB1YmxpY1wiIDogXCJ3ZWJcIjtcblx0XHRcdFx0Y29uc3QgZmluYWxDbGllbnRTZWNyZXQgPSBjbGllbnRUeXBlID09PSBcInB1YmxpY1wiID8gXCJcIiA6IGNsaWVudFNlY3JldDtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBtb2RlbE5hbWUub2F1dGhDbGllbnQsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0bmFtZTogYm9keS5jbGllbnRfbmFtZSxcblx0XHRcdFx0XHRcdGljb246IGJvZHkubG9nb191cmksXG5cdFx0XHRcdFx0XHRtZXRhZGF0YTogYm9keS5tZXRhZGF0YSA/IEpTT04uc3RyaW5naWZ5KGJvZHkubWV0YWRhdGEpIDogbnVsbCxcblx0XHRcdFx0XHRcdGNsaWVudElkLFxuXHRcdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBmaW5hbENsaWVudFNlY3JldCxcblx0XHRcdFx0XHRcdHJlZGlyZWN0VXJsczogYm9keS5yZWRpcmVjdF91cmlzLmpvaW4oXCIsXCIpLFxuXHRcdFx0XHRcdFx0dHlwZTogY2xpZW50VHlwZSxcblx0XHRcdFx0XHRcdGF1dGhlbnRpY2F0aW9uU2NoZW1lOiBib2R5LnRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kIHx8IFwiY2xpZW50X3NlY3JldF9iYXNpY1wiLFxuXHRcdFx0XHRcdFx0ZGlzYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dXNlcklkOiBzZXNzaW9uPy5zZXNzaW9uLnVzZXJJZCxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2VEYXRhID0ge1xuXHRcdFx0XHRcdGNsaWVudF9pZDogY2xpZW50SWQsXG5cdFx0XHRcdFx0Y2xpZW50X2lkX2lzc3VlZF9hdDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSxcblx0XHRcdFx0XHRyZWRpcmVjdF91cmlzOiBib2R5LnJlZGlyZWN0X3VyaXMsXG5cdFx0XHRcdFx0dG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2Q6IGJvZHkudG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QgfHwgXCJjbGllbnRfc2VjcmV0X2Jhc2ljXCIsXG5cdFx0XHRcdFx0Z3JhbnRfdHlwZXM6IGJvZHkuZ3JhbnRfdHlwZXMgfHwgW1wiYXV0aG9yaXphdGlvbl9jb2RlXCJdLFxuXHRcdFx0XHRcdHJlc3BvbnNlX3R5cGVzOiBib2R5LnJlc3BvbnNlX3R5cGVzIHx8IFtcImNvZGVcIl0sXG5cdFx0XHRcdFx0Y2xpZW50X25hbWU6IGJvZHkuY2xpZW50X25hbWUsXG5cdFx0XHRcdFx0Y2xpZW50X3VyaTogYm9keS5jbGllbnRfdXJpLFxuXHRcdFx0XHRcdGxvZ29fdXJpOiBib2R5LmxvZ29fdXJpLFxuXHRcdFx0XHRcdHNjb3BlOiBib2R5LnNjb3BlLFxuXHRcdFx0XHRcdGNvbnRhY3RzOiBib2R5LmNvbnRhY3RzLFxuXHRcdFx0XHRcdHRvc191cmk6IGJvZHkudG9zX3VyaSxcblx0XHRcdFx0XHRwb2xpY3lfdXJpOiBib2R5LnBvbGljeV91cmksXG5cdFx0XHRcdFx0andrc191cmk6IGJvZHkuandrc191cmksXG5cdFx0XHRcdFx0andrczogYm9keS5qd2tzLFxuXHRcdFx0XHRcdHNvZnR3YXJlX2lkOiBib2R5LnNvZnR3YXJlX2lkLFxuXHRcdFx0XHRcdHNvZnR3YXJlX3ZlcnNpb246IGJvZHkuc29mdHdhcmVfdmVyc2lvbixcblx0XHRcdFx0XHRzb2Z0d2FyZV9zdGF0ZW1lbnQ6IGJvZHkuc29mdHdhcmVfc3RhdGVtZW50LFxuXHRcdFx0XHRcdG1ldGFkYXRhOiBib2R5Lm1ldGFkYXRhLFxuXHRcdFx0XHRcdC4uLmNsaWVudFR5cGUgIT09IFwicHVibGljXCIgPyB7XG5cdFx0XHRcdFx0XHRjbGllbnRfc2VjcmV0OiBmaW5hbENsaWVudFNlY3JldCxcblx0XHRcdFx0XHRcdGNsaWVudF9zZWNyZXRfZXhwaXJlc19hdDogMFxuXHRcdFx0XHRcdH0gOiB7fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlRGF0YSksIHtcblx0XHRcdFx0XHRzdGF0dXM6IDIwMSxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XHRcdFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIsXG5cdFx0XHRcdFx0XHRQcmFnbWE6IFwibm8tY2FjaGVcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KSxcblx0XHRcdGdldE1jcFNlc3Npb246IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9tY3AvZ2V0LXNlc3Npb25cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlXG5cdFx0XHR9LCBhc3luYyAoYykgPT4ge1xuXHRcdFx0XHRjb25zdCBhY2Nlc3NUb2tlbiA9IGMuaGVhZGVycz8uZ2V0KFwiQXV0aG9yaXphdGlvblwiKT8ucmVwbGFjZShcIkJlYXJlciBcIiwgXCJcIik7XG5cdFx0XHRcdGlmICghYWNjZXNzVG9rZW4pIHtcblx0XHRcdFx0XHRjLmhlYWRlcnM/LnNldChcIldXVy1BdXRoZW50aWNhdGVcIiwgXCJCZWFyZXJcIik7XG5cdFx0XHRcdFx0cmV0dXJuIGMuanNvbihudWxsKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBhY2Nlc3NUb2tlbkRhdGEgPSBhd2FpdCBjLmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogbW9kZWxOYW1lLm9hdXRoQWNjZXNzVG9rZW4sXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJhY2Nlc3NUb2tlblwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGFjY2Vzc1Rva2VuXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghYWNjZXNzVG9rZW5EYXRhKSByZXR1cm4gYy5qc29uKG51bGwpO1xuXHRcdFx0XHRyZXR1cm4gYy5qc29uKGFjY2Vzc1Rva2VuRGF0YSk7XG5cdFx0XHR9KVxuXHRcdH0sXG5cdFx0c2NoZW1hLFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5jb25zdCB3aXRoTWNwQXV0aCA9IChhdXRoLCBoYW5kbGVyKSA9PiB7XG5cdHJldHVybiBhc3luYyAocmVxKSA9PiB7XG5cdFx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwoYXV0aC5vcHRpb25zLmJhc2VVUkwsIGF1dGgub3B0aW9ucy5iYXNlUGF0aCk7XG5cdFx0aWYgKCFiYXNlVVJMICYmICFpc1Byb2R1Y3Rpb24pIGxvZ2dlci53YXJuKFwiVW5hYmxlIHRvIGdldCB0aGUgYmFzZVVSTCwgcGxlYXNlIGNoZWNrIHlvdXIgY29uZmlnIVwiKTtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgYXV0aC5hcGkuZ2V0TWNwU2Vzc2lvbih7IGhlYWRlcnM6IHJlcS5oZWFkZXJzIH0pO1xuXHRcdGNvbnN0IHd3d0F1dGhlbnRpY2F0ZVZhbHVlID0gYEJlYXJlciByZXNvdXJjZV9tZXRhZGF0YT1cIiR7YmFzZVVSTH0vLndlbGwta25vd24vb2F1dGgtcHJvdGVjdGVkLXJlc291cmNlXCJgO1xuXHRcdGlmICghc2Vzc2lvbikgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuXHRcdFx0anNvbnJwYzogXCIyLjBcIixcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdGNvZGU6IC0zMmUzLFxuXHRcdFx0XHRtZXNzYWdlOiBcIlVuYXV0aG9yaXplZDogQXV0aGVudGljYXRpb24gcmVxdWlyZWRcIixcblx0XHRcdFx0XCJ3d3ctYXV0aGVudGljYXRlXCI6IHd3d0F1dGhlbnRpY2F0ZVZhbHVlXG5cdFx0XHR9LFxuXHRcdFx0aWQ6IG51bGxcblx0XHR9LCB7XG5cdFx0XHRzdGF0dXM6IDQwMSxcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XCJXV1ctQXV0aGVudGljYXRlXCI6IHd3d0F1dGhlbnRpY2F0ZVZhbHVlLFxuXHRcdFx0XHRcIkFjY2Vzcy1Db250cm9sLUV4cG9zZS1IZWFkZXJzXCI6IFwiV1dXLUF1dGhlbnRpY2F0ZVwiXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGhhbmRsZXIocmVxLCBzZXNzaW9uKTtcblx0fTtcbn07XG5jb25zdCBvQXV0aERpc2NvdmVyeU1ldGFkYXRhID0gKGF1dGgpID0+IHtcblx0cmV0dXJuIGFzeW5jIChyZXF1ZXN0KSA9PiB7XG5cdFx0Y29uc3QgcmVzID0gYXdhaXQgYXV0aC5hcGkuZ2V0TWNwT0F1dGhDb25maWcoKTtcblx0XHRyZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcblx0XHRcdHN0YXR1czogMjAwLFxuXHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0XHRcdFx0XCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIjogXCIqXCIsXG5cdFx0XHRcdFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiOiBcIlBPU1QsIE9QVElPTlNcIixcblx0XHRcdFx0XCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCI6IFwiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uXCIsXG5cdFx0XHRcdFwiQWNjZXNzLUNvbnRyb2wtTWF4LUFnZVwiOiBcIjg2NDAwXCJcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcbn07XG5jb25zdCBvQXV0aFByb3RlY3RlZFJlc291cmNlTWV0YWRhdGEgPSAoYXV0aCkgPT4ge1xuXHRyZXR1cm4gYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRjb25zdCByZXMgPSBhd2FpdCBhdXRoLmFwaS5nZXRNQ1BQcm90ZWN0ZWRSZXNvdXJjZSgpO1xuXHRcdHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuXHRcdFx0c3RhdHVzOiAyMDAsXG5cdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuXHRcdFx0XHRcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiOiBcIipcIixcblx0XHRcdFx0XCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzXCI6IFwiUE9TVCwgT1BUSU9OU1wiLFxuXHRcdFx0XHRcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIjogXCJDb250ZW50LVR5cGUsIEF1dGhvcml6YXRpb25cIixcblx0XHRcdFx0XCJBY2Nlc3MtQ29udHJvbC1NYXgtQWdlXCI6IFwiODY0MDBcIlxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRNQ1BQcm90ZWN0ZWRSZXNvdXJjZU1ldGFkYXRhLCBnZXRNQ1BQcm92aWRlck1ldGFkYXRhLCBtY3AsIG9BdXRoRGlzY292ZXJ5TWV0YWRhdGEsIG9BdXRoUHJvdGVjdGVkUmVzb3VyY2VNZXRhZGF0YSwgd2l0aE1jcEF1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/mcp/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/multi-session/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   multiSessionClient: () => (/* binding */ multiSessionClient)\n/* harmony export */ });\n//#region src/plugins/multi-session/client.ts\nconst multiSessionClient = () => {\n\treturn {\n\t\tid: \"multi-session\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher(path) {\n\t\t\t\treturn path === \"/multi-session/set-active\";\n\t\t\t},\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL211bHRpLXNlc3Npb24vY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxtdWx0aS1zZXNzaW9uXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tdWx0aS1zZXNzaW9uL2NsaWVudC50c1xuY29uc3QgbXVsdGlTZXNzaW9uQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm11bHRpLXNlc3Npb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL211bHRpLXNlc3Npb24vc2V0LWFjdGl2ZVwiO1xuXHRcdFx0fSxcblx0XHRcdHNpZ25hbDogXCIkc2Vzc2lvblNpZ25hbFwiXG5cdFx0fV1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbXVsdGlTZXNzaW9uQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/multi-session/index.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/multi-session/index.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   multiSession: () => (/* binding */ multiSession)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/multi-session/index.ts\nconst ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.defineErrorCodes)({ INVALID_SESSION_TOKEN: \"Invalid session token\" });\nconst setActiveSessionBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ sessionToken: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The session token to set as active\" }) });\nconst revokeDeviceSessionBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ sessionToken: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The session token to revoke\" }) });\nconst multiSession = (options) => {\n\tconst opts = {\n\t\tmaximumSessions: 5,\n\t\t...options\n\t};\n\tconst isMultiSessionCookie = (key) => key.includes(\"_multi-\");\n\treturn {\n\t\tid: \"multi-session\",\n\t\tendpoints: {\n\t\t\tlistDeviceSessions: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/multi-session/list-device-sessions\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\trequireHeaders: true\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\t\t\t\tif (!cookieHeader) return ctx.json([]);\n\t\t\t\tconst cookies = Object.fromEntries((0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCookies)(cookieHeader));\n\t\t\t\tconst sessionTokens = (await Promise.all(Object.entries(cookies).filter(([key]) => isMultiSessionCookie(key)).map(async ([key]) => await ctx.getSignedCookie(key, ctx.context.secret)))).filter((v) => typeof v === \"string\");\n\t\t\t\tif (!sessionTokens.length) return ctx.json([]);\n\t\t\t\tconst uniqueUserSessions = (await ctx.context.internalAdapter.findSessions(sessionTokens)).filter((session) => session && session.session.expiresAt > /* @__PURE__ */ new Date()).reduce((acc, session) => {\n\t\t\t\t\tif (!acc.find((s) => s.user.id === session.user.id)) acc.push(session);\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []);\n\t\t\t\treturn ctx.json(uniqueUserSessions.map((item) => ({\n\t\t\t\t\tsession: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSessionOutput)(ctx.context.options, item.session),\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, item.user)\n\t\t\t\t})));\n\t\t\t}),\n\t\t\tsetActiveSession: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/multi-session/set-active\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: setActiveSessionBodySchema,\n\t\t\t\trequireHeaders: true,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Set the active session\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { session: { $ref: \"#/components/schemas/Session\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst sessionToken = ctx.body.sessionToken;\n\t\t\t\tconst multiSessionCookieName = `${ctx.context.authCookies.sessionToken.name}_multi-${sessionToken.toLowerCase()}`;\n\t\t\t\tif (!await ctx.getSignedCookie(multiSessionCookieName, ctx.context.secret)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\", { message: ERROR_CODES.INVALID_SESSION_TOKEN });\n\t\t\t\tconst session = await ctx.context.internalAdapter.findSession(sessionToken);\n\t\t\t\tif (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx, {\n\t\t\t\t\t\tname: multiSessionCookieName,\n\t\t\t\t\t\tattributes: ctx.context.authCookies.sessionToken.attributes\n\t\t\t\t\t});\n\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\", { message: ERROR_CODES.INVALID_SESSION_TOKEN });\n\t\t\t\t}\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, session);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tsession: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSessionOutput)(ctx.context.options, session.session),\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t\t\t\t});\n\t\t\t}),\n\t\t\trevokeDeviceSession: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/multi-session/revoke\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: revokeDeviceSessionBodySchema,\n\t\t\t\trequireHeaders: true,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Revoke a device session\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst sessionToken = ctx.body.sessionToken;\n\t\t\t\tconst multiSessionCookieName = `${ctx.context.authCookies.sessionToken.name}_multi-${sessionToken.toLowerCase()}`;\n\t\t\t\tif (!await ctx.getSignedCookie(multiSessionCookieName, ctx.context.secret)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__.APIError(\"UNAUTHORIZED\", { message: ERROR_CODES.INVALID_SESSION_TOKEN });\n\t\t\t\tawait ctx.context.internalAdapter.deleteSession(sessionToken);\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx, {\n\t\t\t\t\tname: multiSessionCookieName,\n\t\t\t\t\tattributes: ctx.context.authCookies.sessionToken.attributes\n\t\t\t\t});\n\t\t\t\tif (!(ctx.context.session?.session.token === sessionToken)) return ctx.json({ status: true });\n\t\t\t\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\t\t\t\tif (cookieHeader) {\n\t\t\t\t\tconst cookies = Object.fromEntries((0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCookies)(cookieHeader));\n\t\t\t\t\tconst sessionTokens = (await Promise.all(Object.entries(cookies).filter(([key]) => isMultiSessionCookie(key)).map(async ([key]) => await ctx.getSignedCookie(key, ctx.context.secret)))).filter((v) => typeof v === \"string\");\n\t\t\t\t\tconst internalAdapter = ctx.context.internalAdapter;\n\t\t\t\t\tif (sessionTokens.length > 0) {\n\t\t\t\t\t\tconst validSessions = (await internalAdapter.findSessions(sessionTokens)).filter((session) => session && session.session.expiresAt > /* @__PURE__ */ new Date());\n\t\t\t\t\t\tif (validSessions.length > 0) {\n\t\t\t\t\t\t\tconst nextSession = validSessions[0];\n\t\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, nextSession);\n\t\t\t\t\t\t} else (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteSessionCookie)(ctx);\n\t\t\t\t\t} else (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteSessionCookie)(ctx);\n\t\t\t\t} else (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t})\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher: () => true,\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst cookieString = ctx.context.responseHeaders?.get(\"set-cookie\");\n\t\t\t\tif (!cookieString) return;\n\t\t\t\tconst newSession = ctx.context.newSession;\n\t\t\t\tif (!newSession) return;\n\t\t\t\tconst sessionCookieConfig = ctx.context.authCookies.sessionToken;\n\t\t\t\tconst sessionToken = newSession.session.token;\n\t\t\t\tconst cookieName = `${sessionCookieConfig.name}_multi-${sessionToken.toLowerCase()}`;\n\t\t\t\tconst setCookies = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSetCookieHeader)(cookieString);\n\t\t\t\tconst cookies = (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCookies)(ctx.headers?.get(\"cookie\") || \"\");\n\t\t\t\tif (setCookies.get(cookieName) || cookies.get(cookieName)) return;\n\t\t\t\tconst multiSessionKeys = Object.keys(Object.fromEntries(cookies)).filter(isMultiSessionCookie);\n\t\t\t\tconst tokensToDelete = [];\n\t\t\t\tfor (const key of multiSessionKeys) {\n\t\t\t\t\tconst token = await ctx.getSignedCookie(key, ctx.context.secret);\n\t\t\t\t\tif (!token) continue;\n\t\t\t\t\tif ((await ctx.context.internalAdapter.findSession(token))?.user.id === newSession.user.id) {\n\t\t\t\t\t\ttokensToDelete.push(token);\n\t\t\t\t\t\tctx.setCookie(key, \"\", {\n\t\t\t\t\t\t\t...sessionCookieConfig.attributes,\n\t\t\t\t\t\t\tmaxAge: 0\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (tokensToDelete.length > 0) await ctx.context.internalAdapter.deleteSessions(tokensToDelete);\n\t\t\t\tif (multiSessionKeys.length - tokensToDelete.length + (cookieString.includes(sessionCookieConfig.name) ? 1 : 0) > opts.maximumSessions) return;\n\t\t\t\tawait ctx.setSignedCookie(cookieName, sessionToken, ctx.context.secret, sessionCookieConfig.attributes);\n\t\t\t})\n\t\t}, {\n\t\t\tmatcher: (context) => context.path === \"/sign-out\",\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\t\t\t\tif (!cookieHeader) return;\n\t\t\t\tconst cookies = Object.fromEntries((0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.parseCookies)(cookieHeader));\n\t\t\t\tconst multiSessionKeys = Object.keys(cookies).filter((key) => isMultiSessionCookie(key));\n\t\t\t\tconst verifiedTokens = (await Promise.all(multiSessionKeys.map(async (key) => {\n\t\t\t\t\tconst verifiedToken = await ctx.getSignedCookie(key, ctx.context.secret);\n\t\t\t\t\tif (verifiedToken) {\n\t\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx, {\n\t\t\t\t\t\t\tname: key.toLowerCase().replace(_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.SECURE_COOKIE_PREFIX.toLowerCase(), _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.SECURE_COOKIE_PREFIX),\n\t\t\t\t\t\t\tattributes: ctx.context.authCookies.sessionToken.attributes\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn verifiedToken;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}))).filter((v) => typeof v === \"string\");\n\t\t\t\tif (verifiedTokens.length > 0) await ctx.context.internalAdapter.deleteSessions(verifiedTokens);\n\t\t\t})\n\t\t}] },\n\t\toptions,\n\t\t$ERROR_CODES: ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL211bHRpLXNlc3Npb24vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEwRTtBQUNrQjtBQUNnQjtBQUMzQztBQUNsQjtBQUNZO0FBQ2xDO0FBQ3dEOztBQUVqRjtBQUNBLG9CQUFvQix5RUFBZ0IsR0FBRyxnREFBZ0Q7QUFDdkYsbUNBQW1DLHVDQUFRLEdBQUcsY0FBYyx1Q0FBUSxVQUFVLG1EQUFtRCxHQUFHO0FBQ3BJLHNDQUFzQyx1Q0FBUSxHQUFHLGNBQWMsdUNBQVEsVUFBVSw0Q0FBNEMsR0FBRztBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseUVBQWtCO0FBQ3pDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLHVDQUF1QyxnRUFBWTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsY0FBYyxrRUFBa0I7QUFDaEMsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0wsSUFBSTtBQUNKLHFCQUFxQix5RUFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzRUFBaUI7QUFDM0IsZ0JBQWdCO0FBQ2hCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBLHFCQUFxQixXQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLHNDQUFzQywwQ0FBMEMsU0FBUywyQkFBMkI7QUFDcEgsMEZBQTBGLG9EQUFRLG1CQUFtQiw0Q0FBNEM7QUFDaks7QUFDQTtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBLE1BQU07QUFDTixlQUFlLG9EQUFRLG1CQUFtQiw0Q0FBNEM7QUFDdEY7QUFDQSxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBLGNBQWMsa0VBQWtCO0FBQ2hDLFdBQVcsK0RBQWU7QUFDMUIsS0FBSztBQUNMLElBQUk7QUFDSix3QkFBd0IseUVBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0VBQWlCO0FBQzNCLGdCQUFnQjtBQUNoQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxzQ0FBc0MsMENBQTBDLFNBQVMsMkJBQTJCO0FBQ3BILDBGQUEwRixvREFBUSxtQkFBbUIsNENBQTRDO0FBQ2pLO0FBQ0EsSUFBSSxnRUFBWTtBQUNoQjtBQUNBO0FBQ0EsS0FBSztBQUNMLGtGQUFrRixjQUFjO0FBQ2hHO0FBQ0E7QUFDQSx3Q0FBd0MsZ0VBQVk7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvRUFBZ0I7QUFDN0IsUUFBUSxLQUFLLHVFQUFtQjtBQUNoQyxPQUFPLEtBQUssdUVBQW1CO0FBQy9CLE1BQU0sS0FBSyx1RUFBbUI7QUFDOUIsc0JBQXNCLGNBQWM7QUFDcEMsSUFBSTtBQUNKLEdBQUc7QUFDSCxXQUFXO0FBQ1g7QUFDQSxZQUFZLDJFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIseUJBQXlCLFNBQVMsMkJBQTJCO0FBQ3ZGLHVCQUF1QiwrRUFBb0I7QUFDM0Msb0JBQW9CLGdFQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxZQUFZLDJFQUFvQjtBQUNoQztBQUNBO0FBQ0EsdUNBQXVDLGdFQUFZO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxnRUFBWTtBQUNsQix1Q0FBdUMsMkVBQW9CLGdCQUFnQiwyRUFBb0I7QUFDL0Y7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKLEdBQUcsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dCO0FBQ3hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcbXVsdGktc2Vzc2lvblxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IFNFQ1VSRV9DT09LSUVfUFJFRklYLCBwYXJzZVNldENvb2tpZUhlYWRlciB9IGZyb20gXCIuLi8uLi9jb29raWVzL2Nvb2tpZS11dGlscy5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIGV4cGlyZUNvb2tpZSwgcGFyc2VDb29raWVzLCBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tdWx0aS1zZXNzaW9uL2luZGV4LnRzXG5jb25zdCBFUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoeyBJTlZBTElEX1NFU1NJT05fVE9LRU46IFwiSW52YWxpZCBzZXNzaW9uIHRva2VuXCIgfSk7XG5jb25zdCBzZXRBY3RpdmVTZXNzaW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgc2Vzc2lvblRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc2Vzc2lvbiB0b2tlbiB0byBzZXQgYXMgYWN0aXZlXCIgfSkgfSk7XG5jb25zdCByZXZva2VEZXZpY2VTZXNzaW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgc2Vzc2lvblRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc2Vzc2lvbiB0b2tlbiB0byByZXZva2VcIiB9KSB9KTtcbmNvbnN0IG11bHRpU2Vzc2lvbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0bWF4aW11bVNlc3Npb25zOiA1LFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblx0Y29uc3QgaXNNdWx0aVNlc3Npb25Db29raWUgPSAoa2V5KSA9PiBrZXkuaW5jbHVkZXMoXCJfbXVsdGktXCIpO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm11bHRpLXNlc3Npb25cIixcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdGxpc3REZXZpY2VTZXNzaW9uczogY3JlYXRlQXV0aEVuZHBvaW50KFwiL211bHRpLXNlc3Npb24vbGlzdC1kZXZpY2Utc2Vzc2lvbnNcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlXG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZUhlYWRlciA9IGN0eC5oZWFkZXJzPy5nZXQoXCJjb29raWVcIik7XG5cdFx0XHRcdGlmICghY29va2llSGVhZGVyKSByZXR1cm4gY3R4Lmpzb24oW10pO1xuXHRcdFx0XHRjb25zdCBjb29raWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpKTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRva2VucyA9IChhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhjb29raWVzKS5maWx0ZXIoKFtrZXldKSA9PiBpc011bHRpU2Vzc2lvbkNvb2tpZShrZXkpKS5tYXAoYXN5bmMgKFtrZXldKSA9PiBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGtleSwgY3R4LmNvbnRleHQuc2VjcmV0KSkpKS5maWx0ZXIoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uVG9rZW5zLmxlbmd0aCkgcmV0dXJuIGN0eC5qc29uKFtdKTtcblx0XHRcdFx0Y29uc3QgdW5pcXVlVXNlclNlc3Npb25zID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kU2Vzc2lvbnMoc2Vzc2lvblRva2VucykpLmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbiAmJiBzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpLnJlZHVjZSgoYWNjLCBzZXNzaW9uKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCFhY2MuZmluZCgocykgPT4gcy51c2VyLmlkID09PSBzZXNzaW9uLnVzZXIuaWQpKSBhY2MucHVzaChzZXNzaW9uKTtcblx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHR9LCBbXSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih1bmlxdWVVc2VyU2Vzc2lvbnMubWFwKChpdGVtKSA9PiAoe1xuXHRcdFx0XHRcdHNlc3Npb246IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBpdGVtLnNlc3Npb24pLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBpdGVtLnVzZXIpXG5cdFx0XHRcdH0pKSk7XG5cdFx0XHR9KSxcblx0XHRcdHNldEFjdGl2ZVNlc3Npb246IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9tdWx0aS1zZXNzaW9uL3NldC1hY3RpdmVcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBzZXRBY3RpdmVTZXNzaW9uQm9keVNjaGVtYSxcblx0XHRcdFx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdFx0XHRcdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNldCB0aGUgYWN0aXZlIHNlc3Npb25cIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSB9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRva2VuID0gY3R4LmJvZHkuc2Vzc2lvblRva2VuO1xuXHRcdFx0XHRjb25zdCBtdWx0aVNlc3Npb25Db29raWVOYW1lID0gYCR7Y3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWV9X211bHRpLSR7c2Vzc2lvblRva2VuLnRvTG93ZXJDYXNlKCl9YDtcblx0XHRcdFx0aWYgKCFhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKG11bHRpU2Vzc2lvbkNvb2tpZU5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEVSUk9SX0NPREVTLklOVkFMSURfU0VTU0lPTl9UT0tFTiB9KTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kU2Vzc2lvbihzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRpZiAoIXNlc3Npb24gfHwgc2Vzc2lvbi5zZXNzaW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB7XG5cdFx0XHRcdFx0ZXhwaXJlQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdFx0bmFtZTogbXVsdGlTZXNzaW9uQ29va2llTmFtZSxcblx0XHRcdFx0XHRcdGF0dHJpYnV0ZXM6IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5hdHRyaWJ1dGVzXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogRVJST1JfQ09ERVMuSU5WQUxJRF9TRVNTSU9OX1RPS0VOIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCBzZXNzaW9uKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi5zZXNzaW9uKSxcblx0XHRcdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pLFxuXHRcdFx0cmV2b2tlRGV2aWNlU2Vzc2lvbjogY3JlYXRlQXV0aEVuZHBvaW50KFwiL211bHRpLXNlc3Npb24vcmV2b2tlXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogcmV2b2tlRGV2aWNlU2Vzc2lvbkJvZHlTY2hlbWEsXG5cdFx0XHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdFx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJSZXZva2UgYSBkZXZpY2Ugc2Vzc2lvblwiLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb25Ub2tlbiA9IGN0eC5ib2R5LnNlc3Npb25Ub2tlbjtcblx0XHRcdFx0Y29uc3QgbXVsdGlTZXNzaW9uQ29va2llTmFtZSA9IGAke2N0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lfV9tdWx0aS0ke3Nlc3Npb25Ub2tlbi50b0xvd2VyQ2FzZSgpfWA7XG5cdFx0XHRcdGlmICghYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShtdWx0aVNlc3Npb25Db29raWVOYW1lLCBjdHguY29udGV4dC5zZWNyZXQpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBFUlJPUl9DT0RFUy5JTlZBTElEX1NFU1NJT05fVE9LRU4gfSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbik7XG5cdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRuYW1lOiBtdWx0aVNlc3Npb25Db29raWVOYW1lLFxuXHRcdFx0XHRcdGF0dHJpYnV0ZXM6IGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5hdHRyaWJ1dGVzXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIShjdHguY29udGV4dC5zZXNzaW9uPy5zZXNzaW9uLnRva2VuID09PSBzZXNzaW9uVG9rZW4pKSByZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZUhlYWRlciA9IGN0eC5oZWFkZXJzPy5nZXQoXCJjb29raWVcIik7XG5cdFx0XHRcdGlmIChjb29raWVIZWFkZXIpIHtcblx0XHRcdFx0XHRjb25zdCBjb29raWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpKTtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uVG9rZW5zID0gKGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC5lbnRyaWVzKGNvb2tpZXMpLmZpbHRlcigoW2tleV0pID0+IGlzTXVsdGlTZXNzaW9uQ29va2llKGtleSkpLm1hcChhc3luYyAoW2tleV0pID0+IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoa2V5LCBjdHguY29udGV4dC5zZWNyZXQpKSkpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGludGVybmFsQWRhcHRlciA9IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlcjtcblx0XHRcdFx0XHRpZiAoc2Vzc2lvblRva2Vucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRjb25zdCB2YWxpZFNlc3Npb25zID0gKGF3YWl0IGludGVybmFsQWRhcHRlci5maW5kU2Vzc2lvbnMoc2Vzc2lvblRva2VucykpLmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbiAmJiBzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpO1xuXHRcdFx0XHRcdFx0aWYgKHZhbGlkU2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0U2Vzc2lvbiA9IHZhbGlkU2Vzc2lvbnNbMF07XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCBuZXh0U2Vzc2lvbik7XG5cdFx0XHRcdFx0XHR9IGVsc2UgZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRcdFx0XHRcdH0gZWxzZSBkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdFx0XHRcdH0gZWxzZSBkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHRcdH0pXG5cdFx0fSxcblx0XHRob29rczogeyBhZnRlcjogW3tcblx0XHRcdG1hdGNoZXI6ICgpID0+IHRydWUsXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZVN0cmluZyA9IGN0eC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycz8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0aWYgKCFjb29raWVTdHJpbmcpIHJldHVybjtcblx0XHRcdFx0Y29uc3QgbmV3U2Vzc2lvbiA9IGN0eC5jb250ZXh0Lm5ld1Nlc3Npb247XG5cdFx0XHRcdGlmICghbmV3U2Vzc2lvbikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uQ29va2llQ29uZmlnID0gY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uVG9rZW4gPSBuZXdTZXNzaW9uLnNlc3Npb24udG9rZW47XG5cdFx0XHRcdGNvbnN0IGNvb2tpZU5hbWUgPSBgJHtzZXNzaW9uQ29va2llQ29uZmlnLm5hbWV9X211bHRpLSR7c2Vzc2lvblRva2VuLnRvTG93ZXJDYXNlKCl9YDtcblx0XHRcdFx0Y29uc3Qgc2V0Q29va2llcyA9IHBhcnNlU2V0Q29va2llSGVhZGVyKGNvb2tpZVN0cmluZyk7XG5cdFx0XHRcdGNvbnN0IGNvb2tpZXMgPSBwYXJzZUNvb2tpZXMoY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKSB8fCBcIlwiKTtcblx0XHRcdFx0aWYgKHNldENvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpIHx8IGNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IG11bHRpU2Vzc2lvbktleXMgPSBPYmplY3Qua2V5cyhPYmplY3QuZnJvbUVudHJpZXMoY29va2llcykpLmZpbHRlcihpc011bHRpU2Vzc2lvbkNvb2tpZSk7XG5cdFx0XHRcdGNvbnN0IHRva2Vuc1RvRGVsZXRlID0gW107XG5cdFx0XHRcdGZvciAoY29uc3Qga2V5IG9mIG11bHRpU2Vzc2lvbktleXMpIHtcblx0XHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoa2V5LCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdFx0XHRcdGlmICghdG9rZW4pIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHRva2VuKSk/LnVzZXIuaWQgPT09IG5ld1Nlc3Npb24udXNlci5pZCkge1xuXHRcdFx0XHRcdFx0dG9rZW5zVG9EZWxldGUucHVzaCh0b2tlbik7XG5cdFx0XHRcdFx0XHRjdHguc2V0Q29va2llKGtleSwgXCJcIiwge1xuXHRcdFx0XHRcdFx0XHQuLi5zZXNzaW9uQ29va2llQ29uZmlnLmF0dHJpYnV0ZXMsXG5cdFx0XHRcdFx0XHRcdG1heEFnZTogMFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0b2tlbnNUb0RlbGV0ZS5sZW5ndGggPiAwKSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnModG9rZW5zVG9EZWxldGUpO1xuXHRcdFx0XHRpZiAobXVsdGlTZXNzaW9uS2V5cy5sZW5ndGggLSB0b2tlbnNUb0RlbGV0ZS5sZW5ndGggKyAoY29va2llU3RyaW5nLmluY2x1ZGVzKHNlc3Npb25Db29raWVDb25maWcubmFtZSkgPyAxIDogMCkgPiBvcHRzLm1heGltdW1TZXNzaW9ucykgcmV0dXJuO1xuXHRcdFx0XHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKGNvb2tpZU5hbWUsIHNlc3Npb25Ub2tlbiwgY3R4LmNvbnRleHQuc2VjcmV0LCBzZXNzaW9uQ29va2llQ29uZmlnLmF0dHJpYnV0ZXMpO1xuXHRcdFx0fSlcblx0XHR9LCB7XG5cdFx0XHRtYXRjaGVyOiAoY29udGV4dCkgPT4gY29udGV4dC5wYXRoID09PSBcIi9zaWduLW91dFwiLFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjb29raWVIZWFkZXIgPSBjdHguaGVhZGVycz8uZ2V0KFwiY29va2llXCIpO1xuXHRcdFx0XHRpZiAoIWNvb2tpZUhlYWRlcikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBjb29raWVzID0gT2JqZWN0LmZyb21FbnRyaWVzKHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpKTtcblx0XHRcdFx0Y29uc3QgbXVsdGlTZXNzaW9uS2V5cyA9IE9iamVjdC5rZXlzKGNvb2tpZXMpLmZpbHRlcigoa2V5KSA9PiBpc011bHRpU2Vzc2lvbkNvb2tpZShrZXkpKTtcblx0XHRcdFx0Y29uc3QgdmVyaWZpZWRUb2tlbnMgPSAoYXdhaXQgUHJvbWlzZS5hbGwobXVsdGlTZXNzaW9uS2V5cy5tYXAoYXN5bmMgKGtleSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHZlcmlmaWVkVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGtleSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRcdFx0XHRpZiAodmVyaWZpZWRUb2tlbikge1xuXHRcdFx0XHRcdFx0ZXhwaXJlQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdFx0XHRuYW1lOiBrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFNFQ1VSRV9DT09LSUVfUFJFRklYLnRvTG93ZXJDYXNlKCksIFNFQ1VSRV9DT09LSUVfUFJFRklYKSxcblx0XHRcdFx0XHRcdFx0YXR0cmlidXRlczogY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLmF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHZlcmlmaWVkVG9rZW47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9KSkpLmZpbHRlcigodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpO1xuXHRcdFx0XHRpZiAodmVyaWZpZWRUb2tlbnMubGVuZ3RoID4gMCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHZlcmlmaWVkVG9rZW5zKTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRvcHRpb25zLFxuXHRcdCRFUlJPUl9DT0RFUzogRVJST1JfQ09ERVNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbXVsdGlTZXNzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/multi-session/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/index.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oauth-proxy/index.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oAuthProxy: () => (/* binding */ oAuthProxy)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _client_parser_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../client/parser.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/utils.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/oauth-proxy/index.ts\nconst oAuthProxyQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after the proxy\" }),\n\tcookies: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The cookies to set after the proxy\" })\n});\nconst oAuthProxy = (opts) => {\n\tconst maxAge = opts?.maxAge ?? 60;\n\treturn {\n\t\tid: \"oauth-proxy\",\n\t\toptions: opts,\n\t\tendpoints: { oAuthProxy: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/oauth-proxy-callback\", {\n\t\t\tmethod: \"GET\",\n\t\t\toperationId: \"oauthProxyCallback\",\n\t\t\tquery: oAuthProxyQuerySchema,\n\t\t\tuse: [(0,_api_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\t\t\tmetadata: { openapi: {\n\t\t\t\toperationId: \"oauthProxyCallback\",\n\t\t\t\tdescription: \"OAuth Proxy Callback\",\n\t\t\t\tparameters: [{\n\t\t\t\t\tin: \"query\",\n\t\t\t\t\tname: \"callbackURL\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdescription: \"The URL to redirect to after the proxy\"\n\t\t\t\t}, {\n\t\t\t\t\tin: \"query\",\n\t\t\t\t\tname: \"cookies\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tdescription: \"The cookies to set after the proxy\"\n\t\t\t\t}],\n\t\t\t\tresponses: { 302: {\n\t\t\t\t\tdescription: \"Redirect\",\n\t\t\t\t\theaders: { Location: {\n\t\t\t\t\t\tdescription: \"The URL to redirect to\",\n\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t} }\n\t\t}, async (ctx) => {\n\t\t\tlet decryptedPayload = null;\n\t\t\ttry {\n\t\t\t\tdecryptedPayload = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecrypt)({\n\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\tdata: ctx.query.cookies\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.context.logger.error(\"Failed to decrypt OAuth proxy cookies:\", e);\n\t\t\t}\n\t\t\tif (!decryptedPayload) {\n\t\t\t\tconst errorURL = ctx.context.options.onAPIError?.errorURL || `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(ctx.context.options.baseURL)}/api/auth/error`;\n\t\t\t\tthrow ctx.redirect(`${errorURL}?error=OAuthProxy - Invalid cookies or secret`);\n\t\t\t}\n\t\t\tlet payload;\n\t\t\ttry {\n\t\t\t\tpayload = (0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_6__.parseJSON)(decryptedPayload);\n\t\t\t} catch (e) {\n\t\t\t\tctx.context.logger.error(\"Failed to parse OAuth proxy payload:\", e);\n\t\t\t\tconst errorURL = ctx.context.options.onAPIError?.errorURL || `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(ctx.context.options.baseURL)}/api/auth/error`;\n\t\t\t\tthrow ctx.redirect(`${errorURL}?error=OAuthProxy - Invalid payload format`);\n\t\t\t}\n\t\t\tif (!payload.cookies || typeof payload.cookies !== \"string\" || typeof payload.timestamp !== \"number\") {\n\t\t\t\tctx.context.logger.error(\"OAuth proxy payload missing required fields\");\n\t\t\t\tconst errorURL = ctx.context.options.onAPIError?.errorURL || `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(ctx.context.options.baseURL)}/api/auth/error`;\n\t\t\t\tthrow ctx.redirect(`${errorURL}?error=OAuthProxy - Invalid payload structure`);\n\t\t\t}\n\t\t\tconst age = (Date.now() - payload.timestamp) / 1e3;\n\t\t\tif (age > maxAge || age < -10) {\n\t\t\t\tctx.context.logger.error(`OAuth proxy payload expired or invalid (age: ${age}s, maxAge: ${maxAge}s)`);\n\t\t\t\tconst errorURL = ctx.context.options.onAPIError?.errorURL || `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(ctx.context.options.baseURL)}/api/auth/error`;\n\t\t\t\tthrow ctx.redirect(`${errorURL}?error=OAuthProxy - Payload expired or invalid`);\n\t\t\t}\n\t\t\tconst decryptedCookies = payload.cookies;\n\t\t\tconst isSecureContext = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.resolveCurrentURL)(ctx, opts).protocol === \"https:\";\n\t\t\tconst parsedCookies = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.parseSetCookieHeader)(decryptedCookies);\n\t\t\tconst processedCookies = Array.from(parsedCookies.entries()).map(([name, attrs]) => {\n\t\t\t\tconst options = {};\n\t\t\t\tif (attrs.path) options.path = attrs.path;\n\t\t\t\tif (attrs.expires) options.expires = attrs.expires;\n\t\t\t\tif (attrs.samesite) options.sameSite = attrs.samesite;\n\t\t\t\tif (attrs.httponly) options.httpOnly = true;\n\t\t\t\tif (attrs[\"max-age\"] !== void 0) options.maxAge = attrs[\"max-age\"];\n\t\t\t\tif (isSecureContext) options.secure = true;\n\t\t\t\tconst cookieName = isSecureContext ? name : (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.stripSecureCookiePrefix)(name);\n\t\t\t\tlet cookieValue;\n\t\t\t\ttry {\n\t\t\t\t\tcookieValue = decodeURIComponent(attrs.value);\n\t\t\t\t} catch {\n\t\t\t\t\tcookieValue = attrs.value;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tname: cookieName,\n\t\t\t\t\tvalue: cookieValue,\n\t\t\t\t\toptions\n\t\t\t\t};\n\t\t\t});\n\t\t\tfor (const cookie of processedCookies) ctx.setCookie(cookie.name, cookie.value, cookie.options);\n\t\t\tthrow ctx.redirect(ctx.query.callbackURL);\n\t\t}) },\n\t\thooks: {\n\t\t\tbefore: [\n\t\t\t\t{\n\t\t\t\t\tmatcher(context) {\n\t\t\t\t\t\treturn !!(context.path?.startsWith(\"/sign-in/social\") || context.path?.startsWith(\"/sign-in/oauth2\"));\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tif ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.checkSkipProxy)(ctx, opts)) return;\n\t\t\t\t\t\tconst currentURL = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.resolveCurrentURL)(ctx, opts);\n\t\t\t\t\t\tconst productionURL = opts?.productionURL;\n\t\t\t\t\t\tconst originalCallbackURL = ctx.body?.callbackURL || ctx.context.baseURL;\n\t\t\t\t\t\tif (productionURL) {\n\t\t\t\t\t\t\tconst productionBaseURL = `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(productionURL)}${ctx.context.options.basePath || \"/api/auth\"}`;\n\t\t\t\t\t\t\tctx.context.baseURL = productionBaseURL;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst newCallbackURL = `${(0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.stripTrailingSlash)(currentURL.origin)}${ctx.context.options.basePath || \"/api/auth\"}/oauth-proxy-callback?callbackURL=${encodeURIComponent(originalCallbackURL)}`;\n\t\t\t\t\t\tif (!ctx.body) return;\n\t\t\t\t\t\tctx.body.callbackURL = newCallbackURL;\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmatcher(context) {\n\t\t\t\t\t\treturn !!(context.path?.startsWith(\"/callback\") || context.path?.startsWith(\"/oauth2/callback\"));\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tconst state = ctx.query?.state || ctx.body?.state;\n\t\t\t\t\t\tif (!state || typeof state !== \"string\") return;\n\t\t\t\t\t\tlet statePackage;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tstatePackage = (0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_6__.parseJSON)(await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecrypt)({\n\t\t\t\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\t\t\t\tdata: state\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!statePackage.isOAuthProxy || !statePackage.state || !statePackage.stateCookie) return;\n\t\t\t\t\t\tlet stateCookieValue;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tstateCookieValue = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecrypt)({\n\t\t\t\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\t\t\t\tdata: statePackage.stateCookie\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t(0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_6__.parseJSON)(stateCookieValue);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tctx.context.logger.error(\"Failed to decrypt OAuth proxy state cookie:\", e);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tctx.context._oauthProxySnapshot = {\n\t\t\t\t\t\t\tstoreStateStrategy: ctx.context.oauthConfig.storeStateStrategy,\n\t\t\t\t\t\t\tskipStateCookieCheck: ctx.context.oauthConfig.skipStateCookieCheck,\n\t\t\t\t\t\t\tinternalAdapter: ctx.context.internalAdapter\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst originalAdapter = ctx.context.internalAdapter;\n\t\t\t\t\t\tconst capturedStatePackage = statePackage;\n\t\t\t\t\t\tctx.context.oauthConfig.storeStateStrategy = \"database\";\n\t\t\t\t\t\tctx.context.internalAdapter = {\n\t\t\t\t\t\t\t...ctx.context.internalAdapter,\n\t\t\t\t\t\t\tfindVerificationValue: async (identifier) => {\n\t\t\t\t\t\t\t\tif (identifier === capturedStatePackage.state) return {\n\t\t\t\t\t\t\t\t\tid: `oauth-proxy-${capturedStatePackage.state}`,\n\t\t\t\t\t\t\t\t\tidentifier: capturedStatePackage.state,\n\t\t\t\t\t\t\t\t\tvalue: stateCookieValue,\n\t\t\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\t\t\t\texpiresAt: new Date(Date.now() + 600 * 1e3)\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\treturn originalAdapter.findVerificationValue(identifier);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (ctx.query?.state) ctx.query.state = statePackage.state;\n\t\t\t\t\t\tif (ctx.body?.state) ctx.body.state = statePackage.state;\n\t\t\t\t\t\tctx.context.oauthConfig.skipStateCookieCheck = true;\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmatcher() {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tif (ctx.path !== \"/callback/:id\") return;\n\t\t\t\t\t\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") return;\n\t\t\t\t\t\tif (ctx.context._oauthProxySnapshot) return;\n\t\t\t\t\t\tconst state = ctx.query?.state || ctx.body?.state;\n\t\t\t\t\t\tif (!state) return;\n\t\t\t\t\t\tconst data = await ctx.context.internalAdapter.findVerificationValue(state);\n\t\t\t\t\t\tif (!data) return;\n\t\t\t\t\t\tlet parsedState;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tparsedState = (0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_6__.parseJSON)(data.value);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\tparsedState = void 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!parsedState?.callbackURL?.includes(\"/oauth-proxy-callback\")) return;\n\t\t\t\t\t\tctx.context._oauthProxySnapshot = {\n\t\t\t\t\t\t\tstoreStateStrategy: ctx.context.oauthConfig.storeStateStrategy,\n\t\t\t\t\t\t\tskipStateCookieCheck: ctx.context.oauthConfig.skipStateCookieCheck,\n\t\t\t\t\t\t\tinternalAdapter: ctx.context.internalAdapter\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctx.context.oauthConfig.skipStateCookieCheck = true;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t],\n\t\t\tafter: [\n\t\t\t\t{\n\t\t\t\t\tmatcher(context) {\n\t\t\t\t\t\treturn !!(context.path?.startsWith(\"/sign-in/social\") || context.path?.startsWith(\"/sign-in/oauth2\"));\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tif ((0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.checkSkipProxy)(ctx, opts)) return;\n\t\t\t\t\t\tif (ctx.context.oauthConfig.storeStateStrategy !== \"cookie\") return;\n\t\t\t\t\t\tconst signInResponse = ctx.context.returned;\n\t\t\t\t\t\tif (!signInResponse || typeof signInResponse !== \"object\" || !(\"url\" in signInResponse)) return;\n\t\t\t\t\t\tconst { url: providerURL } = signInResponse;\n\t\t\t\t\t\tif (typeof providerURL !== \"string\") return;\n\t\t\t\t\t\tconst oauthURL = new URL(providerURL);\n\t\t\t\t\t\tconst originalState = oauthURL.searchParams.get(\"state\");\n\t\t\t\t\t\tif (!originalState) return;\n\t\t\t\t\t\tconst setCookieHeader = ctx.context.responseHeaders?.get(\"set-cookie\");\n\t\t\t\t\t\tif (!setCookieHeader) return;\n\t\t\t\t\t\tconst stateCookie = ctx.context.createAuthCookie(\"oauth_state\");\n\t\t\t\t\t\tconst stateCookieAttrs = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.parseSetCookieHeader)(setCookieHeader).get(stateCookie.name);\n\t\t\t\t\t\tif (!stateCookieAttrs?.value) return;\n\t\t\t\t\t\tconst stateCookieValue = stateCookieAttrs.value;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst statePackage = {\n\t\t\t\t\t\t\t\tstate: originalState,\n\t\t\t\t\t\t\t\tstateCookie: stateCookieValue,\n\t\t\t\t\t\t\t\tisOAuthProxy: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst encryptedPackage = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\t\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\t\t\t\tdata: JSON.stringify(statePackage)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\toauthURL.searchParams.set(\"state\", encryptedPackage);\n\t\t\t\t\t\t\tctx.context.returned = {\n\t\t\t\t\t\t\t\t...signInResponse,\n\t\t\t\t\t\t\t\turl: oauthURL.toString()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tctx.context.logger.error(\"Failed to encrypt OAuth proxy state package:\", e);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmatcher(context) {\n\t\t\t\t\t\treturn !!(context.path?.startsWith(\"/callback\") || context.path?.startsWith(\"/oauth2/callback\"));\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tconst headers = ctx.context.responseHeaders;\n\t\t\t\t\t\tconst location = headers?.get(\"location\");\n\t\t\t\t\t\tif (!location?.includes(\"/oauth-proxy-callback?callbackURL\") || !location.startsWith(\"http\")) return;\n\t\t\t\t\t\tconst productionOrigin = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(opts?.productionURL || ctx.context.options.baseURL || ctx.context.baseURL);\n\t\t\t\t\t\tconst locationURL = new URL(location);\n\t\t\t\t\t\tif (locationURL.origin === productionOrigin) {\n\t\t\t\t\t\t\tconst newLocation = locationURL.searchParams.get(\"callbackURL\");\n\t\t\t\t\t\t\tif (!newLocation) return;\n\t\t\t\t\t\t\tctx.setHeader(\"location\", newLocation);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst setCookies = headers?.get(\"set-cookie\");\n\t\t\t\t\t\tif (!setCookies) return;\n\t\t\t\t\t\tconst payload = {\n\t\t\t\t\t\t\tcookies: setCookies,\n\t\t\t\t\t\t\ttimestamp: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst encryptedCookies = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\t\t\tdata: JSON.stringify(payload)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst locationWithCookies = `${location}&cookies=${encodeURIComponent(encryptedCookies)}`;\n\t\t\t\t\t\tctx.setHeader(\"location\", locationWithCookies);\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmatcher(context) {\n\t\t\t\t\t\treturn !!(context.path?.startsWith(\"/callback\") || context.path?.startsWith(\"/oauth2/callback\"));\n\t\t\t\t\t},\n\t\t\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\t\t\tconst contextWithSnapshot = ctx.context;\n\t\t\t\t\t\tconst snapshot = contextWithSnapshot._oauthProxySnapshot;\n\t\t\t\t\t\tif (snapshot) {\n\t\t\t\t\t\t\tctx.context.oauthConfig.storeStateStrategy = snapshot.storeStateStrategy;\n\t\t\t\t\t\t\tctx.context.oauthConfig.skipStateCookieCheck = snapshot.skipStateCookieCheck;\n\t\t\t\t\t\t\tctx.context.internalAdapter = snapshot.internalAdapter;\n\t\t\t\t\t\t\tcontextWithSnapshot._oauthProxySnapshot = void 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29hdXRoLXByb3h5L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNxQjtBQUNPO0FBQ21CO0FBQzlEO0FBQ0o7QUFDdUI7QUFDZ0M7QUFDM0Q7QUFDd0Q7O0FBRWpGO0FBQ0EsOEJBQThCLHVDQUFRO0FBQ3RDLGNBQWMsdUNBQVEsVUFBVSx1REFBdUQ7QUFDdkYsVUFBVSx1Q0FBUSxVQUFVLG1EQUFtRDtBQUMvRSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsWUFBWSx5RUFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUyw4RUFBVztBQUNwQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNkJBQTZCLG1FQUFnQjtBQUM3QztBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsOERBQWtCLDhCQUE4QjtBQUNwSCwwQkFBMEIsU0FBUztBQUNuQztBQUNBO0FBQ0E7QUFDQSxjQUFjLDZEQUFTO0FBQ3ZCLEtBQUs7QUFDTDtBQUNBLG9FQUFvRSw4REFBa0IsOEJBQThCO0FBQ3BILDBCQUEwQixTQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSw4REFBa0IsOEJBQThCO0FBQ3BILDBCQUEwQixTQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSxJQUFJLGFBQWEsT0FBTztBQUNyRyxvRUFBb0UsOERBQWtCLDhCQUE4QjtBQUNwSCwwQkFBMEIsU0FBUztBQUNuQztBQUNBO0FBQ0EsMkJBQTJCLDZEQUFpQjtBQUM1Qyx5QkFBeUIsK0VBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsa0ZBQXVCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRyxHQUFHO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjLDJFQUFvQjtBQUNsQyxVQUFVLDBEQUFjO0FBQ3hCLHlCQUF5Qiw2REFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDhEQUFrQixnQkFBZ0IsRUFBRSw0Q0FBNEM7QUFDcEg7QUFDQTtBQUNBLGdDQUFnQyw4REFBa0Isb0JBQW9CLEVBQUUsNENBQTRDLG9DQUFvQyx3Q0FBd0M7QUFDaE07QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGNBQWMsMkVBQW9CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFTLE9BQU8sbUVBQWdCO0FBQ3REO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsbUVBQWdCO0FBQ2hEO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsT0FBTyw2REFBUztBQUNoQixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJCQUEyQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjLDJFQUFvQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQVM7QUFDOUIsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sY0FBYywyRUFBb0I7QUFDbEMsVUFBVSwwREFBYztBQUN4QjtBQUNBO0FBQ0E7QUFDQSxjQUFjLG1CQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwrRUFBb0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtRUFBZ0I7QUFDdEQ7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjLDJFQUFvQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseURBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsbUVBQWdCO0FBQ3JEO0FBQ0E7QUFDQSxPQUFPO0FBQ1AscUNBQXFDLFNBQVMsV0FBVyxxQ0FBcUM7QUFDOUY7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjLDJFQUFvQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvYXV0aC1wcm94eVxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9yaWdpbiB9IGZyb20gXCIuLi8uLi91dGlscy91cmwubWpzXCI7XG5pbXBvcnQgeyBvcmlnaW5DaGVjayB9IGZyb20gXCIuLi8uLi9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNldENvb2tpZUhlYWRlciwgc3RyaXBTZWN1cmVDb29raWVQcmVmaXggfSBmcm9tIFwiLi4vLi4vY29va2llcy9jb29raWUtdXRpbHMubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VKU09OIH0gZnJvbSBcIi4uLy4uL2NsaWVudC9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyBjaGVja1NraXBQcm94eSwgcmVzb2x2ZUN1cnJlbnRVUkwsIHN0cmlwVHJhaWxpbmdTbGFzaCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2F1dGgtcHJveHkvaW5kZXgudHNcbmNvbnN0IG9BdXRoUHJveHlRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHtcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHByb3h5XCIgfSksXG5cdGNvb2tpZXM6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjb29raWVzIHRvIHNldCBhZnRlciB0aGUgcHJveHlcIiB9KVxufSk7XG5jb25zdCBvQXV0aFByb3h5ID0gKG9wdHMpID0+IHtcblx0Y29uc3QgbWF4QWdlID0gb3B0cz8ubWF4QWdlID8/IDYwO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm9hdXRoLXByb3h5XCIsXG5cdFx0b3B0aW9uczogb3B0cyxcblx0XHRlbmRwb2ludHM6IHsgb0F1dGhQcm94eTogY3JlYXRlQXV0aEVuZHBvaW50KFwiL29hdXRoLXByb3h5LWNhbGxiYWNrXCIsIHtcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdG9wZXJhdGlvbklkOiBcIm9hdXRoUHJveHlDYWxsYmFja1wiLFxuXHRcdFx0cXVlcnk6IG9BdXRoUHJveHlRdWVyeVNjaGVtYSxcblx0XHRcdHVzZTogW29yaWdpbkNoZWNrKChjdHgpID0+IGN0eC5xdWVyeS5jYWxsYmFja1VSTCldLFxuXHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJvYXV0aFByb3h5Q2FsbGJhY2tcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiT0F1dGggUHJveHkgQ2FsbGJhY2tcIixcblx0XHRcdFx0cGFyYW1ldGVyczogW3tcblx0XHRcdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0XHRcdG5hbWU6IFwiY2FsbGJhY2tVUkxcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSBwcm94eVwiXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0XHRcdG5hbWU6IFwiY29va2llc1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBjb29raWVzIHRvIHNldCBhZnRlciB0aGUgcHJveHlcIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0cmVzcG9uc2VzOiB7IDMwMjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlJlZGlyZWN0XCIsXG5cdFx0XHRcdFx0aGVhZGVyczogeyBMb2NhdGlvbjoge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0b1wiLFxuXHRcdFx0XHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0gfVxuXHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdGxldCBkZWNyeXB0ZWRQYXlsb2FkID0gbnVsbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRlY3J5cHRlZFBheWxvYWQgPSBhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdFx0XHRrZXk6IGN0eC5jb250ZXh0LnNlY3JldCxcblx0XHRcdFx0XHRkYXRhOiBjdHgucXVlcnkuY29va2llc1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlY3J5cHQgT0F1dGggcHJveHkgY29va2llczpcIiwgZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWRlY3J5cHRlZFBheWxvYWQpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JVUkwgPSBjdHguY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke3N0cmlwVHJhaWxpbmdTbGFzaChjdHguY29udGV4dC5vcHRpb25zLmJhc2VVUkwpfS9hcGkvYXV0aC9lcnJvcmA7XG5cdFx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9T0F1dGhQcm94eSAtIEludmFsaWQgY29va2llcyBvciBzZWNyZXRgKTtcblx0XHRcdH1cblx0XHRcdGxldCBwYXlsb2FkO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cGF5bG9hZCA9IHBhcnNlSlNPTihkZWNyeXB0ZWRQYXlsb2FkKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIE9BdXRoIHByb3h5IHBheWxvYWQ6XCIsIGUpO1xuXHRcdFx0XHRjb25zdCBlcnJvclVSTCA9IGN0eC5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7c3RyaXBUcmFpbGluZ1NsYXNoKGN0eC5jb250ZXh0Lm9wdGlvbnMuYmFzZVVSTCl9L2FwaS9hdXRoL2Vycm9yYDtcblx0XHRcdFx0dGhyb3cgY3R4LnJlZGlyZWN0KGAke2Vycm9yVVJMfT9lcnJvcj1PQXV0aFByb3h5IC0gSW52YWxpZCBwYXlsb2FkIGZvcm1hdGApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXlsb2FkLmNvb2tpZXMgfHwgdHlwZW9mIHBheWxvYWQuY29va2llcyAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcGF5bG9hZC50aW1lc3RhbXAgIT09IFwibnVtYmVyXCIpIHtcblx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiT0F1dGggcHJveHkgcGF5bG9hZCBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkc1wiKTtcblx0XHRcdFx0Y29uc3QgZXJyb3JVUkwgPSBjdHguY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke3N0cmlwVHJhaWxpbmdTbGFzaChjdHguY29udGV4dC5vcHRpb25zLmJhc2VVUkwpfS9hcGkvYXV0aC9lcnJvcmA7XG5cdFx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9T0F1dGhQcm94eSAtIEludmFsaWQgcGF5bG9hZCBzdHJ1Y3R1cmVgKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGFnZSA9IChEYXRlLm5vdygpIC0gcGF5bG9hZC50aW1lc3RhbXApIC8gMWUzO1xuXHRcdFx0aWYgKGFnZSA+IG1heEFnZSB8fCBhZ2UgPCAtMTApIHtcblx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBPQXV0aCBwcm94eSBwYXlsb2FkIGV4cGlyZWQgb3IgaW52YWxpZCAoYWdlOiAke2FnZX1zLCBtYXhBZ2U6ICR7bWF4QWdlfXMpYCk7XG5cdFx0XHRcdGNvbnN0IGVycm9yVVJMID0gY3R4LmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtzdHJpcFRyYWlsaW5nU2xhc2goY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlVVJMKX0vYXBpL2F1dGgvZXJyb3JgO1xuXHRcdFx0XHR0aHJvdyBjdHgucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPU9BdXRoUHJveHkgLSBQYXlsb2FkIGV4cGlyZWQgb3IgaW52YWxpZGApO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZGVjcnlwdGVkQ29va2llcyA9IHBheWxvYWQuY29va2llcztcblx0XHRcdGNvbnN0IGlzU2VjdXJlQ29udGV4dCA9IHJlc29sdmVDdXJyZW50VVJMKGN0eCwgb3B0cykucHJvdG9jb2wgPT09IFwiaHR0cHM6XCI7XG5cdFx0XHRjb25zdCBwYXJzZWRDb29raWVzID0gcGFyc2VTZXRDb29raWVIZWFkZXIoZGVjcnlwdGVkQ29va2llcyk7XG5cdFx0XHRjb25zdCBwcm9jZXNzZWRDb29raWVzID0gQXJyYXkuZnJvbShwYXJzZWRDb29raWVzLmVudHJpZXMoKSkubWFwKChbbmFtZSwgYXR0cnNdKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG9wdGlvbnMgPSB7fTtcblx0XHRcdFx0aWYgKGF0dHJzLnBhdGgpIG9wdGlvbnMucGF0aCA9IGF0dHJzLnBhdGg7XG5cdFx0XHRcdGlmIChhdHRycy5leHBpcmVzKSBvcHRpb25zLmV4cGlyZXMgPSBhdHRycy5leHBpcmVzO1xuXHRcdFx0XHRpZiAoYXR0cnMuc2FtZXNpdGUpIG9wdGlvbnMuc2FtZVNpdGUgPSBhdHRycy5zYW1lc2l0ZTtcblx0XHRcdFx0aWYgKGF0dHJzLmh0dHBvbmx5KSBvcHRpb25zLmh0dHBPbmx5ID0gdHJ1ZTtcblx0XHRcdFx0aWYgKGF0dHJzW1wibWF4LWFnZVwiXSAhPT0gdm9pZCAwKSBvcHRpb25zLm1heEFnZSA9IGF0dHJzW1wibWF4LWFnZVwiXTtcblx0XHRcdFx0aWYgKGlzU2VjdXJlQ29udGV4dCkgb3B0aW9ucy5zZWN1cmUgPSB0cnVlO1xuXHRcdFx0XHRjb25zdCBjb29raWVOYW1lID0gaXNTZWN1cmVDb250ZXh0ID8gbmFtZSA6IHN0cmlwU2VjdXJlQ29va2llUHJlZml4KG5hbWUpO1xuXHRcdFx0XHRsZXQgY29va2llVmFsdWU7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29va2llVmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoYXR0cnMudmFsdWUpO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRjb29raWVWYWx1ZSA9IGF0dHJzLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZTogY29va2llTmFtZSxcblx0XHRcdFx0XHR2YWx1ZTogY29va2llVmFsdWUsXG5cdFx0XHRcdFx0b3B0aW9uc1xuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0XHRmb3IgKGNvbnN0IGNvb2tpZSBvZiBwcm9jZXNzZWRDb29raWVzKSBjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUsIGNvb2tpZS5vcHRpb25zKTtcblx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChjdHgucXVlcnkuY2FsbGJhY2tVUkwpO1xuXHRcdH0pIH0sXG5cdFx0aG9va3M6IHtcblx0XHRcdGJlZm9yZTogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gISEoY29udGV4dC5wYXRoPy5zdGFydHNXaXRoKFwiL3NpZ24taW4vc29jaWFsXCIpIHx8IGNvbnRleHQucGF0aD8uc3RhcnRzV2l0aChcIi9zaWduLWluL29hdXRoMlwiKSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoY2hlY2tTa2lwUHJveHkoY3R4LCBvcHRzKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgY3VycmVudFVSTCA9IHJlc29sdmVDdXJyZW50VVJMKGN0eCwgb3B0cyk7XG5cdFx0XHRcdFx0XHRjb25zdCBwcm9kdWN0aW9uVVJMID0gb3B0cz8ucHJvZHVjdGlvblVSTDtcblx0XHRcdFx0XHRcdGNvbnN0IG9yaWdpbmFsQ2FsbGJhY2tVUkwgPSBjdHguYm9keT8uY2FsbGJhY2tVUkwgfHwgY3R4LmNvbnRleHQuYmFzZVVSTDtcblx0XHRcdFx0XHRcdGlmIChwcm9kdWN0aW9uVVJMKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHByb2R1Y3Rpb25CYXNlVVJMID0gYCR7c3RyaXBUcmFpbGluZ1NsYXNoKHByb2R1Y3Rpb25VUkwpfSR7Y3R4LmNvbnRleHQub3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwifWA7XG5cdFx0XHRcdFx0XHRcdGN0eC5jb250ZXh0LmJhc2VVUkwgPSBwcm9kdWN0aW9uQmFzZVVSTDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IG5ld0NhbGxiYWNrVVJMID0gYCR7c3RyaXBUcmFpbGluZ1NsYXNoKGN1cnJlbnRVUkwub3JpZ2luKX0ke2N0eC5jb250ZXh0Lm9wdGlvbnMuYmFzZVBhdGggfHwgXCIvYXBpL2F1dGhcIn0vb2F1dGgtcHJveHktY2FsbGJhY2s/Y2FsbGJhY2tVUkw9JHtlbmNvZGVVUklDb21wb25lbnQob3JpZ2luYWxDYWxsYmFja1VSTCl9YDtcblx0XHRcdFx0XHRcdGlmICghY3R4LmJvZHkpIHJldHVybjtcblx0XHRcdFx0XHRcdGN0eC5ib2R5LmNhbGxiYWNrVVJMID0gbmV3Q2FsbGJhY2tVUkw7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1hdGNoZXIoY29udGV4dCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICEhKGNvbnRleHQucGF0aD8uc3RhcnRzV2l0aChcIi9jYWxsYmFja1wiKSB8fCBjb250ZXh0LnBhdGg/LnN0YXJ0c1dpdGgoXCIvb2F1dGgyL2NhbGxiYWNrXCIpKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHN0YXRlID0gY3R4LnF1ZXJ5Py5zdGF0ZSB8fCBjdHguYm9keT8uc3RhdGU7XG5cdFx0XHRcdFx0XHRpZiAoIXN0YXRlIHx8IHR5cGVvZiBzdGF0ZSAhPT0gXCJzdHJpbmdcIikgcmV0dXJuO1xuXHRcdFx0XHRcdFx0bGV0IHN0YXRlUGFja2FnZTtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHN0YXRlUGFja2FnZSA9IHBhcnNlSlNPTihhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdFx0XHRcdFx0XHRrZXk6IGN0eC5jb250ZXh0LnNlY3JldCxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiBzdGF0ZVxuXHRcdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFzdGF0ZVBhY2thZ2UuaXNPQXV0aFByb3h5IHx8ICFzdGF0ZVBhY2thZ2Uuc3RhdGUgfHwgIXN0YXRlUGFja2FnZS5zdGF0ZUNvb2tpZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0bGV0IHN0YXRlQ29va2llVmFsdWU7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRzdGF0ZUNvb2tpZVZhbHVlID0gYXdhaXQgc3ltbWV0cmljRGVjcnlwdCh7XG5cdFx0XHRcdFx0XHRcdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0XHRcdFx0XHRcdFx0ZGF0YTogc3RhdGVQYWNrYWdlLnN0YXRlQ29va2llXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRwYXJzZUpTT04oc3RhdGVDb29raWVWYWx1ZSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBkZWNyeXB0IE9BdXRoIHByb3h5IHN0YXRlIGNvb2tpZTpcIiwgZSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGN0eC5jb250ZXh0Ll9vYXV0aFByb3h5U25hcHNob3QgPSB7XG5cdFx0XHRcdFx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogY3R4LmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5LFxuXHRcdFx0XHRcdFx0XHRza2lwU3RhdGVDb29raWVDaGVjazogY3R4LmNvbnRleHQub2F1dGhDb25maWcuc2tpcFN0YXRlQ29va2llQ2hlY2ssXG5cdFx0XHRcdFx0XHRcdGludGVybmFsQWRhcHRlcjogY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxBZGFwdGVyID0gY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyO1xuXHRcdFx0XHRcdFx0Y29uc3QgY2FwdHVyZWRTdGF0ZVBhY2thZ2UgPSBzdGF0ZVBhY2thZ2U7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3kgPSBcImRhdGFiYXNlXCI7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIgPSB7XG5cdFx0XHRcdFx0XHRcdC4uLmN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlcixcblx0XHRcdFx0XHRcdFx0ZmluZFZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChpZGVudGlmaWVyID09PSBjYXB0dXJlZFN0YXRlUGFja2FnZS5zdGF0ZSkgcmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBgb2F1dGgtcHJveHktJHtjYXB0dXJlZFN0YXRlUGFja2FnZS5zdGF0ZX1gLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWRlbnRpZmllcjogY2FwdHVyZWRTdGF0ZVBhY2thZ2Uuc3RhdGUsXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogc3RhdGVDb29raWVWYWx1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgNjAwICogMWUzKVxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG9yaWdpbmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoaWRlbnRpZmllcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRpZiAoY3R4LnF1ZXJ5Py5zdGF0ZSkgY3R4LnF1ZXJ5LnN0YXRlID0gc3RhdGVQYWNrYWdlLnN0YXRlO1xuXHRcdFx0XHRcdFx0aWYgKGN0eC5ib2R5Py5zdGF0ZSkgY3R4LmJvZHkuc3RhdGUgPSBzdGF0ZVBhY2thZ2Uuc3RhdGU7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5vYXV0aENvbmZpZy5za2lwU3RhdGVDb29raWVDaGVjayA9IHRydWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1hdGNoZXIoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChjdHgucGF0aCAhPT0gXCIvY2FsbGJhY2svOmlkXCIpIHJldHVybjtcblx0XHRcdFx0XHRcdGlmIChjdHguY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3kgPT09IFwiY29va2llXCIpIHJldHVybjtcblx0XHRcdFx0XHRcdGlmIChjdHguY29udGV4dC5fb2F1dGhQcm94eVNuYXBzaG90KSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBzdGF0ZSA9IGN0eC5xdWVyeT8uc3RhdGUgfHwgY3R4LmJvZHk/LnN0YXRlO1xuXHRcdFx0XHRcdFx0aWYgKCFzdGF0ZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoc3RhdGUpO1xuXHRcdFx0XHRcdFx0aWYgKCFkYXRhKSByZXR1cm47XG5cdFx0XHRcdFx0XHRsZXQgcGFyc2VkU3RhdGU7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRwYXJzZWRTdGF0ZSA9IHBhcnNlSlNPTihkYXRhLnZhbHVlKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdFx0XHRwYXJzZWRTdGF0ZSA9IHZvaWQgMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghcGFyc2VkU3RhdGU/LmNhbGxiYWNrVVJMPy5pbmNsdWRlcyhcIi9vYXV0aC1wcm94eS1jYWxsYmFja1wiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQuX29hdXRoUHJveHlTbmFwc2hvdCA9IHtcblx0XHRcdFx0XHRcdFx0c3RvcmVTdGF0ZVN0cmF0ZWd5OiBjdHguY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3ksXG5cdFx0XHRcdFx0XHRcdHNraXBTdGF0ZUNvb2tpZUNoZWNrOiBjdHguY29udGV4dC5vYXV0aENvbmZpZy5za2lwU3RhdGVDb29raWVDaGVjayxcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxBZGFwdGVyOiBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXJcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5vYXV0aENvbmZpZy5za2lwU3RhdGVDb29raWVDaGVjayA9IHRydWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fVxuXHRcdFx0XSxcblx0XHRcdGFmdGVyOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtYXRjaGVyKGNvbnRleHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiAhIShjb250ZXh0LnBhdGg/LnN0YXJ0c1dpdGgoXCIvc2lnbi1pbi9zb2NpYWxcIikgfHwgY29udGV4dC5wYXRoPy5zdGFydHNXaXRoKFwiL3NpZ24taW4vb2F1dGgyXCIpKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChjaGVja1NraXBQcm94eShjdHgsIG9wdHMpKSByZXR1cm47XG5cdFx0XHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5ICE9PSBcImNvb2tpZVwiKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBzaWduSW5SZXNwb25zZSA9IGN0eC5jb250ZXh0LnJldHVybmVkO1xuXHRcdFx0XHRcdFx0aWYgKCFzaWduSW5SZXNwb25zZSB8fCB0eXBlb2Ygc2lnbkluUmVzcG9uc2UgIT09IFwib2JqZWN0XCIgfHwgIShcInVybFwiIGluIHNpZ25JblJlc3BvbnNlKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgeyB1cmw6IHByb3ZpZGVyVVJMIH0gPSBzaWduSW5SZXNwb25zZTtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgcHJvdmlkZXJVUkwgIT09IFwic3RyaW5nXCIpIHJldHVybjtcblx0XHRcdFx0XHRcdGNvbnN0IG9hdXRoVVJMID0gbmV3IFVSTChwcm92aWRlclVSTCk7XG5cdFx0XHRcdFx0XHRjb25zdCBvcmlnaW5hbFN0YXRlID0gb2F1dGhVUkwuc2VhcmNoUGFyYW1zLmdldChcInN0YXRlXCIpO1xuXHRcdFx0XHRcdFx0aWYgKCFvcmlnaW5hbFN0YXRlKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBzZXRDb29raWVIZWFkZXIgPSBjdHguY29udGV4dC5yZXNwb25zZUhlYWRlcnM/LmdldChcInNldC1jb29raWVcIik7XG5cdFx0XHRcdFx0XHRpZiAoIXNldENvb2tpZUhlYWRlcikgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RhdGVDb29raWUgPSBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFwib2F1dGhfc3RhdGVcIik7XG5cdFx0XHRcdFx0XHRjb25zdCBzdGF0ZUNvb2tpZUF0dHJzID0gcGFyc2VTZXRDb29raWVIZWFkZXIoc2V0Q29va2llSGVhZGVyKS5nZXQoc3RhdGVDb29raWUubmFtZSk7XG5cdFx0XHRcdFx0XHRpZiAoIXN0YXRlQ29va2llQXR0cnM/LnZhbHVlKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBzdGF0ZUNvb2tpZVZhbHVlID0gc3RhdGVDb29raWVBdHRycy52YWx1ZTtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHN0YXRlUGFja2FnZSA9IHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogb3JpZ2luYWxTdGF0ZSxcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZUNvb2tpZTogc3RhdGVDb29raWVWYWx1ZSxcblx0XHRcdFx0XHRcdFx0XHRpc09BdXRoUHJveHk6IHRydWVcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZW5jcnlwdGVkUGFja2FnZSA9IGF3YWl0IHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdFx0XHRcdFx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlUGFja2FnZSlcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdG9hdXRoVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJzdGF0ZVwiLCBlbmNyeXB0ZWRQYWNrYWdlKTtcblx0XHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQucmV0dXJuZWQgPSB7XG5cdFx0XHRcdFx0XHRcdFx0Li4uc2lnbkluUmVzcG9uc2UsXG5cdFx0XHRcdFx0XHRcdFx0dXJsOiBvYXV0aFVSTC50b1N0cmluZygpXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBlbmNyeXB0IE9BdXRoIHByb3h5IHN0YXRlIHBhY2thZ2U6XCIsIGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRtYXRjaGVyKGNvbnRleHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiAhIShjb250ZXh0LnBhdGg/LnN0YXJ0c1dpdGgoXCIvY2FsbGJhY2tcIikgfHwgY29udGV4dC5wYXRoPy5zdGFydHNXaXRoKFwiL29hdXRoMi9jYWxsYmFja1wiKSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBoZWFkZXJzID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzO1xuXHRcdFx0XHRcdFx0Y29uc3QgbG9jYXRpb24gPSBoZWFkZXJzPy5nZXQoXCJsb2NhdGlvblwiKTtcblx0XHRcdFx0XHRcdGlmICghbG9jYXRpb24/LmluY2x1ZGVzKFwiL29hdXRoLXByb3h5LWNhbGxiYWNrP2NhbGxiYWNrVVJMXCIpIHx8ICFsb2NhdGlvbi5zdGFydHNXaXRoKFwiaHR0cFwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgcHJvZHVjdGlvbk9yaWdpbiA9IGdldE9yaWdpbihvcHRzPy5wcm9kdWN0aW9uVVJMIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMuYmFzZVVSTCB8fCBjdHguY29udGV4dC5iYXNlVVJMKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxvY2F0aW9uVVJMID0gbmV3IFVSTChsb2NhdGlvbik7XG5cdFx0XHRcdFx0XHRpZiAobG9jYXRpb25VUkwub3JpZ2luID09PSBwcm9kdWN0aW9uT3JpZ2luKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld0xvY2F0aW9uID0gbG9jYXRpb25VUkwuc2VhcmNoUGFyYW1zLmdldChcImNhbGxiYWNrVVJMXCIpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIW5ld0xvY2F0aW9uKSByZXR1cm47XG5cdFx0XHRcdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJsb2NhdGlvblwiLCBuZXdMb2NhdGlvbik7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IHNldENvb2tpZXMgPSBoZWFkZXJzPy5nZXQoXCJzZXQtY29va2llXCIpO1xuXHRcdFx0XHRcdFx0aWYgKCFzZXRDb29raWVzKSByZXR1cm47XG5cdFx0XHRcdFx0XHRjb25zdCBwYXlsb2FkID0ge1xuXHRcdFx0XHRcdFx0XHRjb29raWVzOiBzZXRDb29raWVzLFxuXHRcdFx0XHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjb25zdCBlbmNyeXB0ZWRDb29raWVzID0gYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRcdFx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRcdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjb25zdCBsb2NhdGlvbldpdGhDb29raWVzID0gYCR7bG9jYXRpb259JmNvb2tpZXM9JHtlbmNvZGVVUklDb21wb25lbnQoZW5jcnlwdGVkQ29va2llcyl9YDtcblx0XHRcdFx0XHRcdGN0eC5zZXRIZWFkZXIoXCJsb2NhdGlvblwiLCBsb2NhdGlvbldpdGhDb29raWVzKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gISEoY29udGV4dC5wYXRoPy5zdGFydHNXaXRoKFwiL2NhbGxiYWNrXCIpIHx8IGNvbnRleHQucGF0aD8uc3RhcnRzV2l0aChcIi9vYXV0aDIvY2FsbGJhY2tcIikpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGV4dFdpdGhTbmFwc2hvdCA9IGN0eC5jb250ZXh0O1xuXHRcdFx0XHRcdFx0Y29uc3Qgc25hcHNob3QgPSBjb250ZXh0V2l0aFNuYXBzaG90Ll9vYXV0aFByb3h5U25hcHNob3Q7XG5cdFx0XHRcdFx0XHRpZiAoc25hcHNob3QpIHtcblx0XHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5ID0gc25hcHNob3Quc3RvcmVTdGF0ZVN0cmF0ZWd5O1xuXHRcdFx0XHRcdFx0XHRjdHguY29udGV4dC5vYXV0aENvbmZpZy5za2lwU3RhdGVDb29raWVDaGVjayA9IHNuYXBzaG90LnNraXBTdGF0ZUNvb2tpZUNoZWNrO1xuXHRcdFx0XHRcdFx0XHRjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIgPSBzbmFwc2hvdC5pbnRlcm5hbEFkYXB0ZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnRleHRXaXRoU25hcHNob3QuX29hdXRoUHJveHlTbmFwc2hvdCA9IHZvaWQgMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9XG5cdFx0XHRdXG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvQXV0aFByb3h5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/utils.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oauth-proxy/utils.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkSkipProxy: () => (/* binding */ checkSkipProxy),\n/* harmony export */   resolveCurrentURL: () => (/* binding */ resolveCurrentURL),\n/* harmony export */   stripTrailingSlash: () => (/* binding */ stripTrailingSlash)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n//#region src/plugins/oauth-proxy/utils.ts\n/**\n* Strip trailing slashes from URL to prevent double slashes\n*/\nfunction stripTrailingSlash(url) {\n\tif (!url) return \"\";\n\treturn url.replace(/\\/+$/, \"\");\n}\n/**\n* Get base URL from vendor-specific environment variables\n*/\nfunction getVendorBaseURL() {\n\tconst vercel = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.VERCEL_URL ? `https://${_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.VERCEL_URL}` : void 0;\n\tconst netlify = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.NETLIFY_URL;\n\tconst render = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.RENDER_URL;\n\tconst aws = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.AWS_LAMBDA_FUNCTION_NAME;\n\tconst google = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.GOOGLE_CLOUD_FUNCTION_NAME;\n\tconst azure = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.AZURE_FUNCTION_NAME;\n\treturn vercel || netlify || render || aws || google || azure;\n}\n/**\n* Resolve the current URL from various sources\n*/\nfunction resolveCurrentURL(ctx, opts) {\n\treturn new URL(opts?.currentURL || ctx.request?.url || getVendorBaseURL() || ctx.context.baseURL);\n}\n/**\n* Check if the proxy should be skipped for this request\n*/\nfunction checkSkipProxy(ctx, opts) {\n\tif (ctx.request?.headers.get(\"x-skip-oauth-proxy\")) return true;\n\tconst productionURL = opts?.productionURL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.env.BETTER_AUTH_URL;\n\tif (!productionURL) return false;\n\tconst currentURL = ctx.request?.url || getVendorBaseURL();\n\tif (!currentURL) return false;\n\treturn (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(productionURL) === (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(currentURL);\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29hdXRoLXByb3h5L3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnRDtBQUNKOztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isc0RBQUcseUJBQXlCLHNEQUFHLFlBQVk7QUFDM0QsaUJBQWlCLHNEQUFHO0FBQ3BCLGdCQUFnQixzREFBRztBQUNuQixhQUFhLHNEQUFHO0FBQ2hCLGdCQUFnQixzREFBRztBQUNuQixlQUFlLHNEQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHNEQUFHO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQVMsb0JBQW9CLHlEQUFTO0FBQzlDOztBQUVBO0FBQ2lFO0FBQ2pFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcb2F1dGgtcHJveHlcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRPcmlnaW4gfSBmcm9tIFwiLi4vLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2F1dGgtcHJveHkvdXRpbHMudHNcbi8qKlxuKiBTdHJpcCB0cmFpbGluZyBzbGFzaGVzIGZyb20gVVJMIHRvIHByZXZlbnQgZG91YmxlIHNsYXNoZXNcbiovXG5mdW5jdGlvbiBzdHJpcFRyYWlsaW5nU2xhc2godXJsKSB7XG5cdGlmICghdXJsKSByZXR1cm4gXCJcIjtcblx0cmV0dXJuIHVybC5yZXBsYWNlKC9cXC8rJC8sIFwiXCIpO1xufVxuLyoqXG4qIEdldCBiYXNlIFVSTCBmcm9tIHZlbmRvci1zcGVjaWZpYyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiovXG5mdW5jdGlvbiBnZXRWZW5kb3JCYXNlVVJMKCkge1xuXHRjb25zdCB2ZXJjZWwgPSBlbnYuVkVSQ0VMX1VSTCA/IGBodHRwczovLyR7ZW52LlZFUkNFTF9VUkx9YCA6IHZvaWQgMDtcblx0Y29uc3QgbmV0bGlmeSA9IGVudi5ORVRMSUZZX1VSTDtcblx0Y29uc3QgcmVuZGVyID0gZW52LlJFTkRFUl9VUkw7XG5cdGNvbnN0IGF3cyA9IGVudi5BV1NfTEFNQkRBX0ZVTkNUSU9OX05BTUU7XG5cdGNvbnN0IGdvb2dsZSA9IGVudi5HT09HTEVfQ0xPVURfRlVOQ1RJT05fTkFNRTtcblx0Y29uc3QgYXp1cmUgPSBlbnYuQVpVUkVfRlVOQ1RJT05fTkFNRTtcblx0cmV0dXJuIHZlcmNlbCB8fCBuZXRsaWZ5IHx8IHJlbmRlciB8fCBhd3MgfHwgZ29vZ2xlIHx8IGF6dXJlO1xufVxuLyoqXG4qIFJlc29sdmUgdGhlIGN1cnJlbnQgVVJMIGZyb20gdmFyaW91cyBzb3VyY2VzXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZUN1cnJlbnRVUkwoY3R4LCBvcHRzKSB7XG5cdHJldHVybiBuZXcgVVJMKG9wdHM/LmN1cnJlbnRVUkwgfHwgY3R4LnJlcXVlc3Q/LnVybCB8fCBnZXRWZW5kb3JCYXNlVVJMKCkgfHwgY3R4LmNvbnRleHQuYmFzZVVSTCk7XG59XG4vKipcbiogQ2hlY2sgaWYgdGhlIHByb3h5IHNob3VsZCBiZSBza2lwcGVkIGZvciB0aGlzIHJlcXVlc3RcbiovXG5mdW5jdGlvbiBjaGVja1NraXBQcm94eShjdHgsIG9wdHMpIHtcblx0aWYgKGN0eC5yZXF1ZXN0Py5oZWFkZXJzLmdldChcIngtc2tpcC1vYXV0aC1wcm94eVwiKSkgcmV0dXJuIHRydWU7XG5cdGNvbnN0IHByb2R1Y3Rpb25VUkwgPSBvcHRzPy5wcm9kdWN0aW9uVVJMIHx8IGVudi5CRVRURVJfQVVUSF9VUkw7XG5cdGlmICghcHJvZHVjdGlvblVSTCkgcmV0dXJuIGZhbHNlO1xuXHRjb25zdCBjdXJyZW50VVJMID0gY3R4LnJlcXVlc3Q/LnVybCB8fCBnZXRWZW5kb3JCYXNlVVJMKCk7XG5cdGlmICghY3VycmVudFVSTCkgcmV0dXJuIGZhbHNlO1xuXHRyZXR1cm4gZ2V0T3JpZ2luKHByb2R1Y3Rpb25VUkwpID09PSBnZXRPcmlnaW4oY3VycmVudFVSTCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY2hlY2tTa2lwUHJveHksIHJlc29sdmVDdXJyZW50VVJMLCBzdHJpcFRyYWlsaW5nU2xhc2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oauth-proxy/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/authorize.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/authorize.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authorize: () => (/* binding */ authorize)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/prompt.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n\n\n//#region src/plugins/oidc-provider/authorize.ts\nfunction formatErrorURL(url, error, description) {\n\treturn `${url.includes(\"?\") ? \"&\" : \"?\"}error=${error}&error_description=${description}`;\n}\nfunction getErrorURL(ctx, error, description) {\n\treturn formatErrorURL(ctx.context.options.onAPIError?.errorURL || `${ctx.context.baseURL}/error`, error, description);\n}\nasync function authorize(ctx, options) {\n\tconst handleRedirect = (url) => {\n\t\tif (ctx.request?.headers.get(\"sec-fetch-mode\") === \"cors\") return ctx.json({\n\t\t\tredirect: true,\n\t\t\turl\n\t\t});\n\t\telse throw ctx.redirect(url);\n\t};\n\tconst opts = {\n\t\tcodeExpiresIn: 600,\n\t\tdefaultScope: \"openid\",\n\t\t...options,\n\t\tscopes: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\",\n\t\t\t...options?.scopes || []\n\t\t]\n\t};\n\tif (!ctx.request) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", {\n\t\terror_description: \"request not found\",\n\t\terror: \"invalid_request\"\n\t});\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst query$1 = ctx.query;\n\t\tif ((0,_utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_4__.parsePrompt)(query$1.prompt ?? \"\").has(\"none\") && query$1.redirect_uri) return handleRedirect(formatErrorURL(query$1.redirect_uri, \"login_required\", \"Authentication required but prompt is none\"));\n\t\t/**\n\t\t* If the user is not logged in, we need to redirect them to the\n\t\t* login page.\n\t\t*/\n\t\tawait ctx.setSignedCookie(\"oidc_login_prompt\", JSON.stringify(ctx.query), ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\tconst queryFromURL = ctx.request.url?.split(\"?\")[1];\n\t\treturn handleRedirect(`${options.loginPage}?${queryFromURL}`);\n\t}\n\tconst query = ctx.query;\n\tif (!query.client_id) {\n\t\tconst errorURL = getErrorURL(ctx, \"invalid_client\", \"client_id is required\");\n\t\tthrow ctx.redirect(errorURL);\n\t}\n\tif (!query.response_type) {\n\t\tconst errorURL = getErrorURL(ctx, \"invalid_request\", \"response_type is required\");\n\t\tthrow ctx.redirect(errorURL);\n\t}\n\tconst client = await (0,_index_mjs__WEBPACK_IMPORTED_MODULE_5__.getClient)(ctx.query.client_id, options.trustedClients || []);\n\tif (!client) {\n\t\tconst errorURL = getErrorURL(ctx, \"invalid_client\", \"client_id is required\");\n\t\tthrow ctx.redirect(errorURL);\n\t}\n\tconst redirectURI = client.redirectUrls.find((url) => url === ctx.query.redirect_uri);\n\tif (!redirectURI || !query.redirect_uri)\n /**\n\t* show UI error here warning the user that the redirect URI is invalid\n\t*/\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Invalid redirect URI\" });\n\tif (client.disabled) {\n\t\tconst errorURL = getErrorURL(ctx, \"client_disabled\", \"client is disabled\");\n\t\tthrow ctx.redirect(errorURL);\n\t}\n\tif (query.response_type !== \"code\") {\n\t\tconst errorURL = getErrorURL(ctx, \"unsupported_response_type\", \"unsupported response type\");\n\t\tthrow ctx.redirect(errorURL);\n\t}\n\tconst requestScope = query.scope?.split(\" \").filter((s) => s) || opts.defaultScope?.split(\" \") || [];\n\tconst invalidScopes = requestScope.filter((scope) => {\n\t\treturn !opts.scopes.includes(scope);\n\t});\n\tif (invalidScopes.length) return handleRedirect(formatErrorURL(query.redirect_uri, \"invalid_scope\", `The following scopes are invalid: ${invalidScopes.join(\", \")}`));\n\tif ((!query.code_challenge || !query.code_challenge_method) && options.requirePKCE) return handleRedirect(formatErrorURL(query.redirect_uri, \"invalid_request\", \"pkce is required\"));\n\tif (!query.code_challenge_method) query.code_challenge_method = \"plain\";\n\tif (![\"s256\", options.allowPlainCodeChallengeMethod ? \"plain\" : \"s256\"].includes(query.code_challenge_method?.toLowerCase() || \"\")) return handleRedirect(formatErrorURL(query.redirect_uri, \"invalid_request\", \"invalid code_challenge method\"));\n\tconst code = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32, \"a-z\", \"A-Z\", \"0-9\");\n\tconst codeExpiresInMs = opts.codeExpiresIn * 1e3;\n\tconst expiresAt = new Date(Date.now() + codeExpiresInMs);\n\tconst skipConsentForTrustedClient = client.skipConsent;\n\tconst hasAlreadyConsented = await ctx.context.adapter.findOne({\n\t\tmodel: \"oauthConsent\",\n\t\twhere: [{\n\t\t\tfield: \"clientId\",\n\t\t\tvalue: client.clientId\n\t\t}, {\n\t\t\tfield: \"userId\",\n\t\t\tvalue: session.user.id\n\t\t}]\n\t}).then((res) => {\n\t\tif (!res?.consentGiven) return false;\n\t\tconst consentedScopes = res.scopes ? res.scopes.split(\" \") : [];\n\t\treturn requestScope.every((scope) => consentedScopes.includes(scope));\n\t});\n\tconst promptSet = (0,_utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_4__.parsePrompt)(query.prompt ?? \"\");\n\tif (promptSet.has(\"none\")) {\n\t\tif (!skipConsentForTrustedClient && !hasAlreadyConsented) return handleRedirect(formatErrorURL(query.redirect_uri, \"consent_required\", \"Consent required but prompt is none\"));\n\t}\n\tlet requireLogin = promptSet.has(\"login\");\n\tif (query.max_age !== void 0) {\n\t\tconst maxAge = Number(query.max_age);\n\t\tif (Number.isInteger(maxAge) && maxAge >= 0) {\n\t\t\tif ((Date.now() - new Date(session.session.createdAt).getTime()) / 1e3 > maxAge) requireLogin = true;\n\t\t}\n\t}\n\tconst requireConsent = !skipConsentForTrustedClient && (!hasAlreadyConsented || promptSet.has(\"consent\"));\n\ttry {\n\t\t/**\n\t\t* Save the code in the database\n\t\t*/\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: JSON.stringify({\n\t\t\t\tclientId: client.clientId,\n\t\t\t\tredirectURI: query.redirect_uri,\n\t\t\t\tscope: requestScope,\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tauthTime: new Date(session.session.createdAt).getTime(),\n\t\t\t\trequireConsent,\n\t\t\t\tstate: requireConsent ? query.state : null,\n\t\t\t\tcodeChallenge: query.code_challenge,\n\t\t\t\tcodeChallengeMethod: query.code_challenge_method,\n\t\t\t\tnonce: query.nonce\n\t\t\t}),\n\t\t\tidentifier: code,\n\t\t\texpiresAt\n\t\t});\n\t} catch {\n\t\treturn handleRedirect(formatErrorURL(query.redirect_uri, \"server_error\", \"An error occurred while processing the request\"));\n\t}\n\tif (requireLogin) {\n\t\tawait ctx.setSignedCookie(\"oidc_login_prompt\", JSON.stringify(ctx.query), ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\tawait ctx.setSignedCookie(\"oidc_consent_prompt\", code, ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\treturn handleRedirect(`${options.loginPage}?${new URLSearchParams({\n\t\t\tclient_id: client.clientId,\n\t\t\tcode,\n\t\t\tstate: query.state\n\t\t}).toString()}`);\n\t}\n\tif (!requireConsent) {\n\t\tconst redirectURIWithCode = new URL(redirectURI);\n\t\tredirectURIWithCode.searchParams.set(\"code\", code);\n\t\tredirectURIWithCode.searchParams.set(\"state\", ctx.query.state);\n\t\treturn handleRedirect(redirectURIWithCode.toString());\n\t}\n\tif (options?.consentPage) {\n\t\tawait ctx.setSignedCookie(\"oidc_consent_prompt\", code, ctx.context.secret, {\n\t\t\tmaxAge: 600,\n\t\t\tpath: \"/\",\n\t\t\tsameSite: \"lax\"\n\t\t});\n\t\tconst urlParams = new URLSearchParams();\n\t\turlParams.set(\"consent_code\", code);\n\t\turlParams.set(\"client_id\", client.clientId);\n\t\turlParams.set(\"scope\", requestScope.join(\" \"));\n\t\treturn handleRedirect(`${options.consentPage}?${urlParams.toString()}`);\n\t}\n\tconst htmlFn = options?.getConsentHTML;\n\tif (!htmlFn) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"No consent page provided\" });\n\treturn new Response(htmlFn({\n\t\tscopes: requestScope,\n\t\tclientMetadata: client.metadata,\n\t\tclientIcon: client?.icon,\n\t\tclientId: client.clientId,\n\t\tclientName: client.name,\n\t\tcode\n\t}), { headers: { \"content-type\": \"text/html\" } });\n}\n\n//#endregion\n\n//# sourceMappingURL=authorize.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvYXV0aG9yaXplLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRDtBQUMvQjtBQUNpQztBQUNwQztBQUNvQjtBQUNUO0FBQ0Q7O0FBRXZDO0FBQ0E7QUFDQSxXQUFXLDhCQUE4QixRQUFRLE1BQU0scUJBQXFCLFlBQVk7QUFDeEY7QUFDQTtBQUNBLHNFQUFzRSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVE7QUFDckM7QUFDQTtBQUNBLEVBQUU7QUFDRix1QkFBdUIsMEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQSxNQUFNLDhEQUFXO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwyQkFBMkIsa0JBQWtCLEdBQUcsYUFBYTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlEQUFRLGtCQUFrQixpQ0FBaUM7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRiwwSUFBMEkseUJBQXlCO0FBQ25LO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0VBQW9CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLG1CQUFtQiw4REFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMkJBQTJCLGtCQUFrQixHQUFHO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLEdBQUcsYUFBYTtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CLEdBQUcscUJBQXFCO0FBQ3ZFO0FBQ0E7QUFDQSx3QkFBd0IsaURBQVEsNEJBQTRCLHFDQUFxQztBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsS0FBSyxXQUFXLCtCQUErQjtBQUNqRDs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9pZGMtcHJvdmlkZXJcXGF1dGhvcml6ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvbXB0IH0gZnJvbSBcIi4vdXRpbHMvcHJvbXB0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q2xpZW50IH0gZnJvbSBcIi4vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2lkYy1wcm92aWRlci9hdXRob3JpemUudHNcbmZ1bmN0aW9uIGZvcm1hdEVycm9yVVJMKHVybCwgZXJyb3IsIGRlc2NyaXB0aW9uKSB7XG5cdHJldHVybiBgJHt1cmwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn1lcnJvcj0ke2Vycm9yfSZlcnJvcl9kZXNjcmlwdGlvbj0ke2Rlc2NyaXB0aW9ufWA7XG59XG5mdW5jdGlvbiBnZXRFcnJvclVSTChjdHgsIGVycm9yLCBkZXNjcmlwdGlvbikge1xuXHRyZXR1cm4gZm9ybWF0RXJyb3JVUkwoY3R4LmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjdHguY29udGV4dC5iYXNlVVJMfS9lcnJvcmAsIGVycm9yLCBkZXNjcmlwdGlvbik7XG59XG5hc3luYyBmdW5jdGlvbiBhdXRob3JpemUoY3R4LCBvcHRpb25zKSB7XG5cdGNvbnN0IGhhbmRsZVJlZGlyZWN0ID0gKHVybCkgPT4ge1xuXHRcdGlmIChjdHgucmVxdWVzdD8uaGVhZGVycy5nZXQoXCJzZWMtZmV0Y2gtbW9kZVwiKSA9PT0gXCJjb3JzXCIpIHJldHVybiBjdHguanNvbih7XG5cdFx0XHRyZWRpcmVjdDogdHJ1ZSxcblx0XHRcdHVybFxuXHRcdH0pO1xuXHRcdGVsc2UgdGhyb3cgY3R4LnJlZGlyZWN0KHVybCk7XG5cdH07XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0Y29kZUV4cGlyZXNJbjogNjAwLFxuXHRcdGRlZmF1bHRTY29wZTogXCJvcGVuaWRcIixcblx0XHQuLi5vcHRpb25zLFxuXHRcdHNjb3BlczogW1xuXHRcdFx0XCJvcGVuaWRcIixcblx0XHRcdFwicHJvZmlsZVwiLFxuXHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XCJvZmZsaW5lX2FjY2Vzc1wiLFxuXHRcdFx0Li4ub3B0aW9ucz8uc2NvcGVzIHx8IFtdXG5cdFx0XVxuXHR9O1xuXHRpZiAoIWN0eC5yZXF1ZXN0KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcInJlcXVlc3Qgbm90IGZvdW5kXCIsXG5cdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0fSk7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHtcblx0XHRjb25zdCBxdWVyeSQxID0gY3R4LnF1ZXJ5O1xuXHRcdGlmIChwYXJzZVByb21wdChxdWVyeSQxLnByb21wdCA/PyBcIlwiKS5oYXMoXCJub25lXCIpICYmIHF1ZXJ5JDEucmVkaXJlY3RfdXJpKSByZXR1cm4gaGFuZGxlUmVkaXJlY3QoZm9ybWF0RXJyb3JVUkwocXVlcnkkMS5yZWRpcmVjdF91cmksIFwibG9naW5fcmVxdWlyZWRcIiwgXCJBdXRoZW50aWNhdGlvbiByZXF1aXJlZCBidXQgcHJvbXB0IGlzIG5vbmVcIikpO1xuXHRcdC8qKlxuXHRcdCogSWYgdGhlIHVzZXIgaXMgbm90IGxvZ2dlZCBpbiwgd2UgbmVlZCB0byByZWRpcmVjdCB0aGVtIHRvIHRoZVxuXHRcdCogbG9naW4gcGFnZS5cblx0XHQqL1xuXHRcdGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUoXCJvaWRjX2xvZ2luX3Byb21wdFwiLCBKU09OLnN0cmluZ2lmeShjdHgucXVlcnkpLCBjdHguY29udGV4dC5zZWNyZXQsIHtcblx0XHRcdG1heEFnZTogNjAwLFxuXHRcdFx0cGF0aDogXCIvXCIsXG5cdFx0XHRzYW1lU2l0ZTogXCJsYXhcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHF1ZXJ5RnJvbVVSTCA9IGN0eC5yZXF1ZXN0LnVybD8uc3BsaXQoXCI/XCIpWzFdO1xuXHRcdHJldHVybiBoYW5kbGVSZWRpcmVjdChgJHtvcHRpb25zLmxvZ2luUGFnZX0/JHtxdWVyeUZyb21VUkx9YCk7XG5cdH1cblx0Y29uc3QgcXVlcnkgPSBjdHgucXVlcnk7XG5cdGlmICghcXVlcnkuY2xpZW50X2lkKSB7XG5cdFx0Y29uc3QgZXJyb3JVUkwgPSBnZXRFcnJvclVSTChjdHgsIFwiaW52YWxpZF9jbGllbnRcIiwgXCJjbGllbnRfaWQgaXMgcmVxdWlyZWRcIik7XG5cdFx0dGhyb3cgY3R4LnJlZGlyZWN0KGVycm9yVVJMKTtcblx0fVxuXHRpZiAoIXF1ZXJ5LnJlc3BvbnNlX3R5cGUpIHtcblx0XHRjb25zdCBlcnJvclVSTCA9IGdldEVycm9yVVJMKGN0eCwgXCJpbnZhbGlkX3JlcXVlc3RcIiwgXCJyZXNwb25zZV90eXBlIGlzIHJlcXVpcmVkXCIpO1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdChlcnJvclVSTCk7XG5cdH1cblx0Y29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0Q2xpZW50KGN0eC5xdWVyeS5jbGllbnRfaWQsIG9wdGlvbnMudHJ1c3RlZENsaWVudHMgfHwgW10pO1xuXHRpZiAoIWNsaWVudCkge1xuXHRcdGNvbnN0IGVycm9yVVJMID0gZ2V0RXJyb3JVUkwoY3R4LCBcImludmFsaWRfY2xpZW50XCIsIFwiY2xpZW50X2lkIGlzIHJlcXVpcmVkXCIpO1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdChlcnJvclVSTCk7XG5cdH1cblx0Y29uc3QgcmVkaXJlY3RVUkkgPSBjbGllbnQucmVkaXJlY3RVcmxzLmZpbmQoKHVybCkgPT4gdXJsID09PSBjdHgucXVlcnkucmVkaXJlY3RfdXJpKTtcblx0aWYgKCFyZWRpcmVjdFVSSSB8fCAhcXVlcnkucmVkaXJlY3RfdXJpKVxuIC8qKlxuXHQqIHNob3cgVUkgZXJyb3IgaGVyZSB3YXJuaW5nIHRoZSB1c2VyIHRoYXQgdGhlIHJlZGlyZWN0IFVSSSBpcyBpbnZhbGlkXG5cdCovXG5cdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJJbnZhbGlkIHJlZGlyZWN0IFVSSVwiIH0pO1xuXHRpZiAoY2xpZW50LmRpc2FibGVkKSB7XG5cdFx0Y29uc3QgZXJyb3JVUkwgPSBnZXRFcnJvclVSTChjdHgsIFwiY2xpZW50X2Rpc2FibGVkXCIsIFwiY2xpZW50IGlzIGRpc2FibGVkXCIpO1xuXHRcdHRocm93IGN0eC5yZWRpcmVjdChlcnJvclVSTCk7XG5cdH1cblx0aWYgKHF1ZXJ5LnJlc3BvbnNlX3R5cGUgIT09IFwiY29kZVwiKSB7XG5cdFx0Y29uc3QgZXJyb3JVUkwgPSBnZXRFcnJvclVSTChjdHgsIFwidW5zdXBwb3J0ZWRfcmVzcG9uc2VfdHlwZVwiLCBcInVuc3VwcG9ydGVkIHJlc3BvbnNlIHR5cGVcIik7XG5cdFx0dGhyb3cgY3R4LnJlZGlyZWN0KGVycm9yVVJMKTtcblx0fVxuXHRjb25zdCByZXF1ZXN0U2NvcGUgPSBxdWVyeS5zY29wZT8uc3BsaXQoXCIgXCIpLmZpbHRlcigocykgPT4gcykgfHwgb3B0cy5kZWZhdWx0U2NvcGU/LnNwbGl0KFwiIFwiKSB8fCBbXTtcblx0Y29uc3QgaW52YWxpZFNjb3BlcyA9IHJlcXVlc3RTY29wZS5maWx0ZXIoKHNjb3BlKSA9PiB7XG5cdFx0cmV0dXJuICFvcHRzLnNjb3Blcy5pbmNsdWRlcyhzY29wZSk7XG5cdH0pO1xuXHRpZiAoaW52YWxpZFNjb3Blcy5sZW5ndGgpIHJldHVybiBoYW5kbGVSZWRpcmVjdChmb3JtYXRFcnJvclVSTChxdWVyeS5yZWRpcmVjdF91cmksIFwiaW52YWxpZF9zY29wZVwiLCBgVGhlIGZvbGxvd2luZyBzY29wZXMgYXJlIGludmFsaWQ6ICR7aW52YWxpZFNjb3Blcy5qb2luKFwiLCBcIil9YCkpO1xuXHRpZiAoKCFxdWVyeS5jb2RlX2NoYWxsZW5nZSB8fCAhcXVlcnkuY29kZV9jaGFsbGVuZ2VfbWV0aG9kKSAmJiBvcHRpb25zLnJlcXVpcmVQS0NFKSByZXR1cm4gaGFuZGxlUmVkaXJlY3QoZm9ybWF0RXJyb3JVUkwocXVlcnkucmVkaXJlY3RfdXJpLCBcImludmFsaWRfcmVxdWVzdFwiLCBcInBrY2UgaXMgcmVxdWlyZWRcIikpO1xuXHRpZiAoIXF1ZXJ5LmNvZGVfY2hhbGxlbmdlX21ldGhvZCkgcXVlcnkuY29kZV9jaGFsbGVuZ2VfbWV0aG9kID0gXCJwbGFpblwiO1xuXHRpZiAoIVtcInMyNTZcIiwgb3B0aW9ucy5hbGxvd1BsYWluQ29kZUNoYWxsZW5nZU1ldGhvZCA/IFwicGxhaW5cIiA6IFwiczI1NlwiXS5pbmNsdWRlcyhxdWVyeS5jb2RlX2NoYWxsZW5nZV9tZXRob2Q/LnRvTG93ZXJDYXNlKCkgfHwgXCJcIikpIHJldHVybiBoYW5kbGVSZWRpcmVjdChmb3JtYXRFcnJvclVSTChxdWVyeS5yZWRpcmVjdF91cmksIFwiaW52YWxpZF9yZXF1ZXN0XCIsIFwiaW52YWxpZCBjb2RlX2NoYWxsZW5nZSBtZXRob2RcIikpO1xuXHRjb25zdCBjb2RlID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIsIFwiMC05XCIpO1xuXHRjb25zdCBjb2RlRXhwaXJlc0luTXMgPSBvcHRzLmNvZGVFeHBpcmVzSW4gKiAxZTM7XG5cdGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBjb2RlRXhwaXJlc0luTXMpO1xuXHRjb25zdCBza2lwQ29uc2VudEZvclRydXN0ZWRDbGllbnQgPSBjbGllbnQuc2tpcENvbnNlbnQ7XG5cdGNvbnN0IGhhc0FscmVhZHlDb25zZW50ZWQgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdG1vZGVsOiBcIm9hdXRoQ29uc2VudFwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwiY2xpZW50SWRcIixcblx0XHRcdHZhbHVlOiBjbGllbnQuY2xpZW50SWRcblx0XHR9LCB7XG5cdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdHZhbHVlOiBzZXNzaW9uLnVzZXIuaWRcblx0XHR9XVxuXHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRpZiAoIXJlcz8uY29uc2VudEdpdmVuKSByZXR1cm4gZmFsc2U7XG5cdFx0Y29uc3QgY29uc2VudGVkU2NvcGVzID0gcmVzLnNjb3BlcyA/IHJlcy5zY29wZXMuc3BsaXQoXCIgXCIpIDogW107XG5cdFx0cmV0dXJuIHJlcXVlc3RTY29wZS5ldmVyeSgoc2NvcGUpID0+IGNvbnNlbnRlZFNjb3Blcy5pbmNsdWRlcyhzY29wZSkpO1xuXHR9KTtcblx0Y29uc3QgcHJvbXB0U2V0ID0gcGFyc2VQcm9tcHQocXVlcnkucHJvbXB0ID8/IFwiXCIpO1xuXHRpZiAocHJvbXB0U2V0LmhhcyhcIm5vbmVcIikpIHtcblx0XHRpZiAoIXNraXBDb25zZW50Rm9yVHJ1c3RlZENsaWVudCAmJiAhaGFzQWxyZWFkeUNvbnNlbnRlZCkgcmV0dXJuIGhhbmRsZVJlZGlyZWN0KGZvcm1hdEVycm9yVVJMKHF1ZXJ5LnJlZGlyZWN0X3VyaSwgXCJjb25zZW50X3JlcXVpcmVkXCIsIFwiQ29uc2VudCByZXF1aXJlZCBidXQgcHJvbXB0IGlzIG5vbmVcIikpO1xuXHR9XG5cdGxldCByZXF1aXJlTG9naW4gPSBwcm9tcHRTZXQuaGFzKFwibG9naW5cIik7XG5cdGlmIChxdWVyeS5tYXhfYWdlICE9PSB2b2lkIDApIHtcblx0XHRjb25zdCBtYXhBZ2UgPSBOdW1iZXIocXVlcnkubWF4X2FnZSk7XG5cdFx0aWYgKE51bWJlci5pc0ludGVnZXIobWF4QWdlKSAmJiBtYXhBZ2UgPj0gMCkge1xuXHRcdFx0aWYgKChEYXRlLm5vdygpIC0gbmV3IERhdGUoc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpKSAvIDFlMyA+IG1heEFnZSkgcmVxdWlyZUxvZ2luID0gdHJ1ZTtcblx0XHR9XG5cdH1cblx0Y29uc3QgcmVxdWlyZUNvbnNlbnQgPSAhc2tpcENvbnNlbnRGb3JUcnVzdGVkQ2xpZW50ICYmICghaGFzQWxyZWFkeUNvbnNlbnRlZCB8fCBwcm9tcHRTZXQuaGFzKFwiY29uc2VudFwiKSk7XG5cdHRyeSB7XG5cdFx0LyoqXG5cdFx0KiBTYXZlIHRoZSBjb2RlIGluIHRoZSBkYXRhYmFzZVxuXHRcdCovXG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdGNsaWVudElkOiBjbGllbnQuY2xpZW50SWQsXG5cdFx0XHRcdHJlZGlyZWN0VVJJOiBxdWVyeS5yZWRpcmVjdF91cmksXG5cdFx0XHRcdHNjb3BlOiByZXF1ZXN0U2NvcGUsXG5cdFx0XHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdFx0XHRhdXRoVGltZTogbmV3IERhdGUoc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpLFxuXHRcdFx0XHRyZXF1aXJlQ29uc2VudCxcblx0XHRcdFx0c3RhdGU6IHJlcXVpcmVDb25zZW50ID8gcXVlcnkuc3RhdGUgOiBudWxsLFxuXHRcdFx0XHRjb2RlQ2hhbGxlbmdlOiBxdWVyeS5jb2RlX2NoYWxsZW5nZSxcblx0XHRcdFx0Y29kZUNoYWxsZW5nZU1ldGhvZDogcXVlcnkuY29kZV9jaGFsbGVuZ2VfbWV0aG9kLFxuXHRcdFx0XHRub25jZTogcXVlcnkubm9uY2Vcblx0XHRcdH0pLFxuXHRcdFx0aWRlbnRpZmllcjogY29kZSxcblx0XHRcdGV4cGlyZXNBdFxuXHRcdH0pO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gaGFuZGxlUmVkaXJlY3QoZm9ybWF0RXJyb3JVUkwocXVlcnkucmVkaXJlY3RfdXJpLCBcInNlcnZlcl9lcnJvclwiLCBcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIHJlcXVlc3RcIikpO1xuXHR9XG5cdGlmIChyZXF1aXJlTG9naW4pIHtcblx0XHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKFwib2lkY19sb2dpbl9wcm9tcHRcIiwgSlNPTi5zdHJpbmdpZnkoY3R4LnF1ZXJ5KSwgY3R4LmNvbnRleHQuc2VjcmV0LCB7XG5cdFx0XHRtYXhBZ2U6IDYwMCxcblx0XHRcdHBhdGg6IFwiL1wiLFxuXHRcdFx0c2FtZVNpdGU6IFwibGF4XCJcblx0XHR9KTtcblx0XHRhd2FpdCBjdHguc2V0U2lnbmVkQ29va2llKFwib2lkY19jb25zZW50X3Byb21wdFwiLCBjb2RlLCBjdHguY29udGV4dC5zZWNyZXQsIHtcblx0XHRcdG1heEFnZTogNjAwLFxuXHRcdFx0cGF0aDogXCIvXCIsXG5cdFx0XHRzYW1lU2l0ZTogXCJsYXhcIlxuXHRcdH0pO1xuXHRcdHJldHVybiBoYW5kbGVSZWRpcmVjdChgJHtvcHRpb25zLmxvZ2luUGFnZX0/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKHtcblx0XHRcdGNsaWVudF9pZDogY2xpZW50LmNsaWVudElkLFxuXHRcdFx0Y29kZSxcblx0XHRcdHN0YXRlOiBxdWVyeS5zdGF0ZVxuXHRcdH0pLnRvU3RyaW5nKCl9YCk7XG5cdH1cblx0aWYgKCFyZXF1aXJlQ29uc2VudCkge1xuXHRcdGNvbnN0IHJlZGlyZWN0VVJJV2l0aENvZGUgPSBuZXcgVVJMKHJlZGlyZWN0VVJJKTtcblx0XHRyZWRpcmVjdFVSSVdpdGhDb2RlLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlXCIsIGNvZGUpO1xuXHRcdHJlZGlyZWN0VVJJV2l0aENvZGUuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIGN0eC5xdWVyeS5zdGF0ZSk7XG5cdFx0cmV0dXJuIGhhbmRsZVJlZGlyZWN0KHJlZGlyZWN0VVJJV2l0aENvZGUudG9TdHJpbmcoKSk7XG5cdH1cblx0aWYgKG9wdGlvbnM/LmNvbnNlbnRQYWdlKSB7XG5cdFx0YXdhaXQgY3R4LnNldFNpZ25lZENvb2tpZShcIm9pZGNfY29uc2VudF9wcm9tcHRcIiwgY29kZSwgY3R4LmNvbnRleHQuc2VjcmV0LCB7XG5cdFx0XHRtYXhBZ2U6IDYwMCxcblx0XHRcdHBhdGg6IFwiL1wiLFxuXHRcdFx0c2FtZVNpdGU6IFwibGF4XCJcblx0XHR9KTtcblx0XHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdFx0dXJsUGFyYW1zLnNldChcImNvbnNlbnRfY29kZVwiLCBjb2RlKTtcblx0XHR1cmxQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIGNsaWVudC5jbGllbnRJZCk7XG5cdFx0dXJsUGFyYW1zLnNldChcInNjb3BlXCIsIHJlcXVlc3RTY29wZS5qb2luKFwiIFwiKSk7XG5cdFx0cmV0dXJuIGhhbmRsZVJlZGlyZWN0KGAke29wdGlvbnMuY29uc2VudFBhZ2V9PyR7dXJsUGFyYW1zLnRvU3RyaW5nKCl9YCk7XG5cdH1cblx0Y29uc3QgaHRtbEZuID0gb3B0aW9ucz8uZ2V0Q29uc2VudEhUTUw7XG5cdGlmICghaHRtbEZuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIk5vIGNvbnNlbnQgcGFnZSBwcm92aWRlZFwiIH0pO1xuXHRyZXR1cm4gbmV3IFJlc3BvbnNlKGh0bWxGbih7XG5cdFx0c2NvcGVzOiByZXF1ZXN0U2NvcGUsXG5cdFx0Y2xpZW50TWV0YWRhdGE6IGNsaWVudC5tZXRhZGF0YSxcblx0XHRjbGllbnRJY29uOiBjbGllbnQ/Lmljb24sXG5cdFx0Y2xpZW50SWQ6IGNsaWVudC5jbGllbnRJZCxcblx0XHRjbGllbnROYW1lOiBjbGllbnQubmFtZSxcblx0XHRjb2RlXG5cdH0pLCB7IGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJ0ZXh0L2h0bWxcIiB9IH0pO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGF1dGhvcml6ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXV0aG9yaXplLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/authorize.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oidcClient: () => (/* binding */ oidcClient)\n/* harmony export */ });\n//#region src/plugins/oidc-provider/client.ts\nconst oidcClient = () => {\n\treturn {\n\t\tid: \"oidc-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvaWRjLXByb3ZpZGVyXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vaWRjLXByb3ZpZGVyL2NsaWVudC50c1xuY29uc3Qgb2lkY0NsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvaWRjLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb2lkY0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/error.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/error.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InvalidRequest: () => (/* binding */ InvalidRequest)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/plugins/oidc-provider/error.ts\nvar OIDCProviderError = class extends better_call__WEBPACK_IMPORTED_MODULE_0__.APIError {};\nvar InvalidRequest = class extends OIDCProviderError {\n\tconstructor(error_description, error_detail) {\n\t\tsuper(\"BAD_REQUEST\", {\n\t\t\tmessage: \"invalid_request\",\n\t\t\terror_description,\n\t\t\terror_detail\n\t\t});\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=error.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvZXJyb3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDOztBQUV2QztBQUNBLHNDQUFzQyxpREFBUTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9pZGMtcHJvdmlkZXJcXGVycm9yLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2lkYy1wcm92aWRlci9lcnJvci50c1xudmFyIE9JRENQcm92aWRlckVycm9yID0gY2xhc3MgZXh0ZW5kcyBBUElFcnJvciB7fTtcbnZhciBJbnZhbGlkUmVxdWVzdCA9IGNsYXNzIGV4dGVuZHMgT0lEQ1Byb3ZpZGVyRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihlcnJvcl9kZXNjcmlwdGlvbiwgZXJyb3JfZGV0YWlsKSB7XG5cdFx0c3VwZXIoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdFx0ZXJyb3JfZGVzY3JpcHRpb24sXG5cdFx0XHRlcnJvcl9kZXRhaWxcblx0XHR9KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBJbnZhbGlkUmVxdWVzdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/error.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClient: () => (/* binding */ getClient),\n/* harmony export */   getMetadata: () => (/* binding */ getMetadata),\n/* harmony export */   oidcProvider: () => (/* binding */ oidcProvider)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _jwt_sign_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../jwt/sign.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/sign.mjs\");\n/* harmony import */ var _jwt_verify_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../jwt/verify.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/verify.mjs\");\n/* harmony import */ var _jwt_index_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../jwt/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/jwt/index.mjs\");\n/* harmony import */ var _utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./utils/prompt.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs\");\n/* harmony import */ var _authorize_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./authorize.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/authorize.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/schema.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/oidc-provider/index.ts\nconst getJwtPlugin = (ctx) => {\n\treturn ctx.context.getPlugin(\"jwt\");\n};\n/**\n* Get a client by ID, checking trusted clients first, then database\n*/\nasync function getClient(clientId, trustedClients = []) {\n\tconst { context: { adapter } } = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_17__.getCurrentAuthContext)();\n\tconst trustedClient = trustedClients.find((client) => client.clientId === clientId);\n\tif (trustedClient) return trustedClient;\n\treturn adapter.findOne({\n\t\tmodel: \"oauthApplication\",\n\t\twhere: [{\n\t\t\tfield: \"clientId\",\n\t\t\tvalue: clientId\n\t\t}]\n\t}).then((res) => {\n\t\tif (!res) return null;\n\t\treturn {\n\t\t\tclientId: res.clientId,\n\t\t\tclientSecret: res.clientSecret,\n\t\t\ttype: res.type,\n\t\t\tname: res.name,\n\t\t\ticon: res.icon,\n\t\t\tdisabled: res.disabled,\n\t\t\tredirectUrls: (res.redirectUrls ?? \"\").split(\",\"),\n\t\t\tmetadata: res.metadata ? JSON.parse(res.metadata) : {}\n\t\t};\n\t});\n}\nconst getMetadata = (ctx, options) => {\n\tconst jwtPlugin = getJwtPlugin(ctx);\n\tconst issuer = jwtPlugin && jwtPlugin.options?.jwt && jwtPlugin.options.jwt.issuer ? jwtPlugin.options.jwt.issuer : ctx.context.options.baseURL;\n\tconst baseURL = ctx.context.baseURL;\n\tconst supportedAlgs = options?.useJWTPlugin ? [\n\t\t\"RS256\",\n\t\t\"EdDSA\",\n\t\t\"none\"\n\t] : [\"HS256\", \"none\"];\n\treturn {\n\t\tissuer,\n\t\tauthorization_endpoint: `${baseURL}/oauth2/authorize`,\n\t\ttoken_endpoint: `${baseURL}/oauth2/token`,\n\t\tuserinfo_endpoint: `${baseURL}/oauth2/userinfo`,\n\t\tjwks_uri: `${baseURL}/jwks`,\n\t\tregistration_endpoint: `${baseURL}/oauth2/register`,\n\t\tend_session_endpoint: `${baseURL}/oauth2/endsession`,\n\t\tscopes_supported: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\"\n\t\t],\n\t\tresponse_types_supported: [\"code\"],\n\t\tresponse_modes_supported: [\"query\"],\n\t\tgrant_types_supported: [\"authorization_code\", \"refresh_token\"],\n\t\tacr_values_supported: [\"urn:mace:incommon:iap:silver\", \"urn:mace:incommon:iap:bronze\"],\n\t\tsubject_types_supported: [\"public\"],\n\t\tid_token_signing_alg_values_supported: supportedAlgs,\n\t\ttoken_endpoint_auth_methods_supported: [\n\t\t\t\"client_secret_basic\",\n\t\t\t\"client_secret_post\",\n\t\t\t\"none\"\n\t\t],\n\t\tcode_challenge_methods_supported: [\"S256\"],\n\t\tclaims_supported: [\n\t\t\t\"sub\",\n\t\t\t\"iss\",\n\t\t\t\"aud\",\n\t\t\t\"exp\",\n\t\t\t\"nbf\",\n\t\t\t\"iat\",\n\t\t\t\"jti\",\n\t\t\t\"email\",\n\t\t\t\"email_verified\",\n\t\t\t\"name\"\n\t\t],\n\t\t...options?.metadata\n\t};\n};\nconst oAuthConsentBodySchema = zod__WEBPACK_IMPORTED_MODULE_21__.object({\n\taccept: zod__WEBPACK_IMPORTED_MODULE_21__.boolean(),\n\tconsent_code: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional().nullish()\n});\nconst oAuth2TokenBodySchema = zod__WEBPACK_IMPORTED_MODULE_21__.record(zod__WEBPACK_IMPORTED_MODULE_21__.any(), zod__WEBPACK_IMPORTED_MODULE_21__.any());\nconst registerOAuthApplicationBodySchema = zod__WEBPACK_IMPORTED_MODULE_21__.object({\n\tredirect_uris: zod__WEBPACK_IMPORTED_MODULE_21__.array(zod__WEBPACK_IMPORTED_MODULE_21__.string()).meta({ description: \"A list of redirect URIs. Eg: [\\\"https://client.example.com/callback\\\"]\" }),\n\ttoken_endpoint_auth_method: zod__WEBPACK_IMPORTED_MODULE_21__[\"enum\"]([\n\t\t\"none\",\n\t\t\"client_secret_basic\",\n\t\t\"client_secret_post\"\n\t]).meta({ description: \"The authentication method for the token endpoint. Eg: \\\"client_secret_basic\\\"\" }).default(\"client_secret_basic\").optional(),\n\tgrant_types: zod__WEBPACK_IMPORTED_MODULE_21__.array(zod__WEBPACK_IMPORTED_MODULE_21__[\"enum\"]([\n\t\t\"authorization_code\",\n\t\t\"implicit\",\n\t\t\"password\",\n\t\t\"client_credentials\",\n\t\t\"refresh_token\",\n\t\t\"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n\t\t\"urn:ietf:params:oauth:grant-type:saml2-bearer\"\n\t])).meta({ description: \"The grant types supported by the application. Eg: [\\\"authorization_code\\\"]\" }).default([\"authorization_code\"]).optional(),\n\tresponse_types: zod__WEBPACK_IMPORTED_MODULE_21__.array(zod__WEBPACK_IMPORTED_MODULE_21__[\"enum\"]([\"code\", \"token\"])).meta({ description: \"The response types supported by the application. Eg: [\\\"code\\\"]\" }).default([\"code\"]).optional(),\n\tclient_name: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The name of the application. Eg: \\\"My App\\\"\" }).optional(),\n\tclient_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The URI of the application. Eg: \\\"https://client.example.com\\\"\" }).optional(),\n\tlogo_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The URI of the application logo. Eg: \\\"https://client.example.com/logo.png\\\"\" }).optional(),\n\tscope: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The scopes supported by the application. Separated by spaces. Eg: \\\"profile email\\\"\" }).optional(),\n\tcontacts: zod__WEBPACK_IMPORTED_MODULE_21__.array(zod__WEBPACK_IMPORTED_MODULE_21__.string()).meta({ description: \"The contact information for the application. Eg: [\\\"admin@example.com\\\"]\" }).optional(),\n\ttos_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The URI of the application terms of service. Eg: \\\"https://client.example.com/tos\\\"\" }).optional(),\n\tpolicy_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The URI of the application privacy policy. Eg: \\\"https://client.example.com/policy\\\"\" }).optional(),\n\tjwks_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The URI of the application JWKS. Eg: \\\"https://client.example.com/jwks\\\"\" }).optional(),\n\tjwks: zod__WEBPACK_IMPORTED_MODULE_21__.record(zod__WEBPACK_IMPORTED_MODULE_21__.any(), zod__WEBPACK_IMPORTED_MODULE_21__.any()).meta({ description: \"The JWKS of the application. Eg: {\\\"keys\\\": [{\\\"kty\\\": \\\"RSA\\\", \\\"alg\\\": \\\"RS256\\\", \\\"use\\\": \\\"sig\\\", \\\"n\\\": \\\"...\\\", \\\"e\\\": \\\"...\\\"}]}\" }).optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_21__.record(zod__WEBPACK_IMPORTED_MODULE_21__.any(), zod__WEBPACK_IMPORTED_MODULE_21__.any()).meta({ description: \"The metadata of the application. Eg: {\\\"key\\\": \\\"value\\\"}\" }).optional(),\n\tsoftware_id: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The software ID of the application. Eg: \\\"my-software\\\"\" }).optional(),\n\tsoftware_version: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The software version of the application. Eg: \\\"1.0.0\\\"\" }).optional(),\n\tsoftware_statement: zod__WEBPACK_IMPORTED_MODULE_21__.string().meta({ description: \"The software statement of the application.\" }).optional()\n});\nconst DEFAULT_CODE_EXPIRES_IN = 600;\nconst DEFAULT_ACCESS_TOKEN_EXPIRES_IN = 3600;\nconst DEFAULT_REFRESH_TOKEN_EXPIRES_IN = 604800;\n/**\n* OpenID Connect (OIDC) plugin for Better Auth. This plugin implements the\n* authorization code flow and the token exchange flow. It also implements the\n* userinfo endpoint.\n*\n* @param options - The options for the OIDC plugin.\n* @returns A Better Auth plugin.\n*/\nconst oidcProvider = (options) => {\n\tconst modelName = {\n\t\toauthClient: \"oauthApplication\",\n\t\toauthAccessToken: \"oauthAccessToken\",\n\t\toauthConsent: \"oauthConsent\"\n\t};\n\tconst opts = {\n\t\tcodeExpiresIn: DEFAULT_CODE_EXPIRES_IN,\n\t\tdefaultScope: \"openid\",\n\t\taccessTokenExpiresIn: DEFAULT_ACCESS_TOKEN_EXPIRES_IN,\n\t\trefreshTokenExpiresIn: DEFAULT_REFRESH_TOKEN_EXPIRES_IN,\n\t\tallowPlainCodeChallengeMethod: true,\n\t\tstoreClientSecret: \"plain\",\n\t\t...options,\n\t\tscopes: [\n\t\t\t\"openid\",\n\t\t\t\"profile\",\n\t\t\t\"email\",\n\t\t\t\"offline_access\",\n\t\t\t...options?.scopes || []\n\t\t]\n\t};\n\tconst trustedClients = options.trustedClients || [];\n\t/**\n\t* Store client secret according to the configured storage method\n\t*/\n\tasync function storeClientSecret(ctx, clientSecret) {\n\t\tif (opts.storeClientSecret === \"encrypted\") return await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricEncrypt)({\n\t\t\tkey: ctx.context.secret,\n\t\t\tdata: clientSecret\n\t\t});\n\t\tif (opts.storeClientSecret === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_16__.defaultClientSecretHasher)(clientSecret);\n\t\tif (typeof opts.storeClientSecret === \"object\" && \"hash\" in opts.storeClientSecret) return await opts.storeClientSecret.hash(clientSecret);\n\t\tif (typeof opts.storeClientSecret === \"object\" && \"encrypt\" in opts.storeClientSecret) return await opts.storeClientSecret.encrypt(clientSecret);\n\t\treturn clientSecret;\n\t}\n\t/**\n\t* Verify stored client secret against provided client secret\n\t*/\n\tasync function verifyStoredClientSecret(ctx, storedClientSecret, clientSecret) {\n\t\tif (opts.storeClientSecret === \"encrypted\") return await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecrypt)({\n\t\t\tkey: ctx.context.secret,\n\t\t\tdata: storedClientSecret\n\t\t}) === clientSecret;\n\t\tif (opts.storeClientSecret === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_16__.defaultClientSecretHasher)(clientSecret) === storedClientSecret;\n\t\tif (typeof opts.storeClientSecret === \"object\" && \"hash\" in opts.storeClientSecret) return await opts.storeClientSecret.hash(clientSecret) === storedClientSecret;\n\t\tif (typeof opts.storeClientSecret === \"object\" && \"decrypt\" in opts.storeClientSecret) return await opts.storeClientSecret.decrypt(storedClientSecret) === clientSecret;\n\t\treturn clientSecret === storedClientSecret;\n\t}\n\treturn {\n\t\tid: \"oidc\",\n\t\thooks: { after: [{\n\t\t\tmatcher() {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst loginPromptCookie = await ctx.getSignedCookie(\"oidc_login_prompt\", ctx.context.secret);\n\t\t\t\tconst cookieName = ctx.context.authCookies.sessionToken.name;\n\t\t\t\tconst parsedSetCookieHeader = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_4__.parseSetCookieHeader)(ctx.context.responseHeaders?.get(\"set-cookie\") || \"\");\n\t\t\t\tconst hasSessionToken = parsedSetCookieHeader.has(cookieName);\n\t\t\t\tif (!loginPromptCookie || !hasSessionToken) return;\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.expireCookie)(ctx, {\n\t\t\t\t\tname: \"oidc_login_prompt\",\n\t\t\t\t\tattributes: { path: \"/\" }\n\t\t\t\t});\n\t\t\t\tconst sessionToken = (parsedSetCookieHeader.get(cookieName)?.value)?.split(\".\")[0];\n\t\t\t\tif (!sessionToken) return;\n\t\t\t\tconst session = await ctx.context.internalAdapter.findSession(sessionToken) || ctx.context.newSession;\n\t\t\t\tif (!session) return;\n\t\t\t\tctx.query = JSON.parse(loginPromptCookie);\n\t\t\t\tconst promptSet = (0,_utils_prompt_mjs__WEBPACK_IMPORTED_MODULE_13__.parsePrompt)(String(ctx.query?.prompt));\n\t\t\t\tif (promptSet.has(\"login\")) {\n\t\t\t\t\tconst newPromptSet = new Set(promptSet);\n\t\t\t\t\tnewPromptSet.delete(\"login\");\n\t\t\t\t\tctx.query = {\n\t\t\t\t\t\t...ctx.query,\n\t\t\t\t\t\tprompt: Array.from(newPromptSet).join(\" \")\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tctx.context.session = session;\n\t\t\t\treturn await (0,_authorize_mjs__WEBPACK_IMPORTED_MODULE_14__.authorize)(ctx, opts);\n\t\t\t})\n\t\t}] },\n\t\tendpoints: {\n\t\t\tgetOpenIdConfig: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/.well-known/openid-configuration\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\toperationId: \"getOpenIdConfig\",\n\t\t\t\tmetadata: _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_7__.HIDE_METADATA\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst metadata = getMetadata(ctx, options);\n\t\t\t\treturn ctx.json(metadata);\n\t\t\t}),\n\t\t\toAuth2authorize: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/authorize\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\toperationId: \"oauth2Authorize\",\n\t\t\t\tquery: zod__WEBPACK_IMPORTED_MODULE_21__.record(zod__WEBPACK_IMPORTED_MODULE_21__.string(), zod__WEBPACK_IMPORTED_MODULE_21__.any()),\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Authorize an OAuth2 request\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Authorization response generated successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\tdescription: \"Authorization response, contents depend on the authorize function implementation\"\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\treturn (0,_authorize_mjs__WEBPACK_IMPORTED_MODULE_14__.authorize)(ctx, opts);\n\t\t\t}),\n\t\t\toAuthConsent: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/consent\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\toperationId: \"oauth2Consent\",\n\t\t\t\tbody: oAuthConsentBodySchema,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Handle OAuth2 consent. Supports both URL parameter-based flows (consent_code in body) and cookie-based flows (signed cookie).\",\n\t\t\t\t\trequestBody: {\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\taccept: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tdescription: \"Whether the user accepts or denies the consent request\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tconsent_code: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"The consent code from the authorization request. Optional if using cookie-based flow.\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\"accept\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t},\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Consent processed successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { redirectURI: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tdescription: \"The URI to redirect to, either with an authorization code or an error\"\n\t\t\t\t\t\t\t} },\n\t\t\t\t\t\t\trequired: [\"redirectURI\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tlet consentCode = ctx.body.consent_code || null;\n\t\t\t\tif (!consentCode) {\n\t\t\t\t\tconst cookieValue = await ctx.getSignedCookie(\"oidc_consent_prompt\", ctx.context.secret);\n\t\t\t\t\tif (cookieValue) consentCode = cookieValue;\n\t\t\t\t}\n\t\t\t\tif (!consentCode) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"consent_code is required (either in body or cookie)\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst verification = await ctx.context.internalAdapter.findVerificationValue(consentCode);\n\t\t\t\tif (!verification) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"Invalid code\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (verification.expiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"Code expired\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.expireCookie)(ctx, {\n\t\t\t\t\tname: \"oidc_consent_prompt\",\n\t\t\t\t\tattributes: { path: \"/\" }\n\t\t\t\t});\n\t\t\t\tconst value = JSON.parse(verification.value);\n\t\t\t\tif (!value.requireConsent) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"Consent not required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (!ctx.body.accept) {\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\t\t\t\t\treturn ctx.json({ redirectURI: `${value.redirectURI}?error=access_denied&error_description=User denied access` });\n\t\t\t\t}\n\t\t\t\tconst code = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\", \"0-9\");\n\t\t\t\tconst codeExpiresInMs = (opts?.codeExpiresIn ?? DEFAULT_CODE_EXPIRES_IN) * 1e3;\n\t\t\t\tconst expiresAt = new Date(Date.now() + codeExpiresInMs);\n\t\t\t\tawait ctx.context.internalAdapter.updateVerificationValue(verification.id, {\n\t\t\t\t\tvalue: JSON.stringify({\n\t\t\t\t\t\t...value,\n\t\t\t\t\t\trequireConsent: false\n\t\t\t\t\t}),\n\t\t\t\t\tidentifier: code,\n\t\t\t\t\texpiresAt\n\t\t\t\t});\n\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\tmodel: modelName.oauthConsent,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tclientId: value.clientId,\n\t\t\t\t\t\tuserId: value.userId,\n\t\t\t\t\t\tscopes: value.scope.join(\" \"),\n\t\t\t\t\t\tconsentGiven: true,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst redirectURI = new URL(value.redirectURI);\n\t\t\t\tredirectURI.searchParams.set(\"code\", code);\n\t\t\t\tif (value.state) redirectURI.searchParams.set(\"state\", value.state);\n\t\t\t\treturn ctx.json({ redirectURI: redirectURI.toString() });\n\t\t\t}),\n\t\t\toAuth2token: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/token\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\toperationId: \"oauth2Token\",\n\t\t\t\tbody: oAuth2TokenBodySchema,\n\t\t\t\tmetadata: {\n\t\t\t\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_7__.HIDE_METADATA,\n\t\t\t\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t\t\t\t}\n\t\t\t}, async (ctx) => {\n\t\t\t\tlet { body } = ctx;\n\t\t\t\tif (!body) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"request body not found\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (body instanceof FormData) body = Object.fromEntries(body.entries());\n\t\t\t\tif (!(body instanceof Object)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"request body is not an object\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tlet { client_id, client_secret } = body;\n\t\t\t\tconst authorization = ctx.request?.headers.get(\"authorization\") || null;\n\t\t\t\tif (authorization && !client_id && !client_secret && authorization.startsWith(\"Basic \")) try {\n\t\t\t\t\tconst encoded = authorization.replace(\"Basic \", \"\");\n\t\t\t\t\tconst decoded = new TextDecoder().decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_20__.base64.decode(encoded));\n\t\t\t\t\tif (!decoded.includes(\":\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tconst [id, secret] = decoded.split(\":\");\n\t\t\t\t\tif (!id || !secret) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tclient_id = id;\n\t\t\t\t\tclient_secret = secret;\n\t\t\t\t} catch {\n\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid authorization header format\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst iat = Math.floor(now / 1e3);\n\t\t\t\tconst exp = iat + (opts.accessTokenExpiresIn ?? 3600);\n\t\t\t\tconst accessTokenExpiresAt = /* @__PURE__ */ new Date(exp * 1e3);\n\t\t\t\tconst refreshTokenExpiresAt = /* @__PURE__ */ new Date((iat + (opts.refreshTokenExpiresIn ?? 604800)) * 1e3);\n\t\t\t\tconst { grant_type, code, redirect_uri, refresh_token, code_verifier } = body;\n\t\t\t\tif (grant_type === \"refresh_token\") {\n\t\t\t\t\tif (!refresh_token) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror_description: \"refresh_token is required\",\n\t\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t\t});\n\t\t\t\t\tconst token = await ctx.context.adapter.findOne({\n\t\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"refreshToken\",\n\t\t\t\t\t\t\tvalue: refresh_token.toString()\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tif (!token) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid refresh token\",\n\t\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t\t});\n\t\t\t\t\tif (token.clientId !== client_id?.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tif (token.refreshTokenExpiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"refresh token expired\",\n\t\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t\t});\n\t\t\t\t\tconst accessToken$1 = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\t\tconst newRefreshToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taccessToken: accessToken$1,\n\t\t\t\t\t\t\trefreshToken: newRefreshToken,\n\t\t\t\t\t\t\taccessTokenExpiresAt,\n\t\t\t\t\t\t\trefreshTokenExpiresAt,\n\t\t\t\t\t\t\tclientId: client_id.toString(),\n\t\t\t\t\t\t\tuserId: token.userId,\n\t\t\t\t\t\t\tscopes: token.scopes,\n\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(iat * 1e3),\n\t\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(iat * 1e3)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\taccess_token: accessToken$1,\n\t\t\t\t\t\ttoken_type: \"Bearer\",\n\t\t\t\t\t\texpires_in: opts.accessTokenExpiresIn,\n\t\t\t\t\t\trefresh_token: newRefreshToken,\n\t\t\t\t\t\tscope: token.scopes\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!code) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (options.requirePKCE && !code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code verifier is missing\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\t/**\n\t\t\t\t* We need to check if the code is valid before we can proceed\n\t\t\t\t* with the rest of the request.\n\t\t\t\t*/\n\t\t\t\tconst verificationValue = await ctx.context.internalAdapter.findVerificationValue(code.toString());\n\t\t\t\tif (!verificationValue) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid code\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"code expired\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\t\t\tif (!client_id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"client_id is required\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (!grant_type) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"grant_type is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (grant_type !== \"authorization_code\") throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"grant_type must be 'authorization_code'\",\n\t\t\t\t\terror: \"unsupported_grant_type\"\n\t\t\t\t});\n\t\t\t\tif (!redirect_uri) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"redirect_uri is required\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst client = await getClient(client_id.toString(), trustedClients);\n\t\t\t\tif (!client) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (client.disabled) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"client is disabled\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tconst value = JSON.parse(verificationValue.value);\n\t\t\t\tif (value.clientId !== client_id.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid client_id\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (value.redirectURI !== redirect_uri.toString()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid redirect_uri\",\n\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t});\n\t\t\t\tif (value.codeChallenge && !code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror_description: \"code verifier is missing\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tif (client.type === \"public\") {\n\t\t\t\t\tif (!code_verifier) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror_description: \"code verifier is required for public clients\",\n\t\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (!client.clientSecret || !client_secret) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"client_secret is required for confidential clients\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t\tif (!await verifyStoredClientSecret(ctx, client.clientSecret, client_secret.toString())) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\t\terror_description: \"invalid client_secret\",\n\t\t\t\t\t\terror: \"invalid_client\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif ((value.codeChallengeMethod === \"plain\" ? code_verifier : await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_19__.createHash)(\"SHA-256\", \"base64urlnopad\").digest(code_verifier)) !== value.codeChallenge) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"code verification failed\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst requestedScopes = value.scope;\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\t\t\tconst accessToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst refreshToken = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"A-Z\", \"a-z\");\n\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taccessToken,\n\t\t\t\t\t\trefreshToken,\n\t\t\t\t\t\taccessTokenExpiresAt,\n\t\t\t\t\t\trefreshTokenExpiresAt,\n\t\t\t\t\t\tclientId: client_id.toString(),\n\t\t\t\t\t\tuserId: value.userId,\n\t\t\t\t\t\tscopes: requestedScopes.join(\" \"),\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(iat * 1e3),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(iat * 1e3)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst user = await ctx.context.internalAdapter.findUserById(value.userId);\n\t\t\t\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"user not found\",\n\t\t\t\t\terror: \"invalid_grant\"\n\t\t\t\t});\n\t\t\t\tconst profile = {\n\t\t\t\t\tgiven_name: user.name.split(\" \")[0],\n\t\t\t\t\tfamily_name: user.name.split(\" \")[1],\n\t\t\t\t\tname: user.name,\n\t\t\t\t\tprofile: user.image,\n\t\t\t\t\tupdated_at: new Date(user.updatedAt).toISOString()\n\t\t\t\t};\n\t\t\t\tconst email = {\n\t\t\t\t\temail: user.email,\n\t\t\t\t\temail_verified: user.emailVerified\n\t\t\t\t};\n\t\t\t\tconst userClaims = {\n\t\t\t\t\t...requestedScopes.includes(\"profile\") ? profile : {},\n\t\t\t\t\t...requestedScopes.includes(\"email\") ? email : {}\n\t\t\t\t};\n\t\t\t\tconst additionalUserClaims = options.getAdditionalUserInfoClaim ? await options.getAdditionalUserInfoClaim(user, requestedScopes, client) : {};\n\t\t\t\tconst payload = {\n\t\t\t\t\tsub: user.id,\n\t\t\t\t\taud: client_id.toString(),\n\t\t\t\t\tiat,\n\t\t\t\t\tauth_time: ctx.context.session ? new Date(ctx.context.session.session.createdAt).getTime() : void 0,\n\t\t\t\t\tnonce: value.nonce,\n\t\t\t\t\tacr: \"urn:mace:incommon:iap:silver\",\n\t\t\t\t\t...userClaims,\n\t\t\t\t\t...additionalUserClaims\n\t\t\t\t};\n\t\t\t\tconst expirationTime = Math.floor(Date.now() / 1e3) + (opts?.accessTokenExpiresIn ?? DEFAULT_ACCESS_TOKEN_EXPIRES_IN);\n\t\t\t\tlet idToken;\n\t\t\t\tif (options.useJWTPlugin) {\n\t\t\t\t\tconst jwtPlugin = getJwtPlugin(ctx);\n\t\t\t\t\tif (!jwtPlugin) {\n\t\t\t\t\t\tctx.context.logger.error(\"OIDC: `useJWTPlugin` is enabled but the JWT plugin is not available. Make sure you have the JWT Plugin in your plugins array or set `useJWTPlugin` to false.\");\n\t\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\t\t\t\t\terror_description: \"JWT plugin is not enabled\",\n\t\t\t\t\t\t\terror: \"internal_server_error\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tidToken = await (0,_jwt_sign_mjs__WEBPACK_IMPORTED_MODULE_10__.getJwtToken)({\n\t\t\t\t\t\t...ctx,\n\t\t\t\t\t\tcontext: {\n\t\t\t\t\t\t\t...ctx.context,\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t\tid: (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\"),\n\t\t\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(iat * 1e3),\n\t\t\t\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(iat * 1e3),\n\t\t\t\t\t\t\t\t\tuserId: user.id,\n\t\t\t\t\t\t\t\t\texpiresAt: accessTokenExpiresAt,\n\t\t\t\t\t\t\t\t\ttoken: accessToken,\n\t\t\t\t\t\t\t\t\tipAddress: ctx.request?.headers.get(\"x-forwarded-for\")\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tuser\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\t...jwtPlugin.options,\n\t\t\t\t\t\tjwt: {\n\t\t\t\t\t\t\t...jwtPlugin.options?.jwt,\n\t\t\t\t\t\t\tgetSubject: () => user.id,\n\t\t\t\t\t\t\taudience: client_id.toString(),\n\t\t\t\t\t\t\tissuer: jwtPlugin.options?.jwt?.issuer ?? ctx.context.options.baseURL,\n\t\t\t\t\t\t\texpirationTime,\n\t\t\t\t\t\t\tdefinePayload: () => payload\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else idToken = await new jose__WEBPACK_IMPORTED_MODULE_22__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt(iat).setExpirationTime(accessTokenExpiresAt).sign(new TextEncoder().encode(client.clientSecret));\n\t\t\t\treturn ctx.json({\n\t\t\t\t\taccess_token: accessToken,\n\t\t\t\t\ttoken_type: \"Bearer\",\n\t\t\t\t\texpires_in: opts.accessTokenExpiresIn,\n\t\t\t\t\trefresh_token: requestedScopes.includes(\"offline_access\") ? refreshToken : void 0,\n\t\t\t\t\tscope: requestedScopes.join(\" \"),\n\t\t\t\t\tid_token: requestedScopes.includes(\"openid\") ? idToken : void 0\n\t\t\t\t}, { headers: {\n\t\t\t\t\t\"Cache-Control\": \"no-store\",\n\t\t\t\t\tPragma: \"no-cache\"\n\t\t\t\t} });\n\t\t\t}),\n\t\t\toAuth2userInfo: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/userinfo\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\toperationId: \"oauth2Userinfo\",\n\t\t\t\tmetadata: {\n\t\t\t\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_7__.HIDE_METADATA,\n\t\t\t\t\topenapi: {\n\t\t\t\t\t\tdescription: \"Get OAuth2 user information\",\n\t\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\t\tdescription: \"User information retrieved successfully\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tsub: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Subject identifier (user ID)\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"User's email address, included if 'email' scope is granted\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"User's full name, included if 'profile' scope is granted\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tpicture: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"User's profile picture URL, included if 'profile' scope is granted\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tgiven_name: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"User's given name, included if 'profile' scope is granted\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfamily_name: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"User's family name, included if 'profile' scope is granted\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail_verified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email is verified, included if 'email' scope is granted\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\"sub\"]\n\t\t\t\t\t\t\t} } }\n\t\t\t\t\t\t} }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (!ctx.request) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"request not found\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst authorization = ctx.request.headers.get(\"authorization\");\n\t\t\t\tif (!authorization) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"authorization header not found\",\n\t\t\t\t\terror: \"invalid_request\"\n\t\t\t\t});\n\t\t\t\tconst token = authorization.replace(\"Bearer \", \"\");\n\t\t\t\tconst accessToken = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"accessToken\",\n\t\t\t\t\t\tvalue: token\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!accessToken) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"invalid access token\",\n\t\t\t\t\terror: \"invalid_token\"\n\t\t\t\t});\n\t\t\t\tif (accessToken.accessTokenExpiresAt < /* @__PURE__ */ new Date()) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"The Access Token expired\",\n\t\t\t\t\terror: \"invalid_token\"\n\t\t\t\t});\n\t\t\t\tconst client = await getClient(accessToken.clientId, trustedClients);\n\t\t\t\tif (!client) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"client not found\",\n\t\t\t\t\terror: \"invalid_token\"\n\t\t\t\t});\n\t\t\t\tconst user = await ctx.context.internalAdapter.findUserById(accessToken.userId);\n\t\t\t\tif (!user) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror_description: \"user not found\",\n\t\t\t\t\terror: \"invalid_token\"\n\t\t\t\t});\n\t\t\t\tconst requestedScopes = accessToken.scopes.split(\" \");\n\t\t\t\tconst baseUserClaims = {\n\t\t\t\t\tsub: user.id,\n\t\t\t\t\temail: requestedScopes.includes(\"email\") ? user.email : void 0,\n\t\t\t\t\tname: requestedScopes.includes(\"profile\") ? user.name : void 0,\n\t\t\t\t\tpicture: requestedScopes.includes(\"profile\") ? user.image : void 0,\n\t\t\t\t\tgiven_name: requestedScopes.includes(\"profile\") ? user.name.split(\" \")[0] : void 0,\n\t\t\t\t\tfamily_name: requestedScopes.includes(\"profile\") ? user.name.split(\" \")[1] : void 0,\n\t\t\t\t\temail_verified: requestedScopes.includes(\"email\") ? user.emailVerified : void 0\n\t\t\t\t};\n\t\t\t\tconst userClaims = options.getAdditionalUserInfoClaim ? await options.getAdditionalUserInfoClaim(user, requestedScopes, client) : baseUserClaims;\n\t\t\t\treturn ctx.json({\n\t\t\t\t\t...baseUserClaims,\n\t\t\t\t\t...userClaims\n\t\t\t\t});\n\t\t\t}),\n\t\t\tregisterOAuthApplication: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/register\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: registerOAuthApplicationBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Register an OAuth2 application\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"OAuth2 application registered successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Name of the OAuth2 application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Icon URL for the application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tadditionalProperties: true,\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Additional metadata for the application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclientId: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier for the client\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclientSecret: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Secret key for the client\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tredirectURLs: {\n\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdescription: \"List of allowed redirect URLs\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Type of the client\",\n\t\t\t\t\t\t\t\t\tenum: [\"web\"]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tauthenticationScheme: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Authentication scheme used by the client\",\n\t\t\t\t\t\t\t\t\tenum: [\"client_secret\"]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdisabled: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tdescription: \"Whether the client is disabled\",\n\t\t\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"ID of the user who registered the client, null if registered anonymously\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Creation timestamp\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Last update timestamp\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\"clientId\",\n\t\t\t\t\t\t\t\t\"clientSecret\",\n\t\t\t\t\t\t\t\t\"redirectURLs\",\n\t\t\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\t\t\"authenticationScheme\",\n\t\t\t\t\t\t\t\t\"disabled\",\n\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst body = ctx.body;\n\t\t\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\t\t\t\tif (!session && !options.allowDynamicClientRegistration) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\terror: \"invalid_token\",\n\t\t\t\t\terror_description: \"Authentication required for client registration\"\n\t\t\t\t});\n\t\t\t\tif ((!body.grant_types || body.grant_types.includes(\"authorization_code\") || body.grant_types.includes(\"implicit\")) && (!body.redirect_uris || body.redirect_uris.length === 0)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\terror: \"invalid_redirect_uri\",\n\t\t\t\t\terror_description: \"Redirect URIs are required for authorization_code and implicit grant types\"\n\t\t\t\t});\n\t\t\t\tif (body.grant_types && body.response_types) {\n\t\t\t\t\tif (body.grant_types.includes(\"authorization_code\") && !body.response_types.includes(\"code\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client_metadata\",\n\t\t\t\t\t\terror_description: \"When 'authorization_code' grant type is used, 'code' response type must be included\"\n\t\t\t\t\t});\n\t\t\t\t\tif (body.grant_types.includes(\"implicit\") && !body.response_types.includes(\"token\")) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client_metadata\",\n\t\t\t\t\t\terror_description: \"When 'implicit' grant type is used, 'token' response type must be included\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst clientId = options.generateClientId?.() || (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst clientSecret = options.generateClientSecret?.() || (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(32, \"a-z\", \"A-Z\");\n\t\t\t\tconst storedClientSecret = await storeClientSecret(ctx, clientSecret);\n\t\t\t\tconst client = await ctx.context.adapter.create({\n\t\t\t\t\tmodel: modelName.oauthClient,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: body.client_name,\n\t\t\t\t\t\ticon: body.logo_uri,\n\t\t\t\t\t\tmetadata: body.metadata ? JSON.stringify(body.metadata) : null,\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tclientSecret: storedClientSecret,\n\t\t\t\t\t\tredirectUrls: body.redirect_uris.join(\",\"),\n\t\t\t\t\t\ttype: \"web\",\n\t\t\t\t\t\tauthenticationScheme: body.token_endpoint_auth_method || \"client_secret_basic\",\n\t\t\t\t\t\tdisabled: false,\n\t\t\t\t\t\tuserId: session?.session.userId,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tclient_id: clientId,\n\t\t\t\t\t...client.type !== \"public\" ? {\n\t\t\t\t\t\tclient_secret: clientSecret,\n\t\t\t\t\t\tclient_secret_expires_at: 0\n\t\t\t\t\t} : {},\n\t\t\t\t\tclient_id_issued_at: Math.floor(Date.now() / 1e3),\n\t\t\t\t\tclient_secret_expires_at: 0,\n\t\t\t\t\tredirect_uris: body.redirect_uris,\n\t\t\t\t\ttoken_endpoint_auth_method: body.token_endpoint_auth_method || \"client_secret_basic\",\n\t\t\t\t\tgrant_types: body.grant_types || [\"authorization_code\"],\n\t\t\t\t\tresponse_types: body.response_types || [\"code\"],\n\t\t\t\t\tclient_name: body.client_name,\n\t\t\t\t\tclient_uri: body.client_uri,\n\t\t\t\t\tlogo_uri: body.logo_uri,\n\t\t\t\t\tscope: body.scope,\n\t\t\t\t\tcontacts: body.contacts,\n\t\t\t\t\ttos_uri: body.tos_uri,\n\t\t\t\t\tpolicy_uri: body.policy_uri,\n\t\t\t\t\tjwks_uri: body.jwks_uri,\n\t\t\t\t\tjwks: body.jwks,\n\t\t\t\t\tsoftware_id: body.software_id,\n\t\t\t\t\tsoftware_version: body.software_version,\n\t\t\t\t\tsoftware_statement: body.software_statement,\n\t\t\t\t\tmetadata: body.metadata\n\t\t\t\t}, {\n\t\t\t\t\tstatus: 201,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t\"Cache-Control\": \"no-store\",\n\t\t\t\t\t\tPragma: \"no-cache\"\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}),\n\t\t\tgetOAuthClient: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/client/:id\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Get OAuth2 client details\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"OAuth2 client retrieved successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tclientId: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier for the client\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Name of the OAuth2 application\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Icon URL for the application\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\"clientId\", \"name\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst client = await getClient(ctx.params.id, trustedClients);\n\t\t\t\tif (!client) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", {\n\t\t\t\t\terror_description: \"client not found\",\n\t\t\t\t\terror: \"not_found\"\n\t\t\t\t});\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tclientId: client.clientId,\n\t\t\t\t\tname: client.name,\n\t\t\t\t\ticon: client.icon || null\n\t\t\t\t});\n\t\t\t}),\n\t\t\tendSession: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_18__.createAuthEndpoint)(\"/oauth2/endsession\", {\n\t\t\t\tmethod: [\"GET\", \"POST\"],\n\t\t\t\tquery: zod__WEBPACK_IMPORTED_MODULE_21__.object({\n\t\t\t\t\tid_token_hint: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional(),\n\t\t\t\t\tlogout_hint: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional(),\n\t\t\t\t\tclient_id: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional(),\n\t\t\t\t\tpost_logout_redirect_uri: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional(),\n\t\t\t\t\tstate: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional(),\n\t\t\t\t\tui_locales: zod__WEBPACK_IMPORTED_MODULE_21__.string().optional()\n\t\t\t\t}).optional(),\n\t\t\t\tmetadata: {\n\t\t\t\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_7__.HIDE_METADATA,\n\t\t\t\t\topenapi: {\n\t\t\t\t\t\tdescription: \"RP-Initiated Logout endpoint. Logs out the end-user and optionally redirects to a post-logout URI.\",\n\t\t\t\t\t\tparameters: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"id_token_hint\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"Previously issued ID Token passed as a hint about the End-User's current authenticated session\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"logout_hint\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"Hint to the Authorization Server about the End-User that is logging out\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"client_id\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"OAuth 2.0 Client Identifier. Required if post_logout_redirect_uri is used without id_token_hint\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"post_logout_redirect_uri\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"URL to which the RP is requesting that the End-User's User Agent be redirected after a logout has been performed\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"uri\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"state\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"Opaque value used by the RP to maintain state between the logout request and the callback\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"ui_locales\",\n\t\t\t\t\t\t\t\tin: \"query\",\n\t\t\t\t\t\t\t\tdescription: \"End-User's preferred languages and scripts for the user interface\",\n\t\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\t\tschema: { type: \"string\" }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tresponses: {\n\t\t\t\t\t\t\t\"302\": { description: \"Redirect to post_logout_redirect_uri or logout confirmation page\" },\n\t\t\t\t\t\t\t\"200\": { description: \"Logout completed successfully\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst { id_token_hint, client_id, post_logout_redirect_uri, state } = ctx.query || {};\n\t\t\t\tlet validatedClientId = null;\n\t\t\t\tlet validatedUserId = null;\n\t\t\t\tif (id_token_hint) try {\n\t\t\t\t\tconst jwtPlugin = getJwtPlugin(ctx);\n\t\t\t\t\tif (jwtPlugin && jwtPlugin.options && options?.useJWTPlugin) {\n\t\t\t\t\t\tconst verified = await (0,_jwt_verify_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyJWT)(id_token_hint, jwtPlugin.options);\n\t\t\t\t\t\tif (verified) {\n\t\t\t\t\t\t\tvalidatedUserId = verified.sub;\n\t\t\t\t\t\t\tvalidatedClientId = verified.aud ? typeof verified.aud === \"string\" ? verified.aud : verified.aud[0] : null;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (client_id) {\n\t\t\t\t\t\tconst client = await getClient(client_id, trustedClients);\n\t\t\t\t\t\tif (client && client.clientSecret) try {\n\t\t\t\t\t\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_23__.jwtVerify)(id_token_hint, new TextEncoder().encode(client.clientSecret));\n\t\t\t\t\t\t\tvalidatedUserId = payload.sub;\n\t\t\t\t\t\t\tvalidatedClientId = payload.aud;\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t}\n\t\t\t\t} catch {\n\t\t\t\t\tctx.context.logger.debug(\"Invalid id_token_hint provided to end_session endpoint\");\n\t\t\t\t}\n\t\t\t\tif (client_id) {\n\t\t\t\t\tif (!await getClient(client_id, trustedClients)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client\",\n\t\t\t\t\t\terror_description: \"Invalid client_id\"\n\t\t\t\t\t});\n\t\t\t\t\tif (validatedClientId && validatedClientId !== client_id) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_request\",\n\t\t\t\t\t\terror_description: \"client_id does not match the ID Token's audience\"\n\t\t\t\t\t});\n\t\t\t\t\tvalidatedClientId = client_id;\n\t\t\t\t}\n\t\t\t\tif (post_logout_redirect_uri) {\n\t\t\t\t\tif (!validatedClientId) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_request\",\n\t\t\t\t\t\terror_description: \"client_id is required when using post_logout_redirect_uri without a valid id_token_hint\"\n\t\t\t\t\t});\n\t\t\t\t\tconst client = await getClient(validatedClientId, trustedClients);\n\t\t\t\t\tif (!client) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_client\",\n\t\t\t\t\t\terror_description: \"Invalid client\"\n\t\t\t\t\t});\n\t\t\t\t\tif (!client.redirectUrls.some((registeredUri) => post_logout_redirect_uri === registeredUri)) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_request\",\n\t\t\t\t\t\terror_description: \"post_logout_redirect_uri is not registered for this client\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\t\t\t\tif (validatedUserId || session) {\n\t\t\t\t\tconst userId = validatedUserId || session?.user.id;\n\t\t\t\t\tif (userId) await ctx.context.adapter.deleteMany({\n\t\t\t\t\t\tmodel: modelName.oauthAccessToken,\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (session) {\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.expireCookie)(ctx, ctx.context.authCookies.sessionToken);\n\t\t\t\t}\n\t\t\t\tif (post_logout_redirect_uri) try {\n\t\t\t\t\tconst redirectUrl = new URL(post_logout_redirect_uri);\n\t\t\t\t\tif (state) redirectUrl.searchParams.set(\"state\", state);\n\t\t\t\t\treturn ctx.redirect(redirectUrl.toString());\n\t\t\t\t} catch {\n\t\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\terror: \"invalid_request\",\n\t\t\t\t\t\terror_description: \"Invalid post_logout_redirect_uri format\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tmessage: \"Logout successful\"\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_15__.schema, options?.schema),\n\t\tget options() {\n\t\t\treturn opts;\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUN0QjtBQUNtQztBQUNhO0FBQ047QUFDZjtBQUM2QjtBQUN0QjtBQUMvQjtBQUNnQjtBQUNEO0FBQ0E7QUFDcEI7QUFDdUI7QUFDTDtBQUNOO0FBQ2tCO0FBQ1U7QUFDekM7QUFDd0Q7QUFDNUI7QUFDWDtBQUNTOztBQUVuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxXQUFXLFlBQVksUUFBUSxpRkFBcUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFFBQVE7QUFDckMscUJBQXFCLFFBQVE7QUFDN0Isd0JBQXdCLFFBQVE7QUFDaEMsZUFBZSxRQUFRO0FBQ3ZCLDRCQUE0QixRQUFRO0FBQ3BDLDJCQUEyQixRQUFRO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix3Q0FBUTtBQUN2QyxTQUFTLHlDQUFTO0FBQ2xCLGVBQWUsd0NBQVE7QUFDdkIsQ0FBQztBQUNELDhCQUE4Qix3Q0FBUSxDQUFDLHFDQUFLLElBQUkscUNBQUs7QUFDckQsMkNBQTJDLHdDQUFRO0FBQ25ELGdCQUFnQix1Q0FBTyxDQUFDLHdDQUFRLFdBQVcsdUZBQXVGO0FBQ2xJLDZCQUE2Qix5Q0FBTTtBQUNuQztBQUNBO0FBQ0E7QUFDQSxXQUFXLDhGQUE4RjtBQUN6RyxjQUFjLHVDQUFPLENBQUMseUNBQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJGQUEyRjtBQUN2RyxpQkFBaUIsdUNBQU8sQ0FBQyx5Q0FBTSw0QkFBNEIsZ0ZBQWdGO0FBQzNJLGNBQWMsd0NBQVEsVUFBVSw0REFBNEQ7QUFDNUYsYUFBYSx3Q0FBUSxVQUFVLCtFQUErRTtBQUM5RyxXQUFXLHdDQUFRLFVBQVUsNkZBQTZGO0FBQzFILFFBQVEsd0NBQVEsVUFBVSxvR0FBb0c7QUFDOUgsV0FBVyx1Q0FBTyxDQUFDLHdDQUFRLFdBQVcseUZBQXlGO0FBQy9ILFVBQVUsd0NBQVEsVUFBVSxvR0FBb0c7QUFDaEksYUFBYSx3Q0FBUSxVQUFVLHFHQUFxRztBQUNwSSxXQUFXLHdDQUFRLFVBQVUseUZBQXlGO0FBQ3RILE9BQU8sd0NBQVEsQ0FBQyxxQ0FBSyxJQUFJLHFDQUFLLFdBQVcsZ0RBQWdELFlBQVksdUZBQXVGLEVBQUUsR0FBRztBQUNqTSxXQUFXLHdDQUFRLENBQUMscUNBQUssSUFBSSxxQ0FBSyxXQUFXLG9EQUFvRCxtQkFBbUIsR0FBRztBQUN2SCxjQUFjLHdDQUFRLFVBQVUsd0VBQXdFO0FBQ3hHLG1CQUFtQix3Q0FBUSxVQUFVLHVFQUF1RTtBQUM1RyxxQkFBcUIsd0NBQVEsVUFBVSwyREFBMkQ7QUFDbEcsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsbUVBQWdCO0FBQzNFO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsd0RBQXdELHNFQUF5QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELG1FQUFnQjtBQUMzRTtBQUNBO0FBQ0EsR0FBRztBQUNILHdEQUF3RCxzRUFBeUI7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSw0RUFBb0I7QUFDaEM7QUFDQTtBQUNBLGtDQUFrQywrRUFBb0I7QUFDdEQ7QUFDQTtBQUNBLElBQUksZ0VBQVk7QUFDaEI7QUFDQSxtQkFBbUI7QUFDbkIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFTO0FBQzFCLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTjtBQUNBLG9CQUFvQiwwRUFBa0I7QUFDdEM7QUFDQTtBQUNBLGNBQWMsbUVBQWE7QUFDM0IsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osb0JBQW9CLDBFQUFrQjtBQUN0QztBQUNBO0FBQ0EsV0FBVyx3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUs7QUFDckMsZ0JBQWdCO0FBQ2hCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osV0FBVywwREFBUztBQUNwQixJQUFJO0FBQ0osaUJBQWlCLDBFQUFrQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxVQUFVLHNFQUFpQjtBQUMzQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0JBQWtCO0FBQ2xCO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvREFBUTtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsaUNBQWlDLG9EQUFRO0FBQ3pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUVBQXVFLG9EQUFRO0FBQy9FO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSSxnRUFBWTtBQUNoQjtBQUNBLG1CQUFtQjtBQUNuQixLQUFLO0FBQ0w7QUFDQSx5Q0FBeUMsb0RBQVE7QUFDakQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUJBQXVCLGdCQUFnQixrQkFBa0IsNERBQTREO0FBQ3JIO0FBQ0EsaUJBQWlCLHdFQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IscUNBQXFDO0FBQzNELElBQUk7QUFDSixnQkFBZ0IsMEVBQWtCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBYTtBQUNyQjtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVUsT0FBTztBQUNqQix5QkFBeUIsb0RBQVE7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZDQUE2QyxvREFBUTtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMLFVBQVUsMkJBQTJCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyw4REFBTTtBQUNwRCwyQ0FBMkMsb0RBQVE7QUFDbkQ7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLG1DQUFtQyxvREFBUTtBQUMzQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZUFBZSxvREFBUTtBQUN2QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQStEO0FBQzNFO0FBQ0EsbUNBQW1DLG9EQUFRO0FBQzNDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ04sMkJBQTJCLG9EQUFRO0FBQ25DO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNkRBQTZELG9EQUFRO0FBQ3JFO0FBQ0E7QUFDQSxNQUFNO0FBQ04sNkVBQTZFLG9EQUFRO0FBQ3JGO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMkJBQTJCLHdFQUFvQjtBQUMvQyw2QkFBNkIsd0VBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHlCQUF5QixvREFBUTtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMLHlEQUF5RCxvREFBUTtBQUNqRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msb0RBQVE7QUFDOUM7QUFDQTtBQUNBLEtBQUs7QUFDTCw0RUFBNEUsb0RBQVE7QUFDcEY7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDhCQUE4QixvREFBUTtBQUN0QztBQUNBO0FBQ0EsS0FBSztBQUNMLCtCQUErQixvREFBUTtBQUN2QztBQUNBO0FBQ0EsS0FBSztBQUNMLHVEQUF1RCxvREFBUTtBQUMvRDtBQUNBO0FBQ0EsS0FBSztBQUNMLGlDQUFpQyxvREFBUTtBQUN6QztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLG9EQUFRO0FBQ25DO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUNBQW1DLG9EQUFRO0FBQzNDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyREFBMkQsb0RBQVE7QUFDbkU7QUFDQTtBQUNBLEtBQUs7QUFDTCxpRUFBaUUsb0RBQVE7QUFDekU7QUFDQTtBQUNBLEtBQUs7QUFDTCx5REFBeUQsb0RBQVE7QUFDakU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLG1DQUFtQyxvREFBUTtBQUMzQztBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU07QUFDTiwyREFBMkQsb0RBQVE7QUFDbkU7QUFDQTtBQUNBLE1BQU07QUFDTix3R0FBd0csb0RBQVE7QUFDaEg7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLHVFQUF1RSxvRUFBVSx3RkFBd0Ysb0RBQVE7QUFDakw7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0Esd0JBQXdCLHdFQUFvQjtBQUM1Qyx5QkFBeUIsd0VBQW9CO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EseUJBQXlCLG9EQUFRO0FBQ2pDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9EQUFRO0FBQ3hCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxxQkFBcUIsMkRBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0VBQW9CO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0seUJBQXlCLDBDQUFPLCtCQUErQixjQUFjO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUCxJQUFJO0FBQ0osbUJBQW1CLDBFQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxRQUFRLG1FQUFhO0FBQ3JCO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQSxrQkFBa0Isc0JBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixnQ0FBZ0Msb0RBQVE7QUFDeEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtDQUFrQyxvREFBUTtBQUMxQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0wsZ0NBQWdDLG9EQUFRO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaUZBQWlGLG9EQUFRO0FBQ3pGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyQkFBMkIsb0RBQVE7QUFDbkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHlCQUF5QixvREFBUTtBQUNqQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLDZCQUE2QiwwRUFBa0I7QUFDL0M7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwwQkFBMEIsMEVBQWlCO0FBQzNDLHVFQUF1RSxvREFBUTtBQUMvRTtBQUNBO0FBQ0EsS0FBSztBQUNMLCtMQUErTCxvREFBUTtBQUN2TTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNkdBQTZHLG9EQUFRO0FBQ3JIO0FBQ0E7QUFDQSxNQUFNO0FBQ04sb0dBQW9HLG9EQUFRO0FBQzVHO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxxREFBcUQsd0VBQW9CO0FBQ3pFLDZEQUE2RCx3RUFBb0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxJQUFJO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osbUJBQW1CLDBFQUFrQjtBQUNyQztBQUNBLFVBQVUsc0VBQWlCO0FBQzNCLGdCQUFnQjtBQUNoQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDJCQUEyQixvREFBUTtBQUNuQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixlQUFlLDBFQUFrQjtBQUNqQztBQUNBLFdBQVcsd0NBQVE7QUFDbkIsb0JBQW9CLHdDQUFRO0FBQzVCLGtCQUFrQix3Q0FBUTtBQUMxQixnQkFBZ0Isd0NBQVE7QUFDeEIsK0JBQStCLHdDQUFRO0FBQ3ZDLFlBQVksd0NBQVE7QUFDcEIsaUJBQWlCLHdDQUFRO0FBQ3pCLEtBQUs7QUFDTDtBQUNBLFFBQVEsbUVBQWE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlGQUFpRjtBQUNqRyxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksNERBQTREO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkRBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsVUFBVSxRQUFRLGdEQUFTO0FBQzFDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLG9EQUFRO0FBQ3hFO0FBQ0E7QUFDQSxNQUFNO0FBQ04seUVBQXlFLG9EQUFRO0FBQ2pGO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLG9EQUFRO0FBQy9DO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSw0QkFBNEIsb0RBQVE7QUFDcEM7QUFDQTtBQUNBLE1BQU07QUFDTiw2R0FBNkcsb0RBQVE7QUFDckg7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDBCQUEwQiwwRUFBaUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixlQUFlLG9EQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSCxVQUFVLDJEQUFXLENBQUMsZ0RBQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9pZGMtcHJvdmlkZXJcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZVNjaGVtYSB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBzeW1tZXRyaWNEZWNyeXB0LCBzeW1tZXRyaWNFbmNyeXB0IH0gZnJvbSBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0Q29va2llSGVhZGVyIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IHsgZXhwaXJlQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuLi8uLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRKd3RUb2tlbiB9IGZyb20gXCIuLi9qd3Qvc2lnbi5tanNcIjtcbmltcG9ydCB7IHZlcmlmeUpXVCB9IGZyb20gXCIuLi9qd3QvdmVyaWZ5Lm1qc1wiO1xuaW1wb3J0IFwiLi4vand0L2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9tcHQgfSBmcm9tIFwiLi91dGlscy9wcm9tcHQubWpzXCI7XG5pbXBvcnQgeyBhdXRob3JpemUgfSBmcm9tIFwiLi9hdXRob3JpemUubWpzXCI7XG5pbXBvcnQgeyBzY2hlbWEgfSBmcm9tIFwiLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0Q2xpZW50U2VjcmV0SGFzaGVyIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QXV0aENvbnRleHQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaGFzaFwiO1xuaW1wb3J0IHsgU2lnbkpXVCwgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIjtcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vaWRjLXByb3ZpZGVyL2luZGV4LnRzXG5jb25zdCBnZXRKd3RQbHVnaW4gPSAoY3R4KSA9PiB7XG5cdHJldHVybiBjdHguY29udGV4dC5nZXRQbHVnaW4oXCJqd3RcIik7XG59O1xuLyoqXG4qIEdldCBhIGNsaWVudCBieSBJRCwgY2hlY2tpbmcgdHJ1c3RlZCBjbGllbnRzIGZpcnN0LCB0aGVuIGRhdGFiYXNlXG4qL1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q2xpZW50KGNsaWVudElkLCB0cnVzdGVkQ2xpZW50cyA9IFtdKSB7XG5cdGNvbnN0IHsgY29udGV4dDogeyBhZGFwdGVyIH0gfSA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpO1xuXHRjb25zdCB0cnVzdGVkQ2xpZW50ID0gdHJ1c3RlZENsaWVudHMuZmluZCgoY2xpZW50KSA9PiBjbGllbnQuY2xpZW50SWQgPT09IGNsaWVudElkKTtcblx0aWYgKHRydXN0ZWRDbGllbnQpIHJldHVybiB0cnVzdGVkQ2xpZW50O1xuXHRyZXR1cm4gYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJvYXV0aEFwcGxpY2F0aW9uXCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJjbGllbnRJZFwiLFxuXHRcdFx0dmFsdWU6IGNsaWVudElkXG5cdFx0fV1cblx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0aWYgKCFyZXMpIHJldHVybiBudWxsO1xuXHRcdHJldHVybiB7XG5cdFx0XHRjbGllbnRJZDogcmVzLmNsaWVudElkLFxuXHRcdFx0Y2xpZW50U2VjcmV0OiByZXMuY2xpZW50U2VjcmV0LFxuXHRcdFx0dHlwZTogcmVzLnR5cGUsXG5cdFx0XHRuYW1lOiByZXMubmFtZSxcblx0XHRcdGljb246IHJlcy5pY29uLFxuXHRcdFx0ZGlzYWJsZWQ6IHJlcy5kaXNhYmxlZCxcblx0XHRcdHJlZGlyZWN0VXJsczogKHJlcy5yZWRpcmVjdFVybHMgPz8gXCJcIikuc3BsaXQoXCIsXCIpLFxuXHRcdFx0bWV0YWRhdGE6IHJlcy5tZXRhZGF0YSA/IEpTT04ucGFyc2UocmVzLm1ldGFkYXRhKSA6IHt9XG5cdFx0fTtcblx0fSk7XG59XG5jb25zdCBnZXRNZXRhZGF0YSA9IChjdHgsIG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgand0UGx1Z2luID0gZ2V0Snd0UGx1Z2luKGN0eCk7XG5cdGNvbnN0IGlzc3VlciA9IGp3dFBsdWdpbiAmJiBqd3RQbHVnaW4ub3B0aW9ucz8uand0ICYmIGp3dFBsdWdpbi5vcHRpb25zLmp3dC5pc3N1ZXIgPyBqd3RQbHVnaW4ub3B0aW9ucy5qd3QuaXNzdWVyIDogY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlVVJMO1xuXHRjb25zdCBiYXNlVVJMID0gY3R4LmNvbnRleHQuYmFzZVVSTDtcblx0Y29uc3Qgc3VwcG9ydGVkQWxncyA9IG9wdGlvbnM/LnVzZUpXVFBsdWdpbiA/IFtcblx0XHRcIlJTMjU2XCIsXG5cdFx0XCJFZERTQVwiLFxuXHRcdFwibm9uZVwiXG5cdF0gOiBbXCJIUzI1NlwiLCBcIm5vbmVcIl07XG5cdHJldHVybiB7XG5cdFx0aXNzdWVyLFxuXHRcdGF1dGhvcml6YXRpb25fZW5kcG9pbnQ6IGAke2Jhc2VVUkx9L29hdXRoMi9hdXRob3JpemVgLFxuXHRcdHRva2VuX2VuZHBvaW50OiBgJHtiYXNlVVJMfS9vYXV0aDIvdG9rZW5gLFxuXHRcdHVzZXJpbmZvX2VuZHBvaW50OiBgJHtiYXNlVVJMfS9vYXV0aDIvdXNlcmluZm9gLFxuXHRcdGp3a3NfdXJpOiBgJHtiYXNlVVJMfS9qd2tzYCxcblx0XHRyZWdpc3RyYXRpb25fZW5kcG9pbnQ6IGAke2Jhc2VVUkx9L29hdXRoMi9yZWdpc3RlcmAsXG5cdFx0ZW5kX3Nlc3Npb25fZW5kcG9pbnQ6IGAke2Jhc2VVUkx9L29hdXRoMi9lbmRzZXNzaW9uYCxcblx0XHRzY29wZXNfc3VwcG9ydGVkOiBbXG5cdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XCJwcm9maWxlXCIsXG5cdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcIm9mZmxpbmVfYWNjZXNzXCJcblx0XHRdLFxuXHRcdHJlc3BvbnNlX3R5cGVzX3N1cHBvcnRlZDogW1wiY29kZVwiXSxcblx0XHRyZXNwb25zZV9tb2Rlc19zdXBwb3J0ZWQ6IFtcInF1ZXJ5XCJdLFxuXHRcdGdyYW50X3R5cGVzX3N1cHBvcnRlZDogW1wiYXV0aG9yaXphdGlvbl9jb2RlXCIsIFwicmVmcmVzaF90b2tlblwiXSxcblx0XHRhY3JfdmFsdWVzX3N1cHBvcnRlZDogW1widXJuOm1hY2U6aW5jb21tb246aWFwOnNpbHZlclwiLCBcInVybjptYWNlOmluY29tbW9uOmlhcDpicm9uemVcIl0sXG5cdFx0c3ViamVjdF90eXBlc19zdXBwb3J0ZWQ6IFtcInB1YmxpY1wiXSxcblx0XHRpZF90b2tlbl9zaWduaW5nX2FsZ192YWx1ZXNfc3VwcG9ydGVkOiBzdXBwb3J0ZWRBbGdzLFxuXHRcdHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kc19zdXBwb3J0ZWQ6IFtcblx0XHRcdFwiY2xpZW50X3NlY3JldF9iYXNpY1wiLFxuXHRcdFx0XCJjbGllbnRfc2VjcmV0X3Bvc3RcIixcblx0XHRcdFwibm9uZVwiXG5cdFx0XSxcblx0XHRjb2RlX2NoYWxsZW5nZV9tZXRob2RzX3N1cHBvcnRlZDogW1wiUzI1NlwiXSxcblx0XHRjbGFpbXNfc3VwcG9ydGVkOiBbXG5cdFx0XHRcInN1YlwiLFxuXHRcdFx0XCJpc3NcIixcblx0XHRcdFwiYXVkXCIsXG5cdFx0XHRcImV4cFwiLFxuXHRcdFx0XCJuYmZcIixcblx0XHRcdFwiaWF0XCIsXG5cdFx0XHRcImp0aVwiLFxuXHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XCJlbWFpbF92ZXJpZmllZFwiLFxuXHRcdFx0XCJuYW1lXCJcblx0XHRdLFxuXHRcdC4uLm9wdGlvbnM/Lm1ldGFkYXRhXG5cdH07XG59O1xuY29uc3Qgb0F1dGhDb25zZW50Qm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0YWNjZXB0OiB6LmJvb2xlYW4oKSxcblx0Y29uc2VudF9jb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGlzaCgpXG59KTtcbmNvbnN0IG9BdXRoMlRva2VuQm9keVNjaGVtYSA9IHoucmVjb3JkKHouYW55KCksIHouYW55KCkpO1xuY29uc3QgcmVnaXN0ZXJPQXV0aEFwcGxpY2F0aW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0cmVkaXJlY3RfdXJpczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQSBsaXN0IG9mIHJlZGlyZWN0IFVSSXMuIEVnOiBbXFxcImh0dHBzOi8vY2xpZW50LmV4YW1wbGUuY29tL2NhbGxiYWNrXFxcIl1cIiB9KSxcblx0dG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2Q6IHouZW51bShbXG5cdFx0XCJub25lXCIsXG5cdFx0XCJjbGllbnRfc2VjcmV0X2Jhc2ljXCIsXG5cdFx0XCJjbGllbnRfc2VjcmV0X3Bvc3RcIlxuXHRdKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZCBmb3IgdGhlIHRva2VuIGVuZHBvaW50LiBFZzogXFxcImNsaWVudF9zZWNyZXRfYmFzaWNcXFwiXCIgfSkuZGVmYXVsdChcImNsaWVudF9zZWNyZXRfYmFzaWNcIikub3B0aW9uYWwoKSxcblx0Z3JhbnRfdHlwZXM6IHouYXJyYXkoei5lbnVtKFtcblx0XHRcImF1dGhvcml6YXRpb25fY29kZVwiLFxuXHRcdFwiaW1wbGljaXRcIixcblx0XHRcInBhc3N3b3JkXCIsXG5cdFx0XCJjbGllbnRfY3JlZGVudGlhbHNcIixcblx0XHRcInJlZnJlc2hfdG9rZW5cIixcblx0XHRcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOmp3dC1iZWFyZXJcIixcblx0XHRcInVybjppZXRmOnBhcmFtczpvYXV0aDpncmFudC10eXBlOnNhbWwyLWJlYXJlclwiXG5cdF0pKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGdyYW50IHR5cGVzIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb24uIEVnOiBbXFxcImF1dGhvcml6YXRpb25fY29kZVxcXCJdXCIgfSkuZGVmYXVsdChbXCJhdXRob3JpemF0aW9uX2NvZGVcIl0pLm9wdGlvbmFsKCksXG5cdHJlc3BvbnNlX3R5cGVzOiB6LmFycmF5KHouZW51bShbXCJjb2RlXCIsIFwidG9rZW5cIl0pKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHJlc3BvbnNlIHR5cGVzIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb24uIEVnOiBbXFxcImNvZGVcXFwiXVwiIH0pLmRlZmF1bHQoW1wiY29kZVwiXSkub3B0aW9uYWwoKSxcblx0Y2xpZW50X25hbWU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSBhcHBsaWNhdGlvbi4gRWc6IFxcXCJNeSBBcHBcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0Y2xpZW50X3VyaTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSSSBvZiB0aGUgYXBwbGljYXRpb24uIEVnOiBcXFwiaHR0cHM6Ly9jbGllbnQuZXhhbXBsZS5jb21cXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0bG9nb191cmk6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkkgb2YgdGhlIGFwcGxpY2F0aW9uIGxvZ28uIEVnOiBcXFwiaHR0cHM6Ly9jbGllbnQuZXhhbXBsZS5jb20vbG9nby5wbmdcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0c2NvcGU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBzY29wZXMgc3VwcG9ydGVkIGJ5IHRoZSBhcHBsaWNhdGlvbi4gU2VwYXJhdGVkIGJ5IHNwYWNlcy4gRWc6IFxcXCJwcm9maWxlIGVtYWlsXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdGNvbnRhY3RzOiB6LmFycmF5KHouc3RyaW5nKCkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgY29udGFjdCBpbmZvcm1hdGlvbiBmb3IgdGhlIGFwcGxpY2F0aW9uLiBFZzogW1xcXCJhZG1pbkBleGFtcGxlLmNvbVxcXCJdXCIgfSkub3B0aW9uYWwoKSxcblx0dG9zX3VyaTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSSSBvZiB0aGUgYXBwbGljYXRpb24gdGVybXMgb2Ygc2VydmljZS4gRWc6IFxcXCJodHRwczovL2NsaWVudC5leGFtcGxlLmNvbS90b3NcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0cG9saWN5X3VyaTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSSSBvZiB0aGUgYXBwbGljYXRpb24gcHJpdmFjeSBwb2xpY3kuIEVnOiBcXFwiaHR0cHM6Ly9jbGllbnQuZXhhbXBsZS5jb20vcG9saWN5XFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdGp3a3NfdXJpOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJJIG9mIHRoZSBhcHBsaWNhdGlvbiBKV0tTLiBFZzogXFxcImh0dHBzOi8vY2xpZW50LmV4YW1wbGUuY29tL2p3a3NcXFwiXCIgfSkub3B0aW9uYWwoKSxcblx0andrczogei5yZWNvcmQoei5hbnkoKSwgei5hbnkoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBKV0tTIG9mIHRoZSBhcHBsaWNhdGlvbi4gRWc6IHtcXFwia2V5c1xcXCI6IFt7XFxcImt0eVxcXCI6IFxcXCJSU0FcXFwiLCBcXFwiYWxnXFxcIjogXFxcIlJTMjU2XFxcIiwgXFxcInVzZVxcXCI6IFxcXCJzaWdcXFwiLCBcXFwiblxcXCI6IFxcXCIuLi5cXFwiLCBcXFwiZVxcXCI6IFxcXCIuLi5cXFwifV19XCIgfSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHoucmVjb3JkKHouYW55KCksIHouYW55KCkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbWV0YWRhdGEgb2YgdGhlIGFwcGxpY2F0aW9uLiBFZzoge1xcXCJrZXlcXFwiOiBcXFwidmFsdWVcXFwifVwiIH0pLm9wdGlvbmFsKCksXG5cdHNvZnR3YXJlX2lkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc29mdHdhcmUgSUQgb2YgdGhlIGFwcGxpY2F0aW9uLiBFZzogXFxcIm15LXNvZnR3YXJlXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdHNvZnR3YXJlX3ZlcnNpb246IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBzb2Z0d2FyZSB2ZXJzaW9uIG9mIHRoZSBhcHBsaWNhdGlvbi4gRWc6IFxcXCIxLjAuMFxcXCJcIiB9KS5vcHRpb25hbCgpLFxuXHRzb2Z0d2FyZV9zdGF0ZW1lbnQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBzb2Z0d2FyZSBzdGF0ZW1lbnQgb2YgdGhlIGFwcGxpY2F0aW9uLlwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgREVGQVVMVF9DT0RFX0VYUElSRVNfSU4gPSA2MDA7XG5jb25zdCBERUZBVUxUX0FDQ0VTU19UT0tFTl9FWFBJUkVTX0lOID0gMzYwMDtcbmNvbnN0IERFRkFVTFRfUkVGUkVTSF9UT0tFTl9FWFBJUkVTX0lOID0gNjA0ODAwO1xuLyoqXG4qIE9wZW5JRCBDb25uZWN0IChPSURDKSBwbHVnaW4gZm9yIEJldHRlciBBdXRoLiBUaGlzIHBsdWdpbiBpbXBsZW1lbnRzIHRoZVxuKiBhdXRob3JpemF0aW9uIGNvZGUgZmxvdyBhbmQgdGhlIHRva2VuIGV4Y2hhbmdlIGZsb3cuIEl0IGFsc28gaW1wbGVtZW50cyB0aGVcbiogdXNlcmluZm8gZW5kcG9pbnQuXG4qXG4qIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBPSURDIHBsdWdpbi5cbiogQHJldHVybnMgQSBCZXR0ZXIgQXV0aCBwbHVnaW4uXG4qL1xuY29uc3Qgb2lkY1Byb3ZpZGVyID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgbW9kZWxOYW1lID0ge1xuXHRcdG9hdXRoQ2xpZW50OiBcIm9hdXRoQXBwbGljYXRpb25cIixcblx0XHRvYXV0aEFjY2Vzc1Rva2VuOiBcIm9hdXRoQWNjZXNzVG9rZW5cIixcblx0XHRvYXV0aENvbnNlbnQ6IFwib2F1dGhDb25zZW50XCJcblx0fTtcblx0Y29uc3Qgb3B0cyA9IHtcblx0XHRjb2RlRXhwaXJlc0luOiBERUZBVUxUX0NPREVfRVhQSVJFU19JTixcblx0XHRkZWZhdWx0U2NvcGU6IFwib3BlbmlkXCIsXG5cdFx0YWNjZXNzVG9rZW5FeHBpcmVzSW46IERFRkFVTFRfQUNDRVNTX1RPS0VOX0VYUElSRVNfSU4sXG5cdFx0cmVmcmVzaFRva2VuRXhwaXJlc0luOiBERUZBVUxUX1JFRlJFU0hfVE9LRU5fRVhQSVJFU19JTixcblx0XHRhbGxvd1BsYWluQ29kZUNoYWxsZW5nZU1ldGhvZDogdHJ1ZSxcblx0XHRzdG9yZUNsaWVudFNlY3JldDogXCJwbGFpblwiLFxuXHRcdC4uLm9wdGlvbnMsXG5cdFx0c2NvcGVzOiBbXG5cdFx0XHRcIm9wZW5pZFwiLFxuXHRcdFx0XCJwcm9maWxlXCIsXG5cdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcIm9mZmxpbmVfYWNjZXNzXCIsXG5cdFx0XHQuLi5vcHRpb25zPy5zY29wZXMgfHwgW11cblx0XHRdXG5cdH07XG5cdGNvbnN0IHRydXN0ZWRDbGllbnRzID0gb3B0aW9ucy50cnVzdGVkQ2xpZW50cyB8fCBbXTtcblx0LyoqXG5cdCogU3RvcmUgY2xpZW50IHNlY3JldCBhY2NvcmRpbmcgdG8gdGhlIGNvbmZpZ3VyZWQgc3RvcmFnZSBtZXRob2Rcblx0Ki9cblx0YXN5bmMgZnVuY3Rpb24gc3RvcmVDbGllbnRTZWNyZXQoY3R4LCBjbGllbnRTZWNyZXQpIHtcblx0XHRpZiAob3B0cy5zdG9yZUNsaWVudFNlY3JldCA9PT0gXCJlbmNyeXB0ZWRcIikgcmV0dXJuIGF3YWl0IHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0XHRkYXRhOiBjbGllbnRTZWNyZXRcblx0XHR9KTtcblx0XHRpZiAob3B0cy5zdG9yZUNsaWVudFNlY3JldCA9PT0gXCJoYXNoZWRcIikgcmV0dXJuIGF3YWl0IGRlZmF1bHRDbGllbnRTZWNyZXRIYXNoZXIoY2xpZW50U2VjcmV0KTtcblx0XHRpZiAodHlwZW9mIG9wdHMuc3RvcmVDbGllbnRTZWNyZXQgPT09IFwib2JqZWN0XCIgJiYgXCJoYXNoXCIgaW4gb3B0cy5zdG9yZUNsaWVudFNlY3JldCkgcmV0dXJuIGF3YWl0IG9wdHMuc3RvcmVDbGllbnRTZWNyZXQuaGFzaChjbGllbnRTZWNyZXQpO1xuXHRcdGlmICh0eXBlb2Ygb3B0cy5zdG9yZUNsaWVudFNlY3JldCA9PT0gXCJvYmplY3RcIiAmJiBcImVuY3J5cHRcIiBpbiBvcHRzLnN0b3JlQ2xpZW50U2VjcmV0KSByZXR1cm4gYXdhaXQgb3B0cy5zdG9yZUNsaWVudFNlY3JldC5lbmNyeXB0KGNsaWVudFNlY3JldCk7XG5cdFx0cmV0dXJuIGNsaWVudFNlY3JldDtcblx0fVxuXHQvKipcblx0KiBWZXJpZnkgc3RvcmVkIGNsaWVudCBzZWNyZXQgYWdhaW5zdCBwcm92aWRlZCBjbGllbnQgc2VjcmV0XG5cdCovXG5cdGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVN0b3JlZENsaWVudFNlY3JldChjdHgsIHN0b3JlZENsaWVudFNlY3JldCwgY2xpZW50U2VjcmV0KSB7XG5cdFx0aWYgKG9wdHMuc3RvcmVDbGllbnRTZWNyZXQgPT09IFwiZW5jcnlwdGVkXCIpIHJldHVybiBhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0ZGF0YTogc3RvcmVkQ2xpZW50U2VjcmV0XG5cdFx0fSkgPT09IGNsaWVudFNlY3JldDtcblx0XHRpZiAob3B0cy5zdG9yZUNsaWVudFNlY3JldCA9PT0gXCJoYXNoZWRcIikgcmV0dXJuIGF3YWl0IGRlZmF1bHRDbGllbnRTZWNyZXRIYXNoZXIoY2xpZW50U2VjcmV0KSA9PT0gc3RvcmVkQ2xpZW50U2VjcmV0O1xuXHRcdGlmICh0eXBlb2Ygb3B0cy5zdG9yZUNsaWVudFNlY3JldCA9PT0gXCJvYmplY3RcIiAmJiBcImhhc2hcIiBpbiBvcHRzLnN0b3JlQ2xpZW50U2VjcmV0KSByZXR1cm4gYXdhaXQgb3B0cy5zdG9yZUNsaWVudFNlY3JldC5oYXNoKGNsaWVudFNlY3JldCkgPT09IHN0b3JlZENsaWVudFNlY3JldDtcblx0XHRpZiAodHlwZW9mIG9wdHMuc3RvcmVDbGllbnRTZWNyZXQgPT09IFwib2JqZWN0XCIgJiYgXCJkZWNyeXB0XCIgaW4gb3B0cy5zdG9yZUNsaWVudFNlY3JldCkgcmV0dXJuIGF3YWl0IG9wdHMuc3RvcmVDbGllbnRTZWNyZXQuZGVjcnlwdChzdG9yZWRDbGllbnRTZWNyZXQpID09PSBjbGllbnRTZWNyZXQ7XG5cdFx0cmV0dXJuIGNsaWVudFNlY3JldCA9PT0gc3RvcmVkQ2xpZW50U2VjcmV0O1xuXHR9XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwib2lkY1wiLFxuXHRcdGhvb2tzOiB7IGFmdGVyOiBbe1xuXHRcdFx0bWF0Y2hlcigpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9LFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBsb2dpblByb21wdENvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUoXCJvaWRjX2xvZ2luX3Byb21wdFwiLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdFx0XHRjb25zdCBjb29raWVOYW1lID0gY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuLm5hbWU7XG5cdFx0XHRcdGNvbnN0IHBhcnNlZFNldENvb2tpZUhlYWRlciA9IHBhcnNlU2V0Q29va2llSGVhZGVyKGN0eC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycz8uZ2V0KFwic2V0LWNvb2tpZVwiKSB8fCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgaGFzU2Vzc2lvblRva2VuID0gcGFyc2VkU2V0Q29va2llSGVhZGVyLmhhcyhjb29raWVOYW1lKTtcblx0XHRcdFx0aWYgKCFsb2dpblByb21wdENvb2tpZSB8fCAhaGFzU2Vzc2lvblRva2VuKSByZXR1cm47XG5cdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRuYW1lOiBcIm9pZGNfbG9naW5fcHJvbXB0XCIsXG5cdFx0XHRcdFx0YXR0cmlidXRlczogeyBwYXRoOiBcIi9cIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uVG9rZW4gPSAocGFyc2VkU2V0Q29va2llSGVhZGVyLmdldChjb29raWVOYW1lKT8udmFsdWUpPy5zcGxpdChcIi5cIilbMF07XG5cdFx0XHRcdGlmICghc2Vzc2lvblRva2VuKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24oc2Vzc2lvblRva2VuKSB8fCBjdHguY29udGV4dC5uZXdTZXNzaW9uO1xuXHRcdFx0XHRpZiAoIXNlc3Npb24pIHJldHVybjtcblx0XHRcdFx0Y3R4LnF1ZXJ5ID0gSlNPTi5wYXJzZShsb2dpblByb21wdENvb2tpZSk7XG5cdFx0XHRcdGNvbnN0IHByb21wdFNldCA9IHBhcnNlUHJvbXB0KFN0cmluZyhjdHgucXVlcnk/LnByb21wdCkpO1xuXHRcdFx0XHRpZiAocHJvbXB0U2V0LmhhcyhcImxvZ2luXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3UHJvbXB0U2V0ID0gbmV3IFNldChwcm9tcHRTZXQpO1xuXHRcdFx0XHRcdG5ld1Byb21wdFNldC5kZWxldGUoXCJsb2dpblwiKTtcblx0XHRcdFx0XHRjdHgucXVlcnkgPSB7XG5cdFx0XHRcdFx0XHQuLi5jdHgucXVlcnksXG5cdFx0XHRcdFx0XHRwcm9tcHQ6IEFycmF5LmZyb20obmV3UHJvbXB0U2V0KS5qb2luKFwiIFwiKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdHJldHVybiBhd2FpdCBhdXRob3JpemUoY3R4LCBvcHRzKTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdGdldE9wZW5JZENvbmZpZzogY3JlYXRlQXV0aEVuZHBvaW50KFwiLy53ZWxsLWtub3duL29wZW5pZC1jb25maWd1cmF0aW9uXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJnZXRPcGVuSWRDb25maWdcIixcblx0XHRcdFx0bWV0YWRhdGE6IEhJREVfTUVUQURBVEFcblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgbWV0YWRhdGEgPSBnZXRNZXRhZGF0YShjdHgsIG9wdGlvbnMpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obWV0YWRhdGEpO1xuXHRcdFx0fSksXG5cdFx0XHRvQXV0aDJhdXRob3JpemU6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vYXV0aDIvYXV0aG9yaXplXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJvYXV0aDJBdXRob3JpemVcIixcblx0XHRcdFx0cXVlcnk6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQXV0aG9yaXplIGFuIE9BdXRoMiByZXF1ZXN0XCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkF1dGhvcml6YXRpb24gcmVzcG9uc2UgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0YWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkF1dGhvcml6YXRpb24gcmVzcG9uc2UsIGNvbnRlbnRzIGRlcGVuZCBvbiB0aGUgYXV0aG9yaXplIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uXCJcblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYXV0aG9yaXplKGN0eCwgb3B0cyk7XG5cdFx0XHR9KSxcblx0XHRcdG9BdXRoQ29uc2VudDogY3JlYXRlQXV0aEVuZHBvaW50KFwiL29hdXRoMi9jb25zZW50XCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0b3BlcmF0aW9uSWQ6IFwib2F1dGgyQ29uc2VudFwiLFxuXHRcdFx0XHRib2R5OiBvQXV0aENvbnNlbnRCb2R5U2NoZW1hLFxuXHRcdFx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJIYW5kbGUgT0F1dGgyIGNvbnNlbnQuIFN1cHBvcnRzIGJvdGggVVJMIHBhcmFtZXRlci1iYXNlZCBmbG93cyAoY29uc2VudF9jb2RlIGluIGJvZHkpIGFuZCBjb29raWUtYmFzZWQgZmxvd3MgKHNpZ25lZCBjb29raWUpLlwiLFxuXHRcdFx0XHRcdHJlcXVlc3RCb2R5OiB7XG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRhY2NlcHQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBhY2NlcHRzIG9yIGRlbmllcyB0aGUgY29uc2VudCByZXF1ZXN0XCJcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGNvbnNlbnRfY29kZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBjb25zZW50IGNvZGUgZnJvbSB0aGUgYXV0aG9yaXphdGlvbiByZXF1ZXN0LiBPcHRpb25hbCBpZiB1c2luZyBjb29raWUtYmFzZWQgZmxvdy5cIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcImFjY2VwdFwiXVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDb25zZW50IHByb2Nlc3NlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgcmVkaXJlY3RVUkk6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJ1cmlcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJJIHRvIHJlZGlyZWN0IHRvLCBlaXRoZXIgd2l0aCBhbiBhdXRob3JpemF0aW9uIGNvZGUgb3IgYW4gZXJyb3JcIlxuXHRcdFx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJyZWRpcmVjdFVSSVwiXVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGxldCBjb25zZW50Q29kZSA9IGN0eC5ib2R5LmNvbnNlbnRfY29kZSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoIWNvbnNlbnRDb2RlKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29va2llVmFsdWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKFwib2lkY19jb25zZW50X3Byb21wdFwiLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdFx0XHRcdGlmIChjb29raWVWYWx1ZSkgY29uc2VudENvZGUgPSBjb29raWVWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWNvbnNlbnRDb2RlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvbnNlbnRfY29kZSBpcyByZXF1aXJlZCAoZWl0aGVyIGluIGJvZHkgb3IgY29va2llKVwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGNvbnNlbnRDb2RlKTtcblx0XHRcdFx0aWYgKCF2ZXJpZmljYXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiSW52YWxpZCBjb2RlXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh2ZXJpZmljYXRpb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiQ29kZSBleHBpcmVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRuYW1lOiBcIm9pZGNfY29uc2VudF9wcm9tcHRcIixcblx0XHRcdFx0XHRhdHRyaWJ1dGVzOiB7IHBhdGg6IFwiL1wiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gSlNPTi5wYXJzZSh2ZXJpZmljYXRpb24udmFsdWUpO1xuXHRcdFx0XHRpZiAoIXZhbHVlLnJlcXVpcmVDb25zZW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIkNvbnNlbnQgbm90IHJlcXVpcmVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghY3R4LmJvZHkuYWNjZXB0KSB7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvbi5pZCk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHsgcmVkaXJlY3RVUkk6IGAke3ZhbHVlLnJlZGlyZWN0VVJJfT9lcnJvcj1hY2Nlc3NfZGVuaWVkJmVycm9yX2Rlc2NyaXB0aW9uPVVzZXIgZGVuaWVkIGFjY2Vzc2AgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgY29kZSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcImEtelwiLCBcIkEtWlwiLCBcIjAtOVwiKTtcblx0XHRcdFx0Y29uc3QgY29kZUV4cGlyZXNJbk1zID0gKG9wdHM/LmNvZGVFeHBpcmVzSW4gPz8gREVGQVVMVF9DT0RFX0VYUElSRVNfSU4pICogMWUzO1xuXHRcdFx0XHRjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgY29kZUV4cGlyZXNJbk1zKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvbi5pZCwge1xuXHRcdFx0XHRcdHZhbHVlOiBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHQuLi52YWx1ZSxcblx0XHRcdFx0XHRcdHJlcXVpcmVDb25zZW50OiBmYWxzZVxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdGlkZW50aWZpZXI6IGNvZGUsXG5cdFx0XHRcdFx0ZXhwaXJlc0F0XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRcdFx0bW9kZWw6IG1vZGVsTmFtZS5vYXV0aENvbnNlbnQsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0Y2xpZW50SWQ6IHZhbHVlLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0dXNlcklkOiB2YWx1ZS51c2VySWQsXG5cdFx0XHRcdFx0XHRzY29wZXM6IHZhbHVlLnNjb3BlLmpvaW4oXCIgXCIpLFxuXHRcdFx0XHRcdFx0Y29uc2VudEdpdmVuOiB0cnVlLFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCByZWRpcmVjdFVSSSA9IG5ldyBVUkwodmFsdWUucmVkaXJlY3RVUkkpO1xuXHRcdFx0XHRyZWRpcmVjdFVSSS5zZWFyY2hQYXJhbXMuc2V0KFwiY29kZVwiLCBjb2RlKTtcblx0XHRcdFx0aWYgKHZhbHVlLnN0YXRlKSByZWRpcmVjdFVSSS5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgdmFsdWUuc3RhdGUpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyByZWRpcmVjdFVSSTogcmVkaXJlY3RVUkkudG9TdHJpbmcoKSB9KTtcblx0XHRcdH0pLFxuXHRcdFx0b0F1dGgydG9rZW46IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vYXV0aDIvdG9rZW5cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJvYXV0aDJUb2tlblwiLFxuXHRcdFx0XHRib2R5OiBvQXV0aDJUb2tlbkJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRcdFx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsIFwiYXBwbGljYXRpb24vanNvblwiXVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGxldCB7IGJvZHkgfSA9IGN0eDtcblx0XHRcdFx0aWYgKCFib2R5KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwicmVxdWVzdCBib2R5IG5vdCBmb3VuZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoYm9keSBpbnN0YW5jZW9mIEZvcm1EYXRhKSBib2R5ID0gT2JqZWN0LmZyb21FbnRyaWVzKGJvZHkuZW50cmllcygpKTtcblx0XHRcdFx0aWYgKCEoYm9keSBpbnN0YW5jZW9mIE9iamVjdCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJyZXF1ZXN0IGJvZHkgaXMgbm90IGFuIG9iamVjdFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsZXQgeyBjbGllbnRfaWQsIGNsaWVudF9zZWNyZXQgfSA9IGJvZHk7XG5cdFx0XHRcdGNvbnN0IGF1dGhvcml6YXRpb24gPSBjdHgucmVxdWVzdD8uaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpIHx8IG51bGw7XG5cdFx0XHRcdGlmIChhdXRob3JpemF0aW9uICYmICFjbGllbnRfaWQgJiYgIWNsaWVudF9zZWNyZXQgJiYgYXV0aG9yaXphdGlvbi5zdGFydHNXaXRoKFwiQmFzaWMgXCIpKSB0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGVuY29kZWQgPSBhdXRob3JpemF0aW9uLnJlcGxhY2UoXCJCYXNpYyBcIiwgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgZGVjb2RlZCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShiYXNlNjQuZGVjb2RlKGVuY29kZWQpKTtcblx0XHRcdFx0XHRpZiAoIWRlY29kZWQuaW5jbHVkZXMoXCI6XCIpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCBhdXRob3JpemF0aW9uIGhlYWRlciBmb3JtYXRcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCBbaWQsIHNlY3JldF0gPSBkZWNvZGVkLnNwbGl0KFwiOlwiKTtcblx0XHRcdFx0XHRpZiAoIWlkIHx8ICFzZWNyZXQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyIGZvcm1hdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNsaWVudF9pZCA9IGlkO1xuXHRcdFx0XHRcdGNsaWVudF9zZWNyZXQgPSBzZWNyZXQ7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGF1dGhvcml6YXRpb24gaGVhZGVyIGZvcm1hdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRcdGNvbnN0IGlhdCA9IE1hdGguZmxvb3Iobm93IC8gMWUzKTtcblx0XHRcdFx0Y29uc3QgZXhwID0gaWF0ICsgKG9wdHMuYWNjZXNzVG9rZW5FeHBpcmVzSW4gPz8gMzYwMCk7XG5cdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKGV4cCAqIDFlMyk7XG5cdFx0XHRcdGNvbnN0IHJlZnJlc2hUb2tlbkV4cGlyZXNBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgoaWF0ICsgKG9wdHMucmVmcmVzaFRva2VuRXhwaXJlc0luID8/IDYwNDgwMCkpICogMWUzKTtcblx0XHRcdFx0Y29uc3QgeyBncmFudF90eXBlLCBjb2RlLCByZWRpcmVjdF91cmksIHJlZnJlc2hfdG9rZW4sIGNvZGVfdmVyaWZpZXIgfSA9IGJvZHk7XG5cdFx0XHRcdGlmIChncmFudF90eXBlID09PSBcInJlZnJlc2hfdG9rZW5cIikge1xuXHRcdFx0XHRcdGlmICghcmVmcmVzaF90b2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwicmVmcmVzaF90b2tlbiBpcyByZXF1aXJlZFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogbW9kZWxOYW1lLm9hdXRoQWNjZXNzVG9rZW4sXG5cdFx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwicmVmcmVzaFRva2VuXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiByZWZyZXNoX3Rva2VuLnRvU3RyaW5nKClcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKCF0b2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImludmFsaWQgcmVmcmVzaCB0b2tlblwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9ncmFudFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHRva2VuLmNsaWVudElkICE9PSBjbGllbnRfaWQ/LnRvU3RyaW5nKCkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNsaWVudF9pZFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICh0b2tlbi5yZWZyZXNoVG9rZW5FeHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcInJlZnJlc2ggdG9rZW4gZXhwaXJlZFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9ncmFudFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgYWNjZXNzVG9rZW4kMSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcImEtelwiLCBcIkEtWlwiKTtcblx0XHRcdFx0XHRjb25zdCBuZXdSZWZyZXNoVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJhLXpcIiwgXCJBLVpcIik7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IG1vZGVsTmFtZS5vYXV0aEFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW4kMSxcblx0XHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuOiBuZXdSZWZyZXNoVG9rZW4sXG5cdFx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0XHRcdGNsaWVudElkOiBjbGllbnRfaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0dXNlcklkOiB0b2tlbi51c2VySWQsXG5cdFx0XHRcdFx0XHRcdHNjb3BlczogdG9rZW4uc2NvcGVzLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZShpYXQgKiAxZTMpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZShpYXQgKiAxZTMpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRcdGFjY2Vzc190b2tlbjogYWNjZXNzVG9rZW4kMSxcblx0XHRcdFx0XHRcdHRva2VuX3R5cGU6IFwiQmVhcmVyXCIsXG5cdFx0XHRcdFx0XHRleHBpcmVzX2luOiBvcHRzLmFjY2Vzc1Rva2VuRXhwaXJlc0luLFxuXHRcdFx0XHRcdFx0cmVmcmVzaF90b2tlbjogbmV3UmVmcmVzaFRva2VuLFxuXHRcdFx0XHRcdFx0c2NvcGU6IHRva2VuLnNjb3Blc1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghY29kZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgaXMgcmVxdWlyZWRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKG9wdGlvbnMucmVxdWlyZVBLQ0UgJiYgIWNvZGVfdmVyaWZpZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjb2RlIHZlcmlmaWVyIGlzIG1pc3NpbmdcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogV2UgbmVlZCB0byBjaGVjayBpZiB0aGUgY29kZSBpcyB2YWxpZCBiZWZvcmUgd2UgY2FuIHByb2NlZWRcblx0XHRcdFx0KiB3aXRoIHRoZSByZXN0IG9mIHRoZSByZXF1ZXN0LlxuXHRcdFx0XHQqL1xuXHRcdFx0XHRjb25zdCB2ZXJpZmljYXRpb25WYWx1ZSA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoY29kZS50b1N0cmluZygpKTtcblx0XHRcdFx0aWYgKCF2ZXJpZmljYXRpb25WYWx1ZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNvZGVcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2dyYW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh2ZXJpZmljYXRpb25WYWx1ZS5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjb2RlIGV4cGlyZWRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2dyYW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb25WYWx1ZS5pZCk7XG5cdFx0XHRcdGlmICghY2xpZW50X2lkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNsaWVudF9pZCBpcyByZXF1aXJlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghZ3JhbnRfdHlwZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImdyYW50X3R5cGUgaXMgcmVxdWlyZWRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGdyYW50X3R5cGUgIT09IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJncmFudF90eXBlIG11c3QgYmUgJ2F1dGhvcml6YXRpb25fY29kZSdcIixcblx0XHRcdFx0XHRlcnJvcjogXCJ1bnN1cHBvcnRlZF9ncmFudF90eXBlXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghcmVkaXJlY3RfdXJpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwicmVkaXJlY3RfdXJpIGlzIHJlcXVpcmVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudChjbGllbnRfaWQudG9TdHJpbmcoKSwgdHJ1c3RlZENsaWVudHMpO1xuXHRcdFx0XHRpZiAoIWNsaWVudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNsaWVudF9pZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChjbGllbnQuZGlzYWJsZWQpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY2xpZW50IGlzIGRpc2FibGVkXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSBKU09OLnBhcnNlKHZlcmlmaWNhdGlvblZhbHVlLnZhbHVlKTtcblx0XHRcdFx0aWYgKHZhbHVlLmNsaWVudElkICE9PSBjbGllbnRfaWQudG9TdHJpbmcoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJpbnZhbGlkIGNsaWVudF9pZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh2YWx1ZS5yZWRpcmVjdFVSSSAhPT0gcmVkaXJlY3RfdXJpLnRvU3RyaW5nKCkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCByZWRpcmVjdF91cmlcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2NsaWVudFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAodmFsdWUuY29kZUNoYWxsZW5nZSAmJiAhY29kZV92ZXJpZmllcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgdmVyaWZpZXIgaXMgbWlzc2luZ1wiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY2xpZW50LnR5cGUgPT09IFwicHVibGljXCIpIHtcblx0XHRcdFx0XHRpZiAoIWNvZGVfdmVyaWZpZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgdmVyaWZpZXIgaXMgcmVxdWlyZWQgZm9yIHB1YmxpYyBjbGllbnRzXCIsXG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghY2xpZW50LmNsaWVudFNlY3JldCB8fCAhY2xpZW50X3NlY3JldCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNsaWVudF9zZWNyZXQgaXMgcmVxdWlyZWQgZm9yIGNvbmZpZGVudGlhbCBjbGllbnRzXCIsXG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2NsaWVudFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKCFhd2FpdCB2ZXJpZnlTdG9yZWRDbGllbnRTZWNyZXQoY3R4LCBjbGllbnQuY2xpZW50U2VjcmV0LCBjbGllbnRfc2VjcmV0LnRvU3RyaW5nKCkpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCBjbGllbnRfc2VjcmV0XCIsXG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2NsaWVudFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCh2YWx1ZS5jb2RlQ2hhbGxlbmdlTWV0aG9kID09PSBcInBsYWluXCIgPyBjb2RlX3ZlcmlmaWVyIDogYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS5kaWdlc3QoY29kZV92ZXJpZmllcikpICE9PSB2YWx1ZS5jb2RlQ2hhbGxlbmdlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNvZGUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCByZXF1ZXN0ZWRTY29wZXMgPSB2YWx1ZS5zY29wZTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvblZhbHVlLmlkKTtcblx0XHRcdFx0Y29uc3QgYWNjZXNzVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJhLXpcIiwgXCJBLVpcIik7XG5cdFx0XHRcdGNvbnN0IHJlZnJlc2hUb2tlbiA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcIkEtWlwiLCBcImEtelwiKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBtb2RlbE5hbWUub2F1dGhBY2Nlc3NUb2tlbixcblx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRhY2Nlc3NUb2tlbixcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbixcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdFx0Y2xpZW50SWQ6IGNsaWVudF9pZC50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0dXNlcklkOiB2YWx1ZS51c2VySWQsXG5cdFx0XHRcdFx0XHRzY29wZXM6IHJlcXVlc3RlZFNjb3Blcy5qb2luKFwiIFwiKSxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKGlhdCAqIDFlMyksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZShpYXQgKiAxZTMpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQodmFsdWUudXNlcklkKTtcblx0XHRcdFx0aWYgKCF1c2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcInVzZXIgbm90IGZvdW5kXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9ncmFudFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBwcm9maWxlID0ge1xuXHRcdFx0XHRcdGdpdmVuX25hbWU6IHVzZXIubmFtZS5zcGxpdChcIiBcIilbMF0sXG5cdFx0XHRcdFx0ZmFtaWx5X25hbWU6IHVzZXIubmFtZS5zcGxpdChcIiBcIilbMV0sXG5cdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdHByb2ZpbGU6IHVzZXIuaW1hZ2UsXG5cdFx0XHRcdFx0dXBkYXRlZF9hdDogbmV3IERhdGUodXNlci51cGRhdGVkQXQpLnRvSVNPU3RyaW5nKClcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgZW1haWwgPSB7XG5cdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0ZW1haWxfdmVyaWZpZWQ6IHVzZXIuZW1haWxWZXJpZmllZFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCB1c2VyQ2xhaW1zID0ge1xuXHRcdFx0XHRcdC4uLnJlcXVlc3RlZFNjb3Blcy5pbmNsdWRlcyhcInByb2ZpbGVcIikgPyBwcm9maWxlIDoge30sXG5cdFx0XHRcdFx0Li4ucmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwiZW1haWxcIikgPyBlbWFpbCA6IHt9XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IGFkZGl0aW9uYWxVc2VyQ2xhaW1zID0gb3B0aW9ucy5nZXRBZGRpdGlvbmFsVXNlckluZm9DbGFpbSA/IGF3YWl0IG9wdGlvbnMuZ2V0QWRkaXRpb25hbFVzZXJJbmZvQ2xhaW0odXNlciwgcmVxdWVzdGVkU2NvcGVzLCBjbGllbnQpIDoge307XG5cdFx0XHRcdGNvbnN0IHBheWxvYWQgPSB7XG5cdFx0XHRcdFx0c3ViOiB1c2VyLmlkLFxuXHRcdFx0XHRcdGF1ZDogY2xpZW50X2lkLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0aWF0LFxuXHRcdFx0XHRcdGF1dGhfdGltZTogY3R4LmNvbnRleHQuc2Vzc2lvbiA/IG5ldyBEYXRlKGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLmdldFRpbWUoKSA6IHZvaWQgMCxcblx0XHRcdFx0XHRub25jZTogdmFsdWUubm9uY2UsXG5cdFx0XHRcdFx0YWNyOiBcInVybjptYWNlOmluY29tbW9uOmlhcDpzaWx2ZXJcIixcblx0XHRcdFx0XHQuLi51c2VyQ2xhaW1zLFxuXHRcdFx0XHRcdC4uLmFkZGl0aW9uYWxVc2VyQ2xhaW1zXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IGV4cGlyYXRpb25UaW1lID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSArIChvcHRzPy5hY2Nlc3NUb2tlbkV4cGlyZXNJbiA/PyBERUZBVUxUX0FDQ0VTU19UT0tFTl9FWFBJUkVTX0lOKTtcblx0XHRcdFx0bGV0IGlkVG9rZW47XG5cdFx0XHRcdGlmIChvcHRpb25zLnVzZUpXVFBsdWdpbikge1xuXHRcdFx0XHRcdGNvbnN0IGp3dFBsdWdpbiA9IGdldEp3dFBsdWdpbihjdHgpO1xuXHRcdFx0XHRcdGlmICghand0UGx1Z2luKSB7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJPSURDOiBgdXNlSldUUGx1Z2luYCBpcyBlbmFibGVkIGJ1dCB0aGUgSldUIHBsdWdpbiBpcyBub3QgYXZhaWxhYmxlLiBNYWtlIHN1cmUgeW91IGhhdmUgdGhlIEpXVCBQbHVnaW4gaW4geW91ciBwbHVnaW5zIGFycmF5IG9yIHNldCBgdXNlSldUUGx1Z2luYCB0byBmYWxzZS5cIik7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwge1xuXHRcdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJKV1QgcGx1Z2luIGlzIG5vdCBlbmFibGVkXCIsXG5cdFx0XHRcdFx0XHRcdGVycm9yOiBcImludGVybmFsX3NlcnZlcl9lcnJvclwiXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWRUb2tlbiA9IGF3YWl0IGdldEp3dFRva2VuKHtcblx0XHRcdFx0XHRcdC4uLmN0eCxcblx0XHRcdFx0XHRcdGNvbnRleHQ6IHtcblx0XHRcdFx0XHRcdFx0Li4uY3R4LmNvbnRleHQsXG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoaWF0ICogMWUzKSxcblx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKGlhdCAqIDFlMyksXG5cdFx0XHRcdFx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IGFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdFx0XHRcdFx0dG9rZW46IGFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXBBZGRyZXNzOiBjdHgucmVxdWVzdD8uaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1mb3JcIilcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRcdC4uLmp3dFBsdWdpbi5vcHRpb25zLFxuXHRcdFx0XHRcdFx0and0OiB7XG5cdFx0XHRcdFx0XHRcdC4uLmp3dFBsdWdpbi5vcHRpb25zPy5qd3QsXG5cdFx0XHRcdFx0XHRcdGdldFN1YmplY3Q6ICgpID0+IHVzZXIuaWQsXG5cdFx0XHRcdFx0XHRcdGF1ZGllbmNlOiBjbGllbnRfaWQudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0aXNzdWVyOiBqd3RQbHVnaW4ub3B0aW9ucz8uand0Py5pc3N1ZXIgPz8gY3R4LmNvbnRleHQub3B0aW9ucy5iYXNlVVJMLFxuXHRcdFx0XHRcdFx0XHRleHBpcmF0aW9uVGltZSxcblx0XHRcdFx0XHRcdFx0ZGVmaW5lUGF5bG9hZDogKCkgPT4gcGF5bG9hZFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWRUb2tlbiA9IGF3YWl0IG5ldyBTaWduSldUKHBheWxvYWQpLnNldFByb3RlY3RlZEhlYWRlcih7IGFsZzogXCJIUzI1NlwiIH0pLnNldElzc3VlZEF0KGlhdCkuc2V0RXhwaXJhdGlvblRpbWUoYWNjZXNzVG9rZW5FeHBpcmVzQXQpLnNpZ24obmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNsaWVudC5jbGllbnRTZWNyZXQpKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdHRva2VuX3R5cGU6IFwiQmVhcmVyXCIsXG5cdFx0XHRcdFx0ZXhwaXJlc19pbjogb3B0cy5hY2Nlc3NUb2tlbkV4cGlyZXNJbixcblx0XHRcdFx0XHRyZWZyZXNoX3Rva2VuOiByZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJvZmZsaW5lX2FjY2Vzc1wiKSA/IHJlZnJlc2hUb2tlbiA6IHZvaWQgMCxcblx0XHRcdFx0XHRzY29wZTogcmVxdWVzdGVkU2NvcGVzLmpvaW4oXCIgXCIpLFxuXHRcdFx0XHRcdGlkX3Rva2VuOiByZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJvcGVuaWRcIikgPyBpZFRva2VuIDogdm9pZCAwXG5cdFx0XHRcdH0sIHsgaGVhZGVyczoge1xuXHRcdFx0XHRcdFwiQ2FjaGUtQ29udHJvbFwiOiBcIm5vLXN0b3JlXCIsXG5cdFx0XHRcdFx0UHJhZ21hOiBcIm5vLWNhY2hlXCJcblx0XHRcdFx0fSB9KTtcblx0XHRcdH0pLFxuXHRcdFx0b0F1dGgydXNlckluZm86IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vYXV0aDIvdXNlcmluZm9cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdG9wZXJhdGlvbklkOiBcIm9hdXRoMlVzZXJpbmZvXCIsXG5cdFx0XHRcdG1ldGFkYXRhOiB7XG5cdFx0XHRcdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRcdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJHZXQgT0F1dGgyIHVzZXIgaW5mb3JtYXRpb25cIixcblx0XHRcdFx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgaW5mb3JtYXRpb24gcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0c3ViOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1YmplY3QgaWRlbnRpZmllciAodXNlciBJRClcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIGVtYWlsIGFkZHJlc3MsIGluY2x1ZGVkIGlmICdlbWFpbCcgc2NvcGUgaXMgZ3JhbnRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIGZ1bGwgbmFtZSwgaW5jbHVkZWQgaWYgJ3Byb2ZpbGUnIHNjb3BlIGlzIGdyYW50ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdHBpY3R1cmU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIHByb2ZpbGUgcGljdHVyZSBVUkwsIGluY2x1ZGVkIGlmICdwcm9maWxlJyBzY29wZSBpcyBncmFudGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRnaXZlbl9uYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyJ3MgZ2l2ZW4gbmFtZSwgaW5jbHVkZWQgaWYgJ3Byb2ZpbGUnIHNjb3BlIGlzIGdyYW50ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGZhbWlseV9uYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyJ3MgZmFtaWx5IG5hbWUsIGluY2x1ZGVkIGlmICdwcm9maWxlJyBzY29wZSBpcyBncmFudGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRlbWFpbF92ZXJpZmllZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGlzIHZlcmlmaWVkLCBpbmNsdWRlZCBpZiAnZW1haWwnIHNjb3BlIGlzIGdyYW50ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1YlwiXVxuXHRcdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdFx0fSB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGlmICghY3R4LnJlcXVlc3QpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwicmVxdWVzdCBub3QgZm91bmRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgYXV0aG9yaXphdGlvbiA9IGN0eC5yZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcblx0XHRcdFx0aWYgKCFhdXRob3JpemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImF1dGhvcml6YXRpb24gaGVhZGVyIG5vdCBmb3VuZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGF1dGhvcml6YXRpb24ucmVwbGFjZShcIkJlYXJlciBcIiwgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogbW9kZWxOYW1lLm9hdXRoQWNjZXNzVG9rZW4sXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJhY2Nlc3NUb2tlblwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRva2VuXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghYWNjZXNzVG9rZW4pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiaW52YWxpZCBhY2Nlc3MgdG9rZW5cIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3Rva2VuXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChhY2Nlc3NUb2tlbi5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIlRoZSBBY2Nlc3MgVG9rZW4gZXhwaXJlZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfdG9rZW5cIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0Q2xpZW50KGFjY2Vzc1Rva2VuLmNsaWVudElkLCB0cnVzdGVkQ2xpZW50cyk7XG5cdFx0XHRcdGlmICghY2xpZW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcImNsaWVudCBub3QgZm91bmRcIixcblx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3Rva2VuXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKGFjY2Vzc1Rva2VuLnVzZXJJZCk7XG5cdFx0XHRcdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJ1c2VyIG5vdCBmb3VuZFwiLFxuXHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfdG9rZW5cIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgcmVxdWVzdGVkU2NvcGVzID0gYWNjZXNzVG9rZW4uc2NvcGVzLnNwbGl0KFwiIFwiKTtcblx0XHRcdFx0Y29uc3QgYmFzZVVzZXJDbGFpbXMgPSB7XG5cdFx0XHRcdFx0c3ViOiB1c2VyLmlkLFxuXHRcdFx0XHRcdGVtYWlsOiByZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJlbWFpbFwiKSA/IHVzZXIuZW1haWwgOiB2b2lkIDAsXG5cdFx0XHRcdFx0bmFtZTogcmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwicHJvZmlsZVwiKSA/IHVzZXIubmFtZSA6IHZvaWQgMCxcblx0XHRcdFx0XHRwaWN0dXJlOiByZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJwcm9maWxlXCIpID8gdXNlci5pbWFnZSA6IHZvaWQgMCxcblx0XHRcdFx0XHRnaXZlbl9uYW1lOiByZXF1ZXN0ZWRTY29wZXMuaW5jbHVkZXMoXCJwcm9maWxlXCIpID8gdXNlci5uYW1lLnNwbGl0KFwiIFwiKVswXSA6IHZvaWQgMCxcblx0XHRcdFx0XHRmYW1pbHlfbmFtZTogcmVxdWVzdGVkU2NvcGVzLmluY2x1ZGVzKFwicHJvZmlsZVwiKSA/IHVzZXIubmFtZS5zcGxpdChcIiBcIilbMV0gOiB2b2lkIDAsXG5cdFx0XHRcdFx0ZW1haWxfdmVyaWZpZWQ6IHJlcXVlc3RlZFNjb3Blcy5pbmNsdWRlcyhcImVtYWlsXCIpID8gdXNlci5lbWFpbFZlcmlmaWVkIDogdm9pZCAwXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHVzZXJDbGFpbXMgPSBvcHRpb25zLmdldEFkZGl0aW9uYWxVc2VySW5mb0NsYWltID8gYXdhaXQgb3B0aW9ucy5nZXRBZGRpdGlvbmFsVXNlckluZm9DbGFpbSh1c2VyLCByZXF1ZXN0ZWRTY29wZXMsIGNsaWVudCkgOiBiYXNlVXNlckNsYWltcztcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHQuLi5iYXNlVXNlckNsYWltcyxcblx0XHRcdFx0XHQuLi51c2VyQ2xhaW1zXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSksXG5cdFx0XHRyZWdpc3Rlck9BdXRoQXBwbGljYXRpb246IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vYXV0aDIvcmVnaXN0ZXJcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiByZWdpc3Rlck9BdXRoQXBwbGljYXRpb25Cb2R5U2NoZW1hLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiUmVnaXN0ZXIgYW4gT0F1dGgyIGFwcGxpY2F0aW9uXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk9BdXRoMiBhcHBsaWNhdGlvbiByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJOYW1lIG9mIHRoZSBPQXV0aDIgYXBwbGljYXRpb25cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSWNvbiBVUkwgZm9yIHRoZSBhcHBsaWNhdGlvblwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBZGRpdGlvbmFsIG1ldGFkYXRhIGZvciB0aGUgYXBwbGljYXRpb25cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50SWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNsaWVudFwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRjbGllbnRTZWNyZXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTZWNyZXQga2V5IGZvciB0aGUgY2xpZW50XCJcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHJlZGlyZWN0VVJMczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBvZiBhbGxvd2VkIHJlZGlyZWN0IFVSTHNcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dHlwZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlR5cGUgb2YgdGhlIGNsaWVudFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZW51bTogW1wid2ViXCJdXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRhdXRoZW50aWNhdGlvblNjaGVtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkF1dGhlbnRpY2F0aW9uIHNjaGVtZSB1c2VkIGJ5IHRoZSBjbGllbnRcIixcblx0XHRcdFx0XHRcdFx0XHRcdGVudW06IFtcImNsaWVudF9zZWNyZXRcIl1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGRpc2FibGVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGNsaWVudCBpcyBkaXNhYmxlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZW51bTogW2ZhbHNlXVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dXNlcklkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJRCBvZiB0aGUgdXNlciB3aG8gcmVnaXN0ZXJlZCB0aGUgY2xpZW50LCBudWxsIGlmIHJlZ2lzdGVyZWQgYW5vbnltb3VzbHlcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRpb24gdGltZXN0YW1wXCJcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkxhc3QgdXBkYXRlIHRpbWVzdGFtcFwiXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiY2xpZW50SWRcIixcblx0XHRcdFx0XHRcdFx0XHRcImNsaWVudFNlY3JldFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwicmVkaXJlY3RVUkxzXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJhdXRoZW50aWNhdGlvblNjaGVtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFwiZGlzYWJsZWRcIixcblx0XHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGJvZHkgPSBjdHguYm9keTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0XHRcdGlmICghc2Vzc2lvbiAmJiAhb3B0aW9ucy5hbGxvd0R5bmFtaWNDbGllbnRSZWdpc3RyYXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF90b2tlblwiLFxuXHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIkF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciBjbGllbnQgcmVnaXN0cmF0aW9uXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICgoIWJvZHkuZ3JhbnRfdHlwZXMgfHwgYm9keS5ncmFudF90eXBlcy5pbmNsdWRlcyhcImF1dGhvcml6YXRpb25fY29kZVwiKSB8fCBib2R5LmdyYW50X3R5cGVzLmluY2x1ZGVzKFwiaW1wbGljaXRcIikpICYmICghYm9keS5yZWRpcmVjdF91cmlzIHx8IGJvZHkucmVkaXJlY3RfdXJpcy5sZW5ndGggPT09IDApKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZWRpcmVjdF91cmlcIixcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJSZWRpcmVjdCBVUklzIGFyZSByZXF1aXJlZCBmb3IgYXV0aG9yaXphdGlvbl9jb2RlIGFuZCBpbXBsaWNpdCBncmFudCB0eXBlc1wiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoYm9keS5ncmFudF90eXBlcyAmJiBib2R5LnJlc3BvbnNlX3R5cGVzKSB7XG5cdFx0XHRcdFx0aWYgKGJvZHkuZ3JhbnRfdHlwZXMuaW5jbHVkZXMoXCJhdXRob3JpemF0aW9uX2NvZGVcIikgJiYgIWJvZHkucmVzcG9uc2VfdHlwZXMuaW5jbHVkZXMoXCJjb2RlXCIpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2NsaWVudF9tZXRhZGF0YVwiLFxuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiV2hlbiAnYXV0aG9yaXphdGlvbl9jb2RlJyBncmFudCB0eXBlIGlzIHVzZWQsICdjb2RlJyByZXNwb25zZSB0eXBlIG11c3QgYmUgaW5jbHVkZWRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChib2R5LmdyYW50X3R5cGVzLmluY2x1ZGVzKFwiaW1wbGljaXRcIikgJiYgIWJvZHkucmVzcG9uc2VfdHlwZXMuaW5jbHVkZXMoXCJ0b2tlblwiKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9jbGllbnRfbWV0YWRhdGFcIixcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcIldoZW4gJ2ltcGxpY2l0JyBncmFudCB0eXBlIGlzIHVzZWQsICd0b2tlbicgcmVzcG9uc2UgdHlwZSBtdXN0IGJlIGluY2x1ZGVkXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBjbGllbnRJZCA9IG9wdGlvbnMuZ2VuZXJhdGVDbGllbnRJZD8uKCkgfHwgZ2VuZXJhdGVSYW5kb21TdHJpbmcoMzIsIFwiYS16XCIsIFwiQS1aXCIpO1xuXHRcdFx0XHRjb25zdCBjbGllbnRTZWNyZXQgPSBvcHRpb25zLmdlbmVyYXRlQ2xpZW50U2VjcmV0Py4oKSB8fCBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMiwgXCJhLXpcIiwgXCJBLVpcIik7XG5cdFx0XHRcdGNvbnN0IHN0b3JlZENsaWVudFNlY3JldCA9IGF3YWl0IHN0b3JlQ2xpZW50U2VjcmV0KGN0eCwgY2xpZW50U2VjcmV0KTtcblx0XHRcdFx0Y29uc3QgY2xpZW50ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBtb2RlbE5hbWUub2F1dGhDbGllbnQsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0bmFtZTogYm9keS5jbGllbnRfbmFtZSxcblx0XHRcdFx0XHRcdGljb246IGJvZHkubG9nb191cmksXG5cdFx0XHRcdFx0XHRtZXRhZGF0YTogYm9keS5tZXRhZGF0YSA/IEpTT04uc3RyaW5naWZ5KGJvZHkubWV0YWRhdGEpIDogbnVsbCxcblx0XHRcdFx0XHRcdGNsaWVudElkLFxuXHRcdFx0XHRcdFx0Y2xpZW50U2VjcmV0OiBzdG9yZWRDbGllbnRTZWNyZXQsXG5cdFx0XHRcdFx0XHRyZWRpcmVjdFVybHM6IGJvZHkucmVkaXJlY3RfdXJpcy5qb2luKFwiLFwiKSxcblx0XHRcdFx0XHRcdHR5cGU6IFwid2ViXCIsXG5cdFx0XHRcdFx0XHRhdXRoZW50aWNhdGlvblNjaGVtZTogYm9keS50b2tlbl9lbmRwb2ludF9hdXRoX21ldGhvZCB8fCBcImNsaWVudF9zZWNyZXRfYmFzaWNcIixcblx0XHRcdFx0XHRcdGRpc2FibGVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHVzZXJJZDogc2Vzc2lvbj8uc2Vzc2lvbi51c2VySWQsXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0Y2xpZW50X2lkOiBjbGllbnRJZCxcblx0XHRcdFx0XHQuLi5jbGllbnQudHlwZSAhPT0gXCJwdWJsaWNcIiA/IHtcblx0XHRcdFx0XHRcdGNsaWVudF9zZWNyZXQ6IGNsaWVudFNlY3JldCxcblx0XHRcdFx0XHRcdGNsaWVudF9zZWNyZXRfZXhwaXJlc19hdDogMFxuXHRcdFx0XHRcdH0gOiB7fSxcblx0XHRcdFx0XHRjbGllbnRfaWRfaXNzdWVkX2F0OiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpLFxuXHRcdFx0XHRcdGNsaWVudF9zZWNyZXRfZXhwaXJlc19hdDogMCxcblx0XHRcdFx0XHRyZWRpcmVjdF91cmlzOiBib2R5LnJlZGlyZWN0X3VyaXMsXG5cdFx0XHRcdFx0dG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2Q6IGJvZHkudG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QgfHwgXCJjbGllbnRfc2VjcmV0X2Jhc2ljXCIsXG5cdFx0XHRcdFx0Z3JhbnRfdHlwZXM6IGJvZHkuZ3JhbnRfdHlwZXMgfHwgW1wiYXV0aG9yaXphdGlvbl9jb2RlXCJdLFxuXHRcdFx0XHRcdHJlc3BvbnNlX3R5cGVzOiBib2R5LnJlc3BvbnNlX3R5cGVzIHx8IFtcImNvZGVcIl0sXG5cdFx0XHRcdFx0Y2xpZW50X25hbWU6IGJvZHkuY2xpZW50X25hbWUsXG5cdFx0XHRcdFx0Y2xpZW50X3VyaTogYm9keS5jbGllbnRfdXJpLFxuXHRcdFx0XHRcdGxvZ29fdXJpOiBib2R5LmxvZ29fdXJpLFxuXHRcdFx0XHRcdHNjb3BlOiBib2R5LnNjb3BlLFxuXHRcdFx0XHRcdGNvbnRhY3RzOiBib2R5LmNvbnRhY3RzLFxuXHRcdFx0XHRcdHRvc191cmk6IGJvZHkudG9zX3VyaSxcblx0XHRcdFx0XHRwb2xpY3lfdXJpOiBib2R5LnBvbGljeV91cmksXG5cdFx0XHRcdFx0andrc191cmk6IGJvZHkuandrc191cmksXG5cdFx0XHRcdFx0andrczogYm9keS5qd2tzLFxuXHRcdFx0XHRcdHNvZnR3YXJlX2lkOiBib2R5LnNvZnR3YXJlX2lkLFxuXHRcdFx0XHRcdHNvZnR3YXJlX3ZlcnNpb246IGJvZHkuc29mdHdhcmVfdmVyc2lvbixcblx0XHRcdFx0XHRzb2Z0d2FyZV9zdGF0ZW1lbnQ6IGJvZHkuc29mdHdhcmVfc3RhdGVtZW50LFxuXHRcdFx0XHRcdG1ldGFkYXRhOiBib2R5Lm1ldGFkYXRhXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRzdGF0dXM6IDIwMSxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiLFxuXHRcdFx0XHRcdFx0UHJhZ21hOiBcIm5vLWNhY2hlXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSksXG5cdFx0XHRnZXRPQXV0aENsaWVudDogY3JlYXRlQXV0aEVuZHBvaW50KFwiL29hdXRoMi9jbGllbnQvOmlkXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJHZXQgT0F1dGgyIGNsaWVudCBkZXRhaWxzXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk9BdXRoMiBjbGllbnQgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjbGllbnRcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk5hbWUgb2YgdGhlIE9BdXRoMiBhcHBsaWNhdGlvblwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRpY29uOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJY29uIFVSTCBmb3IgdGhlIGFwcGxpY2F0aW9uXCJcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJjbGllbnRJZFwiLCBcIm5hbWVcIl1cblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRDbGllbnQoY3R4LnBhcmFtcy5pZCwgdHJ1c3RlZENsaWVudHMpO1xuXHRcdFx0XHRpZiAoIWNsaWVudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHtcblx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjbGllbnQgbm90IGZvdW5kXCIsXG5cdFx0XHRcdFx0ZXJyb3I6IFwibm90X2ZvdW5kXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0Y2xpZW50SWQ6IGNsaWVudC5jbGllbnRJZCxcblx0XHRcdFx0XHRuYW1lOiBjbGllbnQubmFtZSxcblx0XHRcdFx0XHRpY29uOiBjbGllbnQuaWNvbiB8fCBudWxsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSksXG5cdFx0XHRlbmRTZXNzaW9uOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb2F1dGgyL2VuZHNlc3Npb25cIiwge1xuXHRcdFx0XHRtZXRob2Q6IFtcIkdFVFwiLCBcIlBPU1RcIl0sXG5cdFx0XHRcdHF1ZXJ5OiB6Lm9iamVjdCh7XG5cdFx0XHRcdFx0aWRfdG9rZW5faGludDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdFx0XHRcdGxvZ291dF9oaW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0Y2xpZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0cG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRcdFx0c3RhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdFx0XHR1aV9sb2NhbGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0XHRcdFx0fSkub3B0aW9uYWwoKSxcblx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdFx0XHRcdG9wZW5hcGk6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlJQLUluaXRpYXRlZCBMb2dvdXQgZW5kcG9pbnQuIExvZ3Mgb3V0IHRoZSBlbmQtdXNlciBhbmQgb3B0aW9uYWxseSByZWRpcmVjdHMgdG8gYSBwb3N0LWxvZ291dCBVUkkuXCIsXG5cdFx0XHRcdFx0XHRwYXJhbWV0ZXJzOiBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiBcImlkX3Rva2VuX2hpbnRcIixcblx0XHRcdFx0XHRcdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlByZXZpb3VzbHkgaXNzdWVkIElEIFRva2VuIHBhc3NlZCBhcyBhIGhpbnQgYWJvdXQgdGhlIEVuZC1Vc2VyJ3MgY3VycmVudCBhdXRoZW50aWNhdGVkIHNlc3Npb25cIixcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogXCJsb2dvdXRfaGludFwiLFxuXHRcdFx0XHRcdFx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSGludCB0byB0aGUgQXV0aG9yaXphdGlvbiBTZXJ2ZXIgYWJvdXQgdGhlIEVuZC1Vc2VyIHRoYXQgaXMgbG9nZ2luZyBvdXRcIixcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogXCJjbGllbnRfaWRcIixcblx0XHRcdFx0XHRcdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk9BdXRoIDIuMCBDbGllbnQgSWRlbnRpZmllci4gUmVxdWlyZWQgaWYgcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpIGlzIHVzZWQgd2l0aG91dCBpZF90b2tlbl9oaW50XCIsXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IFwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0aW46IFwicXVlcnlcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVUkwgdG8gd2hpY2ggdGhlIFJQIGlzIHJlcXVlc3RpbmcgdGhhdCB0aGUgRW5kLVVzZXIncyBVc2VyIEFnZW50IGJlIHJlZGlyZWN0ZWQgYWZ0ZXIgYSBsb2dvdXQgaGFzIGJlZW4gcGVyZm9ybWVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJ1cmlcIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IFwic3RhdGVcIixcblx0XHRcdFx0XHRcdFx0XHRpbjogXCJxdWVyeVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk9wYXF1ZSB2YWx1ZSB1c2VkIGJ5IHRoZSBSUCB0byBtYWludGFpbiBzdGF0ZSBiZXR3ZWVuIHRoZSBsb2dvdXQgcmVxdWVzdCBhbmQgdGhlIGNhbGxiYWNrXCIsXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IFwidWlfbG9jYWxlc1wiLFxuXHRcdFx0XHRcdFx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRW5kLVVzZXIncyBwcmVmZXJyZWQgbGFuZ3VhZ2VzIGFuZCBzY3JpcHRzIGZvciB0aGUgdXNlciBpbnRlcmZhY2VcIixcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcdFx0XHRcdFwiMzAyXCI6IHsgZGVzY3JpcHRpb246IFwiUmVkaXJlY3QgdG8gcG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpIG9yIGxvZ291dCBjb25maXJtYXRpb24gcGFnZVwiIH0sXG5cdFx0XHRcdFx0XHRcdFwiMjAwXCI6IHsgZGVzY3JpcHRpb246IFwiTG9nb3V0IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHlcIiB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgaWRfdG9rZW5faGludCwgY2xpZW50X2lkLCBwb3N0X2xvZ291dF9yZWRpcmVjdF91cmksIHN0YXRlIH0gPSBjdHgucXVlcnkgfHwge307XG5cdFx0XHRcdGxldCB2YWxpZGF0ZWRDbGllbnRJZCA9IG51bGw7XG5cdFx0XHRcdGxldCB2YWxpZGF0ZWRVc2VySWQgPSBudWxsO1xuXHRcdFx0XHRpZiAoaWRfdG9rZW5faGludCkgdHJ5IHtcblx0XHRcdFx0XHRjb25zdCBqd3RQbHVnaW4gPSBnZXRKd3RQbHVnaW4oY3R4KTtcblx0XHRcdFx0XHRpZiAoand0UGx1Z2luICYmIGp3dFBsdWdpbi5vcHRpb25zICYmIG9wdGlvbnM/LnVzZUpXVFBsdWdpbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmVyaWZpZWQgPSBhd2FpdCB2ZXJpZnlKV1QoaWRfdG9rZW5faGludCwgand0UGx1Z2luLm9wdGlvbnMpO1xuXHRcdFx0XHRcdFx0aWYgKHZlcmlmaWVkKSB7XG5cdFx0XHRcdFx0XHRcdHZhbGlkYXRlZFVzZXJJZCA9IHZlcmlmaWVkLnN1Yjtcblx0XHRcdFx0XHRcdFx0dmFsaWRhdGVkQ2xpZW50SWQgPSB2ZXJpZmllZC5hdWQgPyB0eXBlb2YgdmVyaWZpZWQuYXVkID09PSBcInN0cmluZ1wiID8gdmVyaWZpZWQuYXVkIDogdmVyaWZpZWQuYXVkWzBdIDogbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNsaWVudF9pZCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0Q2xpZW50KGNsaWVudF9pZCwgdHJ1c3RlZENsaWVudHMpO1xuXHRcdFx0XHRcdFx0aWYgKGNsaWVudCAmJiBjbGllbnQuY2xpZW50U2VjcmV0KSB0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB7IHBheWxvYWQgfSA9IGF3YWl0IGp3dFZlcmlmeShpZF90b2tlbl9oaW50LCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY2xpZW50LmNsaWVudFNlY3JldCkpO1xuXHRcdFx0XHRcdFx0XHR2YWxpZGF0ZWRVc2VySWQgPSBwYXlsb2FkLnN1Yjtcblx0XHRcdFx0XHRcdFx0dmFsaWRhdGVkQ2xpZW50SWQgPSBwYXlsb2FkLmF1ZDtcblx0XHRcdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5kZWJ1ZyhcIkludmFsaWQgaWRfdG9rZW5faGludCBwcm92aWRlZCB0byBlbmRfc2Vzc2lvbiBlbmRwb2ludFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY2xpZW50X2lkKSB7XG5cdFx0XHRcdFx0aWYgKCFhd2FpdCBnZXRDbGllbnQoY2xpZW50X2lkLCB0cnVzdGVkQ2xpZW50cykpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfY2xpZW50XCIsXG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJJbnZhbGlkIGNsaWVudF9pZFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHZhbGlkYXRlZENsaWVudElkICYmIHZhbGlkYXRlZENsaWVudElkICE9PSBjbGllbnRfaWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiY2xpZW50X2lkIGRvZXMgbm90IG1hdGNoIHRoZSBJRCBUb2tlbidzIGF1ZGllbmNlXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2YWxpZGF0ZWRDbGllbnRJZCA9IGNsaWVudF9pZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpKSB7XG5cdFx0XHRcdFx0aWYgKCF2YWxpZGF0ZWRDbGllbnRJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwge1xuXHRcdFx0XHRcdFx0ZXJyb3I6IFwiaW52YWxpZF9yZXF1ZXN0XCIsXG5cdFx0XHRcdFx0XHRlcnJvcl9kZXNjcmlwdGlvbjogXCJjbGllbnRfaWQgaXMgcmVxdWlyZWQgd2hlbiB1c2luZyBwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkgd2l0aG91dCBhIHZhbGlkIGlkX3Rva2VuX2hpbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudCh2YWxpZGF0ZWRDbGllbnRJZCwgdHJ1c3RlZENsaWVudHMpO1xuXHRcdFx0XHRcdGlmICghY2xpZW50KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX2NsaWVudFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiSW52YWxpZCBjbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICghY2xpZW50LnJlZGlyZWN0VXJscy5zb21lKChyZWdpc3RlcmVkVXJpKSA9PiBwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkgPT09IHJlZ2lzdGVyZWRVcmkpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0XHRlcnJvcjogXCJpbnZhbGlkX3JlcXVlc3RcIixcblx0XHRcdFx0XHRcdGVycm9yX2Rlc2NyaXB0aW9uOiBcInBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaSBpcyBub3QgcmVnaXN0ZXJlZCBmb3IgdGhpcyBjbGllbnRcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRcdFx0XHRpZiAodmFsaWRhdGVkVXNlcklkIHx8IHNlc3Npb24pIHtcblx0XHRcdFx0XHRjb25zdCB1c2VySWQgPSB2YWxpZGF0ZWRVc2VySWQgfHwgc2Vzc2lvbj8udXNlci5pZDtcblx0XHRcdFx0XHRpZiAodXNlcklkKSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmRlbGV0ZU1hbnkoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IG1vZGVsTmFtZS5vYXV0aEFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzZXNzaW9uKSB7XG5cdFx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkpIHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKHBvc3RfbG9nb3V0X3JlZGlyZWN0X3VyaSk7XG5cdFx0XHRcdFx0aWYgKHN0YXRlKSByZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgc3RhdGUpO1xuXHRcdFx0XHRcdHJldHVybiBjdHgucmVkaXJlY3QocmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdFx0XHRcdGVycm9yOiBcImludmFsaWRfcmVxdWVzdFwiLFxuXHRcdFx0XHRcdFx0ZXJyb3JfZGVzY3JpcHRpb246IFwiSW52YWxpZCBwb3N0X2xvZ291dF9yZWRpcmVjdF91cmkgZm9ybWF0XCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0XHRcdFx0bWVzc2FnZTogXCJMb2dvdXQgc3VjY2Vzc2Z1bFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSlcblx0XHR9LFxuXHRcdHNjaGVtYTogbWVyZ2VTY2hlbWEoc2NoZW1hLCBvcHRpb25zPy5zY2hlbWEpLFxuXHRcdGdldCBvcHRpb25zKCkge1xuXHRcdFx0cmV0dXJuIG9wdHM7XG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRDbGllbnQsIGdldE1ldGFkYXRhLCBvaWRjUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/schema.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/schema.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n//#region src/plugins/oidc-provider/schema.ts\nzod__WEBPACK_IMPORTED_MODULE_0__.object({\n\tclientId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tclientSecret: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\ttype: zod__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n\t\t\"web\",\n\t\t\"native\",\n\t\t\"user-agent-based\",\n\t\t\"public\"\n\t]),\n\tname: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\ticon: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\tdisabled: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().optional().default(false),\n\tredirectUrls: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_0__.date(),\n\tupdatedAt: zod__WEBPACK_IMPORTED_MODULE_0__.date()\n});\nconst schema = {\n\toauthApplication: {\n\t\tmodelName: \"oauthApplication\",\n\t\tfields: {\n\t\t\tname: { type: \"string\" },\n\t\t\ticon: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\tclientId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tunique: true\n\t\t\t},\n\t\t\tclientSecret: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false\n\t\t\t},\n\t\t\tredirectUrls: { type: \"string\" },\n\t\t\ttype: { type: \"string\" },\n\t\t\tdisabled: {\n\t\t\t\ttype: \"boolean\",\n\t\t\t\trequired: false,\n\t\t\t\tdefaultValue: false\n\t\t\t},\n\t\t\tuserId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tcreatedAt: { type: \"date\" },\n\t\t\tupdatedAt: { type: \"date\" }\n\t\t}\n\t},\n\toauthAccessToken: {\n\t\tmodelName: \"oauthAccessToken\",\n\t\tfields: {\n\t\t\taccessToken: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tunique: true\n\t\t\t},\n\t\t\trefreshToken: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tunique: true\n\t\t\t},\n\t\t\taccessTokenExpiresAt: { type: \"date\" },\n\t\t\trefreshTokenExpiresAt: { type: \"date\" },\n\t\t\tclientId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"oauthApplication\",\n\t\t\t\t\tfield: \"clientId\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tuserId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: false,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tscopes: { type: \"string\" },\n\t\t\tcreatedAt: { type: \"date\" },\n\t\t\tupdatedAt: { type: \"date\" }\n\t\t}\n\t},\n\toauthConsent: {\n\t\tmodelName: \"oauthConsent\",\n\t\tfields: {\n\t\t\tclientId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"oauthApplication\",\n\t\t\t\t\tfield: \"clientId\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tuserId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tonDelete: \"cascade\"\n\t\t\t\t},\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tscopes: { type: \"string\" },\n\t\t\tcreatedAt: { type: \"date\" },\n\t\t\tupdatedAt: { type: \"date\" },\n\t\t\tconsentGiven: { type: \"boolean\" }\n\t\t}\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qjs7QUFFekI7QUFDQSx1Q0FBUTtBQUNSLFdBQVcsdUNBQVE7QUFDbkIsZUFBZSx1Q0FBUTtBQUN2QixPQUFPLHdDQUFNO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sdUNBQVE7QUFDZixPQUFPLHVDQUFRO0FBQ2YsV0FBVyx1Q0FBUTtBQUNuQixXQUFXLHdDQUFTO0FBQ3BCLGVBQWUsdUNBQVE7QUFDdkIsU0FBUyx1Q0FBUTtBQUNqQixZQUFZLHFDQUFNO0FBQ2xCLFlBQVkscUNBQU07QUFDbEIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQixnQkFBZ0I7QUFDbkMsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osZ0JBQWdCLGNBQWM7QUFDOUIsZ0JBQWdCO0FBQ2hCO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osMkJBQTJCLGNBQWM7QUFDekMsNEJBQTRCLGNBQWM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKLGFBQWEsZ0JBQWdCO0FBQzdCLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQjtBQUNoQjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKLGFBQWEsZ0JBQWdCO0FBQzdCLGdCQUFnQixjQUFjO0FBQzlCLGdCQUFnQixjQUFjO0FBQzlCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvaWRjLXByb3ZpZGVyXFxzY2hlbWEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2lkYy1wcm92aWRlci9zY2hlbWEudHNcbnoub2JqZWN0KHtcblx0Y2xpZW50SWQ6IHouc3RyaW5nKCksXG5cdGNsaWVudFNlY3JldDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHR0eXBlOiB6LmVudW0oW1xuXHRcdFwid2ViXCIsXG5cdFx0XCJuYXRpdmVcIixcblx0XHRcInVzZXItYWdlbnQtYmFzZWRcIixcblx0XHRcInB1YmxpY1wiXG5cdF0pLFxuXHRuYW1lOiB6LnN0cmluZygpLFxuXHRpY29uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdG1ldGFkYXRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGRpc2FibGVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLmRlZmF1bHQoZmFsc2UpLFxuXHRyZWRpcmVjdFVybHM6IHouc3RyaW5nKCksXG5cdHVzZXJJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRjcmVhdGVkQXQ6IHouZGF0ZSgpLFxuXHR1cGRhdGVkQXQ6IHouZGF0ZSgpXG59KTtcbmNvbnN0IHNjaGVtYSA9IHtcblx0b2F1dGhBcHBsaWNhdGlvbjoge1xuXHRcdG1vZGVsTmFtZTogXCJvYXV0aEFwcGxpY2F0aW9uXCIsXG5cdFx0ZmllbGRzOiB7XG5cdFx0XHRuYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdGljb246IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlXG5cdFx0XHR9LFxuXHRcdFx0Y2xpZW50SWQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0dW5pcXVlOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0Y2xpZW50U2VjcmV0OiB7XG5cdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdHJlcXVpcmVkOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdHJlZGlyZWN0VXJsczogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHR0eXBlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdGRpc2FibGVkOiB7XG5cdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdGRlZmF1bHRWYWx1ZTogZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0b25EZWxldGU6IFwiY2FzY2FkZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGluZGV4OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0Y3JlYXRlZEF0OiB7IHR5cGU6IFwiZGF0ZVwiIH0sXG5cdFx0XHR1cGRhdGVkQXQ6IHsgdHlwZTogXCJkYXRlXCIgfVxuXHRcdH1cblx0fSxcblx0b2F1dGhBY2Nlc3NUb2tlbjoge1xuXHRcdG1vZGVsTmFtZTogXCJvYXV0aEFjY2Vzc1Rva2VuXCIsXG5cdFx0ZmllbGRzOiB7XG5cdFx0XHRhY2Nlc3NUb2tlbjoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHR1bmlxdWU6IHRydWVcblx0XHRcdH0sXG5cdFx0XHRyZWZyZXNoVG9rZW46IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0dW5pcXVlOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHsgdHlwZTogXCJkYXRlXCIgfSxcblx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogeyB0eXBlOiBcImRhdGVcIiB9LFxuXHRcdFx0Y2xpZW50SWQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0XHRcdG1vZGVsOiBcIm9hdXRoQXBwbGljYXRpb25cIixcblx0XHRcdFx0XHRmaWVsZDogXCJjbGllbnRJZFwiLFxuXHRcdFx0XHRcdG9uRGVsZXRlOiBcImNhc2NhZGVcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHVzZXJJZDoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHRvbkRlbGV0ZTogXCJjYXNjYWRlXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdH0sXG5cdFx0XHRzY29wZXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0Y3JlYXRlZEF0OiB7IHR5cGU6IFwiZGF0ZVwiIH0sXG5cdFx0XHR1cGRhdGVkQXQ6IHsgdHlwZTogXCJkYXRlXCIgfVxuXHRcdH1cblx0fSxcblx0b2F1dGhDb25zZW50OiB7XG5cdFx0bW9kZWxOYW1lOiBcIm9hdXRoQ29uc2VudFwiLFxuXHRcdGZpZWxkczoge1xuXHRcdFx0Y2xpZW50SWQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0XHRcdG1vZGVsOiBcIm9hdXRoQXBwbGljYXRpb25cIixcblx0XHRcdFx0XHRmaWVsZDogXCJjbGllbnRJZFwiLFxuXHRcdFx0XHRcdG9uRGVsZXRlOiBcImNhc2NhZGVcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHVzZXJJZDoge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0b25EZWxldGU6IFwiY2FzY2FkZVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGluZGV4OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0c2NvcGVzOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdGNyZWF0ZWRBdDogeyB0eXBlOiBcImRhdGVcIiB9LFxuXHRcdFx0dXBkYXRlZEF0OiB7IHR5cGU6IFwiZGF0ZVwiIH0sXG5cdFx0XHRjb25zZW50R2l2ZW46IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdH1cblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/utils.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultClientSecretHasher: () => (/* binding */ defaultClientSecretHasher)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n//#region src/plugins/oidc-provider/utils.ts\n/**\n* Default client secret hasher using SHA-256\n*/\nconst defaultClientSecretHasher = async (clientSecret) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(clientSecret));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNDOztBQUV0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFVO0FBQzlCLFFBQVEsZ0VBQVMsZ0NBQWdDLGdCQUFnQjtBQUNqRTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9pZGMtcHJvdmlkZXJcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2lkYy1wcm92aWRlci91dGlscy50c1xuLyoqXG4qIERlZmF1bHQgY2xpZW50IHNlY3JldCBoYXNoZXIgdXNpbmcgU0hBLTI1NlxuKi9cbmNvbnN0IGRlZmF1bHRDbGllbnRTZWNyZXRIYXNoZXIgPSBhc3luYyAoY2xpZW50U2VjcmV0KSA9PiB7XG5cdGNvbnN0IGhhc2ggPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3QobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNsaWVudFNlY3JldCkpO1xuXHRyZXR1cm4gYmFzZTY0VXJsLmVuY29kZShuZXcgVWludDhBcnJheShoYXNoKSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmYXVsdENsaWVudFNlY3JldEhhc2hlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parsePrompt: () => (/* binding */ parsePrompt)\n/* harmony export */ });\n/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../error.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/error.mjs\");\n\n\n//#region src/plugins/oidc-provider/utils/prompt.ts\n/**\n* Parse space-separated prompt string into a set of prompts\n*\n* @param prompt\n*/\nfunction parsePrompt(prompt) {\n\tconst prompts = prompt.split(\" \").map((p) => p.trim());\n\tconst set = /* @__PURE__ */ new Set();\n\tfor (const p of prompts) if (p === \"login\" || p === \"consent\" || p === \"select_account\" || p === \"none\") set.add(p);\n\tif (set.has(\"none\") && set.size > 1) throw new _error_mjs__WEBPACK_IMPORTED_MODULE_0__.InvalidRequest(\"prompt none must only be used alone\");\n\treturn new Set(set);\n}\n\n//#endregion\n\n//# sourceMappingURL=prompt.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvdXRpbHMvcHJvbXB0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4Qzs7QUFFOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsc0RBQWM7QUFDOUQ7QUFDQTs7QUFFQTtBQUN1QjtBQUN2QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9pZGMtcHJvdmlkZXJcXHV0aWxzXFxwcm9tcHQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEludmFsaWRSZXF1ZXN0IH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb2lkYy1wcm92aWRlci91dGlscy9wcm9tcHQudHNcbi8qKlxuKiBQYXJzZSBzcGFjZS1zZXBhcmF0ZWQgcHJvbXB0IHN0cmluZyBpbnRvIGEgc2V0IG9mIHByb21wdHNcbipcbiogQHBhcmFtIHByb21wdFxuKi9cbmZ1bmN0aW9uIHBhcnNlUHJvbXB0KHByb21wdCkge1xuXHRjb25zdCBwcm9tcHRzID0gcHJvbXB0LnNwbGl0KFwiIFwiKS5tYXAoKHApID0+IHAudHJpbSgpKTtcblx0Y29uc3Qgc2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0Zm9yIChjb25zdCBwIG9mIHByb21wdHMpIGlmIChwID09PSBcImxvZ2luXCIgfHwgcCA9PT0gXCJjb25zZW50XCIgfHwgcCA9PT0gXCJzZWxlY3RfYWNjb3VudFwiIHx8IHAgPT09IFwibm9uZVwiKSBzZXQuYWRkKHApO1xuXHRpZiAoc2V0LmhhcyhcIm5vbmVcIikgJiYgc2V0LnNpemUgPiAxKSB0aHJvdyBuZXcgSW52YWxpZFJlcXVlc3QoXCJwcm9tcHQgbm9uZSBtdXN0IG9ubHkgYmUgdXNlZCBhbG9uZVwiKTtcblx0cmV0dXJuIG5ldyBTZXQoc2V0KTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZVByb21wdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbXB0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/oidc-provider/utils/prompt.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-tap/client.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTapClient: () => (/* binding */ oneTapClient)\n/* harmony export */ });\n//#region src/plugins/one-tap/client.ts\nlet isRequestInProgress = null;\nfunction isFedCMSupported() {\n\treturn typeof window !== \"undefined\" && \"IdentityCredential\" in window;\n}\n/**\n* Reasons that should NOT trigger a retry.\n* @see https://developers.google.com/identity/gsi/web/reference/js-reference\n*/\nconst noRetryReasons = {\n\tdismissed: [\"credential_returned\", \"cancel_called\"],\n\tskipped: [\"user_cancel\", \"tap_outside\"]\n};\nconst oneTapClient = (options) => {\n\treturn {\n\t\tid: \"one-tap\",\n\t\tfetchPlugins: [{\n\t\t\tid: \"fedcm-signout-handle\",\n\t\t\tname: \"FedCM Sign-Out Handler\",\n\t\t\thooks: { async onResponse(ctx) {\n\t\t\t\tif (!ctx.request.url.toString().includes(\"/sign-out\")) return;\n\t\t\t\tif (options.promptOptions?.fedCM === false || !isFedCMSupported()) return;\n\t\t\t\tnavigator.credentials.preventSilentAccess();\n\t\t\t} }\n\t\t}],\n\t\tgetActions: ($fetch, _) => {\n\t\t\treturn { oneTap: async (opts, fetchOptions) => {\n\t\t\t\tif (isRequestInProgress && !isRequestInProgress.signal.aborted) {\n\t\t\t\t\tconsole.warn(\"A Google One Tap request is already in progress. Please wait.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof window === \"undefined\" || !window.document) {\n\t\t\t\t\tconsole.warn(\"Google One Tap is only available in browser environments\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (opts?.button) {\n\t\t\t\t\tawait loadGoogleScript();\n\t\t\t\t\tconst container = typeof opts.button.container === \"string\" ? document.querySelector(opts.button.container) : opts.button.container;\n\t\t\t\t\tif (!container) {\n\t\t\t\t\t\tconsole.error(\"Google One Tap: Button container not found\", opts.button.container);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tasync function callback$1(idToken) {\n\t\t\t\t\t\tawait $fetch(\"/one-tap/callback\", {\n\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\tbody: { idToken },\n\t\t\t\t\t\t\t...opts?.fetchOptions,\n\t\t\t\t\t\t\t...fetchOptions\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!opts?.fetchOptions && !fetchOptions || opts?.callbackURL) window.location.href = opts?.callbackURL ?? \"/\";\n\t\t\t\t\t}\n\t\t\t\t\tconst { autoSelect: autoSelect$1, cancelOnTapOutside: cancelOnTapOutside$1, context: context$1 } = opts ?? {};\n\t\t\t\t\tconst contextValue$1 = context$1 ?? options.context ?? \"signin\";\n\t\t\t\t\twindow.google?.accounts.id.initialize({\n\t\t\t\t\t\tclient_id: options.clientId,\n\t\t\t\t\t\tcallback: async (response) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback$1(response.credential);\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error(\"Error during button callback:\", error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tauto_select: autoSelect$1,\n\t\t\t\t\t\tcancel_on_tap_outside: cancelOnTapOutside$1,\n\t\t\t\t\t\tcontext: contextValue$1,\n\t\t\t\t\t\tux_mode: opts?.uxMode || \"popup\",\n\t\t\t\t\t\tnonce: opts?.nonce,\n\t\t\t\t\t\titp_support: true,\n\t\t\t\t\t\t...options.additionalOptions\n\t\t\t\t\t});\n\t\t\t\t\twindow.google?.accounts.id.renderButton(container, opts.button.config ?? { type: \"icon\" });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tasync function callback(idToken) {\n\t\t\t\t\tawait $fetch(\"/one-tap/callback\", {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: { idToken },\n\t\t\t\t\t\t...opts?.fetchOptions,\n\t\t\t\t\t\t...fetchOptions\n\t\t\t\t\t});\n\t\t\t\t\tif (!opts?.fetchOptions && !fetchOptions || opts?.callbackURL) window.location.href = opts?.callbackURL ?? \"/\";\n\t\t\t\t}\n\t\t\t\tconst { autoSelect, cancelOnTapOutside, context } = opts ?? {};\n\t\t\t\tconst contextValue = context ?? options.context ?? \"signin\";\n\t\t\t\tconst clients = {\n\t\t\t\t\tfedCM: async () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst identityCredential = await navigator.credentials.get({\n\t\t\t\t\t\t\t\tidentity: {\n\t\t\t\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t\t\t\t\tproviders: [{\n\t\t\t\t\t\t\t\t\t\tconfigURL: \"https://accounts.google.com/gsi/fedcm.json\",\n\t\t\t\t\t\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\t\t\t\t\t\tnonce: opts?.nonce\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmediation: autoSelect ? \"optional\" : \"required\",\n\t\t\t\t\t\t\t\tsignal: isRequestInProgress?.signal\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!identityCredential?.token) {\n\t\t\t\t\t\t\t\topts?.onPromptNotification?.(void 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback(identityCredential.token);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error(\"Error during FedCM callback:\", error);\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tif (error?.code && (error.code === 19 || error.code === 20)) {\n\t\t\t\t\t\t\t\topts?.onPromptNotification?.(void 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toneTap: () => {\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\t\tlet isResolved = false;\n\t\t\t\t\t\t\tconst baseDelay = options.promptOptions?.baseDelay ?? 1e3;\n\t\t\t\t\t\t\tconst maxAttempts = options.promptOptions?.maxAttempts ?? 5;\n\t\t\t\t\t\t\twindow.google?.accounts.id.initialize({\n\t\t\t\t\t\t\t\tclient_id: options.clientId,\n\t\t\t\t\t\t\t\tcallback: async (response) => {\n\t\t\t\t\t\t\t\t\tisResolved = true;\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tawait callback(response.credential);\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\tconsole.error(\"Error during One Tap callback:\", error);\n\t\t\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tauto_select: autoSelect,\n\t\t\t\t\t\t\t\tcancel_on_tap_outside: cancelOnTapOutside,\n\t\t\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t\t\t\tux_mode: opts?.uxMode || \"popup\",\n\t\t\t\t\t\t\t\tnonce: opts?.nonce,\n\t\t\t\t\t\t\t\titp_support: true,\n\t\t\t\t\t\t\t\t...options.additionalOptions\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst handlePrompt = (attempt) => {\n\t\t\t\t\t\t\t\tif (isResolved) return;\n\t\t\t\t\t\t\t\twindow.google?.accounts.id.prompt((notification) => {\n\t\t\t\t\t\t\t\t\tif (isResolved) return;\n\t\t\t\t\t\t\t\t\tif (notification.isDismissedMoment && notification.isDismissedMoment()) {\n\t\t\t\t\t\t\t\t\t\tconst reason = notification.getDismissedReason?.();\n\t\t\t\t\t\t\t\t\t\tif (noRetryReasons.dismissed.includes(reason)) {\n\t\t\t\t\t\t\t\t\t\t\topts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (attempt < maxAttempts) {\n\t\t\t\t\t\t\t\t\t\t\tconst delay = Math.pow(2, attempt) * baseDelay;\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handlePrompt(attempt + 1), delay);\n\t\t\t\t\t\t\t\t\t\t} else opts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t} else if (notification.isSkippedMoment && notification.isSkippedMoment()) {\n\t\t\t\t\t\t\t\t\t\tconst reason = notification.getSkippedReason?.();\n\t\t\t\t\t\t\t\t\t\tif (noRetryReasons.skipped.includes(reason)) {\n\t\t\t\t\t\t\t\t\t\t\topts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (attempt < maxAttempts) {\n\t\t\t\t\t\t\t\t\t\t\tconst delay = Math.pow(2, attempt) * baseDelay;\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handlePrompt(attempt + 1), delay);\n\t\t\t\t\t\t\t\t\t\t} else opts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\thandlePrompt(0);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (isRequestInProgress) isRequestInProgress?.abort();\n\t\t\t\tisRequestInProgress = new AbortController();\n\t\t\t\ttry {\n\t\t\t\t\tconst client = options.promptOptions?.fedCM === false || !isFedCMSupported() ? \"oneTap\" : \"fedCM\";\n\t\t\t\t\tif (client === \"oneTap\") await loadGoogleScript();\n\t\t\t\t\tawait clients[client]();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Error during Google One Tap flow:\", error);\n\t\t\t\t\tthrow error;\n\t\t\t\t} finally {\n\t\t\t\t\tisRequestInProgress = null;\n\t\t\t\t}\n\t\t\t} };\n\t\t},\n\t\tgetAtoms($fetch) {\n\t\t\treturn {};\n\t\t}\n\t};\n};\nconst loadGoogleScript = () => {\n\treturn new Promise((resolve) => {\n\t\tif (window.googleScriptInitialized) {\n\t\t\tresolve();\n\t\t\treturn;\n\t\t}\n\t\tconst script = document.createElement(\"script\");\n\t\tscript.src = \"https://accounts.google.com/gsi/client\";\n\t\tscript.async = true;\n\t\tscript.defer = true;\n\t\tscript.onload = () => {\n\t\t\twindow.googleScriptInitialized = true;\n\t\t\tresolve();\n\t\t};\n\t\tdocument.head.appendChild(script);\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10YXAvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGFBQWEseUZBQXlGO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGdGQUFnRixjQUFjO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsWUFBWSwwQ0FBMEM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvbmUtdGFwXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vbmUtdGFwL2NsaWVudC50c1xubGV0IGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBudWxsO1xuZnVuY3Rpb24gaXNGZWRDTVN1cHBvcnRlZCgpIHtcblx0cmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJJZGVudGl0eUNyZWRlbnRpYWxcIiBpbiB3aW5kb3c7XG59XG4vKipcbiogUmVhc29ucyB0aGF0IHNob3VsZCBOT1QgdHJpZ2dlciBhIHJldHJ5LlxuKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2lkZW50aXR5L2dzaS93ZWIvcmVmZXJlbmNlL2pzLXJlZmVyZW5jZVxuKi9cbmNvbnN0IG5vUmV0cnlSZWFzb25zID0ge1xuXHRkaXNtaXNzZWQ6IFtcImNyZWRlbnRpYWxfcmV0dXJuZWRcIiwgXCJjYW5jZWxfY2FsbGVkXCJdLFxuXHRza2lwcGVkOiBbXCJ1c2VyX2NhbmNlbFwiLCBcInRhcF9vdXRzaWRlXCJdXG59O1xuY29uc3Qgb25lVGFwQ2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvbmUtdGFwXCIsXG5cdFx0ZmV0Y2hQbHVnaW5zOiBbe1xuXHRcdFx0aWQ6IFwiZmVkY20tc2lnbm91dC1oYW5kbGVcIixcblx0XHRcdG5hbWU6IFwiRmVkQ00gU2lnbi1PdXQgSGFuZGxlclwiLFxuXHRcdFx0aG9va3M6IHsgYXN5bmMgb25SZXNwb25zZShjdHgpIHtcblx0XHRcdFx0aWYgKCFjdHgucmVxdWVzdC51cmwudG9TdHJpbmcoKS5pbmNsdWRlcyhcIi9zaWduLW91dFwiKSkgcmV0dXJuO1xuXHRcdFx0XHRpZiAob3B0aW9ucy5wcm9tcHRPcHRpb25zPy5mZWRDTSA9PT0gZmFsc2UgfHwgIWlzRmVkQ01TdXBwb3J0ZWQoKSkgcmV0dXJuO1xuXHRcdFx0XHRuYXZpZ2F0b3IuY3JlZGVudGlhbHMucHJldmVudFNpbGVudEFjY2VzcygpO1xuXHRcdFx0fSB9XG5cdFx0fV0sXG5cdFx0Z2V0QWN0aW9uczogKCRmZXRjaCwgXykgPT4ge1xuXHRcdFx0cmV0dXJuIHsgb25lVGFwOiBhc3luYyAob3B0cywgZmV0Y2hPcHRpb25zKSA9PiB7XG5cdFx0XHRcdGlmIChpc1JlcXVlc3RJblByb2dyZXNzICYmICFpc1JlcXVlc3RJblByb2dyZXNzLnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiQSBHb29nbGUgT25lIFRhcCByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSB3YWl0LlwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIXdpbmRvdy5kb2N1bWVudCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIkdvb2dsZSBPbmUgVGFwIGlzIG9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXIgZW52aXJvbm1lbnRzXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob3B0cz8uYnV0dG9uKSB7XG5cdFx0XHRcdFx0YXdhaXQgbG9hZEdvb2dsZVNjcmlwdCgpO1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBvcHRzLmJ1dHRvbi5jb250YWluZXIgPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdHMuYnV0dG9uLmNvbnRhaW5lcikgOiBvcHRzLmJ1dHRvbi5jb250YWluZXI7XG5cdFx0XHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJHb29nbGUgT25lIFRhcDogQnV0dG9uIGNvbnRhaW5lciBub3QgZm91bmRcIiwgb3B0cy5idXR0b24uY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gY2FsbGJhY2skMShpZFRva2VuKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCAkZmV0Y2goXCIvb25lLXRhcC9jYWxsYmFja1wiLCB7XG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHsgaWRUb2tlbiB9LFxuXHRcdFx0XHRcdFx0XHQuLi5vcHRzPy5mZXRjaE9wdGlvbnMsXG5cdFx0XHRcdFx0XHRcdC4uLmZldGNoT3B0aW9uc1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpZiAoIW9wdHM/LmZldGNoT3B0aW9ucyAmJiAhZmV0Y2hPcHRpb25zIHx8IG9wdHM/LmNhbGxiYWNrVVJMKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9wdHM/LmNhbGxiYWNrVVJMID8/IFwiL1wiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGF1dG9TZWxlY3Q6IGF1dG9TZWxlY3QkMSwgY2FuY2VsT25UYXBPdXRzaWRlOiBjYW5jZWxPblRhcE91dHNpZGUkMSwgY29udGV4dDogY29udGV4dCQxIH0gPSBvcHRzID8/IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRleHRWYWx1ZSQxID0gY29udGV4dCQxID8/IG9wdGlvbnMuY29udGV4dCA/PyBcInNpZ25pblwiO1xuXHRcdFx0XHRcdHdpbmRvdy5nb29nbGU/LmFjY291bnRzLmlkLmluaXRpYWxpemUoe1xuXHRcdFx0XHRcdFx0Y2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0Y2FsbGJhY2s6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGNhbGxiYWNrJDEocmVzcG9uc2UuY3JlZGVudGlhbCk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBidXR0b24gY2FsbGJhY2s6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGF1dG9fc2VsZWN0OiBhdXRvU2VsZWN0JDEsXG5cdFx0XHRcdFx0XHRjYW5jZWxfb25fdGFwX291dHNpZGU6IGNhbmNlbE9uVGFwT3V0c2lkZSQxLFxuXHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlJDEsXG5cdFx0XHRcdFx0XHR1eF9tb2RlOiBvcHRzPy51eE1vZGUgfHwgXCJwb3B1cFwiLFxuXHRcdFx0XHRcdFx0bm9uY2U6IG9wdHM/Lm5vbmNlLFxuXHRcdFx0XHRcdFx0aXRwX3N1cHBvcnQ6IHRydWUsXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zLmFkZGl0aW9uYWxPcHRpb25zXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d2luZG93Lmdvb2dsZT8uYWNjb3VudHMuaWQucmVuZGVyQnV0dG9uKGNvbnRhaW5lciwgb3B0cy5idXR0b24uY29uZmlnID8/IHsgdHlwZTogXCJpY29uXCIgfSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNhbGxiYWNrKGlkVG9rZW4pIHtcblx0XHRcdFx0XHRhd2FpdCAkZmV0Y2goXCIvb25lLXRhcC9jYWxsYmFja1wiLCB7XG5cdFx0XHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0Ym9keTogeyBpZFRva2VuIH0sXG5cdFx0XHRcdFx0XHQuLi5vcHRzPy5mZXRjaE9wdGlvbnMsXG5cdFx0XHRcdFx0XHQuLi5mZXRjaE9wdGlvbnNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoIW9wdHM/LmZldGNoT3B0aW9ucyAmJiAhZmV0Y2hPcHRpb25zIHx8IG9wdHM/LmNhbGxiYWNrVVJMKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9wdHM/LmNhbGxiYWNrVVJMID8/IFwiL1wiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHsgYXV0b1NlbGVjdCwgY2FuY2VsT25UYXBPdXRzaWRlLCBjb250ZXh0IH0gPSBvcHRzID8/IHt9O1xuXHRcdFx0XHRjb25zdCBjb250ZXh0VmFsdWUgPSBjb250ZXh0ID8/IG9wdGlvbnMuY29udGV4dCA/PyBcInNpZ25pblwiO1xuXHRcdFx0XHRjb25zdCBjbGllbnRzID0ge1xuXHRcdFx0XHRcdGZlZENNOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpZGVudGl0eUNyZWRlbnRpYWwgPSBhd2FpdCBuYXZpZ2F0b3IuY3JlZGVudGlhbHMuZ2V0KHtcblx0XHRcdFx0XHRcdFx0XHRpZGVudGl0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0cHJvdmlkZXJzOiBbe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25maWdVUkw6IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL2dzaS9mZWRjbS5qc29uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub25jZTogb3B0cz8ubm9uY2Vcblx0XHRcdFx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRtZWRpYXRpb246IGF1dG9TZWxlY3QgPyBcIm9wdGlvbmFsXCIgOiBcInJlcXVpcmVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsOiBpc1JlcXVlc3RJblByb2dyZXNzPy5zaWduYWxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGlmICghaWRlbnRpdHlDcmVkZW50aWFsPy50b2tlbikge1xuXHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4odm9pZCAwKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjYWxsYmFjayhpZGVudGl0eUNyZWRlbnRpYWwudG9rZW4pO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIEZlZENNIGNhbGxiYWNrOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnJvcj8uY29kZSAmJiAoZXJyb3IuY29kZSA9PT0gMTkgfHwgZXJyb3IuY29kZSA9PT0gMjApKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3B0cz8ub25Qcm9tcHROb3RpZmljYXRpb24/Lih2b2lkIDApO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uZVRhcDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IGlzUmVzb2x2ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYmFzZURlbGF5ID0gb3B0aW9ucy5wcm9tcHRPcHRpb25zPy5iYXNlRGVsYXkgPz8gMWUzO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtYXhBdHRlbXB0cyA9IG9wdGlvbnMucHJvbXB0T3B0aW9ucz8ubWF4QXR0ZW1wdHMgPz8gNTtcblx0XHRcdFx0XHRcdFx0d2luZG93Lmdvb2dsZT8uYWNjb3VudHMuaWQuaW5pdGlhbGl6ZSh7XG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrOiBhc3luYyAocmVzcG9uc2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlzUmVzb2x2ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgY2FsbGJhY2socmVzcG9uc2UuY3JlZGVudGlhbCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgT25lIFRhcCBjYWxsYmFjazpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0YXV0b19zZWxlY3Q6IGF1dG9TZWxlY3QsXG5cdFx0XHRcdFx0XHRcdFx0Y2FuY2VsX29uX3RhcF9vdXRzaWRlOiBjYW5jZWxPblRhcE91dHNpZGUsXG5cdFx0XHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdHV4X21vZGU6IG9wdHM/LnV4TW9kZSB8fCBcInBvcHVwXCIsXG5cdFx0XHRcdFx0XHRcdFx0bm9uY2U6IG9wdHM/Lm5vbmNlLFxuXHRcdFx0XHRcdFx0XHRcdGl0cF9zdXBwb3J0OiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdC4uLm9wdGlvbnMuYWRkaXRpb25hbE9wdGlvbnNcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhbmRsZVByb21wdCA9IChhdHRlbXB0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzUmVzb2x2ZWQpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuZ29vZ2xlPy5hY2NvdW50cy5pZC5wcm9tcHQoKG5vdGlmaWNhdGlvbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzUmVzb2x2ZWQpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChub3RpZmljYXRpb24uaXNEaXNtaXNzZWRNb21lbnQgJiYgbm90aWZpY2F0aW9uLmlzRGlzbWlzc2VkTW9tZW50KCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVhc29uID0gbm90aWZpY2F0aW9uLmdldERpc21pc3NlZFJlYXNvbj8uKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChub1JldHJ5UmVhc29ucy5kaXNtaXNzZWQuaW5jbHVkZXMocmVhc29uKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4obm90aWZpY2F0aW9uKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiBiYXNlRGVsYXk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBoYW5kbGVQcm9tcHQoYXR0ZW1wdCArIDEpLCBkZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBvcHRzPy5vblByb21wdE5vdGlmaWNhdGlvbj8uKG5vdGlmaWNhdGlvbik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5vdGlmaWNhdGlvbi5pc1NraXBwZWRNb21lbnQgJiYgbm90aWZpY2F0aW9uLmlzU2tpcHBlZE1vbWVudCgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlYXNvbiA9IG5vdGlmaWNhdGlvbi5nZXRTa2lwcGVkUmVhc29uPy4oKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vUmV0cnlSZWFzb25zLnNraXBwZWQuaW5jbHVkZXMocmVhc29uKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4obm90aWZpY2F0aW9uKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiBiYXNlRGVsYXk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBoYW5kbGVQcm9tcHQoYXR0ZW1wdCArIDEpLCBkZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBvcHRzPy5vblByb21wdE5vdGlmaWNhdGlvbj8uKG5vdGlmaWNhdGlvbik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGhhbmRsZVByb21wdCgwKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGlzUmVxdWVzdEluUHJvZ3Jlc3MpIGlzUmVxdWVzdEluUHJvZ3Jlc3M/LmFib3J0KCk7XG5cdFx0XHRcdGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgY2xpZW50ID0gb3B0aW9ucy5wcm9tcHRPcHRpb25zPy5mZWRDTSA9PT0gZmFsc2UgfHwgIWlzRmVkQ01TdXBwb3J0ZWQoKSA/IFwib25lVGFwXCIgOiBcImZlZENNXCI7XG5cdFx0XHRcdFx0aWYgKGNsaWVudCA9PT0gXCJvbmVUYXBcIikgYXdhaXQgbG9hZEdvb2dsZVNjcmlwdCgpO1xuXHRcdFx0XHRcdGF3YWl0IGNsaWVudHNbY2xpZW50XSgpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgR29vZ2xlIE9uZSBUYXAgZmxvdzpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdHRocm93IGVycm9yO1xuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9IH07XG5cdFx0fSxcblx0XHRnZXRBdG9tcygkZmV0Y2gpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgbG9hZEdvb2dsZVNjcmlwdCA9ICgpID0+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0aWYgKHdpbmRvdy5nb29nbGVTY3JpcHRJbml0aWFsaXplZCkge1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHRcdHNjcmlwdC5zcmMgPSBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9nc2kvY2xpZW50XCI7XG5cdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcblx0XHRzY3JpcHQuZGVmZXIgPSB0cnVlO1xuXHRcdHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0XHR3aW5kb3cuZ29vZ2xlU2NyaXB0SW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH07XG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb25lVGFwQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/one-tap/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-tap/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTap: () => (/* binding */ oneTap)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_boolean_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/boolean.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/boolean.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwks/remote.js\");\n\n\n\n\n\n\n\n\n//#region src/plugins/one-tap/index.ts\nconst oneTapCallbackBodySchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({ idToken: zod__WEBPACK_IMPORTED_MODULE_5__.string().meta({ description: \"Google ID token, which the client obtains from the One Tap API\" }) });\nconst oneTap = (options) => ({\n\tid: \"one-tap\",\n\tendpoints: { oneTapCallback: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthEndpoint)(\"/one-tap/callback\", {\n\t\tmethod: \"POST\",\n\t\tbody: oneTapCallbackBodySchema,\n\t\tmetadata: { openapi: {\n\t\t\tsummary: \"One tap callback\",\n\t\t\tdescription: \"Use this endpoint to authenticate with Google One Tap\",\n\t\t\tresponses: {\n\t\t\t\t200: {\n\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t400: { description: \"Invalid token\" }\n\t\t\t}\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst { idToken } = ctx.body;\n\t\tlet payload;\n\t\ttry {\n\t\t\tconst { payload: verifiedPayload } = await (0,jose__WEBPACK_IMPORTED_MODULE_6__.jwtVerify)(idToken, (0,jose__WEBPACK_IMPORTED_MODULE_7__.createRemoteJWKSet)(new URL(\"https://www.googleapis.com/oauth2/v3/certs\")), {\n\t\t\t\tissuer: [\"https://accounts.google.com\", \"accounts.google.com\"],\n\t\t\t\taudience: options?.clientId || ctx.context.options.socialProviders?.google?.clientId\n\t\t\t});\n\t\t\tpayload = verifiedPayload;\n\t\t} catch {\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: \"invalid id token\" });\n\t\t}\n\t\tconst { email, email_verified, name, picture, sub } = payload;\n\t\tif (!email) return ctx.json({ error: \"Email not available in token\" });\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tif (options?.disableSignup) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_GATEWAY\", { message: \"User not found\" });\n\t\t\tconst newUser = await ctx.context.internalAdapter.createOAuthUser({\n\t\t\t\temail,\n\t\t\t\temailVerified: typeof email_verified === \"boolean\" ? email_verified : (0,_utils_boolean_mjs__WEBPACK_IMPORTED_MODULE_3__.toBoolean)(email_verified),\n\t\t\t\tname,\n\t\t\t\timage: picture\n\t\t\t}, {\n\t\t\t\tproviderId: \"google\",\n\t\t\t\taccountId: sub\n\t\t\t});\n\t\t\tif (!newUser) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Could not create user\" });\n\t\t\tconst session$1 = await ctx.context.internalAdapter.createSession(newUser.user.id);\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__.setSessionCookie)(ctx, {\n\t\t\t\tuser: newUser.user,\n\t\t\t\tsession: session$1\n\t\t\t});\n\t\t\treturn ctx.json({\n\t\t\t\ttoken: session$1.token,\n\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, newUser.user)\n\t\t\t});\n\t\t}\n\t\tif (!await ctx.context.internalAdapter.findAccount(sub)) {\n\t\t\tconst accountLinking = ctx.context.options.account?.accountLinking;\n\t\t\tif (accountLinking?.enabled !== false && (accountLinking?.trustedProviders?.includes(\"google\") || email_verified)) await ctx.context.internalAdapter.linkAccount({\n\t\t\t\tuserId: user.user.id,\n\t\t\t\tproviderId: \"google\",\n\t\t\t\taccountId: sub,\n\t\t\t\tscope: \"openid,profile,email\",\n\t\t\t\tidToken\n\t\t\t});\n\t\t\telse throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"UNAUTHORIZED\", { message: \"Google sub doesn't match\" });\n\t\t}\n\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__.setSessionCookie)(ctx, {\n\t\t\tuser: user.user,\n\t\t\tsession\n\t\t});\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user.user)\n\t\t});\n\t}) },\n\toptions\n});\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10YXAvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNLO0FBQ1o7QUFDSztBQUMzQjtBQUNrQztBQUNOOztBQUVyRDtBQUNBLGlDQUFpQyx1Q0FBUSxHQUFHLFNBQVMsdUNBQVEsVUFBVSwrRUFBK0UsR0FBRztBQUN6SjtBQUNBO0FBQ0EsY0FBYyxnQkFBZ0IseUVBQWtCO0FBQ2hEO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBLGtCQUFrQixzQ0FBc0M7QUFDeEQsZUFBZTtBQUNmO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsV0FBVztBQUNYO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsVUFBVSxVQUFVO0FBQ3BCO0FBQ0E7QUFDQSxXQUFXLDJCQUEyQixRQUFRLCtDQUFTLFVBQVUsd0RBQWtCO0FBQ25GO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxrQkFBa0IsNkJBQTZCO0FBQ3BFO0FBQ0EsVUFBVSw0Q0FBNEM7QUFDdEQsZ0NBQWdDLHVDQUF1QztBQUN2RTtBQUNBO0FBQ0EseUNBQXlDLG9EQUFRLGtCQUFrQiwyQkFBMkI7QUFDOUY7QUFDQTtBQUNBLDBFQUEwRSw2REFBUztBQUNuRjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osMkJBQTJCLG9EQUFRLDRCQUE0QixrQ0FBa0M7QUFDakc7QUFDQSxTQUFTLG9FQUFnQjtBQUN6QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxVQUFVLCtEQUFlO0FBQ3pCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osa0JBQWtCLG9EQUFRLG1CQUFtQixxQ0FBcUM7QUFDbEY7QUFDQTtBQUNBLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNILEVBQUUsR0FBRztBQUNMO0FBQ0EsQ0FBQzs7QUFFRDtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9uZS10YXBcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdG9Cb29sZWFuIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2Jvb2xlYW4ubWpzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcbmltcG9ydCB7IGNyZWF0ZVJlbW90ZUpXS1NldCwgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29uZS10YXAvaW5kZXgudHNcbmNvbnN0IG9uZVRhcENhbGxiYWNrQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgaWRUb2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiR29vZ2xlIElEIHRva2VuLCB3aGljaCB0aGUgY2xpZW50IG9idGFpbnMgZnJvbSB0aGUgT25lIFRhcCBBUElcIiB9KSB9KTtcbmNvbnN0IG9uZVRhcCA9IChvcHRpb25zKSA9PiAoe1xuXHRpZDogXCJvbmUtdGFwXCIsXG5cdGVuZHBvaW50czogeyBvbmVUYXBDYWxsYmFjazogY3JlYXRlQXV0aEVuZHBvaW50KFwiL29uZS10YXAvY2FsbGJhY2tcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogb25lVGFwQ2FsbGJhY2tCb2R5U2NoZW1hLFxuXHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdHN1bW1hcnk6IFwiT25lIHRhcCBjYWxsYmFja1wiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlIHRoaXMgZW5kcG9pbnQgdG8gYXV0aGVudGljYXRlIHdpdGggR29vZ2xlIE9uZSBUYXBcIixcblx0XHRcdHJlc3BvbnNlczoge1xuXHRcdFx0XHQyMDA6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsIHJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSxcblx0XHRcdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0fSxcblx0XHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgdG9rZW5cIiB9XG5cdFx0XHR9XG5cdFx0fSB9XG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRjb25zdCB7IGlkVG9rZW4gfSA9IGN0eC5ib2R5O1xuXHRcdGxldCBwYXlsb2FkO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB7IHBheWxvYWQ6IHZlcmlmaWVkUGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KGlkVG9rZW4sIGNyZWF0ZVJlbW90ZUpXS1NldChuZXcgVVJMKFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL2NlcnRzXCIpKSwge1xuXHRcdFx0XHRpc3N1ZXI6IFtcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbVwiLCBcImFjY291bnRzLmdvb2dsZS5jb21cIl0sXG5cdFx0XHRcdGF1ZGllbmNlOiBvcHRpb25zPy5jbGllbnRJZCB8fCBjdHguY29udGV4dC5vcHRpb25zLnNvY2lhbFByb3ZpZGVycz8uZ29vZ2xlPy5jbGllbnRJZFxuXHRcdFx0fSk7XG5cdFx0XHRwYXlsb2FkID0gdmVyaWZpZWRQYXlsb2FkO1xuXHRcdH0gY2F0Y2gge1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcImludmFsaWQgaWQgdG9rZW5cIiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyBlbWFpbCwgZW1haWxfdmVyaWZpZWQsIG5hbWUsIHBpY3R1cmUsIHN1YiB9ID0gcGF5bG9hZDtcblx0XHRpZiAoIWVtYWlsKSByZXR1cm4gY3R4Lmpzb24oeyBlcnJvcjogXCJFbWFpbCBub3QgYXZhaWxhYmxlIGluIHRva2VuXCIgfSk7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xuXHRcdGlmICghdXNlcikge1xuXHRcdFx0aWYgKG9wdGlvbnM/LmRpc2FibGVTaWdudXApIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9HQVRFV0FZXCIsIHsgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiIH0pO1xuXHRcdFx0Y29uc3QgbmV3VXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVPQXV0aFVzZXIoe1xuXHRcdFx0XHRlbWFpbCxcblx0XHRcdFx0ZW1haWxWZXJpZmllZDogdHlwZW9mIGVtYWlsX3ZlcmlmaWVkID09PSBcImJvb2xlYW5cIiA/IGVtYWlsX3ZlcmlmaWVkIDogdG9Cb29sZWFuKGVtYWlsX3ZlcmlmaWVkKSxcblx0XHRcdFx0bmFtZSxcblx0XHRcdFx0aW1hZ2U6IHBpY3R1cmVcblx0XHRcdH0sIHtcblx0XHRcdFx0cHJvdmlkZXJJZDogXCJnb29nbGVcIixcblx0XHRcdFx0YWNjb3VudElkOiBzdWJcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFuZXdVc2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkNvdWxkIG5vdCBjcmVhdGUgdXNlclwiIH0pO1xuXHRcdFx0Y29uc3Qgc2Vzc2lvbiQxID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24obmV3VXNlci51c2VyLmlkKTtcblx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdHVzZXI6IG5ld1VzZXIudXNlcixcblx0XHRcdFx0c2Vzc2lvbjogc2Vzc2lvbiQxXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHRva2VuOiBzZXNzaW9uJDEudG9rZW4sXG5cdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBuZXdVc2VyLnVzZXIpXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnQoc3ViKSkge1xuXHRcdFx0Y29uc3QgYWNjb3VudExpbmtpbmcgPSBjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nO1xuXHRcdFx0aWYgKGFjY291bnRMaW5raW5nPy5lbmFibGVkICE9PSBmYWxzZSAmJiAoYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnM/LmluY2x1ZGVzKFwiZ29vZ2xlXCIpIHx8IGVtYWlsX3ZlcmlmaWVkKSkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdFx0dXNlcklkOiB1c2VyLnVzZXIuaWQsXG5cdFx0XHRcdHByb3ZpZGVySWQ6IFwiZ29vZ2xlXCIsXG5cdFx0XHRcdGFjY291bnRJZDogc3ViLFxuXHRcdFx0XHRzY29wZTogXCJvcGVuaWQscHJvZmlsZSxlbWFpbFwiLFxuXHRcdFx0XHRpZFRva2VuXG5cdFx0XHR9KTtcblx0XHRcdGVsc2UgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogXCJHb29nbGUgc3ViIGRvZXNuJ3QgbWF0Y2hcIiB9KTtcblx0XHR9XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIudXNlci5pZCk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHVzZXI6IHVzZXIudXNlcixcblx0XHRcdHNlc3Npb25cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXNlci51c2VyKVxuXHRcdH0pO1xuXHR9KSB9LFxuXHRvcHRpb25zXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvbmVUYXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/one-tap/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-time-token/client.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTimeTokenClient: () => (/* binding */ oneTimeTokenClient)\n/* harmony export */ });\n//#region src/plugins/one-time-token/client.ts\nconst oneTimeTokenClient = () => {\n\treturn {\n\t\tid: \"one-time-token\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcb25lLXRpbWUtdG9rZW5cXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC50c1xuY29uc3Qgb25lVGltZVRva2VuQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm9uZS10aW1lLXRva2VuXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvbmVUaW1lVG9rZW5DbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-time-token/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTimeToken: () => (/* binding */ oneTimeToken)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/utils.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/one-time-token/index.ts\nconst verifyOneTimeTokenBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ token: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The token to verify. Eg: \\\"some-token\\\"\" }) });\nconst oneTimeToken = (options) => {\n\tconst opts = {\n\t\tstoreToken: \"plain\",\n\t\t...options\n\t};\n\tasync function storeToken(ctx, token) {\n\t\tif (opts.storeToken === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.defaultKeyHasher)(token);\n\t\tif (typeof opts.storeToken === \"object\" && \"type\" in opts.storeToken && opts.storeToken.type === \"custom-hasher\") return await opts.storeToken.hash(token);\n\t\treturn token;\n\t}\n\tasync function generateToken(c, session) {\n\t\tconst token = opts?.generateToken ? await opts.generateToken(session, c) : (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32);\n\t\tconst expiresAt = new Date(Date.now() + (opts?.expiresIn ?? 3) * 60 * 1e3);\n\t\tconst storedToken = await storeToken(c, token);\n\t\tawait c.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.session.token,\n\t\t\tidentifier: `one-time-token:${storedToken}`,\n\t\t\texpiresAt\n\t\t});\n\t\treturn token;\n\t}\n\treturn {\n\t\tid: \"one-time-token\",\n\t\tendpoints: {\n\t\t\tgenerateOneTimeToken: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/one-time-token/generate\", {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sessionMiddleware]\n\t\t\t}, async (c) => {\n\t\t\t\tif (opts?.disableClientRequest && c.request) throw c.error(\"BAD_REQUEST\", { message: \"Client requests are disabled\" });\n\t\t\t\tconst session = c.context.session;\n\t\t\t\tconst token = await generateToken(c, session);\n\t\t\t\treturn c.json({ token });\n\t\t\t}),\n\t\t\tverifyOneTimeToken: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/one-time-token/verify\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: verifyOneTimeTokenBodySchema\n\t\t\t}, async (c) => {\n\t\t\t\tconst { token } = c.body;\n\t\t\t\tconst storedToken = await storeToken(c, token);\n\t\t\t\tconst verificationValue = await c.context.internalAdapter.findVerificationValue(`one-time-token:${storedToken}`);\n\t\t\t\tif (!verificationValue) throw c.error(\"BAD_REQUEST\", { message: \"Invalid token\" });\n\t\t\t\tawait c.context.internalAdapter.deleteVerificationValue(verificationValue.id);\n\t\t\t\tif (verificationValue.expiresAt < /* @__PURE__ */ new Date()) throw c.error(\"BAD_REQUEST\", { message: \"Token expired\" });\n\t\t\t\tconst session = await c.context.internalAdapter.findSession(verificationValue.value);\n\t\t\t\tif (!session) throw c.error(\"BAD_REQUEST\", { message: \"Session not found\" });\n\t\t\t\tif (!opts?.disableSetSessionCookie) await (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(c, session);\n\t\t\t\tif (session.session.expiresAt < /* @__PURE__ */ new Date()) throw c.error(\"BAD_REQUEST\", { message: \"Session expired\" });\n\t\t\t\treturn c.json(session);\n\t\t\t})\n\t\t},\n\t\thooks: { after: [{\n\t\t\tmatcher: () => true,\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tif (ctx.context.newSession) {\n\t\t\t\t\tif (!opts?.setOttHeaderOnNewSession) return;\n\t\t\t\t\tconst exposedHeaders = ctx.context.responseHeaders?.get(\"access-control-expose-headers\") || \"\";\n\t\t\t\t\tconst headersSet = new Set(exposedHeaders.split(\",\").map((header) => header.trim()).filter(Boolean));\n\t\t\t\t\theadersSet.add(\"set-ott\");\n\t\t\t\t\tconst token = await generateToken(ctx, ctx.context.newSession);\n\t\t\t\t\tctx.setHeader(\"set-ott\", token);\n\t\t\t\t\tctx.setHeader(\"Access-Control-Expose-Headers\", Array.from(headersSet).join(\", \"));\n\t\t\t\t}\n\t\t\t})\n\t\t}] },\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10aW1lLXRva2VuL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBK0Q7QUFDL0I7QUFDMkI7QUFDTTtBQUNwQztBQUNrQjtBQUN0QjtBQUN3RDs7QUFFakY7QUFDQSxxQ0FBcUMsdUNBQVEsR0FBRyxPQUFPLHVDQUFRLFVBQVUsd0RBQXdELEdBQUc7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELDREQUFnQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZFQUE2RSx3RUFBb0I7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsWUFBWTtBQUM3QztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHlFQUFrQjtBQUMzQztBQUNBLFVBQVUsc0VBQWlCO0FBQzNCLElBQUk7QUFDSixnRkFBZ0YseUNBQXlDO0FBQ3pIO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQixJQUFJO0FBQ0osdUJBQXVCLHlFQUFrQjtBQUN6QztBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksUUFBUTtBQUNwQjtBQUNBLHNHQUFzRyxZQUFZO0FBQ2xILDJEQUEyRCwwQkFBMEI7QUFDckY7QUFDQSxpR0FBaUcsMEJBQTBCO0FBQzNIO0FBQ0EsaURBQWlELDhCQUE4QjtBQUMvRSw4Q0FBOEMsb0VBQWdCO0FBQzlELCtGQUErRiw0QkFBNEI7QUFDM0g7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNILFdBQVc7QUFDWDtBQUNBLFlBQVksMkVBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvbmUtdGltZS10b2tlblxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9yYW5kb20ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0S2V5SGFzaGVyIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vbmUtdGltZS10b2tlbi9pbmRleC50c1xuY29uc3QgdmVyaWZ5T25lVGltZVRva2VuQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgdG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkuIEVnOiBcXFwic29tZS10b2tlblxcXCJcIiB9KSB9KTtcbmNvbnN0IG9uZVRpbWVUb2tlbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0c3RvcmVUb2tlbjogXCJwbGFpblwiLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblx0YXN5bmMgZnVuY3Rpb24gc3RvcmVUb2tlbihjdHgsIHRva2VuKSB7XG5cdFx0aWYgKG9wdHMuc3RvcmVUb2tlbiA9PT0gXCJoYXNoZWRcIikgcmV0dXJuIGF3YWl0IGRlZmF1bHRLZXlIYXNoZXIodG9rZW4pO1xuXHRcdGlmICh0eXBlb2Ygb3B0cy5zdG9yZVRva2VuID09PSBcIm9iamVjdFwiICYmIFwidHlwZVwiIGluIG9wdHMuc3RvcmVUb2tlbiAmJiBvcHRzLnN0b3JlVG9rZW4udHlwZSA9PT0gXCJjdXN0b20taGFzaGVyXCIpIHJldHVybiBhd2FpdCBvcHRzLnN0b3JlVG9rZW4uaGFzaCh0b2tlbik7XG5cdFx0cmV0dXJuIHRva2VuO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVG9rZW4oYywgc2Vzc2lvbikge1xuXHRcdGNvbnN0IHRva2VuID0gb3B0cz8uZ2VuZXJhdGVUb2tlbiA/IGF3YWl0IG9wdHMuZ2VuZXJhdGVUb2tlbihzZXNzaW9uLCBjKSA6IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyKTtcblx0XHRjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgKG9wdHM/LmV4cGlyZXNJbiA/PyAzKSAqIDYwICogMWUzKTtcblx0XHRjb25zdCBzdG9yZWRUb2tlbiA9IGF3YWl0IHN0b3JlVG9rZW4oYywgdG9rZW4pO1xuXHRcdGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdFx0dmFsdWU6IHNlc3Npb24uc2Vzc2lvbi50b2tlbixcblx0XHRcdGlkZW50aWZpZXI6IGBvbmUtdGltZS10b2tlbjoke3N0b3JlZFRva2VufWAsXG5cdFx0XHRleHBpcmVzQXRcblx0XHR9KTtcblx0XHRyZXR1cm4gdG9rZW47XG5cdH1cblx0cmV0dXJuIHtcblx0XHRpZDogXCJvbmUtdGltZS10b2tlblwiLFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0Z2VuZXJhdGVPbmVUaW1lVG9rZW46IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vbmUtdGltZS10b2tlbi9nZW5lcmF0ZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdFx0dXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdXG5cdFx0XHR9LCBhc3luYyAoYykgPT4ge1xuXHRcdFx0XHRpZiAob3B0cz8uZGlzYWJsZUNsaWVudFJlcXVlc3QgJiYgYy5yZXF1ZXN0KSB0aHJvdyBjLmVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkNsaWVudCByZXF1ZXN0cyBhcmUgZGlzYWJsZWRcIiB9KTtcblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGMuY29udGV4dC5zZXNzaW9uO1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGdlbmVyYXRlVG9rZW4oYywgc2Vzc2lvbik7XG5cdFx0XHRcdHJldHVybiBjLmpzb24oeyB0b2tlbiB9KTtcblx0XHRcdH0pLFxuXHRcdFx0dmVyaWZ5T25lVGltZVRva2VuOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb25lLXRpbWUtdG9rZW4vdmVyaWZ5XCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogdmVyaWZ5T25lVGltZVRva2VuQm9keVNjaGVtYVxuXHRcdFx0fSwgYXN5bmMgKGMpID0+IHtcblx0XHRcdFx0Y29uc3QgeyB0b2tlbiB9ID0gYy5ib2R5O1xuXHRcdFx0XHRjb25zdCBzdG9yZWRUb2tlbiA9IGF3YWl0IHN0b3JlVG9rZW4oYywgdG9rZW4pO1xuXHRcdFx0XHRjb25zdCB2ZXJpZmljYXRpb25WYWx1ZSA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGBvbmUtdGltZS10b2tlbjoke3N0b3JlZFRva2VufWApO1xuXHRcdFx0XHRpZiAoIXZlcmlmaWNhdGlvblZhbHVlKSB0aHJvdyBjLmVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkludmFsaWQgdG9rZW5cIiB9KTtcblx0XHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb25WYWx1ZS5pZCk7XG5cdFx0XHRcdGlmICh2ZXJpZmljYXRpb25WYWx1ZS5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgYy5lcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJUb2tlbiBleHBpcmVkXCIgfSk7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRTZXNzaW9uKHZlcmlmaWNhdGlvblZhbHVlLnZhbHVlKTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uKSB0aHJvdyBjLmVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlNlc3Npb24gbm90IGZvdW5kXCIgfSk7XG5cdFx0XHRcdGlmICghb3B0cz8uZGlzYWJsZVNldFNlc3Npb25Db29raWUpIGF3YWl0IHNldFNlc3Npb25Db29raWUoYywgc2Vzc2lvbik7XG5cdFx0XHRcdGlmIChzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IGMuZXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiU2Vzc2lvbiBleHBpcmVkXCIgfSk7XG5cdFx0XHRcdHJldHVybiBjLmpzb24oc2Vzc2lvbik7XG5cdFx0XHR9KVxuXHRcdH0sXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyOiAoKSA9PiB0cnVlLFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQubmV3U2Vzc2lvbikge1xuXHRcdFx0XHRcdGlmICghb3B0cz8uc2V0T3R0SGVhZGVyT25OZXdTZXNzaW9uKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3QgZXhwb3NlZEhlYWRlcnMgPSBjdHguY29udGV4dC5yZXNwb25zZUhlYWRlcnM/LmdldChcImFjY2Vzcy1jb250cm9sLWV4cG9zZS1oZWFkZXJzXCIpIHx8IFwiXCI7XG5cdFx0XHRcdFx0Y29uc3QgaGVhZGVyc1NldCA9IG5ldyBTZXQoZXhwb3NlZEhlYWRlcnMuc3BsaXQoXCIsXCIpLm1hcCgoaGVhZGVyKSA9PiBoZWFkZXIudHJpbSgpKS5maWx0ZXIoQm9vbGVhbikpO1xuXHRcdFx0XHRcdGhlYWRlcnNTZXQuYWRkKFwic2V0LW90dFwiKTtcblx0XHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGdlbmVyYXRlVG9rZW4oY3R4LCBjdHguY29udGV4dC5uZXdTZXNzaW9uKTtcblx0XHRcdFx0XHRjdHguc2V0SGVhZGVyKFwic2V0LW90dFwiLCB0b2tlbik7XG5cdFx0XHRcdFx0Y3R4LnNldEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUV4cG9zZS1IZWFkZXJzXCIsIEFycmF5LmZyb20oaGVhZGVyc1NldCkuam9pbihcIiwgXCIpKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9XSB9LFxuXHRcdG9wdGlvbnNcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb25lVGltZVRva2VuIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/utils.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-time-token/utils.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultKeyHasher: () => (/* binding */ defaultKeyHasher)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n//#region src/plugins/one-time-token/utils.ts\nconst defaultKeyHasher = async (token) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(token));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10aW1lLXRva2VuL3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDQzs7QUFFdEQ7QUFDQTtBQUNBLG9CQUFvQixtRUFBVTtBQUM5QixRQUFRLGdFQUFTLGdDQUFnQyxnQkFBZ0I7QUFDakU7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvbmUtdGltZS10b2tlblxcdXRpbHMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hhc2hcIjtcbmltcG9ydCB7IGJhc2U2NFVybCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vbmUtdGltZS10b2tlbi91dGlscy50c1xuY29uc3QgZGVmYXVsdEtleUhhc2hlciA9IGFzeW5jICh0b2tlbikgPT4ge1xuXHRjb25zdCBoYXNoID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0b2tlbikpO1xuXHRyZXR1cm4gYmFzZTY0VXJsLmVuY29kZShuZXcgVWludDhBcnJheShoYXNoKSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmYXVsdEtleUhhc2hlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/one-time-token/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/open-api/generator.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/open-api/generator.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generator: () => (/* binding */ generator)\n/* harmony export */ });\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n//#region src/plugins/open-api/generator.ts\nconst allowedType = new Set([\n\t\"string\",\n\t\"number\",\n\t\"boolean\",\n\t\"array\",\n\t\"object\"\n]);\nfunction getTypeFromZodType(zodType) {\n\tif (zodType instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodDefault) return getTypeFromZodType(zodType.unwrap());\n\tconst type = zodType.type;\n\treturn allowedType.has(type) ? type : \"string\";\n}\nfunction getFieldSchema(field) {\n\tconst schema = {\n\t\ttype: field.type === \"date\" ? \"string\" : field.type,\n\t\t...field.type === \"date\" && { format: \"date-time\" }\n\t};\n\tif (field.defaultValue !== void 0) schema.default = typeof field.defaultValue === \"function\" ? \"Generated at runtime\" : field.defaultValue;\n\tif (field.input === false) schema.readOnly = true;\n\treturn schema;\n}\nfunction getParameters(options) {\n\tconst parameters = [];\n\tif (options.metadata?.openapi?.parameters) {\n\t\tparameters.push(...options.metadata.openapi.parameters);\n\t\treturn parameters;\n\t}\n\tif (options.query instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodObject) Object.entries(options.query.shape).forEach(([key, value]) => {\n\t\tif (value instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodType) parameters.push({\n\t\t\tname: key,\n\t\t\tin: \"query\",\n\t\t\tschema: {\n\t\t\t\t...processZodType(value),\n\t\t\t\t...\"minLength\" in value && value.minLength ? { minLength: value.minLength } : {}\n\t\t\t}\n\t\t});\n\t});\n\treturn parameters;\n}\nfunction getRequestBody(options) {\n\tif (options.metadata?.openapi?.requestBody) return options.metadata.openapi.requestBody;\n\tif (!options.body) return void 0;\n\tif (options.body instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodObject || options.body instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodOptional) {\n\t\tconst shape = options.body.shape;\n\t\tif (!shape) return void 0;\n\t\tconst properties = {};\n\t\tconst required = [];\n\t\tObject.entries(shape).forEach(([key, value]) => {\n\t\t\tif (value instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodType) {\n\t\t\t\tproperties[key] = processZodType(value);\n\t\t\t\tif (!(value instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodOptional)) required.push(key);\n\t\t\t}\n\t\t});\n\t\treturn {\n\t\t\trequired: options.body instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodOptional ? false : options.body ? true : false,\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties,\n\t\t\t\trequired\n\t\t\t} } }\n\t\t};\n\t}\n}\nfunction processZodType(zodType) {\n\tif (zodType instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodOptional) {\n\t\tconst innerSchema = processZodType(zodType.unwrap());\n\t\tif (innerSchema.type) {\n\t\t\tconst type = Array.isArray(innerSchema.type) ? innerSchema.type : [innerSchema.type];\n\t\t\treturn {\n\t\t\t\t...innerSchema,\n\t\t\t\ttype: Array.from(new Set([...type, \"null\"]))\n\t\t\t};\n\t\t}\n\t\treturn { anyOf: [innerSchema, { type: \"null\" }] };\n\t}\n\tif (zodType instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodDefault) {\n\t\tconst innerSchema = processZodType(zodType.unwrap());\n\t\tconst defaultValueDef = zodType._def.defaultValue;\n\t\tconst defaultValue = typeof defaultValueDef === \"function\" ? defaultValueDef() : defaultValueDef;\n\t\treturn {\n\t\t\t...innerSchema,\n\t\t\tdefault: defaultValue\n\t\t};\n\t}\n\tif (zodType instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodObject) {\n\t\tconst shape = zodType.shape;\n\t\tif (shape) {\n\t\t\tconst properties = {};\n\t\t\tconst required = [];\n\t\t\tObject.entries(shape).forEach(([key, value]) => {\n\t\t\t\tif (value instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodType) {\n\t\t\t\t\tproperties[key] = processZodType(value);\n\t\t\t\t\tif (!(value instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodOptional)) required.push(key);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties,\n\t\t\t\t...required.length > 0 ? { required } : {},\n\t\t\t\tdescription: zodType.description\n\t\t\t};\n\t\t}\n\t}\n\treturn {\n\t\ttype: getTypeFromZodType(zodType),\n\t\tdescription: zodType.description\n\t};\n}\nfunction getResponse(responses) {\n\treturn {\n\t\t\"400\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } },\n\t\t\tdescription: \"Bad Request. Usually due to missing parameters, or invalid parameters.\"\n\t\t},\n\t\t\"401\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } },\n\t\t\tdescription: \"Unauthorized. Due to missing or invalid authentication.\"\n\t\t},\n\t\t\"403\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t} } },\n\t\t\tdescription: \"Forbidden. You do not have permission to access this resource or to perform this action.\"\n\t\t},\n\t\t\"404\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t} } },\n\t\t\tdescription: \"Not Found. The requested resource was not found.\"\n\t\t},\n\t\t\"429\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t} } },\n\t\t\tdescription: \"Too Many Requests. You have exceeded the rate limit. Try again later.\"\n\t\t},\n\t\t\"500\": {\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t} } },\n\t\t\tdescription: \"Internal Server Error. This is a problem with the server that you cannot fix.\"\n\t\t},\n\t\t...responses\n\t};\n}\nfunction toOpenApiPath(path) {\n\treturn path.split(\"/\").map((part) => part.startsWith(\":\") ? `{${part.slice(1)}}` : part).join(\"/\");\n}\nasync function generator(ctx, options) {\n\tconst baseEndpoints = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(ctx, {\n\t\t...options,\n\t\tplugins: []\n\t});\n\tconst tables = (0, _db_index_mjs__WEBPACK_IMPORTED_MODULE_0__.db_exports.getAuthTables)({\n\t\t...options,\n\t\tsession: {\n\t\t\t...options.session,\n\t\t\tstoreSessionInDatabase: true\n\t\t}\n\t});\n\tconst components = { schemas: { ...Object.entries(tables).reduce((acc, [key, value]) => {\n\t\tconst modelName = key.charAt(0).toUpperCase() + key.slice(1);\n\t\tconst fields = value.fields;\n\t\tconst required = [];\n\t\tconst properties = { id: { type: \"string\" } };\n\t\tObject.entries(fields).forEach(([fieldKey, fieldValue]) => {\n\t\t\tif (!fieldValue) return;\n\t\t\tproperties[fieldKey] = getFieldSchema(fieldValue);\n\t\t\tif (fieldValue.required && fieldValue.input !== false) required.push(fieldKey);\n\t\t});\n\t\tObject.entries(properties).forEach(([key$1, prop]) => {\n\t\t\tconst field = value.fields[key$1];\n\t\t\tif (field && field.type === \"date\" && prop.type === \"string\") prop.format = \"date-time\";\n\t\t});\n\t\tacc[modelName] = {\n\t\t\ttype: \"object\",\n\t\t\tproperties,\n\t\t\trequired\n\t\t};\n\t\treturn acc;\n\t}, {}) } };\n\tconst paths = {};\n\tObject.entries(baseEndpoints.api).forEach(([_, value]) => {\n\t\tif (!value.path || ctx.options.disabledPaths?.includes(value.path)) return;\n\t\tconst options$1 = value.options;\n\t\tif (options$1.metadata?.SERVER_ONLY) return;\n\t\tconst path = toOpenApiPath(value.path);\n\t\tif (options$1.method === \"GET\" || options$1.method === \"DELETE\") paths[path] = {\n\t\t\t...paths[path],\n\t\t\t[options$1.method.toLowerCase()]: {\n\t\t\t\ttags: [\"Default\", ...options$1.metadata?.openapi?.tags || []],\n\t\t\t\tdescription: options$1.metadata?.openapi?.description,\n\t\t\t\toperationId: options$1.metadata?.openapi?.operationId,\n\t\t\t\tsecurity: [{ bearerAuth: [] }],\n\t\t\t\tparameters: getParameters(options$1),\n\t\t\t\tresponses: getResponse(options$1.metadata?.openapi?.responses)\n\t\t\t}\n\t\t};\n\t\tif (options$1.method === \"POST\" || options$1.method === \"PATCH\" || options$1.method === \"PUT\") {\n\t\t\tconst body = getRequestBody(options$1);\n\t\t\tpaths[path] = {\n\t\t\t\t...paths[path],\n\t\t\t\t[options$1.method.toLowerCase()]: {\n\t\t\t\t\ttags: [\"Default\", ...options$1.metadata?.openapi?.tags || []],\n\t\t\t\t\tdescription: options$1.metadata?.openapi?.description,\n\t\t\t\t\toperationId: options$1.metadata?.openapi?.operationId,\n\t\t\t\t\tsecurity: [{ bearerAuth: [] }],\n\t\t\t\t\tparameters: getParameters(options$1),\n\t\t\t\t\t...body ? { requestBody: body } : { requestBody: { content: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {}\n\t\t\t\t\t} } } } },\n\t\t\t\t\tresponses: getResponse(options$1.metadata?.openapi?.responses)\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\tfor (const plugin of options.plugins || []) {\n\t\tif (plugin.id === \"open-api\") continue;\n\t\tconst pluginEndpoints = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(ctx, {\n\t\t\t...options,\n\t\t\tplugins: [plugin]\n\t\t});\n\t\tconst api = Object.keys(pluginEndpoints.api).map((key) => {\n\t\t\tif (baseEndpoints.api[key] === void 0) return pluginEndpoints.api[key];\n\t\t\treturn null;\n\t\t}).filter((x) => x !== null);\n\t\tObject.entries(api).forEach(([key, value]) => {\n\t\t\tif (!value.path || ctx.options.disabledPaths?.includes(value.path)) return;\n\t\t\tconst options$1 = value.options;\n\t\t\tif (options$1.metadata?.SERVER_ONLY) return;\n\t\t\tconst path = toOpenApiPath(value.path);\n\t\t\tif (options$1.method === \"GET\" || options$1.method === \"DELETE\") paths[path] = {\n\t\t\t\t...paths[path],\n\t\t\t\t[options$1.method.toLowerCase()]: {\n\t\t\t\t\ttags: options$1.metadata?.openapi?.tags || [plugin.id.charAt(0).toUpperCase() + plugin.id.slice(1)],\n\t\t\t\t\tdescription: options$1.metadata?.openapi?.description,\n\t\t\t\t\toperationId: options$1.metadata?.openapi?.operationId,\n\t\t\t\t\tsecurity: [{ bearerAuth: [] }],\n\t\t\t\t\tparameters: getParameters(options$1),\n\t\t\t\t\tresponses: getResponse(options$1.metadata?.openapi?.responses)\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (options$1.method === \"POST\" || options$1.method === \"PATCH\" || options$1.method === \"PUT\") paths[path] = {\n\t\t\t\t...paths[path],\n\t\t\t\t[options$1.method.toLowerCase()]: {\n\t\t\t\t\ttags: options$1.metadata?.openapi?.tags || [plugin.id.charAt(0).toUpperCase() + plugin.id.slice(1)],\n\t\t\t\t\tdescription: options$1.metadata?.openapi?.description,\n\t\t\t\t\toperationId: options$1.metadata?.openapi?.operationId,\n\t\t\t\t\tsecurity: [{ bearerAuth: [] }],\n\t\t\t\t\tparameters: getParameters(options$1),\n\t\t\t\t\trequestBody: getRequestBody(options$1),\n\t\t\t\t\tresponses: getResponse(options$1.metadata?.openapi?.responses)\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\treturn {\n\t\topenapi: \"3.1.1\",\n\t\tinfo: {\n\t\t\ttitle: \"Better Auth\",\n\t\t\tdescription: \"API Reference for your Better Auth Instance\",\n\t\t\tversion: \"1.1.0\"\n\t\t},\n\t\tcomponents: {\n\t\t\t...components,\n\t\t\tsecuritySchemes: {\n\t\t\t\tapiKeyCookie: {\n\t\t\t\t\ttype: \"apiKey\",\n\t\t\t\t\tin: \"cookie\",\n\t\t\t\t\tname: \"apiKeyCookie\",\n\t\t\t\t\tdescription: \"API Key authentication via cookie\"\n\t\t\t\t},\n\t\t\t\tbearerAuth: {\n\t\t\t\t\ttype: \"http\",\n\t\t\t\t\tscheme: \"bearer\",\n\t\t\t\t\tdescription: \"Bearer token authentication\"\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsecurity: [{\n\t\t\tapiKeyCookie: [],\n\t\t\tbearerAuth: []\n\t\t}],\n\t\tservers: [{ url: ctx.baseURL }],\n\t\ttags: [{\n\t\t\tname: \"Default\",\n\t\t\tdescription: \"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin.\"\n\t\t}],\n\t\tpaths\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=generator.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29wZW4tYXBpL2dlbmVyYXRvci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRDtBQUNHO0FBQzFCOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkNBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMENBQVc7QUFDekMsdUJBQXVCLHdDQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDZCQUE2QjtBQUNoRjtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwwQ0FBVyw0QkFBNEIsNENBQWE7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3Q0FBUztBQUNqQztBQUNBLDJCQUEyQiw0Q0FBYTtBQUN4QztBQUNBLEdBQUc7QUFDSDtBQUNBLHFDQUFxQyw0Q0FBYTtBQUNsRCxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDRDQUFhO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVCQUF1QixjQUFjO0FBQ2hEO0FBQ0Esd0JBQXdCLDJDQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMENBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3Q0FBUztBQUNsQztBQUNBLDRCQUE0Qiw0Q0FBYTtBQUN6QztBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVyxJQUFJO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFdBQVcsa0JBQWtCO0FBQy9DO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVyxrQkFBa0I7QUFDL0M7QUFDQSxRQUFRO0FBQ1I7QUFDQSxHQUFHO0FBQ0g7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixXQUFXO0FBQzdCLFFBQVE7QUFDUjtBQUNBLEdBQUc7QUFDSDtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFdBQVc7QUFDN0IsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QixRQUFRO0FBQ1I7QUFDQSxHQUFHO0FBQ0g7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixXQUFXO0FBQzdCLFFBQVE7QUFDUjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxFQUFFLGVBQWU7QUFDaEY7QUFDQTtBQUNBLHVCQUF1Qiw0REFBWTtBQUNuQztBQUNBO0FBQ0EsRUFBRTtBQUNGLG9CQUFvQixxREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHNCQUFzQixXQUFXO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixNQUFNO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUk7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQSxpQkFBaUIsb0JBQW9CLElBQUksZUFBZSxXQUFXLHNCQUFzQjtBQUN6RjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSwwQkFBMEIsNERBQVk7QUFDdEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWMsa0JBQWtCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcGVuLWFwaVxcZ2VuZXJhdG9yLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYl9leHBvcnRzIH0gZnJvbSBcIi4uLy4uL2RiL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnRzIH0gZnJvbSBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb3Blbi1hcGkvZ2VuZXJhdG9yLnRzXG5jb25zdCBhbGxvd2VkVHlwZSA9IG5ldyBTZXQoW1xuXHRcInN0cmluZ1wiLFxuXHRcIm51bWJlclwiLFxuXHRcImJvb2xlYW5cIixcblx0XCJhcnJheVwiLFxuXHRcIm9iamVjdFwiXG5dKTtcbmZ1bmN0aW9uIGdldFR5cGVGcm9tWm9kVHlwZSh6b2RUeXBlKSB7XG5cdGlmICh6b2RUeXBlIGluc3RhbmNlb2Ygei5ab2REZWZhdWx0KSByZXR1cm4gZ2V0VHlwZUZyb21ab2RUeXBlKHpvZFR5cGUudW53cmFwKCkpO1xuXHRjb25zdCB0eXBlID0gem9kVHlwZS50eXBlO1xuXHRyZXR1cm4gYWxsb3dlZFR5cGUuaGFzKHR5cGUpID8gdHlwZSA6IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBnZXRGaWVsZFNjaGVtYShmaWVsZCkge1xuXHRjb25zdCBzY2hlbWEgPSB7XG5cdFx0dHlwZTogZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgPyBcInN0cmluZ1wiIDogZmllbGQudHlwZSxcblx0XHQuLi5maWVsZC50eXBlID09PSBcImRhdGVcIiAmJiB7IGZvcm1hdDogXCJkYXRlLXRpbWVcIiB9XG5cdH07XG5cdGlmIChmaWVsZC5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkgc2NoZW1hLmRlZmF1bHQgPSB0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyBcIkdlbmVyYXRlZCBhdCBydW50aW1lXCIgOiBmaWVsZC5kZWZhdWx0VmFsdWU7XG5cdGlmIChmaWVsZC5pbnB1dCA9PT0gZmFsc2UpIHNjaGVtYS5yZWFkT25seSA9IHRydWU7XG5cdHJldHVybiBzY2hlbWE7XG59XG5mdW5jdGlvbiBnZXRQYXJhbWV0ZXJzKG9wdGlvbnMpIHtcblx0Y29uc3QgcGFyYW1ldGVycyA9IFtdO1xuXHRpZiAob3B0aW9ucy5tZXRhZGF0YT8ub3BlbmFwaT8ucGFyYW1ldGVycykge1xuXHRcdHBhcmFtZXRlcnMucHVzaCguLi5vcHRpb25zLm1ldGFkYXRhLm9wZW5hcGkucGFyYW1ldGVycyk7XG5cdFx0cmV0dXJuIHBhcmFtZXRlcnM7XG5cdH1cblx0aWYgKG9wdGlvbnMucXVlcnkgaW5zdGFuY2VvZiB6LlpvZE9iamVjdCkgT2JqZWN0LmVudHJpZXMob3B0aW9ucy5xdWVyeS5zaGFwZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0aWYgKHZhbHVlIGluc3RhbmNlb2Ygei5ab2RUeXBlKSBwYXJhbWV0ZXJzLnB1c2goe1xuXHRcdFx0bmFtZToga2V5LFxuXHRcdFx0aW46IFwicXVlcnlcIixcblx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHQuLi5wcm9jZXNzWm9kVHlwZSh2YWx1ZSksXG5cdFx0XHRcdC4uLlwibWluTGVuZ3RoXCIgaW4gdmFsdWUgJiYgdmFsdWUubWluTGVuZ3RoID8geyBtaW5MZW5ndGg6IHZhbHVlLm1pbkxlbmd0aCB9IDoge31cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiBwYXJhbWV0ZXJzO1xufVxuZnVuY3Rpb24gZ2V0UmVxdWVzdEJvZHkob3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5tZXRhZGF0YT8ub3BlbmFwaT8ucmVxdWVzdEJvZHkpIHJldHVybiBvcHRpb25zLm1ldGFkYXRhLm9wZW5hcGkucmVxdWVzdEJvZHk7XG5cdGlmICghb3B0aW9ucy5ib2R5KSByZXR1cm4gdm9pZCAwO1xuXHRpZiAob3B0aW9ucy5ib2R5IGluc3RhbmNlb2Ygei5ab2RPYmplY3QgfHwgb3B0aW9ucy5ib2R5IGluc3RhbmNlb2Ygei5ab2RPcHRpb25hbCkge1xuXHRcdGNvbnN0IHNoYXBlID0gb3B0aW9ucy5ib2R5LnNoYXBlO1xuXHRcdGlmICghc2hhcGUpIHJldHVybiB2b2lkIDA7XG5cdFx0Y29uc3QgcHJvcGVydGllcyA9IHt9O1xuXHRcdGNvbnN0IHJlcXVpcmVkID0gW107XG5cdFx0T2JqZWN0LmVudHJpZXMoc2hhcGUpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuXHRcdFx0aWYgKHZhbHVlIGluc3RhbmNlb2Ygei5ab2RUeXBlKSB7XG5cdFx0XHRcdHByb3BlcnRpZXNba2V5XSA9IHByb2Nlc3Nab2RUeXBlKHZhbHVlKTtcblx0XHRcdFx0aWYgKCEodmFsdWUgaW5zdGFuY2VvZiB6LlpvZE9wdGlvbmFsKSkgcmVxdWlyZWQucHVzaChrZXkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZXF1aXJlZDogb3B0aW9ucy5ib2R5IGluc3RhbmNlb2Ygei5ab2RPcHRpb25hbCA/IGZhbHNlIDogb3B0aW9ucy5ib2R5ID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllcyxcblx0XHRcdFx0cmVxdWlyZWRcblx0XHRcdH0gfSB9XG5cdFx0fTtcblx0fVxufVxuZnVuY3Rpb24gcHJvY2Vzc1pvZFR5cGUoem9kVHlwZSkge1xuXHRpZiAoem9kVHlwZSBpbnN0YW5jZW9mIHouWm9kT3B0aW9uYWwpIHtcblx0XHRjb25zdCBpbm5lclNjaGVtYSA9IHByb2Nlc3Nab2RUeXBlKHpvZFR5cGUudW53cmFwKCkpO1xuXHRcdGlmIChpbm5lclNjaGVtYS50eXBlKSB7XG5cdFx0XHRjb25zdCB0eXBlID0gQXJyYXkuaXNBcnJheShpbm5lclNjaGVtYS50eXBlKSA/IGlubmVyU2NoZW1hLnR5cGUgOiBbaW5uZXJTY2hlbWEudHlwZV07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5pbm5lclNjaGVtYSxcblx0XHRcdFx0dHlwZTogQXJyYXkuZnJvbShuZXcgU2V0KFsuLi50eXBlLCBcIm51bGxcIl0pKVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0cmV0dXJuIHsgYW55T2Y6IFtpbm5lclNjaGVtYSwgeyB0eXBlOiBcIm51bGxcIiB9XSB9O1xuXHR9XG5cdGlmICh6b2RUeXBlIGluc3RhbmNlb2Ygei5ab2REZWZhdWx0KSB7XG5cdFx0Y29uc3QgaW5uZXJTY2hlbWEgPSBwcm9jZXNzWm9kVHlwZSh6b2RUeXBlLnVud3JhcCgpKTtcblx0XHRjb25zdCBkZWZhdWx0VmFsdWVEZWYgPSB6b2RUeXBlLl9kZWYuZGVmYXVsdFZhbHVlO1xuXHRcdGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHR5cGVvZiBkZWZhdWx0VmFsdWVEZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZmF1bHRWYWx1ZURlZigpIDogZGVmYXVsdFZhbHVlRGVmO1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5pbm5lclNjaGVtYSxcblx0XHRcdGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZVxuXHRcdH07XG5cdH1cblx0aWYgKHpvZFR5cGUgaW5zdGFuY2VvZiB6LlpvZE9iamVjdCkge1xuXHRcdGNvbnN0IHNoYXBlID0gem9kVHlwZS5zaGFwZTtcblx0XHRpZiAoc2hhcGUpIHtcblx0XHRcdGNvbnN0IHByb3BlcnRpZXMgPSB7fTtcblx0XHRcdGNvbnN0IHJlcXVpcmVkID0gW107XG5cdFx0XHRPYmplY3QuZW50cmllcyhzaGFwZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0XHRcdGlmICh2YWx1ZSBpbnN0YW5jZW9mIHouWm9kVHlwZSkge1xuXHRcdFx0XHRcdHByb3BlcnRpZXNba2V5XSA9IHByb2Nlc3Nab2RUeXBlKHZhbHVlKTtcblx0XHRcdFx0XHRpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIHouWm9kT3B0aW9uYWwpKSByZXF1aXJlZC5wdXNoKGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllcyxcblx0XHRcdFx0Li4ucmVxdWlyZWQubGVuZ3RoID4gMCA/IHsgcmVxdWlyZWQgfSA6IHt9LFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogem9kVHlwZS5kZXNjcmlwdGlvblxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHR0eXBlOiBnZXRUeXBlRnJvbVpvZFR5cGUoem9kVHlwZSksXG5cdFx0ZGVzY3JpcHRpb246IHpvZFR5cGUuZGVzY3JpcHRpb25cblx0fTtcbn1cbmZ1bmN0aW9uIGdldFJlc3BvbnNlKHJlc3BvbnNlcykge1xuXHRyZXR1cm4ge1xuXHRcdFwiNDAwXCI6IHtcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcIm1lc3NhZ2VcIl1cblx0XHRcdH0gfSB9LFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiQmFkIFJlcXVlc3QuIFVzdWFsbHkgZHVlIHRvIG1pc3NpbmcgcGFyYW1ldGVycywgb3IgaW52YWxpZCBwYXJhbWV0ZXJzLlwiXG5cdFx0fSxcblx0XHRcIjQwMVwiOiB7XG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJtZXNzYWdlXCJdXG5cdFx0XHR9IH0gfSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuYXV0aG9yaXplZC4gRHVlIHRvIG1pc3Npbmcgb3IgaW52YWxpZCBhdXRoZW50aWNhdGlvbi5cIlxuXHRcdH0sXG5cdFx0XCI0MDNcIjoge1xuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHR9IH0gfSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkZvcmJpZGRlbi4gWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoaXMgcmVzb3VyY2Ugb3IgdG8gcGVyZm9ybSB0aGlzIGFjdGlvbi5cIlxuXHRcdH0sXG5cdFx0XCI0MDRcIjoge1xuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9XG5cdFx0XHR9IH0gfSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIk5vdCBGb3VuZC4gVGhlIHJlcXVlc3RlZCByZXNvdXJjZSB3YXMgbm90IGZvdW5kLlwiXG5cdFx0fSxcblx0XHRcIjQyOVwiOiB7XG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdH0gfSB9LFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVG9vIE1hbnkgUmVxdWVzdHMuIFlvdSBoYXZlIGV4Y2VlZGVkIHRoZSByYXRlIGxpbWl0LiBUcnkgYWdhaW4gbGF0ZXIuXCJcblx0XHR9LFxuXHRcdFwiNTAwXCI6IHtcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0fSB9IH0sXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFRoaXMgaXMgYSBwcm9ibGVtIHdpdGggdGhlIHNlcnZlciB0aGF0IHlvdSBjYW5ub3QgZml4LlwiXG5cdFx0fSxcblx0XHQuLi5yZXNwb25zZXNcblx0fTtcbn1cbmZ1bmN0aW9uIHRvT3BlbkFwaVBhdGgocGF0aCkge1xuXHRyZXR1cm4gcGF0aC5zcGxpdChcIi9cIikubWFwKChwYXJ0KSA9PiBwYXJ0LnN0YXJ0c1dpdGgoXCI6XCIpID8gYHske3BhcnQuc2xpY2UoMSl9fWAgOiBwYXJ0KS5qb2luKFwiL1wiKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRvcihjdHgsIG9wdGlvbnMpIHtcblx0Y29uc3QgYmFzZUVuZHBvaW50cyA9IGdldEVuZHBvaW50cyhjdHgsIHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdHBsdWdpbnM6IFtdXG5cdH0pO1xuXHRjb25zdCB0YWJsZXMgPSAoMCwgZGJfZXhwb3J0cy5nZXRBdXRoVGFibGVzKSh7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRzZXNzaW9uOiB7XG5cdFx0XHQuLi5vcHRpb25zLnNlc3Npb24sXG5cdFx0XHRzdG9yZVNlc3Npb25JbkRhdGFiYXNlOiB0cnVlXG5cdFx0fVxuXHR9KTtcblx0Y29uc3QgY29tcG9uZW50cyA9IHsgc2NoZW1hczogeyAuLi5PYmplY3QuZW50cmllcyh0YWJsZXMpLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcblx0XHRjb25zdCBtb2RlbE5hbWUgPSBrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSk7XG5cdFx0Y29uc3QgZmllbGRzID0gdmFsdWUuZmllbGRzO1xuXHRcdGNvbnN0IHJlcXVpcmVkID0gW107XG5cdFx0Y29uc3QgcHJvcGVydGllcyA9IHsgaWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH07XG5cdFx0T2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChbZmllbGRLZXksIGZpZWxkVmFsdWVdKSA9PiB7XG5cdFx0XHRpZiAoIWZpZWxkVmFsdWUpIHJldHVybjtcblx0XHRcdHByb3BlcnRpZXNbZmllbGRLZXldID0gZ2V0RmllbGRTY2hlbWEoZmllbGRWYWx1ZSk7XG5cdFx0XHRpZiAoZmllbGRWYWx1ZS5yZXF1aXJlZCAmJiBmaWVsZFZhbHVlLmlucHV0ICE9PSBmYWxzZSkgcmVxdWlyZWQucHVzaChmaWVsZEtleSk7XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmVudHJpZXMocHJvcGVydGllcykuZm9yRWFjaCgoW2tleSQxLCBwcm9wXSkgPT4ge1xuXHRcdFx0Y29uc3QgZmllbGQgPSB2YWx1ZS5maWVsZHNba2V5JDFdO1xuXHRcdFx0aWYgKGZpZWxkICYmIGZpZWxkLnR5cGUgPT09IFwiZGF0ZVwiICYmIHByb3AudHlwZSA9PT0gXCJzdHJpbmdcIikgcHJvcC5mb3JtYXQgPSBcImRhdGUtdGltZVwiO1xuXHRcdH0pO1xuXHRcdGFjY1ttb2RlbE5hbWVdID0ge1xuXHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdHByb3BlcnRpZXMsXG5cdFx0XHRyZXF1aXJlZFxuXHRcdH07XG5cdFx0cmV0dXJuIGFjYztcblx0fSwge30pIH0gfTtcblx0Y29uc3QgcGF0aHMgPSB7fTtcblx0T2JqZWN0LmVudHJpZXMoYmFzZUVuZHBvaW50cy5hcGkpLmZvckVhY2goKFtfLCB2YWx1ZV0pID0+IHtcblx0XHRpZiAoIXZhbHVlLnBhdGggfHwgY3R4Lm9wdGlvbnMuZGlzYWJsZWRQYXRocz8uaW5jbHVkZXModmFsdWUucGF0aCkpIHJldHVybjtcblx0XHRjb25zdCBvcHRpb25zJDEgPSB2YWx1ZS5vcHRpb25zO1xuXHRcdGlmIChvcHRpb25zJDEubWV0YWRhdGE/LlNFUlZFUl9PTkxZKSByZXR1cm47XG5cdFx0Y29uc3QgcGF0aCA9IHRvT3BlbkFwaVBhdGgodmFsdWUucGF0aCk7XG5cdFx0aWYgKG9wdGlvbnMkMS5tZXRob2QgPT09IFwiR0VUXCIgfHwgb3B0aW9ucyQxLm1ldGhvZCA9PT0gXCJERUxFVEVcIikgcGF0aHNbcGF0aF0gPSB7XG5cdFx0XHQuLi5wYXRoc1twYXRoXSxcblx0XHRcdFtvcHRpb25zJDEubWV0aG9kLnRvTG93ZXJDYXNlKCldOiB7XG5cdFx0XHRcdHRhZ3M6IFtcIkRlZmF1bHRcIiwgLi4ub3B0aW9ucyQxLm1ldGFkYXRhPy5vcGVuYXBpPy50YWdzIHx8IFtdXSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IG9wdGlvbnMkMS5tZXRhZGF0YT8ub3BlbmFwaT8uZGVzY3JpcHRpb24sXG5cdFx0XHRcdG9wZXJhdGlvbklkOiBvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/Lm9wZXJhdGlvbklkLFxuXHRcdFx0XHRzZWN1cml0eTogW3sgYmVhcmVyQXV0aDogW10gfV0sXG5cdFx0XHRcdHBhcmFtZXRlcnM6IGdldFBhcmFtZXRlcnMob3B0aW9ucyQxKSxcblx0XHRcdFx0cmVzcG9uc2VzOiBnZXRSZXNwb25zZShvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/LnJlc3BvbnNlcylcblx0XHRcdH1cblx0XHR9O1xuXHRcdGlmIChvcHRpb25zJDEubWV0aG9kID09PSBcIlBPU1RcIiB8fCBvcHRpb25zJDEubWV0aG9kID09PSBcIlBBVENIXCIgfHwgb3B0aW9ucyQxLm1ldGhvZCA9PT0gXCJQVVRcIikge1xuXHRcdFx0Y29uc3QgYm9keSA9IGdldFJlcXVlc3RCb2R5KG9wdGlvbnMkMSk7XG5cdFx0XHRwYXRoc1twYXRoXSA9IHtcblx0XHRcdFx0Li4ucGF0aHNbcGF0aF0sXG5cdFx0XHRcdFtvcHRpb25zJDEubWV0aG9kLnRvTG93ZXJDYXNlKCldOiB7XG5cdFx0XHRcdFx0dGFnczogW1wiRGVmYXVsdFwiLCAuLi5vcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/LnRhZ3MgfHwgW11dLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/LmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdG9wZXJhdGlvbklkOiBvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/Lm9wZXJhdGlvbklkLFxuXHRcdFx0XHRcdHNlY3VyaXR5OiBbeyBiZWFyZXJBdXRoOiBbXSB9XSxcblx0XHRcdFx0XHRwYXJhbWV0ZXJzOiBnZXRQYXJhbWV0ZXJzKG9wdGlvbnMkMSksXG5cdFx0XHRcdFx0Li4uYm9keSA/IHsgcmVxdWVzdEJvZHk6IGJvZHkgfSA6IHsgcmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7fVxuXHRcdFx0XHRcdH0gfSB9IH0gfSxcblx0XHRcdFx0XHRyZXNwb25zZXM6IGdldFJlc3BvbnNlKG9wdGlvbnMkMS5tZXRhZGF0YT8ub3BlbmFwaT8ucmVzcG9uc2VzKVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSk7XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIG9wdGlvbnMucGx1Z2lucyB8fCBbXSkge1xuXHRcdGlmIChwbHVnaW4uaWQgPT09IFwib3Blbi1hcGlcIikgY29udGludWU7XG5cdFx0Y29uc3QgcGx1Z2luRW5kcG9pbnRzID0gZ2V0RW5kcG9pbnRzKGN0eCwge1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdHBsdWdpbnM6IFtwbHVnaW5dXG5cdFx0fSk7XG5cdFx0Y29uc3QgYXBpID0gT2JqZWN0LmtleXMocGx1Z2luRW5kcG9pbnRzLmFwaSkubWFwKChrZXkpID0+IHtcblx0XHRcdGlmIChiYXNlRW5kcG9pbnRzLmFwaVtrZXldID09PSB2b2lkIDApIHJldHVybiBwbHVnaW5FbmRwb2ludHMuYXBpW2tleV07XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9KS5maWx0ZXIoKHgpID0+IHggIT09IG51bGwpO1xuXHRcdE9iamVjdC5lbnRyaWVzKGFwaSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG5cdFx0XHRpZiAoIXZhbHVlLnBhdGggfHwgY3R4Lm9wdGlvbnMuZGlzYWJsZWRQYXRocz8uaW5jbHVkZXModmFsdWUucGF0aCkpIHJldHVybjtcblx0XHRcdGNvbnN0IG9wdGlvbnMkMSA9IHZhbHVlLm9wdGlvbnM7XG5cdFx0XHRpZiAob3B0aW9ucyQxLm1ldGFkYXRhPy5TRVJWRVJfT05MWSkgcmV0dXJuO1xuXHRcdFx0Y29uc3QgcGF0aCA9IHRvT3BlbkFwaVBhdGgodmFsdWUucGF0aCk7XG5cdFx0XHRpZiAob3B0aW9ucyQxLm1ldGhvZCA9PT0gXCJHRVRcIiB8fCBvcHRpb25zJDEubWV0aG9kID09PSBcIkRFTEVURVwiKSBwYXRoc1twYXRoXSA9IHtcblx0XHRcdFx0Li4ucGF0aHNbcGF0aF0sXG5cdFx0XHRcdFtvcHRpb25zJDEubWV0aG9kLnRvTG93ZXJDYXNlKCldOiB7XG5cdFx0XHRcdFx0dGFnczogb3B0aW9ucyQxLm1ldGFkYXRhPy5vcGVuYXBpPy50YWdzIHx8IFtwbHVnaW4uaWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwbHVnaW4uaWQuc2xpY2UoMSldLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/LmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdG9wZXJhdGlvbklkOiBvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/Lm9wZXJhdGlvbklkLFxuXHRcdFx0XHRcdHNlY3VyaXR5OiBbeyBiZWFyZXJBdXRoOiBbXSB9XSxcblx0XHRcdFx0XHRwYXJhbWV0ZXJzOiBnZXRQYXJhbWV0ZXJzKG9wdGlvbnMkMSksXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiBnZXRSZXNwb25zZShvcHRpb25zJDEubWV0YWRhdGE/Lm9wZW5hcGk/LnJlc3BvbnNlcylcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGlmIChvcHRpb25zJDEubWV0aG9kID09PSBcIlBPU1RcIiB8fCBvcHRpb25zJDEubWV0aG9kID09PSBcIlBBVENIXCIgfHwgb3B0aW9ucyQxLm1ldGhvZCA9PT0gXCJQVVRcIikgcGF0aHNbcGF0aF0gPSB7XG5cdFx0XHRcdC4uLnBhdGhzW3BhdGhdLFxuXHRcdFx0XHRbb3B0aW9ucyQxLm1ldGhvZC50b0xvd2VyQ2FzZSgpXToge1xuXHRcdFx0XHRcdHRhZ3M6IG9wdGlvbnMkMS5tZXRhZGF0YT8ub3BlbmFwaT8udGFncyB8fCBbcGx1Z2luLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGx1Z2luLmlkLnNsaWNlKDEpXSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogb3B0aW9ucyQxLm1ldGFkYXRhPy5vcGVuYXBpPy5kZXNjcmlwdGlvbixcblx0XHRcdFx0XHRvcGVyYXRpb25JZDogb3B0aW9ucyQxLm1ldGFkYXRhPy5vcGVuYXBpPy5vcGVyYXRpb25JZCxcblx0XHRcdFx0XHRzZWN1cml0eTogW3sgYmVhcmVyQXV0aDogW10gfV0sXG5cdFx0XHRcdFx0cGFyYW1ldGVyczogZ2V0UGFyYW1ldGVycyhvcHRpb25zJDEpLFxuXHRcdFx0XHRcdHJlcXVlc3RCb2R5OiBnZXRSZXF1ZXN0Qm9keShvcHRpb25zJDEpLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogZ2V0UmVzcG9uc2Uob3B0aW9ucyQxLm1ldGFkYXRhPy5vcGVuYXBpPy5yZXNwb25zZXMpXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRvcGVuYXBpOiBcIjMuMS4xXCIsXG5cdFx0aW5mbzoge1xuXHRcdFx0dGl0bGU6IFwiQmV0dGVyIEF1dGhcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBSZWZlcmVuY2UgZm9yIHlvdXIgQmV0dGVyIEF1dGggSW5zdGFuY2VcIixcblx0XHRcdHZlcnNpb246IFwiMS4xLjBcIlxuXHRcdH0sXG5cdFx0Y29tcG9uZW50czoge1xuXHRcdFx0Li4uY29tcG9uZW50cyxcblx0XHRcdHNlY3VyaXR5U2NoZW1lczoge1xuXHRcdFx0XHRhcGlLZXlDb29raWU6IHtcblx0XHRcdFx0XHR0eXBlOiBcImFwaUtleVwiLFxuXHRcdFx0XHRcdGluOiBcImNvb2tpZVwiLFxuXHRcdFx0XHRcdG5hbWU6IFwiYXBpS2V5Q29va2llXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQVBJIEtleSBhdXRoZW50aWNhdGlvbiB2aWEgY29va2llXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVhcmVyQXV0aDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiaHR0cFwiLFxuXHRcdFx0XHRcdHNjaGVtZTogXCJiZWFyZXJcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJCZWFyZXIgdG9rZW4gYXV0aGVudGljYXRpb25cIlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWN1cml0eTogW3tcblx0XHRcdGFwaUtleUNvb2tpZTogW10sXG5cdFx0XHRiZWFyZXJBdXRoOiBbXVxuXHRcdH1dLFxuXHRcdHNlcnZlcnM6IFt7IHVybDogY3R4LmJhc2VVUkwgfV0sXG5cdFx0dGFnczogW3tcblx0XHRcdG5hbWU6IFwiRGVmYXVsdFwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiRGVmYXVsdCBlbmRwb2ludHMgdGhhdCBhcmUgaW5jbHVkZWQgd2l0aCBCZXR0ZXIgQXV0aCBieSBkZWZhdWx0LiBUaGVzZSBlbmRwb2ludHMgYXJlIG5vdCBwYXJ0IG9mIGFueSBwbHVnaW4uXCJcblx0XHR9XSxcblx0XHRwYXRoc1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdlbmVyYXRvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2VuZXJhdG9yLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/open-api/generator.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/open-api/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/open-api/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   openAPI: () => (/* binding */ openAPI)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _generator_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./generator.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/open-api/generator.mjs\");\n/* harmony import */ var _logo_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logo.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/open-api/logo.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n//#region src/plugins/open-api/index.ts\nconst getHTML = (apiReference, theme, nonce) => {\n\tconst nonceAttr = nonce ? `nonce=\"${nonce}\"` : \"\";\n\treturn `<!doctype html>\n<html>\n  <head>\n    <title>Scalar API Reference</title>\n    <meta charset=\"utf-8\" />\n    <meta\n      name=\"viewport\"\n      content=\"width=device-width, initial-scale=1\" />\n  </head>\n  <body>\n    <script\n      id=\"api-reference\"\n      type=\"application/json\">\n    ${JSON.stringify(apiReference)}\n    <\\/script>\n\t <script ${nonceAttr}>\n      var configuration = {\n\t  \tfavicon: \"data:image/svg+xml;utf8,${encodeURIComponent(_logo_mjs__WEBPACK_IMPORTED_MODULE_4__.logo)}\",\n\t   \ttheme: \"${theme || \"default\"}\",\n        metaData: {\n\t\t\ttitle: \"Better Auth API\",\n\t\t\tdescription: \"API Reference for your Better Auth Instance\",\n\t\t}\n      }\n\n      document.getElementById('api-reference').dataset.configuration =\n        JSON.stringify(configuration)\n    <\\/script>\n\t  <script src=\"https://cdn.jsdelivr.net/npm/@scalar/api-reference\" ${nonceAttr}><\\/script>\n  </body>\n</html>`;\n};\nconst openAPI = (options) => {\n\tconst path = options?.path ?? \"/reference\";\n\treturn {\n\t\tid: \"open-api\",\n\t\tendpoints: {\n\t\t\tgenerateOpenAPISchema: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_5__.createAuthEndpoint)(\"/open-api/generate-schema\", { method: \"GET\" }, async (ctx) => {\n\t\t\t\tconst schema = await (0,_generator_mjs__WEBPACK_IMPORTED_MODULE_3__.generator)(ctx.context, ctx.context.options);\n\t\t\t\treturn ctx.json(schema);\n\t\t\t}),\n\t\t\topenAPIReference: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_5__.createAuthEndpoint)(path, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tmetadata: _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (options?.disableDefaultReference) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"NOT_FOUND\");\n\t\t\t\tconst schema = await (0,_generator_mjs__WEBPACK_IMPORTED_MODULE_3__.generator)(ctx.context, ctx.context.options);\n\t\t\t\treturn new Response(getHTML(schema, options?.theme, options?.nonce), { headers: { \"Content-Type\": \"text/html\" } });\n\t\t\t})\n\t\t},\n\t\toptions\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29wZW4tYXBpL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThEO0FBQy9CO0FBQ2dCO0FBQ0g7QUFDVjtBQUN5Qjs7QUFFM0Q7QUFDQTtBQUNBLHFDQUFxQyxNQUFNO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0EsaUNBQWlDLE9BQU8sbUJBQW1CLDJDQUFJLEVBQUU7QUFDakUsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0UsVUFBVTtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlFQUFrQixnQ0FBZ0MsZUFBZTtBQUMzRix5QkFBeUIseURBQVM7QUFDbEM7QUFDQSxJQUFJO0FBQ0oscUJBQXFCLHlFQUFrQjtBQUN2QztBQUNBLGNBQWMsbUVBQWE7QUFDM0IsSUFBSTtBQUNKLG9EQUFvRCxvREFBUTtBQUM1RCx5QkFBeUIseURBQVM7QUFDbEMsMkVBQTJFLFdBQVcsK0JBQStCO0FBQ3JILElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcb3Blbi1hcGlcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi91dGlscy9pbmRleC5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRvciB9IGZyb20gXCIuL2dlbmVyYXRvci5tanNcIjtcbmltcG9ydCB7IGxvZ28gfSBmcm9tIFwiLi9sb2dvLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb3Blbi1hcGkvaW5kZXgudHNcbmNvbnN0IGdldEhUTUwgPSAoYXBpUmVmZXJlbmNlLCB0aGVtZSwgbm9uY2UpID0+IHtcblx0Y29uc3Qgbm9uY2VBdHRyID0gbm9uY2UgPyBgbm9uY2U9XCIke25vbmNlfVwiYCA6IFwiXCI7XG5cdHJldHVybiBgPCFkb2N0eXBlIGh0bWw+XG48aHRtbD5cbiAgPGhlYWQ+XG4gICAgPHRpdGxlPlNjYWxhciBBUEkgUmVmZXJlbmNlPC90aXRsZT5cbiAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIiAvPlxuICAgIDxtZXRhXG4gICAgICBuYW1lPVwidmlld3BvcnRcIlxuICAgICAgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xXCIgLz5cbiAgPC9oZWFkPlxuICA8Ym9keT5cbiAgICA8c2NyaXB0XG4gICAgICBpZD1cImFwaS1yZWZlcmVuY2VcIlxuICAgICAgdHlwZT1cImFwcGxpY2F0aW9uL2pzb25cIj5cbiAgICAke0pTT04uc3RyaW5naWZ5KGFwaVJlZmVyZW5jZSl9XG4gICAgPFxcL3NjcmlwdD5cblx0IDxzY3JpcHQgJHtub25jZUF0dHJ9PlxuICAgICAgdmFyIGNvbmZpZ3VyYXRpb24gPSB7XG5cdCAgXHRmYXZpY29uOiBcImRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LCR7ZW5jb2RlVVJJQ29tcG9uZW50KGxvZ28pfVwiLFxuXHQgICBcdHRoZW1lOiBcIiR7dGhlbWUgfHwgXCJkZWZhdWx0XCJ9XCIsXG4gICAgICAgIG1ldGFEYXRhOiB7XG5cdFx0XHR0aXRsZTogXCJCZXR0ZXIgQXV0aCBBUElcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkFQSSBSZWZlcmVuY2UgZm9yIHlvdXIgQmV0dGVyIEF1dGggSW5zdGFuY2VcIixcblx0XHR9XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcGktcmVmZXJlbmNlJykuZGF0YXNldC5jb25maWd1cmF0aW9uID1cbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoY29uZmlndXJhdGlvbilcbiAgICA8XFwvc2NyaXB0PlxuXHQgIDxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9Ac2NhbGFyL2FwaS1yZWZlcmVuY2VcIiAke25vbmNlQXR0cn0+PFxcL3NjcmlwdD5cbiAgPC9ib2R5PlxuPC9odG1sPmA7XG59O1xuY29uc3Qgb3BlbkFQSSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHBhdGggPSBvcHRpb25zPy5wYXRoID8/IFwiL3JlZmVyZW5jZVwiO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm9wZW4tYXBpXCIsXG5cdFx0ZW5kcG9pbnRzOiB7XG5cdFx0XHRnZW5lcmF0ZU9wZW5BUElTY2hlbWE6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcGVuLWFwaS9nZW5lcmF0ZS1zY2hlbWFcIiwgeyBtZXRob2Q6IFwiR0VUXCIgfSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBzY2hlbWEgPSBhd2FpdCBnZW5lcmF0b3IoY3R4LmNvbnRleHQsIGN0eC5jb250ZXh0Lm9wdGlvbnMpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oc2NoZW1hKTtcblx0XHRcdH0pLFxuXHRcdFx0b3BlbkFQSVJlZmVyZW5jZTogY3JlYXRlQXV0aEVuZHBvaW50KHBhdGgsIHtcblx0XHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0XHRtZXRhZGF0YTogSElERV9NRVRBREFUQVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZURlZmF1bHRSZWZlcmVuY2UpIHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcblx0XHRcdFx0Y29uc3Qgc2NoZW1hID0gYXdhaXQgZ2VuZXJhdG9yKGN0eC5jb250ZXh0LCBjdHguY29udGV4dC5vcHRpb25zKTtcblx0XHRcdFx0cmV0dXJuIG5ldyBSZXNwb25zZShnZXRIVE1MKHNjaGVtYSwgb3B0aW9ucz8udGhlbWUsIG9wdGlvbnM/Lm5vbmNlKSwgeyBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9odG1sXCIgfSB9KTtcblx0XHRcdH0pXG5cdFx0fSxcblx0XHRvcHRpb25zXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG9wZW5BUEkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/open-api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/open-api/logo.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/open-api/logo.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logo: () => (/* binding */ logo)\n/* harmony export */ });\n//#region src/plugins/open-api/logo.ts\nconst logo = `<svg width=\"75\" height=\"75\" viewBox=\"0 0 75 75\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<rect width=\"75\" height=\"75\" fill=\"url(#pattern0_21_12)\"/>\n<defs>\n<pattern id=\"pattern0_21_12\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\n<use xlink:href=\"#image0_21_12\" transform=\"scale(0.00094697)\"/>\n</pattern>\n<image id=\"image0_21_12\" width=\"1056\" height=\"1056\" xlink:href=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAEIKADAAQAAAABAAAEIAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+ICKElDQ19QUk9GSUxFAAEBAAACGGFwcGwEAAAAbW50clJHQiBYWVogB+YAAQABAAAAAAAAYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBs7P2jjjiFR8NttL1PetoYLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKZGVzYwAAAPwAAAAwY3BydAAAASwAAABQd3RwdAAAAXwAAAAUclhZWgAAAZAAAAAUZ1hZWgAAAaQAAAAUYlhZWgAAAbgAAAAUclRSQwAAAcwAAAAgY2hhZAAAAewAAAAsYlRSQwAAAcwAAAAgZ1RSQwAAAcwAAAAgbWx1YwAAAAAAAAABAAAADGVuVVMAAAAUAAAAHABEAGkAcwBwAGwAYQB5ACAAUAAzbWx1YwAAAAAAAAABAAAADGVuVVMAAAA0AAAAHABDAG8AcAB5AHIAaQBnAGgAdAAgAEEAcABwAGwAZQAgAEkAbgBjAC4ALAAgADIAMAAyADJYWVogAAAAAAAA9tUAAQAAAADTLFhZWiAAAAAAAACD3wAAPb////+7WFlaIAAAAAAAAEq/AACxNwAACrlYWVogAAAAAAAAKDgAABELAADIuXBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbc2YzMgAAAAAAAQxCAAAF3v//8yYAAAeTAAD9kP//+6L///2jAAAD3AAAwG7/wAARCAQgBCADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABABC/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Ln/gq38a/in8Dvgp4T8R/CfxFdeG9SvvFMdlcXFoELyW5srqQxnzEcY3op4Gciv1Gr8Z/+C2X/JvXgj/sc4v/AE33lAH4z/8ADwv9tD/oq2tf9823/wAZo/4eF/tof9FW1r/vm2/+M18Z0UAfZn/Dwv8AbQ/6KtrX/fNt/wDGaP8Ah4X+2h/0VbWv++bb/wCM18Z0UAfZn/Dwv9tD/oq2tf8AfNt/8Zo/4eF/tof9FW1r/vm2/wDjNfGdFAH2Z/w8L/bQ/wCira1/3zbf/GaP+Hhf7aH/AEVbWv8Avm2/+M18Z0UAfZn/AA8L/bQ/6KtrX/fNt/8AGaP+Hhf7aH/RVta/75tv/jNfGdFAH2Z/w8L/AG0P+ira1/3zbf8Axmj/AIeF/tof9FW1r/vm2/8AjNfGdFAH63/sVftq/tTfEb9qb4deCfG3xF1TVtD1bVGgvbKdYBHPGIJW2ttiVsblB4I6V/UbX8Z//BPT/k9D4U/9hpv/AEmmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+M/wD4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAPsz/h4X+2h/0VbWv++bb/4zR/w8L/bQ/wCira1/3zbf/Ga+M6KAPsz/AIeF/tof9FW1r/vm2/8AjNH/AA8L/bQ/6KtrX/fNt/8AGa+M6KAPsz/h4X+2h/0VbWv++bb/AOM0f8PC/wBtD/oq2tf9823/AMZr4zooA+zP+Hhf7aH/AEVbWv8Avm2/+M0f8PC/20P+ira1/wB823/xmvjOigD7M/4eF/tof9FW1r/vm2/+M0f8PC/20P8Aoq2tf9823/xmvjOigD7M/wCHhf7aH/RVta/75tv/AIzR/wAPC/20P+ira1/3zbf/ABmvjOigD7M/4eF/tof9FW1r/vm2/wDjNH/Dwv8AbQ/6KtrX/fNt/wDGa+M6KAPsz/h4X+2h/wBFW1r/AL5tv/jNH/Dwv9tD/oq2tf8AfNt/8Zr4zooA+zP+Hhf7aH/RVta/75tv/jNH/Dwv9tD/AKKtrX/fNt/8Zr4zooA+zP8Ah4X+2h/0VbWv++bb/wCM0f8ADwv9tD/oq2tf9823/wAZr4zooA+zP+Hhf7aH/RVta/75tv8A4zR/w8L/AG0P+ira1/3zbf8AxmvjOigD7M/4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAP6tv+CUnxr+Kfxx+CnizxH8WPEV14k1Kx8UyWVvcXYQPHbiytZBGPLRBje7HkZya/Uavxn/AOCJv/JvXjf/ALHOX/032dfsxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfwq/BT4r638Dvin4d+LHhy0tb7UvDd0bu3t70ObeRzG0eJBGyPjDnowOa/Ub/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH9MlFfzN/8Psv2hf+hI8Gf9+tQ/8Ak2j/AIfZftC/9CR4M/79ah/8m0Af0yUV/M3/AMPsv2hf+hI8Gf8AfrUP/k2j/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH4z0V/TJ/w5N/Z6/6Hfxn/wB/dP8A/kKj/hyb+z1/0O/jP/v7p/8A8hUAfzN0V/TJ/wAOTf2ev+h38Z/9/dP/APkKj/hyb+z1/wBDv4z/AO/un/8AyFQB/M3RX9Mn/Dk39nr/AKHfxn/390//AOQqP+HJv7PX/Q7+M/8Av7p//wAhUAfzN0V/TJ/w5N/Z6/6Hfxn/AN/dP/8AkKj/AIcm/s9f9Dv4z/7+6f8A/IVAH8zdFf0yf8OTf2ev+h38Z/8Af3T/AP5Co/4cm/s9f9Dv4z/7+6f/APIVAH8zdFf0yf8ADk39nr/od/Gf/f3T/wD5Co/4cm/s9f8AQ7+M/wDv7p//AMhUAfzN0V/TJ/w5N/Z6/wCh38Z/9/dP/wDkKvwV/ag+FGifA74++M/hP4cu7q+03w3fi0t7i9KG4kQxRyZkMaomcueigYoA8FooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/AOxzl/8ATfZ1+zFfjP8A8ETf+TevG/8A2Ocv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD1L4KfCjW/jj8U/Dvwn8OXdrY6l4kujaW9xelxbxuI2kzIY1d8YQ9FJzX6jf8OTf2hf8Aod/Bn/f3UP8A5Cr4z/4J6f8AJ6Hwp/7DTf8ApNNX9mFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH8zf8Aw5N/aF/6HfwZ/wB/dQ/+QqP+HJv7Qv8A0O/gz/v7qH/yFX9MlFAH8zf/AA5N/aF/6HfwZ/391D/5Co/4cm/tC/8AQ7+DP+/uof8AyFX9MlFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH4z/8AD7L9nr/oSPGf/frT/wD5No/4fZfs9f8AQkeM/wDv1p//AMm1/M3RQB/TJ/w+y/Z6/wChI8Z/9+tP/wDk2j/h9l+z1/0JHjP/AL9af/8AJtfzN0UAf0yf8Psv2ev+hI8Z/wDfrT//AJNo/wCH2X7PX/QkeM/+/Wn/APybX8zdFAH9Mn/D7L9nr/oSPGf/AH60/wD+TaP+H2X7PX/QkeM/+/Wn/wDybX8zdFAH9Mn/AA+y/Z6/6Ejxn/360/8A+TaP+H2X7PX/AEJHjP8A79af/wDJtfzN0UAf0yf8Psv2ev8AoSPGf/frT/8A5No/4fZfs9f9CR4z/wC/Wn//ACbX8zdFAH9Mn/D7L9nr/oSPGf8A360//wCTa/BX9qD4r6J8cfj74z+LHhy0urHTfEl+Lu3t70ILiNBFHHiQRs6Zyh6MRivBaKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/ACb143/7HOX/ANN9nX7MV+M//BE3/k3rxv8A9jnL/wCm+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+XP/BVv4KfFP44/BTwn4c+E/h268SalY+KY724t7QoHjtxZXUZkPmOgxvdRwc5NAH8pNFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAfGdFfZn/DvT9tD/AKJTrX/fVt/8eo/4d6ftof8ARKda/wC+rb/49QB8Z0V9mf8ADvT9tD/olOtf99W3/wAeo/4d6ftof9Ep1r/vq2/+PUAfGdFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAH/BPT/k9D4U/wDYab/0mmr+zCv5cv2Kv2Kv2pvhz+1N8OvG3jb4dappOh6TqjT3t7O0BjgjMEq7m2ys2NzAcA9a/qNoAKKKKACiiigAooooAKKKKACiiigAooooA/gDor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD9mP+CJv/JvXjf8A7HOX/wBN9nX7MV+XP/BKT4KfFP4HfBTxZ4c+LHh268N6lfeKZL23t7soXktzZWsYkHlu4xvRhyc5FfqNQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q==\"/>\n</defs>\n</svg>\n`;\n\n//#endregion\n\n//# sourceMappingURL=logo.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29wZW4tYXBpL2xvZ28ubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7O0FBRUE7QUFDZ0I7QUFDaEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcGVuLWFwaVxcbG9nby5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29wZW4tYXBpL2xvZ28udHNcbmNvbnN0IGxvZ28gPSBgPHN2ZyB3aWR0aD1cIjc1XCIgaGVpZ2h0PVwiNzVcIiB2aWV3Qm94PVwiMCAwIDc1IDc1XCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XG48cmVjdCB3aWR0aD1cIjc1XCIgaGVpZ2h0PVwiNzVcIiBmaWxsPVwidXJsKCNwYXR0ZXJuMF8yMV8xMilcIi8+XG48ZGVmcz5cbjxwYXR0ZXJuIGlkPVwicGF0dGVybjBfMjFfMTJcIiBwYXR0ZXJuQ29udGVudFVuaXRzPVwib2JqZWN0Qm91bmRpbmdCb3hcIiB3aWR0aD1cIjFcIiBoZWlnaHQ9XCIxXCI+XG48dXNlIHhsaW5rOmhyZWY9XCIjaW1hZ2UwXzIxXzEyXCIgdHJhbnNmb3JtPVwic2NhbGUoMC4wMDA5NDY5NylcIi8+XG48L3BhdHRlcm4+XG48aW1hZ2UgaWQ9XCJpbWFnZTBfMjFfMTJcIiB3aWR0aD1cIjEwNTZcIiBoZWlnaHQ9XCIxMDU2XCIgeGxpbms6aHJlZj1cImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsLzlqLzRBQVFTa1pKUmdBQkFRQUFTQUJJQUFELzRRQkFSWGhwWmdBQVRVMEFLZ0FBQUFnQUFZZHBBQVFBQUFBQkFBQUFHZ0FBQUFBQUFxQUNBQVFBQUFBQkFBQUVJS0FEQUFRQUFBQUJBQUFFSUFBQUFBRC83UUE0VUdodmRHOXphRzl3SURNdU1BQTRRa2xOQkFRQUFBQUFBQUE0UWtsTkJDVUFBQUFBQUJEVUhZelpqd0N5Qk9tQUNaanMrRUorLytJQ0tFbERRMTlRVWs5R1NVeEZBQUVCQUFBQ0dHRndjR3dFQUFBQWJXNTBjbEpIUWlCWVdWb2dCK1lBQVFBQkFBQUFBQUFBWVdOemNFRlFVRXdBQUFBQVFWQlFUQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUGJXQUFFQUFBQUEweTFoY0hCczdQMmpqamlGUjhOdHRMMVBldG9ZTHdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUtaR1Z6WXdBQUFQd0FBQUF3WTNCeWRBQUFBU3dBQUFCUWQzUndkQUFBQVh3QUFBQVVjbGhaV2dBQUFaQUFBQUFVWjFoWldnQUFBYVFBQUFBVVlsaFpXZ0FBQWJnQUFBQVVjbFJTUXdBQUFjd0FBQUFnWTJoaFpBQUFBZXdBQUFBc1lsUlNRd0FBQWN3QUFBQWdaMVJTUXdBQUFjd0FBQUFnYld4MVl3QUFBQUFBQUFBQkFBQUFER1Z1VlZNQUFBQVVBQUFBSEFCRUFHa0Fjd0J3QUd3QVlRQjVBQ0FBVUFBemJXeDFZd0FBQUFBQUFBQUJBQUFBREdWdVZWTUFBQUEwQUFBQUhBQkRBRzhBY0FCNUFISUFhUUJuQUdnQWRBQWdBRUVBY0FCd0FHd0FaUUFnQUVrQWJnQmpBQzRBTEFBZ0FESUFNQUF5QURKWVdWb2dBQUFBQUFBQTl0VUFBUUFBQUFEVExGaFpXaUFBQUFBQUFBQ0Qzd0FBUGIvLy8vKzdXRmxhSUFBQUFBQUFBRXEvQUFDeE53QUFDcmxZV1ZvZ0FBQUFBQUFBS0RnQUFCRUxBQURJdVhCaGNtRUFBQUFBQUFNQUFBQUNabVlBQVBLbkFBQU5XUUFBRTlBQUFBcGJjMll6TWdBQUFBQUFBUXhDQUFBRjN2Ly84eVlBQUFlVEFBRDlrUC8vKzZMLy8vMmpBQUFEM0FBQXdHNy93QUFSQ0FRZ0JDQURBU0lBQWhFQkF4RUIvOFFBSHdBQUFRVUJBUUVCQVFFQUFBQUFBQUFBQUFFQ0F3UUZCZ2NJQ1FvTC84UUF0UkFBQWdFREF3SUVBd1VGQkFRQUFBRjlBUUlEQUFRUkJSSWhNVUVHRTFGaEJ5SnhGREtCa2FFSUkwS3h3UlZTMGZBa00ySnlnZ2tLRmhjWUdSb2xKaWNvS1NvME5UWTNPRGs2UTBSRlJrZElTVXBUVkZWV1YxaFpXbU5rWldabmFHbHFjM1IxZG5kNGVYcURoSVdHaDRpSmlwS1RsSldXbDVpWm1xS2pwS1dtcDZpcHFyS3p0TFcydDdpNXVzTER4TVhHeDhqSnl0TFQxTlhXMTlqWjJ1SGk0K1RsNXVmbzZlcng4dlAwOWZiMytQbjYvOFFBSHdFQUF3RUJBUUVCQVFFQkFRQUFBQUFBQUFFQ0F3UUZCZ2NJQ1FvTC84UUF0UkVBQWdFQ0JBUURCQWNGQkFRQUFRSjNBQUVDQXhFRUJTRXhCaEpCVVFkaGNSTWlNb0VJRkVLUm9iSEJDU016VXZBVlluTFJDaFlrTk9FbDhSY1lHUm9tSnlncEtqVTJOemc1T2tORVJVWkhTRWxLVTFSVlZsZFlXVnBqWkdWbVoyaHBhbk4wZFhaM2VIbDZnb09FaFlhSGlJbUtrcE9VbFphWG1KbWFvcU9rcGFhbnFLbXFzck8wdGJhM3VMbTZ3c1BFeGNiSHlNbkswdFBVMWRiWDJObmE0dVBrNWVibjZPbnE4dlAwOWZiMytQbjYvOXNBUXdBQ0FnSUNBZ0lEQWdJREJBTURBd1FGQkFRRUJBVUhCUVVGQlFVSENBY0hCd2NIQndnSUNBZ0lDQWdJQ2dvS0Nnb0tDd3NMQ3dzTkRRME5EUTBORFEwTi85c0FRd0VDQWdJREF3TUdBd01HRFFrSENRME5EUTBORFEwTkRRME5EUTBORFEwTkRRME5EUTBORFEwTkRRME5EUTBORFEwTkRRME5EUTBORFEwTkRRME5EUTBOLzkwQUJBQkMvOW9BREFNQkFBSVJBeEVBUHdEOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9RL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8wZjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85TDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vVC9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMVAzOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QvOVg5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvL1cvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQLzEvMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzlEOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9SL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8wdjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85UDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vVS9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMWYzOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QvOWI5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvL1gvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQLzBQMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzlIOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9TL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8wLzM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85VDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vVi9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMXYzOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BSy9Mbi9ncTM4YS9pbjhEdmdwNFQ4Ui9DZnhGZGVHOVN2dkZNZGxjWEZvRUx5VzVzcnFReG56RWNZM29wNEdjaXYxR3I4Wi8rQzJYL0p2WGdqL3NjNHYvQUUzM2xBSDR6LzhBRHd2OXREL29xMnRmOTgyMy93QVpvLzRlRi90b2Y5Rlcxci92bTIvK00xOFowVUFmWm4vRHd2OEFiUS82S3RyWC9mTnQvd0RHYVA4QWg0WCsyaC8wVmJXdisrYmIvd0NNMThaMFVBZlpuL0R3djl0RC9vcTJ0ZjhBZk50Lzhaby80ZUYvdG9mOUZXMXIvdm0yL3dEak5mR2RGQUgyWi93OEwvYlEvd0NpcmExLzN6YmYvR2FQK0hoZjdhSC9BRVZiV3Y4QXZtMi8rTTE4WjBVQWZabi9BQThML2JRLzZLdHJYL2ZOdC84QUdhUCtIaGY3YUgvUlZ0YS83NXR2L2pOZkdkRkFIMlovdzhML0FHMFAraXJhMS8zemJmOEF4bWovQUllRi90b2Y5Rlcxci92bTIvOEFqTmZHZEZBSDYzL3NWZnRxL3RUZkViOXFiNGRlQ2ZHM3hGMVRWdEQxYlZHZ3ZiS2RZQkhQR0lKVzJ0dGlWc2JsQjRJNlYvVWJYOFovL0JQVC9rOUQ0VS85aHB2L0FFbW1yK3pDZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRCtNL3dENGVGL3RvZjhBUlZ0YS93QytiYi80elIvdzhML2JRLzZLdHJYL0FIemJmL0dhK002S0FQc3ovaDRYKzJoLzBWYld2KytiYi80elIvdzhML2JRL3dDaXJhMS8zemJmL0dhK002S0FQc3ovQUllRi90b2Y5Rlcxci92bTIvOEFqTkgvQUE4TC9iUS82S3RyWC9mTnQvOEFHYStNNktBUHN6L2g0WCsyaC8wVmJXdisrYmIvQU9NMGY4UEMvd0J0RC9vcTJ0Zjk4MjMvQU1acjR6b29BK3pQK0hoZjdhSC9BRVZiV3Y4QXZtMi8rTTBmOFBDLzIwUCtpcmExL3dCODIzL3htdmpPaWdEN00vNGVGL3RvZjlGVzFyL3ZtMi8rTTBmOFBDLzIwUDhBb3EydGY5ODIzL3htdmpPaWdEN00vd0NIaGY3YUgvUlZ0YS83NXR2L0FJelIvd0FQQy8yMFAraXJhMS8zemJmL0FCbXZqT2lnRDdNLzRlRi90b2Y5Rlcxci92bTIvd0RqTkgvRHd2OEFiUS82S3RyWC9mTnQvd0RHYStNNktBUHN6L2g0WCsyaC93QkZXMXIvQUw1dHYvak5IL0R3djl0RC9vcTJ0ZjhBZk50LzhacjR6b29BK3pQK0hoZjdhSC9SVnRhLzc1dHYvak5IL0R3djl0RC9BS0t0clgvZk50LzhacjR6b29BK3pQOEFoNFgrMmgvMFZiV3YrK2JiL3dDTTBmOEFEd3Y5dEQvb3EydGY5ODIzL3dBWnI0em9vQSt6UCtIaGY3YUgvUlZ0YS83NXR2OEE0elIvdzhML0FHMFAraXJhMS8zemJmOEF4bXZqT2lnRDdNLzRlRi90b2Y4QVJWdGEvd0MrYmIvNHpSL3c4TC9iUS82S3RyWC9BSHpiZi9HYStNNktBUDZ0ditDVW54citLZnh4K0NuaXp4SDhXUEVWMTRrMUt4OFV5V1Z2Y1hZUVBIYml5dFpCR1BMUkJqZTdIa1p5YS9VYXZ4bi9BT0NKdi9KdlhqZi9BTEhPWC8wMzJkZnN4UUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFGRkZGQUJSUlJRQVVVVVVBRkZGRkFCUlJSUUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFGRkZGQUJSUlJRQVVVVVVBRkZGRkFCUlJSUUFVVVVVQWYvL1gvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQXI4Wi8rQzJYL0p2WGdqL3NjNHYvQUUzM2xmc3hYNHovQVBCYkwvazNyd1IvMk9jWC9wdnZLQVA1bTZLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BK3pQK0Nlbi9KNkh3cC83RFRmK2swMWYyWVYvR2Y4QThFOVArVDBQaFQvMkdtLzlKcHEvc3dvQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL2dEb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL3BrLzRJbS84bTllTi84QXNjNWYvVGZaMSt6RmZqUC9BTUVUZitUZXZHLy9BR09jdi9wdnM2L1ppZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS85RDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDdnhuLzRMWmY4bTllQ1AreHppLzhBVGZlVit6RmZqUDhBOEZzditUZXZCSC9ZNXhmK20rOG9BL21ib29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Q3TS80SjZmOG5vZkNuL3NOTi82VFRWL1poWDhaL3dEd1QwLzVQUStGUC9ZYWIvMG1tcit6Q2dBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrQU9paWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrbVQvZ2liL3liMTQzL3dDeHpsLzlOOW5YN01WK00vOEF3Uk4vNU42OGIvOEFZNXkvK20renI5bUtBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzBmMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUsvR2YvZ3RsL3liMTRJLzdIT0wvd0JOOTVYN01WK00vd0R3V3kvNU42OEVmOWpuRi82Yjd5Z0QrWnVpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUHN6L2ducC95ZWg4S2YrdzAzL3BOTlg5bUZmeG4vQVBCUFQvazlENFUvOWhwdi9TYWF2N01LQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUDRBNktLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUDZaUCtDSnYvSnZYamYvQUxIT1gvMDMyZGZzeFg0ei93REJFMy9rM3J4di93QmpuTC82YjdPdjJZb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvUy9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBcjhaLytDMlgvSnZYZ2ovc2M0di9BRTMzbGZzeFg0ei9BUEJiTC9rM3J3Ui8yT2NYL3B2dktBUDVtNktLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0ErelArQ2VuL0o2SHdwLzdEVGYrazAxZjJZVi9HZjhBOEU5UCtUMFBoVC8yR20vOUpwcS9zd29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvZ0Rvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvcGsvNEltLzhtOWVOLzhBc2M1Zi9UZloxK3pGZmpQL0FNRVRmK1RldkcvL0FHT2N2L3B2czYvWmlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLzlQOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUN2eG4vNExaZjhtOWVDUCt4emkvOEFUZmVWK3pGZmpQOEE4RnN2K1RldkJIL1k1eGYrbSs4b0EvbWJvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRDdNLzRKNmY4bm9mQ24vc05OLzZUVFYvWmhYOFovd0R3VDAvNVBRK0ZQL1lhYi8wbW1yK3pDZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRCtBT2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRCttVC9naWIveWIxNDMvd0N4emwvOU45blg3TVYrTS84QXdSTi81TjY4Yi84QVk1eS8rbSt6cjltS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QvMVAzOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BSy9HZi9ndGwveWIxNEkvN0hPTC93Qk45NVg3TVYrTS93RHdXeS81TjY4RWY5am5GLzZiN3lnRCtadWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQc3ovZ25wL3llaDhLZit3MDMvcE5OWDltRmZ3cS9CVDRyNjM4RHZpbjRkK0xIaHkwdGI3VXZEZDBidTN0NzBPYmVSekcwZUpCR3lQakRub3dPYS9VYi9oOWwrMEwvQU5DUjRNLzc5YWgvOG0wQWYweVVWL00zL3dBUHN2MmhmK2hJOEdmOSt0US8rVGFQK0gyWDdRdi9BRUpIZ3ovdjFxSC9BTW0wQWYweVVWL00zL3creS9hRi93Q2hJOEdmOSt0US93RGsyai9oOWwrMEwvMEpIZ3ovQUw5YWgvOEFKdEFIOU1sRmZ6Ti84UHN2MmhmK2hJOEdmOSt0US84QWsyai9BSWZaZnRDLzlDUjRNLzc5YWgvOG0wQWYweVVWL00zL0FNUHN2MmhmK2hJOEdmOEFmclVQL2syai9oOWwrMEwvQU5DUjRNLzc5YWgvOG0wQWYweVVWL00zL3dBUHN2MmhmK2hJOEdmOSt0US8rVGFQK0gyWDdRdi9BRUpIZ3ovdjFxSC9BTW0wQWYweVVWL00zL3creS9hRi93Q2hJOEdmOSt0US93RGsyai9oOWwrMEwvMEpIZ3ovQUw5YWgvOEFKdEFINHowVi9USi93NU4vWjYvNkhmeG4vd0IvZFA4QS9rS2ovaHliK3oxLzBPL2pQL3Y3cC84QThoVUFmek4wVi9USi93QU9UZjJlditoMzhaLzkvZFAvQVBrS2ovaHliK3oxL3dCRHY0ei9BTy91bi84QXlGUUIvTTNSWDlNbi9EazM5bnIvQUtIZnhuLzM5MC8vQU9RcVArSEp2N1BYL1E3K00vOEF2N3AvL3dBaFVBZnpOMFYvVEovdzVOL1o2LzZIZnhuL0FOL2RQLzhBa0tqL0FJY20vczlmOUR2NHovNys2ZjhBL0lWQUg4emRGZjB5ZjhPVGYyZXYraDM4Wi84QWYzVC9BUDVDby80Y20vczlmOUR2NHovNys2Zi9BUElWQUg4emRGZjB5ZjhBRGszOW5yL29kL0dmL2YzVC93RDVDby80Y20vczlmOEFRNytNL3dEdjdwLy9BTWhVQWZ6TjBWL1RKL3c1Ti9aNi93Q2gzOFovOS9kUC93RGtLdndWL2FnK0ZHaWZBNzQrK00vaFA0Y3U3cSswM3czZmkwdDdpOUtHNGtReFJ5WmtNYW9tY3VlaWdZb0E4Rm9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEK21UL2dpYi95YjE0My9BT3h6bC84QVRmWjErekZmalA4QThFVGYrVGV2Ry84QTJPY3YvcHZzNi9aaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvLzlYOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUN2eG4vNExaZjhtOWVDUCt4emkvOEFUZmVWK3pGZmpQOEE4RnN2K1RldkJIL1k1eGYrbSs4b0EvbWJvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0Evdjhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQXIrTS8vZ29YL3dBbm9mRmIvc05ML3dDazBOZjJZVi9HZi93VUwvNVBRK0szL1lhWC93QkpvYUFQak9paWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUDZaUCtDSnYvSnZYamYvQUxIT1gvMDMyZGZzeFg0ei93REJFMy9rM3J4di93QmpuTC82YjdPdjJZb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvVy9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBcjhaLytDMlgvSnZYZ2ovc2M0di9BRTMzbGZzeFg0ei9BUEJiTC9rM3J3Ui8yT2NYL3B2dktBUDVtNktLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUDcvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLL2pQLzRLRi84QUo2SHhXLzdEUy84QXBORFg5bUZmeG4vOEZDLytUMFBpdC8yR2wvOEFTYUdnRDR6b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrbVQvZ2liL3liMTQzL3dDeHpsLzlOOW5YN01WK00vOEF3Uk4vNU42OGIvOEFZNXkvK20renI5bUtBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzEvMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUsvR2YvZ3RsL3liMTRJLzdIT0wvd0JOOTVYN01WK00vd0R3V3kvNU42OEVmOWpuRi82Yjd5Z0QrWnVpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrL3lpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ3Y0ei8rQ2hmL0FDZWg4VnYrdzB2L0FLVFExL1poWDhaLy9CUXYvazlENHJmOWhwZi9BRW1ob0ErTTZLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL3BrLzRJbS84bTllTi84QXNjNWYvVGZaMSt6RmZqUC9BTUVUZitUZXZHLy9BR09jdi9wdnM2L1ppZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS85RDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDdnhuLzRMWmY4bTllQ1AreHppLzhBVGZlVit6RmZqUDhBOEZzditUZXZCSC9ZNXhmK20rOG9BL21ib29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL3Y4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0FyK00vL2dvWC93QW5vZkZiL3NOTC93Q2swTmYyWVYvR2Yvd1VMLzVQUStLMy9ZYVgvd0JKb2FBUGpPaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVA2WlArQ0p2L0p2WGpmL0FMSE9YLzAzMmRmc3hYNHovd0RCRTMvazNyeHYvd0JqbkwvNmI3T3YyWW9BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQL1IvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQXI4Wi8rQzJYL0p2WGdqL3NjNHYvQUUzM2xmc3hYNHovQVBCYkwvazNyd1IvMk9jWC9wdnZLQVA1bTZLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVA3L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BSy9qUC80S0YvOEFKNkh4Vy83RFMvOEFwTkRYOW1GZnhuLzhGQy8rVDBQaXQvMkdsLzhBU2FHZ0Q0em9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEK21UL2dpYi95YjE0My93Q3h6bC85TjluWDdNVitNLzhBd1JOLzVONjhiLzhBWTV5LyttK3pyOW1LQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC8wdjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLL0dmL2d0bC95YjE0SS83SE9ML3dCTjk1WDdNVitNL3dEd1d5LzVONjhFZjlqbkYvNmI3eWdEK1p1aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEKy95aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUN2NHovK0NoZi9BQ2VoOFZ2K3cwdi9BS1RRMS9aaFg4Wi8vQlF2L2s5RDRyZjlocGYvQUVtaG9BK002S0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS9way80SW0vOG05ZU4vOEFzYzVmL1RmWjErekZmalAvQU1FVGYrVGV2Ry8vQUdPY3YvcHZzNi9aaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvOVA5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ3Z4bi80TFpmOG05ZUNQK3h6aS84QVRmZVYrekZmalA4QThGc3YrVGV2QkgvWTV4ZittKzhvQS9tYm9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEMUw0S2ZDalcvamo4VS9EdnduOE9YZHJZNmw0a3VqYVc5eGVseGJ4dUkya3pJWTFkOFlROUZKelg2amY4T1RmMmhmOEFvZC9Cbi9mM1VQOEE1Q3I0ei80SjZmOEFKNkh3cC83RFRmOEFwTk5YOW1GQUg4emYvRGszOW9YL0FLSGZ3Wi8zOTFEL0FPUXFQK0hKdjdRdi9RNytEUDhBdjdxSC93QWhWL1RKUlFCL00zL3c1Ti9hRi82SGZ3Wi8zOTFEL3dDUXFQOEFoeWIrMEwvME8vZ3ovdjdxSC95Rlg5TWxGQUg4emY4QXc1Ti9hRi82SGZ3Wi93Qi9kUS8rUXFQK0hKdjdRdjhBME8vZ3ovdjdxSC95Rlg5TWxGQUg4emYvQUE1Ti9hRi82SGZ3Wi8zOTFELzVDby80Y20vdEMvOEFRNytEUCsvdW9mOEF5Rlg5TWxGQUg4emYvRGszOW9YL0FLSGZ3Wi8zOTFEL0FPUXFQK0hKdjdRdi9RNytEUDhBdjdxSC93QWhWL1RKUlFCL00zL3c1Ti9hRi82SGZ3Wi8zOTFEL3dDUXFQOEFoeWIrMEwvME8vZ3ovdjdxSC95Rlg5TWxGQUg0ei84QUQ3TDluci9vU1BHZi9mclQvd0Q1Tm8vNGZaZnM5ZjhBUWtlTS93RHYxcC8vQU1tMS9NM1JRQi9USi93K3kvWjYvd0NoSThaLzkrdFAvd0RrMmovaDlsK3oxLzBKSGpQL0FMOWFmLzhBSnRmek4wVUFmMHlmOFBzdjJlditoSThaL3dEZnJULy9BSk5vL3dDSDJYN1BYL1FrZU0vKy9Xbi9BUHliWDh6ZEZBSDlNbi9EN0w5bnIvb1NQR2YvQUg2MC93RCtUYVArSDJYN1BYL1FrZU0vKy9Xbi93RHliWDh6ZEZBSDlNbi9BQSt5L1o2LzZFanhuLzM2MC84QStUYVArSDJYN1BYL0FFSkhqUDhBNzlhZi93REp0ZnpOMFVBZjB5ZjhQc3YyZXY4QW9TUEdmL2ZyVC84QTVOby80ZlpmczlmOUNSNHovd0MvV24vL0FDYlg4emRGQUg5TW4vRDdMOW5yL29TUEdmOEEzNjAvL3dDVGEvQlg5cUQ0cjZKOGNmajc0eitMSGh5MHVySFRmRWwrTHUzdDcwSUxpTkJGSEhpUVJzNlp5aDZNUml2QmFLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUDZaUCtDSnYvQUNiMTQzLzdIT1gvQU5OOW5YN01WK00vL0JFMy9rM3J4djhBOWpuTC93Q20renI5bUtBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELy9VL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0FyOFovK0MyWC9Kdlhnai9zYzR2L0FFMzNsZnN4WDR6L0FQQmJML2szcndSLzJPY1gvcHZ2S0FQNW02S0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQSt6UCtDZW4vSjZId3AvN0RUZitrMDFmMllWL0dmOEE4RTlQK1QwUGhULzJHbS85SnBxL3N3b0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS9nRG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS9way80SW0vOG05ZU4vOEFzYzVmL1RmWjErekZmalAvQU1FVGYrVGV2Ry8vQUdPY3YvcHZzNi9aaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvOVg5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ3Z4bi80TFpmOG05ZUNQK3h6aS84QVRmZVYrekZmalA4QThGc3YrVGV2QkgvWTV4ZittKzhvQS9tYm9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEN00vNEo2Zjhub2ZDbi9zTk4vNlRUVi9aaFg4Wi93RHdUMC81UFErRlAvWWFiLzBtbXIrekNnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEK0FPaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdEK21UL2dpYi95YjE0My93Q3h6bC85TjluWDdNVitNLzhBd1JOLzVONjhiLzhBWTV5LyttK3pyOW1LQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC8xdjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLL0dmL2d0bC95YjE0SS83SE9ML3dCTjk1WDdNVitNL3dEd1d5LzVONjhFZjlqbkYvNmI3eWdEK1p1aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVBzei9nbnAveWVoOEtmK3cwMy9wTk5YOW1GZnhuL0FQQlBUL2s5RDRVLzlocHYvU2FhdjdNS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVA0QTZLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVA2WlArQ0p2L0p2WGpmL0FMSE9YLzAzMmRmc3hYNHovd0RCRTMvazNyeHYvd0JqbkwvNmI3T3YyWW9BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQL1gvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQXI4Wi8rQzJYL0p2WGdqL3NjNHYvQUUzM2xmc3hYNHovQVBCYkwvazNyd1IvMk9jWC9wdnZLQVA1bTZLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BK3pQK0Nlbi9KNkh3cC83RFRmK2swMWYyWVYvR2Y4QThFOVArVDBQaFQvMkdtLzlKcHEvc3dvQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL2dEb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL3BrLzRJbS84bTllTi84QXNjNWYvVGZaMSt6RmZqUC9BTUVUZitUZXZHLy9BR09jdi9wdnM2L1ppZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS85RDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDdnhuLzRMWmY4bTllQ1AreHppLzhBVGZlVit6RmZqUDhBOEZzditUZXZCSC9ZNXhmK20rOG9BL21ib29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Q3TS80SjZmOG5vZkNuL3NOTi82VFRWL1poWDhaL3dEd1QwLzVQUStGUC9ZYWIvMG1tcit6Q2dBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrQU9paWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QrbVQvZ2liL3liMTQzL3dDeHpsLzlOOW5YN01WK00vOEF3Uk4vNU42OGIvOEFZNXkvK20renI5bUtBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzBmMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUsvR2YvZ3RsL3liMTRJLzdIT0wvd0JOOTVYN01WK1hQL0JWdjRLZkZQNDQvQlR3bjRjK0UvaDI2OFNhbFkrS1k3MjR0N1FvSGp0eFpYVVprUG1PZ3h2ZFJ3YzVOQUg4cE5GZlpuL0R2VDl0RC9vbE90Zjk5VzMvQU1lby93Q0hlbjdhSC9SS2RhLzc2dHYvQUk5UUI4WjBWOW1mOE85UDIwUCtpVTYxL3dCOVczL3g2ai9oM3ArMmgvMFNuV3YrK3JiL0FPUFVBZkdkRmZabi9EdlQ5dEQvQUtKVHJYL2ZWdC84ZW8vNGQ2ZnRvZjhBUktkYS93QytyYi80OVFCOFowVjltZjhBRHZUOXREL29sT3RmOTlXMy93QWVvLzRkNmZ0b2Y5RXAxci92cTIvK1BVQWZHZEZmWm4vRHZUOXREL29sT3RmOTlXMy9BTWVvL3dDSGVuN2FIL1JLZGEvNzZ0di9BSTlRQjhaMFY5bWY4TzlQMjBQK2lVNjEvd0I5VzMveDZqL2gzcCsyaC8wU25XdisrcmIvQU9QVUFIL0JQVC9rOUQ0VS93RFlhYi8wbW1yK3pDdjVjdjJLdjJLdjJwdmh6KzFOOE92RzNqYjRkYXBwT2g2VHFqVDN0N08wQmpnak1FcTdtMnlzMk56QWNBOWEvcU5vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BL2dEb3I3TS93Q0hlbjdhSC9SS2RhLzc2dHYvQUk5Ui93QU85UDIwUCtpVTYxLzMxYmYvQUI2Z0Q0em9yN00vNGQ2ZnRvZjlFcDFyL3ZxMi93RGoxSC9EdlQ5dEQvb2xPdGY5OVczL0FNZW9BK002Syt6UCtIZW43YUgvQUVTbld2OEF2cTIvK1BVZjhPOVAyMFAraVU2MS93QjlXMy94NmdENHpvcjdNLzRkNmZ0b2Y5RXAxci92cTIvK1BVZjhPOVAyMFA4QW9sT3RmOTlXMy94NmdENHpvcjdNL3dDSGVuN2FIL1JLZGEvNzZ0di9BSTlSL3dBTzlQMjBQK2lVNjEvMzFiZi9BQjZnRDR6b3I3TS80ZDZmdG9mOUVwMXIvdnEyL3dEajFIL0R2VDl0RC9vbE90Zjk5VzMvQU1lb0ErTTZLK3pQK0hlbjdhSC9BRVNuV3Y4QXZxMi8rUFVmOE85UDIwUCtpVTYxL3dCOVczL3g2Z0Q0em9yN00vNGQ2ZnRvZjlFcDFyL3ZxMi8rUFVmOE85UDIwUDhBb2xPdGY5OVczL3g2Z0Q0em9yN00vd0NIZW43YUgvUktkYS83NnR2L0FJOVIvd0FPOVAyMFAraVU2MS8zMWJmL0FCNmdENHpvcjdNLzRkNmZ0b2Y5RXAxci92cTIvd0RqMUgvRHZUOXREL29sT3RmOTlXMy9BTWVvQStNNksrelArSGVuN2FIL0FFU25XdjhBdnEyLytQVWY4TzlQMjBQK2lVNjEvd0I5VzMveDZnRDR6b3I3TS80ZDZmdG9mOUVwMXIvdnEyLytQVWY4TzlQMjBQOEFvbE90Zjk5VzMveDZnRDR6b3I3TS93Q0hlbjdhSC9SS2RhLzc2dHYvQUk5Ui93QU85UDIwUCtpVTYxLzMxYmYvQUI2Z0Q5bVArQ0p2L0p2WGpmOEE3SE9YL3dCTjluWDdNVitYUC9CS1Q0S2ZGUDRIZkJUeFo0YytMSGgyNjhONmxmZUtaTDIzdDdzb1hrdHpaV3NZa0hsdTR4dlJoeWM1RmZxTlFBVVVVVUFGRkZGQUJSUlJRQVVVVVVBRkZGRkFCUlJSUUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFGRkZGQUJSUlJRQVVVVVVBRkZGRkFCUlJSUUFVVVVVQUZGRkZBQlJSUlFBVVVVVUFmLzlMOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9UL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8xUDM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85WDkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vVy9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMS8zOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QvOUQ5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvL1IvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQLzB2Mzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzlQOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9VL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8xZjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85YjkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vWC9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMFAzOG9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0QvOUg5L0tLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0EvL1MvZnlpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FQLzAvMzhvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdELzlUOS9LS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BLy9WL2Z5aWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBUC8xdjM4b29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnRC85ZjkvS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQS8vUS9meWlpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQUNpaWlnQW9vb29BS0tLS0FDaWlpZ0Fvb29vQUtLS0tBQ2lpaWdBb29vb0FLS0tLQVAvMlE9PVwiLz5cbjwvZGVmcz5cbjwvc3ZnPlxuYDtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBsb2dvIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dvLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/open-api/logo.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/access/index.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc),\n/* harmony export */   defaultAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAc),\n/* harmony export */   defaultRoles: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles),\n/* harmony export */   defaultStatements: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultStatements),\n/* harmony export */   memberAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.memberAc),\n/* harmony export */   ownerAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.ownerAc)\n/* harmony export */ });\n/* harmony import */ var _statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3MvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXGFjY2Vzc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfSBmcm9tIFwiLi9zdGF0ZW1lbnQubWpzXCI7XG5cbmV4cG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/access/statement.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* binding */ adminAc),\n/* harmony export */   defaultAc: () => (/* binding */ defaultAc),\n/* harmony export */   defaultRoles: () => (/* binding */ defaultRoles),\n/* harmony export */   defaultStatements: () => (/* binding */ defaultStatements),\n/* harmony export */   memberAc: () => (/* binding */ memberAc),\n/* harmony export */   ownerAc: () => (/* binding */ ownerAc)\n/* harmony export */ });\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../access/access.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n\n\n\n//#region src/plugins/organization/access/statement.ts\nconst defaultStatements = {\n\torganization: [\"update\", \"delete\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tinvitation: [\"create\", \"cancel\"],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n};\nconst defaultAc = (0,_access_access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl)(defaultStatements);\nconst adminAc = defaultAc.newRole({\n\torganization: [\"update\"],\n\tinvitation: [\"create\", \"cancel\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n});\nconst ownerAc = defaultAc.newRole({\n\torganization: [\"update\", \"delete\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tinvitation: [\"create\", \"cancel\"],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n});\nconst memberAc = defaultAc.newRole({\n\torganization: [],\n\tmember: [],\n\tinvitation: [],\n\tteam: [],\n\tac: [\"read\"]\n});\nconst defaultRoles = {\n\tadmin: adminAc,\n\towner: ownerAc,\n\tmember: memberAc\n};\n\n//#endregion\n\n//# sourceMappingURL=statement.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3Mvc3RhdGVtZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE4RDtBQUM5Qjs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrRjtBQUNsRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcYWNjZXNzXFxzdGF0ZW1lbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFjY2Vzc0NvbnRyb2wgfSBmcm9tIFwiLi4vLi4vYWNjZXNzL2FjY2Vzcy5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FjY2Vzcy9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3Mvc3RhdGVtZW50LnRzXG5jb25zdCBkZWZhdWx0U3RhdGVtZW50cyA9IHtcblx0b3JnYW5pemF0aW9uOiBbXCJ1cGRhdGVcIiwgXCJkZWxldGVcIl0sXG5cdG1lbWJlcjogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGludml0YXRpb246IFtcImNyZWF0ZVwiLCBcImNhbmNlbFwiXSxcblx0dGVhbTogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGFjOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInJlYWRcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufTtcbmNvbnN0IGRlZmF1bHRBYyA9IGNyZWF0ZUFjY2Vzc0NvbnRyb2woZGVmYXVsdFN0YXRlbWVudHMpO1xuY29uc3QgYWRtaW5BYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0b3JnYW5pemF0aW9uOiBbXCJ1cGRhdGVcIl0sXG5cdGludml0YXRpb246IFtcImNyZWF0ZVwiLCBcImNhbmNlbFwiXSxcblx0bWVtYmVyOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0dGVhbTogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGFjOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInJlYWRcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufSk7XG5jb25zdCBvd25lckFjID0gZGVmYXVsdEFjLm5ld1JvbGUoe1xuXHRvcmdhbml6YXRpb246IFtcInVwZGF0ZVwiLCBcImRlbGV0ZVwiXSxcblx0bWVtYmVyOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0aW52aXRhdGlvbjogW1wiY3JlYXRlXCIsIFwiY2FuY2VsXCJdLFxuXHR0ZWFtOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0YWM6IFtcblx0XHRcImNyZWF0ZVwiLFxuXHRcdFwicmVhZFwiLFxuXHRcdFwidXBkYXRlXCIsXG5cdFx0XCJkZWxldGVcIlxuXHRdXG59KTtcbmNvbnN0IG1lbWJlckFjID0gZGVmYXVsdEFjLm5ld1JvbGUoe1xuXHRvcmdhbml6YXRpb246IFtdLFxuXHRtZW1iZXI6IFtdLFxuXHRpbnZpdGF0aW9uOiBbXSxcblx0dGVhbTogW10sXG5cdGFjOiBbXCJyZWFkXCJdXG59KTtcbmNvbnN0IGRlZmF1bHRSb2xlcyA9IHtcblx0YWRtaW46IGFkbWluQWMsXG5cdG93bmVyOiBvd25lckFjLFxuXHRtZW1iZXI6IG1lbWJlckFjXG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlbWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/adapter.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrgAdapter: () => (/* binding */ getOrgAdapter)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _client_parser_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/parser.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n//#region src/plugins/organization/adapter.ts\nconst getOrgAdapter = (context, options) => {\n\tconst baseAdapter = context.adapter;\n\tconst orgAdditionalFields = options?.schema?.organization?.additionalFields;\n\tconst memberAdditionalFields = options?.schema?.member?.additionalFields;\n\tconst invitationAdditionalFields = options?.schema?.invitation?.additionalFields;\n\tconst teamAdditionalFields = options?.schema?.team?.additionalFields;\n\treturn {\n\t\tfindOrganizationBySlug: async (slug) => {\n\t\t\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"slug\",\n\t\t\t\t\tvalue: slug\n\t\t\t\t}]\n\t\t\t}), orgAdditionalFields);\n\t\t},\n\t\tcreateOrganization: async (data) => {\n\t\t\tconst organization = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).create({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\tdata: {\n\t\t\t\t\t...data.organization,\n\t\t\t\t\tmetadata: data.organization.metadata ? JSON.stringify(data.organization.metadata) : void 0\n\t\t\t\t},\n\t\t\t\tforceAllowId: true\n\t\t\t});\n\t\t\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)({\n\t\t\t\t...organization,\n\t\t\t\tmetadata: organization.metadata && typeof organization.metadata === \"string\" ? JSON.parse(organization.metadata) : void 0\n\t\t\t}, orgAdditionalFields);\n\t\t},\n\t\tfindMemberByEmail: async (data) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst user = await adapter.findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"email\",\n\t\t\t\t\tvalue: data.email.toLowerCase()\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (!user) return null;\n\t\t\tconst member = await adapter.findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: user.id\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (!member) return null;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tlistMembers: async (data) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst members = await Promise.all([adapter.findMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, ...data.filter?.field ? [{\n\t\t\t\t\tfield: data.filter?.field,\n\t\t\t\t\tvalue: data.filter?.value,\n\t\t\t\t\t...data.filter.operator ? { operator: data.filter.operator } : {}\n\t\t\t\t}] : []],\n\t\t\t\tlimit: data.limit || options?.membershipLimit || 100,\n\t\t\t\toffset: data.offset || 0,\n\t\t\t\tsortBy: data.sortBy ? {\n\t\t\t\t\tfield: data.sortBy,\n\t\t\t\t\tdirection: data.sortOrder || \"asc\"\n\t\t\t\t} : void 0\n\t\t\t}), adapter.count({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, ...data.filter?.field ? [{\n\t\t\t\t\tfield: data.filter?.field,\n\t\t\t\t\tvalue: data.filter?.value,\n\t\t\t\t\t...data.filter.operator ? { operator: data.filter.operator } : {}\n\t\t\t\t}] : []]\n\t\t\t})]);\n\t\t\tconst users = await adapter.findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: members[0].map((member) => member.userId),\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn {\n\t\t\t\tmembers: members[0].map((member) => {\n\t\t\t\t\tconst user = users.find((user$1) => user$1.id === member.userId);\n\t\t\t\t\tif (!user) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"Unexpected error: User not found for member\");\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...member,\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\t\timage: user.image\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\ttotal: members[1]\n\t\t\t};\n\t\t},\n\t\tfindMemberByOrgId: async (data) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result || !result.user) return null;\n\t\t\tconst { user, ...member } = result;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tfindMemberById: async (memberId) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...member } = result;\n\t\t\treturn {\n\t\t\t\t...member,\n\t\t\t\tuser: {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.image\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tcreateMember: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).create({\n\t\t\t\tmodel: \"member\",\n\t\t\t\tdata: {\n\t\t\t\t\t...data,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tupdateMember: async (memberId, role) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).update({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}],\n\t\t\t\tupdate: { role }\n\t\t\t});\n\t\t},\n\t\tdeleteMember: async ({ memberId, organizationId, userId: _userId }) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tlet userId;\n\t\t\tif (!_userId) {\n\t\t\t\tconst member$1 = await adapter.findOne({\n\t\t\t\t\tmodel: \"member\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: memberId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!member$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"Member not found\");\n\t\t\t\tuserId = member$1.userId;\n\t\t\t} else userId = _userId;\n\t\t\tconst member = await adapter.delete({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: memberId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (options?.teams?.enabled) {\n\t\t\t\tconst teams = await adapter.findMany({\n\t\t\t\t\tmodel: \"team\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\t\tvalue: organizationId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tawait Promise.all(teams.map((team) => adapter.deleteMany({\n\t\t\t\t\tmodel: \"teamMember\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\t\tvalue: team.id\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t}]\n\t\t\t\t})));\n\t\t\t}\n\t\t\treturn member;\n\t\t},\n\t\tupdateOrganization: async (organizationId, data) => {\n\t\t\tconst organization = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).update({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}],\n\t\t\t\tupdate: {\n\t\t\t\t\t...data,\n\t\t\t\t\tmetadata: typeof data.metadata === \"object\" ? JSON.stringify(data.metadata) : data.metadata\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!organization) return null;\n\t\t\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)({\n\t\t\t\t...organization,\n\t\t\t\tmetadata: organization.metadata ? (0,_client_parser_mjs__WEBPACK_IMPORTED_MODULE_1__.parseJSON)(organization.metadata) : void 0\n\t\t\t}, orgAdditionalFields);\n\t\t},\n\t\tdeleteOrganization: async (organizationId) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tawait adapter.delete({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn organizationId;\n\t\t},\n\t\tsetActiveOrganization: async (sessionToken, organizationId, ctx) => {\n\t\t\treturn await context.internalAdapter.updateSession(sessionToken, { activeOrganizationId: organizationId });\n\t\t},\n\t\tfindOrganizationById: async (organizationId) => {\n\t\t\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t}), orgAdditionalFields);\n\t\t},\n\t\tcheckMembership: async ({ userId, organizationId }) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindFullOrganization: async ({ organizationId, isSlug, includeTeams, membersLimit }) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst result = await adapter.findOne({\n\t\t\t\tmodel: \"organization\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: isSlug ? \"slug\" : \"id\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}],\n\t\t\t\tjoin: {\n\t\t\t\t\tinvitation: true,\n\t\t\t\t\tmember: membersLimit ? { limit: membersLimit } : true,\n\t\t\t\t\t...includeTeams ? { team: true } : {}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { invitation: invitations, member: members, team: teams, ...org } = result;\n\t\t\tconst userIds = members.map((member) => member.userId);\n\t\t\tconst users = userIds.length > 0 ? await adapter.findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userIds,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tlimit: options?.membershipLimit || 100\n\t\t\t}) : [];\n\t\t\tconst userMap = new Map(users.map((user) => [user.id, user]));\n\t\t\tconst membersWithUsers = members.map((member) => {\n\t\t\t\tconst user = userMap.get(member.userId);\n\t\t\t\tif (!user) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"Unexpected error: User not found for member\");\n\t\t\t\treturn {\n\t\t\t\t\t...(0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(member, memberAdditionalFields),\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\tname: user.name,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.image\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\tconst filteredOrg = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(org, orgAdditionalFields);\n\t\t\tconst filteredInvitations = invitations.map((inv) => (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(inv, invitationAdditionalFields));\n\t\t\tconst filteredTeams = teams?.map((team) => (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(team, teamAdditionalFields));\n\t\t\treturn {\n\t\t\t\t...filteredOrg,\n\t\t\t\tinvitations: filteredInvitations,\n\t\t\t\tmembers: membersWithUsers,\n\t\t\t\tteams: filteredTeams\n\t\t\t};\n\t\t},\n\t\tlistOrganizations: async (userId) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}],\n\t\t\t\tjoin: { organization: true }\n\t\t\t});\n\t\t\tif (!result || result.length === 0) return [];\n\t\t\treturn result.map((member) => (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_4__.filterOutputFields)(member.organization, orgAdditionalFields));\n\t\t},\n\t\tcreateTeam: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).create({\n\t\t\t\tmodel: \"team\",\n\t\t\t\tdata\n\t\t\t});\n\t\t},\n\t\tfindTeamById: async ({ teamId, organizationId, includeTeamMembers }) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}, ...organizationId ? [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}] : []],\n\t\t\t\tjoin: { ...includeTeamMembers ? { teamMember: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { teamMember, ...team } = result;\n\t\t\treturn {\n\t\t\t\t...team,\n\t\t\t\t...includeTeamMembers ? { members: teamMember } : {}\n\t\t\t};\n\t\t},\n\t\tupdateTeam: async (teamId, data) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tif (\"id\" in data) data.id = void 0;\n\t\t\treturn await adapter.update({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}],\n\t\t\t\tupdate: { ...data }\n\t\t\t});\n\t\t},\n\t\tdeleteTeam: async (teamId) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tawait adapter.deleteMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t\treturn await adapter.delete({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistTeams: async (organizationId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"team\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcreateTeamInvitation: async ({ email, role, teamId, organizationId, inviterId, expiresIn = 1e3 * 60 * 60 * 48 }) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(expiresIn);\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\tdata: {\n\t\t\t\t\temail,\n\t\t\t\t\trole,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tteamId,\n\t\t\t\t\tinviterId,\n\t\t\t\t\tstatus: \"pending\",\n\t\t\t\t\texpiresAt\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsetActiveTeam: async (sessionToken, teamId, ctx) => {\n\t\t\treturn await context.internalAdapter.updateSession(sessionToken, { activeTeamId: teamId });\n\t\t},\n\t\tlistTeamMembers: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcountTeamMembers: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).count({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tcountMembers: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).count({\n\t\t\t\tmodel: \"member\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistTeamsByUser: async (data) => {\n\t\t\treturn (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}],\n\t\t\t\tjoin: { team: true }\n\t\t\t})).map((result) => result.team);\n\t\t},\n\t\tfindTeamMember: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindOrCreateTeamMember: async (data) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst member = await adapter.findOne({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t\tif (member) return member;\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\tdata: {\n\t\t\t\t\tteamId: data.teamId,\n\t\t\t\t\tuserId: data.userId,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tremoveTeamMember: async (data) => {\n\t\t\tawait (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).deleteMany({\n\t\t\t\tmodel: \"teamMember\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: data.teamId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: data.userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindInvitationsByTeamId: async (teamId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"teamId\",\n\t\t\t\t\tvalue: teamId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUserInvitations: async (email) => {\n\t\t\treturn (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"email\",\n\t\t\t\t\tvalue: email.toLowerCase()\n\t\t\t\t}],\n\t\t\t\tjoin: { organization: true }\n\t\t\t})).map(({ organization, ...inv }) => ({\n\t\t\t\t...inv,\n\t\t\t\torganizationName: organization.name\n\t\t\t}));\n\t\t},\n\t\tcreateInvitation: async ({ invitation, user }) => {\n\t\t\tconst adapter = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter);\n\t\t\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(options?.invitationExpiresIn || 3600 * 48, \"sec\");\n\t\t\treturn await adapter.create({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\tdata: {\n\t\t\t\t\tstatus: \"pending\",\n\t\t\t\t\texpiresAt,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tinviterId: user.id,\n\t\t\t\t\t...invitation,\n\t\t\t\t\tteamId: invitation.teamIds.length > 0 ? invitation.teamIds.join(\",\") : null\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tfindInvitationById: async (id) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findOne({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: id\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindPendingInvitation: async (data) => {\n\t\t\treturn (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"email\",\n\t\t\t\t\t\tvalue: data.email.toLowerCase()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfield: \"status\",\n\t\t\t\t\t\tvalue: \"pending\"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t})).filter((invite) => new Date(invite.expiresAt) > /* @__PURE__ */ new Date());\n\t\t},\n\t\tfindPendingInvitations: async (data) => {\n\t\t\treturn (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"status\",\n\t\t\t\t\tvalue: \"pending\"\n\t\t\t\t}]\n\t\t\t})).filter((invite) => new Date(invite.expiresAt) > /* @__PURE__ */ new Date());\n\t\t},\n\t\tlistInvitations: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).findMany({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: data.organizationId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateInvitation: async (data) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_2__.getCurrentAdapter)(baseAdapter)).update({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: data.invitationId\n\t\t\t\t}],\n\t\t\t\tupdate: { status: data.status }\n\t\t\t});\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0M7QUFDSztBQUNVO0FBQ0o7QUFDRzs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwyRUFBa0IsY0FBYyw0RUFBaUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHFDQUFxQyw0RUFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0osVUFBVSwyRUFBa0I7QUFDNUI7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx5QkFBeUIsNEVBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHlCQUF5Qiw0RUFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUNBQWlDLGlDQUFpQztBQUNsRSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlDQUFpQyxpQ0FBaUM7QUFDbEUsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixvRUFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtCQUErQiw0RUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0JBQStCLDRFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0EsV0FBVyxrQkFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYztBQUNkLElBQUk7QUFDSixHQUFHO0FBQ0gseUJBQXlCLDJDQUEyQztBQUNwRSx5QkFBeUIsNEVBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCw2QkFBNkIsb0VBQWU7QUFDNUM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQ0FBcUMsNEVBQWlCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsVUFBVSwyRUFBa0I7QUFDNUI7QUFDQSxzQ0FBc0MsNkRBQVM7QUFDL0MsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHlCQUF5Qiw0RUFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzRUFBc0Usc0NBQXNDO0FBQzVHLEdBQUc7QUFDSDtBQUNBLFVBQVUsMkVBQWtCLGNBQWMsNEVBQWlCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0gsNEJBQTRCLHdCQUF3QjtBQUNwRCx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSCxpQ0FBaUMsb0RBQW9EO0FBQ3JGLHlCQUF5Qiw0RUFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsOEJBQThCLHNCQUFzQjtBQUNwRCx5QkFBeUIsYUFBYTtBQUN0QztBQUNBLElBQUk7QUFDSjtBQUNBLFdBQVcsZ0VBQWdFO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvRUFBZTtBQUN4QztBQUNBLFFBQVEsMkVBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHVCQUF1QiwyRUFBa0I7QUFDekMsd0RBQXdELDJFQUFrQjtBQUMxRSw4Q0FBOEMsMkVBQWtCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLCtCQUErQiw0RUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSjtBQUNBLGlDQUFpQywyRUFBa0I7QUFDbkQsR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCx5QkFBeUIsNENBQTRDO0FBQ3JFLCtCQUErQiw0RUFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLDBCQUEwQixtQkFBbUI7QUFDekQsSUFBSTtBQUNKO0FBQ0EsV0FBVyxzQkFBc0I7QUFDakM7QUFDQTtBQUNBLDhCQUE4QixzQkFBc0I7QUFDcEQ7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5QkFBeUIsNEVBQWlCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjO0FBQ2QsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHlCQUF5Qiw0RUFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNILGlDQUFpQyxnRkFBZ0Y7QUFDakgseUJBQXlCLDRFQUFpQjtBQUMxQyxxQkFBcUIsd0RBQU87QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxzRUFBc0Usc0JBQXNCO0FBQzVGLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHdCQUF3Qiw0RUFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHlCQUF5Qiw0RUFBaUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLGdCQUFnQiw0RUFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0Esd0JBQXdCLDRFQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSSxVQUFVLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCw2QkFBNkIsa0JBQWtCO0FBQy9DLHlCQUF5Qiw0RUFBaUI7QUFDMUMscUJBQXFCLHdEQUFPO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHdCQUF3Qiw0RUFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx3QkFBd0IsNEVBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYztBQUNkLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXGFkYXB0ZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlSlNPTiB9IGZyb20gXCIuLi8uLi9jbGllbnQvcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBmaWx0ZXJPdXRwdXRGaWVsZHMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9hZGFwdGVyLnRzXG5jb25zdCBnZXRPcmdBZGFwdGVyID0gKGNvbnRleHQsIG9wdGlvbnMpID0+IHtcblx0Y29uc3QgYmFzZUFkYXB0ZXIgPSBjb250ZXh0LmFkYXB0ZXI7XG5cdGNvbnN0IG9yZ0FkZGl0aW9uYWxGaWVsZHMgPSBvcHRpb25zPy5zY2hlbWE/Lm9yZ2FuaXphdGlvbj8uYWRkaXRpb25hbEZpZWxkcztcblx0Y29uc3QgbWVtYmVyQWRkaXRpb25hbEZpZWxkcyA9IG9wdGlvbnM/LnNjaGVtYT8ubWVtYmVyPy5hZGRpdGlvbmFsRmllbGRzO1xuXHRjb25zdCBpbnZpdGF0aW9uQWRkaXRpb25hbEZpZWxkcyA9IG9wdGlvbnM/LnNjaGVtYT8uaW52aXRhdGlvbj8uYWRkaXRpb25hbEZpZWxkcztcblx0Y29uc3QgdGVhbUFkZGl0aW9uYWxGaWVsZHMgPSBvcHRpb25zPy5zY2hlbWE/LnRlYW0/LmFkZGl0aW9uYWxGaWVsZHM7XG5cdHJldHVybiB7XG5cdFx0ZmluZE9yZ2FuaXphdGlvbkJ5U2x1ZzogYXN5bmMgKHNsdWcpID0+IHtcblx0XHRcdHJldHVybiBmaWx0ZXJPdXRwdXRGaWVsZHMoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJzbHVnXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHNsdWdcblx0XHRcdFx0fV1cblx0XHRcdH0pLCBvcmdBZGRpdGlvbmFsRmllbGRzKTtcblx0XHR9LFxuXHRcdGNyZWF0ZU9yZ2FuaXphdGlvbjogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLmNyZWF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0Li4uZGF0YS5vcmdhbml6YXRpb24sXG5cdFx0XHRcdFx0bWV0YWRhdGE6IGRhdGEub3JnYW5pemF0aW9uLm1ldGFkYXRhID8gSlNPTi5zdHJpbmdpZnkoZGF0YS5vcmdhbml6YXRpb24ubWV0YWRhdGEpIDogdm9pZCAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZvcmNlQWxsb3dJZDogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZmlsdGVyT3V0cHV0RmllbGRzKHtcblx0XHRcdFx0Li4ub3JnYW5pemF0aW9uLFxuXHRcdFx0XHRtZXRhZGF0YTogb3JnYW5pemF0aW9uLm1ldGFkYXRhICYmIHR5cGVvZiBvcmdhbml6YXRpb24ubWV0YWRhdGEgPT09IFwic3RyaW5nXCIgPyBKU09OLnBhcnNlKG9yZ2FuaXphdGlvbi5tZXRhZGF0YSkgOiB2b2lkIDBcblx0XHRcdH0sIG9yZ0FkZGl0aW9uYWxGaWVsZHMpO1xuXHRcdH0sXG5cdFx0ZmluZE1lbWJlckJ5RW1haWw6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpO1xuXHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHRcdGlmICghdXNlcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCBtZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5vcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXIuaWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFtZW1iZXIpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ubWVtYmVyLFxuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyLmltYWdlXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSxcblx0XHRsaXN0TWVtYmVyczogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcik7XG5cdFx0XHRjb25zdCBtZW1iZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoW2FkYXB0ZXIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5vcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9LCAuLi5kYXRhLmZpbHRlcj8uZmllbGQgPyBbe1xuXHRcdFx0XHRcdGZpZWxkOiBkYXRhLmZpbHRlcj8uZmllbGQsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEuZmlsdGVyPy52YWx1ZSxcblx0XHRcdFx0XHQuLi5kYXRhLmZpbHRlci5vcGVyYXRvciA/IHsgb3BlcmF0b3I6IGRhdGEuZmlsdGVyLm9wZXJhdG9yIH0gOiB7fVxuXHRcdFx0XHR9XSA6IFtdXSxcblx0XHRcdFx0bGltaXQ6IGRhdGEubGltaXQgfHwgb3B0aW9ucz8ubWVtYmVyc2hpcExpbWl0IHx8IDEwMCxcblx0XHRcdFx0b2Zmc2V0OiBkYXRhLm9mZnNldCB8fCAwLFxuXHRcdFx0XHRzb3J0Qnk6IGRhdGEuc29ydEJ5ID8ge1xuXHRcdFx0XHRcdGZpZWxkOiBkYXRhLnNvcnRCeSxcblx0XHRcdFx0XHRkaXJlY3Rpb246IGRhdGEuc29ydE9yZGVyIHx8IFwiYXNjXCJcblx0XHRcdFx0fSA6IHZvaWQgMFxuXHRcdFx0fSksIGFkYXB0ZXIuY291bnQoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5vcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9LCAuLi5kYXRhLmZpbHRlcj8uZmllbGQgPyBbe1xuXHRcdFx0XHRcdGZpZWxkOiBkYXRhLmZpbHRlcj8uZmllbGQsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEuZmlsdGVyPy52YWx1ZSxcblx0XHRcdFx0XHQuLi5kYXRhLmZpbHRlci5vcGVyYXRvciA/IHsgb3BlcmF0b3I6IGRhdGEuZmlsdGVyLm9wZXJhdG9yIH0gOiB7fVxuXHRcdFx0XHR9XSA6IFtdXVxuXHRcdFx0fSldKTtcblx0XHRcdGNvbnN0IHVzZXJzID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogbWVtYmVyc1swXS5tYXAoKG1lbWJlcikgPT4gbWVtYmVyLnVzZXJJZCksXG5cdFx0XHRcdFx0b3BlcmF0b3I6IFwiaW5cIlxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRtZW1iZXJzOiBtZW1iZXJzWzBdLm1hcCgobWVtYmVyKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdXNlciA9IHVzZXJzLmZpbmQoKHVzZXIkMSkgPT4gdXNlciQxLmlkID09PSBtZW1iZXIudXNlcklkKTtcblx0XHRcdFx0XHRpZiAoIXVzZXIpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yOiBVc2VyIG5vdCBmb3VuZCBmb3IgbWVtYmVyXCIpO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHQuLi5tZW1iZXIsXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB1c2VyLmlkLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0XHRpbWFnZTogdXNlci5pbWFnZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pLFxuXHRcdFx0XHR0b3RhbDogbWVtYmVyc1sxXVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGZpbmRNZW1iZXJCeU9yZ0lkOiBhc3luYyAoZGF0YSkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS51c2VySWRcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEub3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KTtcblx0XHRcdGlmICghcmVzdWx0IHx8ICFyZXN1bHQudXNlcikgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB7IHVzZXIsIC4uLm1lbWJlciB9ID0gcmVzdWx0O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ubWVtYmVyLFxuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyLmltYWdlXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSxcblx0XHRmaW5kTWVtYmVyQnlJZDogYXN5bmMgKG1lbWJlcklkKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwibWVtYmVyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IG1lbWJlcklkXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRqb2luOiB7IHVzZXI6IHRydWUgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXJlc3VsdCkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB7IHVzZXIsIC4uLm1lbWJlciB9ID0gcmVzdWx0O1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4ubWVtYmVyLFxuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0aWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyLmltYWdlXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSxcblx0XHRjcmVhdGVNZW1iZXI6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuY3JlYXRlKHtcblx0XHRcdFx0bW9kZWw6IFwibWVtYmVyXCIsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVNZW1iZXI6IGFzeW5jIChtZW1iZXJJZCwgcm9sZSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBtZW1iZXJJZFxuXHRcdFx0XHR9XSxcblx0XHRcdFx0dXBkYXRlOiB7IHJvbGUgfVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRkZWxldGVNZW1iZXI6IGFzeW5jICh7IG1lbWJlcklkLCBvcmdhbml6YXRpb25JZCwgdXNlcklkOiBfdXNlcklkIH0pID0+IHtcblx0XHRcdGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcik7XG5cdFx0XHRsZXQgdXNlcklkO1xuXHRcdFx0aWYgKCFfdXNlcklkKSB7XG5cdFx0XHRcdGNvbnN0IG1lbWJlciQxID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWVtYmVySWRcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCFtZW1iZXIkMSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIk1lbWJlciBub3QgZm91bmRcIik7XG5cdFx0XHRcdHVzZXJJZCA9IG1lbWJlciQxLnVzZXJJZDtcblx0XHRcdH0gZWxzZSB1c2VySWQgPSBfdXNlcklkO1xuXHRcdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgYWRhcHRlci5kZWxldGUoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogbWVtYmVySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKG9wdGlvbnM/LnRlYW1zPy5lbmFibGVkKSB7XG5cdFx0XHRcdGNvbnN0IHRlYW1zID0gYXdhaXQgYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidGVhbVwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCBQcm9taXNlLmFsbCh0ZWFtcy5tYXAoKHRlYW0pID0+IGFkYXB0ZXIuZGVsZXRlTWFueSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidGVhbU1lbWJlclwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwidGVhbUlkXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGVhbS5pZFxuXHRcdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pKSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWVtYmVyO1xuXHRcdH0sXG5cdFx0dXBkYXRlT3JnYW5pemF0aW9uOiBhc3luYyAob3JnYW5pemF0aW9uSWQsIGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XSxcblx0XHRcdFx0dXBkYXRlOiB7XG5cdFx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0XHRtZXRhZGF0YTogdHlwZW9mIGRhdGEubWV0YWRhdGEgPT09IFwib2JqZWN0XCIgPyBKU09OLnN0cmluZ2lmeShkYXRhLm1ldGFkYXRhKSA6IGRhdGEubWV0YWRhdGFcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIW9yZ2FuaXphdGlvbikgcmV0dXJuIG51bGw7XG5cdFx0XHRyZXR1cm4gZmlsdGVyT3V0cHV0RmllbGRzKHtcblx0XHRcdFx0Li4ub3JnYW5pemF0aW9uLFxuXHRcdFx0XHRtZXRhZGF0YTogb3JnYW5pemF0aW9uLm1ldGFkYXRhID8gcGFyc2VKU09OKG9yZ2FuaXphdGlvbi5tZXRhZGF0YSkgOiB2b2lkIDBcblx0XHRcdH0sIG9yZ0FkZGl0aW9uYWxGaWVsZHMpO1xuXHRcdH0sXG5cdFx0ZGVsZXRlT3JnYW5pemF0aW9uOiBhc3luYyAob3JnYW5pemF0aW9uSWQpID0+IHtcblx0XHRcdGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcik7XG5cdFx0XHRhd2FpdCBhZGFwdGVyLmRlbGV0ZU1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdFx0YXdhaXQgYWRhcHRlci5kZWxldGVNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwiaW52aXRhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0XHRhd2FpdCBhZGFwdGVyLmRlbGV0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gb3JnYW5pemF0aW9uSWQ7XG5cdFx0fSxcblx0XHRzZXRBY3RpdmVPcmdhbml6YXRpb246IGFzeW5jIChzZXNzaW9uVG9rZW4sIG9yZ2FuaXphdGlvbklkLCBjdHgpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVTZXNzaW9uKHNlc3Npb25Ub2tlbiwgeyBhY3RpdmVPcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uSWQgfSk7XG5cdFx0fSxcblx0XHRmaW5kT3JnYW5pemF0aW9uQnlJZDogYXN5bmMgKG9yZ2FuaXphdGlvbklkKSA9PiB7XG5cdFx0XHRyZXR1cm4gZmlsdGVyT3V0cHV0RmllbGRzKGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fV1cblx0XHRcdH0pLCBvcmdBZGRpdGlvbmFsRmllbGRzKTtcblx0XHR9LFxuXHRcdGNoZWNrTWVtYmVyc2hpcDogYXN5bmMgKHsgdXNlcklkLCBvcmdhbml6YXRpb25JZCB9KSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRmaW5kRnVsbE9yZ2FuaXphdGlvbjogYXN5bmMgKHsgb3JnYW5pemF0aW9uSWQsIGlzU2x1ZywgaW5jbHVkZVRlYW1zLCBtZW1iZXJzTGltaXQgfSkgPT4ge1xuXHRcdFx0Y29uc3QgYWRhcHRlciA9IGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKTtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogaXNTbHVnID8gXCJzbHVnXCIgOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IG9yZ2FuaXphdGlvbklkXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHRqb2luOiB7XG5cdFx0XHRcdFx0aW52aXRhdGlvbjogdHJ1ZSxcblx0XHRcdFx0XHRtZW1iZXI6IG1lbWJlcnNMaW1pdCA/IHsgbGltaXQ6IG1lbWJlcnNMaW1pdCB9IDogdHJ1ZSxcblx0XHRcdFx0XHQuLi5pbmNsdWRlVGVhbXMgPyB7IHRlYW06IHRydWUgfSA6IHt9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyBpbnZpdGF0aW9uOiBpbnZpdGF0aW9ucywgbWVtYmVyOiBtZW1iZXJzLCB0ZWFtOiB0ZWFtcywgLi4ub3JnIH0gPSByZXN1bHQ7XG5cdFx0XHRjb25zdCB1c2VySWRzID0gbWVtYmVycy5tYXAoKG1lbWJlcikgPT4gbWVtYmVyLnVzZXJJZCk7XG5cdFx0XHRjb25zdCB1c2VycyA9IHVzZXJJZHMubGVuZ3RoID4gMCA/IGF3YWl0IGFkYXB0ZXIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZHMsXG5cdFx0XHRcdFx0b3BlcmF0b3I6IFwiaW5cIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0bGltaXQ6IG9wdGlvbnM/Lm1lbWJlcnNoaXBMaW1pdCB8fCAxMDBcblx0XHRcdH0pIDogW107XG5cdFx0XHRjb25zdCB1c2VyTWFwID0gbmV3IE1hcCh1c2Vycy5tYXAoKHVzZXIpID0+IFt1c2VyLmlkLCB1c2VyXSkpO1xuXHRcdFx0Y29uc3QgbWVtYmVyc1dpdGhVc2VycyA9IG1lbWJlcnMubWFwKChtZW1iZXIpID0+IHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHVzZXJNYXAuZ2V0KG1lbWJlci51c2VySWQpO1xuXHRcdFx0XHRpZiAoIXVzZXIpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJVbmV4cGVjdGVkIGVycm9yOiBVc2VyIG5vdCBmb3VuZCBmb3IgbWVtYmVyXCIpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdC4uLmZpbHRlck91dHB1dEZpZWxkcyhtZW1iZXIsIG1lbWJlckFkZGl0aW9uYWxGaWVsZHMpLFxuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdGlkOiB1c2VyLmlkLFxuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5uYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5pbWFnZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgZmlsdGVyZWRPcmcgPSBmaWx0ZXJPdXRwdXRGaWVsZHMob3JnLCBvcmdBZGRpdGlvbmFsRmllbGRzKTtcblx0XHRcdGNvbnN0IGZpbHRlcmVkSW52aXRhdGlvbnMgPSBpbnZpdGF0aW9ucy5tYXAoKGludikgPT4gZmlsdGVyT3V0cHV0RmllbGRzKGludiwgaW52aXRhdGlvbkFkZGl0aW9uYWxGaWVsZHMpKTtcblx0XHRcdGNvbnN0IGZpbHRlcmVkVGVhbXMgPSB0ZWFtcz8ubWFwKCh0ZWFtKSA9PiBmaWx0ZXJPdXRwdXRGaWVsZHModGVhbSwgdGVhbUFkZGl0aW9uYWxGaWVsZHMpKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdC4uLmZpbHRlcmVkT3JnLFxuXHRcdFx0XHRpbnZpdGF0aW9uczogZmlsdGVyZWRJbnZpdGF0aW9ucyxcblx0XHRcdFx0bWVtYmVyczogbWVtYmVyc1dpdGhVc2Vycyxcblx0XHRcdFx0dGVhbXM6IGZpbHRlcmVkVGVhbXNcblx0XHRcdH07XG5cdFx0fSxcblx0XHRsaXN0T3JnYW5pemF0aW9uczogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyBvcmdhbml6YXRpb246IHRydWUgfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXJlc3VsdCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG5cdFx0XHRyZXR1cm4gcmVzdWx0Lm1hcCgobWVtYmVyKSA9PiBmaWx0ZXJPdXRwdXRGaWVsZHMobWVtYmVyLm9yZ2FuaXphdGlvbiwgb3JnQWRkaXRpb25hbEZpZWxkcykpO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVGVhbTogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5jcmVhdGUoe1xuXHRcdFx0XHRtb2RlbDogXCJ0ZWFtXCIsXG5cdFx0XHRcdGRhdGFcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZFRlYW1CeUlkOiBhc3luYyAoeyB0ZWFtSWQsIG9yZ2FuaXphdGlvbklkLCBpbmNsdWRlVGVhbU1lbWJlcnMgfSkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInRlYW1cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdGVhbUlkXG5cdFx0XHRcdH0sIC4uLm9yZ2FuaXphdGlvbklkID8gW3tcblx0XHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XSA6IFtdXSxcblx0XHRcdFx0am9pbjogeyAuLi5pbmNsdWRlVGVhbU1lbWJlcnMgPyB7IHRlYW1NZW1iZXI6IHRydWUgfSA6IHt9IH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyB0ZWFtTWVtYmVyLCAuLi50ZWFtIH0gPSByZXN1bHQ7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi50ZWFtLFxuXHRcdFx0XHQuLi5pbmNsdWRlVGVhbU1lbWJlcnMgPyB7IG1lbWJlcnM6IHRlYW1NZW1iZXIgfSA6IHt9XG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0dXBkYXRlVGVhbTogYXN5bmMgKHRlYW1JZCwgZGF0YSkgPT4ge1xuXHRcdFx0Y29uc3QgYWRhcHRlciA9IGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKTtcblx0XHRcdGlmIChcImlkXCIgaW4gZGF0YSkgZGF0YS5pZCA9IHZvaWQgMDtcblx0XHRcdHJldHVybiBhd2FpdCBhZGFwdGVyLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcInRlYW1cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogdGVhbUlkXG5cdFx0XHRcdH1dLFxuXHRcdFx0XHR1cGRhdGU6IHsgLi4uZGF0YSB9XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGRlbGV0ZVRlYW06IGFzeW5jICh0ZWFtSWQpID0+IHtcblx0XHRcdGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcik7XG5cdFx0XHRhd2FpdCBhZGFwdGVyLmRlbGV0ZU1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ0ZWFtTWVtYmVyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInRlYW1JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0ZWFtSWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGF3YWl0IGFkYXB0ZXIuZGVsZXRlKHtcblx0XHRcdFx0bW9kZWw6IFwidGVhbVwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0ZWFtSWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGlzdFRlYW1zOiBhc3luYyAob3JnYW5pemF0aW9uSWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInRlYW1cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y3JlYXRlVGVhbUludml0YXRpb246IGFzeW5jICh7IGVtYWlsLCByb2xlLCB0ZWFtSWQsIG9yZ2FuaXphdGlvbklkLCBpbnZpdGVySWQsIGV4cGlyZXNJbiA9IDFlMyAqIDYwICogNjAgKiA0OCB9KSA9PiB7XG5cdFx0XHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpO1xuXHRcdFx0Y29uc3QgZXhwaXJlc0F0ID0gZ2V0RGF0ZShleHBpcmVzSW4pO1xuXHRcdFx0cmV0dXJuIGF3YWl0IGFkYXB0ZXIuY3JlYXRlKHtcblx0XHRcdFx0bW9kZWw6IFwiaW52aXRhdGlvblwiLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0ZW1haWwsXG5cdFx0XHRcdFx0cm9sZSxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0XHR0ZWFtSWQsXG5cdFx0XHRcdFx0aW52aXRlcklkLFxuXHRcdFx0XHRcdHN0YXR1czogXCJwZW5kaW5nXCIsXG5cdFx0XHRcdFx0ZXhwaXJlc0F0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0c2V0QWN0aXZlVGVhbTogYXN5bmMgKHNlc3Npb25Ub2tlbiwgdGVhbUlkLCBjdHgpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVTZXNzaW9uKHNlc3Npb25Ub2tlbiwgeyBhY3RpdmVUZWFtSWQ6IHRlYW1JZCB9KTtcblx0XHR9LFxuXHRcdGxpc3RUZWFtTWVtYmVyczogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInRlYW1NZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidGVhbUlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEudGVhbUlkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNvdW50VGVhbU1lbWJlcnM6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuY291bnQoe1xuXHRcdFx0XHRtb2RlbDogXCJ0ZWFtTWVtYmVyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInRlYW1JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBkYXRhLnRlYW1JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRjb3VudE1lbWJlcnM6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuY291bnQoe1xuXHRcdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5vcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRsaXN0VGVhbXNCeVVzZXI6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gKGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwidGVhbU1lbWJlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS51c2VySWRcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdGVhbTogdHJ1ZSB9XG5cdFx0XHR9KSkubWFwKChyZXN1bHQpID0+IHJlc3VsdC50ZWFtKTtcblx0XHR9LFxuXHRcdGZpbmRUZWFtTWVtYmVyOiBhc3luYyAoZGF0YSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJ0ZWFtTWVtYmVyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInRlYW1JZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBkYXRhLnRlYW1JZFxuXHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEudXNlcklkXG5cdFx0XHRcdH1dXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGZpbmRPckNyZWF0ZVRlYW1NZW1iZXI6IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpO1xuXHRcdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwidGVhbU1lbWJlclwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ0ZWFtSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS50ZWFtSWRcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBkYXRhLnVzZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAobWVtYmVyKSByZXR1cm4gbWVtYmVyO1xuXHRcdFx0cmV0dXJuIGF3YWl0IGFkYXB0ZXIuY3JlYXRlKHtcblx0XHRcdFx0bW9kZWw6IFwidGVhbU1lbWJlclwiLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0dGVhbUlkOiBkYXRhLnRlYW1JZCxcblx0XHRcdFx0XHR1c2VySWQ6IGRhdGEudXNlcklkLFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRyZW1vdmVUZWFtTWVtYmVyOiBhc3luYyAoZGF0YSkgPT4ge1xuXHRcdFx0YXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZGVsZXRlTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInRlYW1NZW1iZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidGVhbUlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEudGVhbUlkXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS51c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEludml0YXRpb25zQnlUZWFtSWQ6IGFzeW5jICh0ZWFtSWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcImludml0YXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidGVhbUlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHRlYW1JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRsaXN0VXNlckludml0YXRpb25zOiBhc3luYyAoZW1haWwpID0+IHtcblx0XHRcdHJldHVybiAoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJpbnZpdGF0aW9uXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKClcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgb3JnYW5pemF0aW9uOiB0cnVlIH1cblx0XHRcdH0pKS5tYXAoKHsgb3JnYW5pemF0aW9uLCAuLi5pbnYgfSkgPT4gKHtcblx0XHRcdFx0Li4uaW52LFxuXHRcdFx0XHRvcmdhbml6YXRpb25OYW1lOiBvcmdhbml6YXRpb24ubmFtZVxuXHRcdFx0fSkpO1xuXHRcdH0sXG5cdFx0Y3JlYXRlSW52aXRhdGlvbjogYXN5bmMgKHsgaW52aXRhdGlvbiwgdXNlciB9KSA9PiB7XG5cdFx0XHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpO1xuXHRcdFx0Y29uc3QgZXhwaXJlc0F0ID0gZ2V0RGF0ZShvcHRpb25zPy5pbnZpdGF0aW9uRXhwaXJlc0luIHx8IDM2MDAgKiA0OCwgXCJzZWNcIik7XG5cdFx0XHRyZXR1cm4gYXdhaXQgYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRtb2RlbDogXCJpbnZpdGF0aW9uXCIsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRzdGF0dXM6IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRcdGV4cGlyZXNBdCxcblx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdGludml0ZXJJZDogdXNlci5pZCxcblx0XHRcdFx0XHQuLi5pbnZpdGF0aW9uLFxuXHRcdFx0XHRcdHRlYW1JZDogaW52aXRhdGlvbi50ZWFtSWRzLmxlbmd0aCA+IDAgPyBpbnZpdGF0aW9uLnRlYW1JZHMuam9pbihcIixcIikgOiBudWxsXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEludml0YXRpb25CeUlkOiBhc3luYyAoaWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwiaW52aXRhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRmaW5kUGVuZGluZ0ludml0YXRpb246IGFzeW5jIChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gKGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwiaW52aXRhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogZGF0YS5lbWFpbC50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGRhdGEub3JnYW5pemF0aW9uSWRcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZpZWxkOiBcInN0YXR1c1wiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IFwicGVuZGluZ1wiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdXG5cdFx0XHR9KSkuZmlsdGVyKChpbnZpdGUpID0+IG5ldyBEYXRlKGludml0ZS5leHBpcmVzQXQpID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpO1xuXHRcdH0sXG5cdFx0ZmluZFBlbmRpbmdJbnZpdGF0aW9uczogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiAoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGJhc2VBZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJpbnZpdGF0aW9uXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEub3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGZpZWxkOiBcInN0YXR1c1wiLFxuXHRcdFx0XHRcdHZhbHVlOiBcInBlbmRpbmdcIlxuXHRcdFx0XHR9XVxuXHRcdFx0fSkpLmZpbHRlcigoaW52aXRlKSA9PiBuZXcgRGF0ZShpbnZpdGUuZXhwaXJlc0F0KSA+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKTtcblx0XHR9LFxuXHRcdGxpc3RJbnZpdGF0aW9uczogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYmFzZUFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcImludml0YXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5vcmdhbml6YXRpb25JZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVJbnZpdGF0aW9uOiBhc3luYyAoZGF0YSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihiYXNlQWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcImludml0YXRpb25cIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHR2YWx1ZTogZGF0YS5pbnZpdGF0aW9uSWRcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHVwZGF0ZTogeyBzdGF0dXM6IGRhdGEuc3RhdHVzIH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0T3JnQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/call.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   orgMiddleware: () => (/* binding */ orgMiddleware),\n/* harmony export */   orgSessionMiddleware: () => (/* binding */ orgSessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/plugins/organization/call.ts\nconst orgMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthMiddleware)(async () => {\n\treturn {};\n});\n/**\n* The middleware forces the endpoint to require a valid session by utilizing the `sessionMiddleware`.\n* It also appends additional types to the session type regarding organizations.\n*/\nconst orgSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthMiddleware)({ use: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.sessionMiddleware] }, async (ctx) => {\n\treturn { session: ctx.context.session };\n});\n\n//#endregion\n\n//# sourceMappingURL=call.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9jYWxsLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFpRTtBQUNwQztBQUNnQzs7QUFFN0Q7QUFDQSxzQkFBc0IsMkVBQW9CO0FBQzFDO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJFQUFvQixHQUFHLE1BQU0sc0VBQWlCLEdBQUc7QUFDOUUsVUFBVTtBQUNWLENBQUM7O0FBRUQ7QUFDK0M7QUFDL0MiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXGNhbGwubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb3JnYW5pemF0aW9uL2NhbGwudHNcbmNvbnN0IG9yZ01pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoKSA9PiB7XG5cdHJldHVybiB7fTtcbn0pO1xuLyoqXG4qIFRoZSBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24gYnkgdXRpbGl6aW5nIHRoZSBgc2Vzc2lvbk1pZGRsZXdhcmVgLlxuKiBJdCBhbHNvIGFwcGVuZHMgYWRkaXRpb25hbCB0eXBlcyB0byB0aGUgc2Vzc2lvbiB0eXBlIHJlZ2FyZGluZyBvcmdhbml6YXRpb25zLlxuKi9cbmNvbnN0IG9yZ1Nlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoeyB1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0gfSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRyZXR1cm4geyBzZXNzaW9uOiBjdHguY29udGV4dC5zZXNzaW9uIH07XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FsbC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/client.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/client.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientSideHasPermission: () => (/* binding */ clientSideHasPermission),\n/* harmony export */   inferOrgAdditionalFields: () => (/* binding */ inferOrgAdditionalFields),\n/* harmony export */   organizationClient: () => (/* binding */ organizationClient)\n/* harmony export */ });\n/* harmony import */ var _client_query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/query.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _client_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/client/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\");\n/* harmony import */ var _permission_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/permission.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! nanostores */ \"(rsc)/./node_modules/nanostores/atom/index.js\");\n\n\n\n\n\n\n\n//#region src/plugins/organization/client.ts\n/**\n* Using the same `hasPermissionFn` function, but without the need for a `ctx` parameter or the `organizationId` parameter.\n*/\nconst clientSideHasPermission = (input) => {\n\treturn (0,_permission_mjs__WEBPACK_IMPORTED_MODULE_4__.hasPermissionFn)(input, input.options.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultRoles);\n};\nconst organizationClient = (options) => {\n\tconst $listOrg = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeOrgSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeMemberSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeMemberRoleSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst roles = {\n\t\tadmin: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.adminAc,\n\t\tmember: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.memberAc,\n\t\towner: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.ownerAc,\n\t\t...options?.roles\n\t};\n\treturn {\n\t\tid: \"organization\",\n\t\t$InferServerPlugin: {},\n\t\tgetActions: ($fetch, _$store, co) => ({\n\t\t\t$Infer: {\n\t\t\t\tActiveOrganization: {},\n\t\t\t\tOrganization: {},\n\t\t\t\tInvitation: {},\n\t\t\t\tMember: {},\n\t\t\t\tTeam: {}\n\t\t\t},\n\t\t\torganization: { checkRolePermission: (data) => {\n\t\t\t\treturn clientSideHasPermission({\n\t\t\t\t\trole: data.role,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tac: options?.ac,\n\t\t\t\t\t\troles\n\t\t\t\t\t},\n\t\t\t\t\tpermissions: data.permissions ?? data.permission\n\t\t\t\t});\n\t\t\t} }\n\t\t}),\n\t\tgetAtoms: ($fetch) => {\n\t\t\tconst listOrganizations = (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($listOrg, \"/organization/list\", $fetch, { method: \"GET\" });\n\t\t\treturn {\n\t\t\t\t$listOrg,\n\t\t\t\t$activeOrgSignal,\n\t\t\t\t$activeMemberSignal,\n\t\t\t\t$activeMemberRoleSignal,\n\t\t\t\tactiveOrganization: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeOrgSignal], \"/organization/get-full-organization\", $fetch, () => ({ method: \"GET\" })),\n\t\t\t\tlistOrganizations,\n\t\t\t\tactiveMember: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeMemberSignal], \"/organization/get-active-member\", $fetch, { method: \"GET\" }),\n\t\t\t\tactiveMemberRole: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeMemberRoleSignal], \"/organization/get-active-member-role\", $fetch, { method: \"GET\" })\n\t\t\t};\n\t\t},\n\t\tpathMethods: {\n\t\t\t\"/organization/get-full-organization\": \"GET\",\n\t\t\t\"/organization/list-user-teams\": \"GET\"\n\t\t},\n\t\tatomListeners: [\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path === \"/organization/create\" || path === \"/organization/delete\" || path === \"/organization/update\";\n\t\t\t\t},\n\t\t\t\tsignal: \"$listOrg\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.startsWith(\"/organization\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeOrgSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.startsWith(\"/organization/set-active\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$sessionSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.includes(\"/organization/update-member-role\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeMemberSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.includes(\"/organization/update-member-role\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeMemberRoleSignal\"\n\t\t\t}\n\t\t]\n\t};\n};\nconst inferOrgAdditionalFields = (schema) => {\n\treturn {};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFzRDtBQUN0QjtBQUNrRDtBQUN0RDtBQUN1QjtBQUNqQjs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQWUsK0JBQStCLCtEQUFZO0FBQ2xFO0FBQ0E7QUFDQSxrQkFBa0IsZ0RBQUk7QUFDdEIsMEJBQTBCLGdEQUFJO0FBQzlCLDZCQUE2QixnREFBSTtBQUNqQyxpQ0FBaUMsZ0RBQUk7QUFDckM7QUFDQSxTQUFTLDBEQUFPO0FBQ2hCLFVBQVUsMkRBQVE7QUFDbEIsU0FBUywwREFBTztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLG9CQUFvQjtBQUNwQixrQkFBa0I7QUFDbEIsY0FBYztBQUNkO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0EsNkJBQTZCLCtEQUFZLDJDQUEyQyxlQUFlO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQVksNkVBQTZFLGVBQWU7QUFDaEk7QUFDQSxrQkFBa0IsK0RBQVkscUVBQXFFLGVBQWU7QUFDbEgsc0JBQXNCLCtEQUFZLDhFQUE4RSxlQUFlO0FBQy9IO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpRjtBQUNqRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi4vLi4vY2xpZW50L3F1ZXJ5Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2xpZW50L2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgYWRtaW5BYywgZGVmYXVsdFJvbGVzLCBtZW1iZXJBYywgb3duZXJBYyB9IGZyb20gXCIuL2FjY2Vzcy9zdGF0ZW1lbnQubWpzXCI7XG5pbXBvcnQgXCIuL2FjY2Vzcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGhhc1Blcm1pc3Npb25GbiB9IGZyb20gXCIuL3Blcm1pc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSBcIm5hbm9zdG9yZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQudHNcbi8qKlxuKiBVc2luZyB0aGUgc2FtZSBgaGFzUGVybWlzc2lvbkZuYCBmdW5jdGlvbiwgYnV0IHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgYGN0eGAgcGFyYW1ldGVyIG9yIHRoZSBgb3JnYW5pemF0aW9uSWRgIHBhcmFtZXRlci5cbiovXG5jb25zdCBjbGllbnRTaWRlSGFzUGVybWlzc2lvbiA9IChpbnB1dCkgPT4ge1xuXHRyZXR1cm4gaGFzUGVybWlzc2lvbkZuKGlucHV0LCBpbnB1dC5vcHRpb25zLnJvbGVzIHx8IGRlZmF1bHRSb2xlcyk7XG59O1xuY29uc3Qgb3JnYW5pemF0aW9uQ2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgJGxpc3RPcmcgPSBhdG9tKGZhbHNlKTtcblx0Y29uc3QgJGFjdGl2ZU9yZ1NpZ25hbCA9IGF0b20oZmFsc2UpO1xuXHRjb25zdCAkYWN0aXZlTWVtYmVyU2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0ICRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHJvbGVzID0ge1xuXHRcdGFkbWluOiBhZG1pbkFjLFxuXHRcdG1lbWJlcjogbWVtYmVyQWMsXG5cdFx0b3duZXI6IG93bmVyQWMsXG5cdFx0Li4ub3B0aW9ucz8ucm9sZXNcblx0fTtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvcmdhbml6YXRpb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGdldEFjdGlvbnM6ICgkZmV0Y2gsIF8kc3RvcmUsIGNvKSA9PiAoe1xuXHRcdFx0JEluZmVyOiB7XG5cdFx0XHRcdEFjdGl2ZU9yZ2FuaXphdGlvbjoge30sXG5cdFx0XHRcdE9yZ2FuaXphdGlvbjoge30sXG5cdFx0XHRcdEludml0YXRpb246IHt9LFxuXHRcdFx0XHRNZW1iZXI6IHt9LFxuXHRcdFx0XHRUZWFtOiB7fVxuXHRcdFx0fSxcblx0XHRcdG9yZ2FuaXphdGlvbjogeyBjaGVja1JvbGVQZXJtaXNzaW9uOiAoZGF0YSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gY2xpZW50U2lkZUhhc1Blcm1pc3Npb24oe1xuXHRcdFx0XHRcdHJvbGU6IGRhdGEucm9sZSxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHRhYzogb3B0aW9ucz8uYWMsXG5cdFx0XHRcdFx0XHRyb2xlc1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cGVybWlzc2lvbnM6IGRhdGEucGVybWlzc2lvbnMgPz8gZGF0YS5wZXJtaXNzaW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSB9XG5cdFx0fSksXG5cdFx0Z2V0QXRvbXM6ICgkZmV0Y2gpID0+IHtcblx0XHRcdGNvbnN0IGxpc3RPcmdhbml6YXRpb25zID0gdXNlQXV0aFF1ZXJ5KCRsaXN0T3JnLCBcIi9vcmdhbml6YXRpb24vbGlzdFwiLCAkZmV0Y2gsIHsgbWV0aG9kOiBcIkdFVFwiIH0pO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0JGxpc3RPcmcsXG5cdFx0XHRcdCRhY3RpdmVPcmdTaWduYWwsXG5cdFx0XHRcdCRhY3RpdmVNZW1iZXJTaWduYWwsXG5cdFx0XHRcdCRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsLFxuXHRcdFx0XHRhY3RpdmVPcmdhbml6YXRpb246IHVzZUF1dGhRdWVyeShbJGFjdGl2ZU9yZ1NpZ25hbF0sIFwiL29yZ2FuaXphdGlvbi9nZXQtZnVsbC1vcmdhbml6YXRpb25cIiwgJGZldGNoLCAoKSA9PiAoeyBtZXRob2Q6IFwiR0VUXCIgfSkpLFxuXHRcdFx0XHRsaXN0T3JnYW5pemF0aW9ucyxcblx0XHRcdFx0YWN0aXZlTWVtYmVyOiB1c2VBdXRoUXVlcnkoWyRhY3RpdmVNZW1iZXJTaWduYWxdLCBcIi9vcmdhbml6YXRpb24vZ2V0LWFjdGl2ZS1tZW1iZXJcIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KSxcblx0XHRcdFx0YWN0aXZlTWVtYmVyUm9sZTogdXNlQXV0aFF1ZXJ5KFskYWN0aXZlTWVtYmVyUm9sZVNpZ25hbF0sIFwiL29yZ2FuaXphdGlvbi9nZXQtYWN0aXZlLW1lbWJlci1yb2xlXCIsICRmZXRjaCwgeyBtZXRob2Q6IFwiR0VUXCIgfSlcblx0XHRcdH07XG5cdFx0fSxcblx0XHRwYXRoTWV0aG9kczoge1xuXHRcdFx0XCIvb3JnYW5pemF0aW9uL2dldC1mdWxsLW9yZ2FuaXphdGlvblwiOiBcIkdFVFwiLFxuXHRcdFx0XCIvb3JnYW5pemF0aW9uL2xpc3QtdXNlci10ZWFtc1wiOiBcIkdFVFwiXG5cdFx0fSxcblx0XHRhdG9tTGlzdGVuZXJzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdG1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoID09PSBcIi9vcmdhbml6YXRpb24vY3JlYXRlXCIgfHwgcGF0aCA9PT0gXCIvb3JnYW5pemF0aW9uL2RlbGV0ZVwiIHx8IHBhdGggPT09IFwiL29yZ2FuaXphdGlvbi91cGRhdGVcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRsaXN0T3JnXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoLnN0YXJ0c1dpdGgoXCIvb3JnYW5pemF0aW9uXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaWduYWw6IFwiJGFjdGl2ZU9yZ1NpZ25hbFwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0aC5zdGFydHNXaXRoKFwiL29yZ2FuaXphdGlvbi9zZXQtYWN0aXZlXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGguaW5jbHVkZXMoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1tZW1iZXItcm9sZVwiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRhY3RpdmVNZW1iZXJTaWduYWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGguaW5jbHVkZXMoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1tZW1iZXItcm9sZVwiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsXCJcblx0XHRcdH1cblx0XHRdXG5cdH07XG59O1xuY29uc3QgaW5mZXJPcmdBZGRpdGlvbmFsRmllbGRzID0gKHNjaGVtYSkgPT4ge1xuXHRyZXR1cm4ge307XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBpbmZlck9yZ0FkZGl0aW9uYWxGaWVsZHMsIG9yZ2FuaXphdGlvbkNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/error-codes.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ORGANIZATION_ERROR_CODES: () => (/* binding */ ORGANIZATION_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/organization/error-codes.ts\nconst ORGANIZATION_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION: \"You are not allowed to create a new organization\",\n\tYOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS: \"You have reached the maximum number of organizations\",\n\tORGANIZATION_ALREADY_EXISTS: \"Organization already exists\",\n\tORGANIZATION_SLUG_ALREADY_TAKEN: \"Organization slug already taken\",\n\tORGANIZATION_NOT_FOUND: \"Organization not found\",\n\tUSER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION: \"User is not a member of the organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION: \"You are not allowed to update this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION: \"You are not allowed to delete this organization\",\n\tNO_ACTIVE_ORGANIZATION: \"No active organization\",\n\tUSER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION: \"User is already a member of this organization\",\n\tMEMBER_NOT_FOUND: \"Member not found\",\n\tROLE_NOT_FOUND: \"Role not found\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM: \"You are not allowed to create a new team\",\n\tTEAM_ALREADY_EXISTS: \"Team already exists\",\n\tTEAM_NOT_FOUND: \"Team not found\",\n\tYOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER: \"You cannot leave the organization as the only owner\",\n\tYOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER: \"You cannot leave the organization without an owner\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER: \"You are not allowed to delete this member\",\n\tYOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION: \"You are not allowed to invite users to this organization\",\n\tUSER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION: \"User is already invited to this organization\",\n\tINVITATION_NOT_FOUND: \"Invitation not found\",\n\tYOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION: \"You are not the recipient of the invitation\",\n\tEMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION: \"Email verification required before accepting or rejecting invitation\",\n\tYOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION: \"You are not allowed to cancel this invitation\",\n\tINVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION: \"Inviter is no longer a member of the organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE: \"You are not allowed to invite a user with this role\",\n\tFAILED_TO_RETRIEVE_INVITATION: \"Failed to retrieve invitation\",\n\tYOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS: \"You have reached the maximum number of teams\",\n\tUNABLE_TO_REMOVE_LAST_TEAM: \"Unable to remove last team\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER: \"You are not allowed to update this member\",\n\tORGANIZATION_MEMBERSHIP_LIMIT_REACHED: \"Organization membership limit reached\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION: \"You are not allowed to create teams in this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION: \"You are not allowed to delete teams in this organization\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM: \"You are not allowed to update this team\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM: \"You are not allowed to delete this team\",\n\tINVITATION_LIMIT_REACHED: \"Invitation limit reached\",\n\tTEAM_MEMBER_LIMIT_REACHED: \"Team member limit reached\",\n\tUSER_IS_NOT_A_MEMBER_OF_THE_TEAM: \"User is not a member of the team\",\n\tYOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM: \"You are not allowed to list the members of this team\",\n\tYOU_DO_NOT_HAVE_AN_ACTIVE_TEAM: \"You do not have an active team\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER: \"You are not allowed to create a new member\",\n\tYOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER: \"You are not allowed to remove a team member\",\n\tYOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION: \"You are not allowed to access this organization as an owner\",\n\tYOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION: \"You are not a member of this organization\",\n\tMISSING_AC_INSTANCE: \"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information\",\n\tYOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE: \"You must be in an organization to create a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE: \"You are not allowed to create a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE: \"You are not allowed to update a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE: \"You are not allowed to delete a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE: \"You are not allowed to read a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE: \"You are not allowed to list a role\",\n\tYOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE: \"You are not allowed to get a role\",\n\tTOO_MANY_ROLES: \"This organization has too many roles\",\n\tINVALID_RESOURCE: \"The provided permission includes an invalid resource\",\n\tROLE_NAME_IS_ALREADY_TAKEN: \"That role name is already taken\",\n\tCANNOT_DELETE_A_PRE_DEFINED_ROLE: \"Cannot delete a pre-defined role\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9lcnJvci1jb2Rlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0EsaUNBQWlDLHlFQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNvQztBQUNwQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcZXJyb3ItY29kZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUVycm9yQ29kZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9lcnJvci1jb2Rlcy50c1xuY29uc3QgT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX0FfTkVXX09SR0FOSVpBVElPTjogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGNyZWF0ZSBhIG5ldyBvcmdhbml6YXRpb25cIixcblx0WU9VX0hBVkVfUkVBQ0hFRF9USEVfTUFYSU1VTV9OVU1CRVJfT0ZfT1JHQU5JWkFUSU9OUzogXCJZb3UgaGF2ZSByZWFjaGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiBvcmdhbml6YXRpb25zXCIsXG5cdE9SR0FOSVpBVElPTl9BTFJFQURZX0VYSVNUUzogXCJPcmdhbml6YXRpb24gYWxyZWFkeSBleGlzdHNcIixcblx0T1JHQU5JWkFUSU9OX1NMVUdfQUxSRUFEWV9UQUtFTjogXCJPcmdhbml6YXRpb24gc2x1ZyBhbHJlYWR5IHRha2VuXCIsXG5cdE9SR0FOSVpBVElPTl9OT1RfRk9VTkQ6IFwiT3JnYW5pemF0aW9uIG5vdCBmb3VuZFwiLFxuXHRVU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OOiBcIlVzZXIgaXMgbm90IGEgbWVtYmVyIG9mIHRoZSBvcmdhbml6YXRpb25cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVEhJU19PUkdBTklaQVRJT046IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byB1cGRhdGUgdGhpcyBvcmdhbml6YXRpb25cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVEhJU19PUkdBTklaQVRJT046IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBkZWxldGUgdGhpcyBvcmdhbml6YXRpb25cIixcblx0Tk9fQUNUSVZFX09SR0FOSVpBVElPTjogXCJObyBhY3RpdmUgb3JnYW5pemF0aW9uXCIsXG5cdFVTRVJfSVNfQUxSRUFEWV9BX01FTUJFUl9PRl9USElTX09SR0FOSVpBVElPTjogXCJVc2VyIGlzIGFscmVhZHkgYSBtZW1iZXIgb2YgdGhpcyBvcmdhbml6YXRpb25cIixcblx0TUVNQkVSX05PVF9GT1VORDogXCJNZW1iZXIgbm90IGZvdW5kXCIsXG5cdFJPTEVfTk9UX0ZPVU5EOiBcIlJvbGUgbm90IGZvdW5kXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX0FfTkVXX1RFQU06IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBjcmVhdGUgYSBuZXcgdGVhbVwiLFxuXHRURUFNX0FMUkVBRFlfRVhJU1RTOiBcIlRlYW0gYWxyZWFkeSBleGlzdHNcIixcblx0VEVBTV9OT1RfRk9VTkQ6IFwiVGVhbSBub3QgZm91bmRcIixcblx0WU9VX0NBTk5PVF9MRUFWRV9USEVfT1JHQU5JWkFUSU9OX0FTX1RIRV9PTkxZX09XTkVSOiBcIllvdSBjYW5ub3QgbGVhdmUgdGhlIG9yZ2FuaXphdGlvbiBhcyB0aGUgb25seSBvd25lclwiLFxuXHRZT1VfQ0FOTk9UX0xFQVZFX1RIRV9PUkdBTklaQVRJT05fV0lUSE9VVF9BTl9PV05FUjogXCJZb3UgY2Fubm90IGxlYXZlIHRoZSBvcmdhbml6YXRpb24gd2l0aG91dCBhbiBvd25lclwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0RFTEVURV9USElTX01FTUJFUjogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGRlbGV0ZSB0aGlzIG1lbWJlclwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0lOVklURV9VU0VSU19UT19USElTX09SR0FOSVpBVElPTjogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGludml0ZSB1c2VycyB0byB0aGlzIG9yZ2FuaXphdGlvblwiLFxuXHRVU0VSX0lTX0FMUkVBRFlfSU5WSVRFRF9UT19USElTX09SR0FOSVpBVElPTjogXCJVc2VyIGlzIGFscmVhZHkgaW52aXRlZCB0byB0aGlzIG9yZ2FuaXphdGlvblwiLFxuXHRJTlZJVEFUSU9OX05PVF9GT1VORDogXCJJbnZpdGF0aW9uIG5vdCBmb3VuZFwiLFxuXHRZT1VfQVJFX05PVF9USEVfUkVDSVBJRU5UX09GX1RIRV9JTlZJVEFUSU9OOiBcIllvdSBhcmUgbm90IHRoZSByZWNpcGllbnQgb2YgdGhlIGludml0YXRpb25cIixcblx0RU1BSUxfVkVSSUZJQ0FUSU9OX1JFUVVJUkVEX0JFRk9SRV9BQ0NFUFRJTkdfT1JfUkVKRUNUSU5HX0lOVklUQVRJT046IFwiRW1haWwgdmVyaWZpY2F0aW9uIHJlcXVpcmVkIGJlZm9yZSBhY2NlcHRpbmcgb3IgcmVqZWN0aW5nIGludml0YXRpb25cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DQU5DRUxfVEhJU19JTlZJVEFUSU9OOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gY2FuY2VsIHRoaXMgaW52aXRhdGlvblwiLFxuXHRJTlZJVEVSX0lTX05PX0xPTkdFUl9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OOiBcIkludml0ZXIgaXMgbm8gbG9uZ2VyIGEgbWVtYmVyIG9mIHRoZSBvcmdhbml6YXRpb25cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19JTlZJVEVfVVNFUl9XSVRIX1RISVNfUk9MRTogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGludml0ZSBhIHVzZXIgd2l0aCB0aGlzIHJvbGVcIixcblx0RkFJTEVEX1RPX1JFVFJJRVZFX0lOVklUQVRJT046IFwiRmFpbGVkIHRvIHJldHJpZXZlIGludml0YXRpb25cIixcblx0WU9VX0hBVkVfUkVBQ0hFRF9USEVfTUFYSU1VTV9OVU1CRVJfT0ZfVEVBTVM6IFwiWW91IGhhdmUgcmVhY2hlZCB0aGUgbWF4aW11bSBudW1iZXIgb2YgdGVhbXNcIixcblx0VU5BQkxFX1RPX1JFTU9WRV9MQVNUX1RFQU06IFwiVW5hYmxlIHRvIHJlbW92ZSBsYXN0IHRlYW1cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVEhJU19NRU1CRVI6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byB1cGRhdGUgdGhpcyBtZW1iZXJcIixcblx0T1JHQU5JWkFUSU9OX01FTUJFUlNISVBfTElNSVRfUkVBQ0hFRDogXCJPcmdhbml6YXRpb24gbWVtYmVyc2hpcCBsaW1pdCByZWFjaGVkXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX1RFQU1TX0lOX1RISVNfT1JHQU5JWkFUSU9OOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gY3JlYXRlIHRlYW1zIGluIHRoaXMgb3JnYW5pemF0aW9uXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fREVMRVRFX1RFQU1TX0lOX1RISVNfT1JHQU5JWkFUSU9OOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gZGVsZXRlIHRlYW1zIGluIHRoaXMgb3JnYW5pemF0aW9uXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fVVBEQVRFX1RISVNfVEVBTTogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHVwZGF0ZSB0aGlzIHRlYW1cIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVEhJU19URUFNOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gZGVsZXRlIHRoaXMgdGVhbVwiLFxuXHRJTlZJVEFUSU9OX0xJTUlUX1JFQUNIRUQ6IFwiSW52aXRhdGlvbiBsaW1pdCByZWFjaGVkXCIsXG5cdFRFQU1fTUVNQkVSX0xJTUlUX1JFQUNIRUQ6IFwiVGVhbSBtZW1iZXIgbGltaXQgcmVhY2hlZFwiLFxuXHRVU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfVEVBTTogXCJVc2VyIGlzIG5vdCBhIG1lbWJlciBvZiB0aGUgdGVhbVwiLFxuXHRZT1VfQ0FOX05PVF9BQ0NFU1NfVEhFX01FTUJFUlNfT0ZfVEhJU19URUFNOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gbGlzdCB0aGUgbWVtYmVycyBvZiB0aGlzIHRlYW1cIixcblx0WU9VX0RPX05PVF9IQVZFX0FOX0FDVElWRV9URUFNOiBcIllvdSBkbyBub3QgaGF2ZSBhbiBhY3RpdmUgdGVhbVwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0NSRUFURV9BX05FV19URUFNX01FTUJFUjogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGNyZWF0ZSBhIG5ldyBtZW1iZXJcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19SRU1PVkVfQV9URUFNX01FTUJFUjogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHJlbW92ZSBhIHRlYW0gbWVtYmVyXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fQUNDRVNTX1RISVNfT1JHQU5JWkFUSU9OOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gYWNjZXNzIHRoaXMgb3JnYW5pemF0aW9uIGFzIGFuIG93bmVyXCIsXG5cdFlPVV9BUkVfTk9UX0FfTUVNQkVSX09GX1RISVNfT1JHQU5JWkFUSU9OOiBcIllvdSBhcmUgbm90IGEgbWVtYmVyIG9mIHRoaXMgb3JnYW5pemF0aW9uXCIsXG5cdE1JU1NJTkdfQUNfSU5TVEFOQ0U6IFwiRHluYW1pYyBBY2Nlc3MgQ29udHJvbCByZXF1aXJlcyBhIHByZS1kZWZpbmVkIGFjIGluc3RhbmNlIG9uIHRoZSBzZXJ2ZXIgYXV0aCBwbHVnaW4uIFJlYWQgc2VydmVyIGxvZ3MgZm9yIG1vcmUgaW5mb3JtYXRpb25cIixcblx0WU9VX01VU1RfQkVfSU5fQU5fT1JHQU5JWkFUSU9OX1RPX0NSRUFURV9BX1JPTEU6IFwiWW91IG11c3QgYmUgaW4gYW4gb3JnYW5pemF0aW9uIHRvIGNyZWF0ZSBhIHJvbGVcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DUkVBVEVfQV9ST0xFOiBcIllvdSBhcmUgbm90IGFsbG93ZWQgdG8gY3JlYXRlIGEgcm9sZVwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX1VQREFURV9BX1JPTEU6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byB1cGRhdGUgYSByb2xlXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fREVMRVRFX0FfUk9MRTogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIGRlbGV0ZSBhIHJvbGVcIixcblx0WU9VX0FSRV9OT1RfQUxMT1dFRF9UT19SRUFEX0FfUk9MRTogXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHJlYWQgYSByb2xlXCIsXG5cdFlPVV9BUkVfTk9UX0FMTE9XRURfVE9fTElTVF9BX1JPTEU6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBsaXN0IGEgcm9sZVwiLFxuXHRZT1VfQVJFX05PVF9BTExPV0VEX1RPX0dFVF9BX1JPTEU6IFwiWW91IGFyZSBub3QgYWxsb3dlZCB0byBnZXQgYSByb2xlXCIsXG5cdFRPT19NQU5ZX1JPTEVTOiBcIlRoaXMgb3JnYW5pemF0aW9uIGhhcyB0b28gbWFueSByb2xlc1wiLFxuXHRJTlZBTElEX1JFU09VUkNFOiBcIlRoZSBwcm92aWRlZCBwZXJtaXNzaW9uIGluY2x1ZGVzIGFuIGludmFsaWQgcmVzb3VyY2VcIixcblx0Uk9MRV9OQU1FX0lTX0FMUkVBRFlfVEFLRU46IFwiVGhhdCByb2xlIG5hbWUgaXMgYWxyZWFkeSB0YWtlblwiLFxuXHRDQU5OT1RfREVMRVRFX0FfUFJFX0RFRklORURfUk9MRTogXCJDYW5ub3QgZGVsZXRlIGEgcHJlLWRlZmluZWQgcm9sZVwiXG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9yLWNvZGVzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/has-permission.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission)\n/* harmony export */ });\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\");\n/* harmony import */ var _permission_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/permission.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n\n//#region src/plugins/organization/has-permission.ts\nconst hasPermission = async (input, ctx) => {\n\tlet acRoles = { ...input.options.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_1__.defaultRoles };\n\tif (ctx && input.organizationId && input.options.dynamicAccessControl?.enabled && input.options.ac && !input.useMemoryCache) {\n\t\tconst roles = await ctx.context.adapter.findMany({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: input.organizationId\n\t\t\t}]\n\t\t});\n\t\tfor (const { role, permission: permissionsString } of roles) {\n\t\t\tif (role in acRoles) continue;\n\t\t\tconst result = zod__WEBPACK_IMPORTED_MODULE_4__.record(zod__WEBPACK_IMPORTED_MODULE_4__.string(), zod__WEBPACK_IMPORTED_MODULE_4__.array(zod__WEBPACK_IMPORTED_MODULE_4__.string())).safeParse(JSON.parse(permissionsString));\n\t\t\tif (!result.success) {\n\t\t\t\tctx.context.logger.error(\"[hasPermission] Invalid permissions for role \" + role, { permissions: JSON.parse(permissionsString) });\n\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_0__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Invalid permissions for role \" + role });\n\t\t\t}\n\t\t\tacRoles[role] = input.options.ac.newRole(result.data);\n\t\t}\n\t}\n\tif (input.useMemoryCache) acRoles = _permission_mjs__WEBPACK_IMPORTED_MODULE_3__.cacheAllRoles.get(input.organizationId) || acRoles;\n\t_permission_mjs__WEBPACK_IMPORTED_MODULE_3__.cacheAllRoles.set(input.organizationId, acRoles);\n\treturn (0,_permission_mjs__WEBPACK_IMPORTED_MODULE_3__.hasPermissionFn)(input, acRoles);\n};\n\n//#endregion\n\n//# sourceMappingURL=has-permission.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9oYXMtcGVybWlzc2lvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStDO0FBQ087QUFDMUI7QUFDc0M7QUFDekM7O0FBRXpCO0FBQ0E7QUFDQSxpQkFBaUIsMEJBQTBCLCtEQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsZUFBZSxzQ0FBc0M7QUFDckQ7QUFDQSxrQkFBa0IsdUNBQVEsQ0FBQyx1Q0FBUSxJQUFJLHNDQUFPLENBQUMsdUNBQVE7QUFDdkQ7QUFDQSx1RkFBdUYsNENBQTRDO0FBQ25JLGNBQWMsb0RBQVEsNEJBQTRCLGlEQUFpRDtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQywwREFBYTtBQUNsRCxDQUFDLDBEQUFhO0FBQ2QsUUFBUSxnRUFBZTtBQUN2Qjs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcaGFzLXBlcm1pc3Npb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRSb2xlcyB9IGZyb20gXCIuL2FjY2Vzcy9zdGF0ZW1lbnQubWpzXCI7XG5pbXBvcnQgXCIuL2FjY2Vzcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNhY2hlQWxsUm9sZXMsIGhhc1Blcm1pc3Npb25GbiB9IGZyb20gXCIuL3Blcm1pc3Npb24ubWpzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9oYXMtcGVybWlzc2lvbi50c1xuY29uc3QgaGFzUGVybWlzc2lvbiA9IGFzeW5jIChpbnB1dCwgY3R4KSA9PiB7XG5cdGxldCBhY1JvbGVzID0geyAuLi5pbnB1dC5vcHRpb25zLnJvbGVzIHx8IGRlZmF1bHRSb2xlcyB9O1xuXHRpZiAoY3R4ICYmIGlucHV0Lm9yZ2FuaXphdGlvbklkICYmIGlucHV0Lm9wdGlvbnMuZHluYW1pY0FjY2Vzc0NvbnRyb2w/LmVuYWJsZWQgJiYgaW5wdXQub3B0aW9ucy5hYyAmJiAhaW5wdXQudXNlTWVtb3J5Q2FjaGUpIHtcblx0XHRjb25zdCByb2xlcyA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE1hbnkoe1xuXHRcdFx0bW9kZWw6IFwib3JnYW5pemF0aW9uUm9sZVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBpbnB1dC5vcmdhbml6YXRpb25JZFxuXHRcdFx0fV1cblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IHsgcm9sZSwgcGVybWlzc2lvbjogcGVybWlzc2lvbnNTdHJpbmcgfSBvZiByb2xlcykge1xuXHRcdFx0aWYgKHJvbGUgaW4gYWNSb2xlcykgY29udGludWU7XG5cdFx0XHRjb25zdCByZXN1bHQgPSB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKS5zYWZlUGFyc2UoSlNPTi5wYXJzZShwZXJtaXNzaW9uc1N0cmluZykpO1xuXHRcdFx0aWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuXHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJbaGFzUGVybWlzc2lvbl0gSW52YWxpZCBwZXJtaXNzaW9ucyBmb3Igcm9sZSBcIiArIHJvbGUsIHsgcGVybWlzc2lvbnM6IEpTT04ucGFyc2UocGVybWlzc2lvbnNTdHJpbmcpIH0pO1xuXHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBcIkludmFsaWQgcGVybWlzc2lvbnMgZm9yIHJvbGUgXCIgKyByb2xlIH0pO1xuXHRcdFx0fVxuXHRcdFx0YWNSb2xlc1tyb2xlXSA9IGlucHV0Lm9wdGlvbnMuYWMubmV3Um9sZShyZXN1bHQuZGF0YSk7XG5cdFx0fVxuXHR9XG5cdGlmIChpbnB1dC51c2VNZW1vcnlDYWNoZSkgYWNSb2xlcyA9IGNhY2hlQWxsUm9sZXMuZ2V0KGlucHV0Lm9yZ2FuaXphdGlvbklkKSB8fCBhY1JvbGVzO1xuXHRjYWNoZUFsbFJvbGVzLnNldChpbnB1dC5vcmdhbml6YXRpb25JZCwgYWNSb2xlcyk7XG5cdHJldHVybiBoYXNQZXJtaXNzaW9uRm4oaW5wdXQsIGFjUm9sZXMpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYXNQZXJtaXNzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXMtcGVybWlzc2lvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/index.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrgAdapter: () => (/* reexport safe */ _adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrgAdapter),\n/* harmony export */   organization: () => (/* reexport safe */ _organization_mjs__WEBPACK_IMPORTED_MODULE_1__.organization),\n/* harmony export */   parseRoles: () => (/* reexport safe */ _organization_mjs__WEBPACK_IMPORTED_MODULE_1__.parseRoles)\n/* harmony export */ });\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _organization_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./organization.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7QUFDZ0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRPcmdBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IG9yZ2FuaXphdGlvbiwgcGFyc2VSb2xlcyB9IGZyb20gXCIuL29yZ2FuaXphdGlvbi5tanNcIjtcblxuZXhwb3J0IHsgZ2V0T3JnQWRhcHRlciwgb3JnYW5pemF0aW9uLCBwYXJzZVJvbGVzIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/organization.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   organization: () => (/* binding */ organization),\n/* harmony export */   parseRoles: () => (/* binding */ parseRoles)\n/* harmony export */ });\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./access/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _utils_shim_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/shim.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/shim.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var _routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/crud-access-control.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-access-control.mjs\");\n/* harmony import */ var _routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./routes/crud-invites.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-invites.mjs\");\n/* harmony import */ var _routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./routes/crud-members.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-members.mjs\");\n/* harmony import */ var _routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./routes/crud-org.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-org.mjs\");\n/* harmony import */ var _routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./routes/crud-team.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-team.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/organization.ts\nfunction parseRoles(roles) {\n\treturn Array.isArray(roles) ? roles.join(\",\") : roles;\n}\nconst createHasPermissionBodySchema = zod__WEBPACK_IMPORTED_MODULE_16__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_16__.string().optional() }).and(zod__WEBPACK_IMPORTED_MODULE_16__.union([zod__WEBPACK_IMPORTED_MODULE_16__.object({\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_16__.record(zod__WEBPACK_IMPORTED_MODULE_16__.string(), zod__WEBPACK_IMPORTED_MODULE_16__.array(zod__WEBPACK_IMPORTED_MODULE_16__.string())),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_16__.undefined()\n}), zod__WEBPACK_IMPORTED_MODULE_16__.object({\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_16__.undefined(),\n\tpermissions: zod__WEBPACK_IMPORTED_MODULE_16__.record(zod__WEBPACK_IMPORTED_MODULE_16__.string(), zod__WEBPACK_IMPORTED_MODULE_16__.array(zod__WEBPACK_IMPORTED_MODULE_16__.string()))\n})]));\nconst createHasPermission = (options) => {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_15__.createAuthEndpoint)(\"/organization/has-permission\", {\n\t\tmethod: \"POST\",\n\t\trequireHeaders: true,\n\t\tbody: createHasPermissionBodySchema,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Check if the user has permission\",\n\t\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tpermission: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\",\n\t\t\t\t\t\t\tdeprecated: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tdescription: \"The permission to check\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"permissions\"]\n\t\t\t\t} } } },\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\terror: { type: \"string\" },\n\t\t\t\t\t\t\tsuccess: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"success\"]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst activeOrganizationId = ctx.body.organizationId || ctx.context.session.session.activeOrganizationId;\n\t\tif (!activeOrganizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_14__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\tconst member = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_4__.getOrgAdapter)(ctx.context, options).findMemberByOrgId({\n\t\t\tuserId: ctx.context.session.user.id,\n\t\t\torganizationId: activeOrganizationId\n\t\t});\n\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_14__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tconst result = await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\trole: member.role,\n\t\t\toptions,\n\t\t\tpermissions: ctx.body.permissions ?? ctx.body.permission,\n\t\t\torganizationId: activeOrganizationId\n\t\t}, ctx);\n\t\treturn ctx.json({\n\t\t\terror: null,\n\t\t\tsuccess: result\n\t\t});\n\t});\n};\nfunction organization(options) {\n\tconst opts = options || {};\n\tlet endpoints = {\n\t\tcreateOrganization: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.createOrganization)(opts),\n\t\tupdateOrganization: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.updateOrganization)(opts),\n\t\tdeleteOrganization: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.deleteOrganization)(opts),\n\t\tsetActiveOrganization: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.setActiveOrganization)(opts),\n\t\tgetFullOrganization: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.getFullOrganization)(opts),\n\t\tlistOrganizations: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.listOrganizations)(opts),\n\t\tcreateInvitation: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.createInvitation)(opts),\n\t\tcancelInvitation: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.cancelInvitation)(opts),\n\t\tacceptInvitation: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.acceptInvitation)(opts),\n\t\tgetInvitation: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.getInvitation)(opts),\n\t\trejectInvitation: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.rejectInvitation)(opts),\n\t\tlistInvitations: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.listInvitations)(opts),\n\t\tgetActiveMember: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.getActiveMember)(opts),\n\t\tcheckOrganizationSlug: (0,_routes_crud_org_mjs__WEBPACK_IMPORTED_MODULE_12__.checkOrganizationSlug)(opts),\n\t\taddMember: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.addMember)(opts),\n\t\tremoveMember: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.removeMember)(opts),\n\t\tupdateMemberRole: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.updateMemberRole)(opts),\n\t\tleaveOrganization: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.leaveOrganization)(opts),\n\t\tlistUserInvitations: (0,_routes_crud_invites_mjs__WEBPACK_IMPORTED_MODULE_10__.listUserInvitations)(opts),\n\t\tlistMembers: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.listMembers)(opts),\n\t\tgetActiveMemberRole: (0,_routes_crud_members_mjs__WEBPACK_IMPORTED_MODULE_11__.getActiveMemberRole)(opts)\n\t};\n\tconst teamSupport = opts.teams?.enabled;\n\tconst teamEndpoints = {\n\t\tcreateTeam: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.createTeam)(opts),\n\t\tlistOrganizationTeams: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.listOrganizationTeams)(opts),\n\t\tremoveTeam: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.removeTeam)(opts),\n\t\tupdateTeam: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.updateTeam)(opts),\n\t\tsetActiveTeam: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.setActiveTeam)(opts),\n\t\tlistUserTeams: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.listUserTeams)(opts),\n\t\tlistTeamMembers: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.listTeamMembers)(opts),\n\t\taddTeamMember: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.addTeamMember)(opts),\n\t\tremoveTeamMember: (0,_routes_crud_team_mjs__WEBPACK_IMPORTED_MODULE_13__.removeTeamMember)(opts)\n\t};\n\tif (teamSupport) endpoints = {\n\t\t...endpoints,\n\t\t...teamEndpoints\n\t};\n\tconst dynamicAccessControlEndpoints = {\n\t\tcreateOrgRole: (0,_routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__.createOrgRole)(opts),\n\t\tdeleteOrgRole: (0,_routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__.deleteOrgRole)(opts),\n\t\tlistOrgRoles: (0,_routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__.listOrgRoles)(opts),\n\t\tgetOrgRole: (0,_routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__.getOrgRole)(opts),\n\t\tupdateOrgRole: (0,_routes_crud_access_control_mjs__WEBPACK_IMPORTED_MODULE_9__.updateOrgRole)(opts)\n\t};\n\tif (opts.dynamicAccessControl?.enabled) endpoints = {\n\t\t...endpoints,\n\t\t...dynamicAccessControlEndpoints\n\t};\n\tconst roles = {\n\t\t..._access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultRoles,\n\t\t...opts.roles\n\t};\n\tconst teamSchema = teamSupport ? {\n\t\tteam: {\n\t\t\tmodelName: opts.schema?.team?.modelName,\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.team?.fields?.name\n\t\t\t\t},\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.team?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.team?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\tupdatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.team?.fields?.updatedAt,\n\t\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\t...opts.schema?.team?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\tteamMember: {\n\t\t\tmodelName: opts.schema?.teamMember?.modelName,\n\t\t\tfields: {\n\t\t\t\tteamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"team\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.teamMember?.fields?.teamId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.teamMember?.fields?.userId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.teamMember?.fields?.createdAt\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} : {};\n\tconst organizationRoleSchema = opts.dynamicAccessControl?.enabled ? { organizationRole: {\n\t\tfields: {\n\t\t\torganizationId: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\treferences: {\n\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\tfield: \"id\"\n\t\t\t\t},\n\t\t\t\tfieldName: opts.schema?.organizationRole?.fields?.organizationId,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\trole: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: opts.schema?.organizationRole?.fields?.role,\n\t\t\t\tindex: true\n\t\t\t},\n\t\t\tpermission: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tfieldName: opts.schema?.organizationRole?.fields?.permission\n\t\t\t},\n\t\t\tcreatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: true,\n\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date(),\n\t\t\t\tfieldName: opts.schema?.organizationRole?.fields?.createdAt\n\t\t\t},\n\t\t\tupdatedAt: {\n\t\t\t\ttype: \"date\",\n\t\t\t\trequired: false,\n\t\t\t\tfieldName: opts.schema?.organizationRole?.fields?.updatedAt,\n\t\t\t\tonUpdate: () => /* @__PURE__ */ new Date()\n\t\t\t},\n\t\t\t...opts.schema?.organizationRole?.additionalFields || {}\n\t\t},\n\t\tmodelName: opts.schema?.organizationRole?.modelName\n\t} } : {};\n\tconst schema = {\n\t\torganization: {\n\t\t\tmodelName: opts.schema?.organization?.modelName,\n\t\t\tfields: {\n\t\t\t\tname: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: opts.schema?.organization?.fields?.name\n\t\t\t\t},\n\t\t\t\tslug: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tunique: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: opts.schema?.organization?.fields?.slug,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tlogo: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.organization?.fields?.logo\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.organization?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\tmetadata: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.organization?.fields?.metadata\n\t\t\t\t},\n\t\t\t\t...opts.schema?.organization?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\t...organizationRoleSchema,\n\t\t...teamSchema,\n\t\tmember: {\n\t\t\tmodelName: opts.schema?.member?.modelName,\n\t\t\tfields: {\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.member?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\tuserId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.member?.fields?.userId,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\trole: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tdefaultValue: \"member\",\n\t\t\t\t\tfieldName: opts.schema?.member?.fields?.role\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.member?.fields?.createdAt\n\t\t\t\t},\n\t\t\t\t...opts.schema?.member?.additionalFields || {}\n\t\t\t}\n\t\t},\n\t\tinvitation: {\n\t\t\tmodelName: opts.schema?.invitation?.modelName,\n\t\t\tfields: {\n\t\t\t\torganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"organization\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.organizationId,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.email,\n\t\t\t\t\tindex: true\n\t\t\t\t},\n\t\t\t\trole: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.role\n\t\t\t\t},\n\t\t\t\t...teamSupport ? { teamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.teamId\n\t\t\t\t} } : {},\n\t\t\t\tstatus: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tsortable: true,\n\t\t\t\t\tdefaultValue: \"pending\",\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.status\n\t\t\t\t},\n\t\t\t\texpiresAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.expiresAt\n\t\t\t\t},\n\t\t\t\tcreatedAt: {\n\t\t\t\t\ttype: \"date\",\n\t\t\t\t\trequired: true,\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.createdAt,\n\t\t\t\t\tdefaultValue: () => /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tinviterId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\treferences: {\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t},\n\t\t\t\t\tfieldName: opts.schema?.invitation?.fields?.inviterId,\n\t\t\t\t\trequired: true\n\t\t\t\t},\n\t\t\t\t...opts.schema?.invitation?.additionalFields || {}\n\t\t\t}\n\t\t}\n\t};\n\treturn {\n\t\tid: \"organization\",\n\t\tendpoints: {\n\t\t\t...(0,_utils_shim_mjs__WEBPACK_IMPORTED_MODULE_5__.shimContext)(endpoints, {\n\t\t\t\torgOptions: opts,\n\t\t\t\troles,\n\t\t\t\tgetSession: async (context) => {\n\t\t\t\t\treturn await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_0__.getSessionFromCtx)(context);\n\t\t\t\t}\n\t\t\t}),\n\t\t\thasPermission: createHasPermission(opts)\n\t\t},\n\t\tschema: {\n\t\t\t...schema,\n\t\t\tsession: { fields: {\n\t\t\t\tactiveOrganizationId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.session?.fields?.activeOrganizationId\n\t\t\t\t},\n\t\t\t\t...teamSupport ? { activeTeamId: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\trequired: false,\n\t\t\t\t\tfieldName: opts.schema?.session?.fields?.activeTeamId\n\t\t\t\t} } : {}\n\t\t\t} }\n\t\t},\n\t\t$Infer: {\n\t\t\tOrganization: {},\n\t\t\tInvitation: {},\n\t\t\tMember: {},\n\t\t\tTeam: teamSupport ? {} : {},\n\t\t\tTeamMember: teamSupport ? {} : {},\n\t\t\tActiveOrganization: {}\n\t\t},\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES,\n\t\toptions: opts\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=organization.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9vcmdhbml6YXRpb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDcEM7QUFDeUI7QUFDMUI7QUFDa0I7QUFDSztBQUNEO0FBQ1c7QUFDUjtBQUNvRTtBQUMrQztBQUNaO0FBQzZCO0FBQ047QUFDNUk7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msd0NBQVEsR0FBRyxnQkFBZ0Isd0NBQVEsZUFBZSxNQUFNLHVDQUFPLEVBQUUsd0NBQVE7QUFDL0csYUFBYSx3Q0FBUSxDQUFDLHdDQUFRLElBQUksdUNBQU8sQ0FBQyx3Q0FBUTtBQUNsRCxjQUFjLDJDQUFXO0FBQ3pCLENBQUMsR0FBRyx3Q0FBUTtBQUNaLGFBQWEsMkNBQVc7QUFDeEIsY0FBYyx3Q0FBUSxDQUFDLHdDQUFRLElBQUksdUNBQU8sQ0FBQyx3Q0FBUTtBQUNuRCxDQUFDO0FBQ0Q7QUFDQSxRQUFRLDBFQUFrQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUFvQjtBQUM1QjtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsbUJBQW1CLFdBQVcsc0JBQXNCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLFdBQVc7QUFDWCxpQkFBaUI7QUFDakI7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGtCQUFrQjtBQUNsQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLHVDQUF1QyxrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQzNILHVCQUF1QiwyREFBYTtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixrREFBUSxtQkFBbUIsU0FBUyxzRUFBd0IsMkNBQTJDO0FBQ2hJLHVCQUF1QixrRUFBYTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHlFQUFrQjtBQUN4QyxzQkFBc0IseUVBQWtCO0FBQ3hDLHNCQUFzQix5RUFBa0I7QUFDeEMseUJBQXlCLDRFQUFxQjtBQUM5Qyx1QkFBdUIsMEVBQW1CO0FBQzFDLHFCQUFxQix3RUFBaUI7QUFDdEMsb0JBQW9CLDJFQUFnQjtBQUNwQyxvQkFBb0IsMkVBQWdCO0FBQ3BDLG9CQUFvQiwyRUFBZ0I7QUFDcEMsaUJBQWlCLHdFQUFhO0FBQzlCLG9CQUFvQiwyRUFBZ0I7QUFDcEMsbUJBQW1CLDBFQUFlO0FBQ2xDLG1CQUFtQiwwRUFBZTtBQUNsQyx5QkFBeUIsNEVBQXFCO0FBQzlDLGFBQWEsb0VBQVM7QUFDdEIsZ0JBQWdCLHVFQUFZO0FBQzVCLG9CQUFvQiwyRUFBZ0I7QUFDcEMscUJBQXFCLDRFQUFpQjtBQUN0Qyx1QkFBdUIsOEVBQW1CO0FBQzFDLGVBQWUsc0VBQVc7QUFDMUIsdUJBQXVCLDhFQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxjQUFjLGtFQUFVO0FBQ3hCLHlCQUF5Qiw2RUFBcUI7QUFDOUMsY0FBYyxrRUFBVTtBQUN4QixjQUFjLGtFQUFVO0FBQ3hCLGlCQUFpQixxRUFBYTtBQUM5QixpQkFBaUIscUVBQWE7QUFDOUIsbUJBQW1CLHVFQUFlO0FBQ2xDLGlCQUFpQixxRUFBYTtBQUM5QixvQkFBb0Isd0VBQWdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4RUFBYTtBQUM5QixpQkFBaUIsOEVBQWE7QUFDOUIsZ0JBQWdCLDZFQUFZO0FBQzVCLGNBQWMsMkVBQVU7QUFDeEIsaUJBQWlCLDhFQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssK0RBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLElBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDREQUFXO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwRUFBaUI7QUFDbkM7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsMEJBQTBCLElBQUk7QUFDOUIsZ0NBQWdDLElBQUk7QUFDcEM7QUFDQSxHQUFHO0FBQ0gsZ0JBQWdCLHNFQUF3QjtBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDb0M7QUFDcEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXG9yZ2FuaXphdGlvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFJvbGVzIH0gZnJvbSBcIi4vYWNjZXNzL3N0YXRlbWVudC5tanNcIjtcbmltcG9ydCBcIi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JnQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBzaGltQ29udGV4dCB9IGZyb20gXCIuLi8uLi91dGlscy9zaGltLm1qc1wiO1xuaW1wb3J0IHsgb3JnU2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9jYWxsLm1qc1wiO1xuaW1wb3J0IHsgT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBoYXNQZXJtaXNzaW9uIH0gZnJvbSBcIi4vaGFzLXBlcm1pc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVPcmdSb2xlLCBkZWxldGVPcmdSb2xlLCBnZXRPcmdSb2xlLCBsaXN0T3JnUm9sZXMsIHVwZGF0ZU9yZ1JvbGUgfSBmcm9tIFwiLi9yb3V0ZXMvY3J1ZC1hY2Nlc3MtY29udHJvbC5tanNcIjtcbmltcG9ydCB7IGFjY2VwdEludml0YXRpb24sIGNhbmNlbEludml0YXRpb24sIGNyZWF0ZUludml0YXRpb24sIGdldEludml0YXRpb24sIGxpc3RJbnZpdGF0aW9ucywgbGlzdFVzZXJJbnZpdGF0aW9ucywgcmVqZWN0SW52aXRhdGlvbiB9IGZyb20gXCIuL3JvdXRlcy9jcnVkLWludml0ZXMubWpzXCI7XG5pbXBvcnQgeyBhZGRNZW1iZXIsIGdldEFjdGl2ZU1lbWJlciwgZ2V0QWN0aXZlTWVtYmVyUm9sZSwgbGVhdmVPcmdhbml6YXRpb24sIGxpc3RNZW1iZXJzLCByZW1vdmVNZW1iZXIsIHVwZGF0ZU1lbWJlclJvbGUgfSBmcm9tIFwiLi9yb3V0ZXMvY3J1ZC1tZW1iZXJzLm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tPcmdhbml6YXRpb25TbHVnLCBjcmVhdGVPcmdhbml6YXRpb24sIGRlbGV0ZU9yZ2FuaXphdGlvbiwgZ2V0RnVsbE9yZ2FuaXphdGlvbiwgbGlzdE9yZ2FuaXphdGlvbnMsIHNldEFjdGl2ZU9yZ2FuaXphdGlvbiwgdXBkYXRlT3JnYW5pemF0aW9uIH0gZnJvbSBcIi4vcm91dGVzL2NydWQtb3JnLm1qc1wiO1xuaW1wb3J0IHsgYWRkVGVhbU1lbWJlciwgY3JlYXRlVGVhbSwgbGlzdE9yZ2FuaXphdGlvblRlYW1zLCBsaXN0VGVhbU1lbWJlcnMsIGxpc3RVc2VyVGVhbXMsIHJlbW92ZVRlYW0sIHJlbW92ZVRlYW1NZW1iZXIsIHNldEFjdGl2ZVRlYW0sIHVwZGF0ZVRlYW0gfSBmcm9tIFwiLi9yb3V0ZXMvY3J1ZC10ZWFtLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvb3JnYW5pemF0aW9uL29yZ2FuaXphdGlvbi50c1xuZnVuY3Rpb24gcGFyc2VSb2xlcyhyb2xlcykge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShyb2xlcykgPyByb2xlcy5qb2luKFwiLFwiKSA6IHJvbGVzO1xufVxuY29uc3QgY3JlYXRlSGFzUGVybWlzc2lvbkJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkgfSkuYW5kKHoudW5pb24oW3oub2JqZWN0KHtcblx0cGVybWlzc2lvbjogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSksXG5cdHBlcm1pc3Npb25zOiB6LnVuZGVmaW5lZCgpXG59KSwgei5vYmplY3Qoe1xuXHRwZXJtaXNzaW9uOiB6LnVuZGVmaW5lZCgpLFxuXHRwZXJtaXNzaW9uczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSlcbn0pXSkpO1xuY29uc3QgY3JlYXRlSGFzUGVybWlzc2lvbiA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2hhcy1wZXJtaXNzaW9uXCIsIHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdGJvZHk6IGNyZWF0ZUhhc1Blcm1pc3Npb25Cb2R5U2NoZW1hLFxuXHRcdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRtZXRhZGF0YToge1xuXHRcdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNoZWNrIGlmIHRoZSB1c2VyIGhhcyBwZXJtaXNzaW9uXCIsXG5cdFx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRwZXJtaXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwZXJtaXNzaW9uIHRvIGNoZWNrXCIsXG5cdFx0XHRcdFx0XHRcdGRlcHJlY2F0ZWQ6IHRydWVcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwZXJtaXNzaW9uczoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcGVybWlzc2lvbiB0byBjaGVja1wiXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1wicGVybWlzc2lvbnNcIl1cblx0XHRcdFx0fSB9IH0gfSxcblx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGVycm9yOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0c3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1Y2Nlc3NcIl1cblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH1cblx0XHR9XG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRjb25zdCBhY3RpdmVPcmdhbml6YXRpb25JZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkIHx8IGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0XHRpZiAoIWFjdGl2ZU9yZ2FuaXphdGlvbklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5OT19BQ1RJVkVfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHRcdHVzZXJJZDogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQ6IGFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdFx0fSk7XG5cdFx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhc1Blcm1pc3Npb24oe1xuXHRcdFx0cm9sZTogbWVtYmVyLnJvbGUsXG5cdFx0XHRvcHRpb25zLFxuXHRcdFx0cGVybWlzc2lvbnM6IGN0eC5ib2R5LnBlcm1pc3Npb25zID8/IGN0eC5ib2R5LnBlcm1pc3Npb24sXG5cdFx0XHRvcmdhbml6YXRpb25JZDogYWN0aXZlT3JnYW5pemF0aW9uSWRcblx0XHR9LCBjdHgpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRlcnJvcjogbnVsbCxcblx0XHRcdHN1Y2Nlc3M6IHJlc3VsdFxuXHRcdH0pO1xuXHR9KTtcbn07XG5mdW5jdGlvbiBvcmdhbml6YXRpb24ob3B0aW9ucykge1xuXHRjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcblx0bGV0IGVuZHBvaW50cyA9IHtcblx0XHRjcmVhdGVPcmdhbml6YXRpb246IGNyZWF0ZU9yZ2FuaXphdGlvbihvcHRzKSxcblx0XHR1cGRhdGVPcmdhbml6YXRpb246IHVwZGF0ZU9yZ2FuaXphdGlvbihvcHRzKSxcblx0XHRkZWxldGVPcmdhbml6YXRpb246IGRlbGV0ZU9yZ2FuaXphdGlvbihvcHRzKSxcblx0XHRzZXRBY3RpdmVPcmdhbml6YXRpb246IHNldEFjdGl2ZU9yZ2FuaXphdGlvbihvcHRzKSxcblx0XHRnZXRGdWxsT3JnYW5pemF0aW9uOiBnZXRGdWxsT3JnYW5pemF0aW9uKG9wdHMpLFxuXHRcdGxpc3RPcmdhbml6YXRpb25zOiBsaXN0T3JnYW5pemF0aW9ucyhvcHRzKSxcblx0XHRjcmVhdGVJbnZpdGF0aW9uOiBjcmVhdGVJbnZpdGF0aW9uKG9wdHMpLFxuXHRcdGNhbmNlbEludml0YXRpb246IGNhbmNlbEludml0YXRpb24ob3B0cyksXG5cdFx0YWNjZXB0SW52aXRhdGlvbjogYWNjZXB0SW52aXRhdGlvbihvcHRzKSxcblx0XHRnZXRJbnZpdGF0aW9uOiBnZXRJbnZpdGF0aW9uKG9wdHMpLFxuXHRcdHJlamVjdEludml0YXRpb246IHJlamVjdEludml0YXRpb24ob3B0cyksXG5cdFx0bGlzdEludml0YXRpb25zOiBsaXN0SW52aXRhdGlvbnMob3B0cyksXG5cdFx0Z2V0QWN0aXZlTWVtYmVyOiBnZXRBY3RpdmVNZW1iZXIob3B0cyksXG5cdFx0Y2hlY2tPcmdhbml6YXRpb25TbHVnOiBjaGVja09yZ2FuaXphdGlvblNsdWcob3B0cyksXG5cdFx0YWRkTWVtYmVyOiBhZGRNZW1iZXIob3B0cyksXG5cdFx0cmVtb3ZlTWVtYmVyOiByZW1vdmVNZW1iZXIob3B0cyksXG5cdFx0dXBkYXRlTWVtYmVyUm9sZTogdXBkYXRlTWVtYmVyUm9sZShvcHRzKSxcblx0XHRsZWF2ZU9yZ2FuaXphdGlvbjogbGVhdmVPcmdhbml6YXRpb24ob3B0cyksXG5cdFx0bGlzdFVzZXJJbnZpdGF0aW9uczogbGlzdFVzZXJJbnZpdGF0aW9ucyhvcHRzKSxcblx0XHRsaXN0TWVtYmVyczogbGlzdE1lbWJlcnMob3B0cyksXG5cdFx0Z2V0QWN0aXZlTWVtYmVyUm9sZTogZ2V0QWN0aXZlTWVtYmVyUm9sZShvcHRzKVxuXHR9O1xuXHRjb25zdCB0ZWFtU3VwcG9ydCA9IG9wdHMudGVhbXM/LmVuYWJsZWQ7XG5cdGNvbnN0IHRlYW1FbmRwb2ludHMgPSB7XG5cdFx0Y3JlYXRlVGVhbTogY3JlYXRlVGVhbShvcHRzKSxcblx0XHRsaXN0T3JnYW5pemF0aW9uVGVhbXM6IGxpc3RPcmdhbml6YXRpb25UZWFtcyhvcHRzKSxcblx0XHRyZW1vdmVUZWFtOiByZW1vdmVUZWFtKG9wdHMpLFxuXHRcdHVwZGF0ZVRlYW06IHVwZGF0ZVRlYW0ob3B0cyksXG5cdFx0c2V0QWN0aXZlVGVhbTogc2V0QWN0aXZlVGVhbShvcHRzKSxcblx0XHRsaXN0VXNlclRlYW1zOiBsaXN0VXNlclRlYW1zKG9wdHMpLFxuXHRcdGxpc3RUZWFtTWVtYmVyczogbGlzdFRlYW1NZW1iZXJzKG9wdHMpLFxuXHRcdGFkZFRlYW1NZW1iZXI6IGFkZFRlYW1NZW1iZXIob3B0cyksXG5cdFx0cmVtb3ZlVGVhbU1lbWJlcjogcmVtb3ZlVGVhbU1lbWJlcihvcHRzKVxuXHR9O1xuXHRpZiAodGVhbVN1cHBvcnQpIGVuZHBvaW50cyA9IHtcblx0XHQuLi5lbmRwb2ludHMsXG5cdFx0Li4udGVhbUVuZHBvaW50c1xuXHR9O1xuXHRjb25zdCBkeW5hbWljQWNjZXNzQ29udHJvbEVuZHBvaW50cyA9IHtcblx0XHRjcmVhdGVPcmdSb2xlOiBjcmVhdGVPcmdSb2xlKG9wdHMpLFxuXHRcdGRlbGV0ZU9yZ1JvbGU6IGRlbGV0ZU9yZ1JvbGUob3B0cyksXG5cdFx0bGlzdE9yZ1JvbGVzOiBsaXN0T3JnUm9sZXMob3B0cyksXG5cdFx0Z2V0T3JnUm9sZTogZ2V0T3JnUm9sZShvcHRzKSxcblx0XHR1cGRhdGVPcmdSb2xlOiB1cGRhdGVPcmdSb2xlKG9wdHMpXG5cdH07XG5cdGlmIChvcHRzLmR5bmFtaWNBY2Nlc3NDb250cm9sPy5lbmFibGVkKSBlbmRwb2ludHMgPSB7XG5cdFx0Li4uZW5kcG9pbnRzLFxuXHRcdC4uLmR5bmFtaWNBY2Nlc3NDb250cm9sRW5kcG9pbnRzXG5cdH07XG5cdGNvbnN0IHJvbGVzID0ge1xuXHRcdC4uLmRlZmF1bHRSb2xlcyxcblx0XHQuLi5vcHRzLnJvbGVzXG5cdH07XG5cdGNvbnN0IHRlYW1TY2hlbWEgPSB0ZWFtU3VwcG9ydCA/IHtcblx0XHR0ZWFtOiB7XG5cdFx0XHRtb2RlbE5hbWU6IG9wdHMuc2NoZW1hPy50ZWFtPy5tb2RlbE5hbWUsXG5cdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8udGVhbT8uZmllbGRzPy5uYW1lXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25cIixcblx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/LnRlYW0/LmZpZWxkcz8ub3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8udGVhbT8uZmllbGRzPy5jcmVhdGVkQXRcblx0XHRcdFx0fSxcblx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/LnRlYW0/LmZpZWxkcz8udXBkYXRlZEF0LFxuXHRcdFx0XHRcdG9uVXBkYXRlOiAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi5vcHRzLnNjaGVtYT8udGVhbT8uYWRkaXRpb25hbEZpZWxkcyB8fCB7fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0dGVhbU1lbWJlcjoge1xuXHRcdFx0bW9kZWxOYW1lOiBvcHRzLnNjaGVtYT8udGVhbU1lbWJlcj8ubW9kZWxOYW1lLFxuXHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdHRlYW1JZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0cmVmZXJlbmNlczoge1xuXHRcdFx0XHRcdFx0bW9kZWw6IFwidGVhbVwiLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8udGVhbU1lbWJlcj8uZmllbGRzPy50ZWFtSWQsXG5cdFx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0dXNlcklkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdHMuc2NoZW1hPy50ZWFtTWVtYmVyPy5maWVsZHM/LnVzZXJJZCxcblx0XHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8udGVhbU1lbWJlcj8uZmllbGRzPy5jcmVhdGVkQXRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSA6IHt9O1xuXHRjb25zdCBvcmdhbml6YXRpb25Sb2xlU2NoZW1hID0gb3B0cy5keW5hbWljQWNjZXNzQ29udHJvbD8uZW5hYmxlZCA/IHsgb3JnYW5pemF0aW9uUm9sZToge1xuXHRcdGZpZWxkczoge1xuXHRcdFx0b3JnYW5pemF0aW9uSWQ6IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25cIixcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvblJvbGU/LmZpZWxkcz8ub3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdGluZGV4OiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0cm9sZToge1xuXHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ub3JnYW5pemF0aW9uUm9sZT8uZmllbGRzPy5yb2xlLFxuXHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0fSxcblx0XHRcdHBlcm1pc3Npb246IHtcblx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvblJvbGU/LmZpZWxkcz8ucGVybWlzc2lvblxuXHRcdFx0fSxcblx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHR0eXBlOiBcImRhdGVcIixcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdGRlZmF1bHRWYWx1ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvblJvbGU/LmZpZWxkcz8uY3JlYXRlZEF0XG5cdFx0XHR9LFxuXHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvblJvbGU/LmZpZWxkcz8udXBkYXRlZEF0LFxuXHRcdFx0XHRvblVwZGF0ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdH0sXG5cdFx0XHQuLi5vcHRzLnNjaGVtYT8ub3JnYW5pemF0aW9uUm9sZT8uYWRkaXRpb25hbEZpZWxkcyB8fCB7fVxuXHRcdH0sXG5cdFx0bW9kZWxOYW1lOiBvcHRzLnNjaGVtYT8ub3JnYW5pemF0aW9uUm9sZT8ubW9kZWxOYW1lXG5cdH0gfSA6IHt9O1xuXHRjb25zdCBzY2hlbWEgPSB7XG5cdFx0b3JnYW5pemF0aW9uOiB7XG5cdFx0XHRtb2RlbE5hbWU6IG9wdHMuc2NoZW1hPy5vcmdhbml6YXRpb24/Lm1vZGVsTmFtZSxcblx0XHRcdGZpZWxkczoge1xuXHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRzb3J0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdHMuc2NoZW1hPy5vcmdhbml6YXRpb24/LmZpZWxkcz8ubmFtZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzbHVnOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHR1bmlxdWU6IHRydWUsXG5cdFx0XHRcdFx0c29ydGFibGU6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ub3JnYW5pemF0aW9uPy5maWVsZHM/LnNsdWcsXG5cdFx0XHRcdFx0aW5kZXg6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0bG9nbzoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvbj8uZmllbGRzPy5sb2dvXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvbj8uZmllbGRzPy5jcmVhdGVkQXRcblx0XHRcdFx0fSxcblx0XHRcdFx0bWV0YWRhdGE6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdHMuc2NoZW1hPy5vcmdhbml6YXRpb24/LmZpZWxkcz8ubWV0YWRhdGFcblx0XHRcdFx0fSxcblx0XHRcdFx0Li4ub3B0cy5zY2hlbWE/Lm9yZ2FuaXphdGlvbj8uYWRkaXRpb25hbEZpZWxkcyB8fCB7fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Li4ub3JnYW5pemF0aW9uUm9sZVNjaGVtYSxcblx0XHQuLi50ZWFtU2NoZW1hLFxuXHRcdG1lbWJlcjoge1xuXHRcdFx0bW9kZWxOYW1lOiBvcHRzLnNjaGVtYT8ubWVtYmVyPy5tb2RlbE5hbWUsXG5cdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ubWVtYmVyPy5maWVsZHM/Lm9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRcdGluZGV4OiB0cnVlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVzZXJJZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ubWVtYmVyPy5maWVsZHM/LnVzZXJJZCxcblx0XHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyb2xlOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRzb3J0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6IFwibWVtYmVyXCIsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ubWVtYmVyPy5maWVsZHM/LnJvbGVcblx0XHRcdFx0fSxcblx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0dHlwZTogXCJkYXRlXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8ubWVtYmVyPy5maWVsZHM/LmNyZWF0ZWRBdFxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi5vcHRzLnNjaGVtYT8ubWVtYmVyPy5hZGRpdGlvbmFsRmllbGRzIHx8IHt9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRpbnZpdGF0aW9uOiB7XG5cdFx0XHRtb2RlbE5hbWU6IG9wdHMuc2NoZW1hPy5pbnZpdGF0aW9uPy5tb2RlbE5hbWUsXG5cdFx0XHRmaWVsZHM6IHtcblx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8uaW52aXRhdGlvbj8uZmllbGRzPy5vcmdhbml6YXRpb25JZCxcblx0XHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0c29ydGFibGU6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8uaW52aXRhdGlvbj8uZmllbGRzPy5lbWFpbCxcblx0XHRcdFx0XHRpbmRleDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyb2xlOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0c29ydGFibGU6IHRydWUsXG5cdFx0XHRcdFx0ZmllbGROYW1lOiBvcHRzLnNjaGVtYT8uaW52aXRhdGlvbj8uZmllbGRzPy5yb2xlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdC4uLnRlYW1TdXBwb3J0ID8geyB0ZWFtSWQ6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRzb3J0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdHMuc2NoZW1hPy5pbnZpdGF0aW9uPy5maWVsZHM/LnRlYW1JZFxuXHRcdFx0XHR9IH0gOiB7fSxcblx0XHRcdFx0c3RhdHVzOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRzb3J0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6IFwicGVuZGluZ1wiLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lmludml0YXRpb24/LmZpZWxkcz8uc3RhdHVzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lmludml0YXRpb24/LmZpZWxkcz8uZXhwaXJlc0F0XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/Lmludml0YXRpb24/LmZpZWxkcz8uY3JlYXRlZEF0LFxuXHRcdFx0XHRcdGRlZmF1bHRWYWx1ZTogKCkgPT4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0fSxcblx0XHRcdFx0aW52aXRlcklkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmaWVsZE5hbWU6IG9wdHMuc2NoZW1hPy5pbnZpdGF0aW9uPy5maWVsZHM/Lmludml0ZXJJZCxcblx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQuLi5vcHRzLnNjaGVtYT8uaW52aXRhdGlvbj8uYWRkaXRpb25hbEZpZWxkcyB8fCB7fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvcmdhbml6YXRpb25cIixcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdC4uLnNoaW1Db250ZXh0KGVuZHBvaW50cywge1xuXHRcdFx0XHRvcmdPcHRpb25zOiBvcHRzLFxuXHRcdFx0XHRyb2xlcyxcblx0XHRcdFx0Z2V0U2Vzc2lvbjogYXN5bmMgKGNvbnRleHQpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY29udGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdFx0aGFzUGVybWlzc2lvbjogY3JlYXRlSGFzUGVybWlzc2lvbihvcHRzKVxuXHRcdH0sXG5cdFx0c2NoZW1hOiB7XG5cdFx0XHQuLi5zY2hlbWEsXG5cdFx0XHRzZXNzaW9uOiB7IGZpZWxkczoge1xuXHRcdFx0XHRhY3RpdmVPcmdhbml6YXRpb25JZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/LnNlc3Npb24/LmZpZWxkcz8uYWN0aXZlT3JnYW5pemF0aW9uSWRcblx0XHRcdFx0fSxcblx0XHRcdFx0Li4udGVhbVN1cHBvcnQgPyB7IGFjdGl2ZVRlYW1JZDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdGZpZWxkTmFtZTogb3B0cy5zY2hlbWE/LnNlc3Npb24/LmZpZWxkcz8uYWN0aXZlVGVhbUlkXG5cdFx0XHRcdH0gfSA6IHt9XG5cdFx0XHR9IH1cblx0XHR9LFxuXHRcdCRJbmZlcjoge1xuXHRcdFx0T3JnYW5pemF0aW9uOiB7fSxcblx0XHRcdEludml0YXRpb246IHt9LFxuXHRcdFx0TWVtYmVyOiB7fSxcblx0XHRcdFRlYW06IHRlYW1TdXBwb3J0ID8ge30gOiB7fSxcblx0XHRcdFRlYW1NZW1iZXI6IHRlYW1TdXBwb3J0ID8ge30gOiB7fSxcblx0XHRcdEFjdGl2ZU9yZ2FuaXphdGlvbjoge31cblx0XHR9LFxuXHRcdCRFUlJPUl9DT0RFUzogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLFxuXHRcdG9wdGlvbnM6IG9wdHNcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvcmdhbml6YXRpb24sIHBhcnNlUm9sZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yZ2FuaXphdGlvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/permission.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/permission.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheAllRoles: () => (/* binding */ cacheAllRoles),\n/* harmony export */   hasPermissionFn: () => (/* binding */ hasPermissionFn)\n/* harmony export */ });\n//#region src/plugins/organization/permission.ts\nconst hasPermissionFn = (input, acRoles) => {\n\tif (!input.permissions && !input.permission) return false;\n\tconst roles = input.role.split(\",\");\n\tconst creatorRole = input.options.creatorRole || \"owner\";\n\tconst isCreator = roles.includes(creatorRole);\n\tconst allowCreatorsAllPermissions = input.allowCreatorAllPermissions || false;\n\tif (isCreator && allowCreatorsAllPermissions) return true;\n\tfor (const role of roles) if ((acRoles[role]?.authorize(input.permissions ?? input.permission))?.success) return true;\n\treturn false;\n};\nconst cacheAllRoles = /* @__PURE__ */ new Map();\n\n//#endregion\n\n//# sourceMappingURL=permission.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9wZXJtaXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQztBQUMxQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxccGVybWlzc2lvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9wZXJtaXNzaW9uLnRzXG5jb25zdCBoYXNQZXJtaXNzaW9uRm4gPSAoaW5wdXQsIGFjUm9sZXMpID0+IHtcblx0aWYgKCFpbnB1dC5wZXJtaXNzaW9ucyAmJiAhaW5wdXQucGVybWlzc2lvbikgcmV0dXJuIGZhbHNlO1xuXHRjb25zdCByb2xlcyA9IGlucHV0LnJvbGUuc3BsaXQoXCIsXCIpO1xuXHRjb25zdCBjcmVhdG9yUm9sZSA9IGlucHV0Lm9wdGlvbnMuY3JlYXRvclJvbGUgfHwgXCJvd25lclwiO1xuXHRjb25zdCBpc0NyZWF0b3IgPSByb2xlcy5pbmNsdWRlcyhjcmVhdG9yUm9sZSk7XG5cdGNvbnN0IGFsbG93Q3JlYXRvcnNBbGxQZXJtaXNzaW9ucyA9IGlucHV0LmFsbG93Q3JlYXRvckFsbFBlcm1pc3Npb25zIHx8IGZhbHNlO1xuXHRpZiAoaXNDcmVhdG9yICYmIGFsbG93Q3JlYXRvcnNBbGxQZXJtaXNzaW9ucykgcmV0dXJuIHRydWU7XG5cdGZvciAoY29uc3Qgcm9sZSBvZiByb2xlcykgaWYgKChhY1JvbGVzW3JvbGVdPy5hdXRob3JpemUoaW5wdXQucGVybWlzc2lvbnMgPz8gaW5wdXQucGVybWlzc2lvbikpPy5zdWNjZXNzKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IGNhY2hlQWxsUm9sZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhY2hlQWxsUm9sZXMsIGhhc1Blcm1pc3Npb25GbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVybWlzc2lvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/permission.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-access-control.mjs":
/*!*******************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/routes/crud-access-control.mjs ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createOrgRole: () => (/* binding */ createOrgRole),\n/* harmony export */   deleteOrgRole: () => (/* binding */ deleteOrgRole),\n/* harmony export */   getOrgRole: () => (/* binding */ getOrgRole),\n/* harmony export */   listOrgRoles: () => (/* binding */ listOrgRoles),\n/* harmony export */   updateOrgRole: () => (/* binding */ updateOrgRole)\n/* harmony export */ });\n/* harmony import */ var _db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/routes/crud-access-control.ts\nconst normalizeRoleName = (role) => role.toLowerCase();\nconst DEFAULT_MAXIMUM_ROLES_PER_ORGANIZATION = Number.POSITIVE_INFINITY;\nconst getAdditionalFields = (options, shouldBePartial = false) => {\n\tconst additionalFields = options?.schema?.organizationRole?.additionalFields || {};\n\tif (shouldBePartial) for (const key in additionalFields) additionalFields[key].required = false;\n\treturn {\n\t\tadditionalFieldsSchema: (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\t\tfields: additionalFields,\n\t\t\tisClientSide: true\n\t\t}),\n\t\t$AdditionalFields: {},\n\t\t$ReturnAdditionalFields: {}\n\t};\n};\nconst baseCreateOrgRoleSchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The id of the organization to create the role in. If not provided, the user's active organization will be used.\" }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_7__.string().meta({ description: \"The name of the role to create\" }),\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_7__.record(zod__WEBPACK_IMPORTED_MODULE_7__.string(), zod__WEBPACK_IMPORTED_MODULE_7__.array(zod__WEBPACK_IMPORTED_MODULE_7__.string())).meta({ description: \"The permission to assign to the role\" })\n});\nconst createOrgRole = (options) => {\n\tconst { additionalFieldsSchema, $AdditionalFields, $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/organization/create-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: baseCreateOrgRoleSchema.safeExtend({ additionalFields: zod__WEBPACK_IMPORTED_MODULE_7__.object({ ...additionalFieldsSchema.shape }).optional() }),\n\t\tmetadata: { $Infer: { body: {} } },\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_3__.orgSessionMiddleware]\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tlet roleName = ctx.body.role;\n\t\tconst permission = ctx.body.permission;\n\t\tconst additionalFields = ctx.body.additionalFields;\n\t\tconst ac = options.ac;\n\t\tif (!ac) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.`, `\\nPlease refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"NOT_IMPLEMENTED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.MISSING_AC_INSTANCE });\n\t\t}\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to create a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE });\n\t\t}\n\t\troleName = normalizeRoleName(roleName);\n\t\tawait checkIfRoleNameIsTakenByPreDefinedRole({\n\t\t\trole: roleName,\n\t\t\torganizationId,\n\t\t\toptions,\n\t\t\tctx\n\t\t});\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to create a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"create\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to create a role. If this is unexpected, please make sure the role associated to that member has the \"ac\" resource with the \"create\" permission.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE });\n\t\t}\n\t\tconst maximumRolesPerOrganization = typeof options.dynamicAccessControl?.maximumRolesPerOrganization === \"function\" ? await options.dynamicAccessControl.maximumRolesPerOrganization(organizationId) : options.dynamicAccessControl?.maximumRolesPerOrganization ?? DEFAULT_MAXIMUM_ROLES_PER_ORGANIZATION;\n\t\tconst rolesInDB = await ctx.context.adapter.count({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (rolesInDB >= maximumRolesPerOrganization) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] Failed to create a new role, the organization has too many roles. Maximum allowed roles is ${maximumRolesPerOrganization}.`, {\n\t\t\t\torganizationId,\n\t\t\t\tmaximumRolesPerOrganization,\n\t\t\t\trolesInDB\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.TOO_MANY_ROLES });\n\t\t}\n\t\tawait checkForInvalidResources({\n\t\t\tac,\n\t\t\tctx,\n\t\t\tpermission\n\t\t});\n\t\tawait checkIfMemberHasPermission({\n\t\t\tctx,\n\t\t\tmember,\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissionRequired: permission,\n\t\t\tuser,\n\t\t\taction: \"create\"\n\t\t});\n\t\tawait checkIfRoleNameIsTakenByRoleInDB({\n\t\t\tctx,\n\t\t\torganizationId,\n\t\t\trole: roleName\n\t\t});\n\t\tconst newRole = ac.newRole(permission);\n\t\tconst data = {\n\t\t\t...await ctx.context.adapter.create({\n\t\t\t\tmodel: \"organizationRole\",\n\t\t\t\tdata: {\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\torganizationId,\n\t\t\t\t\tpermission: JSON.stringify(permission),\n\t\t\t\t\trole: roleName,\n\t\t\t\t\t...additionalFields\n\t\t\t\t}\n\t\t\t}),\n\t\t\tpermission\n\t\t};\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\troleData: data,\n\t\t\tstatements: newRole.statements\n\t\t});\n\t});\n};\nconst deleteOrgRoleBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The id of the organization to create the role in. If not provided, the user's active organization will be used.\" }) }).and(zod__WEBPACK_IMPORTED_MODULE_7__.union([zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleName: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The name of the role to delete\" }) }), zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleId: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The id of the role to delete\" }) })]));\nconst deleteOrgRole = (options) => {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/organization/delete-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: deleteOrgRoleBodySchema,\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_3__.orgSessionMiddleware],\n\t\tmetadata: { $Infer: { body: {} } }\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to delete a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to delete a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"delete\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to delete a role. If this is unexpected, please make sure the role associated to that member has the \"ac\" resource with the \"delete\" permission.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE });\n\t\t}\n\t\tif (ctx.body.roleName) {\n\t\t\tconst roleName = ctx.body.roleName;\n\t\t\tconst defaultRoles = options.roles ? Object.keys(options.roles) : [\n\t\t\t\t\"owner\",\n\t\t\t\t\"admin\",\n\t\t\t\t\"member\"\n\t\t\t];\n\t\t\tif (defaultRoles.includes(roleName)) {\n\t\t\t\tctx.context.logger.error(`[Dynamic Access Control] Cannot delete a pre-defined role.`, {\n\t\t\t\t\troleName,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tdefaultRoles\n\t\t\t\t});\n\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.CANNOT_DELETE_A_PRE_DEFINED_ROLE });\n\t\t\t}\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.body.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.body.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.body.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.body.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request body.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tconst existingRoleInDB = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!existingRoleInDB) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.body ? { roleName: ctx.body.roleName } : { roleId: ctx.body.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\texistingRoleInDB.permission = JSON.parse(existingRoleInDB.permission);\n\t\tawait ctx.context.adapter.delete({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\treturn ctx.json({ success: true });\n\t});\n};\nconst listOrgRolesQuerySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The id of the organization to list roles for. If not provided, the user's active organization will be used.\" }) }).optional();\nconst listOrgRoles = (options) => {\n\tconst { $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/organization/list-roles\", {\n\t\tmethod: \"GET\",\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_3__.orgSessionMiddleware],\n\t\tquery: listOrgRolesQuerySchema\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.query?.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to list roles. Either set an active org id, or pass an organizationId in the request query.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to list roles.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"read\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to list roles.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE });\n\t\t}\n\t\tlet roles = await ctx.context.adapter.findMany({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\troles = roles.map((x) => ({\n\t\t\t...x,\n\t\t\tpermission: JSON.parse(x.permission)\n\t\t}));\n\t\treturn ctx.json(roles);\n\t});\n};\nconst getOrgRoleQuerySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The id of the organization to read a role for. If not provided, the user's active organization will be used.\" }) }).and(zod__WEBPACK_IMPORTED_MODULE_7__.union([zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleName: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The name of the role to read\" }) }), zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleId: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The id of the role to read\" }) })])).optional();\nconst getOrgRole = (options) => {\n\tconst { $ReturnAdditionalFields } = getAdditionalFields(options, false);\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/organization/get-role\", {\n\t\tmethod: \"GET\",\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_3__.orgSessionMiddleware],\n\t\tquery: getOrgRoleQuerySchema,\n\t\tmetadata: { $Infer: { query: {} } }\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst organizationId = ctx.query?.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to read a role. Either set an active org id, or pass an organizationId in the request query.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to read a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { ac: [\"read\"] },\n\t\t\trole: member.role\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to read a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId,\n\t\t\t\trole: member.role\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE });\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.query.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.query.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.query.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.query.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request query.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tconst role = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!role) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.query ? { roleName: ctx.query.roleName } : { roleId: ctx.query.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\trole.permission = JSON.parse(role.permission);\n\t\treturn ctx.json(role);\n\t});\n};\nconst roleNameOrIdSchema = zod__WEBPACK_IMPORTED_MODULE_7__.union([zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleName: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The name of the role to update\" }) }), zod__WEBPACK_IMPORTED_MODULE_7__.object({ roleId: zod__WEBPACK_IMPORTED_MODULE_7__.string().nonempty().meta({ description: \"The id of the role to update\" }) })]);\nconst updateOrgRole = (options) => {\n\tconst { additionalFieldsSchema, $AdditionalFields, $ReturnAdditionalFields } = getAdditionalFields(options, true);\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/organization/update-role\", {\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\t\torganizationId: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The id of the organization to update the role in. If not provided, the user's active organization will be used.\" }),\n\t\t\tdata: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\t\t\tpermission: zod__WEBPACK_IMPORTED_MODULE_7__.record(zod__WEBPACK_IMPORTED_MODULE_7__.string(), zod__WEBPACK_IMPORTED_MODULE_7__.array(zod__WEBPACK_IMPORTED_MODULE_7__.string())).optional().meta({ description: \"The permission to update the role with\" }),\n\t\t\t\troleName: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional().meta({ description: \"The name of the role to update\" }),\n\t\t\t\t...additionalFieldsSchema.shape\n\t\t\t})\n\t\t}).and(roleNameOrIdSchema),\n\t\tmetadata: { $Infer: { body: {} } },\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_3__.orgSessionMiddleware]\n\t}, async (ctx) => {\n\t\tconst { session, user } = ctx.context.session;\n\t\tconst ac = options.ac;\n\t\tif (!ac) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.`, `\\nPlease refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"NOT_IMPLEMENTED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.MISSING_AC_INSTANCE });\n\t\t}\n\t\tconst organizationId = ctx.body.organizationId ?? session.activeOrganizationId;\n\t\tif (!organizationId) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The session is missing an active organization id to update a role. Either set an active org id, or pass an organizationId in the request body.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\t}\n\t\tconst member = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, {\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: user.id,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}]\n\t\t});\n\t\tif (!member) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not a member of the organization to update a role.`, {\n\t\t\t\tuserId: user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\t}\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\trole: member.role,\n\t\t\tpermissions: { ac: [\"update\"] }\n\t\t}, ctx)) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The user is not permitted to update a role.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE });\n\t\t}\n\t\tlet condition;\n\t\tif (ctx.body.roleName) condition = {\n\t\t\tfield: \"role\",\n\t\t\tvalue: ctx.body.roleName,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse if (ctx.body.roleId) condition = {\n\t\t\tfield: \"id\",\n\t\t\tvalue: ctx.body.roleId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t};\n\t\telse {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id is not provided in the request body.`);\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\tconst role = await ctx.context.adapter.findOne({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition]\n\t\t});\n\t\tif (!role) {\n\t\t\tctx.context.logger.error(`[Dynamic Access Control] The role name/id does not exist in the database.`, {\n\t\t\t\t...\"roleName\" in ctx.body ? { roleName: ctx.body.roleName } : { roleId: ctx.body.roleId },\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND });\n\t\t}\n\t\trole.permission = role.permission ? JSON.parse(role.permission) : void 0;\n\t\tconst { permission: _, roleName: __, ...additionalFields } = ctx.body.data;\n\t\tconst updateData = { ...additionalFields };\n\t\tif (ctx.body.data.permission) {\n\t\t\tconst newPermission = ctx.body.data.permission;\n\t\t\tawait checkForInvalidResources({\n\t\t\t\tac,\n\t\t\t\tctx,\n\t\t\t\tpermission: newPermission\n\t\t\t});\n\t\t\tawait checkIfMemberHasPermission({\n\t\t\t\tctx,\n\t\t\t\tmember,\n\t\t\t\toptions,\n\t\t\t\torganizationId,\n\t\t\t\tpermissionRequired: newPermission,\n\t\t\t\tuser,\n\t\t\t\taction: \"update\"\n\t\t\t});\n\t\t\tupdateData.permission = newPermission;\n\t\t}\n\t\tif (ctx.body.data.roleName) {\n\t\t\tlet newRoleName = ctx.body.data.roleName;\n\t\t\tnewRoleName = normalizeRoleName(newRoleName);\n\t\t\tawait checkIfRoleNameIsTakenByPreDefinedRole({\n\t\t\t\trole: newRoleName,\n\t\t\t\torganizationId,\n\t\t\t\toptions,\n\t\t\t\tctx\n\t\t\t});\n\t\t\tawait checkIfRoleNameIsTakenByRoleInDB({\n\t\t\t\trole: newRoleName,\n\t\t\t\torganizationId,\n\t\t\t\tctx\n\t\t\t});\n\t\t\tupdateData.role = newRoleName;\n\t\t}\n\t\tconst update = {\n\t\t\t...updateData,\n\t\t\t...updateData.permission ? { permission: JSON.stringify(updateData.permission) } : {}\n\t\t};\n\t\tawait ctx.context.adapter.update({\n\t\t\tmodel: \"organizationRole\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId,\n\t\t\t\toperator: \"eq\",\n\t\t\t\tconnector: \"AND\"\n\t\t\t}, condition],\n\t\t\tupdate\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\troleData: {\n\t\t\t\t...role,\n\t\t\t\t...update,\n\t\t\t\tpermission: updateData.permission || role.permission || null\n\t\t\t}\n\t\t});\n\t});\n};\nasync function checkForInvalidResources({ ac, ctx, permission }) {\n\tconst validResources = Object.keys(ac.statements);\n\tconst providedResources = Object.keys(permission);\n\tif (providedResources.some((r) => !validResources.includes(r))) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The provided permission includes an invalid resource.`, {\n\t\t\tprovidedResources,\n\t\t\tvalidResources\n\t\t});\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.INVALID_RESOURCE });\n\t}\n}\nasync function checkIfMemberHasPermission({ ctx, permissionRequired: permission, options, organizationId, member, user, action }) {\n\tconst hasNecessaryPermissions = [];\n\tconst permissionEntries = Object.entries(permission);\n\tfor await (const [resource, permissions] of permissionEntries) for await (const perm of permissions) hasNecessaryPermissions.push({\n\t\tresource: { [resource]: [perm] },\n\t\thasPermission: await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_5__.hasPermission)({\n\t\t\toptions,\n\t\t\torganizationId,\n\t\t\tpermissions: { [resource]: [perm] },\n\t\t\tuseMemoryCache: true,\n\t\t\trole: member.role\n\t\t}, ctx)\n\t});\n\tconst missingPermissions = hasNecessaryPermissions.filter((x) => x.hasPermission === false).map((x) => {\n\t\tconst key = Object.keys(x.resource)[0];\n\t\treturn `${key}:${x.resource[key][0]}`;\n\t});\n\tif (missingPermissions.length > 0) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The user is missing permissions necessary to ${action} a role with those set of permissions.\\n`, {\n\t\t\tuserId: user.id,\n\t\t\torganizationId,\n\t\t\trole: member.role,\n\t\t\tmissingPermissions\n\t\t});\n\t\tlet errorMessage;\n\t\tif (action === \"create\") errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE;\n\t\telse if (action === \"update\") errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE;\n\t\telse if (action === \"delete\") errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE;\n\t\telse if (action === \"read\") errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE;\n\t\telse if (action === \"list\") errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE;\n\t\telse errorMessage = _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE;\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"FORBIDDEN\", {\n\t\t\tmessage: errorMessage,\n\t\t\tmissingPermissions\n\t\t});\n\t}\n}\nasync function checkIfRoleNameIsTakenByPreDefinedRole({ options, organizationId, role, ctx }) {\n\tconst defaultRoles = options.roles ? Object.keys(options.roles) : [\n\t\t\"owner\",\n\t\t\"admin\",\n\t\t\"member\"\n\t];\n\tif (defaultRoles.includes(role)) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The role name \"${role}\" is already taken by a pre-defined role.`, {\n\t\t\trole,\n\t\t\torganizationId,\n\t\t\tdefaultRoles\n\t\t});\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NAME_IS_ALREADY_TAKEN });\n\t}\n}\nasync function checkIfRoleNameIsTakenByRoleInDB({ organizationId, role, ctx }) {\n\tif (await ctx.context.adapter.findOne({\n\t\tmodel: \"organizationRole\",\n\t\twhere: [{\n\t\t\tfield: \"organizationId\",\n\t\t\tvalue: organizationId,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t}, {\n\t\t\tfield: \"role\",\n\t\t\tvalue: role,\n\t\t\toperator: \"eq\",\n\t\t\tconnector: \"AND\"\n\t\t}]\n\t})) {\n\t\tctx.context.logger.error(`[Dynamic Access Control] The role name \"${role}\" is already taken by a role in the database.`, {\n\t\t\trole,\n\t\t\torganizationId\n\t\t});\n\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_4__.ORGANIZATION_ERROR_CODES.ROLE_NAME_IS_ALREADY_TAKEN });\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=crud-access-control.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1hY2Nlc3MtY29udHJvbC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFxRDtBQUN0QjtBQUNtQjtBQUNDO0FBQ1c7QUFDUjtBQUM3QjtBQUNrQzs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQVc7QUFDckM7QUFDQTtBQUNBLEdBQUc7QUFDSCx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHVDQUFRO0FBQ3hDLGlCQUFpQix1Q0FBUSxxQkFBcUIsZ0lBQWdJO0FBQzlLLE9BQU8sdUNBQVEsVUFBVSwrQ0FBK0M7QUFDeEUsYUFBYSx1Q0FBUSxDQUFDLHVDQUFRLElBQUksc0NBQU8sQ0FBQyx1Q0FBUSxZQUFZLHFEQUFxRDtBQUNuSCxDQUFDO0FBQ0Q7QUFDQSxTQUFTLHFFQUFxRTtBQUM5RSxRQUFRLHlFQUFrQjtBQUMxQjtBQUNBLDZDQUE2QyxrQkFBa0IsdUNBQVEsR0FBRyxpQ0FBaUMsY0FBYztBQUN6SCxjQUFjLFVBQVUsWUFBWTtBQUNwQztBQUNBLFFBQVEsMkRBQW9CO0FBQzVCLEVBQUU7QUFDRixVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLHNCQUFzQixTQUFTLHNFQUF3QixzQkFBc0I7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3QixrREFBa0Q7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRDQUE0QztBQUNsSDtBQUNBLGFBQWEsa0VBQWE7QUFDMUI7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsdUNBQXVDO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxtSkFBbUosNEJBQTRCO0FBQy9LO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQkFBaUI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBLGdDQUFnQyx1Q0FBUSxHQUFHLGdCQUFnQix1Q0FBUSxxQkFBcUIsZ0lBQWdJLEdBQUcsTUFBTSxzQ0FBTyxFQUFFLHVDQUFRLEdBQUcsVUFBVSx1Q0FBUSxxQkFBcUIsK0NBQStDLEdBQUcsR0FBRyx1Q0FBUSxHQUFHLFFBQVEsdUNBQVEscUJBQXFCLDZDQUE2QyxHQUFHO0FBQ2piO0FBQ0EsUUFBUSx5RUFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBb0I7QUFDNUIsY0FBYyxVQUFVO0FBQ3hCLEVBQUU7QUFDRixVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQ2xIO0FBQ0EsYUFBYSxrRUFBYTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixhQUFhLG9EQUFRLGdCQUFnQixTQUFTLHNFQUF3Qix1Q0FBdUM7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsY0FBYyxvREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUNBQW1DO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQkFBaUI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLGtDQUFrQyw4QkFBOEIsSUFBSSx5QkFBeUI7QUFDN0Y7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsaUJBQWlCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsb0JBQW9CLGVBQWU7QUFDbkMsRUFBRTtBQUNGO0FBQ0EsZ0NBQWdDLHVDQUFRLEdBQUcsZ0JBQWdCLHVDQUFRLHFCQUFxQiw0SEFBNEgsR0FBRztBQUN2TjtBQUNBLFNBQVMsMEJBQTBCO0FBQ25DLFFBQVEseUVBQWtCO0FBQzFCO0FBQ0E7QUFDQSxRQUFRLDJEQUFvQjtBQUM1QjtBQUNBLEVBQUU7QUFDRixVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQ2xIO0FBQ0EsYUFBYSxrRUFBYTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IscUNBQXFDO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLDhCQUE4Qix1Q0FBUSxHQUFHLGdCQUFnQix1Q0FBUSxxQkFBcUIsNkhBQTZILEdBQUcsTUFBTSxzQ0FBTyxFQUFFLHVDQUFRLEdBQUcsVUFBVSx1Q0FBUSxxQkFBcUIsNkNBQTZDLEdBQUcsR0FBRyx1Q0FBUSxHQUFHLFFBQVEsdUNBQVEscUJBQXFCLDJDQUEyQyxHQUFHO0FBQ3hhO0FBQ0EsU0FBUywwQkFBMEI7QUFDbkMsUUFBUSx5RUFBa0I7QUFDMUI7QUFDQTtBQUNBLFFBQVEsMkRBQW9CO0FBQzVCO0FBQ0EsY0FBYyxVQUFVO0FBQ3hCLEVBQUU7QUFDRixVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQ2xIO0FBQ0EsYUFBYSxrRUFBYTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osYUFBYSxvREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IscUNBQXFDO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsaUJBQWlCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxtQ0FBbUMsK0JBQStCLElBQUksMEJBQTBCO0FBQ2hHO0FBQ0EsSUFBSTtBQUNKLGFBQWEsb0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGlCQUFpQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwyQkFBMkIsc0NBQU8sRUFBRSx1Q0FBUSxHQUFHLFVBQVUsdUNBQVEscUJBQXFCLCtDQUErQyxHQUFHLEdBQUcsdUNBQVEsR0FBRyxRQUFRLHVDQUFRLHFCQUFxQiw2Q0FBNkMsR0FBRztBQUMzTztBQUNBLFNBQVMscUVBQXFFO0FBQzlFLFFBQVEseUVBQWtCO0FBQzFCO0FBQ0EsUUFBUSx1Q0FBUTtBQUNoQixtQkFBbUIsdUNBQVEscUJBQXFCLGdJQUFnSTtBQUNoTCxTQUFTLHVDQUFRO0FBQ2pCLGdCQUFnQix1Q0FBUSxDQUFDLHVDQUFRLElBQUksc0NBQU8sQ0FBQyx1Q0FBUSx1QkFBdUIsdURBQXVEO0FBQ25JLGNBQWMsdUNBQVEscUJBQXFCLCtDQUErQztBQUMxRjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsY0FBYyxVQUFVLFlBQVk7QUFDcEM7QUFDQSxRQUFRLDJEQUFvQjtBQUM1QixFQUFFO0FBQ0YsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUSxzQkFBc0IsU0FBUyxzRUFBd0Isc0JBQXNCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRDQUE0QztBQUNsSDtBQUNBLGFBQWEsa0VBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLEdBQUc7QUFDSDtBQUNBLGFBQWEsb0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLHVDQUF1QztBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGlCQUFpQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0Esa0NBQWtDLDhCQUE4QixJQUFJLHlCQUF5QjtBQUM3RjtBQUNBLElBQUk7QUFDSixhQUFhLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQkFBaUI7QUFDekY7QUFDQTtBQUNBLFVBQVUsbURBQW1EO0FBQzdELHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvREFBb0Q7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSwwQ0FBMEMscUJBQXFCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3QixtQkFBbUI7QUFDMUY7QUFDQTtBQUNBLDRDQUE0QyxvRkFBb0Y7QUFDaEk7QUFDQTtBQUNBO0FBQ0EsY0FBYyxvQkFBb0I7QUFDbEMsdUJBQXVCLGtFQUFhO0FBQ3BDO0FBQ0E7QUFDQSxrQkFBa0Isb0JBQW9CO0FBQ3RDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQSxZQUFZLElBQUksR0FBRyxtQkFBbUI7QUFDdEMsRUFBRTtBQUNGO0FBQ0Esb0dBQW9HLFFBQVE7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwwQ0FBMEMsc0VBQXdCO0FBQ2xFLCtDQUErQyxzRUFBd0I7QUFDdkUsK0NBQStDLHNFQUF3QjtBQUN2RSw2Q0FBNkMsc0VBQXdCO0FBQ3JFLDZDQUE2QyxzRUFBd0I7QUFDckUsc0JBQXNCLHNFQUF3QjtBQUM5QyxZQUFZLG9EQUFRO0FBQ3BCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHdEQUF3RCxvQ0FBb0M7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLEtBQUs7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksb0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLDZCQUE2QjtBQUNwRztBQUNBO0FBQ0Esa0RBQWtELDJCQUEyQjtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Ysc0VBQXNFLEtBQUs7QUFDM0U7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9EQUFRLGtCQUFrQixTQUFTLHNFQUF3Qiw2QkFBNkI7QUFDcEc7QUFDQTs7QUFFQTtBQUNpRjtBQUNqRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxccm91dGVzXFxjcnVkLWFjY2Vzcy1jb250cm9sLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuLi8uLi8uLi9kYi90by16b2QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG9yZ1Nlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uL2NhbGwubWpzXCI7XG5pbXBvcnQgeyBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMgfSBmcm9tIFwiLi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBoYXNQZXJtaXNzaW9uIH0gZnJvbSBcIi4uL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vcmdhbml6YXRpb24vcm91dGVzL2NydWQtYWNjZXNzLWNvbnRyb2wudHNcbmNvbnN0IG5vcm1hbGl6ZVJvbGVOYW1lID0gKHJvbGUpID0+IHJvbGUudG9Mb3dlckNhc2UoKTtcbmNvbnN0IERFRkFVTFRfTUFYSU1VTV9ST0xFU19QRVJfT1JHQU5JWkFUSU9OID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuY29uc3QgZ2V0QWRkaXRpb25hbEZpZWxkcyA9IChvcHRpb25zLCBzaG91bGRCZVBhcnRpYWwgPSBmYWxzZSkgPT4ge1xuXHRjb25zdCBhZGRpdGlvbmFsRmllbGRzID0gb3B0aW9ucz8uc2NoZW1hPy5vcmdhbml6YXRpb25Sb2xlPy5hZGRpdGlvbmFsRmllbGRzIHx8IHt9O1xuXHRpZiAoc2hvdWxkQmVQYXJ0aWFsKSBmb3IgKGNvbnN0IGtleSBpbiBhZGRpdGlvbmFsRmllbGRzKSBhZGRpdGlvbmFsRmllbGRzW2tleV0ucmVxdWlyZWQgPSBmYWxzZTtcblx0cmV0dXJuIHtcblx0XHRhZGRpdGlvbmFsRmllbGRzU2NoZW1hOiB0b1pvZFNjaGVtYSh7XG5cdFx0XHRmaWVsZHM6IGFkZGl0aW9uYWxGaWVsZHMsXG5cdFx0XHRpc0NsaWVudFNpZGU6IHRydWVcblx0XHR9KSxcblx0XHQkQWRkaXRpb25hbEZpZWxkczoge30sXG5cdFx0JFJldHVybkFkZGl0aW9uYWxGaWVsZHM6IHt9XG5cdH07XG59O1xuY29uc3QgYmFzZUNyZWF0ZU9yZ1JvbGVTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBpZCBvZiB0aGUgb3JnYW5pemF0aW9uIHRvIGNyZWF0ZSB0aGUgcm9sZSBpbi4gSWYgbm90IHByb3ZpZGVkLCB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24gd2lsbCBiZSB1c2VkLlwiIH0pLFxuXHRyb2xlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgcm9sZSB0byBjcmVhdGVcIiB9KSxcblx0cGVybWlzc2lvbjogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwZXJtaXNzaW9uIHRvIGFzc2lnbiB0byB0aGUgcm9sZVwiIH0pXG59KTtcbmNvbnN0IGNyZWF0ZU9yZ1JvbGUgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCB7IGFkZGl0aW9uYWxGaWVsZHNTY2hlbWEsICRBZGRpdGlvbmFsRmllbGRzLCAkUmV0dXJuQWRkaXRpb25hbEZpZWxkcyB9ID0gZ2V0QWRkaXRpb25hbEZpZWxkcyhvcHRpb25zLCBmYWxzZSk7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2NyZWF0ZS1yb2xlXCIsIHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdGJvZHk6IGJhc2VDcmVhdGVPcmdSb2xlU2NoZW1hLnNhZmVFeHRlbmQoeyBhZGRpdGlvbmFsRmllbGRzOiB6Lm9iamVjdCh7IC4uLmFkZGl0aW9uYWxGaWVsZHNTY2hlbWEuc2hhcGUgfSkub3B0aW9uYWwoKSB9KSxcblx0XHRtZXRhZGF0YTogeyAkSW5mZXI6IHsgYm9keToge30gfSB9LFxuXHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlXVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgeyBzZXNzaW9uLCB1c2VyIH0gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGxldCByb2xlTmFtZSA9IGN0eC5ib2R5LnJvbGU7XG5cdFx0Y29uc3QgcGVybWlzc2lvbiA9IGN0eC5ib2R5LnBlcm1pc3Npb247XG5cdFx0Y29uc3QgYWRkaXRpb25hbEZpZWxkcyA9IGN0eC5ib2R5LmFkZGl0aW9uYWxGaWVsZHM7XG5cdFx0Y29uc3QgYWMgPSBvcHRpb25zLmFjO1xuXHRcdGlmICghYWMpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSBvcmdhbml6YXRpb24gcGx1Z2luIGlzIG1pc3NpbmcgYSBwcmUtZGVmaW5lZCBhYyBpbnN0YW5jZS5gLCBgXFxuUGxlYXNlIHJlZmVyIHRvIHRoZSBkb2N1bWVudGF0aW9uIGhlcmU6IGh0dHBzOi8vYmV0dGVyLWF1dGguY29tL2RvY3MvcGx1Z2lucy9vcmdhbml6YXRpb24jZHluYW1pYy1hY2Nlc3MtY29udHJvbGApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0lNUExFTUVOVEVEXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1JU1NJTkdfQUNfSU5TVEFOQ0UgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkub3JnYW5pemF0aW9uSWQgPz8gc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbklkKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgc2Vzc2lvbiBpcyBtaXNzaW5nIGFuIGFjdGl2ZSBvcmdhbml6YXRpb24gaWQgdG8gY3JlYXRlIGEgcm9sZS4gRWl0aGVyIHNldCBhbiBhY3RpdmUgb3JnIGlkLCBvciBwYXNzIGFuIG9yZ2FuaXphdGlvbklkIGluIHRoZSByZXF1ZXN0IGJvZHkuYCk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfTVVTVF9CRV9JTl9BTl9PUkdBTklaQVRJT05fVE9fQ1JFQVRFX0FfUk9MRSB9KTtcblx0XHR9XG5cdFx0cm9sZU5hbWUgPSBub3JtYWxpemVSb2xlTmFtZShyb2xlTmFtZSk7XG5cdFx0YXdhaXQgY2hlY2tJZlJvbGVOYW1lSXNUYWtlbkJ5UHJlRGVmaW5lZFJvbGUoe1xuXHRcdFx0cm9sZTogcm9sZU5hbWUsXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdG9wdGlvbnMsXG5cdFx0XHRjdHhcblx0XHR9KTtcblx0XHRjb25zdCBtZW1iZXIgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0bW9kZWw6IFwibWVtYmVyXCIsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0dmFsdWU6IG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHRcdH0sIHtcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VyLmlkLFxuXHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHRcdH1dXG5cdFx0fSk7XG5cdFx0aWYgKCFtZW1iZXIpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSB1c2VyIGlzIG5vdCBhIG1lbWJlciBvZiB0aGUgb3JnYW5pemF0aW9uIHRvIGNyZWF0ZSBhIHJvbGUuYCwge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0XHR9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BX01FTUJFUl9PRl9USElTX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0aWYgKCFhd2FpdCBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdG9wdGlvbnMsXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdHBlcm1pc3Npb25zOiB7IGFjOiBbXCJjcmVhdGVcIl0gfSxcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlXG5cdFx0fSwgY3R4KSkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHVzZXIgaXMgbm90IHBlcm1pdHRlZCB0byBjcmVhdGUgYSByb2xlLiBJZiB0aGlzIGlzIHVuZXhwZWN0ZWQsIHBsZWFzZSBtYWtlIHN1cmUgdGhlIHJvbGUgYXNzb2NpYXRlZCB0byB0aGF0IG1lbWJlciBoYXMgdGhlIFwiYWNcIiByZXNvdXJjZSB3aXRoIHRoZSBcImNyZWF0ZVwiIHBlcm1pc3Npb24uYCwge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRyb2xlOiBtZW1iZXIucm9sZVxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DUkVBVEVfQV9ST0xFIH0pO1xuXHRcdH1cblx0XHRjb25zdCBtYXhpbXVtUm9sZXNQZXJPcmdhbml6YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5keW5hbWljQWNjZXNzQ29udHJvbD8ubWF4aW11bVJvbGVzUGVyT3JnYW5pemF0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBhd2FpdCBvcHRpb25zLmR5bmFtaWNBY2Nlc3NDb250cm9sLm1heGltdW1Sb2xlc1Blck9yZ2FuaXphdGlvbihvcmdhbml6YXRpb25JZCkgOiBvcHRpb25zLmR5bmFtaWNBY2Nlc3NDb250cm9sPy5tYXhpbXVtUm9sZXNQZXJPcmdhbml6YXRpb24gPz8gREVGQVVMVF9NQVhJTVVNX1JPTEVTX1BFUl9PUkdBTklaQVRJT047XG5cdFx0Y29uc3Qgcm9sZXNJbkRCID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jb3VudCh7XG5cdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25Sb2xlXCIsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0dmFsdWU6IG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHRcdH1dXG5cdFx0fSk7XG5cdFx0aWYgKHJvbGVzSW5EQiA+PSBtYXhpbXVtUm9sZXNQZXJPcmdhbml6YXRpb24pIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIEZhaWxlZCB0byBjcmVhdGUgYSBuZXcgcm9sZSwgdGhlIG9yZ2FuaXphdGlvbiBoYXMgdG9vIG1hbnkgcm9sZXMuIE1heGltdW0gYWxsb3dlZCByb2xlcyBpcyAke21heGltdW1Sb2xlc1Blck9yZ2FuaXphdGlvbn0uYCwge1xuXHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0bWF4aW11bVJvbGVzUGVyT3JnYW5pemF0aW9uLFxuXHRcdFx0XHRyb2xlc0luREJcblx0XHRcdH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVE9PX01BTllfUk9MRVMgfSk7XG5cdFx0fVxuXHRcdGF3YWl0IGNoZWNrRm9ySW52YWxpZFJlc291cmNlcyh7XG5cdFx0XHRhYyxcblx0XHRcdGN0eCxcblx0XHRcdHBlcm1pc3Npb25cblx0XHR9KTtcblx0XHRhd2FpdCBjaGVja0lmTWVtYmVySGFzUGVybWlzc2lvbih7XG5cdFx0XHRjdHgsXG5cdFx0XHRtZW1iZXIsXG5cdFx0XHRvcHRpb25zLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRwZXJtaXNzaW9uUmVxdWlyZWQ6IHBlcm1pc3Npb24sXG5cdFx0XHR1c2VyLFxuXHRcdFx0YWN0aW9uOiBcImNyZWF0ZVwiXG5cdFx0fSk7XG5cdFx0YXdhaXQgY2hlY2tJZlJvbGVOYW1lSXNUYWtlbkJ5Um9sZUluREIoe1xuXHRcdFx0Y3R4LFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRyb2xlOiByb2xlTmFtZVxuXHRcdH0pO1xuXHRcdGNvbnN0IG5ld1JvbGUgPSBhYy5uZXdSb2xlKHBlcm1pc3Npb24pO1xuXHRcdGNvbnN0IGRhdGEgPSB7XG5cdFx0XHQuLi5hd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblJvbGVcIixcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdFx0cGVybWlzc2lvbjogSlNPTi5zdHJpbmdpZnkocGVybWlzc2lvbiksXG5cdFx0XHRcdFx0cm9sZTogcm9sZU5hbWUsXG5cdFx0XHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkc1xuXHRcdFx0XHR9XG5cdFx0XHR9KSxcblx0XHRcdHBlcm1pc3Npb25cblx0XHR9O1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0cm9sZURhdGE6IGRhdGEsXG5cdFx0XHRzdGF0ZW1lbnRzOiBuZXdSb2xlLnN0YXRlbWVudHNcblx0XHR9KTtcblx0fSk7XG59O1xuY29uc3QgZGVsZXRlT3JnUm9sZUJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBpZCBvZiB0aGUgb3JnYW5pemF0aW9uIHRvIGNyZWF0ZSB0aGUgcm9sZSBpbi4gSWYgbm90IHByb3ZpZGVkLCB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24gd2lsbCBiZSB1c2VkLlwiIH0pIH0pLmFuZCh6LnVuaW9uKFt6Lm9iamVjdCh7IHJvbGVOYW1lOiB6LnN0cmluZygpLm5vbmVtcHR5KCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSByb2xlIHRvIGRlbGV0ZVwiIH0pIH0pLCB6Lm9iamVjdCh7IHJvbGVJZDogei5zdHJpbmcoKS5ub25lbXB0eSgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIHJvbGUgdG8gZGVsZXRlXCIgfSkgfSldKSk7XG5jb25zdCBkZWxldGVPcmdSb2xlID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vZGVsZXRlLXJvbGVcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogZGVsZXRlT3JnUm9sZUJvZHlTY2hlbWEsXG5cdFx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdFx0dXNlOiBbb3JnU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRcdG1ldGFkYXRhOiB7ICRJbmZlcjogeyBib2R5OiB7fSB9IH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0XHRjb25zdCBvcmdhbml6YXRpb25JZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkID8/IHNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQ7XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHNlc3Npb24gaXMgbWlzc2luZyBhbiBhY3RpdmUgb3JnYW5pemF0aW9uIGlkIHRvIGRlbGV0ZSBhIHJvbGUuIEVpdGhlciBzZXQgYW4gYWN0aXZlIG9yZyBpZCwgb3IgcGFzcyBhbiBvcmdhbml6YXRpb25JZCBpbiB0aGUgcmVxdWVzdCBib2R5LmApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIG9yZ2FuaXphdGlvbiB0byBkZWxldGUgYSByb2xlLmAsIHtcblx0XHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQV9NRU1CRVJfT0ZfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0fVxuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRvcHRpb25zLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRwZXJtaXNzaW9uczogeyBhYzogW1wiZGVsZXRlXCJdIH0sXG5cdFx0XHRyb2xlOiBtZW1iZXIucm9sZVxuXHRcdH0sIGN0eCkpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSB1c2VyIGlzIG5vdCBwZXJtaXR0ZWQgdG8gZGVsZXRlIGEgcm9sZS4gSWYgdGhpcyBpcyB1bmV4cGVjdGVkLCBwbGVhc2UgbWFrZSBzdXJlIHRoZSByb2xlIGFzc29jaWF0ZWQgdG8gdGhhdCBtZW1iZXIgaGFzIHRoZSBcImFjXCIgcmVzb3VyY2Ugd2l0aCB0aGUgXCJkZWxldGVcIiBwZXJtaXNzaW9uLmAsIHtcblx0XHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0cm9sZTogbWVtYmVyLnJvbGVcblx0XHRcdH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fREVMRVRFX0FfUk9MRSB9KTtcblx0XHR9XG5cdFx0aWYgKGN0eC5ib2R5LnJvbGVOYW1lKSB7XG5cdFx0XHRjb25zdCByb2xlTmFtZSA9IGN0eC5ib2R5LnJvbGVOYW1lO1xuXHRcdFx0Y29uc3QgZGVmYXVsdFJvbGVzID0gb3B0aW9ucy5yb2xlcyA/IE9iamVjdC5rZXlzKG9wdGlvbnMucm9sZXMpIDogW1xuXHRcdFx0XHRcIm93bmVyXCIsXG5cdFx0XHRcdFwiYWRtaW5cIixcblx0XHRcdFx0XCJtZW1iZXJcIlxuXHRcdFx0XTtcblx0XHRcdGlmIChkZWZhdWx0Um9sZXMuaW5jbHVkZXMocm9sZU5hbWUpKSB7XG5cdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIENhbm5vdCBkZWxldGUgYSBwcmUtZGVmaW5lZCByb2xlLmAsIHtcblx0XHRcdFx0XHRyb2xlTmFtZSxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0XHRkZWZhdWx0Um9sZXNcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLkNBTk5PVF9ERUxFVEVfQV9QUkVfREVGSU5FRF9ST0xFIH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRsZXQgY29uZGl0aW9uO1xuXHRcdGlmIChjdHguYm9keS5yb2xlTmFtZSkgY29uZGl0aW9uID0ge1xuXHRcdFx0ZmllbGQ6IFwicm9sZVwiLFxuXHRcdFx0dmFsdWU6IGN0eC5ib2R5LnJvbGVOYW1lLFxuXHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoY3R4LmJvZHkucm9sZUlkKSBjb25kaXRpb24gPSB7XG5cdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0dmFsdWU6IGN0eC5ib2R5LnJvbGVJZCxcblx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHR9O1xuXHRcdGVsc2Uge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHJvbGUgbmFtZS9pZCBpcyBub3QgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QgYm9keS5gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlJPTEVfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRjb25zdCBleGlzdGluZ1JvbGVJbkRCID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblJvbGVcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdFx0fSwgY29uZGl0aW9uXVxuXHRcdH0pO1xuXHRcdGlmICghZXhpc3RpbmdSb2xlSW5EQikge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHJvbGUgbmFtZS9pZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YWJhc2UuYCwge1xuXHRcdFx0XHQuLi5cInJvbGVOYW1lXCIgaW4gY3R4LmJvZHkgPyB7IHJvbGVOYW1lOiBjdHguYm9keS5yb2xlTmFtZSB9IDogeyByb2xlSWQ6IGN0eC5ib2R5LnJvbGVJZCB9LFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ST0xFX05PVF9GT1VORCB9KTtcblx0XHR9XG5cdFx0ZXhpc3RpbmdSb2xlSW5EQi5wZXJtaXNzaW9uID0gSlNPTi5wYXJzZShleGlzdGluZ1JvbGVJbkRCLnBlcm1pc3Npb24pO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZGVsZXRlKHtcblx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblJvbGVcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdFx0fSwgY29uZGl0aW9uXVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG5cdH0pO1xufTtcbmNvbnN0IGxpc3RPcmdSb2xlc1F1ZXJ5U2NoZW1hID0gei5vYmplY3QoeyBvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIG9yZ2FuaXphdGlvbiB0byBsaXN0IHJvbGVzIGZvci4gSWYgbm90IHByb3ZpZGVkLCB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24gd2lsbCBiZSB1c2VkLlwiIH0pIH0pLm9wdGlvbmFsKCk7XG5jb25zdCBsaXN0T3JnUm9sZXMgPSAob3B0aW9ucykgPT4ge1xuXHRjb25zdCB7ICRSZXR1cm5BZGRpdGlvbmFsRmllbGRzIH0gPSBnZXRBZGRpdGlvbmFsRmllbGRzKG9wdGlvbnMsIGZhbHNlKTtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vbGlzdC1yb2xlc1wiLCB7XG5cdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRxdWVyeTogbGlzdE9yZ1JvbGVzUXVlcnlTY2hlbWFcblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0XHRjb25zdCBvcmdhbml6YXRpb25JZCA9IGN0eC5xdWVyeT8ub3JnYW5pemF0aW9uSWQgPz8gc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbklkKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgc2Vzc2lvbiBpcyBtaXNzaW5nIGFuIGFjdGl2ZSBvcmdhbml6YXRpb24gaWQgdG8gbGlzdCByb2xlcy4gRWl0aGVyIHNldCBhbiBhY3RpdmUgb3JnIGlkLCBvciBwYXNzIGFuIG9yZ2FuaXphdGlvbklkIGluIHRoZSByZXF1ZXN0IHF1ZXJ5LmApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIG9yZ2FuaXphdGlvbiB0byBsaXN0IHJvbGVzLmAsIHtcblx0XHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQV9NRU1CRVJfT0ZfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0fVxuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRvcHRpb25zLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRwZXJtaXNzaW9uczogeyBhYzogW1wicmVhZFwiXSB9LFxuXHRcdFx0cm9sZTogbWVtYmVyLnJvbGVcblx0XHR9LCBjdHgpKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgdXNlciBpcyBub3QgcGVybWl0dGVkIHRvIGxpc3Qgcm9sZXMuYCwge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRyb2xlOiBtZW1iZXIucm9sZVxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19MSVNUX0FfUk9MRSB9KTtcblx0XHR9XG5cdFx0bGV0IHJvbGVzID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25Sb2xlXCIsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0dmFsdWU6IG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHRcdH1dXG5cdFx0fSk7XG5cdFx0cm9sZXMgPSByb2xlcy5tYXAoKHgpID0+ICh7XG5cdFx0XHQuLi54LFxuXHRcdFx0cGVybWlzc2lvbjogSlNPTi5wYXJzZSh4LnBlcm1pc3Npb24pXG5cdFx0fSkpO1xuXHRcdHJldHVybiBjdHguanNvbihyb2xlcyk7XG5cdH0pO1xufTtcbmNvbnN0IGdldE9yZ1JvbGVRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHsgb3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGlkIG9mIHRoZSBvcmdhbml6YXRpb24gdG8gcmVhZCBhIHJvbGUgZm9yLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB1c2VyJ3MgYWN0aXZlIG9yZ2FuaXphdGlvbiB3aWxsIGJlIHVzZWQuXCIgfSkgfSkuYW5kKHoudW5pb24oW3oub2JqZWN0KHsgcm9sZU5hbWU6IHouc3RyaW5nKCkubm9uZW1wdHkoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHJvbGUgdG8gcmVhZFwiIH0pIH0pLCB6Lm9iamVjdCh7IHJvbGVJZDogei5zdHJpbmcoKS5ub25lbXB0eSgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgaWQgb2YgdGhlIHJvbGUgdG8gcmVhZFwiIH0pIH0pXSkpLm9wdGlvbmFsKCk7XG5jb25zdCBnZXRPcmdSb2xlID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgeyAkUmV0dXJuQWRkaXRpb25hbEZpZWxkcyB9ID0gZ2V0QWRkaXRpb25hbEZpZWxkcyhvcHRpb25zLCBmYWxzZSk7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2dldC1yb2xlXCIsIHtcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdFx0dXNlOiBbb3JnU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRcdHF1ZXJ5OiBnZXRPcmdSb2xlUXVlcnlTY2hlbWEsXG5cdFx0bWV0YWRhdGE6IHsgJEluZmVyOiB7IHF1ZXJ5OiB7fSB9IH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0XHRjb25zdCBvcmdhbml6YXRpb25JZCA9IGN0eC5xdWVyeT8ub3JnYW5pemF0aW9uSWQgPz8gc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbklkKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgc2Vzc2lvbiBpcyBtaXNzaW5nIGFuIGFjdGl2ZSBvcmdhbml6YXRpb24gaWQgdG8gcmVhZCBhIHJvbGUuIEVpdGhlciBzZXQgYW4gYWN0aXZlIG9yZyBpZCwgb3IgcGFzcyBhbiBvcmdhbml6YXRpb25JZCBpbiB0aGUgcmVxdWVzdCBxdWVyeS5gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk5PX0FDVElWRV9PUkdBTklaQVRJT04gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdFx0fSwge1xuXHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXIuaWQsXG5cdFx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdFx0fV1cblx0XHR9KTtcblx0XHRpZiAoIW1lbWJlcikge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHVzZXIgaXMgbm90IGEgbWVtYmVyIG9mIHRoZSBvcmdhbml6YXRpb24gdG8gcmVhZCBhIHJvbGUuYCwge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0XHR9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BX01FTUJFUl9PRl9USElTX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0aWYgKCFhd2FpdCBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdG9wdGlvbnMsXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdHBlcm1pc3Npb25zOiB7IGFjOiBbXCJyZWFkXCJdIH0sXG5cdFx0XHRyb2xlOiBtZW1iZXIucm9sZVxuXHRcdH0sIGN0eCkpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSB1c2VyIGlzIG5vdCBwZXJtaXR0ZWQgdG8gcmVhZCBhIHJvbGUuYCwge1xuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRyb2xlOiBtZW1iZXIucm9sZVxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19SRUFEX0FfUk9MRSB9KTtcblx0XHR9XG5cdFx0bGV0IGNvbmRpdGlvbjtcblx0XHRpZiAoY3R4LnF1ZXJ5LnJvbGVOYW1lKSBjb25kaXRpb24gPSB7XG5cdFx0XHRmaWVsZDogXCJyb2xlXCIsXG5cdFx0XHR2YWx1ZTogY3R4LnF1ZXJ5LnJvbGVOYW1lLFxuXHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdH07XG5cdFx0ZWxzZSBpZiAoY3R4LnF1ZXJ5LnJvbGVJZCkgY29uZGl0aW9uID0ge1xuXHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdHZhbHVlOiBjdHgucXVlcnkucm9sZUlkLFxuXHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdH07XG5cdFx0ZWxzZSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgcm9sZSBuYW1lL2lkIGlzIG5vdCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBxdWVyeS5gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlJPTEVfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRjb25zdCByb2xlID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcIm9yZ2FuaXphdGlvblJvbGVcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdFx0fSwgY29uZGl0aW9uXVxuXHRcdH0pO1xuXHRcdGlmICghcm9sZSkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHJvbGUgbmFtZS9pZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YWJhc2UuYCwge1xuXHRcdFx0XHQuLi5cInJvbGVOYW1lXCIgaW4gY3R4LnF1ZXJ5ID8geyByb2xlTmFtZTogY3R4LnF1ZXJ5LnJvbGVOYW1lIH0gOiB7IHJvbGVJZDogY3R4LnF1ZXJ5LnJvbGVJZCB9LFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ST0xFX05PVF9GT1VORCB9KTtcblx0XHR9XG5cdFx0cm9sZS5wZXJtaXNzaW9uID0gSlNPTi5wYXJzZShyb2xlLnBlcm1pc3Npb24pO1xuXHRcdHJldHVybiBjdHguanNvbihyb2xlKTtcblx0fSk7XG59O1xuY29uc3Qgcm9sZU5hbWVPcklkU2NoZW1hID0gei51bmlvbihbei5vYmplY3QoeyByb2xlTmFtZTogei5zdHJpbmcoKS5ub25lbXB0eSgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgcm9sZSB0byB1cGRhdGVcIiB9KSB9KSwgei5vYmplY3QoeyByb2xlSWQ6IHouc3RyaW5nKCkubm9uZW1wdHkoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGlkIG9mIHRoZSByb2xlIHRvIHVwZGF0ZVwiIH0pIH0pXSk7XG5jb25zdCB1cGRhdGVPcmdSb2xlID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgeyBhZGRpdGlvbmFsRmllbGRzU2NoZW1hLCAkQWRkaXRpb25hbEZpZWxkcywgJFJldHVybkFkZGl0aW9uYWxGaWVsZHMgfSA9IGdldEFkZGl0aW9uYWxGaWVsZHMob3B0aW9ucywgdHJ1ZSk7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1yb2xlXCIsIHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdGJvZHk6IHoub2JqZWN0KHtcblx0XHRcdG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBpZCBvZiB0aGUgb3JnYW5pemF0aW9uIHRvIHVwZGF0ZSB0aGUgcm9sZSBpbi4gSWYgbm90IHByb3ZpZGVkLCB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24gd2lsbCBiZSB1c2VkLlwiIH0pLFxuXHRcdFx0ZGF0YTogei5vYmplY3Qoe1xuXHRcdFx0XHRwZXJtaXNzaW9uOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcGVybWlzc2lvbiB0byB1cGRhdGUgdGhlIHJvbGUgd2l0aFwiIH0pLFxuXHRcdFx0XHRyb2xlTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgcm9sZSB0byB1cGRhdGVcIiB9KSxcblx0XHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkc1NjaGVtYS5zaGFwZVxuXHRcdFx0fSlcblx0XHR9KS5hbmQocm9sZU5hbWVPcklkU2NoZW1hKSxcblx0XHRtZXRhZGF0YTogeyAkSW5mZXI6IHsgYm9keToge30gfSB9LFxuXHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlXVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgeyBzZXNzaW9uLCB1c2VyIH0gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGNvbnN0IGFjID0gb3B0aW9ucy5hYztcblx0XHRpZiAoIWFjKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgb3JnYW5pemF0aW9uIHBsdWdpbiBpcyBtaXNzaW5nIGEgcHJlLWRlZmluZWQgYWMgaW5zdGFuY2UuYCwgYFxcblBsZWFzZSByZWZlciB0byB0aGUgZG9jdW1lbnRhdGlvbiBoZXJlOiBodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL3BsdWdpbnMvb3JnYW5pemF0aW9uI2R5bmFtaWMtYWNjZXNzLWNvbnRyb2xgKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9JTVBMRU1FTlRFRFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5NSVNTSU5HX0FDX0lOU1RBTkNFIH0pO1xuXHRcdH1cblx0XHRjb25zdCBvcmdhbml6YXRpb25JZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkID8/IHNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQ7XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHNlc3Npb24gaXMgbWlzc2luZyBhbiBhY3RpdmUgb3JnYW5pemF0aW9uIGlkIHRvIHVwZGF0ZSBhIHJvbGUuIEVpdGhlciBzZXQgYW4gYWN0aXZlIG9yZyBpZCwgb3IgcGFzcyBhbiBvcmdhbml6YXRpb25JZCBpbiB0aGUgcmVxdWVzdCBib2R5LmApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdG1vZGVsOiBcIm1lbWJlclwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9XVxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIG9yZ2FuaXphdGlvbiB0byB1cGRhdGUgYSByb2xlLmAsIHtcblx0XHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQV9NRU1CRVJfT0ZfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0fVxuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRvcHRpb25zLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRyb2xlOiBtZW1iZXIucm9sZSxcblx0XHRcdHBlcm1pc3Npb25zOiB7IGFjOiBbXCJ1cGRhdGVcIl0gfVxuXHRcdH0sIGN0eCkpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSB1c2VyIGlzIG5vdCBwZXJtaXR0ZWQgdG8gdXBkYXRlIGEgcm9sZS5gKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX1VQREFURV9BX1JPTEUgfSk7XG5cdFx0fVxuXHRcdGxldCBjb25kaXRpb247XG5cdFx0aWYgKGN0eC5ib2R5LnJvbGVOYW1lKSBjb25kaXRpb24gPSB7XG5cdFx0XHRmaWVsZDogXCJyb2xlXCIsXG5cdFx0XHR2YWx1ZTogY3R4LmJvZHkucm9sZU5hbWUsXG5cdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0fTtcblx0XHRlbHNlIGlmIChjdHguYm9keS5yb2xlSWQpIGNvbmRpdGlvbiA9IHtcblx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHR2YWx1ZTogY3R4LmJvZHkucm9sZUlkLFxuXHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdGNvbm5lY3RvcjogXCJBTkRcIlxuXHRcdH07XG5cdFx0ZWxzZSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgcm9sZSBuYW1lL2lkIGlzIG5vdCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBib2R5LmApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuUk9MRV9OT1RfRk9VTkQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IHJvbGUgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0bW9kZWw6IFwib3JnYW5pemF0aW9uUm9sZVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9LCBjb25kaXRpb25dXG5cdFx0fSk7XG5cdFx0aWYgKCFyb2xlKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgcm9sZSBuYW1lL2lkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBkYXRhYmFzZS5gLCB7XG5cdFx0XHRcdC4uLlwicm9sZU5hbWVcIiBpbiBjdHguYm9keSA/IHsgcm9sZU5hbWU6IGN0eC5ib2R5LnJvbGVOYW1lIH0gOiB7IHJvbGVJZDogY3R4LmJvZHkucm9sZUlkIH0sXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0XHR9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlJPTEVfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRyb2xlLnBlcm1pc3Npb24gPSByb2xlLnBlcm1pc3Npb24gPyBKU09OLnBhcnNlKHJvbGUucGVybWlzc2lvbikgOiB2b2lkIDA7XG5cdFx0Y29uc3QgeyBwZXJtaXNzaW9uOiBfLCByb2xlTmFtZTogX18sIC4uLmFkZGl0aW9uYWxGaWVsZHMgfSA9IGN0eC5ib2R5LmRhdGE7XG5cdFx0Y29uc3QgdXBkYXRlRGF0YSA9IHsgLi4uYWRkaXRpb25hbEZpZWxkcyB9O1xuXHRcdGlmIChjdHguYm9keS5kYXRhLnBlcm1pc3Npb24pIHtcblx0XHRcdGNvbnN0IG5ld1Blcm1pc3Npb24gPSBjdHguYm9keS5kYXRhLnBlcm1pc3Npb247XG5cdFx0XHRhd2FpdCBjaGVja0ZvckludmFsaWRSZXNvdXJjZXMoe1xuXHRcdFx0XHRhYyxcblx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRwZXJtaXNzaW9uOiBuZXdQZXJtaXNzaW9uXG5cdFx0XHR9KTtcblx0XHRcdGF3YWl0IGNoZWNrSWZNZW1iZXJIYXNQZXJtaXNzaW9uKHtcblx0XHRcdFx0Y3R4LFxuXHRcdFx0XHRtZW1iZXIsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0XHRwZXJtaXNzaW9uUmVxdWlyZWQ6IG5ld1Blcm1pc3Npb24sXG5cdFx0XHRcdHVzZXIsXG5cdFx0XHRcdGFjdGlvbjogXCJ1cGRhdGVcIlxuXHRcdFx0fSk7XG5cdFx0XHR1cGRhdGVEYXRhLnBlcm1pc3Npb24gPSBuZXdQZXJtaXNzaW9uO1xuXHRcdH1cblx0XHRpZiAoY3R4LmJvZHkuZGF0YS5yb2xlTmFtZSkge1xuXHRcdFx0bGV0IG5ld1JvbGVOYW1lID0gY3R4LmJvZHkuZGF0YS5yb2xlTmFtZTtcblx0XHRcdG5ld1JvbGVOYW1lID0gbm9ybWFsaXplUm9sZU5hbWUobmV3Um9sZU5hbWUpO1xuXHRcdFx0YXdhaXQgY2hlY2tJZlJvbGVOYW1lSXNUYWtlbkJ5UHJlRGVmaW5lZFJvbGUoe1xuXHRcdFx0XHRyb2xlOiBuZXdSb2xlTmFtZSxcblx0XHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdGN0eFxuXHRcdFx0fSk7XG5cdFx0XHRhd2FpdCBjaGVja0lmUm9sZU5hbWVJc1Rha2VuQnlSb2xlSW5EQih7XG5cdFx0XHRcdHJvbGU6IG5ld1JvbGVOYW1lLFxuXHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0Y3R4XG5cdFx0XHR9KTtcblx0XHRcdHVwZGF0ZURhdGEucm9sZSA9IG5ld1JvbGVOYW1lO1xuXHRcdH1cblx0XHRjb25zdCB1cGRhdGUgPSB7XG5cdFx0XHQuLi51cGRhdGVEYXRhLFxuXHRcdFx0Li4udXBkYXRlRGF0YS5wZXJtaXNzaW9uID8geyBwZXJtaXNzaW9uOiBKU09OLnN0cmluZ2lmeSh1cGRhdGVEYXRhLnBlcm1pc3Npb24pIH0gOiB7fVxuXHRcdH07XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0bW9kZWw6IFwib3JnYW5pemF0aW9uUm9sZVwiLFxuXHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0Y29ubmVjdG9yOiBcIkFORFwiXG5cdFx0XHR9LCBjb25kaXRpb25dLFxuXHRcdFx0dXBkYXRlXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN1Y2Nlc3M6IHRydWUsXG5cdFx0XHRyb2xlRGF0YToge1xuXHRcdFx0XHQuLi5yb2xlLFxuXHRcdFx0XHQuLi51cGRhdGUsXG5cdFx0XHRcdHBlcm1pc3Npb246IHVwZGF0ZURhdGEucGVybWlzc2lvbiB8fCByb2xlLnBlcm1pc3Npb24gfHwgbnVsbFxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn07XG5hc3luYyBmdW5jdGlvbiBjaGVja0ZvckludmFsaWRSZXNvdXJjZXMoeyBhYywgY3R4LCBwZXJtaXNzaW9uIH0pIHtcblx0Y29uc3QgdmFsaWRSZXNvdXJjZXMgPSBPYmplY3Qua2V5cyhhYy5zdGF0ZW1lbnRzKTtcblx0Y29uc3QgcHJvdmlkZWRSZXNvdXJjZXMgPSBPYmplY3Qua2V5cyhwZXJtaXNzaW9uKTtcblx0aWYgKHByb3ZpZGVkUmVzb3VyY2VzLnNvbWUoKHIpID0+ICF2YWxpZFJlc291cmNlcy5pbmNsdWRlcyhyKSkpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYFtEeW5hbWljIEFjY2VzcyBDb250cm9sXSBUaGUgcHJvdmlkZWQgcGVybWlzc2lvbiBpbmNsdWRlcyBhbiBpbnZhbGlkIHJlc291cmNlLmAsIHtcblx0XHRcdHByb3ZpZGVkUmVzb3VyY2VzLFxuXHRcdFx0dmFsaWRSZXNvdXJjZXNcblx0XHR9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZBTElEX1JFU09VUkNFIH0pO1xuXHR9XG59XG5hc3luYyBmdW5jdGlvbiBjaGVja0lmTWVtYmVySGFzUGVybWlzc2lvbih7IGN0eCwgcGVybWlzc2lvblJlcXVpcmVkOiBwZXJtaXNzaW9uLCBvcHRpb25zLCBvcmdhbml6YXRpb25JZCwgbWVtYmVyLCB1c2VyLCBhY3Rpb24gfSkge1xuXHRjb25zdCBoYXNOZWNlc3NhcnlQZXJtaXNzaW9ucyA9IFtdO1xuXHRjb25zdCBwZXJtaXNzaW9uRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBlcm1pc3Npb24pO1xuXHRmb3IgYXdhaXQgKGNvbnN0IFtyZXNvdXJjZSwgcGVybWlzc2lvbnNdIG9mIHBlcm1pc3Npb25FbnRyaWVzKSBmb3IgYXdhaXQgKGNvbnN0IHBlcm0gb2YgcGVybWlzc2lvbnMpIGhhc05lY2Vzc2FyeVBlcm1pc3Npb25zLnB1c2goe1xuXHRcdHJlc291cmNlOiB7IFtyZXNvdXJjZV06IFtwZXJtXSB9LFxuXHRcdGhhc1Blcm1pc3Npb246IGF3YWl0IGhhc1Blcm1pc3Npb24oe1xuXHRcdFx0b3B0aW9ucyxcblx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0cGVybWlzc2lvbnM6IHsgW3Jlc291cmNlXTogW3Blcm1dIH0sXG5cdFx0XHR1c2VNZW1vcnlDYWNoZTogdHJ1ZSxcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlXG5cdFx0fSwgY3R4KVxuXHR9KTtcblx0Y29uc3QgbWlzc2luZ1Blcm1pc3Npb25zID0gaGFzTmVjZXNzYXJ5UGVybWlzc2lvbnMuZmlsdGVyKCh4KSA9PiB4Lmhhc1Blcm1pc3Npb24gPT09IGZhbHNlKS5tYXAoKHgpID0+IHtcblx0XHRjb25zdCBrZXkgPSBPYmplY3Qua2V5cyh4LnJlc291cmNlKVswXTtcblx0XHRyZXR1cm4gYCR7a2V5fToke3gucmVzb3VyY2Vba2V5XVswXX1gO1xuXHR9KTtcblx0aWYgKG1pc3NpbmdQZXJtaXNzaW9ucy5sZW5ndGggPiAwKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHVzZXIgaXMgbWlzc2luZyBwZXJtaXNzaW9ucyBuZWNlc3NhcnkgdG8gJHthY3Rpb259IGEgcm9sZSB3aXRoIHRob3NlIHNldCBvZiBwZXJtaXNzaW9ucy5cXG5gLCB7XG5cdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdFx0bWlzc2luZ1Blcm1pc3Npb25zXG5cdFx0fSk7XG5cdFx0bGV0IGVycm9yTWVzc2FnZTtcblx0XHRpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSBlcnJvck1lc3NhZ2UgPSBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DUkVBVEVfQV9ST0xFO1xuXHRcdGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJ1cGRhdGVcIikgZXJyb3JNZXNzYWdlID0gT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fVVBEQVRFX0FfUk9MRTtcblx0XHRlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIGVycm9yTWVzc2FnZSA9IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0RFTEVURV9BX1JPTEU7XG5cdFx0ZWxzZSBpZiAoYWN0aW9uID09PSBcInJlYWRcIikgZXJyb3JNZXNzYWdlID0gT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fUkVBRF9BX1JPTEU7XG5cdFx0ZWxzZSBpZiAoYWN0aW9uID09PSBcImxpc3RcIikgZXJyb3JNZXNzYWdlID0gT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fTElTVF9BX1JPTEU7XG5cdFx0ZWxzZSBlcnJvck1lc3NhZ2UgPSBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19HRVRfQV9ST0xFO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7XG5cdFx0XHRtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG5cdFx0XHRtaXNzaW5nUGVybWlzc2lvbnNcblx0XHR9KTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tJZlJvbGVOYW1lSXNUYWtlbkJ5UHJlRGVmaW5lZFJvbGUoeyBvcHRpb25zLCBvcmdhbml6YXRpb25JZCwgcm9sZSwgY3R4IH0pIHtcblx0Y29uc3QgZGVmYXVsdFJvbGVzID0gb3B0aW9ucy5yb2xlcyA/IE9iamVjdC5rZXlzKG9wdGlvbnMucm9sZXMpIDogW1xuXHRcdFwib3duZXJcIixcblx0XHRcImFkbWluXCIsXG5cdFx0XCJtZW1iZXJcIlxuXHRdO1xuXHRpZiAoZGVmYXVsdFJvbGVzLmluY2x1ZGVzKHJvbGUpKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGBbRHluYW1pYyBBY2Nlc3MgQ29udHJvbF0gVGhlIHJvbGUgbmFtZSBcIiR7cm9sZX1cIiBpcyBhbHJlYWR5IHRha2VuIGJ5IGEgcHJlLWRlZmluZWQgcm9sZS5gLCB7XG5cdFx0XHRyb2xlLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0XHRkZWZhdWx0Um9sZXNcblx0XHR9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ST0xFX05BTUVfSVNfQUxSRUFEWV9UQUtFTiB9KTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tJZlJvbGVOYW1lSXNUYWtlbkJ5Um9sZUluREIoeyBvcmdhbml6YXRpb25JZCwgcm9sZSwgY3R4IH0pIHtcblx0aWYgKGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwib3JnYW5pemF0aW9uUm9sZVwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdHZhbHVlOiBvcmdhbml6YXRpb25JZCxcblx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHR9LCB7XG5cdFx0XHRmaWVsZDogXCJyb2xlXCIsXG5cdFx0XHR2YWx1ZTogcm9sZSxcblx0XHRcdG9wZXJhdG9yOiBcImVxXCIsXG5cdFx0XHRjb25uZWN0b3I6IFwiQU5EXCJcblx0XHR9XVxuXHR9KSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgW0R5bmFtaWMgQWNjZXNzIENvbnRyb2xdIFRoZSByb2xlIG5hbWUgXCIke3JvbGV9XCIgaXMgYWxyZWFkeSB0YWtlbiBieSBhIHJvbGUgaW4gdGhlIGRhdGFiYXNlLmAsIHtcblx0XHRcdHJvbGUsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlJPTEVfTkFNRV9JU19BTFJFQURZX1RBS0VOIH0pO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlT3JnUm9sZSwgZGVsZXRlT3JnUm9sZSwgZ2V0T3JnUm9sZSwgbGlzdE9yZ1JvbGVzLCB1cGRhdGVPcmdSb2xlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcnVkLWFjY2Vzcy1jb250cm9sLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-access-control.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-invites.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/routes/crud-invites.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptInvitation: () => (/* binding */ acceptInvitation),\n/* harmony export */   cancelInvitation: () => (/* binding */ cancelInvitation),\n/* harmony export */   createInvitation: () => (/* binding */ createInvitation),\n/* harmony export */   getInvitation: () => (/* binding */ getInvitation),\n/* harmony export */   listInvitations: () => (/* binding */ listInvitations),\n/* harmony export */   listUserInvitations: () => (/* binding */ listUserInvitations),\n/* harmony export */   rejectInvitation: () => (/* binding */ rejectInvitation)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../db/to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_routes_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../api/routes/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access/statement.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var _organization_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../organization.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/routes/crud-invites.ts\nconst baseInvitationSchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({\n\temail: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The email address of the user to invite\" }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_15__.union([zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The role to assign to the user\" }), zod__WEBPACK_IMPORTED_MODULE_15__.array(zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The roles to assign to the user\" }))]).meta({ description: \"The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: \\\"member\\\"\" }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The organization ID to invite the user to\" }).optional(),\n\tresend: zod__WEBPACK_IMPORTED_MODULE_15__.boolean().meta({ description: \"Resend the invitation email, if the user is already invited. Eg: true\" }).optional(),\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_15__.union([zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The team ID to invite the user to\" }).optional(), zod__WEBPACK_IMPORTED_MODULE_15__.array(zod__WEBPACK_IMPORTED_MODULE_15__.string()).meta({ description: \"The team IDs to invite the user to\" }).optional()])\n});\nconst createInvitation = (option) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_1__.toZodSchema)({\n\t\tfields: option?.schema?.invitation?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/invite-member\", {\n\t\tmethod: \"POST\",\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgSessionMiddleware],\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_15__.object({\n\t\t\t...baseInvitationSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\toperationId: \"createOrganizationInvitation\",\n\t\t\t\tdescription: \"Create an invitation to an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\trole: { type: \"string\" },\n\t\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\t\tinviterId: { type: \"string\" },\n\t\t\t\t\t\t\tstatus: { type: \"string\" },\n\t\t\t\t\t\t\texpiresAt: { type: \"string\" },\n\t\t\t\t\t\t\tcreatedAt: { type: \"string\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"role\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"inviterId\",\n\t\t\t\t\t\t\t\"status\",\n\t\t\t\t\t\t\t\"expiresAt\",\n\t\t\t\t\t\t\t\"createdAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.context.session;\n\t\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst email = ctx.body.email.toLowerCase();\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_15__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_12__.BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, option);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_10__.hasPermission)({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { invitation: [\"create\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION });\n\t\tconst creatorRole = ctx.context.orgOptions.creatorRole || \"owner\";\n\t\tconst roles = (0,_organization_mjs__WEBPACK_IMPORTED_MODULE_11__.parseRoles)(ctx.body.role);\n\t\tconst rolesArray = roles.split(\",\").map((r) => r.trim()).filter(Boolean);\n\t\tconst defaults = Object.keys(_access_statement_mjs__WEBPACK_IMPORTED_MODULE_6__.defaultRoles);\n\t\tconst customRoles = Object.keys(ctx.context.orgOptions.roles || {});\n\t\tconst validStaticRoles = new Set([...defaults, ...customRoles]);\n\t\tconst unknownRoles = rolesArray.filter((role) => !validStaticRoles.has(role));\n\t\tif (unknownRoles.length > 0) if (ctx.context.orgOptions.dynamicAccessControl?.enabled) {\n\t\t\tconst foundRoleNames = (await ctx.context.adapter.findMany({\n\t\t\t\tmodel: \"organizationRole\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"organizationId\",\n\t\t\t\t\tvalue: organizationId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"role\",\n\t\t\t\t\tvalue: unknownRoles,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}]\n\t\t\t})).map((r) => r.role);\n\t\t\tconst stillInvalid = unknownRoles.filter((r) => !foundRoleNames.includes(r));\n\t\t\tif (stillInvalid.length > 0) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: `${_error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND}: ${stillInvalid.join(\", \")}` });\n\t\t} else throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: `${_error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ROLE_NOT_FOUND}: ${unknownRoles.join(\", \")}` });\n\t\tif (member.role !== creatorRole && roles.split(\",\").includes(creatorRole)) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE });\n\t\tif (await adapter.findMemberByEmail({\n\t\t\temail,\n\t\t\torganizationId\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\tconst alreadyInvited = await adapter.findPendingInvitation({\n\t\t\temail,\n\t\t\torganizationId\n\t\t});\n\t\tif (alreadyInvited.length && !ctx.body.resend) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION });\n\t\tconst organization = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tif (alreadyInvited.length && ctx.body.resend) {\n\t\t\tconst existingInvitation = alreadyInvited[0];\n\t\t\tconst newExpiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.orgOptions.invitationExpiresIn || 3600 * 48, \"sec\");\n\t\t\tawait ctx.context.adapter.update({\n\t\t\t\tmodel: \"invitation\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: existingInvitation.id\n\t\t\t\t}],\n\t\t\t\tupdate: { expiresAt: newExpiresAt }\n\t\t\t});\n\t\t\tconst updatedInvitation = {\n\t\t\t\t...existingInvitation,\n\t\t\t\texpiresAt: newExpiresAt\n\t\t\t};\n\t\t\tif (ctx.context.orgOptions.sendInvitationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.orgOptions.sendInvitationEmail({\n\t\t\t\tid: updatedInvitation.id,\n\t\t\t\trole: updatedInvitation.role,\n\t\t\t\temail: updatedInvitation.email.toLowerCase(),\n\t\t\t\torganization,\n\t\t\t\tinviter: {\n\t\t\t\t\t...member,\n\t\t\t\t\tuser: session.user\n\t\t\t\t},\n\t\t\t\tinvitation: updatedInvitation\n\t\t\t}, ctx.request));\n\t\t\treturn ctx.json(updatedInvitation);\n\t\t}\n\t\tif (alreadyInvited.length && ctx.context.orgOptions.cancelPendingInvitationsOnReInvite) await adapter.updateInvitation({\n\t\t\tinvitationId: alreadyInvited[0].id,\n\t\t\tstatus: \"canceled\"\n\t\t});\n\t\tconst invitationLimit = typeof ctx.context.orgOptions.invitationLimit === \"function\" ? await ctx.context.orgOptions.invitationLimit({\n\t\t\tuser: session.user,\n\t\t\torganization,\n\t\t\tmember\n\t\t}, ctx.context) : ctx.context.orgOptions.invitationLimit ?? 100;\n\t\tif ((await adapter.findPendingInvitations({ organizationId })).length >= invitationLimit) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.INVITATION_LIMIT_REACHED });\n\t\tif (ctx.context.orgOptions.teams && ctx.context.orgOptions.teams.enabled && typeof ctx.context.orgOptions.teams.maximumMembersPerTeam !== \"undefined\" && \"teamId\" in ctx.body && ctx.body.teamId) {\n\t\t\tconst teamIds$1 = typeof ctx.body.teamId === \"string\" ? [ctx.body.teamId] : ctx.body.teamId;\n\t\t\tfor (const teamId of teamIds$1) {\n\t\t\t\tconst team = await adapter.findTeamById({\n\t\t\t\t\tteamId,\n\t\t\t\t\torganizationId,\n\t\t\t\t\tincludeTeamMembers: true\n\t\t\t\t});\n\t\t\t\tif (!team) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\t\t\tconst maximumMembersPerTeam = typeof ctx.context.orgOptions.teams.maximumMembersPerTeam === \"function\" ? await ctx.context.orgOptions.teams.maximumMembersPerTeam({\n\t\t\t\t\tteamId,\n\t\t\t\t\tsession,\n\t\t\t\t\torganizationId\n\t\t\t\t}) : ctx.context.orgOptions.teams.maximumMembersPerTeam;\n\t\t\t\tif (team.members.length >= maximumMembersPerTeam) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.TEAM_MEMBER_LIMIT_REACHED });\n\t\t\t}\n\t\t}\n\t\tconst teamIds = \"teamId\" in ctx.body ? typeof ctx.body.teamId === \"string\" ? [ctx.body.teamId] : ctx.body.teamId ?? [] : [];\n\t\tconst { email: _, role: __, organizationId: ___, resend: ____, ...additionalFields } = ctx.body;\n\t\tlet invitationData = {\n\t\t\trole: roles,\n\t\t\temail,\n\t\t\torganizationId,\n\t\t\tteamIds,\n\t\t\t...additionalFields ? additionalFields : {}\n\t\t};\n\t\tif (option?.organizationHooks?.beforeCreateInvitation) {\n\t\t\tconst response = await option?.organizationHooks.beforeCreateInvitation({\n\t\t\t\tinvitation: {\n\t\t\t\t\t...invitationData,\n\t\t\t\t\tinviterId: session.user.id,\n\t\t\t\t\tteamId: teamIds.length > 0 ? teamIds[0] : void 0\n\t\t\t\t},\n\t\t\t\tinviter: session.user,\n\t\t\t\torganization\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) invitationData = {\n\t\t\t\t...invitationData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst invitation = await adapter.createInvitation({\n\t\t\tinvitation: invitationData,\n\t\t\tuser: session.user\n\t\t});\n\t\tif (ctx.context.orgOptions.sendInvitationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.orgOptions.sendInvitationEmail({\n\t\t\tid: invitation.id,\n\t\t\trole: invitation.role,\n\t\t\temail: invitation.email.toLowerCase(),\n\t\t\torganization,\n\t\t\tinviter: {\n\t\t\t\t...member,\n\t\t\t\tuser: session.user\n\t\t\t},\n\t\t\tinvitation\n\t\t}, ctx.request));\n\t\tif (option?.organizationHooks?.afterCreateInvitation) await option?.organizationHooks.afterCreateInvitation({\n\t\t\tinvitation,\n\t\t\tinviter: session.user,\n\t\t\torganization\n\t\t});\n\t\treturn ctx.json(invitation);\n\t});\n};\nconst acceptInvitationBodySchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({ invitationId: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The ID of the invitation to accept\" }) });\nconst acceptInvitation = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/accept-invitation\", {\n\tmethod: \"POST\",\n\tbody: acceptInvitationBodySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Accept an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tinvitation: { type: \"object\" },\n\t\t\t\t\tmember: { type: \"object\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation || invitation.expiresAt < /* @__PURE__ */ new Date() || invitation.status !== \"pending\") throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tif (ctx.context.orgOptions.requireEmailVerificationOnInvitation && !session.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION });\n\tconst membershipLimit = ctx.context.orgOptions?.membershipLimit || 100;\n\tif (await adapter.countMembers({ organizationId: invitation.organizationId }) >= membershipLimit) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED });\n\tconst organization = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeAcceptInvitation) await options?.organizationHooks.beforeAcceptInvitation({\n\t\tinvitation,\n\t\tuser: session.user,\n\t\torganization\n\t});\n\tconst acceptedI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"accepted\"\n\t});\n\tif (!acceptedI) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.FAILED_TO_RETRIEVE_INVITATION });\n\tif (ctx.context.orgOptions.teams && ctx.context.orgOptions.teams.enabled && \"teamId\" in acceptedI && acceptedI.teamId) {\n\t\tconst teamIds = acceptedI.teamId.split(\",\");\n\t\tconst onlyOne = teamIds.length === 1;\n\t\tfor (const teamId of teamIds) {\n\t\t\tawait adapter.findOrCreateTeamMember({\n\t\t\t\tteamId,\n\t\t\t\tuserId: session.user.id\n\t\t\t});\n\t\t\tif (typeof ctx.context.orgOptions.teams.maximumMembersPerTeam !== \"undefined\") {\n\t\t\t\tif (await adapter.countTeamMembers({ teamId }) >= (typeof ctx.context.orgOptions.teams.maximumMembersPerTeam === \"function\" ? await ctx.context.orgOptions.teams.maximumMembersPerTeam({\n\t\t\t\t\tteamId,\n\t\t\t\t\tsession,\n\t\t\t\t\torganizationId: invitation.organizationId\n\t\t\t\t}) : ctx.context.orgOptions.teams.maximumMembersPerTeam)) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.TEAM_MEMBER_LIMIT_REACHED });\n\t\t\t}\n\t\t}\n\t\tif (onlyOne) {\n\t\t\tconst teamId = teamIds[0];\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\t\tsession: await adapter.setActiveTeam(session.session.token, teamId, ctx),\n\t\t\t\tuser: session.user\n\t\t\t});\n\t\t}\n\t}\n\tconst member = await adapter.createMember({\n\t\torganizationId: invitation.organizationId,\n\t\tuserId: session.user.id,\n\t\trole: invitation.role,\n\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t});\n\tawait adapter.setActiveOrganization(session.session.token, invitation.organizationId, ctx);\n\tif (!acceptedI) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND }\n\t});\n\tif (options?.organizationHooks?.afterAcceptInvitation) await options?.organizationHooks.afterAcceptInvitation({\n\t\tinvitation: acceptedI,\n\t\tmember,\n\t\tuser: session.user,\n\t\torganization\n\t});\n\treturn ctx.json({\n\t\tinvitation: acceptedI,\n\t\tmember\n\t});\n});\nconst rejectInvitationBodySchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({ invitationId: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The ID of the invitation to reject\" }) });\nconst rejectInvitation = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/reject-invitation\", {\n\tmethod: \"POST\",\n\tbody: rejectInvitationBodySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Reject an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tinvitation: { type: \"object\" },\n\t\t\t\t\tmember: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation || invitation.status !== \"pending\") throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: \"Invitation not found!\" });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tif (ctx.context.orgOptions.requireEmailVerificationOnInvitation && !session.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION });\n\tconst organization = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeRejectInvitation) await options?.organizationHooks.beforeRejectInvitation({\n\t\tinvitation,\n\t\tuser: session.user,\n\t\torganization\n\t});\n\tconst rejectedI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"rejected\"\n\t});\n\tif (options?.organizationHooks?.afterRejectInvitation) await options?.organizationHooks.afterRejectInvitation({\n\t\tinvitation: rejectedI || invitation,\n\t\tuser: session.user,\n\t\torganization\n\t});\n\treturn ctx.json({\n\t\tinvitation: rejectedI,\n\t\tmember: null\n\t});\n});\nconst cancelInvitationBodySchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({ invitationId: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The ID of the invitation to cancel\" }) });\nconst cancelInvitation = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/cancel-invitation\", {\n\tmethod: \"POST\",\n\tbody: cancelInvitationBodySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgSessionMiddleware],\n\topenapi: {\n\t\toperationId: \"cancelOrganizationInvitation\",\n\t\tdescription: \"Cancel an invitation to an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { invitation: { type: \"object\" } }\n\t\t\t} } }\n\t\t} }\n\t}\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.body.invitationId);\n\tif (!invitation) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.INVITATION_NOT_FOUND });\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: invitation.organizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_10__.hasPermission)({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { invitation: [\"cancel\"] },\n\t\torganizationId: invitation.organizationId\n\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION });\n\tconst organization = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeCancelInvitation) await options?.organizationHooks.beforeCancelInvitation({\n\t\tinvitation,\n\t\tcancelledBy: session.user,\n\t\torganization\n\t});\n\tconst canceledI = await adapter.updateInvitation({\n\t\tinvitationId: ctx.body.invitationId,\n\t\tstatus: \"canceled\"\n\t});\n\tif (options?.organizationHooks?.afterCancelInvitation) await options?.organizationHooks.afterCancelInvitation({\n\t\tinvitation: canceledI || invitation,\n\t\tcancelledBy: session.user,\n\t\torganization\n\t});\n\treturn ctx.json(canceledI);\n});\nconst getInvitationQuerySchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({ id: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The ID of the invitation to get\" }) });\nconst getInvitation = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/get-invitation\", {\n\tmethod: \"GET\",\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware],\n\trequireHeaders: true,\n\tquery: getInvitationQuerySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Get an invitation by ID\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\trole: { type: \"string\" },\n\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\tinviterId: { type: \"string\" },\n\t\t\t\t\tstatus: { type: \"string\" },\n\t\t\t\t\texpiresAt: { type: \"string\" },\n\t\t\t\t\torganizationName: { type: \"string\" },\n\t\t\t\t\torganizationSlug: { type: \"string\" },\n\t\t\t\t\tinviterEmail: { type: \"string\" }\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"role\",\n\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\"inviterId\",\n\t\t\t\t\t\"status\",\n\t\t\t\t\t\"expiresAt\",\n\t\t\t\t\t\"organizationName\",\n\t\t\t\t\t\"organizationSlug\",\n\t\t\t\t\t\"inviterEmail\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"UNAUTHORIZED\", { message: \"Not authenticated\" });\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, options);\n\tconst invitation = await adapter.findInvitationById(ctx.query.id);\n\tif (!invitation || invitation.status !== \"pending\" || invitation.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: \"Invitation not found!\" });\n\tif (invitation.email.toLowerCase() !== session.user.email.toLowerCase()) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION });\n\tconst organization = await adapter.findOrganizationById(invitation.organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: invitation.inviterId,\n\t\torganizationId: invitation.organizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_9__.ORGANIZATION_ERROR_CODES.INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION });\n\treturn ctx.json({\n\t\t...invitation,\n\t\torganizationName: organization.name,\n\t\torganizationSlug: organization.slug,\n\t\tinviterEmail: member.user.email\n\t});\n});\nconst listInvitationQuerySchema = zod__WEBPACK_IMPORTED_MODULE_15__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The ID of the organization to list invitations for\" }).optional() }).optional();\nconst listInvitations = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/list-invitations\", {\n\tmethod: \"GET\",\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgSessionMiddleware],\n\tquery: listInvitationQuerySchema\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"UNAUTHORIZED\", { message: \"Not authenticated\" });\n\tconst orgId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tif (!orgId) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: \"Organization ID is required\" });\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, options);\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: orgId\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"FORBIDDEN\", { message: \"You are not a member of this organization\" });\n\tconst invitations = await adapter.listInvitations({ organizationId: orgId });\n\treturn ctx.json(invitations);\n});\n/**\n* List all invitations a user has received\n*/\nconst listUserInvitations = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_14__.createAuthEndpoint)(\"/organization/list-user-invitations\", {\n\tmethod: \"GET\",\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_8__.orgMiddleware],\n\tquery: zod__WEBPACK_IMPORTED_MODULE_15__.object({ email: zod__WEBPACK_IMPORTED_MODULE_15__.string().meta({ description: \"The email of the user to list invitations for. This only works for server side API calls.\" }).optional() }).optional(),\n\tmetadata: { openapi: {\n\t\tdescription: \"List all invitations a user has received\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\trole: { type: \"string\" },\n\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\torganizationName: { type: \"string\" },\n\t\t\t\t\t\tinviterId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The ID of the user who created the invitation\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tteamId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The ID of the team associated with the invitation\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: { type: \"string\" },\n\t\t\t\t\t\texpiresAt: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: { type: \"string\" }\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\"role\",\n\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\"organizationName\",\n\t\t\t\t\t\t\"inviterId\",\n\t\t\t\t\t\t\"status\",\n\t\t\t\t\t\t\"expiresAt\",\n\t\t\t\t\t\t\"createdAt\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (ctx.request && ctx.query?.email) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: \"User email cannot be passed for client side API calls.\" });\n\tconst userEmail = session?.user.email || ctx.query?.email;\n\tif (!userEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_13__.APIError(\"BAD_REQUEST\", { message: \"Missing session headers, or email query parameter.\" });\n\tconst pendingInvitations = (await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.getOrgAdapter)(ctx.context, options).listUserInvitations(userEmail)).filter((inv) => inv.status === \"pending\");\n\treturn ctx.json(pendingInvitations);\n});\n\n//#endregion\n\n//# sourceMappingURL=crud-invites.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1pbnZpdGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNHO0FBQ3RCO0FBQytCO0FBQ007QUFDN0I7QUFDZ0I7QUFDUjtBQUNtQjtBQUNKO0FBQ1I7QUFDTDtBQUNVO0FBQ3BCO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0EsNkJBQTZCLHdDQUFRO0FBQ3JDLFFBQVEsd0NBQVEsVUFBVSx3REFBd0Q7QUFDbEYsT0FBTyx1Q0FBTyxFQUFFLHdDQUFRLFVBQVUsK0NBQStDLEdBQUcsdUNBQU8sQ0FBQyx3Q0FBUSxVQUFVLGdEQUFnRCxZQUFZLHNHQUFzRztBQUNoUixpQkFBaUIsd0NBQVEsVUFBVSwwREFBMEQ7QUFDN0YsU0FBUyx5Q0FBUyxVQUFVLHNGQUFzRjtBQUNsSCxTQUFTLHVDQUFPLEVBQUUsd0NBQVEsVUFBVSxrREFBa0QsY0FBYyx1Q0FBTyxDQUFDLHdDQUFRLFdBQVcsbURBQW1EO0FBQ2xMLENBQUM7QUFDRDtBQUNBLGdDQUFnQywyREFBVztBQUMzQyw0REFBNEQ7QUFDNUQ7QUFDQSxFQUFFO0FBQ0YsUUFBUSwwRUFBa0I7QUFDMUI7QUFDQTtBQUNBLFFBQVEsb0RBQWEsRUFBRSwyREFBb0I7QUFDM0MsUUFBUSx3Q0FBUTtBQUNoQjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGdCQUFnQixnQkFBZ0I7QUFDaEMsZUFBZSxnQkFBZ0I7QUFDL0IseUJBQXlCLGdCQUFnQjtBQUN6QyxvQkFBb0IsZ0JBQWdCO0FBQ3BDLGlCQUFpQixnQkFBZ0I7QUFDakMsb0JBQW9CLGdCQUFnQjtBQUNwQyxvQkFBb0I7QUFDcEIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGlDQUFpQyxrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ3JIO0FBQ0EsT0FBTyx1Q0FBTyx1Q0FBdUMsa0RBQVEsa0JBQWtCLFNBQVMsc0VBQWdCLGdCQUFnQjtBQUN4SCxrQkFBa0IsMkRBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUJBQW1CO0FBQ3ZHLGFBQWEsbUVBQWE7QUFDMUI7QUFDQTtBQUNBLGtCQUFrQix3QkFBd0I7QUFDMUM7QUFDQSxHQUFHLGtCQUFrQixrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsMkRBQTJEO0FBQ3pJO0FBQ0EsZ0JBQWdCLDhEQUFVO0FBQzFCO0FBQ0EsK0JBQStCLCtEQUFZO0FBQzNDLG9FQUFvRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQSwwQ0FBMEMsa0RBQVEsa0JBQWtCLFlBQVksc0VBQXdCLGdCQUFnQixJQUFJLHdCQUF3QixHQUFHO0FBQ3ZKLElBQUksZUFBZSxrREFBUSxrQkFBa0IsWUFBWSxzRUFBd0IsZ0JBQWdCLElBQUksd0JBQXdCLEdBQUc7QUFDaEksdUZBQXVGLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QixvREFBb0Q7QUFDcE07QUFDQTtBQUNBO0FBQ0EsR0FBRyxhQUFhLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixnREFBZ0Q7QUFDM0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDJEQUEyRCxrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsK0NBQStDO0FBQ3JLO0FBQ0EsK0JBQStCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbkg7QUFDQTtBQUNBLHdCQUF3Qix3REFBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGNBQWM7QUFDZCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsOENBQThDLGdCQUFnQix3Q0FBd0Msa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDJCQUEyQjtBQUMxTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx5QkFBeUIsa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGlCQUFpQjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnRUFBZ0Usa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRCQUE0QjtBQUNySjtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZFQUE2RTtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLG1DQUFtQyx3Q0FBUSxHQUFHLGNBQWMsd0NBQVEsVUFBVSxtREFBbUQsR0FBRztBQUNwSSxzQ0FBc0MsMEVBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUMsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsaUJBQWlCLDJEQUFhO0FBQzlCO0FBQ0Esb0hBQW9ILGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix1QkFBdUI7QUFDdE0sb0ZBQW9GLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3Qiw4Q0FBOEM7QUFDM0wsMkdBQTJHLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3Qix1RUFBdUU7QUFDM087QUFDQSxrQ0FBa0MsMkNBQTJDLGdDQUFnQyxrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0Isd0NBQXdDO0FBQzlNO0FBQ0EsOEJBQThCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLDJCQUEyQixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsZ0NBQWdDO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EseUNBQXlDLFFBQVE7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsS0FBSyxtRUFBbUUsa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRCQUE0QjtBQUM3SjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0VBQWdCO0FBQ3pCO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTLHNFQUF3QjtBQUMzQyxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELG1DQUFtQyx3Q0FBUSxHQUFHLGNBQWMsd0NBQVEsVUFBVSxtREFBbUQsR0FBRztBQUNwSSxzQ0FBc0MsMEVBQWtCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUMsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBLCtEQUErRCxrREFBUSxrQkFBa0Isa0NBQWtDO0FBQzNILG9GQUFvRixrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsOENBQThDO0FBQzNMLDJHQUEyRyxrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsdUVBQXVFO0FBQzNPO0FBQ0EsOEJBQThCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsbUNBQW1DLHdDQUFRLEdBQUcsY0FBYyx3Q0FBUSxVQUFVLG1EQUFtRCxHQUFHO0FBQ3BJLHNDQUFzQywwRUFBa0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsT0FBTyxvREFBYSxFQUFFLDJEQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBLDRCQUE0QixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsdUJBQXVCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix3QkFBd0Isa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLG1CQUFtQjtBQUN0RyxZQUFZLG1FQUFhO0FBQ3pCO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0EsRUFBRSxrQkFBa0Isa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLGdEQUFnRDtBQUM3SDtBQUNBLDhCQUE4QixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRCxpQ0FBaUMsd0NBQVEsR0FBRyxJQUFJLHdDQUFRLFVBQVUsZ0RBQWdELEdBQUc7QUFDckgsbUNBQW1DLDBFQUFrQjtBQUNyRDtBQUNBLE9BQU8sb0RBQWE7QUFDcEI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixjQUFjLGdCQUFnQjtBQUM5QixhQUFhLGdCQUFnQjtBQUM3Qix1QkFBdUIsZ0JBQWdCO0FBQ3ZDLGtCQUFrQixnQkFBZ0I7QUFDbEMsZUFBZSxnQkFBZ0I7QUFDL0Isa0JBQWtCLGdCQUFnQjtBQUNsQyx5QkFBeUIsZ0JBQWdCO0FBQ3pDLHlCQUF5QixnQkFBZ0I7QUFDekMscUJBQXFCO0FBQ3JCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsdUJBQXVCLDBFQUFpQjtBQUN4Qyx5QkFBeUIsa0RBQVEsbUJBQW1CLDhCQUE4QjtBQUNsRixpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQSxvSEFBb0gsa0RBQVEsa0JBQWtCLGtDQUFrQztBQUNoTCxvRkFBb0Ysa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDhDQUE4QztBQUMzTDtBQUNBLDhCQUE4QixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix3QkFBd0Isa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLG9EQUFvRDtBQUN2STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCxrQ0FBa0Msd0NBQVEsR0FBRyxnQkFBZ0Isd0NBQVEsVUFBVSxtRUFBbUUsY0FBYztBQUNoSyxxQ0FBcUMsMEVBQWtCO0FBQ3ZEO0FBQ0E7QUFDQSxPQUFPLG9EQUFhLEVBQUUsMkRBQW9CO0FBQzFDO0FBQ0EsQ0FBQztBQUNELHVCQUF1QiwwRUFBaUI7QUFDeEMseUJBQXlCLGtEQUFRLG1CQUFtQiw4QkFBOEI7QUFDbEY7QUFDQSx1QkFBdUIsa0RBQVEsa0JBQWtCLHdDQUF3QztBQUN6RixpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGtEQUFRLGdCQUFnQixzREFBc0Q7QUFDN0YscURBQXFELHVCQUF1QjtBQUM1RTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsMEVBQWtCO0FBQzNEO0FBQ0EsT0FBTyxvREFBYTtBQUNwQixRQUFRLHdDQUFRLEdBQUcsT0FBTyx3Q0FBUSxVQUFVLDBHQUEwRyxjQUFjO0FBQ3BLLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsZUFBZSxnQkFBZ0I7QUFDL0IsY0FBYyxnQkFBZ0I7QUFDOUIsd0JBQXdCLGdCQUFnQjtBQUN4QywwQkFBMEIsZ0JBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLG1CQUFtQixnQkFBZ0I7QUFDbkMsbUJBQW1CO0FBQ25CLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsdUJBQXVCLDBFQUFpQjtBQUN4QyxnREFBZ0Qsa0RBQVEsa0JBQWtCLG1FQUFtRTtBQUM3STtBQUNBLDJCQUEyQixrREFBUSxrQkFBa0IsK0RBQStEO0FBQ3BILG1DQUFtQywyREFBYTtBQUNoRDtBQUNBLENBQUM7O0FBRUQ7QUFDdUk7QUFDdkkiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXHJvdXRlc1xcY3J1ZC1pbnZpdGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuLi8uLi8uLi9kYi90by16b2QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2FwaS9yb3V0ZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0Um9sZXMgfSBmcm9tIFwiLi4vYWNjZXNzL3N0YXRlbWVudC5tanNcIjtcbmltcG9ydCB7IGdldE9yZ0FkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IG9yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uL2NhbGwubWpzXCI7XG5pbXBvcnQgeyBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMgfSBmcm9tIFwiLi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBoYXNQZXJtaXNzaW9uIH0gZnJvbSBcIi4uL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSb2xlcyB9IGZyb20gXCIuLi9vcmdhbml6YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vcmdhbml6YXRpb24vcm91dGVzL2NydWQtaW52aXRlcy50c1xuY29uc3QgYmFzZUludml0YXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGVtYWlsOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlciB0byBpbnZpdGVcIiB9KSxcblx0cm9sZTogei51bmlvbihbei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHJvbGUgdG8gYXNzaWduIHRvIHRoZSB1c2VyXCIgfSksIHouYXJyYXkoei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHJvbGVzIHRvIGFzc2lnbiB0byB0aGUgdXNlclwiIH0pKV0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgcm9sZShzKSB0byBhc3NpZ24gdG8gdGhlIHVzZXIuIEl0IGNhbiBiZSBgYWRtaW5gLCBgbWVtYmVyYCwgb3duZXIuIEVnOiBcXFwibWVtYmVyXFxcIlwiIH0pLFxuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBJRCB0byBpbnZpdGUgdGhlIHVzZXIgdG9cIiB9KS5vcHRpb25hbCgpLFxuXHRyZXNlbmQ6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJSZXNlbmQgdGhlIGludml0YXRpb24gZW1haWwsIGlmIHRoZSB1c2VyIGlzIGFscmVhZHkgaW52aXRlZC4gRWc6IHRydWVcIiB9KS5vcHRpb25hbCgpLFxuXHR0ZWFtSWQ6IHoudW5pb24oW3ouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0ZWFtIElEIHRvIGludml0ZSB0aGUgdXNlciB0b1wiIH0pLm9wdGlvbmFsKCksIHouYXJyYXkoei5zdHJpbmcoKSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0ZWFtIElEcyB0byBpbnZpdGUgdGhlIHVzZXIgdG9cIiB9KS5vcHRpb25hbCgpXSlcbn0pO1xuY29uc3QgY3JlYXRlSW52aXRhdGlvbiA9IChvcHRpb24pID0+IHtcblx0Y29uc3QgYWRkaXRpb25hbEZpZWxkc1NjaGVtYSA9IHRvWm9kU2NoZW1hKHtcblx0XHRmaWVsZHM6IG9wdGlvbj8uc2NoZW1hPy5pbnZpdGF0aW9uPy5hZGRpdGlvbmFsRmllbGRzIHx8IHt9LFxuXHRcdGlzQ2xpZW50U2lkZTogdHJ1ZVxuXHR9KTtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vaW52aXRlLW1lbWJlclwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0XHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0Ym9keTogei5vYmplY3Qoe1xuXHRcdFx0Li4uYmFzZUludml0YXRpb25TY2hlbWEuc2hhcGUsXG5cdFx0XHQuLi5hZGRpdGlvbmFsRmllbGRzU2NoZW1hLnNoYXBlXG5cdFx0fSksXG5cdFx0bWV0YWRhdGE6IHtcblx0XHRcdCRJbmZlcjogeyBib2R5OiB7fSB9LFxuXHRcdFx0b3BlbmFwaToge1xuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJjcmVhdGVPcmdhbml6YXRpb25JbnZpdGF0aW9uXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhbiBpbnZpdGF0aW9uIHRvIGFuIG9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRlbWFpbDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdHJvbGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGludml0ZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcdFx0XCJyb2xlXCIsXG5cdFx0XHRcdFx0XHRcdFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHRcdFx0XCJpbnZpdGVySWRcIixcblx0XHRcdFx0XHRcdFx0XCJzdGF0dXNcIixcblx0XHRcdFx0XHRcdFx0XCJleHBpcmVzQXRcIixcblx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkub3JnYW5pemF0aW9uSWQgfHwgc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRcdGlmICghb3JnYW5pemF0aW9uSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0Y29uc3QgZW1haWwgPSBjdHguYm9keS5lbWFpbC50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdFx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbik7XG5cdFx0Y29uc3QgbWVtYmVyID0gYXdhaXQgYWRhcHRlci5maW5kTWVtYmVyQnlPcmdJZCh7XG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0fSk7XG5cdFx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1FTUJFUl9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKCFhd2FpdCBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdFx0b3B0aW9uczogY3R4LmNvbnRleHQub3JnT3B0aW9ucyxcblx0XHRcdHBlcm1pc3Npb25zOiB7IGludml0YXRpb246IFtcImNyZWF0ZVwiXSB9LFxuXHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19JTlZJVEVfVVNFUlNfVE9fVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0Y29uc3QgY3JlYXRvclJvbGUgPSBjdHguY29udGV4dC5vcmdPcHRpb25zLmNyZWF0b3JSb2xlIHx8IFwib3duZXJcIjtcblx0XHRjb25zdCByb2xlcyA9IHBhcnNlUm9sZXMoY3R4LmJvZHkucm9sZSk7XG5cdFx0Y29uc3Qgcm9sZXNBcnJheSA9IHJvbGVzLnNwbGl0KFwiLFwiKS5tYXAoKHIpID0+IHIudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7XG5cdFx0Y29uc3QgZGVmYXVsdHMgPSBPYmplY3Qua2V5cyhkZWZhdWx0Um9sZXMpO1xuXHRcdGNvbnN0IGN1c3RvbVJvbGVzID0gT2JqZWN0LmtleXMoY3R4LmNvbnRleHQub3JnT3B0aW9ucy5yb2xlcyB8fCB7fSk7XG5cdFx0Y29uc3QgdmFsaWRTdGF0aWNSb2xlcyA9IG5ldyBTZXQoWy4uLmRlZmF1bHRzLCAuLi5jdXN0b21Sb2xlc10pO1xuXHRcdGNvbnN0IHVua25vd25Sb2xlcyA9IHJvbGVzQXJyYXkuZmlsdGVyKChyb2xlKSA9PiAhdmFsaWRTdGF0aWNSb2xlcy5oYXMocm9sZSkpO1xuXHRcdGlmICh1bmtub3duUm9sZXMubGVuZ3RoID4gMCkgaWYgKGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMuZHluYW1pY0FjY2Vzc0NvbnRyb2w/LmVuYWJsZWQpIHtcblx0XHRcdGNvbnN0IGZvdW5kUm9sZU5hbWVzID0gKGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJvcmdhbml6YXRpb25Sb2xlXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IG9yZ2FuaXphdGlvbklkXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRmaWVsZDogXCJyb2xlXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVua25vd25Sb2xlcyxcblx0XHRcdFx0XHRvcGVyYXRvcjogXCJpblwiXG5cdFx0XHRcdH1dXG5cdFx0XHR9KSkubWFwKChyKSA9PiByLnJvbGUpO1xuXHRcdFx0Y29uc3Qgc3RpbGxJbnZhbGlkID0gdW5rbm93blJvbGVzLmZpbHRlcigocikgPT4gIWZvdW5kUm9sZU5hbWVzLmluY2x1ZGVzKHIpKTtcblx0XHRcdGlmIChzdGlsbEludmFsaWQubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgJHtPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuUk9MRV9OT1RfRk9VTkR9OiAke3N0aWxsSW52YWxpZC5qb2luKFwiLCBcIil9YCB9KTtcblx0XHR9IGVsc2UgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgJHtPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuUk9MRV9OT1RfRk9VTkR9OiAke3Vua25vd25Sb2xlcy5qb2luKFwiLCBcIil9YCB9KTtcblx0XHRpZiAobWVtYmVyLnJvbGUgIT09IGNyZWF0b3JSb2xlICYmIHJvbGVzLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhjcmVhdG9yUm9sZSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0lOVklURV9VU0VSX1dJVEhfVEhJU19ST0xFIH0pO1xuXHRcdGlmIChhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeUVtYWlsKHtcblx0XHRcdGVtYWlsLFxuXHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVVNFUl9JU19BTFJFQURZX0FfTUVNQkVSX09GX1RISVNfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGNvbnN0IGFscmVhZHlJbnZpdGVkID0gYXdhaXQgYWRhcHRlci5maW5kUGVuZGluZ0ludml0YXRpb24oe1xuXHRcdFx0ZW1haWwsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmIChhbHJlYWR5SW52aXRlZC5sZW5ndGggJiYgIWN0eC5ib2R5LnJlc2VuZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVVNFUl9JU19BTFJFQURZX0lOVklURURfVE9fVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlJZChvcmdhbml6YXRpb25JZCk7XG5cdFx0aWYgKCFvcmdhbml6YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKGFscmVhZHlJbnZpdGVkLmxlbmd0aCAmJiBjdHguYm9keS5yZXNlbmQpIHtcblx0XHRcdGNvbnN0IGV4aXN0aW5nSW52aXRhdGlvbiA9IGFscmVhZHlJbnZpdGVkWzBdO1xuXHRcdFx0Y29uc3QgbmV3RXhwaXJlc0F0ID0gZ2V0RGF0ZShjdHguY29udGV4dC5vcmdPcHRpb25zLmludml0YXRpb25FeHBpcmVzSW4gfHwgMzYwMCAqIDQ4LCBcInNlY1wiKTtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIudXBkYXRlKHtcblx0XHRcdFx0bW9kZWw6IFwiaW52aXRhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBleGlzdGluZ0ludml0YXRpb24uaWRcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHVwZGF0ZTogeyBleHBpcmVzQXQ6IG5ld0V4cGlyZXNBdCB9XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHVwZGF0ZWRJbnZpdGF0aW9uID0ge1xuXHRcdFx0XHQuLi5leGlzdGluZ0ludml0YXRpb24sXG5cdFx0XHRcdGV4cGlyZXNBdDogbmV3RXhwaXJlc0F0XG5cdFx0XHR9O1xuXHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMuc2VuZEludml0YXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcmdPcHRpb25zLnNlbmRJbnZpdGF0aW9uRW1haWwoe1xuXHRcdFx0XHRpZDogdXBkYXRlZEludml0YXRpb24uaWQsXG5cdFx0XHRcdHJvbGU6IHVwZGF0ZWRJbnZpdGF0aW9uLnJvbGUsXG5cdFx0XHRcdGVtYWlsOiB1cGRhdGVkSW52aXRhdGlvbi5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRvcmdhbml6YXRpb24sXG5cdFx0XHRcdGludml0ZXI6IHtcblx0XHRcdFx0XHQuLi5tZW1iZXIsXG5cdFx0XHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGludml0YXRpb246IHVwZGF0ZWRJbnZpdGF0aW9uXG5cdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKHVwZGF0ZWRJbnZpdGF0aW9uKTtcblx0XHR9XG5cdFx0aWYgKGFscmVhZHlJbnZpdGVkLmxlbmd0aCAmJiBjdHguY29udGV4dC5vcmdPcHRpb25zLmNhbmNlbFBlbmRpbmdJbnZpdGF0aW9uc09uUmVJbnZpdGUpIGF3YWl0IGFkYXB0ZXIudXBkYXRlSW52aXRhdGlvbih7XG5cdFx0XHRpbnZpdGF0aW9uSWQ6IGFscmVhZHlJbnZpdGVkWzBdLmlkLFxuXHRcdFx0c3RhdHVzOiBcImNhbmNlbGVkXCJcblx0XHR9KTtcblx0XHRjb25zdCBpbnZpdGF0aW9uTGltaXQgPSB0eXBlb2YgY3R4LmNvbnRleHQub3JnT3B0aW9ucy5pbnZpdGF0aW9uTGltaXQgPT09IFwiZnVuY3Rpb25cIiA/IGF3YWl0IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMuaW52aXRhdGlvbkxpbWl0KHtcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdG9yZ2FuaXphdGlvbixcblx0XHRcdG1lbWJlclxuXHRcdH0sIGN0eC5jb250ZXh0KSA6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMuaW52aXRhdGlvbkxpbWl0ID8/IDEwMDtcblx0XHRpZiAoKGF3YWl0IGFkYXB0ZXIuZmluZFBlbmRpbmdJbnZpdGF0aW9ucyh7IG9yZ2FuaXphdGlvbklkIH0pKS5sZW5ndGggPj0gaW52aXRhdGlvbkxpbWl0KSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuSU5WSVRBVElPTl9MSU1JVF9SRUFDSEVEIH0pO1xuXHRcdGlmIChjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zICYmIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMudGVhbXMuZW5hYmxlZCAmJiB0eXBlb2YgY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcy5tYXhpbXVtTWVtYmVyc1BlclRlYW0gIT09IFwidW5kZWZpbmVkXCIgJiYgXCJ0ZWFtSWRcIiBpbiBjdHguYm9keSAmJiBjdHguYm9keS50ZWFtSWQpIHtcblx0XHRcdGNvbnN0IHRlYW1JZHMkMSA9IHR5cGVvZiBjdHguYm9keS50ZWFtSWQgPT09IFwic3RyaW5nXCIgPyBbY3R4LmJvZHkudGVhbUlkXSA6IGN0eC5ib2R5LnRlYW1JZDtcblx0XHRcdGZvciAoY29uc3QgdGVhbUlkIG9mIHRlYW1JZHMkMSkge1xuXHRcdFx0XHRjb25zdCB0ZWFtID0gYXdhaXQgYWRhcHRlci5maW5kVGVhbUJ5SWQoe1xuXHRcdFx0XHRcdHRlYW1JZCxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0XHRpbmNsdWRlVGVhbU1lbWJlcnM6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghdGVhbSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVEVBTV9OT1RfRk9VTkQgfSk7XG5cdFx0XHRcdGNvbnN0IG1heGltdW1NZW1iZXJzUGVyVGVhbSA9IHR5cGVvZiBjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zLm1heGltdW1NZW1iZXJzUGVyVGVhbSA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcy5tYXhpbXVtTWVtYmVyc1BlclRlYW0oe1xuXHRcdFx0XHRcdHRlYW1JZCxcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0XHRcdH0pIDogY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcy5tYXhpbXVtTWVtYmVyc1BlclRlYW07XG5cdFx0XHRcdGlmICh0ZWFtLm1lbWJlcnMubGVuZ3RoID49IG1heGltdW1NZW1iZXJzUGVyVGVhbSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlRFQU1fTUVNQkVSX0xJTUlUX1JFQUNIRUQgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHRlYW1JZHMgPSBcInRlYW1JZFwiIGluIGN0eC5ib2R5ID8gdHlwZW9mIGN0eC5ib2R5LnRlYW1JZCA9PT0gXCJzdHJpbmdcIiA/IFtjdHguYm9keS50ZWFtSWRdIDogY3R4LmJvZHkudGVhbUlkID8/IFtdIDogW107XG5cdFx0Y29uc3QgeyBlbWFpbDogXywgcm9sZTogX18sIG9yZ2FuaXphdGlvbklkOiBfX18sIHJlc2VuZDogX19fXywgLi4uYWRkaXRpb25hbEZpZWxkcyB9ID0gY3R4LmJvZHk7XG5cdFx0bGV0IGludml0YXRpb25EYXRhID0ge1xuXHRcdFx0cm9sZTogcm9sZXMsXG5cdFx0XHRlbWFpbCxcblx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0dGVhbUlkcyxcblx0XHRcdC4uLmFkZGl0aW9uYWxGaWVsZHMgPyBhZGRpdGlvbmFsRmllbGRzIDoge31cblx0XHR9O1xuXHRcdGlmIChvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVDcmVhdGVJbnZpdGF0aW9uKSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wdGlvbj8ub3JnYW5pemF0aW9uSG9va3MuYmVmb3JlQ3JlYXRlSW52aXRhdGlvbih7XG5cdFx0XHRcdGludml0YXRpb246IHtcblx0XHRcdFx0XHQuLi5pbnZpdGF0aW9uRGF0YSxcblx0XHRcdFx0XHRpbnZpdGVySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdFx0XHR0ZWFtSWQ6IHRlYW1JZHMubGVuZ3RoID4gMCA/IHRlYW1JZHNbMF0gOiB2b2lkIDBcblx0XHRcdFx0fSxcblx0XHRcdFx0aW52aXRlcjogc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRvcmdhbml6YXRpb25cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkgaW52aXRhdGlvbkRhdGEgPSB7XG5cdFx0XHRcdC4uLmludml0YXRpb25EYXRhLFxuXHRcdFx0XHQuLi5yZXNwb25zZS5kYXRhXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRjb25zdCBpbnZpdGF0aW9uID0gYXdhaXQgYWRhcHRlci5jcmVhdGVJbnZpdGF0aW9uKHtcblx0XHRcdGludml0YXRpb246IGludml0YXRpb25EYXRhLFxuXHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMuc2VuZEludml0YXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcmdPcHRpb25zLnNlbmRJbnZpdGF0aW9uRW1haWwoe1xuXHRcdFx0aWQ6IGludml0YXRpb24uaWQsXG5cdFx0XHRyb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG5cdFx0XHRlbWFpbDogaW52aXRhdGlvbi5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0b3JnYW5pemF0aW9uLFxuXHRcdFx0aW52aXRlcjoge1xuXHRcdFx0XHQuLi5tZW1iZXIsXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdFx0fSxcblx0XHRcdGludml0YXRpb25cblx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdGlmIChvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlckNyZWF0ZUludml0YXRpb24pIGF3YWl0IG9wdGlvbj8ub3JnYW5pemF0aW9uSG9va3MuYWZ0ZXJDcmVhdGVJbnZpdGF0aW9uKHtcblx0XHRcdGludml0YXRpb24sXG5cdFx0XHRpbnZpdGVyOiBzZXNzaW9uLnVzZXIsXG5cdFx0XHRvcmdhbml6YXRpb25cblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oaW52aXRhdGlvbik7XG5cdH0pO1xufTtcbmNvbnN0IGFjY2VwdEludml0YXRpb25Cb2R5U2NoZW1hID0gei5vYmplY3QoeyBpbnZpdGF0aW9uSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgaW52aXRhdGlvbiB0byBhY2NlcHRcIiB9KSB9KTtcbmNvbnN0IGFjY2VwdEludml0YXRpb24gPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9hY2NlcHQtaW52aXRhdGlvblwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IGFjY2VwdEludml0YXRpb25Cb2R5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbb3JnTWlkZGxld2FyZSwgb3JnU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiQWNjZXB0IGFuIGludml0YXRpb24gdG8gYW4gb3JnYW5pemF0aW9uXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRpbnZpdGF0aW9uOiB7IHR5cGU6IFwib2JqZWN0XCIgfSxcblx0XHRcdFx0XHRtZW1iZXI6IHsgdHlwZTogXCJvYmplY3RcIiB9XG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRjb25zdCBpbnZpdGF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kSW52aXRhdGlvbkJ5SWQoY3R4LmJvZHkuaW52aXRhdGlvbklkKTtcblx0aWYgKCFpbnZpdGF0aW9uIHx8IGludml0YXRpb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkgfHwgaW52aXRhdGlvbi5zdGF0dXMgIT09IFwicGVuZGluZ1wiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZJVEFUSU9OX05PVF9GT1VORCB9KTtcblx0aWYgKGludml0YXRpb24uZW1haWwudG9Mb3dlckNhc2UoKSAhPT0gc2Vzc2lvbi51c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9USEVfUkVDSVBJRU5UX09GX1RIRV9JTlZJVEFUSU9OIH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3JnT3B0aW9ucy5yZXF1aXJlRW1haWxWZXJpZmljYXRpb25Pbkludml0YXRpb24gJiYgIXNlc3Npb24udXNlci5lbWFpbFZlcmlmaWVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuRU1BSUxfVkVSSUZJQ0FUSU9OX1JFUVVJUkVEX0JFRk9SRV9BQ0NFUFRJTkdfT1JfUkVKRUNUSU5HX0lOVklUQVRJT04gfSk7XG5cdGNvbnN0IG1lbWJlcnNoaXBMaW1pdCA9IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnM/Lm1lbWJlcnNoaXBMaW1pdCB8fCAxMDA7XG5cdGlmIChhd2FpdCBhZGFwdGVyLmNvdW50TWVtYmVycyh7IG9yZ2FuaXphdGlvbklkOiBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkIH0pID49IG1lbWJlcnNoaXBMaW1pdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9NRU1CRVJTSElQX0xJTUlUX1JFQUNIRUQgfSk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQoaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCk7XG5cdGlmICghb3JnYW5pemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZUFjY2VwdEludml0YXRpb24pIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZUFjY2VwdEludml0YXRpb24oe1xuXHRcdGludml0YXRpb24sXG5cdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0Y29uc3QgYWNjZXB0ZWRJID0gYXdhaXQgYWRhcHRlci51cGRhdGVJbnZpdGF0aW9uKHtcblx0XHRpbnZpdGF0aW9uSWQ6IGN0eC5ib2R5Lmludml0YXRpb25JZCxcblx0XHRzdGF0dXM6IFwiYWNjZXB0ZWRcIlxuXHR9KTtcblx0aWYgKCFhY2NlcHRlZEkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLkZBSUxFRF9UT19SRVRSSUVWRV9JTlZJVEFUSU9OIH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcyAmJiBjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zLmVuYWJsZWQgJiYgXCJ0ZWFtSWRcIiBpbiBhY2NlcHRlZEkgJiYgYWNjZXB0ZWRJLnRlYW1JZCkge1xuXHRcdGNvbnN0IHRlYW1JZHMgPSBhY2NlcHRlZEkudGVhbUlkLnNwbGl0KFwiLFwiKTtcblx0XHRjb25zdCBvbmx5T25lID0gdGVhbUlkcy5sZW5ndGggPT09IDE7XG5cdFx0Zm9yIChjb25zdCB0ZWFtSWQgb2YgdGVhbUlkcykge1xuXHRcdFx0YXdhaXQgYWRhcHRlci5maW5kT3JDcmVhdGVUZWFtTWVtYmVyKHtcblx0XHRcdFx0dGVhbUlkLFxuXHRcdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAodHlwZW9mIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMudGVhbXMubWF4aW11bU1lbWJlcnNQZXJUZWFtICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdGlmIChhd2FpdCBhZGFwdGVyLmNvdW50VGVhbU1lbWJlcnMoeyB0ZWFtSWQgfSkgPj0gKHR5cGVvZiBjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zLm1heGltdW1NZW1iZXJzUGVyVGVhbSA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcy5tYXhpbXVtTWVtYmVyc1BlclRlYW0oe1xuXHRcdFx0XHRcdHRlYW1JZCxcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbklkOiBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkXG5cdFx0XHRcdH0pIDogY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcy5tYXhpbXVtTWVtYmVyc1BlclRlYW0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVEVBTV9NRU1CRVJfTElNSVRfUkVBQ0hFRCB9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKG9ubHlPbmUpIHtcblx0XHRcdGNvbnN0IHRlYW1JZCA9IHRlYW1JZHNbMF07XG5cdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRzZXNzaW9uOiBhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZVRlYW0oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCB0ZWFtSWQsIGN0eCksXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuY3JlYXRlTWVtYmVyKHtcblx0XHRvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCxcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRyb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG5cdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHR9KTtcblx0YXdhaXQgYWRhcHRlci5zZXRBY3RpdmVPcmdhbml6YXRpb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkLCBjdHgpO1xuXHRpZiAoIWFjY2VwdGVkSSkgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRzdGF0dXM6IDQwMCxcblx0XHRib2R5OiB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5JTlZJVEFUSU9OX05PVF9GT1VORCB9XG5cdH0pO1xuXHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyQWNjZXB0SW52aXRhdGlvbikgYXdhaXQgb3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3MuYWZ0ZXJBY2NlcHRJbnZpdGF0aW9uKHtcblx0XHRpbnZpdGF0aW9uOiBhY2NlcHRlZEksXG5cdFx0bWVtYmVyLFxuXHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRvcmdhbml6YXRpb25cblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0aW52aXRhdGlvbjogYWNjZXB0ZWRJLFxuXHRcdG1lbWJlclxuXHR9KTtcbn0pO1xuY29uc3QgcmVqZWN0SW52aXRhdGlvbkJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IGludml0YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSBpbnZpdGF0aW9uIHRvIHJlamVjdFwiIH0pIH0pO1xuY29uc3QgcmVqZWN0SW52aXRhdGlvbiA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL3JlamVjdC1pbnZpdGF0aW9uXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogcmVqZWN0SW52aXRhdGlvbkJvZHlTY2hlbWEsXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZWplY3QgYW4gaW52aXRhdGlvbiB0byBhbiBvcmdhbml6YXRpb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdGludml0YXRpb246IHsgdHlwZTogXCJvYmplY3RcIiB9LFxuXHRcdFx0XHRcdG1lbWJlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFkYXB0ZXIgPSBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBjdHguY29udGV4dC5vcmdPcHRpb25zKTtcblx0Y29uc3QgaW52aXRhdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZEludml0YXRpb25CeUlkKGN0eC5ib2R5Lmludml0YXRpb25JZCk7XG5cdGlmICghaW52aXRhdGlvbiB8fCBpbnZpdGF0aW9uLnN0YXR1cyAhPT0gXCJwZW5kaW5nXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJJbnZpdGF0aW9uIG5vdCBmb3VuZCFcIiB9KTtcblx0aWYgKGludml0YXRpb24uZW1haWwudG9Mb3dlckNhc2UoKSAhPT0gc2Vzc2lvbi51c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9USEVfUkVDSVBJRU5UX09GX1RIRV9JTlZJVEFUSU9OIH0pO1xuXHRpZiAoY3R4LmNvbnRleHQub3JnT3B0aW9ucy5yZXF1aXJlRW1haWxWZXJpZmljYXRpb25Pbkludml0YXRpb24gJiYgIXNlc3Npb24udXNlci5lbWFpbFZlcmlmaWVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuRU1BSUxfVkVSSUZJQ0FUSU9OX1JFUVVJUkVEX0JFRk9SRV9BQ0NFUFRJTkdfT1JfUkVKRUNUSU5HX0lOVklUQVRJT04gfSk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQoaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCk7XG5cdGlmICghb3JnYW5pemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZVJlamVjdEludml0YXRpb24pIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZVJlamVjdEludml0YXRpb24oe1xuXHRcdGludml0YXRpb24sXG5cdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0Y29uc3QgcmVqZWN0ZWRJID0gYXdhaXQgYWRhcHRlci51cGRhdGVJbnZpdGF0aW9uKHtcblx0XHRpbnZpdGF0aW9uSWQ6IGN0eC5ib2R5Lmludml0YXRpb25JZCxcblx0XHRzdGF0dXM6IFwicmVqZWN0ZWRcIlxuXHR9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlclJlamVjdEludml0YXRpb24pIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyUmVqZWN0SW52aXRhdGlvbih7XG5cdFx0aW52aXRhdGlvbjogcmVqZWN0ZWRJIHx8IGludml0YXRpb24sXG5cdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRpbnZpdGF0aW9uOiByZWplY3RlZEksXG5cdFx0bWVtYmVyOiBudWxsXG5cdH0pO1xufSk7XG5jb25zdCBjYW5jZWxJbnZpdGF0aW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgaW52aXRhdGlvbklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgSUQgb2YgdGhlIGludml0YXRpb24gdG8gY2FuY2VsXCIgfSkgfSk7XG5jb25zdCBjYW5jZWxJbnZpdGF0aW9uID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vY2FuY2VsLWludml0YXRpb25cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiBjYW5jZWxJbnZpdGF0aW9uQm9keVNjaGVtYSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdHVzZTogW29yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlXSxcblx0b3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImNhbmNlbE9yZ2FuaXphdGlvbkludml0YXRpb25cIixcblx0XHRkZXNjcmlwdGlvbjogXCJDYW5jZWwgYW4gaW52aXRhdGlvbiB0byBhbiBvcmdhbml6YXRpb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBpbnZpdGF0aW9uOiB7IHR5cGU6IFwib2JqZWN0XCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGNvbnN0IGludml0YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRJbnZpdGF0aW9uQnlJZChjdHguYm9keS5pbnZpdGF0aW9uSWQpO1xuXHRpZiAoIWludml0YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLklOVklUQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRjb25zdCBtZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1FTUJFUl9OT1RfRk9VTkQgfSk7XG5cdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0cm9sZTogbWVtYmVyLnJvbGUsXG5cdFx0b3B0aW9uczogY3R4LmNvbnRleHQub3JnT3B0aW9ucyxcblx0XHRwZXJtaXNzaW9uczogeyBpbnZpdGF0aW9uOiBbXCJjYW5jZWxcIl0gfSxcblx0XHRvcmdhbml6YXRpb25JZDogaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZFxuXHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19DQU5DRUxfVEhJU19JTlZJVEFUSU9OIH0pO1xuXHRjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeUlkKGludml0YXRpb24ub3JnYW5pemF0aW9uSWQpO1xuXHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVDYW5jZWxJbnZpdGF0aW9uKSBhd2FpdCBvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVDYW5jZWxJbnZpdGF0aW9uKHtcblx0XHRpbnZpdGF0aW9uLFxuXHRcdGNhbmNlbGxlZEJ5OiBzZXNzaW9uLnVzZXIsXG5cdFx0b3JnYW5pemF0aW9uXG5cdH0pO1xuXHRjb25zdCBjYW5jZWxlZEkgPSBhd2FpdCBhZGFwdGVyLnVwZGF0ZUludml0YXRpb24oe1xuXHRcdGludml0YXRpb25JZDogY3R4LmJvZHkuaW52aXRhdGlvbklkLFxuXHRcdHN0YXR1czogXCJjYW5jZWxlZFwiXG5cdH0pO1xuXHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyQ2FuY2VsSW52aXRhdGlvbikgYXdhaXQgb3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3MuYWZ0ZXJDYW5jZWxJbnZpdGF0aW9uKHtcblx0XHRpbnZpdGF0aW9uOiBjYW5jZWxlZEkgfHwgaW52aXRhdGlvbixcblx0XHRjYW5jZWxsZWRCeTogc2Vzc2lvbi51c2VyLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKGNhbmNlbGVkSSk7XG59KTtcbmNvbnN0IGdldEludml0YXRpb25RdWVyeVNjaGVtYSA9IHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgaW52aXRhdGlvbiB0byBnZXRcIiB9KSB9KTtcbmNvbnN0IGdldEludml0YXRpb24gPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9nZXQtaW52aXRhdGlvblwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0dXNlOiBbb3JnTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRxdWVyeTogZ2V0SW52aXRhdGlvblF1ZXJ5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IGFuIGludml0YXRpb24gYnkgSURcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRlbWFpbDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0cm9sZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdGludml0ZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbk5hbWU6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdG9yZ2FuaXphdGlvblNsdWc6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdGludml0ZXJFbWFpbDogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcdFwicm9sZVwiLFxuXHRcdFx0XHRcdFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHRcImludml0ZXJJZFwiLFxuXHRcdFx0XHRcdFwic3RhdHVzXCIsXG5cdFx0XHRcdFx0XCJleHBpcmVzQXRcIixcblx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvbk5hbWVcIixcblx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvblNsdWdcIixcblx0XHRcdFx0XHRcImludml0ZXJFbWFpbFwiXG5cdFx0XHRcdF1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfSk7XG5cdGNvbnN0IGFkYXB0ZXIgPSBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBvcHRpb25zKTtcblx0Y29uc3QgaW52aXRhdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZEludml0YXRpb25CeUlkKGN0eC5xdWVyeS5pZCk7XG5cdGlmICghaW52aXRhdGlvbiB8fCBpbnZpdGF0aW9uLnN0YXR1cyAhPT0gXCJwZW5kaW5nXCIgfHwgaW52aXRhdGlvbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkludml0YXRpb24gbm90IGZvdW5kIVwiIH0pO1xuXHRpZiAoaW52aXRhdGlvbi5lbWFpbC50b0xvd2VyQ2FzZSgpICE9PSBzZXNzaW9uLnVzZXIuZW1haWwudG9Mb3dlckNhc2UoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX1RIRV9SRUNJUElFTlRfT0ZfVEhFX0lOVklUQVRJT04gfSk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQoaW52aXRhdGlvbi5vcmdhbml6YXRpb25JZCk7XG5cdGlmICghb3JnYW5pemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRjb25zdCBtZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IGludml0YXRpb24uaW52aXRlcklkLFxuXHRcdG9yZ2FuaXphdGlvbklkOiBpbnZpdGF0aW9uLm9yZ2FuaXphdGlvbklkXG5cdH0pO1xuXHRpZiAoIW1lbWJlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuSU5WSVRFUl9JU19OT19MT05HRVJfQV9NRU1CRVJfT0ZfVEhFX09SR0FOSVpBVElPTiB9KTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHQuLi5pbnZpdGF0aW9uLFxuXHRcdG9yZ2FuaXphdGlvbk5hbWU6IG9yZ2FuaXphdGlvbi5uYW1lLFxuXHRcdG9yZ2FuaXphdGlvblNsdWc6IG9yZ2FuaXphdGlvbi5zbHVnLFxuXHRcdGludml0ZXJFbWFpbDogbWVtYmVyLnVzZXIuZW1haWxcblx0fSk7XG59KTtcbmNvbnN0IGxpc3RJbnZpdGF0aW9uUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7IG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgSUQgb2YgdGhlIG9yZ2FuaXphdGlvbiB0byBsaXN0IGludml0YXRpb25zIGZvclwiIH0pLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKTtcbmNvbnN0IGxpc3RJbnZpdGF0aW9ucyA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2xpc3QtaW52aXRhdGlvbnNcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdHF1ZXJ5OiBsaXN0SW52aXRhdGlvblF1ZXJ5U2NoZW1hXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFwiTm90IGF1dGhlbnRpY2F0ZWRcIiB9KTtcblx0Y29uc3Qgb3JnSWQgPSBjdHgucXVlcnk/Lm9yZ2FuaXphdGlvbklkIHx8IHNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0aWYgKCFvcmdJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIk9yZ2FuaXphdGlvbiBJRCBpcyByZXF1aXJlZFwiIH0pO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGlmICghYXdhaXQgYWRhcHRlci5maW5kTWVtYmVyQnlPcmdJZCh7XG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0b3JnYW5pemF0aW9uSWQ6IG9yZ0lkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBcIllvdSBhcmUgbm90IGEgbWVtYmVyIG9mIHRoaXMgb3JnYW5pemF0aW9uXCIgfSk7XG5cdGNvbnN0IGludml0YXRpb25zID0gYXdhaXQgYWRhcHRlci5saXN0SW52aXRhdGlvbnMoeyBvcmdhbml6YXRpb25JZDogb3JnSWQgfSk7XG5cdHJldHVybiBjdHguanNvbihpbnZpdGF0aW9ucyk7XG59KTtcbi8qKlxuKiBMaXN0IGFsbCBpbnZpdGF0aW9ucyBhIHVzZXIgaGFzIHJlY2VpdmVkXG4qL1xuY29uc3QgbGlzdFVzZXJJbnZpdGF0aW9ucyA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2xpc3QtdXNlci1pbnZpdGF0aW9uc1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0dXNlOiBbb3JnTWlkZGxld2FyZV0sXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7IGVtYWlsOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gbGlzdCBpbnZpdGF0aW9ucyBmb3IuIFRoaXMgb25seSB3b3JrcyBmb3Igc2VydmVyIHNpZGUgQVBJIGNhbGxzLlwiIH0pLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgYWxsIGludml0YXRpb25zIGEgdXNlciBoYXMgcmVjZWl2ZWRcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczoge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0ZW1haWw6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0cm9sZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRvcmdhbml6YXRpb25OYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGludml0ZXJJZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgSUQgb2YgdGhlIHVzZXIgd2hvIGNyZWF0ZWQgdGhlIGludml0YXRpb25cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHRlYW1JZDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgSUQgb2YgdGhlIHRlYW0gYXNzb2NpYXRlZCB3aXRoIHRoZSBpbnZpdGF0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XCJyb2xlXCIsXG5cdFx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvbk5hbWVcIixcblx0XHRcdFx0XHRcdFwiaW52aXRlcklkXCIsXG5cdFx0XHRcdFx0XHRcInN0YXR1c1wiLFxuXHRcdFx0XHRcdFx0XCJleHBpcmVzQXRcIixcblx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKGN0eC5yZXF1ZXN0ICYmIGN0eC5xdWVyeT8uZW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJVc2VyIGVtYWlsIGNhbm5vdCBiZSBwYXNzZWQgZm9yIGNsaWVudCBzaWRlIEFQSSBjYWxscy5cIiB9KTtcblx0Y29uc3QgdXNlckVtYWlsID0gc2Vzc2lvbj8udXNlci5lbWFpbCB8fCBjdHgucXVlcnk/LmVtYWlsO1xuXHRpZiAoIXVzZXJFbWFpbCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIk1pc3Npbmcgc2Vzc2lvbiBoZWFkZXJzLCBvciBlbWFpbCBxdWVyeSBwYXJhbWV0ZXIuXCIgfSk7XG5cdGNvbnN0IHBlbmRpbmdJbnZpdGF0aW9ucyA9IChhd2FpdCBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBvcHRpb25zKS5saXN0VXNlckludml0YXRpb25zKHVzZXJFbWFpbCkpLmZpbHRlcigoaW52KSA9PiBpbnYuc3RhdHVzID09PSBcInBlbmRpbmdcIik7XG5cdHJldHVybiBjdHguanNvbihwZW5kaW5nSW52aXRhdGlvbnMpO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYWNjZXB0SW52aXRhdGlvbiwgY2FuY2VsSW52aXRhdGlvbiwgY3JlYXRlSW52aXRhdGlvbiwgZ2V0SW52aXRhdGlvbiwgbGlzdEludml0YXRpb25zLCBsaXN0VXNlckludml0YXRpb25zLCByZWplY3RJbnZpdGF0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcnVkLWludml0ZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-invites.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-members.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/routes/crud-members.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addMember: () => (/* binding */ addMember),\n/* harmony export */   getActiveMember: () => (/* binding */ getActiveMember),\n/* harmony export */   getActiveMemberRole: () => (/* binding */ getActiveMemberRole),\n/* harmony export */   leaveOrganization: () => (/* binding */ leaveOrganization),\n/* harmony export */   listMembers: () => (/* binding */ listMembers),\n/* harmony export */   removeMember: () => (/* binding */ removeMember),\n/* harmony export */   updateMemberRole: () => (/* binding */ updateMemberRole)\n/* harmony export */ });\n/* harmony import */ var _db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var _organization_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../organization.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/organization.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/routes/crud-members.ts\nconst baseMemberSchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_11__.coerce.string().meta({ description: \"The user Id which represents the user to be added as a member. If `null` is provided, then it's expected to provide session headers. Eg: \\\"user-id\\\"\" }),\n\trole: zod__WEBPACK_IMPORTED_MODULE_11__.union([zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string())]).meta({ description: \"The role(s) to assign to the new member. Eg: [\\\"admin\\\", \\\"sale\\\"]\" }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"An optional organization ID to pass. If not provided, will default to the user's active organization. Eg: \\\"org-id\\\"\" }).optional(),\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"An optional team ID to add the member to. Eg: \\\"team-id\\\"\" }).optional()\n});\nconst addMember = (option) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\tfields: option?.schema?.member?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)({\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\t\t...baseMemberSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\toperationId: \"addOrganizationMember\",\n\t\t\t\tdescription: \"Add a member to an organization\"\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.body.userId ? await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__.getSessionFromCtx)(ctx).catch((e) => null) : null;\n\t\tconst orgId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\t\tif (!orgId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t\t});\n\t\tconst teamId = \"teamId\" in ctx.body ? ctx.body.teamId : void 0;\n\t\tif (teamId && !ctx.context.orgOptions.teams?.enabled) {\n\t\t\tctx.context.logger.error(\"Teams are not enabled\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Teams are not enabled\" });\n\t\t}\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, option);\n\t\tconst user = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\t\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\t\tif (await adapter.findMemberByEmail({\n\t\t\temail: user.email,\n\t\t\torganizationId: orgId\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION });\n\t\tif (teamId) {\n\t\t\tconst team = await adapter.findTeamById({\n\t\t\t\tteamId,\n\t\t\t\torganizationId: orgId\n\t\t\t});\n\t\t\tif (!team || team.organizationId !== orgId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\t}\n\t\tconst membershipLimit = ctx.context.orgOptions?.membershipLimit || 100;\n\t\tif (await adapter.countMembers({ organizationId: orgId }) >= membershipLimit) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED });\n\t\tconst { role: _, userId: __, organizationId: ___, ...additionalFields } = ctx.body;\n\t\tconst organization = await adapter.findOrganizationById(orgId);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tlet memberData = {\n\t\t\torganizationId: orgId,\n\t\t\tuserId: user.id,\n\t\t\trole: (0,_organization_mjs__WEBPACK_IMPORTED_MODULE_7__.parseRoles)(ctx.body.role),\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t...additionalFields ? additionalFields : {}\n\t\t};\n\t\tif (option?.organizationHooks?.beforeAddMember) {\n\t\t\tconst response = await option?.organizationHooks.beforeAddMember({\n\t\t\t\tmember: {\n\t\t\t\t\tuserId: user.id,\n\t\t\t\t\torganizationId: orgId,\n\t\t\t\t\trole: (0,_organization_mjs__WEBPACK_IMPORTED_MODULE_7__.parseRoles)(ctx.body.role),\n\t\t\t\t\t...additionalFields\n\t\t\t\t},\n\t\t\t\tuser,\n\t\t\t\torganization\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) memberData = {\n\t\t\t\t...memberData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst createdMember = await adapter.createMember(memberData);\n\t\tif (teamId) await adapter.findOrCreateTeamMember({\n\t\t\tuserId: user.id,\n\t\t\tteamId\n\t\t});\n\t\tif (option?.organizationHooks?.afterAddMember) await option?.organizationHooks.afterAddMember({\n\t\t\tmember: createdMember,\n\t\t\tuser,\n\t\t\torganization\n\t\t});\n\t\treturn ctx.json(createdMember);\n\t});\n};\nconst removeMemberBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tmemberIdOrEmail: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The ID or email of the member to remove\" }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: \\\"org-id\\\"\" }).optional()\n});\nconst removeMember = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/remove-member\", {\n\tmethod: \"POST\",\n\tbody: removeMemberBodySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a member from an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { member: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\"role\"\n\t\t\t\t\t]\n\t\t\t\t} },\n\t\t\t\trequired: [\"member\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, options);\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tlet toBeRemovedMember = null;\n\tif (ctx.body.memberIdOrEmail.includes(\"@\")) toBeRemovedMember = await adapter.findMemberByEmail({\n\t\temail: ctx.body.memberIdOrEmail,\n\t\torganizationId\n\t});\n\telse {\n\t\tconst result = await adapter.findMemberById(ctx.body.memberIdOrEmail);\n\t\tif (!result) toBeRemovedMember = null;\n\t\telse {\n\t\t\tconst { user: _user, ...member$1 } = result;\n\t\t\ttoBeRemovedMember = member$1;\n\t\t}\n\t}\n\tif (!toBeRemovedMember) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst roles = toBeRemovedMember.role.split(\",\");\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tif (roles.includes(creatorRole)) {\n\t\tif (member.role !== creatorRole) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t\tconst { members } = await adapter.listMembers({ organizationId });\n\t\tif (members.filter((member$1) => {\n\t\t\treturn member$1.role.split(\",\").includes(creatorRole);\n\t\t}).length <= 1) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t}\n\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_6__.hasPermission)({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"delete\"] },\n\t\torganizationId\n\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER });\n\tif (toBeRemovedMember?.organizationId !== organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst organization = await adapter.findOrganizationById(organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingRemoved = await ctx.context.internalAdapter.findUserById(toBeRemovedMember.userId);\n\tif (!userBeingRemoved) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tif (options?.organizationHooks?.beforeRemoveMember) await options?.organizationHooks.beforeRemoveMember({\n\t\tmember: toBeRemovedMember,\n\t\tuser: userBeingRemoved,\n\t\torganization\n\t});\n\tawait adapter.deleteMember({\n\t\tmemberId: toBeRemovedMember.id,\n\t\torganizationId,\n\t\tuserId: toBeRemovedMember.userId\n\t});\n\tif (session.user.id === toBeRemovedMember.userId && session.session.activeOrganizationId === toBeRemovedMember.organizationId) await adapter.setActiveOrganization(session.session.token, null, ctx);\n\tif (options?.organizationHooks?.afterRemoveMember) await options?.organizationHooks.afterRemoveMember({\n\t\tmember: toBeRemovedMember,\n\t\tuser: userBeingRemoved,\n\t\torganization\n\t});\n\treturn ctx.json({ member: toBeRemovedMember });\n});\nconst updateMemberRoleBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\trole: zod__WEBPACK_IMPORTED_MODULE_11__.union([zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string())]).meta({ description: \"The new role to be applied. This can be a string or array of strings representing the roles. Eg: [\\\"admin\\\", \\\"sale\\\"]\" }),\n\tmemberId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The member id to apply the role update to. Eg: \\\"member-id\\\"\" }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: \\\"organization-id\\\"\" }).optional()\n});\nconst updateMemberRole = (option) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/update-member-role\", {\n\tmethod: \"POST\",\n\tbody: updateMemberRoleBodySchema,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateOrganizationMemberRole\",\n\t\t\tdescription: \"Update the role of a member in an organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { member: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"role\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"member\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!ctx.body.role) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\");\n\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tconst roleToSet = Array.isArray(ctx.body.role) ? ctx.body.role : ctx.body.role ? [ctx.body.role] : [];\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst toBeUpdatedMember = member.id !== ctx.body.memberId ? await adapter.findMemberById(ctx.body.memberId) : member;\n\tif (!toBeUpdatedMember) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (!(toBeUpdatedMember.organizationId === organizationId)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tconst updatingMemberRoles = member.role.split(\",\");\n\tconst isUpdatingCreator = toBeUpdatedMember.role.split(\",\").includes(creatorRole);\n\tconst updaterIsCreator = updatingMemberRoles.includes(creatorRole);\n\tconst isSettingCreatorRole = roleToSet.includes(creatorRole);\n\tconst memberIsUpdatingThemselves = member.id === toBeUpdatedMember.id;\n\tif (isUpdatingCreator && !updaterIsCreator || isSettingCreatorRole && !updaterIsCreator) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tif (updaterIsCreator && memberIsUpdatingThemselves) {\n\t\tif ((await ctx.context.adapter.findMany({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: organizationId\n\t\t\t}]\n\t\t})).filter((member$1) => {\n\t\t\treturn member$1.role.split(\",\").includes(creatorRole);\n\t\t}).length <= 1 && !isSettingCreatorRole) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER });\n\t}\n\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_6__.hasPermission)({\n\t\trole: member.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"update\"] },\n\t\tallowCreatorAllPermissions: true,\n\t\torganizationId\n\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER });\n\tconst organization = await adapter.findOrganizationById(organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingUpdated = await ctx.context.internalAdapter.findUserById(toBeUpdatedMember.userId);\n\tif (!userBeingUpdated) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tconst previousRole = toBeUpdatedMember.role;\n\tconst newRole = (0,_organization_mjs__WEBPACK_IMPORTED_MODULE_7__.parseRoles)(ctx.body.role);\n\tif (option?.organizationHooks?.beforeUpdateMemberRole) {\n\t\tconst response = await option?.organizationHooks.beforeUpdateMemberRole({\n\t\t\tmember: toBeUpdatedMember,\n\t\t\tnewRole,\n\t\t\tuser: userBeingUpdated,\n\t\t\torganization\n\t\t});\n\t\tif (response && typeof response === \"object\" && \"data\" in response) {\n\t\t\tconst updatedMember$1 = await adapter.updateMember(ctx.body.memberId, response.data.role || newRole);\n\t\t\tif (!updatedMember$1) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\t\t\tif (option?.organizationHooks?.afterUpdateMemberRole) await option?.organizationHooks.afterUpdateMemberRole({\n\t\t\t\tmember: updatedMember$1,\n\t\t\t\tpreviousRole,\n\t\t\t\tuser: userBeingUpdated,\n\t\t\t\torganization\n\t\t\t});\n\t\t\treturn ctx.json(updatedMember$1);\n\t\t}\n\t}\n\tconst updatedMember = await adapter.updateMember(ctx.body.memberId, newRole);\n\tif (!updatedMember) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tif (option?.organizationHooks?.afterUpdateMemberRole) await option?.organizationHooks.afterUpdateMemberRole({\n\t\tmember: updatedMember,\n\t\tpreviousRole,\n\t\tuser: userBeingUpdated,\n\t\torganization\n\t});\n\treturn ctx.json(updatedMember);\n});\nconst getActiveMember = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/get-active-member\", {\n\tmethod: \"GET\",\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the member details of the active organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\torganizationId: { type: \"string\" },\n\t\t\t\t\trole: { type: \"string\" }\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"userId\",\n\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\"role\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tconst member = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, options).findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!member) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND }\n\t});\n\treturn ctx.json(member);\n});\nconst leaveOrganizationBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization Id for the member to leave. Eg: \\\"organization-id\\\"\" }) });\nconst leaveOrganization = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/leave\", {\n\tmethod: \"POST\",\n\tbody: leaveOrganizationBodySchema,\n\trequireHeaders: true,\n\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_1__.sessionMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, options);\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: ctx.body.organizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.MEMBER_NOT_FOUND });\n\tconst creatorRole = ctx.context.orgOptions?.creatorRole || \"owner\";\n\tif (member.role.split(\",\").includes(creatorRole)) {\n\t\tif ((await ctx.context.adapter.findMany({\n\t\t\tmodel: \"member\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"organizationId\",\n\t\t\t\tvalue: ctx.body.organizationId\n\t\t\t}]\n\t\t})).filter((member$1) => member$1.role.split(\",\").includes(creatorRole)).length <= 1) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER });\n\t}\n\tawait adapter.deleteMember({\n\t\tmemberId: member.id,\n\t\torganizationId: ctx.body.organizationId,\n\t\tuserId: session.user.id\n\t});\n\tif (session.session.activeOrganizationId === ctx.body.organizationId) await adapter.setActiveOrganization(session.session.token, null, ctx);\n\treturn ctx.json(member);\n});\nconst listMembers = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/list-members\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tlimit: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The number of users to return\" }).or(zod__WEBPACK_IMPORTED_MODULE_11__.number()).optional(),\n\t\toffset: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The offset to start from\" }).or(zod__WEBPACK_IMPORTED_MODULE_11__.number()).optional(),\n\t\tsortBy: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The field to sort by\" }).optional(),\n\t\tsortDirection: zod__WEBPACK_IMPORTED_MODULE_11__[\"enum\"]([\"asc\", \"desc\"]).meta({ description: \"The direction to sort by\" }).optional(),\n\t\tfilterField: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The field to filter by\" }).optional(),\n\t\tfilterValue: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The value to filter by\" }).or(zod__WEBPACK_IMPORTED_MODULE_11__.number()).or(zod__WEBPACK_IMPORTED_MODULE_11__.boolean()).optional(),\n\t\tfilterOperator: zod__WEBPACK_IMPORTED_MODULE_11__[\"enum\"]([\n\t\t\t\"eq\",\n\t\t\t\"ne\",\n\t\t\t\"lt\",\n\t\t\t\"lte\",\n\t\t\t\"gt\",\n\t\t\t\"gte\",\n\t\t\t\"contains\"\n\t\t]).meta({ description: \"The operator to use for the filter\" }).optional(),\n\t\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization ID to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-id\\\"\" }).optional(),\n\t\torganizationSlug: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization slug to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-slug\\\"\" }).optional()\n\t}).optional(),\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tlet organizationId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, options);\n\tif (ctx.query?.organizationSlug) {\n\t\tconst organization = await adapter.findOrganizationBySlug(ctx.query?.organizationSlug);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\torganizationId = organization.id;\n\t}\n\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\tconst { members, total } = await adapter.listMembers({\n\t\torganizationId,\n\t\tlimit: ctx.query?.limit ? Number(ctx.query.limit) : void 0,\n\t\toffset: ctx.query?.offset ? Number(ctx.query.offset) : void 0,\n\t\tsortBy: ctx.query?.sortBy,\n\t\tsortOrder: ctx.query?.sortDirection,\n\t\tfilter: ctx.query?.filterField ? {\n\t\t\tfield: ctx.query?.filterField,\n\t\t\toperator: ctx.query.filterOperator,\n\t\t\tvalue: ctx.query.filterValue\n\t\t} : void 0\n\t});\n\treturn ctx.json({\n\t\tmembers,\n\t\ttotal\n\t});\n});\nconst getActiveMemberRoleQuerySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The user ID to get the role for. If not provided, will default to the current user's\" }).optional(),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization ID to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-id\\\"\" }).optional(),\n\torganizationSlug: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization slug to list members for. If not provided, will default to the user's active organization. Eg: \\\"organization-slug\\\"\" }).optional()\n}).optional();\nconst getActiveMemberRole = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/get-active-member-role\", {\n\tmethod: \"GET\",\n\tquery: getActiveMemberRoleQuerySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_4__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tlet organizationId = ctx.query?.organizationId || session.session.activeOrganizationId;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_3__.getOrgAdapter)(ctx.context, options);\n\tif (ctx.query?.organizationSlug) {\n\t\tconst organization = await adapter.findOrganizationBySlug(ctx.query?.organizationSlug);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\torganizationId = organization.id;\n\t}\n\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst isMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId\n\t});\n\tif (!isMember) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\tif (!ctx.query?.userId) return ctx.json({ role: isMember.role });\n\tconst userIdToGetRole = ctx.query?.userId;\n\tconst member = await adapter.findMemberByOrgId({\n\t\tuserId: userIdToGetRole,\n\t\torganizationId\n\t});\n\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION });\n\treturn ctx.json({ role: member?.role });\n});\n\n//#endregion\n\n//# sourceMappingURL=crud-members.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1tZW1iZXJzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2tDO0FBQ3ZEO0FBQ2U7QUFDbUI7QUFDSjtBQUNSO0FBQ0w7QUFDVTtBQUNwQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBLHlCQUF5Qix3Q0FBUTtBQUNqQyxTQUFTLCtDQUFlLFVBQVUscUtBQXFLO0FBQ3ZNLE9BQU8sdUNBQU8sRUFBRSx3Q0FBUSxJQUFJLHVDQUFPLENBQUMsd0NBQVEsYUFBYSxtRkFBbUY7QUFDNUksaUJBQWlCLHdDQUFRLFVBQVUscUlBQXFJO0FBQ3hLLFNBQVMsd0NBQVEsVUFBVSwwRUFBMEU7QUFDckcsQ0FBQztBQUNEO0FBQ0EsZ0NBQWdDLDJEQUFXO0FBQzNDLHdEQUF3RDtBQUN4RDtBQUNBLEVBQUU7QUFDRixRQUFRLDBFQUFrQjtBQUMxQjtBQUNBLFFBQVEsd0NBQVE7QUFDaEI7QUFDQTtBQUNBLEdBQUc7QUFDSCxRQUFRLG9EQUFhO0FBQ3JCO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsMENBQTBDLDBFQUFpQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVMsc0VBQXdCO0FBQzVDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLGlEQUFRLGtCQUFrQixrQ0FBa0M7QUFDekU7QUFDQSxrQkFBa0IsMkRBQWE7QUFDL0I7QUFDQSx1QkFBdUIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGlCQUFpQjtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxHQUFHLGFBQWEsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGdEQUFnRDtBQUMzSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSix5REFBeUQsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGlCQUFpQjtBQUNySTtBQUNBO0FBQ0EsbUNBQW1DLHVCQUF1QixnQ0FBZ0MsaURBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLHdDQUF3QztBQUMzTCxVQUFVLGdFQUFnRTtBQUMxRTtBQUNBLCtCQUErQixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNkRBQVU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkRBQVU7QUFDckI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQSwrQkFBK0Isd0NBQVE7QUFDdkMsa0JBQWtCLHdDQUFRLFVBQVUsd0RBQXdEO0FBQzVGLGlCQUFpQix3Q0FBUSxVQUFVLDRJQUE0STtBQUMvSyxDQUFDO0FBQ0Qsa0NBQWtDLDBFQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxPQUFPLG9EQUFhLEVBQUUsMkRBQW9CO0FBQzFDLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QixnQkFBZ0IsZ0JBQWdCO0FBQ2hDLHdCQUF3QixnQkFBZ0I7QUFDeEMsY0FBYztBQUNkLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFNBQVMsc0VBQXdCO0FBQzNDLEVBQUU7QUFDRixpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHdCQUF3QixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUJBQW1CO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywyQkFBMkI7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixtQkFBbUI7QUFDakg7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixzREFBc0Q7QUFDOUosVUFBVSxVQUFVLDhCQUE4QixnQkFBZ0I7QUFDbEU7QUFDQTtBQUNBLEdBQUcseUJBQXlCLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixzREFBc0Q7QUFDN0k7QUFDQSxZQUFZLGtFQUFhO0FBQ3pCO0FBQ0E7QUFDQSxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0EsRUFBRSxrQkFBa0IsaURBQVEsbUJBQW1CLFNBQVMsc0VBQXdCLDRDQUE0QztBQUM1SCxxRUFBcUUsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLG1CQUFtQjtBQUNuSjtBQUNBLDhCQUE4QixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2xIO0FBQ0Esa0NBQWtDLGlEQUFRLGtCQUFrQiwyQkFBMkI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixtQkFBbUIsMkJBQTJCO0FBQzlDLENBQUM7QUFDRCxtQ0FBbUMsd0NBQVE7QUFDM0MsT0FBTyx1Q0FBTyxFQUFFLHdDQUFRLElBQUksdUNBQU8sQ0FBQyx3Q0FBUSxhQUFhLHVJQUF1STtBQUNoTSxXQUFXLHdDQUFRLFVBQVUsNkVBQTZFO0FBQzFHLGlCQUFpQix3Q0FBUSxVQUFVLDhNQUE4TTtBQUNqUCxDQUFDO0FBQ0QscUNBQXFDLDBFQUFrQjtBQUN2RDtBQUNBO0FBQ0EsT0FBTyxvREFBYSxFQUFFLDJEQUFvQjtBQUMxQztBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixpQkFBaUIsZ0JBQWdCO0FBQ2pDLHlCQUF5QixnQkFBZ0I7QUFDekMsZUFBZTtBQUNmLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLCtCQUErQixpREFBUTtBQUN2QztBQUNBLGdDQUFnQyxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ3BILGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix3QkFBd0IsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLG1CQUFtQjtBQUN0RztBQUNBLG1DQUFtQyxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUJBQW1CO0FBQ2pILHVFQUF1RSxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQzVLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9HQUFvRyxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQ3pNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxHQUFHLGtEQUFrRCxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IscURBQXFEO0FBQ3JLO0FBQ0EsWUFBWSxrRUFBYTtBQUN6QjtBQUNBO0FBQ0EsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBO0FBQ0EsRUFBRSxrQkFBa0IsaURBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRDQUE0QztBQUN6SDtBQUNBLDhCQUE4QixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2xIO0FBQ0Esa0NBQWtDLGlEQUFRLGtCQUFrQiwyQkFBMkI7QUFDdkY7QUFDQSxpQkFBaUIsNkRBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQ0FBbUMsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLG1CQUFtQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixtQkFBbUI7QUFDN0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRCxxQ0FBcUMsMEVBQWtCO0FBQ3ZEO0FBQ0EsT0FBTyxvREFBYSxFQUFFLDJEQUFvQjtBQUMxQztBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixlQUFlLGdCQUFnQjtBQUMvQix1QkFBdUIsZ0JBQWdCO0FBQ3ZDLGFBQWE7QUFDYixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxTQUFTLHNFQUF3QjtBQUMzQyxFQUFFO0FBQ0Ysc0JBQXNCLDJEQUFhO0FBQ25DO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLFVBQVUsU0FBUyxzRUFBd0I7QUFDM0MsRUFBRTtBQUNGO0FBQ0EsQ0FBQztBQUNELG9DQUFvQyx3Q0FBUSxHQUFHLGdCQUFnQix3Q0FBUSxVQUFVLHFGQUFxRixHQUFHO0FBQ3pLLHVDQUF1QywwRUFBa0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsT0FBTyxzRUFBaUIsRUFBRSxvREFBYTtBQUN2QyxDQUFDO0FBQ0Q7QUFDQSxpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHdCQUF3QixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUJBQW1CO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUcsK0ZBQStGLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixzREFBc0Q7QUFDbk47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsQ0FBQztBQUNELGlDQUFpQywwRUFBa0I7QUFDbkQ7QUFDQSxRQUFRLHdDQUFRO0FBQ2hCLFNBQVMsd0NBQVEsVUFBVSw4Q0FBOEMsS0FBSyx3Q0FBUTtBQUN0RixVQUFVLHdDQUFRLFVBQVUseUNBQXlDLEtBQUssd0NBQVE7QUFDbEYsVUFBVSx3Q0FBUSxVQUFVLHFDQUFxQztBQUNqRSxpQkFBaUIseUNBQU0seUJBQXlCLHlDQUF5QztBQUN6RixlQUFlLHdDQUFRLFVBQVUsdUNBQXVDO0FBQ3hFLGVBQWUsd0NBQVEsVUFBVSx1Q0FBdUMsS0FBSyx3Q0FBUSxPQUFPLHlDQUFTO0FBQ3JHLGtCQUFrQix5Q0FBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQW1EO0FBQy9ELGtCQUFrQix3Q0FBUSxVQUFVLGtKQUFrSjtBQUN0TCxvQkFBb0Isd0NBQVEsVUFBVSxzSkFBc0o7QUFDNUwsRUFBRTtBQUNGO0FBQ0EsT0FBTyxvREFBYSxFQUFFLDJEQUFvQjtBQUMxQyxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBO0FBQ0EsK0JBQStCLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbkg7QUFDQTtBQUNBLGdDQUFnQyxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsNENBQTRDO0FBQ3BILFNBQVMsaUJBQWlCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCx1Q0FBdUMsd0NBQVE7QUFDL0MsU0FBUyx3Q0FBUSxVQUFVLHFHQUFxRztBQUNoSSxpQkFBaUIsd0NBQVEsVUFBVSxrSkFBa0o7QUFDckwsbUJBQW1CLHdDQUFRLFVBQVUsc0pBQXNKO0FBQzNMLENBQUM7QUFDRCx5Q0FBeUMsMEVBQWtCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUMsQ0FBQztBQUNEO0FBQ0E7QUFDQSxpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBLCtCQUErQixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ25IO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUNwSDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsMEJBQTBCLGlEQUFRLGdCQUFnQixTQUFTLHNFQUF3Qiw0Q0FBNEM7QUFDL0gsMkNBQTJDLHFCQUFxQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRix3QkFBd0IsaURBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLDRDQUE0QztBQUM3SCxtQkFBbUIsb0JBQW9CO0FBQ3ZDLENBQUM7O0FBRUQ7QUFDMkg7QUFDM0giLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXHJvdXRlc1xcY3J1ZC1tZW1iZXJzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuLi8uLi8uLi9kYi90by16b2QubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JnQWRhcHRlciB9IGZyb20gXCIuLi9hZGFwdGVyLm1qc1wiO1xuaW1wb3J0IHsgb3JnTWlkZGxld2FyZSwgb3JnU2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vY2FsbC5tanNcIjtcbmltcG9ydCB7IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUyB9IGZyb20gXCIuLi9lcnJvci1jb2Rlcy5tanNcIjtcbmltcG9ydCB7IGhhc1Blcm1pc3Npb24gfSBmcm9tIFwiLi4vaGFzLXBlcm1pc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJvbGVzIH0gZnJvbSBcIi4uL29yZ2FuaXphdGlvbi5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1tZW1iZXJzLnRzXG5jb25zdCBiYXNlTWVtYmVyU2NoZW1hID0gei5vYmplY3Qoe1xuXHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJZCB3aGljaCByZXByZXNlbnRzIHRoZSB1c2VyIHRvIGJlIGFkZGVkIGFzIGEgbWVtYmVyLiBJZiBgbnVsbGAgaXMgcHJvdmlkZWQsIHRoZW4gaXQncyBleHBlY3RlZCB0byBwcm92aWRlIHNlc3Npb24gaGVhZGVycy4gRWc6IFxcXCJ1c2VyLWlkXFxcIlwiIH0pLFxuXHRyb2xlOiB6LnVuaW9uKFt6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpXSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSByb2xlKHMpIHRvIGFzc2lnbiB0byB0aGUgbmV3IG1lbWJlci4gRWc6IFtcXFwiYWRtaW5cXFwiLCBcXFwic2FsZVxcXCJdXCIgfSksXG5cdG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJBbiBvcHRpb25hbCBvcmdhbml6YXRpb24gSUQgdG8gcGFzcy4gSWYgbm90IHByb3ZpZGVkLCB3aWxsIGRlZmF1bHQgdG8gdGhlIHVzZXIncyBhY3RpdmUgb3JnYW5pemF0aW9uLiBFZzogXFxcIm9yZy1pZFxcXCJcIiB9KS5vcHRpb25hbCgpLFxuXHR0ZWFtSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFuIG9wdGlvbmFsIHRlYW0gSUQgdG8gYWRkIHRoZSBtZW1iZXIgdG8uIEVnOiBcXFwidGVhbS1pZFxcXCJcIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IGFkZE1lbWJlciA9IChvcHRpb24pID0+IHtcblx0Y29uc3QgYWRkaXRpb25hbEZpZWxkc1NjaGVtYSA9IHRvWm9kU2NoZW1hKHtcblx0XHRmaWVsZHM6IG9wdGlvbj8uc2NoZW1hPy5tZW1iZXI/LmFkZGl0aW9uYWxGaWVsZHMgfHwge30sXG5cdFx0aXNDbGllbnRTaWRlOiB0cnVlXG5cdH0pO1xuXHRyZXR1cm4gY3JlYXRlQXV0aEVuZHBvaW50KHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdGJvZHk6IHoub2JqZWN0KHtcblx0XHRcdC4uLmJhc2VNZW1iZXJTY2hlbWEuc2hhcGUsXG5cdFx0XHQuLi5hZGRpdGlvbmFsRmllbGRzU2NoZW1hLnNoYXBlXG5cdFx0fSksXG5cdFx0dXNlOiBbb3JnTWlkZGxld2FyZV0sXG5cdFx0bWV0YWRhdGE6IHtcblx0XHRcdCRJbmZlcjogeyBib2R5OiB7fSB9LFxuXHRcdFx0b3BlbmFwaToge1xuXHRcdFx0XHRvcGVyYXRpb25JZDogXCJhZGRPcmdhbml6YXRpb25NZW1iZXJcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQWRkIGEgbWVtYmVyIHRvIGFuIG9yZ2FuaXphdGlvblwiXG5cdFx0XHR9XG5cdFx0fVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5ib2R5LnVzZXJJZCA/IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCkuY2F0Y2goKGUpID0+IG51bGwpIDogbnVsbDtcblx0XHRjb25zdCBvcmdJZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkIHx8IHNlc3Npb24/LnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQ7XG5cdFx0aWYgKCFvcmdJZCkgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0Ym9keTogeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9XG5cdFx0fSk7XG5cdFx0Y29uc3QgdGVhbUlkID0gXCJ0ZWFtSWRcIiBpbiBjdHguYm9keSA/IGN0eC5ib2R5LnRlYW1JZCA6IHZvaWQgMDtcblx0XHRpZiAodGVhbUlkICYmICFjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zPy5lbmFibGVkKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJUZWFtcyBhcmUgbm90IGVuYWJsZWRcIik7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVGVhbXMgYXJlIG5vdCBlbmFibGVkXCIgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IGFkYXB0ZXIgPSBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBvcHRpb24pO1xuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKGN0eC5ib2R5LnVzZXJJZCk7XG5cdFx0aWYgKCF1c2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5RW1haWwoe1xuXHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRvcmdhbml6YXRpb25JZDogb3JnSWRcblx0XHR9KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVVNFUl9JU19BTFJFQURZX0FfTUVNQkVSX09GX1RISVNfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGlmICh0ZWFtSWQpIHtcblx0XHRcdGNvbnN0IHRlYW0gPSBhd2FpdCBhZGFwdGVyLmZpbmRUZWFtQnlJZCh7XG5cdFx0XHRcdHRlYW1JZCxcblx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IG9yZ0lkXG5cdFx0XHR9KTtcblx0XHRcdGlmICghdGVhbSB8fCB0ZWFtLm9yZ2FuaXphdGlvbklkICE9PSBvcmdJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVEVBTV9OT1RfRk9VTkQgfSk7XG5cdFx0fVxuXHRcdGNvbnN0IG1lbWJlcnNoaXBMaW1pdCA9IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnM/Lm1lbWJlcnNoaXBMaW1pdCB8fCAxMDA7XG5cdFx0aWYgKGF3YWl0IGFkYXB0ZXIuY291bnRNZW1iZXJzKHsgb3JnYW5pemF0aW9uSWQ6IG9yZ0lkIH0pID49IG1lbWJlcnNoaXBMaW1pdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9NRU1CRVJTSElQX0xJTUlUX1JFQUNIRUQgfSk7XG5cdFx0Y29uc3QgeyByb2xlOiBfLCB1c2VySWQ6IF9fLCBvcmdhbml6YXRpb25JZDogX19fLCAuLi5hZGRpdGlvbmFsRmllbGRzIH0gPSBjdHguYm9keTtcblx0XHRjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeUlkKG9yZ0lkKTtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0XHRsZXQgbWVtYmVyRGF0YSA9IHtcblx0XHRcdG9yZ2FuaXphdGlvbklkOiBvcmdJZCxcblx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdHJvbGU6IHBhcnNlUm9sZXMoY3R4LmJvZHkucm9sZSksXG5cdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkcyA/IGFkZGl0aW9uYWxGaWVsZHMgOiB7fVxuXHRcdH07XG5cdFx0aWYgKG9wdGlvbj8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZUFkZE1lbWJlcikge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZUFkZE1lbWJlcih7XG5cdFx0XHRcdG1lbWJlcjoge1xuXHRcdFx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDogb3JnSWQsXG5cdFx0XHRcdFx0cm9sZTogcGFyc2VSb2xlcyhjdHguYm9keS5yb2xlKSxcblx0XHRcdFx0XHQuLi5hZGRpdGlvbmFsRmllbGRzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVzZXIsXG5cdFx0XHRcdG9yZ2FuaXphdGlvblxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3BvbnNlKSBtZW1iZXJEYXRhID0ge1xuXHRcdFx0XHQuLi5tZW1iZXJEYXRhLFxuXHRcdFx0XHQuLi5yZXNwb25zZS5kYXRhXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRjb25zdCBjcmVhdGVkTWVtYmVyID0gYXdhaXQgYWRhcHRlci5jcmVhdGVNZW1iZXIobWVtYmVyRGF0YSk7XG5cdFx0aWYgKHRlYW1JZCkgYXdhaXQgYWRhcHRlci5maW5kT3JDcmVhdGVUZWFtTWVtYmVyKHtcblx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdHRlYW1JZFxuXHRcdH0pO1xuXHRcdGlmIChvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlckFkZE1lbWJlcikgYXdhaXQgb3B0aW9uPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlckFkZE1lbWJlcih7XG5cdFx0XHRtZW1iZXI6IGNyZWF0ZWRNZW1iZXIsXG5cdFx0XHR1c2VyLFxuXHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKGNyZWF0ZWRNZW1iZXIpO1xuXHR9KTtcbn07XG5jb25zdCByZW1vdmVNZW1iZXJCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRtZW1iZXJJZE9yRW1haWw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvciBlbWFpbCBvZiB0aGUgbWVtYmVyIHRvIHJlbW92ZVwiIH0pLFxuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSBvcmdhbml6YXRpb24gdG8gcmVtb3ZlIHRoZSBtZW1iZXIgZnJvbS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgYWN0aXZlIG9yZ2FuaXphdGlvbiB3aWxsIGJlIHVzZWQuIEVnOiBcXFwib3JnLWlkXFxcIlwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgcmVtb3ZlTWVtYmVyID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vcmVtb3ZlLW1lbWJlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHJlbW92ZU1lbWJlckJvZHlTY2hlbWEsXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZW1vdmUgYSBtZW1iZXIgZnJvbSBhbiBvcmdhbml6YXRpb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBtZW1iZXI6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGlkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHVzZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRyb2xlOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0XHRcInJvbGVcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wibWVtYmVyXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkub3JnYW5pemF0aW9uSWQgfHwgc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRpZiAoIW9yZ2FuaXphdGlvbklkKSByZXR1cm4gY3R4Lmpzb24obnVsbCwge1xuXHRcdHN0YXR1czogNDAwLFxuXHRcdGJvZHk6IHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk5PX0FDVElWRV9PUkdBTklaQVRJT04gfVxuXHR9KTtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRjb25zdCBtZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1FTUJFUl9OT1RfRk9VTkQgfSk7XG5cdGxldCB0b0JlUmVtb3ZlZE1lbWJlciA9IG51bGw7XG5cdGlmIChjdHguYm9keS5tZW1iZXJJZE9yRW1haWwuaW5jbHVkZXMoXCJAXCIpKSB0b0JlUmVtb3ZlZE1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5RW1haWwoe1xuXHRcdGVtYWlsOiBjdHguYm9keS5tZW1iZXJJZE9yRW1haWwsXG5cdFx0b3JnYW5pemF0aW9uSWRcblx0fSk7XG5cdGVsc2Uge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5SWQoY3R4LmJvZHkubWVtYmVySWRPckVtYWlsKTtcblx0XHRpZiAoIXJlc3VsdCkgdG9CZVJlbW92ZWRNZW1iZXIgPSBudWxsO1xuXHRcdGVsc2Uge1xuXHRcdFx0Y29uc3QgeyB1c2VyOiBfdXNlciwgLi4ubWVtYmVyJDEgfSA9IHJlc3VsdDtcblx0XHRcdHRvQmVSZW1vdmVkTWVtYmVyID0gbWVtYmVyJDE7XG5cdFx0fVxuXHR9XG5cdGlmICghdG9CZVJlbW92ZWRNZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1FTUJFUl9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IHJvbGVzID0gdG9CZVJlbW92ZWRNZW1iZXIucm9sZS5zcGxpdChcIixcIik7XG5cdGNvbnN0IGNyZWF0b3JSb2xlID0gY3R4LmNvbnRleHQub3JnT3B0aW9ucz8uY3JlYXRvclJvbGUgfHwgXCJvd25lclwiO1xuXHRpZiAocm9sZXMuaW5jbHVkZXMoY3JlYXRvclJvbGUpKSB7XG5cdFx0aWYgKG1lbWJlci5yb2xlICE9PSBjcmVhdG9yUm9sZSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0NBTk5PVF9MRUFWRV9USEVfT1JHQU5JWkFUSU9OX0FTX1RIRV9PTkxZX09XTkVSIH0pO1xuXHRcdGNvbnN0IHsgbWVtYmVycyB9ID0gYXdhaXQgYWRhcHRlci5saXN0TWVtYmVycyh7IG9yZ2FuaXphdGlvbklkIH0pO1xuXHRcdGlmIChtZW1iZXJzLmZpbHRlcigobWVtYmVyJDEpID0+IHtcblx0XHRcdHJldHVybiBtZW1iZXIkMS5yb2xlLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhjcmVhdG9yUm9sZSk7XG5cdFx0fSkubGVuZ3RoIDw9IDEpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9DQU5OT1RfTEVBVkVfVEhFX09SR0FOSVpBVElPTl9BU19USEVfT05MWV9PV05FUiB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IGhhc1Blcm1pc3Npb24oe1xuXHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMsXG5cdFx0cGVybWlzc2lvbnM6IHsgbWVtYmVyOiBbXCJkZWxldGVcIl0gfSxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVEhJU19NRU1CRVIgfSk7XG5cdGlmICh0b0JlUmVtb3ZlZE1lbWJlcj8ub3JnYW5pemF0aW9uSWQgIT09IG9yZ2FuaXphdGlvbklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5NRU1CRVJfTk9UX0ZPVU5EIH0pO1xuXHRjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeUlkKG9yZ2FuaXphdGlvbklkKTtcblx0aWYgKCFvcmdhbml6YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IHVzZXJCZWluZ1JlbW92ZWQgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKHRvQmVSZW1vdmVkTWVtYmVyLnVzZXJJZCk7XG5cdGlmICghdXNlckJlaW5nUmVtb3ZlZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XG5cdGlmIChvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcz8uYmVmb3JlUmVtb3ZlTWVtYmVyKSBhd2FpdCBvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVSZW1vdmVNZW1iZXIoe1xuXHRcdG1lbWJlcjogdG9CZVJlbW92ZWRNZW1iZXIsXG5cdFx0dXNlcjogdXNlckJlaW5nUmVtb3ZlZCxcblx0XHRvcmdhbml6YXRpb25cblx0fSk7XG5cdGF3YWl0IGFkYXB0ZXIuZGVsZXRlTWVtYmVyKHtcblx0XHRtZW1iZXJJZDogdG9CZVJlbW92ZWRNZW1iZXIuaWQsXG5cdFx0b3JnYW5pemF0aW9uSWQsXG5cdFx0dXNlcklkOiB0b0JlUmVtb3ZlZE1lbWJlci51c2VySWRcblx0fSk7XG5cdGlmIChzZXNzaW9uLnVzZXIuaWQgPT09IHRvQmVSZW1vdmVkTWVtYmVyLnVzZXJJZCAmJiBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQgPT09IHRvQmVSZW1vdmVkTWVtYmVyLm9yZ2FuaXphdGlvbklkKSBhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZU9yZ2FuaXphdGlvbihzZXNzaW9uLnNlc3Npb24udG9rZW4sIG51bGwsIGN0eCk7XG5cdGlmIChvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcz8uYWZ0ZXJSZW1vdmVNZW1iZXIpIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyUmVtb3ZlTWVtYmVyKHtcblx0XHRtZW1iZXI6IHRvQmVSZW1vdmVkTWVtYmVyLFxuXHRcdHVzZXI6IHVzZXJCZWluZ1JlbW92ZWQsXG5cdFx0b3JnYW5pemF0aW9uXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBtZW1iZXI6IHRvQmVSZW1vdmVkTWVtYmVyIH0pO1xufSk7XG5jb25zdCB1cGRhdGVNZW1iZXJSb2xlQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0cm9sZTogei51bmlvbihbei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKV0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHJvbGUgdG8gYmUgYXBwbGllZC4gVGhpcyBjYW4gYmUgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgdGhlIHJvbGVzLiBFZzogW1xcXCJhZG1pblxcXCIsIFxcXCJzYWxlXFxcIl1cIiB9KSxcblx0bWVtYmVySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBtZW1iZXIgaWQgdG8gYXBwbHkgdGhlIHJvbGUgdXBkYXRlIHRvLiBFZzogXFxcIm1lbWJlci1pZFxcXCJcIiB9KSxcblx0b3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFuIG9wdGlvbmFsIG9yZ2FuaXphdGlvbiBJRCB3aGljaCB0aGUgbWVtYmVyIGlzIGEgcGFydCBvZiB0byBhcHBseSB0aGUgcm9sZSB1cGRhdGUuIElmIG5vdCBwcm92aWRlZCwgeW91IG11c3QgcHJvdmlkZSBzZXNzaW9uIGhlYWRlcnMgdG8gZ2V0IHRoZSBhY3RpdmUgb3JnYW5pemF0aW9uLiBFZzogXFxcIm9yZ2FuaXphdGlvbi1pZFxcXCJcIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IHVwZGF0ZU1lbWJlclJvbGUgPSAob3B0aW9uKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1tZW1iZXItcm9sZVwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHVwZGF0ZU1lbWJlclJvbGVCb2R5U2NoZW1hLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YToge1xuXHRcdCRJbmZlcjogeyBib2R5OiB7fSB9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInVwZGF0ZU9yZ2FuaXphdGlvbk1lbWJlclJvbGVcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVwZGF0ZSB0aGUgcm9sZSBvZiBhIG1lbWJlciBpbiBhbiBvcmdhbml6YXRpb25cIixcblx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVtYmVyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRpZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdHVzZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdG9yZ2FuaXphdGlvbklkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0cm9sZTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHRcdFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHRcdFx0XCJyb2xlXCJcblx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHR9IH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcIm1lbWJlclwiXVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIWN0eC5ib2R5LnJvbGUpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIpO1xuXHRjb25zdCBvcmdhbml6YXRpb25JZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkIHx8IHNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0aWYgKCFvcmdhbml6YXRpb25JZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMpO1xuXHRjb25zdCByb2xlVG9TZXQgPSBBcnJheS5pc0FycmF5KGN0eC5ib2R5LnJvbGUpID8gY3R4LmJvZHkucm9sZSA6IGN0eC5ib2R5LnJvbGUgPyBbY3R4LmJvZHkucm9sZV0gOiBbXTtcblx0Y29uc3QgbWVtYmVyID0gYXdhaXQgYWRhcHRlci5maW5kTWVtYmVyQnlPcmdJZCh7XG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0b3JnYW5pemF0aW9uSWRcblx0fSk7XG5cdGlmICghbWVtYmVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5NRU1CRVJfTk9UX0ZPVU5EIH0pO1xuXHRjb25zdCB0b0JlVXBkYXRlZE1lbWJlciA9IG1lbWJlci5pZCAhPT0gY3R4LmJvZHkubWVtYmVySWQgPyBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeUlkKGN0eC5ib2R5Lm1lbWJlcklkKSA6IG1lbWJlcjtcblx0aWYgKCF0b0JlVXBkYXRlZE1lbWJlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTUVNQkVSX05PVF9GT1VORCB9KTtcblx0aWYgKCEodG9CZVVwZGF0ZWRNZW1iZXIub3JnYW5pemF0aW9uSWQgPT09IG9yZ2FuaXphdGlvbklkKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fVVBEQVRFX1RISVNfTUVNQkVSIH0pO1xuXHRjb25zdCBjcmVhdG9yUm9sZSA9IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnM/LmNyZWF0b3JSb2xlIHx8IFwib3duZXJcIjtcblx0Y29uc3QgdXBkYXRpbmdNZW1iZXJSb2xlcyA9IG1lbWJlci5yb2xlLnNwbGl0KFwiLFwiKTtcblx0Y29uc3QgaXNVcGRhdGluZ0NyZWF0b3IgPSB0b0JlVXBkYXRlZE1lbWJlci5yb2xlLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhjcmVhdG9yUm9sZSk7XG5cdGNvbnN0IHVwZGF0ZXJJc0NyZWF0b3IgPSB1cGRhdGluZ01lbWJlclJvbGVzLmluY2x1ZGVzKGNyZWF0b3JSb2xlKTtcblx0Y29uc3QgaXNTZXR0aW5nQ3JlYXRvclJvbGUgPSByb2xlVG9TZXQuaW5jbHVkZXMoY3JlYXRvclJvbGUpO1xuXHRjb25zdCBtZW1iZXJJc1VwZGF0aW5nVGhlbXNlbHZlcyA9IG1lbWJlci5pZCA9PT0gdG9CZVVwZGF0ZWRNZW1iZXIuaWQ7XG5cdGlmIChpc1VwZGF0aW5nQ3JlYXRvciAmJiAhdXBkYXRlcklzQ3JlYXRvciB8fCBpc1NldHRpbmdDcmVhdG9yUm9sZSAmJiAhdXBkYXRlcklzQ3JlYXRvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fVVBEQVRFX1RISVNfTUVNQkVSIH0pO1xuXHRpZiAodXBkYXRlcklzQ3JlYXRvciAmJiBtZW1iZXJJc1VwZGF0aW5nVGhlbXNlbHZlcykge1xuXHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogb3JnYW5pemF0aW9uSWRcblx0XHRcdH1dXG5cdFx0fSkpLmZpbHRlcigobWVtYmVyJDEpID0+IHtcblx0XHRcdHJldHVybiBtZW1iZXIkMS5yb2xlLnNwbGl0KFwiLFwiKS5pbmNsdWRlcyhjcmVhdG9yUm9sZSk7XG5cdFx0fSkubGVuZ3RoIDw9IDEgJiYgIWlzU2V0dGluZ0NyZWF0b3JSb2xlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQ0FOTk9UX0xFQVZFX1RIRV9PUkdBTklaQVRJT05fV0lUSE9VVF9BTl9PV05FUiB9KTtcblx0fVxuXHRpZiAoIWF3YWl0IGhhc1Blcm1pc3Npb24oe1xuXHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMsXG5cdFx0cGVybWlzc2lvbnM6IHsgbWVtYmVyOiBbXCJ1cGRhdGVcIl0gfSxcblx0XHRhbGxvd0NyZWF0b3JBbGxQZXJtaXNzaW9uczogdHJ1ZSxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVEhJU19NRU1CRVIgfSk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQob3JnYW5pemF0aW9uSWQpO1xuXHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0Y29uc3QgdXNlckJlaW5nVXBkYXRlZCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQodG9CZVVwZGF0ZWRNZW1iZXIudXNlcklkKTtcblx0aWYgKCF1c2VyQmVpbmdVcGRhdGVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgcHJldmlvdXNSb2xlID0gdG9CZVVwZGF0ZWRNZW1iZXIucm9sZTtcblx0Y29uc3QgbmV3Um9sZSA9IHBhcnNlUm9sZXMoY3R4LmJvZHkucm9sZSk7XG5cdGlmIChvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVVcGRhdGVNZW1iZXJSb2xlKSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcHRpb24/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZVVwZGF0ZU1lbWJlclJvbGUoe1xuXHRcdFx0bWVtYmVyOiB0b0JlVXBkYXRlZE1lbWJlcixcblx0XHRcdG5ld1JvbGUsXG5cdFx0XHR1c2VyOiB1c2VyQmVpbmdVcGRhdGVkLFxuXHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0fSk7XG5cdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkge1xuXHRcdFx0Y29uc3QgdXBkYXRlZE1lbWJlciQxID0gYXdhaXQgYWRhcHRlci51cGRhdGVNZW1iZXIoY3R4LmJvZHkubWVtYmVySWQsIHJlc3BvbnNlLmRhdGEucm9sZSB8fCBuZXdSb2xlKTtcblx0XHRcdGlmICghdXBkYXRlZE1lbWJlciQxKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5NRU1CRVJfTk9UX0ZPVU5EIH0pO1xuXHRcdFx0aWYgKG9wdGlvbj8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyVXBkYXRlTWVtYmVyUm9sZSkgYXdhaXQgb3B0aW9uPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlclVwZGF0ZU1lbWJlclJvbGUoe1xuXHRcdFx0XHRtZW1iZXI6IHVwZGF0ZWRNZW1iZXIkMSxcblx0XHRcdFx0cHJldmlvdXNSb2xlLFxuXHRcdFx0XHR1c2VyOiB1c2VyQmVpbmdVcGRhdGVkLFxuXHRcdFx0XHRvcmdhbml6YXRpb25cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKHVwZGF0ZWRNZW1iZXIkMSk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IHVwZGF0ZWRNZW1iZXIgPSBhd2FpdCBhZGFwdGVyLnVwZGF0ZU1lbWJlcihjdHguYm9keS5tZW1iZXJJZCwgbmV3Um9sZSk7XG5cdGlmICghdXBkYXRlZE1lbWJlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTUVNQkVSX05PVF9GT1VORCB9KTtcblx0aWYgKG9wdGlvbj8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyVXBkYXRlTWVtYmVyUm9sZSkgYXdhaXQgb3B0aW9uPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlclVwZGF0ZU1lbWJlclJvbGUoe1xuXHRcdG1lbWJlcjogdXBkYXRlZE1lbWJlcixcblx0XHRwcmV2aW91c1JvbGUsXG5cdFx0dXNlcjogdXNlckJlaW5nVXBkYXRlZCxcblx0XHRvcmdhbml6YXRpb25cblx0fSk7XG5cdHJldHVybiBjdHguanNvbih1cGRhdGVkTWVtYmVyKTtcbn0pO1xuY29uc3QgZ2V0QWN0aXZlTWVtYmVyID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vZ2V0LWFjdGl2ZS1tZW1iZXJcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW29yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgdGhlIG1lbWJlciBkZXRhaWxzIG9mIHRoZSBhY3RpdmUgb3JnYW5pemF0aW9uXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRpZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0dXNlcklkOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0cm9sZTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XCJ1c2VySWRcIixcblx0XHRcdFx0XHRcIm9yZ2FuaXphdGlvbklkXCIsXG5cdFx0XHRcdFx0XCJyb2xlXCJcblx0XHRcdFx0XVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBvcmdhbml6YXRpb25JZCA9IHNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0aWYgKCFvcmdhbml6YXRpb25JZCkgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRzdGF0dXM6IDQwMCxcblx0XHRib2R5OiB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5OT19BQ1RJVkVfT1JHQU5JWkFUSU9OIH1cblx0fSk7XG5cdGNvbnN0IG1lbWJlciA9IGF3YWl0IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCFtZW1iZXIpIHJldHVybiBjdHguanNvbihudWxsLCB7XG5cdFx0c3RhdHVzOiA0MDAsXG5cdFx0Ym9keTogeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTUVNQkVSX05PVF9GT1VORCB9XG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24obWVtYmVyKTtcbn0pO1xuY29uc3QgbGVhdmVPcmdhbml6YXRpb25Cb2R5U2NoZW1hID0gei5vYmplY3QoeyBvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBJZCBmb3IgdGhlIG1lbWJlciB0byBsZWF2ZS4gRWc6IFxcXCJvcmdhbml6YXRpb24taWRcXFwiXCIgfSkgfSk7XG5jb25zdCBsZWF2ZU9yZ2FuaXphdGlvbiA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2xlYXZlXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogbGVhdmVPcmdhbml6YXRpb25Cb2R5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmUsIG9yZ01pZGRsZXdhcmVdXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdG9yZ2FuaXphdGlvbklkOiBjdHguYm9keS5vcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk1FTUJFUl9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IGNyZWF0b3JSb2xlID0gY3R4LmNvbnRleHQub3JnT3B0aW9ucz8uY3JlYXRvclJvbGUgfHwgXCJvd25lclwiO1xuXHRpZiAobWVtYmVyLnJvbGUuc3BsaXQoXCIsXCIpLmluY2x1ZGVzKGNyZWF0b3JSb2xlKSkge1xuXHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRtb2RlbDogXCJtZW1iZXJcIixcblx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRmaWVsZDogXCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHR2YWx1ZTogY3R4LmJvZHkub3JnYW5pemF0aW9uSWRcblx0XHRcdH1dXG5cdFx0fSkpLmZpbHRlcigobWVtYmVyJDEpID0+IG1lbWJlciQxLnJvbGUuc3BsaXQoXCIsXCIpLmluY2x1ZGVzKGNyZWF0b3JSb2xlKSkubGVuZ3RoIDw9IDEpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9DQU5OT1RfTEVBVkVfVEhFX09SR0FOSVpBVElPTl9BU19USEVfT05MWV9PV05FUiB9KTtcblx0fVxuXHRhd2FpdCBhZGFwdGVyLmRlbGV0ZU1lbWJlcih7XG5cdFx0bWVtYmVySWQ6IG1lbWJlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZDogY3R4LmJvZHkub3JnYW5pemF0aW9uSWQsXG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWRcblx0fSk7XG5cdGlmIChzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQgPT09IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkKSBhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZU9yZ2FuaXphdGlvbihzZXNzaW9uLnNlc3Npb24udG9rZW4sIG51bGwsIGN0eCk7XG5cdHJldHVybiBjdHguanNvbihtZW1iZXIpO1xufSk7XG5jb25zdCBsaXN0TWVtYmVycyA9IChvcHRpb25zKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2xpc3QtbWVtYmVyc1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0cXVlcnk6IHoub2JqZWN0KHtcblx0XHRsaW1pdDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG51bWJlciBvZiB1c2VycyB0byByZXR1cm5cIiB9KS5vcih6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuXHRcdG9mZnNldDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9mZnNldCB0byBzdGFydCBmcm9tXCIgfSkub3Ioei5udW1iZXIoKSkub3B0aW9uYWwoKSxcblx0XHRzb3J0Qnk6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBmaWVsZCB0byBzb3J0IGJ5XCIgfSkub3B0aW9uYWwoKSxcblx0XHRzb3J0RGlyZWN0aW9uOiB6LmVudW0oW1wiYXNjXCIsIFwiZGVzY1wiXSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBkaXJlY3Rpb24gdG8gc29ydCBieVwiIH0pLm9wdGlvbmFsKCksXG5cdFx0ZmlsdGVyRmllbGQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBmaWVsZCB0byBmaWx0ZXIgYnlcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGZpbHRlclZhbHVlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdmFsdWUgdG8gZmlsdGVyIGJ5XCIgfSkub3Ioei5udW1iZXIoKSkub3Ioei5ib29sZWFuKCkpLm9wdGlvbmFsKCksXG5cdFx0ZmlsdGVyT3BlcmF0b3I6IHouZW51bShbXG5cdFx0XHRcImVxXCIsXG5cdFx0XHRcIm5lXCIsXG5cdFx0XHRcImx0XCIsXG5cdFx0XHRcImx0ZVwiLFxuXHRcdFx0XCJndFwiLFxuXHRcdFx0XCJndGVcIixcblx0XHRcdFwiY29udGFpbnNcIlxuXHRcdF0pLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb3BlcmF0b3IgdG8gdXNlIGZvciB0aGUgZmlsdGVyXCIgfSkub3B0aW9uYWwoKSxcblx0XHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBJRCB0byBsaXN0IG1lbWJlcnMgZm9yLiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgZGVmYXVsdCB0byB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24uIEVnOiBcXFwib3JnYW5pemF0aW9uLWlkXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdFx0b3JnYW5pemF0aW9uU2x1Zzogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBzbHVnIHRvIGxpc3QgbWVtYmVycyBmb3IuIElmIG5vdCBwcm92aWRlZCwgd2lsbCBkZWZhdWx0IHRvIHRoZSB1c2VyJ3MgYWN0aXZlIG9yZ2FuaXphdGlvbi4gRWc6IFxcXCJvcmdhbml6YXRpb24tc2x1Z1xcXCJcIiB9KS5vcHRpb25hbCgpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGxldCBvcmdhbml6YXRpb25JZCA9IGN0eC5xdWVyeT8ub3JnYW5pemF0aW9uSWQgfHwgc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGlmIChjdHgucXVlcnk/Lm9yZ2FuaXphdGlvblNsdWcpIHtcblx0XHRjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeVNsdWcoY3R4LnF1ZXJ5Py5vcmdhbml6YXRpb25TbHVnKTtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0XHRvcmdhbml6YXRpb25JZCA9IG9yZ2FuaXphdGlvbi5pZDtcblx0fVxuXHRpZiAoIW9yZ2FuaXphdGlvbklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5OT19BQ1RJVkVfT1JHQU5JWkFUSU9OIH0pO1xuXHRpZiAoIWF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdG9yZ2FuaXphdGlvbklkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQV9NRU1CRVJfT0ZfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdGNvbnN0IHsgbWVtYmVycywgdG90YWwgfSA9IGF3YWl0IGFkYXB0ZXIubGlzdE1lbWJlcnMoe1xuXHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdGxpbWl0OiBjdHgucXVlcnk/LmxpbWl0ID8gTnVtYmVyKGN0eC5xdWVyeS5saW1pdCkgOiB2b2lkIDAsXG5cdFx0b2Zmc2V0OiBjdHgucXVlcnk/Lm9mZnNldCA/IE51bWJlcihjdHgucXVlcnkub2Zmc2V0KSA6IHZvaWQgMCxcblx0XHRzb3J0Qnk6IGN0eC5xdWVyeT8uc29ydEJ5LFxuXHRcdHNvcnRPcmRlcjogY3R4LnF1ZXJ5Py5zb3J0RGlyZWN0aW9uLFxuXHRcdGZpbHRlcjogY3R4LnF1ZXJ5Py5maWx0ZXJGaWVsZCA/IHtcblx0XHRcdGZpZWxkOiBjdHgucXVlcnk/LmZpbHRlckZpZWxkLFxuXHRcdFx0b3BlcmF0b3I6IGN0eC5xdWVyeS5maWx0ZXJPcGVyYXRvcixcblx0XHRcdHZhbHVlOiBjdHgucXVlcnkuZmlsdGVyVmFsdWVcblx0XHR9IDogdm9pZCAwXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdG1lbWJlcnMsXG5cdFx0dG90YWxcblx0fSk7XG59KTtcbmNvbnN0IGdldEFjdGl2ZU1lbWJlclJvbGVRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHtcblx0dXNlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJRCB0byBnZXQgdGhlIHJvbGUgZm9yLiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgZGVmYXVsdCB0byB0aGUgY3VycmVudCB1c2VyJ3NcIiB9KS5vcHRpb25hbCgpLFxuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBJRCB0byBsaXN0IG1lbWJlcnMgZm9yLiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgZGVmYXVsdCB0byB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24uIEVnOiBcXFwib3JnYW5pemF0aW9uLWlkXFxcIlwiIH0pLm9wdGlvbmFsKCksXG5cdG9yZ2FuaXphdGlvblNsdWc6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvcmdhbml6YXRpb24gc2x1ZyB0byBsaXN0IG1lbWJlcnMgZm9yLiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgZGVmYXVsdCB0byB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24uIEVnOiBcXFwib3JnYW5pemF0aW9uLXNsdWdcXFwiXCIgfSkub3B0aW9uYWwoKVxufSkub3B0aW9uYWwoKTtcbmNvbnN0IGdldEFjdGl2ZU1lbWJlclJvbGUgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9nZXQtYWN0aXZlLW1lbWJlci1yb2xlXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRxdWVyeTogZ2V0QWN0aXZlTWVtYmVyUm9sZVF1ZXJ5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbb3JnTWlkZGxld2FyZSwgb3JnU2Vzc2lvbk1pZGRsZXdhcmVdXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRsZXQgb3JnYW5pemF0aW9uSWQgPSBjdHgucXVlcnk/Lm9yZ2FuaXphdGlvbklkIHx8IHNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZDtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRpZiAoY3R4LnF1ZXJ5Py5vcmdhbml6YXRpb25TbHVnKSB7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlTbHVnKGN0eC5xdWVyeT8ub3JnYW5pemF0aW9uU2x1Zyk7XG5cdFx0aWYgKCFvcmdhbml6YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0b3JnYW5pemF0aW9uSWQgPSBvcmdhbml6YXRpb24uaWQ7XG5cdH1cblx0aWYgKCFvcmdhbml6YXRpb25JZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0Y29uc3QgaXNNZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCFpc01lbWJlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FfTUVNQkVSX09GX1RISVNfT1JHQU5JWkFUSU9OIH0pO1xuXHRpZiAoIWN0eC5xdWVyeT8udXNlcklkKSByZXR1cm4gY3R4Lmpzb24oeyByb2xlOiBpc01lbWJlci5yb2xlIH0pO1xuXHRjb25zdCB1c2VySWRUb0dldFJvbGUgPSBjdHgucXVlcnk/LnVzZXJJZDtcblx0Y29uc3QgbWVtYmVyID0gYXdhaXQgYWRhcHRlci5maW5kTWVtYmVyQnlPcmdJZCh7XG5cdFx0dXNlcklkOiB1c2VySWRUb0dldFJvbGUsXG5cdFx0b3JnYW5pemF0aW9uSWRcblx0fSk7XG5cdGlmICghbWVtYmVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQV9NRU1CRVJfT0ZfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdHJldHVybiBjdHguanNvbih7IHJvbGU6IG1lbWJlcj8ucm9sZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkZE1lbWJlciwgZ2V0QWN0aXZlTWVtYmVyLCBnZXRBY3RpdmVNZW1iZXJSb2xlLCBsZWF2ZU9yZ2FuaXphdGlvbiwgbGlzdE1lbWJlcnMsIHJlbW92ZU1lbWJlciwgdXBkYXRlTWVtYmVyUm9sZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3J1ZC1tZW1iZXJzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-members.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-org.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/routes/crud-org.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkOrganizationSlug: () => (/* binding */ checkOrganizationSlug),\n/* harmony export */   createOrganization: () => (/* binding */ createOrganization),\n/* harmony export */   deleteOrganization: () => (/* binding */ deleteOrganization),\n/* harmony export */   getFullOrganization: () => (/* binding */ getFullOrganization),\n/* harmony export */   listOrganizations: () => (/* binding */ listOrganizations),\n/* harmony export */   setActiveOrganization: () => (/* binding */ setActiveOrganization),\n/* harmony export */   updateOrganization: () => (/* binding */ updateOrganization)\n/* harmony export */ });\n/* harmony import */ var _db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/routes/crud-org.ts\nconst baseOrganizationSchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).meta({ description: \"The name of the organization\" }),\n\tslug: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).meta({ description: \"The slug of the organization\" }),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_11__.coerce.string().meta({ description: \"The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: \\\"user-id\\\"\" }).optional(),\n\tlogo: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The logo of the organization\" }).optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).meta({ description: \"The metadata of the organization\" }).optional(),\n\tkeepCurrentActiveOrganization: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Whether to keep the current active organization active after creating a new one. Eg: true\" }).optional()\n});\nconst createOrganization = (options) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\tfields: options?.schema?.organization?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/create\", {\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\t\t...baseOrganizationSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Create an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"The organization that was created\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\t\tif (!session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\t\tlet user = session?.user || null;\n\t\tif (!user) {\n\t\t\tif (!ctx.body.userId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\t\t\tuser = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\t\t}\n\t\tif (!user) return ctx.json(null, { status: 401 });\n\t\tconst options$1 = ctx.context.orgOptions;\n\t\tconst canCreateOrg = typeof options$1?.allowUserToCreateOrganization === \"function\" ? await options$1.allowUserToCreateOrganization(user) : options$1?.allowUserToCreateOrganization === void 0 ? true : options$1.allowUserToCreateOrganization;\n\t\tconst isSystemAction = !session && ctx.body.userId;\n\t\tif (!canCreateOrg && !isSystemAction) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION });\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options$1);\n\t\tconst userOrganizations = await adapter.listOrganizations(user.id);\n\t\tif (typeof options$1.organizationLimit === \"number\" ? userOrganizations.length >= options$1.organizationLimit : typeof options$1.organizationLimit === \"function\" ? await options$1.organizationLimit(user) : false) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS });\n\t\tif (await adapter.findOrganizationBySlug(ctx.body.slug)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_ALREADY_EXISTS });\n\t\tlet { keepCurrentActiveOrganization: _, userId: __, ...orgData } = ctx.body;\n\t\tif (options$1.organizationCreation?.beforeCreate) {\n\t\t\tconst response = await options$1.organizationCreation.beforeCreate({\n\t\t\t\torganization: {\n\t\t\t\t\t...orgData,\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t},\n\t\t\t\tuser\n\t\t\t}, ctx.request);\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) orgData = {\n\t\t\t\t...ctx.body,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tif (options$1?.organizationHooks?.beforeCreateOrganization) {\n\t\t\tconst response = await options$1?.organizationHooks.beforeCreateOrganization({\n\t\t\t\torganization: orgData,\n\t\t\t\tuser\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) orgData = {\n\t\t\t\t...ctx.body,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst organization = await adapter.createOrganization({ organization: {\n\t\t\t...orgData,\n\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t} });\n\t\tlet member;\n\t\tlet teamMember = null;\n\t\tlet data = {\n\t\t\tuserId: user.id,\n\t\t\torganizationId: organization.id,\n\t\t\trole: ctx.context.orgOptions.creatorRole || \"owner\"\n\t\t};\n\t\tif (options$1?.organizationHooks?.beforeAddMember) {\n\t\t\tconst response = await options$1?.organizationHooks.beforeAddMember({\n\t\t\t\tmember: {\n\t\t\t\t\tuserId: user.id,\n\t\t\t\t\torganizationId: organization.id,\n\t\t\t\t\trole: ctx.context.orgOptions.creatorRole || \"owner\"\n\t\t\t\t},\n\t\t\t\tuser,\n\t\t\t\torganization\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) data = {\n\t\t\t\t...data,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tmember = await adapter.createMember(data);\n\t\tif (options$1?.organizationHooks?.afterAddMember) await options$1?.organizationHooks.afterAddMember({\n\t\t\tmember,\n\t\t\tuser,\n\t\t\torganization\n\t\t});\n\t\tif (options$1?.teams?.enabled && options$1.teams.defaultTeam?.enabled !== false) {\n\t\t\tlet teamData = {\n\t\t\t\torganizationId: organization.id,\n\t\t\t\tname: `${organization.name}`,\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t};\n\t\t\tif (options$1?.organizationHooks?.beforeCreateTeam) {\n\t\t\t\tconst response = await options$1?.organizationHooks.beforeCreateTeam({\n\t\t\t\t\tteam: {\n\t\t\t\t\t\torganizationId: organization.id,\n\t\t\t\t\t\tname: `${organization.name}`\n\t\t\t\t\t},\n\t\t\t\t\tuser,\n\t\t\t\t\torganization\n\t\t\t\t});\n\t\t\t\tif (response && typeof response === \"object\" && \"data\" in response) teamData = {\n\t\t\t\t\t...teamData,\n\t\t\t\t\t...response.data\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst defaultTeam = await options$1.teams.defaultTeam?.customCreateDefaultTeam?.(organization, ctx) || await adapter.createTeam(teamData);\n\t\t\tteamMember = await adapter.findOrCreateTeamMember({\n\t\t\t\tteamId: defaultTeam.id,\n\t\t\t\tuserId: user.id\n\t\t\t});\n\t\t\tif (options$1?.organizationHooks?.afterCreateTeam) await options$1?.organizationHooks.afterCreateTeam({\n\t\t\t\tteam: defaultTeam,\n\t\t\t\tuser,\n\t\t\t\torganization\n\t\t\t});\n\t\t}\n\t\tif (options$1.organizationCreation?.afterCreate) await options$1.organizationCreation.afterCreate({\n\t\t\torganization,\n\t\t\tuser,\n\t\t\tmember\n\t\t}, ctx.request);\n\t\tif (options$1?.organizationHooks?.afterCreateOrganization) await options$1?.organizationHooks.afterCreateOrganization({\n\t\t\torganization,\n\t\t\tuser,\n\t\t\tmember\n\t\t});\n\t\tif (ctx.context.session && !ctx.body.keepCurrentActiveOrganization) await adapter.setActiveOrganization(ctx.context.session.session.token, organization.id, ctx);\n\t\tif (teamMember && ctx.context.session && !ctx.body.keepCurrentActiveOrganization) await adapter.setActiveTeam(ctx.context.session.session.token, teamMember.teamId, ctx);\n\t\treturn ctx.json({\n\t\t\t...organization,\n\t\t\tmetadata: organization.metadata && typeof organization.metadata === \"string\" ? JSON.parse(organization.metadata) : organization.metadata,\n\t\t\tmembers: [member]\n\t\t});\n\t});\n};\nconst checkOrganizationSlugBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({ slug: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization slug to check. Eg: \\\"my-org\\\"\" }) });\nconst checkOrganizationSlug = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/check-slug\", {\n\tmethod: \"POST\",\n\tbody: checkOrganizationSlugBodySchema,\n\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.requestOnlySessionMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware]\n}, async (ctx) => {\n\tif (!await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options).findOrganizationBySlug(ctx.body.slug)) return ctx.json({ status: true });\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"slug is taken\" });\n});\nconst baseUpdateOrganizationSchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).meta({ description: \"The name of the organization\" }).optional(),\n\tslug: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).meta({ description: \"The slug of the organization\" }).optional(),\n\tlogo: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The logo of the organization\" }).optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).meta({ description: \"The metadata of the organization\" }).optional()\n});\nconst updateOrganization = (options) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\tfields: options?.schema?.organization?.additionalFields || {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/update\", {\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\t\tdata: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\t\t\t...additionalFieldsSchema.shape,\n\t\t\t\t...baseUpdateOrganizationSchema.shape\n\t\t\t}).partial(),\n\t\t\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization ID. Eg: \\\"org-id\\\"\" }).optional()\n\t\t}),\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Update an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tdescription: \"The updated organization\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await ctx.context.getSession(ctx);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", { message: \"User not found\" });\n\t\tconst organizationId = ctx.body.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\tpermissions: { organization: [\"update\"] },\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\torganizationId\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION });\n\t\tif (typeof ctx.body.data.slug === \"string\") {\n\t\t\tconst existingOrganization = await adapter.findOrganizationBySlug(ctx.body.data.slug);\n\t\t\tif (existingOrganization && existingOrganization.id !== organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_SLUG_ALREADY_TAKEN });\n\t\t}\n\t\tif (options?.organizationHooks?.beforeUpdateOrganization) {\n\t\t\tconst response = await options.organizationHooks.beforeUpdateOrganization({\n\t\t\t\torganization: ctx.body.data,\n\t\t\t\tuser: session.user,\n\t\t\t\tmember\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) ctx.body.data = {\n\t\t\t\t...ctx.body.data,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst updatedOrg = await adapter.updateOrganization(organizationId, ctx.body.data);\n\t\tif (options?.organizationHooks?.afterUpdateOrganization) await options.organizationHooks.afterUpdateOrganization({\n\t\t\torganization: updatedOrg,\n\t\t\tuser: session.user,\n\t\t\tmember\n\t\t});\n\t\treturn ctx.json(updatedOrg);\n\t});\n};\nconst deleteOrganizationBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization id to delete\" }) });\nconst deleteOrganization = (options) => {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/delete\", {\n\t\tmethod: \"POST\",\n\t\tbody: deleteOrganizationBodySchema,\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\t\tmetadata: { openapi: {\n\t\t\tdescription: \"Delete an organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The organization id that was deleted\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tif (ctx.context.orgOptions.organizationDeletion?.disabled || ctx.context.orgOptions.disableOrganizationDeletion) {\n\t\t\tif (ctx.context.orgOptions.organizationDeletion?.disabled) ctx.context.logger.info(\"`organizationDeletion.disabled` is deprecated. Use `disableOrganizationDeletion` instead\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: \"Organization deletion is disabled\" });\n\t\t}\n\t\tconst session = await ctx.context.getSession(ctx);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\", { status: 401 });\n\t\tconst organizationId = ctx.body.organizationId;\n\t\tif (!organizationId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND }\n\t\t});\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\trole: member.role,\n\t\t\tpermissions: { organization: [\"delete\"] },\n\t\t\torganizationId,\n\t\t\toptions: ctx.context.orgOptions\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION });\n\t\tif (organizationId === session.session.activeOrganizationId)\n /**\n\t\t* If the organization is deleted, we set the active organization to null\n\t\t*/\n\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\tconst org = await adapter.findOrganizationById(organizationId);\n\t\tif (!org) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\");\n\t\tif (options?.organizationHooks?.beforeDeleteOrganization) await options.organizationHooks.beforeDeleteOrganization({\n\t\t\torganization: org,\n\t\t\tuser: session.user\n\t\t});\n\t\tawait adapter.deleteOrganization(organizationId);\n\t\tif (options?.organizationHooks?.afterDeleteOrganization) await options.organizationHooks.afterDeleteOrganization({\n\t\t\torganization: org,\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(org);\n\t});\n};\nconst getFullOrganizationQuerySchema = zod__WEBPACK_IMPORTED_MODULE_11__.optional(zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization id to get\" }).optional(),\n\torganizationSlug: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization slug to get\" }).optional(),\n\tmembersLimit: zod__WEBPACK_IMPORTED_MODULE_11__.number().or(zod__WEBPACK_IMPORTED_MODULE_11__.string().transform((val) => parseInt(val))).meta({ description: \"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100.\" }).optional()\n}));\nconst getFullOrganization = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/get-full-organization\", {\n\tmethod: \"GET\",\n\tquery: getFullOrganizationQuerySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"getOrganization\",\n\t\tdescription: \"Get the full organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The organization\",\n\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.query?.organizationSlug || ctx.query?.organizationId || session.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, { status: 200 });\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\tconst organization = await adapter.findFullOrganization({\n\t\torganizationId,\n\t\tisSlug: !!ctx.query?.organizationSlug,\n\t\tincludeTeams: ctx.context.orgOptions.teams?.enabled,\n\t\tmembersLimit: ctx.query?.membersLimit\n\t});\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (!await adapter.checkMembership({\n\t\tuserId: session.user.id,\n\t\torganizationId: organization.id\n\t})) {\n\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t}\n\treturn ctx.json(organization);\n});\nconst setActiveOrganizationBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization id to set as active. It can be null to unset the active organization. Eg: \\\"org-id\\\"\" }).nullable().optional(),\n\torganizationSlug: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: \\\"org-slug\\\"\" }).optional()\n});\nconst setActiveOrganization = (options) => {\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/set-active\", {\n\t\tmethod: \"POST\",\n\t\tbody: setActiveOrganizationBodySchema,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\t\trequireHeaders: true,\n\t\tmetadata: { openapi: {\n\t\t\toperationId: \"setActiveOrganization\",\n\t\t\tdescription: \"Set the active organization\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The organization\",\n\t\t\t\t\t$ref: \"#/components/schemas/Organization\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t} }\n\t}, async (ctx) => {\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\t\tconst session = ctx.context.session;\n\t\tlet organizationId = ctx.body.organizationId;\n\t\tconst organizationSlug = ctx.body.organizationSlug;\n\t\tif (organizationId === null) {\n\t\t\tif (!session.session.activeOrganizationId) return ctx.json(null);\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\t\tsession: await adapter.setActiveOrganization(session.session.token, null, ctx),\n\t\t\t\tuser: session.user\n\t\t\t});\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\tif (!organizationId && !organizationSlug) {\n\t\t\tconst sessionOrgId = session.session.activeOrganizationId;\n\t\t\tif (!sessionOrgId) return ctx.json(null);\n\t\t\torganizationId = sessionOrgId;\n\t\t}\n\t\tif (organizationSlug && !organizationId) {\n\t\t\tconst organization$1 = await adapter.findOrganizationBySlug(organizationSlug);\n\t\t\tif (!organization$1) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\t\torganizationId = organization$1.id;\n\t\t}\n\t\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tif (!await adapter.checkMembership({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t})) {\n\t\t\tawait adapter.setActiveOrganization(session.session.token, null, ctx);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\t\t}\n\t\tconst organization = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\tsession: await adapter.setActiveOrganization(session.session.token, organization.id, ctx),\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(organization);\n\t});\n};\nconst listOrganizations = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/organization/list\", {\n\tmethod: \"GET\",\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"List all organizations\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Organization\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst organizations = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options).listOrganizations(ctx.context.session.user.id);\n\treturn ctx.json(organizations);\n});\n\n//#endregion\n\n//# sourceMappingURL=crud-org.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1vcmcubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDdEI7QUFDK0I7QUFDb0M7QUFDbEU7QUFDZTtBQUNtQjtBQUNKO0FBQ1I7QUFDZjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBLCtCQUErQix3Q0FBUTtBQUN2QyxPQUFPLHdDQUFRLGlCQUFpQiw2Q0FBNkM7QUFDN0UsT0FBTyx3Q0FBUSxpQkFBaUIsNkNBQTZDO0FBQzdFLFNBQVMsK0NBQWUsVUFBVSxrTUFBa007QUFDcE8sT0FBTyx3Q0FBUSxVQUFVLDZDQUE2QztBQUN0RSxXQUFXLHdDQUFRLENBQUMsd0NBQVEsSUFBSSxxQ0FBSyxXQUFXLGlEQUFpRDtBQUNqRyxnQ0FBZ0MseUNBQVMsVUFBVSwwR0FBMEc7QUFDN0osQ0FBQztBQUNEO0FBQ0EsZ0NBQWdDLDJEQUFXO0FBQzNDLCtEQUErRDtBQUMvRDtBQUNBLEVBQUU7QUFDRixRQUFRLDBFQUFrQjtBQUMxQjtBQUNBLFFBQVEsd0NBQVE7QUFDaEI7QUFDQTtBQUNBLEdBQUc7QUFDSCxRQUFRLG9EQUFhO0FBQ3JCO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHdCQUF3QiwwRUFBaUI7QUFDekMsMERBQTBELGlEQUFRO0FBQ2xFO0FBQ0E7QUFDQSxtQ0FBbUMsaURBQVE7QUFDM0M7QUFDQTtBQUNBLHFDQUFxQyxhQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsbURBQW1EO0FBQzlKLGtCQUFrQiwyREFBYTtBQUMvQjtBQUNBLGlPQUFpTyxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsdURBQXVEO0FBQ2pWLHFFQUFxRSxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsOEJBQThCO0FBQzlKLFFBQVEsMkRBQTJEO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0JBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSx3Q0FBd0Msd0NBQVEsR0FBRyxNQUFNLHdDQUFRLFVBQVUsK0RBQStELEdBQUc7QUFDN0ksMkNBQTJDLDBFQUFrQjtBQUM3RDtBQUNBO0FBQ0EsT0FBTyxpRkFBNEIsRUFBRSxvREFBYTtBQUNsRCxDQUFDO0FBQ0QsWUFBWSwyREFBYSxnRkFBZ0YsY0FBYztBQUN2SCxXQUFXLGlEQUFRLGtCQUFrQiwwQkFBMEI7QUFDL0QsQ0FBQztBQUNELHFDQUFxQyx3Q0FBUTtBQUM3QyxPQUFPLHdDQUFRLGlCQUFpQiw2Q0FBNkM7QUFDN0UsT0FBTyx3Q0FBUSxpQkFBaUIsNkNBQTZDO0FBQzdFLE9BQU8sd0NBQVEsVUFBVSw2Q0FBNkM7QUFDdEUsV0FBVyx3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUssV0FBVyxpREFBaUQ7QUFDakcsQ0FBQztBQUNEO0FBQ0EsZ0NBQWdDLDJEQUFXO0FBQzNDLCtEQUErRDtBQUMvRDtBQUNBLEVBQUU7QUFDRixRQUFRLDBFQUFrQjtBQUMxQjtBQUNBLFFBQVEsd0NBQVE7QUFDaEIsU0FBUyx3Q0FBUTtBQUNqQjtBQUNBO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQix3Q0FBUSxVQUFVLG9EQUFvRDtBQUN6RixHQUFHO0FBQ0g7QUFDQSxRQUFRLG9EQUFhO0FBQ3JCO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsMEJBQTBCLGlEQUFRLG1CQUFtQiwyQkFBMkI7QUFDaEY7QUFDQSxpQ0FBaUMsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUNySCxrQkFBa0IsMkRBQWE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsMkNBQTJDO0FBQy9ILGFBQWEsa0VBQWE7QUFDMUIsa0JBQWtCLDBCQUEwQjtBQUM1QztBQUNBO0FBQ0E7QUFDQSxHQUFHLGtCQUFrQixpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0Isa0RBQWtEO0FBQ2hJO0FBQ0E7QUFDQSxxRkFBcUYsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGtDQUFrQztBQUNsTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxxQ0FBcUMsd0NBQVEsR0FBRyxnQkFBZ0Isd0NBQVEsVUFBVSw4Q0FBOEMsR0FBRztBQUNuSTtBQUNBLFFBQVEsMEVBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0RBQWE7QUFDckIsY0FBYztBQUNkO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsYUFBYSxpREFBUSxnQkFBZ0IsOENBQThDO0FBQ25GO0FBQ0E7QUFDQSwwQkFBMEIsaURBQVEsbUJBQW1CLGFBQWE7QUFDbEU7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTLHNFQUF3QjtBQUM1QyxHQUFHO0FBQ0gsa0JBQWtCLDJEQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCx5QkFBeUIsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLDJDQUEyQztBQUMvSCxhQUFhLGtFQUFhO0FBQzFCO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1QztBQUNBO0FBQ0EsR0FBRyxrQkFBa0IsaURBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLGtEQUFrRDtBQUNoSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaURBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsdUNBQXVDLDBDQUFVLENBQUMsd0NBQVE7QUFDMUQsaUJBQWlCLHdDQUFRLFVBQVUsMkNBQTJDO0FBQzlFLG1CQUFtQix3Q0FBUSxVQUFVLDZDQUE2QztBQUNsRixlQUFlLHdDQUFRLE1BQU0sd0NBQVEsNkNBQTZDLG1IQUFtSDtBQUNyTSxDQUFDO0FBQ0QseUNBQXlDLDBFQUFrQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxPQUFPLG9EQUFhLEVBQUUsMkRBQW9CO0FBQzFDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSw4Q0FBOEMsYUFBYTtBQUMzRCxpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRiw4QkFBOEIsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUNsSDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxZQUFZLGlEQUFRLGdCQUFnQixTQUFTLHNFQUF3QiwyQ0FBMkM7QUFDaEg7QUFDQTtBQUNBLENBQUM7QUFDRCx3Q0FBd0Msd0NBQVE7QUFDaEQsaUJBQWlCLHdDQUFRLFVBQVUsc0hBQXNIO0FBQ3pKLG1CQUFtQix3Q0FBUSxVQUFVLDRKQUE0SjtBQUNqTSxDQUFDO0FBQ0Q7QUFDQSxRQUFRLDBFQUFrQjtBQUMxQjtBQUNBO0FBQ0EsUUFBUSwyREFBb0IsRUFBRSxvREFBYTtBQUMzQztBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLGtCQUFrQiwyREFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvRUFBZ0I7QUFDekI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUN0SDtBQUNBO0FBQ0EsaUNBQWlDLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDckg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsMkNBQTJDO0FBQ2pIO0FBQ0E7QUFDQSwrQkFBK0IsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUNuSCxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsdUNBQXVDLDBFQUFrQjtBQUN6RDtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsNkJBQTZCLDJEQUFhO0FBQzFDO0FBQ0EsQ0FBQzs7QUFFRDtBQUM0SjtBQUM1SiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxccm91dGVzXFxjcnVkLW9yZy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdG9ab2RTY2hlbWEgfSBmcm9tIFwiLi4vLi4vLi4vZGIvdG8tem9kLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vZGIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCwgcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi8uLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRPcmdBZGFwdGVyIH0gZnJvbSBcIi4uL2FkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi9jYWxsLm1qc1wiO1xuaW1wb3J0IHsgT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiB9IGZyb20gXCIuLi9oYXMtcGVybWlzc2lvbi5tanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC1vcmcudHNcbmNvbnN0IGJhc2VPcmdhbml6YXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgb3JnYW5pemF0aW9uXCIgfSksXG5cdHNsdWc6IHouc3RyaW5nKCkubWluKDEpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc2x1ZyBvZiB0aGUgb3JnYW5pemF0aW9uXCIgfSksXG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIGlkIG9mIHRoZSBvcmdhbml6YXRpb24gY3JlYXRvci4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB1c2VyIHdpbGwgYmUgdXNlZC4gU2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhZG1pbnMgb3Igd2hlbiBjYWxsZWQgYnkgdGhlIHNlcnZlci4gc2VydmVyLW9ubHkuIEVnOiBcXFwidXNlci1pZFxcXCJcIiB9KS5vcHRpb25hbCgpLFxuXHRsb2dvOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbG9nbyBvZiB0aGUgb3JnYW5pemF0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbWV0YWRhdGEgb2YgdGhlIG9yZ2FuaXphdGlvblwiIH0pLm9wdGlvbmFsKCksXG5cdGtlZXBDdXJyZW50QWN0aXZlT3JnYW5pemF0aW9uOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0byBrZWVwIHRoZSBjdXJyZW50IGFjdGl2ZSBvcmdhbml6YXRpb24gYWN0aXZlIGFmdGVyIGNyZWF0aW5nIGEgbmV3IG9uZS4gRWc6IHRydWVcIiB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IGNyZWF0ZU9yZ2FuaXphdGlvbiA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHNTY2hlbWEgPSB0b1pvZFNjaGVtYSh7XG5cdFx0ZmllbGRzOiBvcHRpb25zPy5zY2hlbWE/Lm9yZ2FuaXphdGlvbj8uYWRkaXRpb25hbEZpZWxkcyB8fCB7fSxcblx0XHRpc0NsaWVudFNpZGU6IHRydWVcblx0fSk7XG5cdHJldHVybiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvb3JnYW5pemF0aW9uL2NyZWF0ZVwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0XHQuLi5iYXNlT3JnYW5pemF0aW9uU2NoZW1hLnNoYXBlLFxuXHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkc1NjaGVtYS5zaGFwZVxuXHRcdH0pLFxuXHRcdHVzZTogW29yZ01pZGRsZXdhcmVdLFxuXHRcdG1ldGFkYXRhOiB7XG5cdFx0XHQkSW5mZXI6IHsgYm9keToge30gfSxcblx0XHRcdG9wZW5hcGk6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIGFuIG9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBvcmdhbml6YXRpb24gdGhhdCB3YXMgY3JlYXRlZFwiLFxuXHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Pcmdhbml6YXRpb25cIlxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRcdGlmICghc2Vzc2lvbiAmJiAoY3R4LnJlcXVlc3QgfHwgY3R4LmhlYWRlcnMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdFx0bGV0IHVzZXIgPSBzZXNzaW9uPy51c2VyIHx8IG51bGw7XG5cdFx0aWYgKCF1c2VyKSB7XG5cdFx0XHRpZiAoIWN0eC5ib2R5LnVzZXJJZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRcdFx0dXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQoY3R4LmJvZHkudXNlcklkKTtcblx0XHR9XG5cdFx0aWYgKCF1c2VyKSByZXR1cm4gY3R4Lmpzb24obnVsbCwgeyBzdGF0dXM6IDQwMSB9KTtcblx0XHRjb25zdCBvcHRpb25zJDEgPSBjdHguY29udGV4dC5vcmdPcHRpb25zO1xuXHRcdGNvbnN0IGNhbkNyZWF0ZU9yZyA9IHR5cGVvZiBvcHRpb25zJDE/LmFsbG93VXNlclRvQ3JlYXRlT3JnYW5pemF0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBhd2FpdCBvcHRpb25zJDEuYWxsb3dVc2VyVG9DcmVhdGVPcmdhbml6YXRpb24odXNlcikgOiBvcHRpb25zJDE/LmFsbG93VXNlclRvQ3JlYXRlT3JnYW5pemF0aW9uID09PSB2b2lkIDAgPyB0cnVlIDogb3B0aW9ucyQxLmFsbG93VXNlclRvQ3JlYXRlT3JnYW5pemF0aW9uO1xuXHRcdGNvbnN0IGlzU3lzdGVtQWN0aW9uID0gIXNlc3Npb24gJiYgY3R4LmJvZHkudXNlcklkO1xuXHRcdGlmICghY2FuQ3JlYXRlT3JnICYmICFpc1N5c3RlbUFjdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fQ1JFQVRFX0FfTkVXX09SR0FOSVpBVElPTiB9KTtcblx0XHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyQxKTtcblx0XHRjb25zdCB1c2VyT3JnYW5pemF0aW9ucyA9IGF3YWl0IGFkYXB0ZXIubGlzdE9yZ2FuaXphdGlvbnModXNlci5pZCk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zJDEub3JnYW5pemF0aW9uTGltaXQgPT09IFwibnVtYmVyXCIgPyB1c2VyT3JnYW5pemF0aW9ucy5sZW5ndGggPj0gb3B0aW9ucyQxLm9yZ2FuaXphdGlvbkxpbWl0IDogdHlwZW9mIG9wdGlvbnMkMS5vcmdhbml6YXRpb25MaW1pdCA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgb3B0aW9ucyQxLm9yZ2FuaXphdGlvbkxpbWl0KHVzZXIpIDogZmFsc2UpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfSEFWRV9SRUFDSEVEX1RIRV9NQVhJTVVNX05VTUJFUl9PRl9PUkdBTklaQVRJT05TIH0pO1xuXHRcdGlmIChhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeVNsdWcoY3R4LmJvZHkuc2x1ZykpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9BTFJFQURZX0VYSVNUUyB9KTtcblx0XHRsZXQgeyBrZWVwQ3VycmVudEFjdGl2ZU9yZ2FuaXphdGlvbjogXywgdXNlcklkOiBfXywgLi4ub3JnRGF0YSB9ID0gY3R4LmJvZHk7XG5cdFx0aWYgKG9wdGlvbnMkMS5vcmdhbml6YXRpb25DcmVhdGlvbj8uYmVmb3JlQ3JlYXRlKSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wdGlvbnMkMS5vcmdhbml6YXRpb25DcmVhdGlvbi5iZWZvcmVDcmVhdGUoe1xuXHRcdFx0XHRvcmdhbml6YXRpb246IHtcblx0XHRcdFx0XHQuLi5vcmdEYXRhLFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0fSxcblx0XHRcdFx0dXNlclxuXHRcdFx0fSwgY3R4LnJlcXVlc3QpO1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkgb3JnRGF0YSA9IHtcblx0XHRcdFx0Li4uY3R4LmJvZHksXG5cdFx0XHRcdC4uLnJlc3BvbnNlLmRhdGFcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmIChvcHRpb25zJDE/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVDcmVhdGVPcmdhbml6YXRpb24pIHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3B0aW9ucyQxPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVDcmVhdGVPcmdhbml6YXRpb24oe1xuXHRcdFx0XHRvcmdhbml6YXRpb246IG9yZ0RhdGEsXG5cdFx0XHRcdHVzZXJcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkgb3JnRGF0YSA9IHtcblx0XHRcdFx0Li4uY3R4LmJvZHksXG5cdFx0XHRcdC4uLnJlc3BvbnNlLmRhdGFcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuY3JlYXRlT3JnYW5pemF0aW9uKHsgb3JnYW5pemF0aW9uOiB7XG5cdFx0XHQuLi5vcmdEYXRhLFxuXHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdH0gfSk7XG5cdFx0bGV0IG1lbWJlcjtcblx0XHRsZXQgdGVhbU1lbWJlciA9IG51bGw7XG5cdFx0bGV0IGRhdGEgPSB7XG5cdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuXHRcdFx0cm9sZTogY3R4LmNvbnRleHQub3JnT3B0aW9ucy5jcmVhdG9yUm9sZSB8fCBcIm93bmVyXCJcblx0XHR9O1xuXHRcdGlmIChvcHRpb25zJDE/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVBZGRNZW1iZXIpIHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3B0aW9ucyQxPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVBZGRNZW1iZXIoe1xuXHRcdFx0XHRtZW1iZXI6IHtcblx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcblx0XHRcdFx0XHRyb2xlOiBjdHguY29udGV4dC5vcmdPcHRpb25zLmNyZWF0b3JSb2xlIHx8IFwib3duZXJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRvcmdhbml6YXRpb25cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkgZGF0YSA9IHtcblx0XHRcdFx0Li4uZGF0YSxcblx0XHRcdFx0Li4ucmVzcG9uc2UuZGF0YVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0bWVtYmVyID0gYXdhaXQgYWRhcHRlci5jcmVhdGVNZW1iZXIoZGF0YSk7XG5cdFx0aWYgKG9wdGlvbnMkMT8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyQWRkTWVtYmVyKSBhd2FpdCBvcHRpb25zJDE/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyQWRkTWVtYmVyKHtcblx0XHRcdG1lbWJlcixcblx0XHRcdHVzZXIsXG5cdFx0XHRvcmdhbml6YXRpb25cblx0XHR9KTtcblx0XHRpZiAob3B0aW9ucyQxPy50ZWFtcz8uZW5hYmxlZCAmJiBvcHRpb25zJDEudGVhbXMuZGVmYXVsdFRlYW0/LmVuYWJsZWQgIT09IGZhbHNlKSB7XG5cdFx0XHRsZXQgdGVhbURhdGEgPSB7XG5cdFx0XHRcdG9yZ2FuaXphdGlvbklkOiBvcmdhbml6YXRpb24uaWQsXG5cdFx0XHRcdG5hbWU6IGAke29yZ2FuaXphdGlvbi5uYW1lfWAsXG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdH07XG5cdFx0XHRpZiAob3B0aW9ucyQxPy5vcmdhbml6YXRpb25Ib29rcz8uYmVmb3JlQ3JlYXRlVGVhbSkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wdGlvbnMkMT8ub3JnYW5pemF0aW9uSG9va3MuYmVmb3JlQ3JlYXRlVGVhbSh7XG5cdFx0XHRcdFx0dGVhbToge1xuXHRcdFx0XHRcdFx0b3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcblx0XHRcdFx0XHRcdG5hbWU6IGAke29yZ2FuaXphdGlvbi5uYW1lfWBcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVzZXIsXG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3BvbnNlKSB0ZWFtRGF0YSA9IHtcblx0XHRcdFx0XHQuLi50ZWFtRGF0YSxcblx0XHRcdFx0XHQuLi5yZXNwb25zZS5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBkZWZhdWx0VGVhbSA9IGF3YWl0IG9wdGlvbnMkMS50ZWFtcy5kZWZhdWx0VGVhbT8uY3VzdG9tQ3JlYXRlRGVmYXVsdFRlYW0/Lihvcmdhbml6YXRpb24sIGN0eCkgfHwgYXdhaXQgYWRhcHRlci5jcmVhdGVUZWFtKHRlYW1EYXRhKTtcblx0XHRcdHRlYW1NZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRPckNyZWF0ZVRlYW1NZW1iZXIoe1xuXHRcdFx0XHR0ZWFtSWQ6IGRlZmF1bHRUZWFtLmlkLFxuXHRcdFx0XHR1c2VySWQ6IHVzZXIuaWRcblx0XHRcdH0pO1xuXHRcdFx0aWYgKG9wdGlvbnMkMT8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyQ3JlYXRlVGVhbSkgYXdhaXQgb3B0aW9ucyQxPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlckNyZWF0ZVRlYW0oe1xuXHRcdFx0XHR0ZWFtOiBkZWZhdWx0VGVhbSxcblx0XHRcdFx0dXNlcixcblx0XHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aWYgKG9wdGlvbnMkMS5vcmdhbml6YXRpb25DcmVhdGlvbj8uYWZ0ZXJDcmVhdGUpIGF3YWl0IG9wdGlvbnMkMS5vcmdhbml6YXRpb25DcmVhdGlvbi5hZnRlckNyZWF0ZSh7XG5cdFx0XHRvcmdhbml6YXRpb24sXG5cdFx0XHR1c2VyLFxuXHRcdFx0bWVtYmVyXG5cdFx0fSwgY3R4LnJlcXVlc3QpO1xuXHRcdGlmIChvcHRpb25zJDE/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlckNyZWF0ZU9yZ2FuaXphdGlvbikgYXdhaXQgb3B0aW9ucyQxPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlckNyZWF0ZU9yZ2FuaXphdGlvbih7XG5cdFx0XHRvcmdhbml6YXRpb24sXG5cdFx0XHR1c2VyLFxuXHRcdFx0bWVtYmVyXG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0LnNlc3Npb24gJiYgIWN0eC5ib2R5LmtlZXBDdXJyZW50QWN0aXZlT3JnYW5pemF0aW9uKSBhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZU9yZ2FuaXphdGlvbihjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24udG9rZW4sIG9yZ2FuaXphdGlvbi5pZCwgY3R4KTtcblx0XHRpZiAodGVhbU1lbWJlciAmJiBjdHguY29udGV4dC5zZXNzaW9uICYmICFjdHguYm9keS5rZWVwQ3VycmVudEFjdGl2ZU9yZ2FuaXphdGlvbikgYXdhaXQgYWRhcHRlci5zZXRBY3RpdmVUZWFtKGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi50b2tlbiwgdGVhbU1lbWJlci50ZWFtSWQsIGN0eCk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdC4uLm9yZ2FuaXphdGlvbixcblx0XHRcdG1ldGFkYXRhOiBvcmdhbml6YXRpb24ubWV0YWRhdGEgJiYgdHlwZW9mIG9yZ2FuaXphdGlvbi5tZXRhZGF0YSA9PT0gXCJzdHJpbmdcIiA/IEpTT04ucGFyc2Uob3JnYW5pemF0aW9uLm1ldGFkYXRhKSA6IG9yZ2FuaXphdGlvbi5tZXRhZGF0YSxcblx0XHRcdG1lbWJlcnM6IFttZW1iZXJdXG5cdFx0fSk7XG5cdH0pO1xufTtcbmNvbnN0IGNoZWNrT3JnYW5pemF0aW9uU2x1Z0JvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IHNsdWc6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvcmdhbml6YXRpb24gc2x1ZyB0byBjaGVjay4gRWc6IFxcXCJteS1vcmdcXFwiXCIgfSkgfSk7XG5jb25zdCBjaGVja09yZ2FuaXphdGlvblNsdWcgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9jaGVjay1zbHVnXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogY2hlY2tPcmdhbml6YXRpb25TbHVnQm9keVNjaGVtYSxcblx0dXNlOiBbcmVxdWVzdE9ubHlTZXNzaW9uTWlkZGxld2FyZSwgb3JnTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFhd2FpdCBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBvcHRpb25zKS5maW5kT3JnYW5pemF0aW9uQnlTbHVnKGN0eC5ib2R5LnNsdWcpKSByZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJzbHVnIGlzIHRha2VuXCIgfSk7XG59KTtcbmNvbnN0IGJhc2VVcGRhdGVPcmdhbml6YXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgb3JnYW5pemF0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0c2x1Zzogei5zdHJpbmcoKS5taW4oMSkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBzbHVnIG9mIHRoZSBvcmdhbml6YXRpb25cIiB9KS5vcHRpb25hbCgpLFxuXHRsb2dvOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbG9nbyBvZiB0aGUgb3JnYW5pemF0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0bWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbWV0YWRhdGEgb2YgdGhlIG9yZ2FuaXphdGlvblwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgdXBkYXRlT3JnYW5pemF0aW9uID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgYWRkaXRpb25hbEZpZWxkc1NjaGVtYSA9IHRvWm9kU2NoZW1hKHtcblx0XHRmaWVsZHM6IG9wdGlvbnM/LnNjaGVtYT8ub3JnYW5pemF0aW9uPy5hZGRpdGlvbmFsRmllbGRzIHx8IHt9LFxuXHRcdGlzQ2xpZW50U2lkZTogdHJ1ZVxuXHR9KTtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vdXBkYXRlXCIsIHtcblx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdGJvZHk6IHoub2JqZWN0KHtcblx0XHRcdGRhdGE6IHoub2JqZWN0KHtcblx0XHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkc1NjaGVtYS5zaGFwZSxcblx0XHRcdFx0Li4uYmFzZVVwZGF0ZU9yZ2FuaXphdGlvblNjaGVtYS5zaGFwZVxuXHRcdFx0fSkucGFydGlhbCgpLFxuXHRcdFx0b3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvcmdhbml6YXRpb24gSUQuIEVnOiBcXFwib3JnLWlkXFxcIlwiIH0pLm9wdGlvbmFsKClcblx0XHR9KSxcblx0XHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0XHR1c2U6IFtvcmdNaWRkbGV3YXJlXSxcblx0XHRtZXRhZGF0YToge1xuXHRcdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVwZGF0ZSBhbiBvcmdhbml6YXRpb25cIixcblx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdXBkYXRlZCBvcmdhbml6YXRpb25cIixcblx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvT3JnYW5pemF0aW9uXCJcblx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH1cblx0XHR9XG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRjb25zdCBzZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuZ2V0U2Vzc2lvbihjdHgpO1xuXHRcdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiIH0pO1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkub3JnYW5pemF0aW9uSWQgfHwgc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRcdGlmICghb3JnYW5pemF0aW9uSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRwZXJtaXNzaW9uczogeyBvcmdhbml6YXRpb246IFtcInVwZGF0ZVwiXSB9LFxuXHRcdFx0cm9sZTogbWVtYmVyLnJvbGUsXG5cdFx0XHRvcHRpb25zOiBjdHguY29udGV4dC5vcmdPcHRpb25zLFxuXHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0aWYgKHR5cGVvZiBjdHguYm9keS5kYXRhLnNsdWcgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdGNvbnN0IGV4aXN0aW5nT3JnYW5pemF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlTbHVnKGN0eC5ib2R5LmRhdGEuc2x1Zyk7XG5cdFx0XHRpZiAoZXhpc3RpbmdPcmdhbml6YXRpb24gJiYgZXhpc3RpbmdPcmdhbml6YXRpb24uaWQgIT09IG9yZ2FuaXphdGlvbklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fU0xVR19BTFJFQURZX1RBS0VOIH0pO1xuXHRcdH1cblx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZVVwZGF0ZU9yZ2FuaXphdGlvbikge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcHRpb25zLm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZVVwZGF0ZU9yZ2FuaXphdGlvbih7XG5cdFx0XHRcdG9yZ2FuaXphdGlvbjogY3R4LmJvZHkuZGF0YSxcblx0XHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRtZW1iZXJcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkgY3R4LmJvZHkuZGF0YSA9IHtcblx0XHRcdFx0Li4uY3R4LmJvZHkuZGF0YSxcblx0XHRcdFx0Li4ucmVzcG9uc2UuZGF0YVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0Y29uc3QgdXBkYXRlZE9yZyA9IGF3YWl0IGFkYXB0ZXIudXBkYXRlT3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbklkLCBjdHguYm9keS5kYXRhKTtcblx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyVXBkYXRlT3JnYW5pemF0aW9uKSBhd2FpdCBvcHRpb25zLm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyVXBkYXRlT3JnYW5pemF0aW9uKHtcblx0XHRcdG9yZ2FuaXphdGlvbjogdXBkYXRlZE9yZyxcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdG1lbWJlclxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih1cGRhdGVkT3JnKTtcblx0fSk7XG59O1xuY29uc3QgZGVsZXRlT3JnYW5pemF0aW9uQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgb3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvcmdhbml6YXRpb24gaWQgdG8gZGVsZXRlXCIgfSkgfSk7XG5jb25zdCBkZWxldGVPcmdhbml6YXRpb24gPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9kZWxldGVcIiwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogZGVsZXRlT3JnYW5pemF0aW9uQm9keVNjaGVtYSxcblx0XHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0XHR1c2U6IFtvcmdNaWRkbGV3YXJlXSxcblx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJEZWxldGUgYW4gb3JnYW5pemF0aW9uXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgb3JnYW5pemF0aW9uIGlkIHRoYXQgd2FzIGRlbGV0ZWRcIlxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fSB9XG5cdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRpZiAoY3R4LmNvbnRleHQub3JnT3B0aW9ucy5vcmdhbml6YXRpb25EZWxldGlvbj8uZGlzYWJsZWQgfHwgY3R4LmNvbnRleHQub3JnT3B0aW9ucy5kaXNhYmxlT3JnYW5pemF0aW9uRGVsZXRpb24pIHtcblx0XHRcdGlmIChjdHguY29udGV4dC5vcmdPcHRpb25zLm9yZ2FuaXphdGlvbkRlbGV0aW9uPy5kaXNhYmxlZCkgY3R4LmNvbnRleHQubG9nZ2VyLmluZm8oXCJgb3JnYW5pemF0aW9uRGVsZXRpb24uZGlzYWJsZWRgIGlzIGRlcHJlY2F0ZWQuIFVzZSBgZGlzYWJsZU9yZ2FuaXphdGlvbkRlbGV0aW9uYCBpbnN0ZWFkXCIpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogXCJPcmdhbml6YXRpb24gZGVsZXRpb24gaXMgZGlzYWJsZWRcIiB9KTtcblx0XHR9XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmdldFNlc3Npb24oY3R4KTtcblx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IHN0YXR1czogNDAxIH0pO1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkub3JnYW5pemF0aW9uSWQ7XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCkgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0Ym9keTogeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9XG5cdFx0fSk7XG5cdFx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRyb2xlOiBtZW1iZXIucm9sZSxcblx0XHRcdHBlcm1pc3Npb25zOiB7IG9yZ2FuaXphdGlvbjogW1wiZGVsZXRlXCJdIH0sXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnNcblx0XHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdFx0aWYgKG9yZ2FuaXphdGlvbklkID09PSBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQpXG4gLyoqXG5cdFx0KiBJZiB0aGUgb3JnYW5pemF0aW9uIGlzIGRlbGV0ZWQsIHdlIHNldCB0aGUgYWN0aXZlIG9yZ2FuaXphdGlvbiB0byBudWxsXG5cdFx0Ki9cblx0XHRhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZU9yZ2FuaXphdGlvbihzZXNzaW9uLnNlc3Npb24udG9rZW4sIG51bGwsIGN0eCk7XG5cdFx0Y29uc3Qgb3JnID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlJZChvcmdhbml6YXRpb25JZCk7XG5cdFx0aWYgKCFvcmcpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIpO1xuXHRcdGlmIChvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcz8uYmVmb3JlRGVsZXRlT3JnYW5pemF0aW9uKSBhd2FpdCBvcHRpb25zLm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZURlbGV0ZU9yZ2FuaXphdGlvbih7XG5cdFx0XHRvcmdhbml6YXRpb246IG9yZyxcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdH0pO1xuXHRcdGF3YWl0IGFkYXB0ZXIuZGVsZXRlT3JnYW5pemF0aW9uKG9yZ2FuaXphdGlvbklkKTtcblx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyRGVsZXRlT3JnYW5pemF0aW9uKSBhd2FpdCBvcHRpb25zLm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyRGVsZXRlT3JnYW5pemF0aW9uKHtcblx0XHRcdG9yZ2FuaXphdGlvbjogb3JnLFxuXHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKG9yZyk7XG5cdH0pO1xufTtcbmNvbnN0IGdldEZ1bGxPcmdhbml6YXRpb25RdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3Qoe1xuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBpZCB0byBnZXRcIiB9KS5vcHRpb25hbCgpLFxuXHRvcmdhbml6YXRpb25TbHVnOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb3JnYW5pemF0aW9uIHNsdWcgdG8gZ2V0XCIgfSkub3B0aW9uYWwoKSxcblx0bWVtYmVyc0xpbWl0OiB6Lm51bWJlcigpLm9yKHouc3RyaW5nKCkudHJhbnNmb3JtKCh2YWwpID0+IHBhcnNlSW50KHZhbCkpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGxpbWl0IG9mIG1lbWJlcnMgdG8gZ2V0LiBCeSBkZWZhdWx0LCBpdCB1c2VzIHRoZSBtZW1iZXJzaGlwTGltaXQgb3B0aW9uIHdoaWNoIGRlZmF1bHRzIHRvIDEwMC5cIiB9KS5vcHRpb25hbCgpXG59KSk7XG5jb25zdCBnZXRGdWxsT3JnYW5pemF0aW9uID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vZ2V0LWZ1bGwtb3JnYW5pemF0aW9uXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRxdWVyeTogZ2V0RnVsbE9yZ2FuaXphdGlvblF1ZXJ5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbb3JnTWlkZGxld2FyZSwgb3JnU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwiZ2V0T3JnYW5pemF0aW9uXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IHRoZSBmdWxsIG9yZ2FuaXphdGlvblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgb3JnYW5pemF0aW9uXCIsXG5cdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvT3JnYW5pemF0aW9uXCJcblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3Qgb3JnYW5pemF0aW9uSWQgPSBjdHgucXVlcnk/Lm9yZ2FuaXphdGlvblNsdWcgfHwgY3R4LnF1ZXJ5Py5vcmdhbml6YXRpb25JZCB8fCBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQ7XG5cdGlmICghb3JnYW5pemF0aW9uSWQpIHJldHVybiBjdHguanNvbihudWxsLCB7IHN0YXR1czogMjAwIH0pO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZEZ1bGxPcmdhbml6YXRpb24oe1xuXHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdGlzU2x1ZzogISFjdHgucXVlcnk/Lm9yZ2FuaXphdGlvblNsdWcsXG5cdFx0aW5jbHVkZVRlYW1zOiBjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zPy5lbmFibGVkLFxuXHRcdG1lbWJlcnNMaW1pdDogY3R4LnF1ZXJ5Py5tZW1iZXJzTGltaXRcblx0fSk7XG5cdGlmICghb3JnYW5pemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRpZiAoIWF3YWl0IGFkYXB0ZXIuY2hlY2tNZW1iZXJzaGlwKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkXG5cdH0pKSB7XG5cdFx0YXdhaXQgYWRhcHRlci5zZXRBY3RpdmVPcmdhbml6YXRpb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCBudWxsLCBjdHgpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHR9XG5cdHJldHVybiBjdHguanNvbihvcmdhbml6YXRpb24pO1xufSk7XG5jb25zdCBzZXRBY3RpdmVPcmdhbml6YXRpb25Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvbiBpZCB0byBzZXQgYXMgYWN0aXZlLiBJdCBjYW4gYmUgbnVsbCB0byB1bnNldCB0aGUgYWN0aXZlIG9yZ2FuaXphdGlvbi4gRWc6IFxcXCJvcmctaWRcXFwiXCIgfSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuXHRvcmdhbml6YXRpb25TbHVnOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb3JnYW5pemF0aW9uIHNsdWcgdG8gc2V0IGFzIGFjdGl2ZS4gSXQgY2FuIGJlIG51bGwgdG8gdW5zZXQgdGhlIGFjdGl2ZSBvcmdhbml6YXRpb24gaWYgb3JnYW5pemF0aW9uSWQgaXMgbm90IHByb3ZpZGVkLiBFZzogXFxcIm9yZy1zbHVnXFxcIlwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3Qgc2V0QWN0aXZlT3JnYW5pemF0aW9uID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vc2V0LWFjdGl2ZVwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiBzZXRBY3RpdmVPcmdhbml6YXRpb25Cb2R5U2NoZW1hLFxuXHRcdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlLCBvcmdNaWRkbGV3YXJlXSxcblx0XHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRvcGVyYXRpb25JZDogXCJzZXRBY3RpdmVPcmdhbml6YXRpb25cIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNldCB0aGUgYWN0aXZlIG9yZ2FuaXphdGlvblwiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvT3JnYW5pemF0aW9uXCJcblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH0gfVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRcdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGxldCBvcmdhbml6YXRpb25JZCA9IGN0eC5ib2R5Lm9yZ2FuaXphdGlvbklkO1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvblNsdWcgPSBjdHguYm9keS5vcmdhbml6YXRpb25TbHVnO1xuXHRcdGlmIChvcmdhbml6YXRpb25JZCA9PT0gbnVsbCkge1xuXHRcdFx0aWYgKCFzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQpIHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdHNlc3Npb246IGF3YWl0IGFkYXB0ZXIuc2V0QWN0aXZlT3JnYW5pemF0aW9uKHNlc3Npb24uc2Vzc2lvbi50b2tlbiwgbnVsbCwgY3R4KSxcblx0XHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHR9XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCAmJiAhb3JnYW5pemF0aW9uU2x1Zykge1xuXHRcdFx0Y29uc3Qgc2Vzc2lvbk9yZ0lkID0gc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRcdFx0aWYgKCFzZXNzaW9uT3JnSWQpIHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHRcdG9yZ2FuaXphdGlvbklkID0gc2Vzc2lvbk9yZ0lkO1xuXHRcdH1cblx0XHRpZiAob3JnYW5pemF0aW9uU2x1ZyAmJiAhb3JnYW5pemF0aW9uSWQpIHtcblx0XHRcdGNvbnN0IG9yZ2FuaXphdGlvbiQxID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlTbHVnKG9yZ2FuaXphdGlvblNsdWcpO1xuXHRcdFx0aWYgKCFvcmdhbml6YXRpb24kMSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0XHRcdG9yZ2FuaXphdGlvbklkID0gb3JnYW5pemF0aW9uJDEuaWQ7XG5cdFx0fVxuXHRcdGlmICghb3JnYW5pemF0aW9uSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0aWYgKCFhd2FpdCBhZGFwdGVyLmNoZWNrTWVtYmVyc2hpcCh7XG5cdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0fSkpIHtcblx0XHRcdGF3YWl0IGFkYXB0ZXIuc2V0QWN0aXZlT3JnYW5pemF0aW9uKHNlc3Npb24uc2Vzc2lvbi50b2tlbiwgbnVsbCwgY3R4KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHRcdH1cblx0XHRjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCBhZGFwdGVyLmZpbmRPcmdhbml6YXRpb25CeUlkKG9yZ2FuaXphdGlvbklkKTtcblx0XHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogYXdhaXQgYWRhcHRlci5zZXRBY3RpdmVPcmdhbml6YXRpb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCBvcmdhbml6YXRpb24uaWQsIGN0eCksXG5cdFx0XHR1c2VyOiBzZXNzaW9uLnVzZXJcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24ob3JnYW5pemF0aW9uKTtcblx0fSk7XG59O1xuY29uc3QgbGlzdE9yZ2FuaXphdGlvbnMgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9saXN0XCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgb3JnYW5pemF0aW9uc1wiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdGl0ZW1zOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvT3JnYW5pemF0aW9uXCIgfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbnMgPSBhd2FpdCBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBvcHRpb25zKS5saXN0T3JnYW5pemF0aW9ucyhjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuaWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24ob3JnYW5pemF0aW9ucyk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGVja09yZ2FuaXphdGlvblNsdWcsIGNyZWF0ZU9yZ2FuaXphdGlvbiwgZGVsZXRlT3JnYW5pemF0aW9uLCBnZXRGdWxsT3JnYW5pemF0aW9uLCBsaXN0T3JnYW5pemF0aW9ucywgc2V0QWN0aXZlT3JnYW5pemF0aW9uLCB1cGRhdGVPcmdhbml6YXRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNydWQtb3JnLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-org.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-team.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/routes/crud-team.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addTeamMember: () => (/* binding */ addTeamMember),\n/* harmony export */   createTeam: () => (/* binding */ createTeam),\n/* harmony export */   listOrganizationTeams: () => (/* binding */ listOrganizationTeams),\n/* harmony export */   listTeamMembers: () => (/* binding */ listTeamMembers),\n/* harmony export */   listUserTeams: () => (/* binding */ listUserTeams),\n/* harmony export */   removeTeam: () => (/* binding */ removeTeam),\n/* harmony export */   removeTeamMember: () => (/* binding */ removeTeamMember),\n/* harmony export */   setActiveTeam: () => (/* binding */ setActiveTeam),\n/* harmony export */   updateTeam: () => (/* binding */ updateTeam)\n/* harmony export */ });\n/* harmony import */ var _db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _adapter_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/adapter.mjs\");\n/* harmony import */ var _call_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../call.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/call.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/error-codes.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../has-permission.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/has-permission.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/organization/schema.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/organization/routes/crud-team.ts\nconst teamBaseSchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"The name of the team. Eg: \\\"my-team\\\"\" }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"The organization ID which the team will be created in. Defaults to the active organization. Eg: \\\"organization-id\\\"\" }).optional()\n});\nconst createTeam = (options) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\tfields: options?.schema?.team?.additionalFields ?? {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/create-team\", {\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\t\t\t...teamBaseSchema.shape,\n\t\t\t...additionalFieldsSchema.shape\n\t\t}),\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Create a new team within an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Team created successfully\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the created team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Name of the team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\t\tconst organizationId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\t\tif (!session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"UNAUTHORIZED\");\n\t\tif (!organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\t\tif (session) {\n\t\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\torganizationId\n\t\t\t});\n\t\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION });\n\t\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\t\trole: member.role,\n\t\t\t\toptions: ctx.context.orgOptions,\n\t\t\t\tpermissions: { team: [\"create\"] },\n\t\t\t\torganizationId\n\t\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION });\n\t\t}\n\t\tconst existingTeams = await adapter.listTeams(organizationId);\n\t\tconst maximum = typeof ctx.context.orgOptions.teams?.maximumTeams === \"function\" ? await ctx.context.orgOptions.teams?.maximumTeams({\n\t\t\torganizationId,\n\t\t\tsession\n\t\t}, ctx) : ctx.context.orgOptions.teams?.maximumTeams;\n\t\tif (maximum ? existingTeams.length >= maximum : false) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS });\n\t\tconst { name, organizationId: _, ...additionalFields } = ctx.body;\n\t\tconst organization = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tlet teamData = {\n\t\t\tname,\n\t\t\torganizationId,\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t...additionalFields\n\t\t};\n\t\tif (options?.organizationHooks?.beforeCreateTeam) {\n\t\t\tconst response = await options?.organizationHooks.beforeCreateTeam({\n\t\t\t\tteam: {\n\t\t\t\t\tname,\n\t\t\t\t\torganizationId,\n\t\t\t\t\t...additionalFields\n\t\t\t\t},\n\t\t\t\tuser: session?.user,\n\t\t\t\torganization\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) teamData = {\n\t\t\t\t...teamData,\n\t\t\t\t...response.data\n\t\t\t};\n\t\t}\n\t\tconst createdTeam = await adapter.createTeam(teamData);\n\t\tif (options?.organizationHooks?.afterCreateTeam) await options?.organizationHooks.afterCreateTeam({\n\t\t\tteam: createdTeam,\n\t\t\tuser: session?.user,\n\t\t\torganization\n\t\t});\n\t\treturn ctx.json(createdTeam);\n\t});\n};\nconst removeTeamBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: `The team ID of the team to remove. Eg: \"team-id\"` }),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: `The organization ID which the team falls under. If not provided, it will default to the user's active organization. Eg: \"organization-id\"` }).optional()\n});\nconst removeTeam = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/remove-team\", {\n\tmethod: \"POST\",\n\tbody: removeTeamBodySchema,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a team from an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team removed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"Confirmation message indicating successful removal\",\n\t\t\t\t\tenum: [\"Team removed successfully.\"]\n\t\t\t\t} },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tconst organizationId = ctx.body.organizationId || session?.session.activeOrganizationId;\n\tif (!organizationId) return ctx.json(null, {\n\t\tstatus: 400,\n\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t});\n\tif (!session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"UNAUTHORIZED\");\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\tif (session) {\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member || session.session?.activeTeamId === ctx.body.teamId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM });\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { team: [\"delete\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION });\n\t}\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId\n\t});\n\tif (!team || team.organizationId !== organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tif (!ctx.context.orgOptions.teams?.allowRemovingAllTeams) {\n\t\tif ((await adapter.listTeams(organizationId)).length <= 1) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.UNABLE_TO_REMOVE_LAST_TEAM });\n\t}\n\tconst organization = await adapter.findOrganizationById(organizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tif (options?.organizationHooks?.beforeDeleteTeam) await options?.organizationHooks.beforeDeleteTeam({\n\t\tteam,\n\t\tuser: session?.user,\n\t\torganization\n\t});\n\tawait adapter.deleteTeam(team.id);\n\tif (options?.organizationHooks?.afterDeleteTeam) await options?.organizationHooks.afterDeleteTeam({\n\t\tteam,\n\t\tuser: session?.user,\n\t\torganization\n\t});\n\treturn ctx.json({ message: \"Team removed successfully.\" });\n});\nconst updateTeam = (options) => {\n\tconst additionalFieldsSchema = (0,_db_to_zod_mjs__WEBPACK_IMPORTED_MODULE_0__.toZodSchema)({\n\t\tfields: options?.schema?.team?.additionalFields ?? {},\n\t\tisClientSide: true\n\t});\n\treturn (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/update-team\", {\n\t\tmethod: \"POST\",\n\t\tbody: zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\t\t\tteamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: `The ID of the team to be updated. Eg: \"team-id\"` }),\n\t\t\tdata: zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\t\t\t\t..._schema_mjs__WEBPACK_IMPORTED_MODULE_9__.teamSchema.shape,\n\t\t\t\t...additionalFieldsSchema.shape\n\t\t\t}).partial()\n\t\t}),\n\t\trequireHeaders: true,\n\t\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware],\n\t\tmetadata: {\n\t\t\t$Infer: { body: {} },\n\t\t\topenapi: {\n\t\t\t\tdescription: \"Update an existing team in an organization\",\n\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\tdescription: \"Team updated successfully\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the updated team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"Updated name of the team\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t} } }\n\t\t\t\t} }\n\t\t\t}\n\t\t}\n\t}, async (ctx) => {\n\t\tconst session = ctx.context.session;\n\t\tconst organizationId = ctx.body.data.organizationId || session.session.activeOrganizationId;\n\t\tif (!organizationId) return ctx.json(null, {\n\t\t\tstatus: 400,\n\t\t\tbody: { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION }\n\t\t});\n\t\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\t\tconst member = await adapter.findMemberByOrgId({\n\t\t\tuserId: session.user.id,\n\t\t\torganizationId\n\t\t});\n\t\tif (!member) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM });\n\t\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\t\trole: member.role,\n\t\t\toptions: ctx.context.orgOptions,\n\t\t\tpermissions: { team: [\"update\"] },\n\t\t\torganizationId\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM });\n\t\tconst team = await adapter.findTeamById({\n\t\t\tteamId: ctx.body.teamId,\n\t\t\torganizationId\n\t\t});\n\t\tif (!team || team.organizationId !== organizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\t\tconst { name, organizationId: __, ...additionalFields } = ctx.body.data;\n\t\tconst organization = await adapter.findOrganizationById(organizationId);\n\t\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\t\tconst updates = {\n\t\t\tname,\n\t\t\t...additionalFields\n\t\t};\n\t\tif (options?.organizationHooks?.beforeUpdateTeam) {\n\t\t\tconst response = await options?.organizationHooks.beforeUpdateTeam({\n\t\t\t\tteam,\n\t\t\t\tupdates,\n\t\t\t\tuser: session.user,\n\t\t\t\torganization\n\t\t\t});\n\t\t\tif (response && typeof response === \"object\" && \"data\" in response) {\n\t\t\t\tconst modifiedUpdates = response.data;\n\t\t\t\tconst updatedTeam$1 = await adapter.updateTeam(team.id, modifiedUpdates);\n\t\t\t\tif (options?.organizationHooks?.afterUpdateTeam) await options?.organizationHooks.afterUpdateTeam({\n\t\t\t\t\tteam: updatedTeam$1,\n\t\t\t\t\tuser: session.user,\n\t\t\t\t\torganization\n\t\t\t\t});\n\t\t\t\treturn ctx.json(updatedTeam$1);\n\t\t\t}\n\t\t}\n\t\tconst updatedTeam = await adapter.updateTeam(team.id, updates);\n\t\tif (options?.organizationHooks?.afterUpdateTeam) await options?.organizationHooks.afterUpdateTeam({\n\t\t\tteam: updatedTeam,\n\t\t\tuser: session.user,\n\t\t\torganization\n\t\t});\n\t\treturn ctx.json(updatedTeam);\n\t});\n};\nconst listOrganizationTeamsQuerySchema = zod__WEBPACK_IMPORTED_MODULE_12__.optional(zod__WEBPACK_IMPORTED_MODULE_12__.object({ organizationId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: `The organization ID which the teams are under to list. Defaults to the users active organization. Eg: \"organization-id\"` }).optional() }));\nconst listOrganizationTeams = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/list-teams\", {\n\tmethod: \"GET\",\n\tquery: listOrganizationTeamsQuerySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"List all teams in an organization\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Unique identifier of the team\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Name of the team\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\torganizationId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"ID of the organization the team belongs to\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team was created\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team was last updated\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"organizationId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team objects within the organization\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst organizationId = ctx.query?.organizationId || session?.session.activeOrganizationId;\n\tif (!organizationId) throw ctx.error(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, options);\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: organizationId || \"\"\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION });\n\tconst teams = await adapter.listTeams(organizationId);\n\treturn ctx.json(teams);\n});\nconst setActiveTeamBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({ teamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"The team id to set as active. It can be null to unset the active team\" }).nullable().optional() });\nconst setActiveTeam = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/set-active-team\", {\n\tmethod: \"POST\",\n\tbody: setActiveTeamBodySchema,\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Set the active team\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The team\",\n\t\t\t\t$ref: \"#/components/schemas/Team\"\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tconst session = ctx.context.session;\n\tif (ctx.body.teamId === null) {\n\t\tif (!session.session.activeTeamId) return ctx.json(null);\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\tsession: await adapter.setActiveTeam(session.session.token, null, ctx),\n\t\t\tuser: session.user\n\t\t});\n\t\treturn ctx.json(null);\n\t}\n\tlet teamId;\n\tif (!ctx.body.teamId) {\n\t\tconst sessionTeamId = session.session.activeTeamId;\n\t\tif (!sessionTeamId) return ctx.json(null);\n\t\telse teamId = sessionTeamId;\n\t} else teamId = ctx.body.teamId;\n\tconst team = await adapter.findTeamById({ teamId });\n\tif (!team) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tif (!await adapter.findTeamMember({\n\t\tteamId,\n\t\tuserId: session.user.id\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession: await adapter.setActiveTeam(session.session.token, team.id, ctx),\n\t\tuser: session.user\n\t});\n\treturn ctx.json(team);\n});\nconst listUserTeams = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/list-user-teams\", {\n\tmethod: \"GET\",\n\tmetadata: { openapi: {\n\t\tdescription: \"List all teams that the current user is a part of.\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The team\",\n\t\t\t\t\t$ref: \"#/components/schemas/Team\"\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team objects within the organization\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst teams = await (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, ctx.context.orgOptions).listTeamsByUser({ userId: session.user.id });\n\treturn ctx.json(teams);\n});\nconst listTeamMembersQuerySchema = zod__WEBPACK_IMPORTED_MODULE_12__.optional(zod__WEBPACK_IMPORTED_MODULE_12__.object({ teamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().optional().meta({ description: \"The team whose members we should return. If this is not provided the members of the current active team get returned.\" }) }));\nconst listTeamMembers = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/list-team-members\", {\n\tmethod: \"GET\",\n\tquery: listTeamMembersQuerySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"List the members of the given team.\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Teams retrieved successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"The team member\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Unique identifier of the team member\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The user ID of the team member\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tteamId: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"The team ID of the team the team member is in\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\tdescription: \"Timestamp when the team member was created\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"teamId\",\n\t\t\t\t\t\t\"createdAt\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tdescription: \"Array of team member objects within the team\"\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tconst teamId = ctx.query?.teamId || session?.session.activeTeamId;\n\tif (!teamId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM });\n\tif (!await adapter.findTeamMember({\n\t\tuserId: session.user.id,\n\t\tteamId\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tconst members = await adapter.listTeamMembers({ teamId });\n\treturn ctx.json(members);\n});\nconst addTeamMemberBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"The team the user should be a member of.\" }),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_12__.coerce.string().meta({ description: \"The user Id which represents the user to be added as a member.\" })\n});\nconst addTeamMember = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/add-team-member\", {\n\tmethod: \"POST\",\n\tbody: addTeamMemberBodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"The newly created member\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team member created successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tdescription: \"The team member\",\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Unique identifier of the team member\"\n\t\t\t\t\t},\n\t\t\t\t\tuserId: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The user ID of the team member\"\n\t\t\t\t\t},\n\t\t\t\t\tteamId: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The team ID of the team the team member is in\"\n\t\t\t\t\t},\n\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\tdescription: \"Timestamp when the team member was created\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"id\",\n\t\t\t\t\t\"userId\",\n\t\t\t\t\t\"teamId\",\n\t\t\t\t\t\"createdAt\"\n\t\t\t\t]\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tif (!session.session.activeOrganizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst currentMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!currentMember) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\trole: currentMember.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"update\"] },\n\t\torganizationId: session.session.activeOrganizationId\n\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: ctx.body.userId,\n\t\torganizationId: session.session.activeOrganizationId\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!team) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tconst organization = await adapter.findOrganizationById(session.session.activeOrganizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingAdded = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\tif (!userBeingAdded) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tif (options?.organizationHooks?.beforeAddTeamMember) {\n\t\tconst response = await options?.organizationHooks.beforeAddTeamMember({\n\t\t\tteamMember: {\n\t\t\t\tteamId: ctx.body.teamId,\n\t\t\t\tuserId: ctx.body.userId\n\t\t\t},\n\t\t\tteam,\n\t\t\tuser: userBeingAdded,\n\t\t\torganization\n\t\t});\n\t\tif (response && typeof response === \"object\" && \"data\" in response) {}\n\t}\n\tconst teamMember = await adapter.findOrCreateTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (options?.organizationHooks?.afterAddTeamMember) await options?.organizationHooks.afterAddTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingAdded,\n\t\torganization\n\t});\n\treturn ctx.json(teamMember);\n});\nconst removeTeamMemberBodySchema = zod__WEBPACK_IMPORTED_MODULE_12__.object({\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_12__.string().meta({ description: \"The team the user should be removed from.\" }),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_12__.coerce.string().meta({ description: \"The user which should be removed from the team.\" })\n});\nconst removeTeamMember = (options) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_11__.createAuthEndpoint)(\"/organization/remove-team-member\", {\n\tmethod: \"POST\",\n\tbody: removeTeamMemberBodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Remove a member from a team\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Team member removed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"Confirmation message indicating successful removal\",\n\t\t\t\t\tenum: [\"Team member removed successfully.\"]\n\t\t\t\t} },\n\t\t\t\trequired: [\"message\"]\n\t\t\t} } }\n\t\t} }\n\t} },\n\trequireHeaders: true,\n\tuse: [_call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgMiddleware, _call_mjs__WEBPACK_IMPORTED_MODULE_6__.orgSessionMiddleware]\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tconst adapter = (0,_adapter_mjs__WEBPACK_IMPORTED_MODULE_5__.getOrgAdapter)(ctx.context, ctx.context.orgOptions);\n\tif (!session.session.activeOrganizationId) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.NO_ACTIVE_ORGANIZATION });\n\tconst currentMember = await adapter.findMemberByOrgId({\n\t\tuserId: session.user.id,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!currentMember) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tif (!await (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_8__.hasPermission)({\n\t\trole: currentMember.role,\n\t\toptions: ctx.context.orgOptions,\n\t\tpermissions: { member: [\"delete\"] },\n\t\torganizationId: session.session.activeOrganizationId\n\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER });\n\tif (!await adapter.findMemberByOrgId({\n\t\tuserId: ctx.body.userId,\n\t\torganizationId: session.session.activeOrganizationId\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION });\n\tconst team = await adapter.findTeamById({\n\t\tteamId: ctx.body.teamId,\n\t\torganizationId: session.session.activeOrganizationId\n\t});\n\tif (!team) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.TEAM_NOT_FOUND });\n\tconst organization = await adapter.findOrganizationById(session.session.activeOrganizationId);\n\tif (!organization) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.ORGANIZATION_NOT_FOUND });\n\tconst userBeingRemoved = await ctx.context.internalAdapter.findUserById(ctx.body.userId);\n\tif (!userBeingRemoved) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: \"User not found\" });\n\tconst teamMember = await adapter.findTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (!teamMember) throw new better_call__WEBPACK_IMPORTED_MODULE_10__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_7__.ORGANIZATION_ERROR_CODES.USER_IS_NOT_A_MEMBER_OF_THE_TEAM });\n\tif (options?.organizationHooks?.beforeRemoveTeamMember) await options?.organizationHooks.beforeRemoveTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingRemoved,\n\t\torganization\n\t});\n\tawait adapter.removeTeamMember({\n\t\tteamId: ctx.body.teamId,\n\t\tuserId: ctx.body.userId\n\t});\n\tif (options?.organizationHooks?.afterRemoveTeamMember) await options?.organizationHooks.afterRemoveTeamMember({\n\t\tteamMember,\n\t\tteam,\n\t\tuser: userBeingRemoved,\n\t\torganization\n\t});\n\treturn ctx.json({ message: \"Team member removed successfully.\" });\n});\n\n//#endregion\n\n//# sourceMappingURL=crud-team.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9yb3V0ZXMvY3J1ZC10ZWFtLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ3RCO0FBQytCO0FBQ007QUFDcEM7QUFDZTtBQUNtQjtBQUNKO0FBQ1I7QUFDWDtBQUNKO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0EsdUJBQXVCLHdDQUFRO0FBQy9CLE9BQU8sd0NBQVEsVUFBVSxzREFBc0Q7QUFDL0UsaUJBQWlCLHdDQUFRLFVBQVUsb0lBQW9JO0FBQ3ZLLENBQUM7QUFDRDtBQUNBLGdDQUFnQywyREFBVztBQUMzQyx1REFBdUQ7QUFDdkQ7QUFDQSxFQUFFO0FBQ0YsUUFBUSwwRUFBa0I7QUFDMUI7QUFDQSxRQUFRLHdDQUFRO0FBQ2hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsUUFBUSxvREFBYTtBQUNyQjtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHdCQUF3QiwwRUFBaUI7QUFDekM7QUFDQSwwREFBMEQsa0RBQVE7QUFDbEUsaUNBQWlDLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDckgsa0JBQWtCLDJEQUFhO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLDBCQUEwQixrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsMkRBQTJEO0FBQzlJLGNBQWMsa0VBQWE7QUFDM0I7QUFDQTtBQUNBLG1CQUFtQixrQkFBa0I7QUFDckM7QUFDQSxJQUFJLGtCQUFrQixrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0IsMkRBQTJEO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsbUVBQW1FLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QiwrQ0FBK0M7QUFDN0ssVUFBVSwrQ0FBK0M7QUFDekQ7QUFDQSwrQkFBK0Isa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsNkJBQTZCLHdDQUFRO0FBQ3JDLFNBQVMsd0NBQVEsVUFBVSxpRUFBaUU7QUFDNUYsaUJBQWlCLHdDQUFRLFVBQVUsMEpBQTBKO0FBQzdMLENBQUM7QUFDRCxnQ0FBZ0MsMEVBQWtCO0FBQ2xEO0FBQ0E7QUFDQSxPQUFPLG9EQUFhO0FBQ3BCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCx1QkFBdUIsMEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLFVBQVUsU0FBUyxzRUFBd0I7QUFDM0MsRUFBRTtBQUNGLHlEQUF5RCxrREFBUTtBQUNqRSxpQkFBaUIsMkRBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsOEVBQThFLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QiwwQ0FBMEM7QUFDakwsYUFBYSxrRUFBYTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBLEdBQUcsa0JBQWtCLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QiwyREFBMkQ7QUFDekk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsZ0VBQWdFLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQkFBaUI7QUFDNUk7QUFDQSx1RUFBdUUsa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLDZCQUE2QjtBQUMvSjtBQUNBO0FBQ0EsOEJBQThCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixtQkFBbUIsdUNBQXVDO0FBQzFELENBQUM7QUFDRDtBQUNBLGdDQUFnQywyREFBVztBQUMzQyx1REFBdUQ7QUFDdkQ7QUFDQSxFQUFFO0FBQ0YsUUFBUSwwRUFBa0I7QUFDMUI7QUFDQSxRQUFRLHdDQUFRO0FBQ2hCLFdBQVcsd0NBQVEsVUFBVSxnRUFBZ0U7QUFDN0YsU0FBUyx3Q0FBUTtBQUNqQixPQUFPLG1EQUFVO0FBQ2pCO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLFFBQVEsb0RBQWEsRUFBRSwyREFBb0I7QUFDM0M7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUyxzRUFBd0I7QUFDNUMsR0FBRztBQUNILGtCQUFrQiwyREFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gseUJBQXlCLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QiwwQ0FBMEM7QUFDNUgsYUFBYSxrRUFBYTtBQUMxQjtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBLEdBQUcsa0JBQWtCLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QiwwQ0FBMEM7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGlFQUFpRSxrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsaUJBQWlCO0FBQzdJLFVBQVUsZ0RBQWdEO0FBQzFEO0FBQ0EsK0JBQStCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLHlDQUF5QywwQ0FBVSxDQUFDLHdDQUFRLEdBQUcsZ0JBQWdCLHdDQUFRLFVBQVUsd0lBQXdJLGNBQWM7QUFDdlAsMkNBQTJDLDBFQUFrQjtBQUM3RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUMsQ0FBQztBQUNEO0FBQ0E7QUFDQSx1REFBdUQsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2pILGlCQUFpQiwyREFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxFQUFFLGFBQWEsa0RBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLGtEQUFrRDtBQUMxSDtBQUNBO0FBQ0EsQ0FBQztBQUNELGdDQUFnQyx3Q0FBUSxHQUFHLFFBQVEsd0NBQVEsVUFBVSxzRkFBc0YseUJBQXlCO0FBQ3BMLG1DQUFtQywwRUFBa0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsT0FBTywyREFBb0IsRUFBRSxvREFBYTtBQUMxQyxhQUFhO0FBQ2I7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsaUJBQWlCLDJEQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsMkNBQTJDLFFBQVE7QUFDbkQsc0JBQXNCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQkFBaUI7QUFDbEc7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3QixtQ0FBbUM7QUFDM0csT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRCxtQ0FBbUMsMEVBQWtCO0FBQ3JEO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxPQUFPLG9EQUFhLEVBQUUsMkRBQW9CO0FBQzFDLENBQUM7QUFDRDtBQUNBLHFCQUFxQiwyREFBYSx3REFBd0QseUJBQXlCO0FBQ25IO0FBQ0EsQ0FBQztBQUNELG1DQUFtQywwQ0FBVSxDQUFDLHdDQUFRLEdBQUcsUUFBUSx3Q0FBUSxxQkFBcUIsc0lBQXNJLEdBQUc7QUFDdk8scUNBQXFDLDBFQUFrQjtBQUN2RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLE9BQU8sb0RBQWEsRUFBRSwyREFBb0I7QUFDMUMsQ0FBQztBQUNEO0FBQ0EsaUJBQWlCLDJEQUFhO0FBQzlCO0FBQ0Esd0JBQXdCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixpQ0FBaUM7QUFDcEg7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixtQ0FBbUM7QUFDN0csaURBQWlELFFBQVE7QUFDekQ7QUFDQSxDQUFDO0FBQ0QsZ0NBQWdDLHdDQUFRO0FBQ3hDLFNBQVMsd0NBQVEsVUFBVSx5REFBeUQ7QUFDcEYsU0FBUywrQ0FBZSxVQUFVLCtFQUErRTtBQUNqSCxDQUFDO0FBQ0QsbUNBQW1DLDBFQUFrQjtBQUNyRDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsT0FBTyxvREFBYSxFQUFFLDJEQUFvQjtBQUMxQyxDQUFDO0FBQ0Q7QUFDQSxpQkFBaUIsMkRBQWE7QUFDOUIsc0RBQXNELGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDMUk7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLCtCQUErQixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsMkNBQTJDO0FBQ3JJLFlBQVksa0VBQWE7QUFDekI7QUFDQTtBQUNBLGlCQUFpQixvQkFBb0I7QUFDckM7QUFDQSxFQUFFLGtCQUFrQixrREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0Isa0RBQWtEO0FBQy9IO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsMkNBQTJDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixzQkFBc0Isa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGlCQUFpQjtBQUNsRztBQUNBLDhCQUE4QixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IseUJBQXlCO0FBQ2xIO0FBQ0EsZ0NBQWdDLGtEQUFRLGtCQUFrQiwyQkFBMkI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQztBQUNELG1DQUFtQyx3Q0FBUTtBQUMzQyxTQUFTLHdDQUFRLFVBQVUsMERBQTBEO0FBQ3JGLFNBQVMsK0NBQWUsVUFBVSxnRUFBZ0U7QUFDbEcsQ0FBQztBQUNELHNDQUFzQywwRUFBa0I7QUFDeEQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxPQUFPLG9EQUFhLEVBQUUsMkRBQW9CO0FBQzFDLENBQUM7QUFDRDtBQUNBLGlCQUFpQiwyREFBYTtBQUM5QixzREFBc0Qsa0RBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLHlCQUF5QjtBQUMxSTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsK0JBQStCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QiwyQ0FBMkM7QUFDckksWUFBWSxrRUFBYTtBQUN6QjtBQUNBO0FBQ0EsaUJBQWlCLG9CQUFvQjtBQUNyQztBQUNBLEVBQUUsa0JBQWtCLGtEQUFRLGdCQUFnQixTQUFTLHNFQUF3Qiw4Q0FBOEM7QUFDM0g7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QiwyQ0FBMkM7QUFDckg7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHNCQUFzQixrREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsaUJBQWlCO0FBQ2xHO0FBQ0EsOEJBQThCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix5QkFBeUI7QUFDbEg7QUFDQSxrQ0FBa0Msa0RBQVEsa0JBQWtCLDJCQUEyQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsNEJBQTRCLGtEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixtQ0FBbUM7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixtQkFBbUIsOENBQThDO0FBQ2pFLENBQUM7O0FBRUQ7QUFDcUo7QUFDckoiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXHJvdXRlc1xcY3J1ZC10ZWFtLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuLi8uLi8uLi9kYi90by16b2QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4IH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCBcIi4uLy4uLy4uL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldE9yZ0FkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlci5tanNcIjtcbmltcG9ydCB7IG9yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uL2NhbGwubWpzXCI7XG5pbXBvcnQgeyBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMgfSBmcm9tIFwiLi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBoYXNQZXJtaXNzaW9uIH0gZnJvbSBcIi4uL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgdGVhbVNjaGVtYSB9IGZyb20gXCIuLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vcmdhbml6YXRpb24vcm91dGVzL2NydWQtdGVhbS50c1xuY29uc3QgdGVhbUJhc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdG5hbWU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSB0ZWFtLiBFZzogXFxcIm15LXRlYW1cXFwiXCIgfSksXG5cdG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgb3JnYW5pemF0aW9uIElEIHdoaWNoIHRoZSB0ZWFtIHdpbGwgYmUgY3JlYXRlZCBpbi4gRGVmYXVsdHMgdG8gdGhlIGFjdGl2ZSBvcmdhbml6YXRpb24uIEVnOiBcXFwib3JnYW5pemF0aW9uLWlkXFxcIlwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgY3JlYXRlVGVhbSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHNTY2hlbWEgPSB0b1pvZFNjaGVtYSh7XG5cdFx0ZmllbGRzOiBvcHRpb25zPy5zY2hlbWE/LnRlYW0/LmFkZGl0aW9uYWxGaWVsZHMgPz8ge30sXG5cdFx0aXNDbGllbnRTaWRlOiB0cnVlXG5cdH0pO1xuXHRyZXR1cm4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9jcmVhdGUtdGVhbVwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0XHQuLi50ZWFtQmFzZVNjaGVtYS5zaGFwZSxcblx0XHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNTY2hlbWEuc2hhcGVcblx0XHR9KSxcblx0XHR1c2U6IFtvcmdNaWRkbGV3YXJlXSxcblx0XHRtZXRhZGF0YToge1xuXHRcdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIG5ldyB0ZWFtIHdpdGhpbiBhbiBvcmdhbml6YXRpb25cIixcblx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUZWFtIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgY3JlYXRlZCB0ZWFtXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTmFtZSBvZiB0aGUgdGVhbVwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG9yZ2FuaXphdGlvbklkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJRCBvZiB0aGUgb3JnYW5pemF0aW9uIHRoZSB0ZWFtIGJlbG9uZ3MgdG9cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaW1lc3RhbXAgd2hlbiB0aGUgdGVhbSB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSB0ZWFtIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XHRcdFx0XCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uSWQgPSBjdHguYm9keS5vcmdhbml6YXRpb25JZCB8fCBzZXNzaW9uPy5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRcdGlmICghc2Vzc2lvbiAmJiAoY3R4LnJlcXVlc3QgfHwgY3R4LmhlYWRlcnMpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIik7XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9KTtcblx0XHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdFx0aWYgKHNlc3Npb24pIHtcblx0XHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFtZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0lOVklURV9VU0VSU19UT19USElTX09SR0FOSVpBVElPTiB9KTtcblx0XHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdFx0XHRvcHRpb25zOiBjdHguY29udGV4dC5vcmdPcHRpb25zLFxuXHRcdFx0XHRwZXJtaXNzaW9uczogeyB0ZWFtOiBbXCJjcmVhdGVcIl0gfSxcblx0XHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHRcdH0sIGN0eCkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0NSRUFURV9URUFNU19JTl9USElTX09SR0FOSVpBVElPTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgZXhpc3RpbmdUZWFtcyA9IGF3YWl0IGFkYXB0ZXIubGlzdFRlYW1zKG9yZ2FuaXphdGlvbklkKTtcblx0XHRjb25zdCBtYXhpbXVtID0gdHlwZW9mIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMudGVhbXM/Lm1heGltdW1UZWFtcyA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY3R4LmNvbnRleHQub3JnT3B0aW9ucy50ZWFtcz8ubWF4aW11bVRlYW1zKHtcblx0XHRcdG9yZ2FuaXphdGlvbklkLFxuXHRcdFx0c2Vzc2lvblxuXHRcdH0sIGN0eCkgOiBjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zPy5tYXhpbXVtVGVhbXM7XG5cdFx0aWYgKG1heGltdW0gPyBleGlzdGluZ1RlYW1zLmxlbmd0aCA+PSBtYXhpbXVtIDogZmFsc2UpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9IQVZFX1JFQUNIRURfVEhFX01BWElNVU1fTlVNQkVSX09GX1RFQU1TIH0pO1xuXHRcdGNvbnN0IHsgbmFtZSwgb3JnYW5pemF0aW9uSWQ6IF8sIC4uLmFkZGl0aW9uYWxGaWVsZHMgfSA9IGN0eC5ib2R5O1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQob3JnYW5pemF0aW9uSWQpO1xuXHRcdGlmICghb3JnYW5pemF0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5PUkdBTklaQVRJT05fTk9UX0ZPVU5EIH0pO1xuXHRcdGxldCB0ZWFtRGF0YSA9IHtcblx0XHRcdG5hbWUsXG5cdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0Li4uYWRkaXRpb25hbEZpZWxkc1xuXHRcdH07XG5cdFx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVDcmVhdGVUZWFtKSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZUNyZWF0ZVRlYW0oe1xuXHRcdFx0XHR0ZWFtOiB7XG5cdFx0XHRcdFx0bmFtZSxcblx0XHRcdFx0XHRvcmdhbml6YXRpb25JZCxcblx0XHRcdFx0XHQuLi5hZGRpdGlvbmFsRmllbGRzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24/LnVzZXIsXG5cdFx0XHRcdG9yZ2FuaXphdGlvblxuXHRcdFx0fSk7XG5cdFx0XHRpZiAocmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3BvbnNlKSB0ZWFtRGF0YSA9IHtcblx0XHRcdFx0Li4udGVhbURhdGEsXG5cdFx0XHRcdC4uLnJlc3BvbnNlLmRhdGFcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IGNyZWF0ZWRUZWFtID0gYXdhaXQgYWRhcHRlci5jcmVhdGVUZWFtKHRlYW1EYXRhKTtcblx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyQ3JlYXRlVGVhbSkgYXdhaXQgb3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3MuYWZ0ZXJDcmVhdGVUZWFtKHtcblx0XHRcdHRlYW06IGNyZWF0ZWRUZWFtLFxuXHRcdFx0dXNlcjogc2Vzc2lvbj8udXNlcixcblx0XHRcdG9yZ2FuaXphdGlvblxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbihjcmVhdGVkVGVhbSk7XG5cdH0pO1xufTtcbmNvbnN0IHJlbW92ZVRlYW1Cb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHR0ZWFtSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBgVGhlIHRlYW0gSUQgb2YgdGhlIHRlYW0gdG8gcmVtb3ZlLiBFZzogXCJ0ZWFtLWlkXCJgIH0pLFxuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IGBUaGUgb3JnYW5pemF0aW9uIElEIHdoaWNoIHRoZSB0ZWFtIGZhbGxzIHVuZGVyLiBJZiBub3QgcHJvdmlkZWQsIGl0IHdpbGwgZGVmYXVsdCB0byB0aGUgdXNlcidzIGFjdGl2ZSBvcmdhbml6YXRpb24uIEVnOiBcIm9yZ2FuaXphdGlvbi1pZFwiYCB9KS5vcHRpb25hbCgpXG59KTtcbmNvbnN0IHJlbW92ZVRlYW0gPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9yZW1vdmUtdGVhbVwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHJlbW92ZVRlYW1Cb2R5U2NoZW1hLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJlbW92ZSBhIHRlYW0gZnJvbSBhbiBvcmdhbml6YXRpb25cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGVhbSByZW1vdmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDb25maXJtYXRpb24gbWVzc2FnZSBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgcmVtb3ZhbFwiLFxuXHRcdFx0XHRcdGVudW06IFtcIlRlYW0gcmVtb3ZlZCBzdWNjZXNzZnVsbHkuXCJdXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcIm1lc3NhZ2VcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0Y29uc3Qgb3JnYW5pemF0aW9uSWQgPSBjdHguYm9keS5vcmdhbml6YXRpb25JZCB8fCBzZXNzaW9uPy5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRpZiAoIW9yZ2FuaXphdGlvbklkKSByZXR1cm4gY3R4Lmpzb24obnVsbCwge1xuXHRcdHN0YXR1czogNDAwLFxuXHRcdGJvZHk6IHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk5PX0FDVElWRV9PUkdBTklaQVRJT04gfVxuXHR9KTtcblx0aWYgKCFzZXNzaW9uICYmIChjdHgucmVxdWVzdCB8fCBjdHguaGVhZGVycykpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRpZiAoc2Vzc2lvbikge1xuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyIHx8IHNlc3Npb24uc2Vzc2lvbj8uYWN0aXZlVGVhbUlkID09PSBjdHguYm9keS50ZWFtSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0RFTEVURV9USElTX1RFQU0gfSk7XG5cdFx0aWYgKCFhd2FpdCBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdFx0b3B0aW9uczogY3R4LmNvbnRleHQub3JnT3B0aW9ucyxcblx0XHRcdHBlcm1pc3Npb25zOiB7IHRlYW06IFtcImRlbGV0ZVwiXSB9LFxuXHRcdFx0b3JnYW5pemF0aW9uSWRcblx0XHR9LCBjdHgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19ERUxFVEVfVEVBTVNfSU5fVEhJU19PUkdBTklaQVRJT04gfSk7XG5cdH1cblx0Y29uc3QgdGVhbSA9IGF3YWl0IGFkYXB0ZXIuZmluZFRlYW1CeUlkKHtcblx0XHR0ZWFtSWQ6IGN0eC5ib2R5LnRlYW1JZCxcblx0XHRvcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCF0ZWFtIHx8IHRlYW0ub3JnYW5pemF0aW9uSWQgIT09IG9yZ2FuaXphdGlvbklkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5URUFNX05PVF9GT1VORCB9KTtcblx0aWYgKCFjdHguY29udGV4dC5vcmdPcHRpb25zLnRlYW1zPy5hbGxvd1JlbW92aW5nQWxsVGVhbXMpIHtcblx0XHRpZiAoKGF3YWl0IGFkYXB0ZXIubGlzdFRlYW1zKG9yZ2FuaXphdGlvbklkKSkubGVuZ3RoIDw9IDEpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVOQUJMRV9UT19SRU1PVkVfTEFTVF9URUFNIH0pO1xuXHR9XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQob3JnYW5pemF0aW9uSWQpO1xuXHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVEZWxldGVUZWFtKSBhd2FpdCBvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVEZWxldGVUZWFtKHtcblx0XHR0ZWFtLFxuXHRcdHVzZXI6IHNlc3Npb24/LnVzZXIsXG5cdFx0b3JnYW5pemF0aW9uXG5cdH0pO1xuXHRhd2FpdCBhZGFwdGVyLmRlbGV0ZVRlYW0odGVhbS5pZCk7XG5cdGlmIChvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcz8uYWZ0ZXJEZWxldGVUZWFtKSBhd2FpdCBvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcy5hZnRlckRlbGV0ZVRlYW0oe1xuXHRcdHRlYW0sXG5cdFx0dXNlcjogc2Vzc2lvbj8udXNlcixcblx0XHRvcmdhbml6YXRpb25cblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IG1lc3NhZ2U6IFwiVGVhbSByZW1vdmVkIHN1Y2Nlc3NmdWxseS5cIiB9KTtcbn0pO1xuY29uc3QgdXBkYXRlVGVhbSA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHNTY2hlbWEgPSB0b1pvZFNjaGVtYSh7XG5cdFx0ZmllbGRzOiBvcHRpb25zPy5zY2hlbWE/LnRlYW0/LmFkZGl0aW9uYWxGaWVsZHMgPz8ge30sXG5cdFx0aXNDbGllbnRTaWRlOiB0cnVlXG5cdH0pO1xuXHRyZXR1cm4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi91cGRhdGUtdGVhbVwiLCB7XG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0XHR0ZWFtSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBgVGhlIElEIG9mIHRoZSB0ZWFtIHRvIGJlIHVwZGF0ZWQuIEVnOiBcInRlYW0taWRcImAgfSksXG5cdFx0XHRkYXRhOiB6Lm9iamVjdCh7XG5cdFx0XHRcdC4uLnRlYW1TY2hlbWEuc2hhcGUsXG5cdFx0XHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNTY2hlbWEuc2hhcGVcblx0XHRcdH0pLnBhcnRpYWwoKVxuXHRcdH0pLFxuXHRcdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHRcdHVzZTogW29yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRtZXRhZGF0YToge1xuXHRcdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0XHRvcGVuYXBpOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVwZGF0ZSBhbiBleGlzdGluZyB0ZWFtIGluIGFuIG9yZ2FuaXphdGlvblwiLFxuXHRcdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRlYW0gdXBkYXRlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1cGRhdGVkIHRlYW1cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVcGRhdGVkIG5hbWUgb2YgdGhlIHRlYW1cIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRvcmdhbml6YXRpb25JZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSUQgb2YgdGhlIG9yZ2FuaXphdGlvbiB0aGUgdGVhbSBiZWxvbmdzIHRvXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHRlYW0gd2FzIGNyZWF0ZWRcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaW1lc3RhbXAgd2hlbiB0aGUgdGVhbSB3YXMgbGFzdCB1cGRhdGVkXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwib3JnYW5pemF0aW9uSWRcIixcblx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fVxuXHRcdH1cblx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LmJvZHkuZGF0YS5vcmdhbml6YXRpb25JZCB8fCBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQ7XG5cdFx0aWYgKCFvcmdhbml6YXRpb25JZCkgcmV0dXJuIGN0eC5qc29uKG51bGwsIHtcblx0XHRcdHN0YXR1czogNDAwLFxuXHRcdFx0Ym9keTogeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuTk9fQUNUSVZFX09SR0FOSVpBVElPTiB9XG5cdFx0fSk7XG5cdFx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmICghbWVtYmVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuWU9VX0FSRV9OT1RfQUxMT1dFRF9UT19VUERBVEVfVEhJU19URUFNIH0pO1xuXHRcdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0XHRyb2xlOiBtZW1iZXIucm9sZSxcblx0XHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMsXG5cdFx0XHRwZXJtaXNzaW9uczogeyB0ZWFtOiBbXCJ1cGRhdGVcIl0gfSxcblx0XHRcdG9yZ2FuaXphdGlvbklkXG5cdFx0fSwgY3R4KSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9BUkVfTk9UX0FMTE9XRURfVE9fVVBEQVRFX1RISVNfVEVBTSB9KTtcblx0XHRjb25zdCB0ZWFtID0gYXdhaXQgYWRhcHRlci5maW5kVGVhbUJ5SWQoe1xuXHRcdFx0dGVhbUlkOiBjdHguYm9keS50ZWFtSWQsXG5cdFx0XHRvcmdhbml6YXRpb25JZFxuXHRcdH0pO1xuXHRcdGlmICghdGVhbSB8fCB0ZWFtLm9yZ2FuaXphdGlvbklkICE9PSBvcmdhbml6YXRpb25JZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVEVBTV9OT1RfRk9VTkQgfSk7XG5cdFx0Y29uc3QgeyBuYW1lLCBvcmdhbml6YXRpb25JZDogX18sIC4uLmFkZGl0aW9uYWxGaWVsZHMgfSA9IGN0eC5ib2R5LmRhdGE7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlJZChvcmdhbml6YXRpb25JZCk7XG5cdFx0aWYgKCFvcmdhbml6YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdFx0Y29uc3QgdXBkYXRlcyA9IHtcblx0XHRcdG5hbWUsXG5cdFx0XHQuLi5hZGRpdGlvbmFsRmllbGRzXG5cdFx0fTtcblx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZVVwZGF0ZVRlYW0pIHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3MuYmVmb3JlVXBkYXRlVGVhbSh7XG5cdFx0XHRcdHRlYW0sXG5cdFx0XHRcdHVwZGF0ZXMsXG5cdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UgPT09IFwib2JqZWN0XCIgJiYgXCJkYXRhXCIgaW4gcmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc3QgbW9kaWZpZWRVcGRhdGVzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZFRlYW0kMSA9IGF3YWl0IGFkYXB0ZXIudXBkYXRlVGVhbSh0ZWFtLmlkLCBtb2RpZmllZFVwZGF0ZXMpO1xuXHRcdFx0XHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmFmdGVyVXBkYXRlVGVhbSkgYXdhaXQgb3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3MuYWZ0ZXJVcGRhdGVUZWFtKHtcblx0XHRcdFx0XHR0ZWFtOiB1cGRhdGVkVGVhbSQxLFxuXHRcdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdFx0XHRvcmdhbml6YXRpb25cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih1cGRhdGVkVGVhbSQxKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgdXBkYXRlZFRlYW0gPSBhd2FpdCBhZGFwdGVyLnVwZGF0ZVRlYW0odGVhbS5pZCwgdXBkYXRlcyk7XG5cdFx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlclVwZGF0ZVRlYW0pIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyVXBkYXRlVGVhbSh7XG5cdFx0XHR0ZWFtOiB1cGRhdGVkVGVhbSxcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdG9yZ2FuaXphdGlvblxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih1cGRhdGVkVGVhbSk7XG5cdH0pO1xufTtcbmNvbnN0IGxpc3RPcmdhbml6YXRpb25UZWFtc1F1ZXJ5U2NoZW1hID0gei5vcHRpb25hbCh6Lm9iamVjdCh7IG9yZ2FuaXphdGlvbklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogYFRoZSBvcmdhbml6YXRpb24gSUQgd2hpY2ggdGhlIHRlYW1zIGFyZSB1bmRlciB0byBsaXN0LiBEZWZhdWx0cyB0byB0aGUgdXNlcnMgYWN0aXZlIG9yZ2FuaXphdGlvbi4gRWc6IFwib3JnYW5pemF0aW9uLWlkXCJgIH0pLm9wdGlvbmFsKCkgfSkpO1xuY29uc3QgbGlzdE9yZ2FuaXphdGlvblRlYW1zID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vbGlzdC10ZWFtc1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0cXVlcnk6IGxpc3RPcmdhbml6YXRpb25UZWFtc1F1ZXJ5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgdGVhbXMgaW4gYW4gb3JnYW5pemF0aW9uXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRlYW1zIHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0ZWFtXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIk5hbWUgb2YgdGhlIHRlYW1cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG9yZ2FuaXphdGlvbklkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIklEIG9mIHRoZSBvcmdhbml6YXRpb24gdGhlIHRlYW0gYmVsb25ncyB0b1wiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHRlYW0gd2FzIGNyZWF0ZWRcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSB0ZWFtIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XCJvcmdhbml6YXRpb25JZFwiLFxuXHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFycmF5IG9mIHRlYW0gb2JqZWN0cyB3aXRoaW4gdGhlIG9yZ2FuaXphdGlvblwiXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IG9yZ2FuaXphdGlvbklkID0gY3R4LnF1ZXJ5Py5vcmdhbml6YXRpb25JZCB8fCBzZXNzaW9uPy5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkO1xuXHRpZiAoIW9yZ2FuaXphdGlvbklkKSB0aHJvdyBjdHguZXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5OT19BQ1RJVkVfT1JHQU5JWkFUSU9OIH0pO1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgb3B0aW9ucyk7XG5cdGlmICghYXdhaXQgYWRhcHRlci5maW5kTWVtYmVyQnlPcmdJZCh7XG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG5cdFx0b3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbklkIHx8IFwiXCJcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0FDQ0VTU19USElTX09SR0FOSVpBVElPTiB9KTtcblx0Y29uc3QgdGVhbXMgPSBhd2FpdCBhZGFwdGVyLmxpc3RUZWFtcyhvcmdhbml6YXRpb25JZCk7XG5cdHJldHVybiBjdHguanNvbih0ZWFtcyk7XG59KTtcbmNvbnN0IHNldEFjdGl2ZVRlYW1Cb2R5U2NoZW1hID0gei5vYmplY3QoeyB0ZWFtSWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0ZWFtIGlkIHRvIHNldCBhcyBhY3RpdmUuIEl0IGNhbiBiZSBudWxsIHRvIHVuc2V0IHRoZSBhY3RpdmUgdGVhbVwiIH0pLm51bGxhYmxlKCkub3B0aW9uYWwoKSB9KTtcbmNvbnN0IHNldEFjdGl2ZVRlYW0gPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9zZXQtYWN0aXZlLXRlYW1cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiBzZXRBY3RpdmVUZWFtQm9keVNjaGVtYSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdHVzZTogW29yZ1Nlc3Npb25NaWRkbGV3YXJlLCBvcmdNaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlNldCB0aGUgYWN0aXZlIHRlYW1cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRlYW1cIixcblx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9UZWFtXCJcblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBhZGFwdGVyID0gZ2V0T3JnQWRhcHRlcihjdHguY29udGV4dCwgY3R4LmNvbnRleHQub3JnT3B0aW9ucyk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoY3R4LmJvZHkudGVhbUlkID09PSBudWxsKSB7XG5cdFx0aWYgKCFzZXNzaW9uLnNlc3Npb24uYWN0aXZlVGVhbUlkKSByZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb246IGF3YWl0IGFkYXB0ZXIuc2V0QWN0aXZlVGVhbShzZXNzaW9uLnNlc3Npb24udG9rZW4sIG51bGwsIGN0eCksXG5cdFx0XHR1c2VyOiBzZXNzaW9uLnVzZXJcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdH1cblx0bGV0IHRlYW1JZDtcblx0aWYgKCFjdHguYm9keS50ZWFtSWQpIHtcblx0XHRjb25zdCBzZXNzaW9uVGVhbUlkID0gc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZVRlYW1JZDtcblx0XHRpZiAoIXNlc3Npb25UZWFtSWQpIHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHRlbHNlIHRlYW1JZCA9IHNlc3Npb25UZWFtSWQ7XG5cdH0gZWxzZSB0ZWFtSWQgPSBjdHguYm9keS50ZWFtSWQ7XG5cdGNvbnN0IHRlYW0gPSBhd2FpdCBhZGFwdGVyLmZpbmRUZWFtQnlJZCh7IHRlYW1JZCB9KTtcblx0aWYgKCF0ZWFtKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5URUFNX05PVF9GT1VORCB9KTtcblx0aWYgKCFhd2FpdCBhZGFwdGVyLmZpbmRUZWFtTWVtYmVyKHtcblx0XHR0ZWFtSWQsXG5cdFx0dXNlcklkOiBzZXNzaW9uLnVzZXIuaWRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfVEVBTSB9KTtcblx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRzZXNzaW9uOiBhd2FpdCBhZGFwdGVyLnNldEFjdGl2ZVRlYW0oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCB0ZWFtLmlkLCBjdHgpLFxuXHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKHRlYW0pO1xufSk7XG5jb25zdCBsaXN0VXNlclRlYW1zID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vbGlzdC11c2VyLXRlYW1zXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgdGVhbXMgdGhhdCB0aGUgY3VycmVudCB1c2VyIGlzIGEgcGFydCBvZi5cIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGVhbXMgcmV0cmlldmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczoge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRlYW1cIixcblx0XHRcdFx0XHQkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1RlYW1cIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBcnJheSBvZiB0ZWFtIG9iamVjdHMgd2l0aGluIHRoZSBvcmdhbml6YXRpb25cIlxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9LFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbb3JnTWlkZGxld2FyZSwgb3JnU2Vzc2lvbk1pZGRsZXdhcmVdXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCB0ZWFtcyA9IGF3YWl0IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMpLmxpc3RUZWFtc0J5VXNlcih7IHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkIH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24odGVhbXMpO1xufSk7XG5jb25zdCBsaXN0VGVhbU1lbWJlcnNRdWVyeVNjaGVtYSA9IHoub3B0aW9uYWwoei5vYmplY3QoeyB0ZWFtSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRlYW0gd2hvc2UgbWVtYmVycyB3ZSBzaG91bGQgcmV0dXJuLiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCB0aGUgbWVtYmVycyBvZiB0aGUgY3VycmVudCBhY3RpdmUgdGVhbSBnZXQgcmV0dXJuZWQuXCIgfSkgfSkpO1xuY29uc3QgbGlzdFRlYW1NZW1iZXJzID0gKG9wdGlvbnMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9vcmdhbml6YXRpb24vbGlzdC10ZWFtLW1lbWJlcnNcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHF1ZXJ5OiBsaXN0VGVhbU1lbWJlcnNRdWVyeVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkxpc3QgdGhlIG1lbWJlcnMgb2YgdGhlIGdpdmVuIHRlYW0uXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRlYW1zIHJldHJpZXZlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0aXRlbXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0ZWFtIG1lbWJlclwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0ZWFtIG1lbWJlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXNlcklkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB1c2VyIElEIG9mIHRoZSB0ZWFtIG1lbWJlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dGVhbUlkOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0ZWFtIElEIG9mIHRoZSB0ZWFtIHRoZSB0ZWFtIG1lbWJlciBpcyBpblwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHRlYW0gbWVtYmVyIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJ0ZWFtSWRcIixcblx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFycmF5IG9mIHRlYW0gbWVtYmVyIG9iamVjdHMgd2l0aGluIHRoZSB0ZWFtXCJcblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdHVzZTogW29yZ01pZGRsZXdhcmUsIG9yZ1Nlc3Npb25NaWRkbGV3YXJlXVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0Y29uc3QgYWRhcHRlciA9IGdldE9yZ0FkYXB0ZXIoY3R4LmNvbnRleHQsIGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMpO1xuXHRjb25zdCB0ZWFtSWQgPSBjdHgucXVlcnk/LnRlYW1JZCB8fCBzZXNzaW9uPy5zZXNzaW9uLmFjdGl2ZVRlYW1JZDtcblx0aWYgKCF0ZWFtSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLllPVV9ET19OT1RfSEFWRV9BTl9BQ1RJVkVfVEVBTSB9KTtcblx0aWYgKCFhd2FpdCBhZGFwdGVyLmZpbmRUZWFtTWVtYmVyKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHR0ZWFtSWRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfSVNfTk9UX0FfTUVNQkVSX09GX1RIRV9URUFNIH0pO1xuXHRjb25zdCBtZW1iZXJzID0gYXdhaXQgYWRhcHRlci5saXN0VGVhbU1lbWJlcnMoeyB0ZWFtSWQgfSk7XG5cdHJldHVybiBjdHguanNvbihtZW1iZXJzKTtcbn0pO1xuY29uc3QgYWRkVGVhbU1lbWJlckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHRlYW1JZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRlYW0gdGhlIHVzZXIgc2hvdWxkIGJlIGEgbWVtYmVyIG9mLlwiIH0pLFxuXHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJZCB3aGljaCByZXByZXNlbnRzIHRoZSB1c2VyIHRvIGJlIGFkZGVkIGFzIGEgbWVtYmVyLlwiIH0pXG59KTtcbmNvbnN0IGFkZFRlYW1NZW1iZXIgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9hZGQtdGVhbS1tZW1iZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiBhZGRUZWFtTWVtYmVyQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuZXdseSBjcmVhdGVkIG1lbWJlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUZWFtIG1lbWJlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRlYW0gbWVtYmVyXCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0ZWFtIG1lbWJlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJRCBvZiB0aGUgdGVhbSBtZW1iZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGVhbUlkOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRlYW0gSUQgb2YgdGhlIHRlYW0gdGhlIHRlYW0gbWVtYmVyIGlzIGluXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSB0ZWFtIG1lbWJlciB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFwidGVhbUlkXCIsXG5cdFx0XHRcdFx0XCJjcmVhdGVkQXRcIlxuXHRcdFx0XHRdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFkYXB0ZXIgPSBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBjdHguY29udGV4dC5vcmdPcHRpb25zKTtcblx0aWYgKCFzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk5PX0FDVElWRV9PUkdBTklaQVRJT04gfSk7XG5cdGNvbnN0IGN1cnJlbnRNZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZDogc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdH0pO1xuXHRpZiAoIWN1cnJlbnRNZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfSVNfTk9UX0FfTUVNQkVSX09GX1RIRV9PUkdBTklaQVRJT04gfSk7XG5cdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0cm9sZTogY3VycmVudE1lbWJlci5yb2xlLFxuXHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMsXG5cdFx0cGVybWlzc2lvbnM6IHsgbWVtYmVyOiBbXCJ1cGRhdGVcIl0gfSxcblx0XHRvcmdhbml6YXRpb25JZDogc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdH0sIGN0eCkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX0NSRUFURV9BX05FV19URUFNX01FTUJFUiB9KTtcblx0aWYgKCFhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IGN0eC5ib2R5LnVzZXJJZCxcblx0XHRvcmdhbml6YXRpb25JZDogc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5VU0VSX0lTX05PVF9BX01FTUJFUl9PRl9USEVfT1JHQU5JWkFUSU9OIH0pO1xuXHRjb25zdCB0ZWFtID0gYXdhaXQgYWRhcHRlci5maW5kVGVhbUJ5SWQoe1xuXHRcdHRlYW1JZDogY3R4LmJvZHkudGVhbUlkLFxuXHRcdG9yZ2FuaXphdGlvbklkOiBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWRcblx0fSk7XG5cdGlmICghdGVhbSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuVEVBTV9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IGFkYXB0ZXIuZmluZE9yZ2FuaXphdGlvbkJ5SWQoc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkKTtcblx0aWYgKCFvcmdhbml6YXRpb24pIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk9SR0FOSVpBVElPTl9OT1RfRk9VTkQgfSk7XG5cdGNvbnN0IHVzZXJCZWluZ0FkZGVkID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlJZChjdHguYm9keS51c2VySWQpO1xuXHRpZiAoIXVzZXJCZWluZ0FkZGVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIiB9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5iZWZvcmVBZGRUZWFtTWVtYmVyKSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcHRpb25zPy5vcmdhbml6YXRpb25Ib29rcy5iZWZvcmVBZGRUZWFtTWVtYmVyKHtcblx0XHRcdHRlYW1NZW1iZXI6IHtcblx0XHRcdFx0dGVhbUlkOiBjdHguYm9keS50ZWFtSWQsXG5cdFx0XHRcdHVzZXJJZDogY3R4LmJvZHkudXNlcklkXG5cdFx0XHR9LFxuXHRcdFx0dGVhbSxcblx0XHRcdHVzZXI6IHVzZXJCZWluZ0FkZGVkLFxuXHRcdFx0b3JnYW5pemF0aW9uXG5cdFx0fSk7XG5cdFx0aWYgKHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZSA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXNwb25zZSkge31cblx0fVxuXHRjb25zdCB0ZWFtTWVtYmVyID0gYXdhaXQgYWRhcHRlci5maW5kT3JDcmVhdGVUZWFtTWVtYmVyKHtcblx0XHR0ZWFtSWQ6IGN0eC5ib2R5LnRlYW1JZCxcblx0XHR1c2VySWQ6IGN0eC5ib2R5LnVzZXJJZFxuXHR9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlckFkZFRlYW1NZW1iZXIpIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyQWRkVGVhbU1lbWJlcih7XG5cdFx0dGVhbU1lbWJlcixcblx0XHR0ZWFtLFxuXHRcdHVzZXI6IHVzZXJCZWluZ0FkZGVkLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0cmV0dXJuIGN0eC5qc29uKHRlYW1NZW1iZXIpO1xufSk7XG5jb25zdCByZW1vdmVUZWFtTWVtYmVyQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0dGVhbUlkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdGVhbSB0aGUgdXNlciBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tLlwiIH0pLFxuXHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciB3aGljaCBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIHRoZSB0ZWFtLlwiIH0pXG59KTtcbmNvbnN0IHJlbW92ZVRlYW1NZW1iZXIgPSAob3B0aW9ucykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL29yZ2FuaXphdGlvbi9yZW1vdmUtdGVhbS1tZW1iZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiByZW1vdmVUZWFtTWVtYmVyQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJlbW92ZSBhIG1lbWJlciBmcm9tIGEgdGVhbVwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUZWFtIG1lbWJlciByZW1vdmVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDb25maXJtYXRpb24gbWVzc2FnZSBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgcmVtb3ZhbFwiLFxuXHRcdFx0XHRcdGVudW06IFtcIlRlYW0gbWVtYmVyIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5LlwiXVxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJtZXNzYWdlXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH0sXG5cdHJlcXVpcmVIZWFkZXJzOiB0cnVlLFxuXHR1c2U6IFtvcmdNaWRkbGV3YXJlLCBvcmdTZXNzaW9uTWlkZGxld2FyZV1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFkYXB0ZXIgPSBnZXRPcmdBZGFwdGVyKGN0eC5jb250ZXh0LCBjdHguY29udGV4dC5vcmdPcHRpb25zKTtcblx0aWYgKCFzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLk5PX0FDVElWRV9PUkdBTklaQVRJT04gfSk7XG5cdGNvbnN0IGN1cnJlbnRNZW1iZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRNZW1iZXJCeU9yZ0lkKHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRvcmdhbml6YXRpb25JZDogc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdH0pO1xuXHRpZiAoIWN1cnJlbnRNZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfSVNfTk9UX0FfTUVNQkVSX09GX1RIRV9PUkdBTklaQVRJT04gfSk7XG5cdGlmICghYXdhaXQgaGFzUGVybWlzc2lvbih7XG5cdFx0cm9sZTogY3VycmVudE1lbWJlci5yb2xlLFxuXHRcdG9wdGlvbnM6IGN0eC5jb250ZXh0Lm9yZ09wdGlvbnMsXG5cdFx0cGVybWlzc2lvbnM6IHsgbWVtYmVyOiBbXCJkZWxldGVcIl0gfSxcblx0XHRvcmdhbml6YXRpb25JZDogc2Vzc2lvbi5zZXNzaW9uLmFjdGl2ZU9yZ2FuaXphdGlvbklkXG5cdH0sIGN0eCkpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5ZT1VfQVJFX05PVF9BTExPV0VEX1RPX1JFTU9WRV9BX1RFQU1fTUVNQkVSIH0pO1xuXHRpZiAoIWF3YWl0IGFkYXB0ZXIuZmluZE1lbWJlckJ5T3JnSWQoe1xuXHRcdHVzZXJJZDogY3R4LmJvZHkudXNlcklkLFxuXHRcdG9yZ2FuaXphdGlvbklkOiBzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfSVNfTk9UX0FfTUVNQkVSX09GX1RIRV9PUkdBTklaQVRJT04gfSk7XG5cdGNvbnN0IHRlYW0gPSBhd2FpdCBhZGFwdGVyLmZpbmRUZWFtQnlJZCh7XG5cdFx0dGVhbUlkOiBjdHguYm9keS50ZWFtSWQsXG5cdFx0b3JnYW5pemF0aW9uSWQ6IHNlc3Npb24uc2Vzc2lvbi5hY3RpdmVPcmdhbml6YXRpb25JZFxuXHR9KTtcblx0aWYgKCF0ZWFtKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IE9SR0FOSVpBVElPTl9FUlJPUl9DT0RFUy5URUFNX05PVF9GT1VORCB9KTtcblx0Y29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgYWRhcHRlci5maW5kT3JnYW5pemF0aW9uQnlJZChzZXNzaW9uLnNlc3Npb24uYWN0aXZlT3JnYW5pemF0aW9uSWQpO1xuXHRpZiAoIW9yZ2FuaXphdGlvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBPUkdBTklaQVRJT05fRVJST1JfQ09ERVMuT1JHQU5JWkFUSU9OX05PVF9GT1VORCB9KTtcblx0Y29uc3QgdXNlckJlaW5nUmVtb3ZlZCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQoY3R4LmJvZHkudXNlcklkKTtcblx0aWYgKCF1c2VyQmVpbmdSZW1vdmVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgdGVhbU1lbWJlciA9IGF3YWl0IGFkYXB0ZXIuZmluZFRlYW1NZW1iZXIoe1xuXHRcdHRlYW1JZDogY3R4LmJvZHkudGVhbUlkLFxuXHRcdHVzZXJJZDogY3R4LmJvZHkudXNlcklkXG5cdH0pO1xuXHRpZiAoIXRlYW1NZW1iZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogT1JHQU5JWkFUSU9OX0VSUk9SX0NPREVTLlVTRVJfSVNfTk9UX0FfTUVNQkVSX09GX1RIRV9URUFNIH0pO1xuXHRpZiAob3B0aW9ucz8ub3JnYW5pemF0aW9uSG9va3M/LmJlZm9yZVJlbW92ZVRlYW1NZW1iZXIpIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmJlZm9yZVJlbW92ZVRlYW1NZW1iZXIoe1xuXHRcdHRlYW1NZW1iZXIsXG5cdFx0dGVhbSxcblx0XHR1c2VyOiB1c2VyQmVpbmdSZW1vdmVkLFxuXHRcdG9yZ2FuaXphdGlvblxuXHR9KTtcblx0YXdhaXQgYWRhcHRlci5yZW1vdmVUZWFtTWVtYmVyKHtcblx0XHR0ZWFtSWQ6IGN0eC5ib2R5LnRlYW1JZCxcblx0XHR1c2VySWQ6IGN0eC5ib2R5LnVzZXJJZFxuXHR9KTtcblx0aWYgKG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzPy5hZnRlclJlbW92ZVRlYW1NZW1iZXIpIGF3YWl0IG9wdGlvbnM/Lm9yZ2FuaXphdGlvbkhvb2tzLmFmdGVyUmVtb3ZlVGVhbU1lbWJlcih7XG5cdFx0dGVhbU1lbWJlcixcblx0XHR0ZWFtLFxuXHRcdHVzZXI6IHVzZXJCZWluZ1JlbW92ZWQsXG5cdFx0b3JnYW5pemF0aW9uXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBtZXNzYWdlOiBcIlRlYW0gbWVtYmVyIHJlbW92ZWQgc3VjY2Vzc2Z1bGx5LlwiIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYWRkVGVhbU1lbWJlciwgY3JlYXRlVGVhbSwgbGlzdE9yZ2FuaXphdGlvblRlYW1zLCBsaXN0VGVhbU1lbWJlcnMsIGxpc3RVc2VyVGVhbXMsIHJlbW92ZVRlYW0sIHJlbW92ZVRlYW1NZW1iZXIsIHNldEFjdGl2ZVRlYW0sIHVwZGF0ZVRlYW0gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNydWQtdGVhbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/routes/crud-team.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/organization/schema.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/schema.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   teamSchema: () => (/* binding */ teamSchema)\n/* harmony export */ });\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n//#region src/plugins/organization/schema.ts\nconst roleSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string();\nconst invitationStatus = zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n\t\"pending\",\n\t\"accepted\",\n\t\"rejected\",\n\t\"canceled\"\n]).default(\"pending\");\nconst organizationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\tname: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tslug: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tlogo: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish().optional(),\n\tmetadata: zod__WEBPACK_IMPORTED_MODULE_1__.record(zod__WEBPACK_IMPORTED_MODULE_1__.string(), zod__WEBPACK_IMPORTED_MODULE_1__.unknown()).or(zod__WEBPACK_IMPORTED_MODULE_1__.string().transform((v) => JSON.parse(v))).optional(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date()\n});\nconst memberSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_1__.coerce.string(),\n\trole: roleSchema,\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date())\n});\nconst invitationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\temail: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\trole: roleSchema,\n\tstatus: invitationStatus,\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_1__.string().nullish(),\n\tinviterId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date())\n});\nconst teamSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\tname: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n\tupdatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional()\n});\nconst teamMemberSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\tteamId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tuserId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date())\n});\nconst organizationRoleSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n\tid: zod__WEBPACK_IMPORTED_MODULE_1__.string().default(_utils_index_mjs__WEBPACK_IMPORTED_MODULE_0__.generateId),\n\torganizationId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\trole: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n\tpermission: zod__WEBPACK_IMPORTED_MODULE_1__.record(zod__WEBPACK_IMPORTED_MODULE_1__.string(), zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string())),\n\tcreatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().default(() => /* @__PURE__ */ new Date()),\n\tupdatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional()\n});\nconst defaultRoles = [\n\t\"admin\",\n\t\"member\",\n\t\"owner\"\n];\nconst defaultRolesSchema = zod__WEBPACK_IMPORTED_MODULE_1__.union([zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"](defaultRoles), zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"](defaultRoles))]);\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtRDtBQUMxQjs7QUFFekI7QUFDQSxtQkFBbUIsdUNBQVE7QUFDM0IseUJBQXlCLHdDQUFNO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsdUNBQVE7QUFDbkMsS0FBSyx1Q0FBUSxXQUFXLHdEQUFVO0FBQ2xDLE9BQU8sdUNBQVE7QUFDZixPQUFPLHVDQUFRO0FBQ2YsT0FBTyx1Q0FBUTtBQUNmLFdBQVcsdUNBQVEsQ0FBQyx1Q0FBUSxJQUFJLHdDQUFTLE9BQU8sdUNBQVE7QUFDeEQsWUFBWSxxQ0FBTTtBQUNsQixDQUFDO0FBQ0QscUJBQXFCLHVDQUFRO0FBQzdCLEtBQUssdUNBQVEsV0FBVyx3REFBVTtBQUNsQyxpQkFBaUIsdUNBQVE7QUFDekIsU0FBUyw4Q0FBZTtBQUN4QjtBQUNBLFlBQVkscUNBQU07QUFDbEIsQ0FBQztBQUNELHlCQUF5Qix1Q0FBUTtBQUNqQyxLQUFLLHVDQUFRLFdBQVcsd0RBQVU7QUFDbEMsaUJBQWlCLHVDQUFRO0FBQ3pCLFFBQVEsdUNBQVE7QUFDaEI7QUFDQTtBQUNBLFNBQVMsdUNBQVE7QUFDakIsWUFBWSx1Q0FBUTtBQUNwQixZQUFZLHFDQUFNO0FBQ2xCLFlBQVkscUNBQU07QUFDbEIsQ0FBQztBQUNELG1CQUFtQix1Q0FBUTtBQUMzQixLQUFLLHVDQUFRLFdBQVcsd0RBQVU7QUFDbEMsT0FBTyx1Q0FBUTtBQUNmLGlCQUFpQix1Q0FBUTtBQUN6QixZQUFZLHFDQUFNO0FBQ2xCLFlBQVkscUNBQU07QUFDbEIsQ0FBQztBQUNELHlCQUF5Qix1Q0FBUTtBQUNqQyxLQUFLLHVDQUFRLFdBQVcsd0RBQVU7QUFDbEMsU0FBUyx1Q0FBUTtBQUNqQixTQUFTLHVDQUFRO0FBQ2pCLFlBQVkscUNBQU07QUFDbEIsQ0FBQztBQUNELCtCQUErQix1Q0FBUTtBQUN2QyxLQUFLLHVDQUFRLFdBQVcsd0RBQVU7QUFDbEMsaUJBQWlCLHVDQUFRO0FBQ3pCLE9BQU8sdUNBQVE7QUFDZixhQUFhLHVDQUFRLENBQUMsdUNBQVEsSUFBSSxzQ0FBTyxDQUFDLHVDQUFRO0FBQ2xELFlBQVkscUNBQU07QUFDbEIsWUFBWSxxQ0FBTTtBQUNsQixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixzQ0FBTyxFQUFFLHdDQUFNLGdCQUFnQixzQ0FBTyxDQUFDLHdDQUFNOztBQUV4RTtBQUNzQjtBQUN0QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vcmdhbml6YXRpb24vc2NoZW1hLnRzXG5jb25zdCByb2xlU2NoZW1hID0gei5zdHJpbmcoKTtcbmNvbnN0IGludml0YXRpb25TdGF0dXMgPSB6LmVudW0oW1xuXHRcInBlbmRpbmdcIixcblx0XCJhY2NlcHRlZFwiLFxuXHRcInJlamVjdGVkXCIsXG5cdFwiY2FuY2VsZWRcIlxuXSkuZGVmYXVsdChcInBlbmRpbmdcIik7XG5jb25zdCBvcmdhbml6YXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGlkOiB6LnN0cmluZygpLmRlZmF1bHQoZ2VuZXJhdGVJZCksXG5cdG5hbWU6IHouc3RyaW5nKCksXG5cdHNsdWc6IHouc3RyaW5nKCksXG5cdGxvZ286IHouc3RyaW5nKCkubnVsbGlzaCgpLm9wdGlvbmFsKCksXG5cdG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LnVua25vd24oKSkub3Ioei5zdHJpbmcoKS50cmFuc2Zvcm0oKHYpID0+IEpTT04ucGFyc2UodikpKS5vcHRpb25hbCgpLFxuXHRjcmVhdGVkQXQ6IHouZGF0ZSgpXG59KTtcbmNvbnN0IG1lbWJlclNjaGVtYSA9IHoub2JqZWN0KHtcblx0aWQ6IHouc3RyaW5nKCkuZGVmYXVsdChnZW5lcmF0ZUlkKSxcblx0b3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCksXG5cdHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCksXG5cdHJvbGU6IHJvbGVTY2hlbWEsXG5cdGNyZWF0ZWRBdDogei5kYXRlKCkuZGVmYXVsdCgoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSlcbn0pO1xuY29uc3QgaW52aXRhdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcblx0aWQ6IHouc3RyaW5nKCkuZGVmYXVsdChnZW5lcmF0ZUlkKSxcblx0b3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCksXG5cdGVtYWlsOiB6LnN0cmluZygpLFxuXHRyb2xlOiByb2xlU2NoZW1hLFxuXHRzdGF0dXM6IGludml0YXRpb25TdGF0dXMsXG5cdHRlYW1JZDogei5zdHJpbmcoKS5udWxsaXNoKCksXG5cdGludml0ZXJJZDogei5zdHJpbmcoKSxcblx0ZXhwaXJlc0F0OiB6LmRhdGUoKSxcblx0Y3JlYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKVxufSk7XG5jb25zdCB0ZWFtU2NoZW1hID0gei5vYmplY3Qoe1xuXHRpZDogei5zdHJpbmcoKS5kZWZhdWx0KGdlbmVyYXRlSWQpLFxuXHRuYW1lOiB6LnN0cmluZygpLm1pbigxKSxcblx0b3JnYW5pemF0aW9uSWQ6IHouc3RyaW5nKCksXG5cdGNyZWF0ZWRBdDogei5kYXRlKCksXG5cdHVwZGF0ZWRBdDogei5kYXRlKCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCB0ZWFtTWVtYmVyU2NoZW1hID0gei5vYmplY3Qoe1xuXHRpZDogei5zdHJpbmcoKS5kZWZhdWx0KGdlbmVyYXRlSWQpLFxuXHR0ZWFtSWQ6IHouc3RyaW5nKCksXG5cdHVzZXJJZDogei5zdHJpbmcoKSxcblx0Y3JlYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKVxufSk7XG5jb25zdCBvcmdhbml6YXRpb25Sb2xlU2NoZW1hID0gei5vYmplY3Qoe1xuXHRpZDogei5zdHJpbmcoKS5kZWZhdWx0KGdlbmVyYXRlSWQpLFxuXHRvcmdhbml6YXRpb25JZDogei5zdHJpbmcoKSxcblx0cm9sZTogei5zdHJpbmcoKSxcblx0cGVybWlzc2lvbjogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSksXG5cdGNyZWF0ZWRBdDogei5kYXRlKCkuZGVmYXVsdCgoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSksXG5cdHVwZGF0ZWRBdDogei5kYXRlKCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBkZWZhdWx0Um9sZXMgPSBbXG5cdFwiYWRtaW5cIixcblx0XCJtZW1iZXJcIixcblx0XCJvd25lclwiXG5dO1xuY29uc3QgZGVmYXVsdFJvbGVzU2NoZW1hID0gei51bmlvbihbei5lbnVtKGRlZmF1bHRSb2xlcyksIHouYXJyYXkoei5lbnVtKGRlZmF1bHRSb2xlcykpXSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdGVhbVNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/organization/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/client.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   phoneNumberClient: () => (/* binding */ phoneNumberClient)\n/* harmony export */ });\n//#region src/plugins/phone-number/client.ts\nconst phoneNumberClient = () => {\n\treturn {\n\t\tid: \"phoneNumber\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher(path) {\n\t\t\t\treturn path === \"/phone-number/update\" || path === \"/phone-number/verify\" || path === \"/sign-in/phone-number\";\n\t\t\t},\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHBob25lLW51bWJlclxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvcGhvbmUtbnVtYmVyL2NsaWVudC50c1xuY29uc3QgcGhvbmVOdW1iZXJDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwicGhvbmVOdW1iZXJcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL3Bob25lLW51bWJlci91cGRhdGVcIiB8fCBwYXRoID09PSBcIi9waG9uZS1udW1iZXIvdmVyaWZ5XCIgfHwgcGF0aCA9PT0gXCIvc2lnbi1pbi9waG9uZS1udW1iZXJcIjtcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIlxuXHRcdH1dXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBob25lTnVtYmVyQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/phone-number/error-codes.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/error-codes.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PHONE_NUMBER_ERROR_CODES: () => (/* binding */ PHONE_NUMBER_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/phone-number/error-codes.ts\nconst PHONE_NUMBER_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tINVALID_PHONE_NUMBER: \"Invalid phone number\",\n\tPHONE_NUMBER_EXIST: \"Phone number already exists\",\n\tPHONE_NUMBER_NOT_EXIST: \"phone number isn't registered\",\n\tINVALID_PHONE_NUMBER_OR_PASSWORD: \"Invalid phone number or password\",\n\tUNEXPECTED_ERROR: \"Unexpected error\",\n\tOTP_NOT_FOUND: \"OTP not found\",\n\tOTP_EXPIRED: \"OTP expired\",\n\tINVALID_OTP: \"Invalid OTP\",\n\tPHONE_NUMBER_NOT_VERIFIED: \"Phone number not verified\",\n\tPHONE_NUMBER_CANNOT_BE_UPDATED: \"Phone number cannot be updated\",\n\tSEND_OTP_NOT_IMPLEMENTED: \"sendOTP not implemented\",\n\tTOO_MANY_ATTEMPTS: \"Too many attempts\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9lcnJvci1jb2Rlcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0EsaUNBQWlDLHlFQUFnQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ29DO0FBQ3BDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xccGhvbmUtbnVtYmVyXFxlcnJvci1jb2Rlcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvcGhvbmUtbnVtYmVyL2Vycm9yLWNvZGVzLnRzXG5jb25zdCBQSE9ORV9OVU1CRVJfRVJST1JfQ09ERVMgPSBkZWZpbmVFcnJvckNvZGVzKHtcblx0SU5WQUxJRF9QSE9ORV9OVU1CRVI6IFwiSW52YWxpZCBwaG9uZSBudW1iZXJcIixcblx0UEhPTkVfTlVNQkVSX0VYSVNUOiBcIlBob25lIG51bWJlciBhbHJlYWR5IGV4aXN0c1wiLFxuXHRQSE9ORV9OVU1CRVJfTk9UX0VYSVNUOiBcInBob25lIG51bWJlciBpc24ndCByZWdpc3RlcmVkXCIsXG5cdElOVkFMSURfUEhPTkVfTlVNQkVSX09SX1BBU1NXT1JEOiBcIkludmFsaWQgcGhvbmUgbnVtYmVyIG9yIHBhc3N3b3JkXCIsXG5cdFVORVhQRUNURURfRVJST1I6IFwiVW5leHBlY3RlZCBlcnJvclwiLFxuXHRPVFBfTk9UX0ZPVU5EOiBcIk9UUCBub3QgZm91bmRcIixcblx0T1RQX0VYUElSRUQ6IFwiT1RQIGV4cGlyZWRcIixcblx0SU5WQUxJRF9PVFA6IFwiSW52YWxpZCBPVFBcIixcblx0UEhPTkVfTlVNQkVSX05PVF9WRVJJRklFRDogXCJQaG9uZSBudW1iZXIgbm90IHZlcmlmaWVkXCIsXG5cdFBIT05FX05VTUJFUl9DQU5OT1RfQkVfVVBEQVRFRDogXCJQaG9uZSBudW1iZXIgY2Fubm90IGJlIHVwZGF0ZWRcIixcblx0U0VORF9PVFBfTk9UX0lNUExFTUVOVEVEOiBcInNlbmRPVFAgbm90IGltcGxlbWVudGVkXCIsXG5cdFRPT19NQU5ZX0FUVEVNUFRTOiBcIlRvbyBtYW55IGF0dGVtcHRzXCJcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3ItY29kZXMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/phone-number/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/phone-number/index.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   phoneNumber: () => (/* binding */ phoneNumber)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/error-codes.mjs\");\n/* harmony import */ var _routes_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/routes.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/schema.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n//#region src/plugins/phone-number/index.ts\nconst phoneNumber = (options) => {\n\tconst opts = {\n\t\texpiresIn: options?.expiresIn || 300,\n\t\totpLength: options?.otpLength || 6,\n\t\t...options,\n\t\tphoneNumber: \"phoneNumber\",\n\t\tphoneNumberVerified: \"phoneNumberVerified\",\n\t\tcode: \"code\",\n\t\tcreatedAt: \"createdAt\"\n\t};\n\treturn {\n\t\tid: \"phone-number\",\n\t\thooks: { before: [{\n\t\t\tmatcher: (ctx) => ctx.path === \"/update-user\" && \"phoneNumber\" in ctx.body,\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_5__.createAuthMiddleware)(async (_ctx) => {\n\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.PHONE_NUMBER_ERROR_CODES.PHONE_NUMBER_CANNOT_BE_UPDATED });\n\t\t\t})\n\t\t}] },\n\t\tendpoints: {\n\t\t\tsignInPhoneNumber: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_2__.signInPhoneNumber)(opts),\n\t\t\tsendPhoneNumberOTP: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_2__.sendPhoneNumberOTP)(opts),\n\t\t\tverifyPhoneNumber: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPhoneNumber)(opts),\n\t\t\trequestPasswordResetPhoneNumber: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_2__.requestPasswordResetPhoneNumber)(opts),\n\t\t\tresetPasswordPhoneNumber: (0,_routes_mjs__WEBPACK_IMPORTED_MODULE_2__.resetPasswordPhoneNumber)(opts)\n\t\t},\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_3__.schema, options?.schema),\n\t\trateLimit: [{\n\t\t\tpathMatcher(path) {\n\t\t\t\treturn path.startsWith(\"/phone-number\");\n\t\t\t},\n\t\t\twindow: 60 * 1e3,\n\t\t\tmax: 10\n\t\t}],\n\t\toptions,\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_1__.PHONE_NUMBER_ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFrRDtBQUNXO0FBQ3NGO0FBQzdHO0FBQ0M7QUFDc0I7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsWUFBWSwyRUFBb0I7QUFDaEMsY0FBYyxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsaUNBQWlDO0FBQzFHLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTjtBQUNBLHNCQUFzQiw4REFBaUI7QUFDdkMsdUJBQXVCLCtEQUFrQjtBQUN6QyxzQkFBc0IsOERBQWlCO0FBQ3ZDLG9DQUFvQyw0RUFBK0I7QUFDbkUsNkJBQTZCLHFFQUF3QjtBQUNyRCxHQUFHO0FBQ0gsVUFBVSwyREFBVyxDQUFDLCtDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0JBQWdCLHNFQUF3QjtBQUN4QztBQUNBOztBQUVBO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xccGhvbmUtbnVtYmVyXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2VTY2hlbWEgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyByZXF1ZXN0UGFzc3dvcmRSZXNldFBob25lTnVtYmVyLCByZXNldFBhc3N3b3JkUGhvbmVOdW1iZXIsIHNlbmRQaG9uZU51bWJlck9UUCwgc2lnbkluUGhvbmVOdW1iZXIsIHZlcmlmeVBob25lTnVtYmVyIH0gZnJvbSBcIi4vcm91dGVzLm1qc1wiO1xuaW1wb3J0IHsgc2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvcGhvbmUtbnVtYmVyL2luZGV4LnRzXG5jb25zdCBwaG9uZU51bWJlciA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7XG5cdFx0ZXhwaXJlc0luOiBvcHRpb25zPy5leHBpcmVzSW4gfHwgMzAwLFxuXHRcdG90cExlbmd0aDogb3B0aW9ucz8ub3RwTGVuZ3RoIHx8IDYsXG5cdFx0Li4ub3B0aW9ucyxcblx0XHRwaG9uZU51bWJlcjogXCJwaG9uZU51bWJlclwiLFxuXHRcdHBob25lTnVtYmVyVmVyaWZpZWQ6IFwicGhvbmVOdW1iZXJWZXJpZmllZFwiLFxuXHRcdGNvZGU6IFwiY29kZVwiLFxuXHRcdGNyZWF0ZWRBdDogXCJjcmVhdGVkQXRcIlxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInBob25lLW51bWJlclwiLFxuXHRcdGhvb2tzOiB7IGJlZm9yZTogW3tcblx0XHRcdG1hdGNoZXI6IChjdHgpID0+IGN0eC5wYXRoID09PSBcIi91cGRhdGUtdXNlclwiICYmIFwicGhvbmVOdW1iZXJcIiBpbiBjdHguYm9keSxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChfY3R4KSA9PiB7XG5cdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLlBIT05FX05VTUJFUl9DQU5OT1RfQkVfVVBEQVRFRCB9KTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNpZ25JblBob25lTnVtYmVyOiBzaWduSW5QaG9uZU51bWJlcihvcHRzKSxcblx0XHRcdHNlbmRQaG9uZU51bWJlck9UUDogc2VuZFBob25lTnVtYmVyT1RQKG9wdHMpLFxuXHRcdFx0dmVyaWZ5UGhvbmVOdW1iZXI6IHZlcmlmeVBob25lTnVtYmVyKG9wdHMpLFxuXHRcdFx0cmVxdWVzdFBhc3N3b3JkUmVzZXRQaG9uZU51bWJlcjogcmVxdWVzdFBhc3N3b3JkUmVzZXRQaG9uZU51bWJlcihvcHRzKSxcblx0XHRcdHJlc2V0UGFzc3dvcmRQaG9uZU51bWJlcjogcmVzZXRQYXNzd29yZFBob25lTnVtYmVyKG9wdHMpXG5cdFx0fSxcblx0XHRzY2hlbWE6IG1lcmdlU2NoZW1hKHNjaGVtYSwgb3B0aW9ucz8uc2NoZW1hKSxcblx0XHRyYXRlTGltaXQ6IFt7XG5cdFx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdHJldHVybiBwYXRoLnN0YXJ0c1dpdGgoXCIvcGhvbmUtbnVtYmVyXCIpO1xuXHRcdFx0fSxcblx0XHRcdHdpbmRvdzogNjAgKiAxZTMsXG5cdFx0XHRtYXg6IDEwXG5cdFx0fV0sXG5cdFx0b3B0aW9ucyxcblx0XHQkRVJST1JfQ09ERVM6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFU1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwaG9uZU51bWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/phone-number/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/phone-number/routes.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/routes.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requestPasswordResetPhoneNumber: () => (/* binding */ requestPasswordResetPhoneNumber),\n/* harmony export */   resetPasswordPhoneNumber: () => (/* binding */ resetPasswordPhoneNumber),\n/* harmony export */   sendPhoneNumberOTP: () => (/* binding */ sendPhoneNumberOTP),\n/* harmony export */   signInPhoneNumber: () => (/* binding */ signInPhoneNumber),\n/* harmony export */   verifyPhoneNumber: () => (/* binding */ verifyPhoneNumber)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/phone-number/error-codes.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/phone-number/routes.ts\nconst signInPhoneNumberBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tphoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"Phone number to sign in. Eg: \\\"+1234567890\\\"\" }),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"Password to use for sign in.\" }),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"Remember the session. Eg: true\" }).optional()\n});\n/**\n* ### Endpoint\n*\n* POST `/sign-in/phone-number`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.signInPhoneNumber`\n*\n* **client:**\n* `authClient.signIn.phoneNumber`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/phone-number#api-method-sign-in-phone-number)\n*/\nconst signInPhoneNumber = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-in/phone-number\", {\n\tmethod: \"POST\",\n\tbody: signInPhoneNumberBodySchema,\n\tmetadata: { openapi: {\n\t\tsummary: \"Sign in with phone number\",\n\t\tdescription: \"Use this endpoint to sign in with phone number\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" },\n\t\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" }\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid phone number or password\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { password, phoneNumber } = ctx.body;\n\tif (opts.phoneNumberValidator) {\n\t\tif (!await opts.phoneNumberValidator(ctx.body.phoneNumber)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_PHONE_NUMBER });\n\t}\n\tconst user = await ctx.context.adapter.findOne({\n\t\tmodel: \"user\",\n\t\twhere: [{\n\t\t\tfield: \"phoneNumber\",\n\t\t\tvalue: phoneNumber\n\t\t}]\n\t});\n\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD });\n\tif (opts.requireVerification) {\n\t\tif (!user.phoneNumberVerified) {\n\t\t\tconst otp = generateOTP(opts.otpLength);\n\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\tvalue: otp,\n\t\t\t\tidentifier: phoneNumber,\n\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t\t\t});\n\t\t\tif (opts.sendOTP) await ctx.context.runInBackgroundOrAwait(opts.sendOTP({\n\t\t\t\tphoneNumber,\n\t\t\t\tcode: otp\n\t\t\t}, ctx));\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.PHONE_NUMBER_NOT_VERIFIED });\n\t\t}\n\t}\n\tconst credentialAccount = (await ctx.context.internalAdapter.findAccountByUserId(user.id)).find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tctx.context.logger.error(\"Credential account not found\", { phoneNumber });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tctx.context.logger.error(\"Password not found\", { phoneNumber });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.UNEXPECTED_ERROR });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_PHONE_NUMBER_OR_PASSWORD });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser\n\t}, ctx.body.rememberMe === false);\n\treturn ctx.json({\n\t\ttoken: session.token,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user)\n\t});\n});\nconst sendPhoneNumberOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ phoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"Phone number to send OTP. Eg: \\\"+1234567890\\\"\" }) });\n/**\n* ### Endpoint\n*\n* POST `/phone-number/send-otp`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.sendPhoneNumberOTP`\n*\n* **client:**\n* `authClient.phoneNumber.sendOtp`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/phone-number#api-method-phone-number-send-otp)\n*/\nconst sendPhoneNumberOTP = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/phone-number/send-otp\", {\n\tmethod: \"POST\",\n\tbody: sendPhoneNumberOTPBodySchema,\n\tmetadata: { openapi: {\n\t\tsummary: \"Send OTP to phone number\",\n\t\tdescription: \"Use this endpoint to send OTP to phone number\",\n\t\tresponses: { 200: {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!opts?.sendOTP) {\n\t\tctx.context.logger.warn(\"sendOTP not implemented\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_IMPLEMENTED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.SEND_OTP_NOT_IMPLEMENTED });\n\t}\n\tif (opts.phoneNumberValidator) {\n\t\tif (!await opts.phoneNumberValidator(ctx.body.phoneNumber)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_PHONE_NUMBER });\n\t}\n\tconst code = generateOTP(opts.otpLength);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: `${code}:0`,\n\t\tidentifier: ctx.body.phoneNumber,\n\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t});\n\tawait ctx.context.runInBackgroundOrAwait(opts.sendOTP({\n\t\tphoneNumber: ctx.body.phoneNumber,\n\t\tcode\n\t}, ctx));\n\treturn ctx.json({ message: \"code sent\" });\n});\nconst verifyPhoneNumberBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tphoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"Phone number to verify. Eg: \\\"+1234567890\\\"\" }),\n\tcode: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"OTP code. Eg: \\\"123456\\\"\" }),\n\tdisableSession: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"Disable session creation after verification. Eg: false\" }).optional(),\n\tupdatePhoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"Check if there is a session and update the phone number. Eg: true\" }).optional()\n});\n/**\n* ### Endpoint\n*\n* POST `/phone-number/verify`\n*\n* ### API Methods\n*\n* **server:**\n* `auth.api.verifyPhoneNumber`\n*\n* **client:**\n* `authClient.phoneNumber.verify`\n*\n* @see [Read our docs to learn more.](https://better-auth.com/docs/plugins/phone-number#api-method-phone-number-verify)\n*/\nconst verifyPhoneNumber = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/phone-number/verify\", {\n\tmethod: \"POST\",\n\tbody: verifyPhoneNumberBodySchema,\n\tmetadata: { openapi: {\n\t\tsummary: \"Verify phone number\",\n\t\tdescription: \"Use this endpoint to verify phone number\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Phone number verified successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the verification was successful\",\n\t\t\t\t\t\t\tenum: [true]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tdescription: \"Session token if session is created, null if disableSession is true or no session is created\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the user\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"User's email address\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"Whether the email is verified\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"User's name\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\tdescription: \"User's profile image URL\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tphoneNumber: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"User's phone number\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tphoneNumberVerified: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tdescription: \"Whether the phone number is verified\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was created\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was last updated\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\"phoneNumber\",\n\t\t\t\t\t\t\t\t\"phoneNumberVerified\",\n\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tdescription: \"User object with phone number details, null if no user is created or found\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid OTP\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (opts?.verifyOTP) {\n\t\tif (!await opts.verifyOTP({\n\t\t\tphoneNumber: ctx.body.phoneNumber,\n\t\t\tcode: ctx.body.code\n\t\t}, ctx)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_OTP });\n\t\tconst otp = await ctx.context.internalAdapter.findVerificationValue(ctx.body.phoneNumber);\n\t\tif (otp) await ctx.context.internalAdapter.deleteVerificationValue(otp.id);\n\t} else {\n\t\tconst otp = await ctx.context.internalAdapter.findVerificationValue(ctx.body.phoneNumber);\n\t\tif (!otp || otp.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\tif (otp && otp.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.OTP_EXPIRED });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.OTP_NOT_FOUND });\n\t\t}\n\t\tconst [otpValue, attempts] = otp.value.split(\":\");\n\t\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\t\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(otp.id);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t\t}\n\t\tif (otpValue !== ctx.body.code) {\n\t\t\tawait ctx.context.internalAdapter.updateVerificationValue(otp.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_OTP });\n\t\t}\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(otp.id);\n\t}\n\tif (ctx.body.updatePhoneNumber) {\n\t\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_NOT_FOUND });\n\t\tif ((await ctx.context.adapter.findMany({\n\t\t\tmodel: \"user\",\n\t\t\twhere: [{\n\t\t\t\tfield: \"phoneNumber\",\n\t\t\t\tvalue: ctx.body.phoneNumber\n\t\t\t}]\n\t\t})).length) throw ctx.error(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.PHONE_NUMBER_EXIST });\n\t\tconst user$1 = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t[opts.phoneNumber]: ctx.body.phoneNumber,\n\t\t\t[opts.phoneNumberVerified]: true\n\t\t});\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\ttoken: session.session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user$1)\n\t\t});\n\t}\n\tlet user = await ctx.context.adapter.findOne({\n\t\tmodel: \"user\",\n\t\twhere: [{\n\t\t\tvalue: ctx.body.phoneNumber,\n\t\t\tfield: opts.phoneNumber\n\t\t}]\n\t});\n\tif (!user) {\n\t\tif (opts?.signUpOnVerification) {\n\t\t\tuser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: opts.signUpOnVerification.getTempEmail(ctx.body.phoneNumber),\n\t\t\t\tname: opts.signUpOnVerification.getTempName ? opts.signUpOnVerification.getTempName(ctx.body.phoneNumber) : ctx.body.phoneNumber,\n\t\t\t\t[opts.phoneNumber]: ctx.body.phoneNumber,\n\t\t\t\t[opts.phoneNumberVerified]: true\n\t\t\t});\n\t\t\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t}\n\t} else user = await ctx.context.internalAdapter.updateUser(user.id, { [opts.phoneNumberVerified]: true });\n\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_UPDATE_USER });\n\tawait opts?.callbackOnVerification?.({\n\t\tphoneNumber: ctx.body.phoneNumber,\n\t\tuser\n\t}, ctx);\n\tif (!ctx.body.disableSession) {\n\t\tconst session = await ctx.context.internalAdapter.createSession(user.id);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser\n\t\t});\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user)\n\t\t});\n\t}\n\treturn ctx.json({\n\t\tstatus: true,\n\t\ttoken: null,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, user)\n\t});\n});\nconst requestPasswordResetPhoneNumberBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ phoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.string() });\nconst requestPasswordResetPhoneNumber = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/phone-number/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: requestPasswordResetPhoneNumberBodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Request OTP for password reset via phone number\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"OTP sent successfully for password reset\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the OTP was sent successfully\",\n\t\t\t\t\tenum: [true]\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst user = await ctx.context.adapter.findOne({\n\t\tmodel: \"user\",\n\t\twhere: [{\n\t\t\tvalue: ctx.body.phoneNumber,\n\t\t\tfield: opts.phoneNumber\n\t\t}]\n\t});\n\tconst code = generateOTP(opts.otpLength);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: `${code}:0`,\n\t\tidentifier: `${ctx.body.phoneNumber}-request-password-reset`,\n\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(opts.expiresIn, \"sec\")\n\t});\n\tif (!user) return ctx.json({ status: true });\n\tif (opts.sendPasswordResetOTP) await ctx.context.runInBackgroundOrAwait(opts.sendPasswordResetOTP({\n\t\tphoneNumber: ctx.body.phoneNumber,\n\t\tcode\n\t}, ctx));\n\treturn ctx.json({ status: true });\n});\nconst resetPasswordPhoneNumberBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\totp: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The one time password to reset the password. Eg: \\\"123456\\\"\" }),\n\tphoneNumber: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The phone number to the account which intends to reset the password for. Eg: \\\"+1234567890\\\"\" }),\n\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: `The new password. Eg: \"new-and-secure-password\"` })\n});\nconst resetPasswordPhoneNumber = (opts) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/phone-number/reset-password\", {\n\tmethod: \"POST\",\n\tbody: resetPasswordPhoneNumberBodySchema,\n\tmetadata: { openapi: {\n\t\tdescription: \"Reset password using phone number OTP\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password reset successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the password was reset successfully\",\n\t\t\t\t\tenum: [true]\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`${ctx.body.phoneNumber}-request-password-reset`);\n\tif (!verification) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.OTP_NOT_FOUND });\n\tif (verification.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.OTP_EXPIRED });\n\tconst [otpValue, attempts] = verification.value.split(\":\");\n\tconst allowedAttempts = opts?.allowedAttempts || 3;\n\tif (attempts && parseInt(attempts) >= allowedAttempts) {\n\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.TOO_MANY_ATTEMPTS });\n\t}\n\tif (ctx.body.otp !== otpValue) {\n\t\tawait ctx.context.internalAdapter.updateVerificationValue(verification.id, { value: `${otpValue}:${parseInt(attempts || \"0\") + 1}` });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.INVALID_OTP });\n\t}\n\tconst user = await ctx.context.adapter.findOne({\n\t\tmodel: \"user\",\n\t\twhere: [{\n\t\t\tfield: \"phoneNumber\",\n\t\t\tvalue: ctx.body.phoneNumber\n\t\t}]\n\t});\n\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_6__.PHONE_NUMBER_ERROR_CODES.UNEXPECTED_ERROR });\n\tconst minLength = ctx.context.password.config.minPasswordLength;\n\tconst maxLength = ctx.context.password.config.maxPasswordLength;\n\tif (ctx.body.newPassword.length < minLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (ctx.body.newPassword.length > maxLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst hashedPassword = await ctx.context.password.hash(ctx.body.newPassword);\n\tawait ctx.context.internalAdapter.updatePassword(user.id, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(user.id);\n\treturn ctx.json({ status: true });\n});\nfunction generateOTP(size) {\n\treturn (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(size, \"0-9\");\n}\n\n//#endregion\n\n//# sourceMappingURL=routes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9yb3V0ZXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDTztBQUNTO0FBQ0o7QUFDTTtBQUNwQztBQUNnQztBQUNGO0FBQ3BCO0FBQ2Q7QUFDa0M7O0FBRTNEO0FBQ0Esb0NBQW9DLHdDQUFRO0FBQzVDLGNBQWMsd0NBQVEsVUFBVSw2REFBNkQ7QUFDN0YsV0FBVyx3Q0FBUSxVQUFVLDZDQUE2QztBQUMxRSxhQUFhLHlDQUFTLFVBQVUsK0NBQStDO0FBQy9FLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MseUVBQWtCO0FBQ3REO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQSxjQUFjLG1DQUFtQztBQUNqRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLElBQUk7QUFDSixVQUFVO0FBQ1Y7QUFDQTtBQUNBLENBQUM7QUFDRCxTQUFTLHdCQUF3QjtBQUNqQztBQUNBLHdFQUF3RSxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsdUJBQXVCO0FBQzFKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Ysc0JBQXNCLGlEQUFRLG1CQUFtQixTQUFTLHNFQUF3QixtQ0FBbUM7QUFDckg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBTztBQUN0QixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMsc0VBQXdCLDRCQUE0QjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxhQUFhO0FBQzFFLFlBQVksaURBQVEsbUJBQW1CLFNBQVMsc0VBQXdCLG1DQUFtQztBQUMzRztBQUNBO0FBQ0E7QUFDQSxtREFBbUQsYUFBYTtBQUNoRSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHNFQUF3QixtQkFBbUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHNFQUF3QixtQ0FBbUM7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDM0Y7QUFDQSxPQUFPLG9FQUFnQjtBQUN2QjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDO0FBQ0QscUNBQXFDLHdDQUFRLEdBQUcsYUFBYSx3Q0FBUSxVQUFVLDhEQUE4RCxHQUFHO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5RUFBa0I7QUFDdkQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsc0JBQXNCLFNBQVMsc0VBQXdCLDJCQUEyQjtBQUN0RztBQUNBO0FBQ0Esd0VBQXdFLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3Qix1QkFBdUI7QUFDMUo7QUFDQTtBQUNBO0FBQ0EsWUFBWSxLQUFLO0FBQ2pCO0FBQ0EsYUFBYSx3REFBTztBQUNwQixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLG1CQUFtQixzQkFBc0I7QUFDekMsQ0FBQztBQUNELG9DQUFvQyx3Q0FBUTtBQUM1QyxjQUFjLHdDQUFRLFVBQVUsNERBQTREO0FBQzVGLE9BQU8sd0NBQVEsVUFBVSx5Q0FBeUM7QUFDbEUsaUJBQWlCLHlDQUFTLFVBQVUsdUVBQXVFO0FBQzNHLG9CQUFvQix5Q0FBUyxVQUFVLGtGQUFrRjtBQUN6SCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHlFQUFrQjtBQUN0RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSixVQUFVO0FBQ1Y7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsa0JBQWtCLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixjQUFjO0FBQzlGO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9FQUFvRSxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsY0FBYztBQUM3SSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixnQkFBZ0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsaURBQVEsZ0JBQWdCLFNBQVMsc0VBQXdCLG9CQUFvQjtBQUMxRjtBQUNBO0FBQ0EsdUVBQXVFLFVBQVUsU0FBUyxHQUFHLDhCQUE4QixHQUFHO0FBQzlILGFBQWEsaURBQVEsa0JBQWtCLFNBQVMsc0VBQXdCLGNBQWM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEVBQWlCO0FBQ3pDLDBCQUEwQixpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsaUJBQWlCO0FBQy9GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRyw0Q0FBNEMsU0FBUyxzRUFBd0IscUJBQXFCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLHdCQUF3QixpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQzdHO0FBQ0EsR0FBRyxvRUFBb0Usa0NBQWtDO0FBQ3pHLHNCQUFzQixpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDbEgsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFlO0FBQ3hCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0RBQWU7QUFDdkIsRUFBRTtBQUNGLENBQUM7QUFDRCxrREFBa0Qsd0NBQVEsR0FBRyxhQUFhLHdDQUFRLElBQUk7QUFDdEYsa0RBQWtELHlFQUFrQjtBQUNwRTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakIsaUJBQWlCLHFCQUFxQjtBQUN0QyxhQUFhLHdEQUFPO0FBQ3BCLEVBQUU7QUFDRiw4QkFBOEIsY0FBYztBQUM1QztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELDJDQUEyQyx3Q0FBUTtBQUNuRCxNQUFNLHdDQUFRLFVBQVUsNEVBQTRFO0FBQ3BHLGNBQWMsd0NBQVEsVUFBVSw2R0FBNkc7QUFDN0ksY0FBYyx3Q0FBUSxVQUFVLGdFQUFnRTtBQUNoRyxDQUFDO0FBQ0QsMkNBQTJDLHlFQUFrQjtBQUM3RDtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlGQUFpRixxQkFBcUI7QUFDdEcsOEJBQThCLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixnQkFBZ0I7QUFDekcsb0VBQW9FLGlEQUFRLGtCQUFrQixTQUFTLHNFQUF3QixjQUFjO0FBQzdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxzRUFBd0Isb0JBQW9CO0FBQ3pGO0FBQ0E7QUFDQSwrRUFBK0UsVUFBVSxTQUFTLEdBQUcsOEJBQThCLEdBQUc7QUFDdEksWUFBWSxpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsY0FBYztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGLHNCQUFzQixpREFBUSxrQkFBa0IsU0FBUyxzRUFBd0IsbUJBQW1CO0FBQ3BHO0FBQ0E7QUFDQSx3REFBd0QsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNoSSx3REFBd0QsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRDtBQUNBLFFBQVEsd0VBQW9CO0FBQzVCOztBQUVBO0FBQytIO0FBQy9IIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xccGhvbmUtbnVtYmVyXFxyb3V0ZXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERhdGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkZyb21DdHggfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZXMubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9waG9uZS1udW1iZXIvcm91dGVzLnRzXG5jb25zdCBzaWduSW5QaG9uZU51bWJlckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHBob25lTnVtYmVyOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJQaG9uZSBudW1iZXIgdG8gc2lnbiBpbi4gRWc6IFxcXCIrMTIzNDU2Nzg5MFxcXCJcIiB9KSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIHRvIHVzZSBmb3Igc2lnbiBpbi5cIiB9KSxcblx0cmVtZW1iZXJNZTogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlJlbWVtYmVyIHRoZSBzZXNzaW9uLiBFZzogdHJ1ZVwiIH0pLm9wdGlvbmFsKClcbn0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvc2lnbi1pbi9waG9uZS1udW1iZXJgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkuc2lnbkluUGhvbmVOdW1iZXJgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LnNpZ25Jbi5waG9uZU51bWJlcmBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL3Bob25lLW51bWJlciNhcGktbWV0aG9kLXNpZ24taW4tcGhvbmUtbnVtYmVyKVxuKi9cbmNvbnN0IHNpZ25JblBob25lTnVtYmVyID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL3Bob25lLW51bWJlclwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHNpZ25JblBob25lTnVtYmVyQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdHN1bW1hcnk6IFwiU2lnbiBpbiB3aXRoIHBob25lIG51bWJlclwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlVzZSB0aGlzIGVuZHBvaW50IHRvIHNpZ24gaW4gd2l0aCBwaG9uZSBudW1iZXJcIixcblx0XHRyZXNwb25zZXM6IHtcblx0XHRcdDIwMDoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH0sXG5cdFx0XHRcdFx0XHRzZXNzaW9uOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcGhvbmUgbnVtYmVyIG9yIHBhc3N3b3JkXCIgfVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcGFzc3dvcmQsIHBob25lTnVtYmVyIH0gPSBjdHguYm9keTtcblx0aWYgKG9wdHMucGhvbmVOdW1iZXJWYWxpZGF0b3IpIHtcblx0XHRpZiAoIWF3YWl0IG9wdHMucGhvbmVOdW1iZXJWYWxpZGF0b3IoY3R4LmJvZHkucGhvbmVOdW1iZXIpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5JTlZBTElEX1BIT05FX05VTUJFUiB9KTtcblx0fVxuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0d2hlcmU6IFt7XG5cdFx0XHRmaWVsZDogXCJwaG9uZU51bWJlclwiLFxuXHRcdFx0dmFsdWU6IHBob25lTnVtYmVyXG5cdFx0fV1cblx0fSk7XG5cdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLklOVkFMSURfUEhPTkVfTlVNQkVSX09SX1BBU1NXT1JEIH0pO1xuXHRpZiAob3B0cy5yZXF1aXJlVmVyaWZpY2F0aW9uKSB7XG5cdFx0aWYgKCF1c2VyLnBob25lTnVtYmVyVmVyaWZpZWQpIHtcblx0XHRcdGNvbnN0IG90cCA9IGdlbmVyYXRlT1RQKG9wdHMub3RwTGVuZ3RoKTtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHRcdHZhbHVlOiBvdHAsXG5cdFx0XHRcdGlkZW50aWZpZXI6IHBob25lTnVtYmVyLFxuXHRcdFx0XHRleHBpcmVzQXQ6IGdldERhdGUob3B0cy5leHBpcmVzSW4sIFwic2VjXCIpXG5cdFx0XHR9KTtcblx0XHRcdGlmIChvcHRzLnNlbmRPVFApIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQob3B0cy5zZW5kT1RQKHtcblx0XHRcdFx0cGhvbmVOdW1iZXIsXG5cdFx0XHRcdGNvZGU6IG90cFxuXHRcdFx0fSwgY3R4KSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBQSE9ORV9OVU1CRVJfRVJST1JfQ09ERVMuUEhPTkVfTlVNQkVSX05PVF9WRVJJRklFRCB9KTtcblx0XHR9XG5cdH1cblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50QnlVc2VySWQodXNlci5pZCkpLmZpbmQoKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50KSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ3JlZGVudGlhbCBhY2NvdW50IG5vdCBmb3VuZFwiLCB7IHBob25lTnVtYmVyIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5JTlZBTElEX1BIT05FX05VTUJFUl9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3VycmVudFBhc3N3b3JkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgbm90IGZvdW5kXCIsIHsgcGhvbmVOdW1iZXIgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLlVORVhQRUNURURfRVJST1IgfSk7XG5cdH1cblx0aWYgKCFhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcblx0XHRwYXNzd29yZFxuXHR9KSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkludmFsaWQgcGFzc3dvcmRcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLklOVkFMSURfUEhPTkVfTlVNQkVSX09SX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLmlkLCBjdHguYm9keS5yZW1lbWJlck1lID09PSBmYWxzZSk7XG5cdGlmICghc2Vzc2lvbikge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvblwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0fVxuXHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlclxuXHR9LCBjdHguYm9keS5yZW1lbWJlck1lID09PSBmYWxzZSk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCBzZW5kUGhvbmVOdW1iZXJPVFBCb2R5U2NoZW1hID0gei5vYmplY3QoeyBwaG9uZU51bWJlcjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiUGhvbmUgbnVtYmVyIHRvIHNlbmQgT1RQLiBFZzogXFxcIisxMjM0NTY3ODkwXFxcIlwiIH0pIH0pO1xuLyoqXG4qICMjIyBFbmRwb2ludFxuKlxuKiBQT1NUIGAvcGhvbmUtbnVtYmVyL3NlbmQtb3RwYFxuKlxuKiAjIyMgQVBJIE1ldGhvZHNcbipcbiogKipzZXJ2ZXI6KipcbiogYGF1dGguYXBpLnNlbmRQaG9uZU51bWJlck9UUGBcbipcbiogKipjbGllbnQ6KipcbiogYGF1dGhDbGllbnQucGhvbmVOdW1iZXIuc2VuZE90cGBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL3Bob25lLW51bWJlciNhcGktbWV0aG9kLXBob25lLW51bWJlci1zZW5kLW90cClcbiovXG5jb25zdCBzZW5kUGhvbmVOdW1iZXJPVFAgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Bob25lLW51bWJlci9zZW5kLW90cFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHNlbmRQaG9uZU51bWJlck9UUEJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRzdW1tYXJ5OiBcIlNlbmQgT1RQIHRvIHBob25lIG51bWJlclwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlVzZSB0aGlzIGVuZHBvaW50IHRvIHNlbmQgT1RQIHRvIHBob25lIG51bWJlclwiLFxuXHRcdHJlc3BvbnNlczogeyAyMDA6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghb3B0cz8uc2VuZE9UUCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci53YXJuKFwic2VuZE9UUCBub3QgaW1wbGVtZW50ZWRcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0lNUExFTUVOVEVEXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLlNFTkRfT1RQX05PVF9JTVBMRU1FTlRFRCB9KTtcblx0fVxuXHRpZiAob3B0cy5waG9uZU51bWJlclZhbGlkYXRvcikge1xuXHRcdGlmICghYXdhaXQgb3B0cy5waG9uZU51bWJlclZhbGlkYXRvcihjdHguYm9keS5waG9uZU51bWJlcikpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLklOVkFMSURfUEhPTkVfTlVNQkVSIH0pO1xuXHR9XG5cdGNvbnN0IGNvZGUgPSBnZW5lcmF0ZU9UUChvcHRzLm90cExlbmd0aCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0dmFsdWU6IGAke2NvZGV9OjBgLFxuXHRcdGlkZW50aWZpZXI6IGN0eC5ib2R5LnBob25lTnVtYmVyLFxuXHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShvcHRzLmV4cGlyZXNJbiwgXCJzZWNcIilcblx0fSk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQob3B0cy5zZW5kT1RQKHtcblx0XHRwaG9uZU51bWJlcjogY3R4LmJvZHkucGhvbmVOdW1iZXIsXG5cdFx0Y29kZVxuXHR9LCBjdHgpKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgbWVzc2FnZTogXCJjb2RlIHNlbnRcIiB9KTtcbn0pO1xuY29uc3QgdmVyaWZ5UGhvbmVOdW1iZXJCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRwaG9uZU51bWJlcjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiUGhvbmUgbnVtYmVyIHRvIHZlcmlmeS4gRWc6IFxcXCIrMTIzNDU2Nzg5MFxcXCJcIiB9KSxcblx0Y29kZTogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiT1RQIGNvZGUuIEVnOiBcXFwiMTIzNDU2XFxcIlwiIH0pLFxuXHRkaXNhYmxlU2Vzc2lvbjogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgc2Vzc2lvbiBjcmVhdGlvbiBhZnRlciB2ZXJpZmljYXRpb24uIEVnOiBmYWxzZVwiIH0pLm9wdGlvbmFsKCksXG5cdHVwZGF0ZVBob25lTnVtYmVyOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ2hlY2sgaWYgdGhlcmUgaXMgYSBzZXNzaW9uIGFuZCB1cGRhdGUgdGhlIHBob25lIG51bWJlci4gRWc6IHRydWVcIiB9KS5vcHRpb25hbCgpXG59KTtcbi8qKlxuKiAjIyMgRW5kcG9pbnRcbipcbiogUE9TVCBgL3Bob25lLW51bWJlci92ZXJpZnlgXG4qXG4qICMjIyBBUEkgTWV0aG9kc1xuKlxuKiAqKnNlcnZlcjoqKlxuKiBgYXV0aC5hcGkudmVyaWZ5UGhvbmVOdW1iZXJgXG4qXG4qICoqY2xpZW50OioqXG4qIGBhdXRoQ2xpZW50LnBob25lTnVtYmVyLnZlcmlmeWBcbipcbiogQHNlZSBbUmVhZCBvdXIgZG9jcyB0byBsZWFybiBtb3JlLl0oaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9wbHVnaW5zL3Bob25lLW51bWJlciNhcGktbWV0aG9kLXBob25lLW51bWJlci12ZXJpZnkpXG4qL1xuY29uc3QgdmVyaWZ5UGhvbmVOdW1iZXIgPSAob3B0cykgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Bob25lLW51bWJlci92ZXJpZnlcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB2ZXJpZnlQaG9uZU51bWJlckJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRzdW1tYXJ5OiBcIlZlcmlmeSBwaG9uZSBudW1iZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJVc2UgdGhpcyBlbmRwb2ludCB0byB2ZXJpZnkgcGhvbmUgbnVtYmVyXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlBob25lIG51bWJlciB2ZXJpZmllZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHN0YXR1czoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSB2ZXJpZmljYXRpb24gd2FzIHN1Y2Nlc3NmdWxcIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW3RydWVdXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW4gaWYgc2Vzc2lvbiBpcyBjcmVhdGVkLCBudWxsIGlmIGRpc2FibGVTZXNzaW9uIGlzIHRydWUgb3Igbm8gc2Vzc2lvbiBpcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyJ3MgZW1haWwgYWRkcmVzc1wiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgZW1haWwgaXMgdmVyaWZpZWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIG5hbWVcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIncyBwcm9maWxlIGltYWdlIFVSTFwiXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRwaG9uZU51bWJlcjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIncyBwaG9uZSBudW1iZXJcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cGhvbmVOdW1iZXJWZXJpZmllZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBwaG9uZSBudW1iZXIgaXMgdmVyaWZpZWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHVzZXIgd2FzIGNyZWF0ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFx0XHRcInBob25lTnVtYmVyXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJwaG9uZU51bWJlclZlcmlmaWVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJjcmVhdGVkQXRcIixcblx0XHRcdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgb2JqZWN0IHdpdGggcGhvbmUgbnVtYmVyIGRldGFpbHMsIG51bGwgaWYgbm8gdXNlciBpcyBjcmVhdGVkIG9yIGZvdW5kXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHQ0MDA6IHsgZGVzY3JpcHRpb246IFwiSW52YWxpZCBPVFBcIiB9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKG9wdHM/LnZlcmlmeU9UUCkge1xuXHRcdGlmICghYXdhaXQgb3B0cy52ZXJpZnlPVFAoe1xuXHRcdFx0cGhvbmVOdW1iZXI6IGN0eC5ib2R5LnBob25lTnVtYmVyLFxuXHRcdFx0Y29kZTogY3R4LmJvZHkuY29kZVxuXHRcdH0sIGN0eCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLklOVkFMSURfT1RQIH0pO1xuXHRcdGNvbnN0IG90cCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoY3R4LmJvZHkucGhvbmVOdW1iZXIpO1xuXHRcdGlmIChvdHApIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZShvdHAuaWQpO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IG90cCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoY3R4LmJvZHkucGhvbmVOdW1iZXIpO1xuXHRcdGlmICghb3RwIHx8IG90cC5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkge1xuXHRcdFx0aWYgKG90cCAmJiBvdHAuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLk9UUF9FWFBJUkVEIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBQSE9ORV9OVU1CRVJfRVJST1JfQ09ERVMuT1RQX05PVF9GT1VORCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgW290cFZhbHVlLCBhdHRlbXB0c10gPSBvdHAudmFsdWUuc3BsaXQoXCI6XCIpO1xuXHRcdGNvbnN0IGFsbG93ZWRBdHRlbXB0cyA9IG9wdHM/LmFsbG93ZWRBdHRlbXB0cyB8fCAzO1xuXHRcdGlmIChhdHRlbXB0cyAmJiBwYXJzZUludChhdHRlbXB0cykgPj0gYWxsb3dlZEF0dGVtcHRzKSB7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUob3RwLmlkKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5UT09fTUFOWV9BVFRFTVBUUyB9KTtcblx0XHR9XG5cdFx0aWYgKG90cFZhbHVlICE9PSBjdHguYm9keS5jb2RlKSB7XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVmVyaWZpY2F0aW9uVmFsdWUob3RwLmlkLCB7IHZhbHVlOiBgJHtvdHBWYWx1ZX06JHtwYXJzZUludChhdHRlbXB0cyB8fCBcIjBcIikgKyAxfWAgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5JTlZBTElEX09UUCB9KTtcblx0XHR9XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKG90cC5pZCk7XG5cdH1cblx0aWYgKGN0eC5ib2R5LnVwZGF0ZVBob25lTnVtYmVyKSB7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdFx0aWYgKCFzZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfTk9UX0ZPVU5EIH0pO1xuXHRcdGlmICgoYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kTWFueSh7XG5cdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0ZmllbGQ6IFwicGhvbmVOdW1iZXJcIixcblx0XHRcdFx0dmFsdWU6IGN0eC5ib2R5LnBob25lTnVtYmVyXG5cdFx0XHR9XVxuXHRcdH0pKS5sZW5ndGgpIHRocm93IGN0eC5lcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLlBIT05FX05VTUJFUl9FWElTVCB9KTtcblx0XHRjb25zdCB1c2VyJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihzZXNzaW9uLnVzZXIuaWQsIHtcblx0XHRcdFtvcHRzLnBob25lTnVtYmVyXTogY3R4LmJvZHkucGhvbmVOdW1iZXIsXG5cdFx0XHRbb3B0cy5waG9uZU51bWJlclZlcmlmaWVkXTogdHJ1ZVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHR0b2tlbjogc2Vzc2lvbi5zZXNzaW9uLnRva2VuLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIkMSlcblx0XHR9KTtcblx0fVxuXHRsZXQgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0dmFsdWU6IGN0eC5ib2R5LnBob25lTnVtYmVyLFxuXHRcdFx0ZmllbGQ6IG9wdHMucGhvbmVOdW1iZXJcblx0XHR9XVxuXHR9KTtcblx0aWYgKCF1c2VyKSB7XG5cdFx0aWYgKG9wdHM/LnNpZ25VcE9uVmVyaWZpY2F0aW9uKSB7XG5cdFx0XHR1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRlbWFpbDogb3B0cy5zaWduVXBPblZlcmlmaWNhdGlvbi5nZXRUZW1wRW1haWwoY3R4LmJvZHkucGhvbmVOdW1iZXIpLFxuXHRcdFx0XHRuYW1lOiBvcHRzLnNpZ25VcE9uVmVyaWZpY2F0aW9uLmdldFRlbXBOYW1lID8gb3B0cy5zaWduVXBPblZlcmlmaWNhdGlvbi5nZXRUZW1wTmFtZShjdHguYm9keS5waG9uZU51bWJlcikgOiBjdHguYm9keS5waG9uZU51bWJlcixcblx0XHRcdFx0W29wdHMucGhvbmVOdW1iZXJdOiBjdHguYm9keS5waG9uZU51bWJlcixcblx0XHRcdFx0W29wdHMucGhvbmVOdW1iZXJWZXJpZmllZF06IHRydWVcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCF1c2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHR9XG5cdH0gZWxzZSB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIodXNlci5pZCwgeyBbb3B0cy5waG9uZU51bWJlclZlcmlmaWVkXTogdHJ1ZSB9KTtcblx0aWYgKCF1c2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19VUERBVEVfVVNFUiB9KTtcblx0YXdhaXQgb3B0cz8uY2FsbGJhY2tPblZlcmlmaWNhdGlvbj8uKHtcblx0XHRwaG9uZU51bWJlcjogY3R4LmJvZHkucGhvbmVOdW1iZXIsXG5cdFx0dXNlclxuXHR9LCBjdHgpO1xuXHRpZiAoIWN0eC5ib2R5LmRpc2FibGVTZXNzaW9uKSB7XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIuaWQpO1xuXHRcdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb24sXG5cdFx0XHR1c2VyXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpXG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzdGF0dXM6IHRydWUsXG5cdFx0dG9rZW46IG51bGwsXG5cdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldFBob25lTnVtYmVyQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgcGhvbmVOdW1iZXI6IHouc3RyaW5nKCkgfSk7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldFBob25lTnVtYmVyID0gKG9wdHMpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9waG9uZS1udW1iZXIvcmVxdWVzdC1wYXNzd29yZC1yZXNldFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHJlcXVlc3RQYXNzd29yZFJlc2V0UGhvbmVOdW1iZXJCb2R5U2NoZW1hLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiUmVxdWVzdCBPVFAgZm9yIHBhc3N3b3JkIHJlc2V0IHZpYSBwaG9uZSBudW1iZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiT1RQIHNlbnQgc3VjY2Vzc2Z1bGx5IGZvciBwYXNzd29yZCByZXNldFwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIE9UUCB3YXMgc2VudCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRlbnVtOiBbdHJ1ZV1cblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wic3RhdHVzXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0dmFsdWU6IGN0eC5ib2R5LnBob25lTnVtYmVyLFxuXHRcdFx0ZmllbGQ6IG9wdHMucGhvbmVOdW1iZXJcblx0XHR9XVxuXHR9KTtcblx0Y29uc3QgY29kZSA9IGdlbmVyYXRlT1RQKG9wdHMub3RwTGVuZ3RoKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHR2YWx1ZTogYCR7Y29kZX06MGAsXG5cdFx0aWRlbnRpZmllcjogYCR7Y3R4LmJvZHkucGhvbmVOdW1iZXJ9LXJlcXVlc3QtcGFzc3dvcmQtcmVzZXRgLFxuXHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShvcHRzLmV4cGlyZXNJbiwgXCJzZWNcIilcblx0fSk7XG5cdGlmICghdXNlcikgcmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHRpZiAob3B0cy5zZW5kUGFzc3dvcmRSZXNldE9UUCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChvcHRzLnNlbmRQYXNzd29yZFJlc2V0T1RQKHtcblx0XHRwaG9uZU51bWJlcjogY3R4LmJvZHkucGhvbmVOdW1iZXIsXG5cdFx0Y29kZVxuXHR9LCBjdHgpKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5jb25zdCByZXNldFBhc3N3b3JkUGhvbmVOdW1iZXJCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRvdHA6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvbmUgdGltZSBwYXNzd29yZCB0byByZXNldCB0aGUgcGFzc3dvcmQuIEVnOiBcXFwiMTIzNDU2XFxcIlwiIH0pLFxuXHRwaG9uZU51bWJlcjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHBob25lIG51bWJlciB0byB0aGUgYWNjb3VudCB3aGljaCBpbnRlbmRzIHRvIHJlc2V0IHRoZSBwYXNzd29yZCBmb3IuIEVnOiBcXFwiKzEyMzQ1Njc4OTBcXFwiXCIgfSksXG5cdG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogYFRoZSBuZXcgcGFzc3dvcmQuIEVnOiBcIm5ldy1hbmQtc2VjdXJlLXBhc3N3b3JkXCJgIH0pXG59KTtcbmNvbnN0IHJlc2V0UGFzc3dvcmRQaG9uZU51bWJlciA9IChvcHRzKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvcGhvbmUtbnVtYmVyL3Jlc2V0LXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogcmVzZXRQYXNzd29yZFBob25lTnVtYmVyQm9keVNjaGVtYSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJlc2V0IHBhc3N3b3JkIHVzaW5nIHBob25lIG51bWJlciBPVFBcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiUGFzc3dvcmQgcmVzZXQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgcGFzc3dvcmQgd2FzIHJlc2V0IHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdGVudW06IFt0cnVlXVxuXHRcdFx0XHR9IH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGAke2N0eC5ib2R5LnBob25lTnVtYmVyfS1yZXF1ZXN0LXBhc3N3b3JkLXJlc2V0YCk7XG5cdGlmICghdmVyaWZpY2F0aW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5PVFBfTk9UX0ZPVU5EIH0pO1xuXHRpZiAodmVyaWZpY2F0aW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFBIT05FX05VTUJFUl9FUlJPUl9DT0RFUy5PVFBfRVhQSVJFRCB9KTtcblx0Y29uc3QgW290cFZhbHVlLCBhdHRlbXB0c10gPSB2ZXJpZmljYXRpb24udmFsdWUuc3BsaXQoXCI6XCIpO1xuXHRjb25zdCBhbGxvd2VkQXR0ZW1wdHMgPSBvcHRzPy5hbGxvd2VkQXR0ZW1wdHMgfHwgMztcblx0aWYgKGF0dGVtcHRzICYmIHBhcnNlSW50KGF0dGVtcHRzKSA+PSBhbGxvd2VkQXR0ZW1wdHMpIHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uLmlkKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBQSE9ORV9OVU1CRVJfRVJST1JfQ09ERVMuVE9PX01BTllfQVRURU1QVFMgfSk7XG5cdH1cblx0aWYgKGN0eC5ib2R5Lm90cCAhPT0gb3RwVmFsdWUpIHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uLmlkLCB7IHZhbHVlOiBgJHtvdHBWYWx1ZX06JHtwYXJzZUludChhdHRlbXB0cyB8fCBcIjBcIikgKyAxfWAgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBQSE9ORV9OVU1CRVJfRVJST1JfQ09ERVMuSU5WQUxJRF9PVFAgfSk7XG5cdH1cblx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdHdoZXJlOiBbe1xuXHRcdFx0ZmllbGQ6IFwicGhvbmVOdW1iZXJcIixcblx0XHRcdHZhbHVlOiBjdHguYm9keS5waG9uZU51bWJlclxuXHRcdH1dXG5cdH0pO1xuXHRpZiAoIXVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogUEhPTkVfTlVNQkVSX0VSUk9SX0NPREVTLlVORVhQRUNURURfRVJST1IgfSk7XG5cdGNvbnN0IG1pbkxlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0Y29uc3QgbWF4TGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1heFBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAoY3R4LmJvZHkubmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX1NIT1JUIH0pO1xuXHRpZiAoY3R4LmJvZHkubmV3UGFzc3dvcmQubGVuZ3RoID4gbWF4TGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUEFTU1dPUkRfVE9PX0xPTkcgfSk7XG5cdGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChjdHguYm9keS5uZXdQYXNzd29yZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVQYXNzd29yZCh1c2VyLmlkLCBoYXNoZWRQYXNzd29yZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb24uaWQpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5yZXZva2VTZXNzaW9uc09uUGFzc3dvcmRSZXNldCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHVzZXIuaWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmZ1bmN0aW9uIGdlbmVyYXRlT1RQKHNpemUpIHtcblx0cmV0dXJuIGdlbmVyYXRlUmFuZG9tU3RyaW5nKHNpemUsIFwiMC05XCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHJlcXVlc3RQYXNzd29yZFJlc2V0UGhvbmVOdW1iZXIsIHJlc2V0UGFzc3dvcmRQaG9uZU51bWJlciwgc2VuZFBob25lTnVtYmVyT1RQLCBzaWduSW5QaG9uZU51bWJlciwgdmVyaWZ5UGhvbmVOdW1iZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/phone-number/routes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/phone-number/schema.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/schema.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/phone-number/schema.ts\nconst schema = { user: { fields: {\n\tphoneNumber: {\n\t\ttype: \"string\",\n\t\trequired: false,\n\t\tunique: true,\n\t\tsortable: true,\n\t\treturned: true\n\t},\n\tphoneNumberVerified: {\n\t\ttype: \"boolean\",\n\t\trequired: false,\n\t\treturned: true,\n\t\tinput: false\n\t}\n} } };\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHBob25lLW51bWJlclxcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvcGhvbmUtbnVtYmVyL3NjaGVtYS50c1xuY29uc3Qgc2NoZW1hID0geyB1c2VyOiB7IGZpZWxkczoge1xuXHRwaG9uZU51bWJlcjoge1xuXHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdHVuaXF1ZTogdHJ1ZSxcblx0XHRzb3J0YWJsZTogdHJ1ZSxcblx0XHRyZXR1cm5lZDogdHJ1ZVxuXHR9LFxuXHRwaG9uZU51bWJlclZlcmlmaWVkOiB7XG5cdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdHJldHVybmVkOiB0cnVlLFxuXHRcdGlucHV0OiBmYWxzZVxuXHR9XG59IH0gfTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/phone-number/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/siwe/client.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/siwe/client.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   siweClient: () => (/* binding */ siweClient)\n/* harmony export */ });\n//#region src/plugins/siwe/client.ts\nconst siweClient = () => {\n\treturn {\n\t\tid: \"siwe\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Npd2UvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxzaXdlXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9zaXdlL2NsaWVudC50c1xuY29uc3Qgc2l3ZUNsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJzaXdlXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaXdlQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/siwe/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/siwe/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/siwe/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   siwe: () => (/* binding */ siwe)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_hashing_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/hashing.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hashing.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/siwe/schema.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/plugins/siwe/index.ts\nconst getSiweNonceBodySchema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\twalletAddress: zod__WEBPACK_IMPORTED_MODULE_7__.string().regex(/^0[xX][a-fA-F0-9]{40}$/i).length(42),\n\tchainId: zod__WEBPACK_IMPORTED_MODULE_7__.number().int().positive().max(2147483647).optional().default(1)\n});\nconst siwe = (options) => ({\n\tid: \"siwe\",\n\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_5__.schema, options?.schema),\n\tendpoints: {\n\t\tgetSiweNonce: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/siwe/nonce\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: getSiweNonceBodySchema\n\t\t}, async (ctx) => {\n\t\t\tconst { walletAddress: rawWalletAddress, chainId } = ctx.body;\n\t\t\tconst walletAddress = (0,_utils_hashing_mjs__WEBPACK_IMPORTED_MODULE_4__.toChecksumAddress)(rawWalletAddress);\n\t\t\tconst nonce = await options.getNonce();\n\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\tidentifier: `siwe:${walletAddress}:${chainId}`,\n\t\t\t\tvalue: nonce,\n\t\t\t\texpiresAt: new Date(Date.now() + 900 * 1e3)\n\t\t\t});\n\t\t\treturn ctx.json({ nonce });\n\t\t}),\n\t\tverifySiweMessage: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/siwe/verify\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\t\t\t\tmessage: zod__WEBPACK_IMPORTED_MODULE_7__.string().min(1),\n\t\t\t\tsignature: zod__WEBPACK_IMPORTED_MODULE_7__.string().min(1),\n\t\t\t\twalletAddress: zod__WEBPACK_IMPORTED_MODULE_7__.string().regex(/^0[xX][a-fA-F0-9]{40}$/i).length(42),\n\t\t\t\tchainId: zod__WEBPACK_IMPORTED_MODULE_7__.number().int().positive().max(2147483647).optional().default(1),\n\t\t\t\temail: zod__WEBPACK_IMPORTED_MODULE_7__.email().optional()\n\t\t\t}).refine((data) => options.anonymous !== false || !!data.email, {\n\t\t\t\tmessage: \"Email is required when the anonymous plugin option is disabled.\",\n\t\t\t\tpath: [\"email\"]\n\t\t\t}),\n\t\t\trequireRequest: true\n\t\t}, async (ctx) => {\n\t\t\tconst { message, signature, walletAddress: rawWalletAddress, chainId, email } = ctx.body;\n\t\t\tconst walletAddress = (0,_utils_hashing_mjs__WEBPACK_IMPORTED_MODULE_4__.toChecksumAddress)(rawWalletAddress);\n\t\t\tconst isAnon = options.anonymous ?? true;\n\t\t\tif (!isAnon && !email) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"BAD_REQUEST\", {\n\t\t\t\tmessage: \"Email is required when anonymous is disabled.\",\n\t\t\t\tstatus: 400\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`siwe:${walletAddress}:${chainId}`);\n\t\t\t\tif (!verification || /* @__PURE__ */ new Date() > verification.expiresAt) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\tmessage: \"Unauthorized: Invalid or expired nonce\",\n\t\t\t\t\tstatus: 401,\n\t\t\t\t\tcode: \"UNAUTHORIZED_INVALID_OR_EXPIRED_NONCE\"\n\t\t\t\t});\n\t\t\t\tconst { value: nonce } = verification;\n\t\t\t\tif (!await options.verifyMessage({\n\t\t\t\t\tmessage,\n\t\t\t\t\tsignature,\n\t\t\t\t\taddress: walletAddress,\n\t\t\t\t\tchainId,\n\t\t\t\t\tcacao: {\n\t\t\t\t\t\th: { t: \"caip122\" },\n\t\t\t\t\t\tp: {\n\t\t\t\t\t\t\tdomain: options.domain,\n\t\t\t\t\t\t\taud: options.domain,\n\t\t\t\t\t\t\tnonce,\n\t\t\t\t\t\t\tiss: options.domain,\n\t\t\t\t\t\t\tversion: \"1\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\ts: {\n\t\t\t\t\t\t\tt: \"eip191\",\n\t\t\t\t\t\t\ts: signature\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\tmessage: \"Unauthorized: Invalid SIWE signature\",\n\t\t\t\t\tstatus: 401\n\t\t\t\t});\n\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\t\t\t\tlet user = null;\n\t\t\t\tconst existingWalletAddress = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: \"walletAddress\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"address\",\n\t\t\t\t\t\toperator: \"eq\",\n\t\t\t\t\t\tvalue: walletAddress\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfield: \"chainId\",\n\t\t\t\t\t\toperator: \"eq\",\n\t\t\t\t\t\tvalue: chainId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (existingWalletAddress) user = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\toperator: \"eq\",\n\t\t\t\t\t\tvalue: existingWalletAddress.userId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\telse {\n\t\t\t\t\tconst anyWalletAddress = await ctx.context.adapter.findOne({\n\t\t\t\t\t\tmodel: \"walletAddress\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"address\",\n\t\t\t\t\t\t\toperator: \"eq\",\n\t\t\t\t\t\t\tvalue: walletAddress\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tif (anyWalletAddress) user = await ctx.context.adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\toperator: \"eq\",\n\t\t\t\t\t\t\tvalue: anyWalletAddress.userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (!user) {\n\t\t\t\t\tconst domain = options.emailDomainName ?? (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getOrigin)(ctx.context.baseURL);\n\t\t\t\t\tconst userEmail = !isAnon && email ? email : `${walletAddress}@${domain}`;\n\t\t\t\t\tconst { name, avatar } = await options.ensLookup?.({ walletAddress }) ?? {};\n\t\t\t\t\tuser = await ctx.context.internalAdapter.createUser({\n\t\t\t\t\t\tname: name ?? walletAddress,\n\t\t\t\t\t\temail: userEmail,\n\t\t\t\t\t\timage: avatar ?? \"\"\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\t\tmodel: \"walletAddress\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserId: user.id,\n\t\t\t\t\t\t\taddress: walletAddress,\n\t\t\t\t\t\t\tchainId,\n\t\t\t\t\t\t\tisPrimary: true,\n\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.internalAdapter.createAccount({\n\t\t\t\t\t\tuserId: user.id,\n\t\t\t\t\t\tproviderId: \"siwe\",\n\t\t\t\t\t\taccountId: `${walletAddress}:${chainId}`,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t});\n\t\t\t\t} else if (!existingWalletAddress) {\n\t\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\t\tmodel: \"walletAddress\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserId: user.id,\n\t\t\t\t\t\t\taddress: walletAddress,\n\t\t\t\t\t\t\tchainId,\n\t\t\t\t\t\t\tisPrimary: false,\n\t\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.internalAdapter.createAccount({\n\t\t\t\t\t\tuserId: user.id,\n\t\t\t\t\t\tproviderId: \"siwe\",\n\t\t\t\t\t\taccountId: `${walletAddress}:${chainId}`,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.id);\n\t\t\t\tif (!session) throw new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"INTERNAL_SERVER_ERROR\", {\n\t\t\t\t\tmessage: \"Internal Server Error\",\n\t\t\t\t\tstatus: 500\n\t\t\t\t});\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t});\n\t\t\t\treturn ctx.json({\n\t\t\t\t\ttoken: session.token,\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\twalletAddress,\n\t\t\t\t\t\tchainId\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError) throw error;\n\t\t\t\tthrow new _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError(\"UNAUTHORIZED\", {\n\t\t\t\t\tmessage: \"Something went wrong. Please try again later.\",\n\t\t\t\t\terror: error instanceof Error ? error.message : \"Unknown error\",\n\t\t\t\t\tstatus: 401\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t},\n\toptions\n});\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Npd2UvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNGO0FBQ1c7QUFDWjtBQUNhO0FBQ3RCO0FBQ2I7QUFDa0M7O0FBRTNEO0FBQ0EsK0JBQStCLHVDQUFRO0FBQ3ZDLGdCQUFnQix1Q0FBUSw0QkFBNEIsR0FBRztBQUN2RCxVQUFVLHVDQUFRO0FBQ2xCLENBQUM7QUFDRDtBQUNBO0FBQ0EsU0FBUywyREFBVyxDQUFDLCtDQUFNO0FBQzNCO0FBQ0EsZ0JBQWdCLHlFQUFrQjtBQUNsQztBQUNBO0FBQ0EsR0FBRztBQUNILFdBQVcsMkNBQTJDO0FBQ3RELHlCQUF5QixxRUFBaUI7QUFDMUM7QUFDQTtBQUNBLHdCQUF3QixjQUFjLEdBQUcsUUFBUTtBQUNqRDtBQUNBO0FBQ0EsSUFBSTtBQUNKLHFCQUFxQixPQUFPO0FBQzVCLEdBQUc7QUFDSCxxQkFBcUIseUVBQWtCO0FBQ3ZDO0FBQ0EsU0FBUyx1Q0FBUTtBQUNqQixhQUFhLHVDQUFRO0FBQ3JCLGVBQWUsdUNBQVE7QUFDdkIsbUJBQW1CLHVDQUFRLDRCQUE0QixHQUFHO0FBQzFELGFBQWEsdUNBQVE7QUFDckIsV0FBVyxzQ0FBTztBQUNsQixJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSCxXQUFXLHNFQUFzRTtBQUNqRix5QkFBeUIscUVBQWlCO0FBQzFDO0FBQ0Esb0NBQW9DLG9EQUFRO0FBQzVDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx5RkFBeUYsY0FBYyxHQUFHLFFBQVE7QUFDbEgsd0ZBQXdGLG9EQUFRO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLGVBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxhQUFhLG9EQUFRO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBLCtDQUErQyx5REFBUztBQUN4RCxxREFBcUQsY0FBYyxHQUFHLE9BQU87QUFDN0UsYUFBYSxlQUFlLDhCQUE4QixlQUFlO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYyxHQUFHLFFBQVE7QUFDN0M7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixjQUFjLEdBQUcsUUFBUTtBQUM3QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSw0QkFBNEIsb0RBQVE7QUFDcEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsS0FBSztBQUNMLHlCQUF5QixvREFBUTtBQUNqQyxjQUFjLG9EQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSxDQUFDOztBQUVEO0FBQ2dCO0FBQ2hCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcc2l3ZVxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lcmdlU2NoZW1hIH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IGdldE9yaWdpbiB9IGZyb20gXCIuLi8uLi91dGlscy91cmwubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b0NoZWNrc3VtQWRkcmVzcyB9IGZyb20gXCIuLi8uLi91dGlscy9oYXNoaW5nLm1qc1wiO1xuaW1wb3J0IHsgc2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9zaXdlL2luZGV4LnRzXG5jb25zdCBnZXRTaXdlTm9uY2VCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHR3YWxsZXRBZGRyZXNzOiB6LnN0cmluZygpLnJlZ2V4KC9eMFt4WF1bYS1mQS1GMC05XXs0MH0kL2kpLmxlbmd0aCg0MiksXG5cdGNoYWluSWQ6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5tYXgoMjE0NzQ4MzY0Nykub3B0aW9uYWwoKS5kZWZhdWx0KDEpXG59KTtcbmNvbnN0IHNpd2UgPSAob3B0aW9ucykgPT4gKHtcblx0aWQ6IFwic2l3ZVwiLFxuXHRzY2hlbWE6IG1lcmdlU2NoZW1hKHNjaGVtYSwgb3B0aW9ucz8uc2NoZW1hKSxcblx0ZW5kcG9pbnRzOiB7XG5cdFx0Z2V0U2l3ZU5vbmNlOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvc2l3ZS9ub25jZVwiLCB7XG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0Ym9keTogZ2V0U2l3ZU5vbmNlQm9keVNjaGVtYVxuXHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdGNvbnN0IHsgd2FsbGV0QWRkcmVzczogcmF3V2FsbGV0QWRkcmVzcywgY2hhaW5JZCB9ID0gY3R4LmJvZHk7XG5cdFx0XHRjb25zdCB3YWxsZXRBZGRyZXNzID0gdG9DaGVja3N1bUFkZHJlc3MocmF3V2FsbGV0QWRkcmVzcyk7XG5cdFx0XHRjb25zdCBub25jZSA9IGF3YWl0IG9wdGlvbnMuZ2V0Tm9uY2UoKTtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHRcdGlkZW50aWZpZXI6IGBzaXdlOiR7d2FsbGV0QWRkcmVzc306JHtjaGFpbklkfWAsXG5cdFx0XHRcdHZhbHVlOiBub25jZSxcblx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgOTAwICogMWUzKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBub25jZSB9KTtcblx0XHR9KSxcblx0XHR2ZXJpZnlTaXdlTWVzc2FnZTogY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Npd2UvdmVyaWZ5XCIsIHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0XHRcdG1lc3NhZ2U6IHouc3RyaW5nKCkubWluKDEpLFxuXHRcdFx0XHRzaWduYXR1cmU6IHouc3RyaW5nKCkubWluKDEpLFxuXHRcdFx0XHR3YWxsZXRBZGRyZXNzOiB6LnN0cmluZygpLnJlZ2V4KC9eMFt4WF1bYS1mQS1GMC05XXs0MH0kL2kpLmxlbmd0aCg0MiksXG5cdFx0XHRcdGNoYWluSWQ6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5tYXgoMjE0NzQ4MzY0Nykub3B0aW9uYWwoKS5kZWZhdWx0KDEpLFxuXHRcdFx0XHRlbWFpbDogei5lbWFpbCgpLm9wdGlvbmFsKClcblx0XHRcdH0pLnJlZmluZSgoZGF0YSkgPT4gb3B0aW9ucy5hbm9ueW1vdXMgIT09IGZhbHNlIHx8ICEhZGF0YS5lbWFpbCwge1xuXHRcdFx0XHRtZXNzYWdlOiBcIkVtYWlsIGlzIHJlcXVpcmVkIHdoZW4gdGhlIGFub255bW91cyBwbHVnaW4gb3B0aW9uIGlzIGRpc2FibGVkLlwiLFxuXHRcdFx0XHRwYXRoOiBbXCJlbWFpbFwiXVxuXHRcdFx0fSksXG5cdFx0XHRyZXF1aXJlUmVxdWVzdDogdHJ1ZVxuXHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdGNvbnN0IHsgbWVzc2FnZSwgc2lnbmF0dXJlLCB3YWxsZXRBZGRyZXNzOiByYXdXYWxsZXRBZGRyZXNzLCBjaGFpbklkLCBlbWFpbCB9ID0gY3R4LmJvZHk7XG5cdFx0XHRjb25zdCB3YWxsZXRBZGRyZXNzID0gdG9DaGVja3N1bUFkZHJlc3MocmF3V2FsbGV0QWRkcmVzcyk7XG5cdFx0XHRjb25zdCBpc0Fub24gPSBvcHRpb25zLmFub255bW91cyA/PyB0cnVlO1xuXHRcdFx0aWYgKCFpc0Fub24gJiYgIWVtYWlsKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiRW1haWwgaXMgcmVxdWlyZWQgd2hlbiBhbm9ueW1vdXMgaXMgZGlzYWJsZWQuXCIsXG5cdFx0XHRcdHN0YXR1czogNDAwXG5cdFx0XHR9KTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoYHNpd2U6JHt3YWxsZXRBZGRyZXNzfToke2NoYWluSWR9YCk7XG5cdFx0XHRcdGlmICghdmVyaWZpY2F0aW9uIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpID4gdmVyaWZpY2F0aW9uLmV4cGlyZXNBdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRtZXNzYWdlOiBcIlVuYXV0aG9yaXplZDogSW52YWxpZCBvciBleHBpcmVkIG5vbmNlXCIsXG5cdFx0XHRcdFx0c3RhdHVzOiA0MDEsXG5cdFx0XHRcdFx0Y29kZTogXCJVTkFVVEhPUklaRURfSU5WQUxJRF9PUl9FWFBJUkVEX05PTkNFXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHsgdmFsdWU6IG5vbmNlIH0gPSB2ZXJpZmljYXRpb247XG5cdFx0XHRcdGlmICghYXdhaXQgb3B0aW9ucy52ZXJpZnlNZXNzYWdlKHtcblx0XHRcdFx0XHRtZXNzYWdlLFxuXHRcdFx0XHRcdHNpZ25hdHVyZSxcblx0XHRcdFx0XHRhZGRyZXNzOiB3YWxsZXRBZGRyZXNzLFxuXHRcdFx0XHRcdGNoYWluSWQsXG5cdFx0XHRcdFx0Y2FjYW86IHtcblx0XHRcdFx0XHRcdGg6IHsgdDogXCJjYWlwMTIyXCIgfSxcblx0XHRcdFx0XHRcdHA6IHtcblx0XHRcdFx0XHRcdFx0ZG9tYWluOiBvcHRpb25zLmRvbWFpbixcblx0XHRcdFx0XHRcdFx0YXVkOiBvcHRpb25zLmRvbWFpbixcblx0XHRcdFx0XHRcdFx0bm9uY2UsXG5cdFx0XHRcdFx0XHRcdGlzczogb3B0aW9ucy5kb21haW4sXG5cdFx0XHRcdFx0XHRcdHZlcnNpb246IFwiMVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0czoge1xuXHRcdFx0XHRcdFx0XHR0OiBcImVpcDE5MVwiLFxuXHRcdFx0XHRcdFx0XHRzOiBzaWduYXR1cmVcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwge1xuXHRcdFx0XHRcdG1lc3NhZ2U6IFwiVW5hdXRob3JpemVkOiBJbnZhbGlkIFNJV0Ugc2lnbmF0dXJlXCIsXG5cdFx0XHRcdFx0c3RhdHVzOiA0MDFcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZSh2ZXJpZmljYXRpb24uaWQpO1xuXHRcdFx0XHRsZXQgdXNlciA9IG51bGw7XG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nV2FsbGV0QWRkcmVzcyA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwid2FsbGV0QWRkcmVzc1wiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiYWRkcmVzc1wiLFxuXHRcdFx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB3YWxsZXRBZGRyZXNzXG5cdFx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiY2hhaW5JZFwiLFxuXHRcdFx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBjaGFpbklkXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChleGlzdGluZ1dhbGxldEFkZHJlc3MpIHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGV4aXN0aW5nV2FsbGV0QWRkcmVzcy51c2VySWRcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgYW55V2FsbGV0QWRkcmVzcyA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ3YWxsZXRBZGRyZXNzXCIsXG5cdFx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwiYWRkcmVzc1wiLFxuXHRcdFx0XHRcdFx0XHRvcGVyYXRvcjogXCJlcVwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogd2FsbGV0QWRkcmVzc1xuXHRcdFx0XHRcdFx0fV1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoYW55V2FsbGV0QWRkcmVzcykgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHRcdFx0b3BlcmF0b3I6IFwiZXFcIixcblx0XHRcdFx0XHRcdFx0dmFsdWU6IGFueVdhbGxldEFkZHJlc3MudXNlcklkXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghdXNlcikge1xuXHRcdFx0XHRcdGNvbnN0IGRvbWFpbiA9IG9wdGlvbnMuZW1haWxEb21haW5OYW1lID8/IGdldE9yaWdpbihjdHguY29udGV4dC5iYXNlVVJMKTtcblx0XHRcdFx0XHRjb25zdCB1c2VyRW1haWwgPSAhaXNBbm9uICYmIGVtYWlsID8gZW1haWwgOiBgJHt3YWxsZXRBZGRyZXNzfUAke2RvbWFpbn1gO1xuXHRcdFx0XHRcdGNvbnN0IHsgbmFtZSwgYXZhdGFyIH0gPSBhd2FpdCBvcHRpb25zLmVuc0xvb2t1cD8uKHsgd2FsbGV0QWRkcmVzcyB9KSA/PyB7fTtcblx0XHRcdFx0XHR1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVVzZXIoe1xuXHRcdFx0XHRcdFx0bmFtZTogbmFtZSA/PyB3YWxsZXRBZGRyZXNzLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXJFbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiBhdmF0YXIgPz8gXCJcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuY3JlYXRlKHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcIndhbGxldEFkZHJlc3NcIixcblx0XHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdFx0dXNlcklkOiB1c2VyLmlkLFxuXHRcdFx0XHRcdFx0XHRhZGRyZXNzOiB3YWxsZXRBZGRyZXNzLFxuXHRcdFx0XHRcdFx0XHRjaGFpbklkLFxuXHRcdFx0XHRcdFx0XHRpc1ByaW1hcnk6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlQWNjb3VudCh7XG5cdFx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuaWQsXG5cdFx0XHRcdFx0XHRwcm92aWRlcklkOiBcInNpd2VcIixcblx0XHRcdFx0XHRcdGFjY291bnRJZDogYCR7d2FsbGV0QWRkcmVzc306JHtjaGFpbklkfWAsXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFleGlzdGluZ1dhbGxldEFkZHJlc3MpIHtcblx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmNyZWF0ZSh7XG5cdFx0XHRcdFx0XHRtb2RlbDogXCJ3YWxsZXRBZGRyZXNzXCIsXG5cdFx0XHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdFx0XHRcdFx0YWRkcmVzczogd2FsbGV0QWRkcmVzcyxcblx0XHRcdFx0XHRcdFx0Y2hhaW5JZCxcblx0XHRcdFx0XHRcdFx0aXNQcmltYXJ5OiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdFx0XHRcdHVzZXJJZDogdXNlci5pZCxcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQ6IFwic2l3ZVwiLFxuXHRcdFx0XHRcdFx0YWNjb3VudElkOiBgJHt3YWxsZXRBZGRyZXNzfToke2NoYWluSWR9YCxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIuaWQpO1xuXHRcdFx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7XG5cdFx0XHRcdFx0bWVzc2FnZTogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIixcblx0XHRcdFx0XHRzdGF0dXM6IDUwMFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRpZDogdXNlci5pZCxcblx0XHRcdFx0XHRcdHdhbGxldEFkZHJlc3MsXG5cdFx0XHRcdFx0XHRjaGFpbklkXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSUVycm9yKSB0aHJvdyBlcnJvcjtcblx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHtcblx0XHRcdFx0XHRtZXNzYWdlOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLFxuXHRcdFx0XHRcdGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuXHRcdFx0XHRcdHN0YXR1czogNDAxXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cdH0sXG5cdG9wdGlvbnNcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNpd2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/siwe/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/siwe/schema.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/siwe/schema.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/siwe/schema.ts\nconst schema = { walletAddress: { fields: {\n\tuserId: {\n\t\ttype: \"string\",\n\t\treferences: {\n\t\t\tmodel: \"user\",\n\t\t\tfield: \"id\"\n\t\t},\n\t\trequired: true,\n\t\tindex: true\n\t},\n\taddress: {\n\t\ttype: \"string\",\n\t\trequired: true\n\t},\n\tchainId: {\n\t\ttype: \"number\",\n\t\trequired: true\n\t},\n\tisPrimary: {\n\t\ttype: \"boolean\",\n\t\tdefaultValue: false\n\t},\n\tcreatedAt: {\n\t\ttype: \"date\",\n\t\trequired: true\n\t}\n} } };\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Npd2Uvc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSxpQkFBaUIsaUJBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2tCO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcc2l3ZVxcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvc2l3ZS9zY2hlbWEudHNcbmNvbnN0IHNjaGVtYSA9IHsgd2FsbGV0QWRkcmVzczogeyBmaWVsZHM6IHtcblx0dXNlcklkOiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZWZlcmVuY2VzOiB7XG5cdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0fSxcblx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRpbmRleDogdHJ1ZVxuXHR9LFxuXHRhZGRyZXNzOiB7XG5cdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRyZXF1aXJlZDogdHJ1ZVxuXHR9LFxuXHRjaGFpbklkOiB7XG5cdFx0dHlwZTogXCJudW1iZXJcIixcblx0XHRyZXF1aXJlZDogdHJ1ZVxuXHR9LFxuXHRpc1ByaW1hcnk6IHtcblx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRkZWZhdWx0VmFsdWU6IGZhbHNlXG5cdH0sXG5cdGNyZWF0ZWRBdDoge1xuXHRcdHR5cGU6IFwiZGF0ZVwiLFxuXHRcdHJlcXVpcmVkOiB0cnVlXG5cdH1cbn0gfSB9O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/siwe/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/backup-codes/index.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/backup-codes/index.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backupCode2fa: () => (/* binding */ backupCode2fa),\n/* harmony export */   generateBackupCodes: () => (/* binding */ generateBackupCodes)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../verify-two-factor.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/two-factor/backup-codes/index.ts\nfunction generateBackupCodesFn(options) {\n\treturn Array.from({ length: options?.amount ?? 10 }).fill(null).map(() => (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(options?.length ?? 10, \"a-z\", \"0-9\", \"A-Z\")).map((code) => `${code.slice(0, 5)}-${code.slice(5)}`);\n}\nasync function generateBackupCodes(secret, options) {\n\tconst backupCodes = options?.customBackupCodesGenerate ? options.customBackupCodesGenerate() : generateBackupCodesFn(options);\n\tif (options?.storeBackupCodes === \"encrypted\") return {\n\t\tbackupCodes,\n\t\tencryptedBackupCodes: await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\tdata: JSON.stringify(backupCodes),\n\t\t\tkey: secret\n\t\t})\n\t};\n\tif (typeof options?.storeBackupCodes === \"object\" && \"encrypt\" in options?.storeBackupCodes) return {\n\t\tbackupCodes,\n\t\tencryptedBackupCodes: await options?.storeBackupCodes.encrypt(JSON.stringify(backupCodes))\n\t};\n\treturn {\n\t\tbackupCodes,\n\t\tencryptedBackupCodes: JSON.stringify(backupCodes)\n\t};\n}\nasync function verifyBackupCode(data, key, options) {\n\tconst codes = await getBackupCodes(data.backupCodes, key, options);\n\tif (!codes) return {\n\t\tstatus: false,\n\t\tupdated: null\n\t};\n\treturn {\n\t\tstatus: codes.includes(data.code),\n\t\tupdated: codes.filter((code) => code !== data.code)\n\t};\n}\nasync function getBackupCodes(backupCodes, key, options) {\n\tif (options?.storeBackupCodes === \"encrypted\") return (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__.safeJSONParse)(await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecrypt)({\n\t\tkey,\n\t\tdata: backupCodes\n\t}));\n\tif (typeof options?.storeBackupCodes === \"object\" && \"decrypt\" in options?.storeBackupCodes) return (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__.safeJSONParse)(await options?.storeBackupCodes.decrypt(backupCodes));\n\treturn (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_7__.safeJSONParse)(backupCodes);\n}\nconst verifyBackupCodeBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: `A backup code to verify. Eg: \"123456\"` }),\n\tdisableSession: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"If true, the session cookie will not be set.\" }).optional(),\n\ttrustDevice: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true\" }).optional()\n});\nconst viewBackupCodesBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ userId: zod__WEBPACK_IMPORTED_MODULE_10__.coerce.string().meta({ description: `The user ID to view all backup codes. Eg: \"user-id\"` }) });\nconst generateBackupCodesBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ password: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The users password.\" }) });\nconst backupCode2fa = (opts) => {\n\tconst twoFactorTable = \"twoFactor\";\n\treturn {\n\t\tid: \"backup_code\",\n\t\tendpoints: {\n\t\t\tverifyBackupCode: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/two-factor/verify-backup-code\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: verifyBackupCodeBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Verify a backup code for two-factor authentication\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Backup code verified successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's email address\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email is verified\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's name\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's profile image URL\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\ttwoFactorEnabled: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Whether two-factor authentication is enabled for the user\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was created\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was last updated\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\t\"twoFactorEnabled\",\n\t\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"The authenticated user object with two-factor details\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tuserId: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"ID of the user associated with the session\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the session was created\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\texpiresAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the session expires\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\t\"expiresAt\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"The current session object, included unless disableSession is true\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\"user\", \"session\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst { session, valid } = await (0,_verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_6__.verifyTwoFactor)(ctx);\n\t\t\t\tconst user = session.user;\n\t\t\t\tconst twoFactor = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!twoFactor) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.BACKUP_CODES_NOT_ENABLED });\n\t\t\t\tconst validate = await verifyBackupCode({\n\t\t\t\t\tbackupCodes: twoFactor.backupCodes,\n\t\t\t\t\tcode: ctx.body.code\n\t\t\t\t}, ctx.context.secret, opts);\n\t\t\t\tif (!validate.status) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.INVALID_BACKUP_CODE });\n\t\t\t\tconst updatedBackupCodes = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\tdata: JSON.stringify(validate.updated)\n\t\t\t\t});\n\t\t\t\tif (!await ctx.context.adapter.update({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\tupdate: { backupCodes: updatedBackupCodes },\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: twoFactor.id\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfield: \"backupCodes\",\n\t\t\t\t\t\tvalue: twoFactor.backupCodes\n\t\t\t\t\t}]\n\t\t\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"CONFLICT\", { message: \"Failed to verify backup code. Please try again.\" });\n\t\t\t\tif (!ctx.body.disableSession) return valid(ctx);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\ttoken: session.session?.token,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t\t\t\t});\n\t\t\t}),\n\t\t\tgenerateBackupCodes: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/two-factor/generate-backup-codes\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: generateBackupCodesBodySchema,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tdescription: \"Generate new backup codes for two-factor authentication\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Backup codes generated successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\tdescription: \"Indicates if the backup codes were generated successfully\",\n\t\t\t\t\t\t\t\t\tenum: [true]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbackupCodes: {\n\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\titems: { type: \"string\" },\n\t\t\t\t\t\t\t\t\tdescription: \"Array of generated backup codes in plain text\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\"status\", \"backupCodes\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst user = ctx.context.session.user;\n\t\t\t\tif (!user.twoFactorEnabled) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.TWO_FACTOR_NOT_ENABLED });\n\t\t\t\tawait ctx.context.password.checkPassword(user.id, ctx);\n\t\t\t\tconst twoFactor = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!twoFactor) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.TWO_FACTOR_NOT_ENABLED });\n\t\t\t\tconst backupCodes = await generateBackupCodes(ctx.context.secret, opts);\n\t\t\t\tawait ctx.context.adapter.update({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\tupdate: { backupCodes: backupCodes.encryptedBackupCodes },\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\tvalue: twoFactor.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tbackupCodes: backupCodes.backupCodes\n\t\t\t\t});\n\t\t\t}),\n\t\t\tviewBackupCodes: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: viewBackupCodesBodySchema\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst twoFactor = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: ctx.body.userId\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!twoFactor) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.BACKUP_CODES_NOT_ENABLED });\n\t\t\t\tconst decryptedBackupCodes = await getBackupCodes(twoFactor.backupCodes, ctx.context.secret, opts);\n\t\t\t\tif (!decryptedBackupCodes) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.INVALID_BACKUP_CODE });\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tbackupCodes: decryptedBackupCodes\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvYmFja3VwLWNvZGVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ1M7QUFDYTtBQUNYO0FBQ3BDO0FBQzJCO0FBQ0E7QUFDSDtBQUNqQjtBQUNkO0FBQ2tDOztBQUUzRDtBQUNBO0FBQ0EscUJBQXFCLCtCQUErQix1QkFBdUIsd0VBQW9CLCtEQUErRCxpQkFBaUIsR0FBRyxjQUFjO0FBQ2hNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsbUVBQWdCO0FBQzlDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsc0VBQWEsT0FBTyxtRUFBZ0I7QUFDM0Y7QUFDQTtBQUNBLEVBQUU7QUFDRixxR0FBcUcsc0VBQWE7QUFDbEgsUUFBUSxzRUFBYTtBQUNyQjtBQUNBLG1DQUFtQyx3Q0FBUTtBQUMzQyxPQUFPLHdDQUFRLFVBQVUsc0RBQXNEO0FBQy9FLGlCQUFpQix5Q0FBUyxVQUFVLDZEQUE2RDtBQUNqRyxjQUFjLHlDQUFTLFVBQVUsd0lBQXdJO0FBQ3pLLENBQUM7QUFDRCxrQ0FBa0Msd0NBQVEsR0FBRyxRQUFRLCtDQUFlLFVBQVUsb0VBQW9FLEdBQUc7QUFDckosc0NBQXNDLHdDQUFRLEdBQUcsVUFBVSx3Q0FBUSxVQUFVLG9DQUFvQyxHQUFHO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseUVBQWtCO0FBQ3ZDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksaUJBQWlCLFFBQVEsdUVBQWU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCw4QkFBOEIsaURBQVEsa0JBQWtCLFNBQVMsbUVBQXNCLDJCQUEyQjtBQUNsSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsb0NBQW9DLGlEQUFRLG1CQUFtQixTQUFTLG1FQUFzQixzQkFBc0I7QUFDcEgscUNBQXFDLG1FQUFnQjtBQUNyRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxlQUFlLGlDQUFpQztBQUNoRDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLLGFBQWEsaURBQVEsZUFBZSw0REFBNEQ7QUFDckc7QUFDQTtBQUNBO0FBQ0EsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0wsSUFBSTtBQUNKLHdCQUF3Qix5RUFBa0I7QUFDMUM7QUFDQTtBQUNBLFVBQVUsc0VBQWlCO0FBQzNCLGdCQUFnQjtBQUNoQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwwQ0FBMEMsaURBQVEsa0JBQWtCLFNBQVMsbUVBQXNCLHlCQUF5QjtBQUM1SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMLDhCQUE4QixpREFBUSxrQkFBa0IsU0FBUyxtRUFBc0IseUJBQXlCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQStDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixvQkFBb0IseUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0wsOEJBQThCLGlEQUFRLGtCQUFrQixTQUFTLG1FQUFzQiwyQkFBMkI7QUFDbEg7QUFDQSx5Q0FBeUMsaURBQVEsa0JBQWtCLFNBQVMsbUVBQXNCLHNCQUFzQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUM4QztBQUM5QyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXGJhY2t1cC1jb2Rlc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi8uLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXNzaW9uTWlkZGxld2FyZSB9IGZyb20gXCIuLi8uLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBUV09fRkFDVE9SX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2Vycm9yLWNvZGUubWpzXCI7XG5pbXBvcnQgeyB2ZXJpZnlUd29GYWN0b3IgfSBmcm9tIFwiLi4vdmVyaWZ5LXR3by1mYWN0b3IubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy90d28tZmFjdG9yL2JhY2t1cC1jb2Rlcy9pbmRleC50c1xuZnVuY3Rpb24gZ2VuZXJhdGVCYWNrdXBDb2Rlc0ZuKG9wdGlvbnMpIHtcblx0cmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IG9wdGlvbnM/LmFtb3VudCA/PyAxMCB9KS5maWxsKG51bGwpLm1hcCgoKSA9PiBnZW5lcmF0ZVJhbmRvbVN0cmluZyhvcHRpb25zPy5sZW5ndGggPz8gMTAsIFwiYS16XCIsIFwiMC05XCIsIFwiQS1aXCIpKS5tYXAoKGNvZGUpID0+IGAke2NvZGUuc2xpY2UoMCwgNSl9LSR7Y29kZS5zbGljZSg1KX1gKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQmFja3VwQ29kZXMoc2VjcmV0LCBvcHRpb25zKSB7XG5cdGNvbnN0IGJhY2t1cENvZGVzID0gb3B0aW9ucz8uY3VzdG9tQmFja3VwQ29kZXNHZW5lcmF0ZSA/IG9wdGlvbnMuY3VzdG9tQmFja3VwQ29kZXNHZW5lcmF0ZSgpIDogZ2VuZXJhdGVCYWNrdXBDb2Rlc0ZuKG9wdGlvbnMpO1xuXHRpZiAob3B0aW9ucz8uc3RvcmVCYWNrdXBDb2RlcyA9PT0gXCJlbmNyeXB0ZWRcIikgcmV0dXJuIHtcblx0XHRiYWNrdXBDb2Rlcyxcblx0XHRlbmNyeXB0ZWRCYWNrdXBDb2RlczogYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShiYWNrdXBDb2RlcyksXG5cdFx0XHRrZXk6IHNlY3JldFxuXHRcdH0pXG5cdH07XG5cdGlmICh0eXBlb2Ygb3B0aW9ucz8uc3RvcmVCYWNrdXBDb2RlcyA9PT0gXCJvYmplY3RcIiAmJiBcImVuY3J5cHRcIiBpbiBvcHRpb25zPy5zdG9yZUJhY2t1cENvZGVzKSByZXR1cm4ge1xuXHRcdGJhY2t1cENvZGVzLFxuXHRcdGVuY3J5cHRlZEJhY2t1cENvZGVzOiBhd2FpdCBvcHRpb25zPy5zdG9yZUJhY2t1cENvZGVzLmVuY3J5cHQoSlNPTi5zdHJpbmdpZnkoYmFja3VwQ29kZXMpKVxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGJhY2t1cENvZGVzLFxuXHRcdGVuY3J5cHRlZEJhY2t1cENvZGVzOiBKU09OLnN0cmluZ2lmeShiYWNrdXBDb2Rlcylcblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJhY2t1cENvZGUoZGF0YSwga2V5LCBvcHRpb25zKSB7XG5cdGNvbnN0IGNvZGVzID0gYXdhaXQgZ2V0QmFja3VwQ29kZXMoZGF0YS5iYWNrdXBDb2Rlcywga2V5LCBvcHRpb25zKTtcblx0aWYgKCFjb2RlcykgcmV0dXJuIHtcblx0XHRzdGF0dXM6IGZhbHNlLFxuXHRcdHVwZGF0ZWQ6IG51bGxcblx0fTtcblx0cmV0dXJuIHtcblx0XHRzdGF0dXM6IGNvZGVzLmluY2x1ZGVzKGRhdGEuY29kZSksXG5cdFx0dXBkYXRlZDogY29kZXMuZmlsdGVyKChjb2RlKSA9PiBjb2RlICE9PSBkYXRhLmNvZGUpXG5cdH07XG59XG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrdXBDb2RlcyhiYWNrdXBDb2Rlcywga2V5LCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zPy5zdG9yZUJhY2t1cENvZGVzID09PSBcImVuY3J5cHRlZFwiKSByZXR1cm4gc2FmZUpTT05QYXJzZShhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRrZXksXG5cdFx0ZGF0YTogYmFja3VwQ29kZXNcblx0fSkpO1xuXHRpZiAodHlwZW9mIG9wdGlvbnM/LnN0b3JlQmFja3VwQ29kZXMgPT09IFwib2JqZWN0XCIgJiYgXCJkZWNyeXB0XCIgaW4gb3B0aW9ucz8uc3RvcmVCYWNrdXBDb2RlcykgcmV0dXJuIHNhZmVKU09OUGFyc2UoYXdhaXQgb3B0aW9ucz8uc3RvcmVCYWNrdXBDb2Rlcy5kZWNyeXB0KGJhY2t1cENvZGVzKSk7XG5cdHJldHVybiBzYWZlSlNPTlBhcnNlKGJhY2t1cENvZGVzKTtcbn1cbmNvbnN0IHZlcmlmeUJhY2t1cENvZGVCb2R5U2NoZW1hID0gei5vYmplY3Qoe1xuXHRjb2RlOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogYEEgYmFja3VwIGNvZGUgdG8gdmVyaWZ5LiBFZzogXCIxMjM0NTZcImAgfSksXG5cdGRpc2FibGVTZXNzaW9uOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiSWYgdHJ1ZSwgdGhlIHNlc3Npb24gY29va2llIHdpbGwgbm90IGJlIHNldC5cIiB9KS5vcHRpb25hbCgpLFxuXHR0cnVzdERldmljZTogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklmIHRydWUsIHRoZSBkZXZpY2Ugd2lsbCBiZSB0cnVzdGVkIGZvciAzMCBkYXlzLiBJdCdsbCBiZSByZWZyZXNoZWQgb24gZXZlcnkgc2lnbiBpbiByZXF1ZXN0IHdpdGhpbiB0aGlzIHRpbWUuIEVnOiB0cnVlXCIgfSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCB2aWV3QmFja3VwQ29kZXNCb2R5U2NoZW1hID0gei5vYmplY3QoeyB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogYFRoZSB1c2VyIElEIHRvIHZpZXcgYWxsIGJhY2t1cCBjb2Rlcy4gRWc6IFwidXNlci1pZFwiYCB9KSB9KTtcbmNvbnN0IGdlbmVyYXRlQmFja3VwQ29kZXNCb2R5U2NoZW1hID0gei5vYmplY3QoeyBwYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXJzIHBhc3N3b3JkLlwiIH0pIH0pO1xuY29uc3QgYmFja3VwQ29kZTJmYSA9IChvcHRzKSA9PiB7XG5cdGNvbnN0IHR3b0ZhY3RvclRhYmxlID0gXCJ0d29GYWN0b3JcIjtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJiYWNrdXBfY29kZVwiLFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0dmVyaWZ5QmFja3VwQ29kZTogY3JlYXRlQXV0aEVuZHBvaW50KFwiL3R3by1mYWN0b3IvdmVyaWZ5LWJhY2t1cC1jb2RlXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogdmVyaWZ5QmFja3VwQ29kZUJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgYSBiYWNrdXAgY29kZSBmb3IgdHdvLWZhY3RvciBhdXRoZW50aWNhdGlvblwiLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJCYWNrdXAgY29kZSB2ZXJpZmllZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIGVtYWlsIGFkZHJlc3NcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgZW1haWwgaXMgdmVyaWZpZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2VyJ3MgbmFtZVwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIHByb2ZpbGUgaW1hZ2UgVVJMXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHdvRmFjdG9yRW5hYmxlZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdHdvLWZhY3RvciBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkIGZvciB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSB1c2VyIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwidHdvRmFjdG9yRW5hYmxlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGF1dGhlbnRpY2F0ZWQgdXNlciBvYmplY3Qgd2l0aCB0d28tZmFjdG9yIGRldGFpbHNcIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0c2Vzc2lvbjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW5cIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR1c2VySWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIklEIG9mIHRoZSB1c2VyIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2Vzc2lvblwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSBzZXNzaW9uIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHNlc3Npb24gZXhwaXJlc1wiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInRva2VuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiZXhwaXJlc0F0XCJcblx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgY3VycmVudCBzZXNzaW9uIG9iamVjdCwgaW5jbHVkZWQgdW5sZXNzIGRpc2FibGVTZXNzaW9uIGlzIHRydWVcIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJzZXNzaW9uXCJdXG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBzZXNzaW9uLCB2YWxpZCB9ID0gYXdhaXQgdmVyaWZ5VHdvRmFjdG9yKGN0eCk7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBzZXNzaW9uLnVzZXI7XG5cdFx0XHRcdGNvbnN0IHR3b0ZhY3RvciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IHR3b0ZhY3RvclRhYmxlLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdXNlci5pZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXR3b0ZhY3RvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBUV09fRkFDVE9SX0VSUk9SX0NPREVTLkJBQ0tVUF9DT0RFU19OT1RfRU5BQkxFRCB9KTtcblx0XHRcdFx0Y29uc3QgdmFsaWRhdGUgPSBhd2FpdCB2ZXJpZnlCYWNrdXBDb2RlKHtcblx0XHRcdFx0XHRiYWNrdXBDb2RlczogdHdvRmFjdG9yLmJhY2t1cENvZGVzLFxuXHRcdFx0XHRcdGNvZGU6IGN0eC5ib2R5LmNvZGVcblx0XHRcdFx0fSwgY3R4LmNvbnRleHQuc2VjcmV0LCBvcHRzKTtcblx0XHRcdFx0aWYgKCF2YWxpZGF0ZS5zdGF0dXMpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFRXT19GQUNUT1JfRVJST1JfQ09ERVMuSU5WQUxJRF9CQUNLVVBfQ09ERSB9KTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZEJhY2t1cENvZGVzID0gYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRcdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0XHRcdFx0ZGF0YTogSlNPTi5zdHJpbmdpZnkodmFsaWRhdGUudXBkYXRlZClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiB0d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR1cGRhdGU6IHsgYmFja3VwQ29kZXM6IHVwZGF0ZWRCYWNrdXBDb2RlcyB9LFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB0d29GYWN0b3IuaWRcblx0XHRcdFx0XHR9LCB7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJiYWNrdXBDb2Rlc1wiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHR3b0ZhY3Rvci5iYWNrdXBDb2Rlc1xuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJDT05GTElDVFwiLCB7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHZlcmlmeSBiYWNrdXAgY29kZS4gUGxlYXNlIHRyeSBhZ2Fpbi5cIiB9KTtcblx0XHRcdFx0aWYgKCFjdHguYm9keS5kaXNhYmxlU2Vzc2lvbikgcmV0dXJuIHZhbGlkKGN0eCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0dG9rZW46IHNlc3Npb24uc2Vzc2lvbj8udG9rZW4sXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcilcblx0XHRcdFx0fSk7XG5cdFx0XHR9KSxcblx0XHRcdGdlbmVyYXRlQmFja3VwQ29kZXM6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL2dlbmVyYXRlLWJhY2t1cC1jb2Rlc1wiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IGdlbmVyYXRlQmFja3VwQ29kZXNCb2R5U2NoZW1hLFxuXHRcdFx0XHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJHZW5lcmF0ZSBuZXcgYmFja3VwIGNvZGVzIGZvciB0d28tZmFjdG9yIGF1dGhlbnRpY2F0aW9uXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkJhY2t1cCBjb2RlcyBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgYmFja3VwIGNvZGVzIHdlcmUgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZW51bTogW3RydWVdXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRiYWNrdXBDb2Rlczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQXJyYXkgb2YgZ2VuZXJhdGVkIGJhY2t1cCBjb2RlcyBpbiBwbGFpbiB0ZXh0XCJcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJzdGF0dXNcIiwgXCJiYWNrdXBDb2Rlc1wiXVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXI7XG5cdFx0XHRcdGlmICghdXNlci50d29GYWN0b3JFbmFibGVkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFRXT19GQUNUT1JfRVJST1JfQ09ERVMuVFdPX0ZBQ1RPUl9OT1RfRU5BQkxFRCB9KTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuY2hlY2tQYXNzd29yZCh1c2VyLmlkLCBjdHgpO1xuXHRcdFx0XHRjb25zdCB0d29GYWN0b3IgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdG1vZGVsOiB0d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHVzZXIuaWRcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKCF0d29GYWN0b3IpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUy5UV09fRkFDVE9SX05PVF9FTkFCTEVEIH0pO1xuXHRcdFx0XHRjb25zdCBiYWNrdXBDb2RlcyA9IGF3YWl0IGdlbmVyYXRlQmFja3VwQ29kZXMoY3R4LmNvbnRleHQuc2VjcmV0LCBvcHRzKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci51cGRhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiB0d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR1cGRhdGU6IHsgYmFja3VwQ29kZXM6IGJhY2t1cENvZGVzLmVuY3J5cHRlZEJhY2t1cENvZGVzIH0sXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHR3b0ZhY3Rvci5pZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdFx0XHRiYWNrdXBDb2RlczogYmFja3VwQ29kZXMuYmFja3VwQ29kZXNcblx0XHRcdFx0fSk7XG5cdFx0XHR9KSxcblx0XHRcdHZpZXdCYWNrdXBDb2RlczogY3JlYXRlQXV0aEVuZHBvaW50KHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogdmlld0JhY2t1cENvZGVzQm9keVNjaGVtYVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCB0d29GYWN0b3IgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdG1vZGVsOiB0d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGN0eC5ib2R5LnVzZXJJZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXR3b0ZhY3RvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBUV09fRkFDVE9SX0VSUk9SX0NPREVTLkJBQ0tVUF9DT0RFU19OT1RfRU5BQkxFRCB9KTtcblx0XHRcdFx0Y29uc3QgZGVjcnlwdGVkQmFja3VwQ29kZXMgPSBhd2FpdCBnZXRCYWNrdXBDb2Rlcyh0d29GYWN0b3IuYmFja3VwQ29kZXMsIGN0eC5jb250ZXh0LnNlY3JldCwgb3B0cyk7XG5cdFx0XHRcdGlmICghZGVjcnlwdGVkQmFja3VwQ29kZXMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUy5JTlZBTElEX0JBQ0tVUF9DT0RFIH0pO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdFx0XHRiYWNrdXBDb2RlczogZGVjcnlwdGVkQmFja3VwQ29kZXNcblx0XHRcdFx0fSk7XG5cdFx0XHR9KVxuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgYmFja3VwQ29kZTJmYSwgZ2VuZXJhdGVCYWNrdXBDb2RlcyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/backup-codes/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/client.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   twoFactorClient: () => (/* binding */ twoFactorClient)\n/* harmony export */ });\n//#region src/plugins/two-factor/client.ts\nconst twoFactorClient = (options) => {\n\treturn {\n\t\tid: \"two-factor\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path.startsWith(\"/two-factor/\"),\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}],\n\t\tpathMethods: {\n\t\t\t\"/two-factor/disable\": \"POST\",\n\t\t\t\"/two-factor/enable\": \"POST\",\n\t\t\t\"/two-factor/send-otp\": \"POST\",\n\t\t\t\"/two-factor/generate-backup-codes\": \"POST\",\n\t\t\t\"/two-factor/get-totp-uri\": \"POST\",\n\t\t\t\"/two-factor/verify-totp\": \"POST\",\n\t\t\t\"/two-factor/verify-otp\": \"POST\",\n\t\t\t\"/two-factor/verify-backup-code\": \"POST\"\n\t\t},\n\t\tfetchPlugins: [{\n\t\t\tid: \"two-factor\",\n\t\t\tname: \"two-factor\",\n\t\t\thooks: { async onSuccess(context) {\n\t\t\t\tif (context.data?.twoFactorRedirect) {\n\t\t\t\t\tif (options?.onTwoFactorRedirect) await options.onTwoFactorRedirect();\n\t\t\t\t}\n\t\t\t} }\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3R3by1mYWN0b3IvY2xpZW50LnRzXG5jb25zdCB0d29GYWN0b3JDbGllbnQgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInR3by1mYWN0b3JcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyOiAocGF0aCkgPT4gcGF0aC5zdGFydHNXaXRoKFwiL3R3by1mYWN0b3IvXCIpLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XSxcblx0XHRwYXRoTWV0aG9kczoge1xuXHRcdFx0XCIvdHdvLWZhY3Rvci9kaXNhYmxlXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvdHdvLWZhY3Rvci9lbmFibGVcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3NlbmQtb3RwXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvdHdvLWZhY3Rvci9nZW5lcmF0ZS1iYWNrdXAtY29kZXNcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL2dldC10b3RwLXVyaVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL3R3by1mYWN0b3IvdmVyaWZ5LXRvdHBcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3ZlcmlmeS1vdHBcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3ZlcmlmeS1iYWNrdXAtY29kZVwiOiBcIlBPU1RcIlxuXHRcdH0sXG5cdFx0ZmV0Y2hQbHVnaW5zOiBbe1xuXHRcdFx0aWQ6IFwidHdvLWZhY3RvclwiLFxuXHRcdFx0bmFtZTogXCJ0d28tZmFjdG9yXCIsXG5cdFx0XHRob29rczogeyBhc3luYyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdFx0XHRpZiAoY29udGV4dC5kYXRhPy50d29GYWN0b3JSZWRpcmVjdCkge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zPy5vblR3b0ZhY3RvclJlZGlyZWN0KSBhd2FpdCBvcHRpb25zLm9uVHdvRmFjdG9yUmVkaXJlY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSB9XG5cdFx0fV1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdHdvRmFjdG9yQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/constant.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/constant.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TRUST_DEVICE_COOKIE_MAX_AGE: () => (/* binding */ TRUST_DEVICE_COOKIE_MAX_AGE),\n/* harmony export */   TRUST_DEVICE_COOKIE_NAME: () => (/* binding */ TRUST_DEVICE_COOKIE_NAME),\n/* harmony export */   TWO_FACTOR_COOKIE_NAME: () => (/* binding */ TWO_FACTOR_COOKIE_NAME)\n/* harmony export */ });\n//#region src/plugins/two-factor/constant.ts\nconst TWO_FACTOR_COOKIE_NAME = \"two_factor\";\nconst TRUST_DEVICE_COOKIE_NAME = \"trust_device\";\nconst TRUST_DEVICE_COOKIE_MAX_AGE = 720 * 60 * 60;\n\n//#endregion\n\n//# sourceMappingURL=constant.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvY29uc3RhbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lGO0FBQ3pGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdHdvLWZhY3RvclxcY29uc3RhbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy90d28tZmFjdG9yL2NvbnN0YW50LnRzXG5jb25zdCBUV09fRkFDVE9SX0NPT0tJRV9OQU1FID0gXCJ0d29fZmFjdG9yXCI7XG5jb25zdCBUUlVTVF9ERVZJQ0VfQ09PS0lFX05BTUUgPSBcInRydXN0X2RldmljZVwiO1xuY29uc3QgVFJVU1RfREVWSUNFX0NPT0tJRV9NQVhfQUdFID0gNzIwICogNjAgKiA2MDtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBUUlVTVF9ERVZJQ0VfQ09PS0lFX01BWF9BR0UsIFRSVVNUX0RFVklDRV9DT09LSUVfTkFNRSwgVFdPX0ZBQ1RPUl9DT09LSUVfTkFNRSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/constant.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TWO_FACTOR_ERROR_CODES: () => (/* binding */ TWO_FACTOR_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/two-factor/error-code.ts\nconst TWO_FACTOR_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tOTP_NOT_ENABLED: \"OTP not enabled\",\n\tOTP_HAS_EXPIRED: \"OTP has expired\",\n\tTOTP_NOT_ENABLED: \"TOTP not enabled\",\n\tTWO_FACTOR_NOT_ENABLED: \"Two factor isn't enabled\",\n\tBACKUP_CODES_NOT_ENABLED: \"Backup codes aren't enabled\",\n\tINVALID_BACKUP_CODE: \"Invalid backup code\",\n\tINVALID_CODE: \"Invalid code\",\n\tTOO_MANY_ATTEMPTS_REQUEST_NEW_CODE: \"Too many attempts. Please request a new code.\",\n\tINVALID_TWO_FACTOR_COOKIE: \"Invalid two factor cookie\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-code.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvZXJyb3ItY29kZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7O0FBRTNEO0FBQ0EsK0JBQStCLHlFQUFnQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ2tDO0FBQ2xDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdHdvLWZhY3RvclxcZXJyb3ItY29kZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvdHdvLWZhY3Rvci9lcnJvci1jb2RlLnRzXG5jb25zdCBUV09fRkFDVE9SX0VSUk9SX0NPREVTID0gZGVmaW5lRXJyb3JDb2Rlcyh7XG5cdE9UUF9OT1RfRU5BQkxFRDogXCJPVFAgbm90IGVuYWJsZWRcIixcblx0T1RQX0hBU19FWFBJUkVEOiBcIk9UUCBoYXMgZXhwaXJlZFwiLFxuXHRUT1RQX05PVF9FTkFCTEVEOiBcIlRPVFAgbm90IGVuYWJsZWRcIixcblx0VFdPX0ZBQ1RPUl9OT1RfRU5BQkxFRDogXCJUd28gZmFjdG9yIGlzbid0IGVuYWJsZWRcIixcblx0QkFDS1VQX0NPREVTX05PVF9FTkFCTEVEOiBcIkJhY2t1cCBjb2RlcyBhcmVuJ3QgZW5hYmxlZFwiLFxuXHRJTlZBTElEX0JBQ0tVUF9DT0RFOiBcIkludmFsaWQgYmFja3VwIGNvZGVcIixcblx0SU5WQUxJRF9DT0RFOiBcIkludmFsaWQgY29kZVwiLFxuXHRUT09fTUFOWV9BVFRFTVBUU19SRVFVRVNUX05FV19DT0RFOiBcIlRvbyBtYW55IGF0dGVtcHRzLiBQbGVhc2UgcmVxdWVzdCBhIG5ldyBjb2RlLlwiLFxuXHRJTlZBTElEX1RXT19GQUNUT1JfQ09PS0lFOiBcIkludmFsaWQgdHdvIGZhY3RvciBjb29raWVcIlxufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3ItY29kZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/index.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/index.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TWO_FACTOR_ERROR_CODES: () => (/* reexport safe */ _error_code_mjs__WEBPACK_IMPORTED_MODULE_8__.TWO_FACTOR_ERROR_CODES),\n/* harmony export */   twoFactor: () => (/* binding */ twoFactor),\n/* harmony export */   twoFactorClient: () => (/* reexport safe */ _client_mjs__WEBPACK_IMPORTED_MODULE_7__.twoFactorClient)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _client_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./client.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\");\n/* harmony import */ var _error_code_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _constant_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./constant.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/constant.mjs\");\n/* harmony import */ var _backup_codes_index_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./backup-codes/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/backup-codes/index.mjs\");\n/* harmony import */ var _otp_index_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./otp/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/otp/index.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/schema.mjs\");\n/* harmony import */ var _totp_index_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./totp/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/totp/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n/* harmony import */ var _better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/utils/otp */ \"(rsc)/./node_modules/@better-auth/utils/dist/otp.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/two-factor/index.ts\nconst enableTwoFactorBodySchema = zod__WEBPACK_IMPORTED_MODULE_19__.object({\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_19__.string().meta({ description: \"User password\" }),\n\tissuer: zod__WEBPACK_IMPORTED_MODULE_19__.string().meta({ description: \"Custom issuer for the TOTP URI\" }).optional()\n});\nconst disableTwoFactorBodySchema = zod__WEBPACK_IMPORTED_MODULE_19__.object({ password: zod__WEBPACK_IMPORTED_MODULE_19__.string().meta({ description: \"User password\" }) });\nconst twoFactor = (options) => {\n\tconst opts = { twoFactorTable: \"twoFactor\" };\n\tconst trustDeviceMaxAge = options?.trustDeviceMaxAge ?? _constant_mjs__WEBPACK_IMPORTED_MODULE_9__.TRUST_DEVICE_COOKIE_MAX_AGE;\n\tconst backupCodeOptions = {\n\t\tstoreBackupCodes: \"encrypted\",\n\t\t...options?.backupCodeOptions\n\t};\n\tconst totp = (0,_totp_index_mjs__WEBPACK_IMPORTED_MODULE_13__.totp2fa)(options?.totpOptions);\n\tconst backupCode = (0,_backup_codes_index_mjs__WEBPACK_IMPORTED_MODULE_10__.backupCode2fa)(backupCodeOptions);\n\tconst otp = (0,_otp_index_mjs__WEBPACK_IMPORTED_MODULE_11__.otp2fa)(options?.otpOptions);\n\treturn {\n\t\tid: \"two-factor\",\n\t\tendpoints: {\n\t\t\t...totp.endpoints,\n\t\t\t...otp.endpoints,\n\t\t\t...backupCode.endpoints,\n\t\t\tenableTwoFactor: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_16__.createAuthEndpoint)(\"/two-factor/enable\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: enableTwoFactorBodySchema,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Enable two factor authentication\",\n\t\t\t\t\tdescription: \"Use this endpoint to enable two factor authentication. This will generate a TOTP URI and backup codes. Once the user verifies the TOTP URI, the two factor authentication will be enabled.\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttotpURI: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"TOTP URI\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tbackupCodes: {\n\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\titems: { type: \"string\" },\n\t\t\t\t\t\t\t\t\tdescription: \"Backup codes\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst user = ctx.context.session.user;\n\t\t\t\tconst { password, issuer } = ctx.body;\n\t\t\t\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\t\t\t\tpassword,\n\t\t\t\t\tuserId: user.id\n\t\t\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_15__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\t\t\tconst secret = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32);\n\t\t\t\tconst encryptedSecret = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\tdata: secret\n\t\t\t\t});\n\t\t\t\tconst backupCodes = await (0,_backup_codes_index_mjs__WEBPACK_IMPORTED_MODULE_10__.generateBackupCodes)(ctx.context.secret, backupCodeOptions);\n\t\t\t\tif (options?.skipVerificationOnEnable) {\n\t\t\t\t\tconst updatedUser = await ctx.context.internalAdapter.updateUser(user.id, { twoFactorEnabled: true });\n\t\t\t\t\t/**\n\t\t\t\t\t* Update the session cookie with the new user data\n\t\t\t\t\t*/\n\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\t\t\t\tsession: await ctx.context.internalAdapter.createSession(updatedUser.id, false, ctx.context.session.session),\n\t\t\t\t\t\tuser: updatedUser\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteSession(ctx.context.session.session.token);\n\t\t\t\t}\n\t\t\t\tawait ctx.context.adapter.deleteMany({\n\t\t\t\t\tmodel: opts.twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tawait ctx.context.adapter.create({\n\t\t\t\t\tmodel: opts.twoFactorTable,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsecret: encryptedSecret,\n\t\t\t\t\t\tbackupCodes: backupCodes.encryptedBackupCodes,\n\t\t\t\t\t\tuserId: user.id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst totpURI = (0,_better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_18__.createOTP)(secret, {\n\t\t\t\t\tdigits: options?.totpOptions?.digits || 6,\n\t\t\t\t\tperiod: options?.totpOptions?.period\n\t\t\t\t}).url(issuer || options?.issuer || ctx.context.appName, user.email);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\ttotpURI,\n\t\t\t\t\tbackupCodes: backupCodes.backupCodes\n\t\t\t\t});\n\t\t\t}),\n\t\t\tdisableTwoFactor: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_16__.createAuthEndpoint)(\"/two-factor/disable\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: disableTwoFactorBodySchema,\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Disable two factor authentication\",\n\t\t\t\t\tdescription: \"Use this endpoint to disable two factor authentication.\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst user = ctx.context.session.user;\n\t\t\t\tconst { password } = ctx.body;\n\t\t\t\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\t\t\t\tpassword,\n\t\t\t\t\tuserId: user.id\n\t\t\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_15__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\t\t\tconst updatedUser = await ctx.context.internalAdapter.updateUser(user.id, { twoFactorEnabled: false });\n\t\t\t\tawait ctx.context.adapter.delete({\n\t\t\t\t\tmodel: opts.twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: updatedUser.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\t/**\n\t\t\t\t* Update the session cookie with the new user data\n\t\t\t\t*/\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: await ctx.context.internalAdapter.createSession(updatedUser.id, false, ctx.context.session.session),\n\t\t\t\t\tuser: updatedUser\n\t\t\t\t});\n\t\t\t\tawait ctx.context.internalAdapter.deleteSession(ctx.context.session.session.token);\n\t\t\t\tconst disableTrustCookie = ctx.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_9__.TRUST_DEVICE_COOKIE_NAME, { maxAge: trustDeviceMaxAge });\n\t\t\t\tconst disableTrustValue = await ctx.getSignedCookie(disableTrustCookie.name, ctx.context.secret);\n\t\t\t\tif (disableTrustValue) {\n\t\t\t\t\tconst [, trustId] = disableTrustValue.split(\"!\");\n\t\t\t\t\tif (trustId) await ctx.context.internalAdapter.deleteVerificationByIdentifier(trustId);\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.expireCookie)(ctx, disableTrustCookie);\n\t\t\t\t}\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t})\n\t\t},\n\t\toptions,\n\t\thooks: { after: [{\n\t\t\tmatcher(context) {\n\t\t\t\treturn context.path === \"/sign-in/email\" || context.path === \"/sign-in/username\" || context.path === \"/sign-in/phone-number\";\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_16__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst data = ctx.context.newSession;\n\t\t\t\tif (!data) return;\n\t\t\t\tif (!data?.user.twoFactorEnabled) return;\n\t\t\t\tconst trustDeviceCookieAttrs = ctx.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_9__.TRUST_DEVICE_COOKIE_NAME, { maxAge: trustDeviceMaxAge });\n\t\t\t\tconst trustDeviceCookie = await ctx.getSignedCookie(trustDeviceCookieAttrs.name, ctx.context.secret);\n\t\t\t\tif (trustDeviceCookie) {\n\t\t\t\t\tconst [token, trustIdentifier] = trustDeviceCookie.split(\"!\");\n\t\t\t\t\tif (token && trustIdentifier) {\n\t\t\t\t\t\tif (token === await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_17__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, `${data.user.id}!${trustIdentifier}`)) {\n\t\t\t\t\t\t\tconst verificationRecord = await ctx.context.internalAdapter.findVerificationValue(trustIdentifier);\n\t\t\t\t\t\t\tif (verificationRecord && verificationRecord.value === data.user.id && verificationRecord.expiresAt > /* @__PURE__ */ new Date()) {\n\t\t\t\t\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(verificationRecord.id);\n\t\t\t\t\t\t\t\tconst newTrustIdentifier = `trust-device-${(0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32)}`;\n\t\t\t\t\t\t\t\tconst newToken = await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_17__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, `${data.user.id}!${newTrustIdentifier}`);\n\t\t\t\t\t\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\t\t\t\t\t\tvalue: data.user.id,\n\t\t\t\t\t\t\t\t\tidentifier: newTrustIdentifier,\n\t\t\t\t\t\t\t\t\texpiresAt: new Date(Date.now() + trustDeviceMaxAge * 1e3)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconst newTrustDeviceCookie = ctx.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_9__.TRUST_DEVICE_COOKIE_NAME, { maxAge: trustDeviceMaxAge });\n\t\t\t\t\t\t\t\tawait ctx.setSignedCookie(newTrustDeviceCookie.name, `${newToken}!${newTrustIdentifier}`, ctx.context.secret, trustDeviceCookieAttrs.attributes);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.expireCookie)(ctx, trustDeviceCookieAttrs);\n\t\t\t\t}\n\t\t\t\t/**\n\t\t\t\t* remove the session cookie. It's set by the sign in credential\n\t\t\t\t*/\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.deleteSessionCookie)(ctx, true);\n\t\t\t\tawait ctx.context.internalAdapter.deleteSession(data.session.token);\n\t\t\t\tconst maxAge = options?.twoFactorCookieMaxAge ?? 600;\n\t\t\t\tconst twoFactorCookie = ctx.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_9__.TWO_FACTOR_COOKIE_NAME, { maxAge });\n\t\t\t\tconst identifier = `2fa-${(0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(20)}`;\n\t\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\t\tvalue: data.user.id,\n\t\t\t\t\tidentifier,\n\t\t\t\t\texpiresAt: new Date(Date.now() + maxAge * 1e3)\n\t\t\t\t});\n\t\t\t\tawait ctx.setSignedCookie(twoFactorCookie.name, identifier, ctx.context.secret, twoFactorCookie.attributes);\n\t\t\t\treturn ctx.json({ twoFactorRedirect: true });\n\t\t\t})\n\t\t}] },\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)(_schema_mjs__WEBPACK_IMPORTED_MODULE_12__.schema, options?.schema),\n\t\trateLimit: [{\n\t\t\tpathMatcher(path) {\n\t\t\t\treturn path.startsWith(\"/two-factor/\");\n\t\t\t},\n\t\t\twindow: 10,\n\t\t\tmax: 3\n\t\t}],\n\t\t$ERROR_CODES: _error_code_mjs__WEBPACK_IMPORTED_MODULE_8__.TWO_FACTOR_ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ2E7QUFDTDtBQUNvQztBQUM3QjtBQUNMO0FBQy9CO0FBQ2tCO0FBQ1c7QUFDcUQ7QUFDakM7QUFDckM7QUFDSDtBQUNLO0FBQ2dCO0FBQ3BCO0FBQ2Q7QUFDd0Q7QUFDNUI7QUFDRjs7QUFFbkQ7QUFDQSxrQ0FBa0Msd0NBQVE7QUFDMUMsV0FBVyx3Q0FBUSxVQUFVLDhCQUE4QjtBQUMzRCxTQUFTLHdDQUFRLFVBQVUsK0NBQStDO0FBQzFFLENBQUM7QUFDRCxtQ0FBbUMsd0NBQVEsR0FBRyxVQUFVLHdDQUFRLFVBQVUsOEJBQThCLEdBQUc7QUFDM0c7QUFDQSxnQkFBZ0I7QUFDaEIseURBQXlELHNFQUEyQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseURBQU87QUFDckIsb0JBQW9CLHVFQUFhO0FBQ2pDLGFBQWEsdURBQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBFQUFrQjtBQUN0QztBQUNBO0FBQ0EsVUFBVSxzRUFBaUI7QUFDM0IsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsWUFBWSxtQkFBbUI7QUFDL0IsZUFBZSxxRUFBZ0I7QUFDL0I7QUFDQTtBQUNBLEtBQUssYUFBYSxrREFBUSxrQkFBa0IsU0FBUyxzRUFBZ0IsbUJBQW1CO0FBQ3hGLG1CQUFtQix3RUFBb0I7QUFDdkMsa0NBQWtDLG1FQUFnQjtBQUNsRDtBQUNBO0FBQ0EsS0FBSztBQUNMLDhCQUE4Qiw2RUFBbUI7QUFDakQ7QUFDQSxpRkFBaUYsd0JBQXdCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLFdBQVcsb0VBQWdCO0FBQzNCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLG9CQUFvQixrRUFBUztBQUM3QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0oscUJBQXFCLDBFQUFrQjtBQUN2QztBQUNBO0FBQ0EsVUFBVSxzRUFBaUI7QUFDM0IsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0EscUJBQXFCLFVBQVU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCLGVBQWUscUVBQWdCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLLGFBQWEsa0RBQVEsa0JBQWtCLFNBQVMsc0VBQWdCLG1CQUFtQjtBQUN4RixnRkFBZ0YseUJBQXlCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFVBQVUsb0VBQWdCO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0REFBNEQsbUVBQXdCLElBQUksMkJBQTJCO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnRUFBWTtBQUNqQjtBQUNBLHNCQUFzQixjQUFjO0FBQ3BDLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLElBQUk7QUFDSixZQUFZLDRFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsbUVBQXdCLElBQUksMkJBQTJCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG9FQUFVLDBEQUEwRCxhQUFhLEdBQUcsZ0JBQWdCO0FBQzlIO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx3RUFBb0IsS0FBSztBQUM1RSwrQkFBK0Isb0VBQVUsMERBQTBELGFBQWEsR0FBRyxtQkFBbUI7QUFDdEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Qsa0VBQWtFLG1FQUF3QixJQUFJLDJCQUEyQjtBQUN6SCxnRUFBZ0UsU0FBUyxHQUFHLG1CQUFtQjtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVFQUFtQjtBQUN2QjtBQUNBO0FBQ0EseURBQXlELGlFQUFzQixJQUFJLFFBQVE7QUFDM0YsOEJBQThCLHdFQUFvQixLQUFLO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esc0JBQXNCLHlCQUF5QjtBQUMvQyxJQUFJO0FBQ0osR0FBRyxHQUFHO0FBQ04sVUFBVSwyREFBVyxDQUFDLGdEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILGdCQUFnQixtRUFBc0I7QUFDdEM7QUFDQTs7QUFFQTtBQUM4RDtBQUM5RCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtZXJnZVNjaGVtYSB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBkZWxldGVTZXNzaW9uQ29va2llLCBleHBpcmVDb29raWUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4uLy4uL2FwaS9yb3V0ZXMvc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlUGFzc3dvcmQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0d29GYWN0b3JDbGllbnQgfSBmcm9tIFwiLi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBUV09fRkFDVE9SX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZS5tanNcIjtcbmltcG9ydCB7IFRSVVNUX0RFVklDRV9DT09LSUVfTUFYX0FHRSwgVFJVU1RfREVWSUNFX0NPT0tJRV9OQU1FLCBUV09fRkFDVE9SX0NPT0tJRV9OQU1FIH0gZnJvbSBcIi4vY29uc3RhbnQubWpzXCI7XG5pbXBvcnQgeyBiYWNrdXBDb2RlMmZhLCBnZW5lcmF0ZUJhY2t1cENvZGVzIH0gZnJvbSBcIi4vYmFja3VwLWNvZGVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgb3RwMmZhIH0gZnJvbSBcIi4vb3RwL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgdG90cDJmYSB9IGZyb20gXCIuL3RvdHAvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlSE1BQyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaG1hY1wiO1xuaW1wb3J0IHsgY3JlYXRlT1RQIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9vdHBcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3R3by1mYWN0b3IvaW5kZXgudHNcbmNvbnN0IGVuYWJsZVR3b0ZhY3RvckJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHBhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJVc2VyIHBhc3N3b3JkXCIgfSksXG5cdGlzc3Vlcjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQ3VzdG9tIGlzc3VlciBmb3IgdGhlIFRPVFAgVVJJXCIgfSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBkaXNhYmxlVHdvRmFjdG9yQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlVzZXIgcGFzc3dvcmRcIiB9KSB9KTtcbmNvbnN0IHR3b0ZhY3RvciA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IG9wdHMgPSB7IHR3b0ZhY3RvclRhYmxlOiBcInR3b0ZhY3RvclwiIH07XG5cdGNvbnN0IHRydXN0RGV2aWNlTWF4QWdlID0gb3B0aW9ucz8udHJ1c3REZXZpY2VNYXhBZ2UgPz8gVFJVU1RfREVWSUNFX0NPT0tJRV9NQVhfQUdFO1xuXHRjb25zdCBiYWNrdXBDb2RlT3B0aW9ucyA9IHtcblx0XHRzdG9yZUJhY2t1cENvZGVzOiBcImVuY3J5cHRlZFwiLFxuXHRcdC4uLm9wdGlvbnM/LmJhY2t1cENvZGVPcHRpb25zXG5cdH07XG5cdGNvbnN0IHRvdHAgPSB0b3RwMmZhKG9wdGlvbnM/LnRvdHBPcHRpb25zKTtcblx0Y29uc3QgYmFja3VwQ29kZSA9IGJhY2t1cENvZGUyZmEoYmFja3VwQ29kZU9wdGlvbnMpO1xuXHRjb25zdCBvdHAgPSBvdHAyZmEob3B0aW9ucz8ub3RwT3B0aW9ucyk7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidHdvLWZhY3RvclwiLFxuXHRcdGVuZHBvaW50czoge1xuXHRcdFx0Li4udG90cC5lbmRwb2ludHMsXG5cdFx0XHQuLi5vdHAuZW5kcG9pbnRzLFxuXHRcdFx0Li4uYmFja3VwQ29kZS5lbmRwb2ludHMsXG5cdFx0XHRlbmFibGVUd29GYWN0b3I6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL2VuYWJsZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IGVuYWJsZVR3b0ZhY3RvckJvZHlTY2hlbWEsXG5cdFx0XHRcdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRcdHN1bW1hcnk6IFwiRW5hYmxlIHR3byBmYWN0b3IgYXV0aGVudGljYXRpb25cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2UgdGhpcyBlbmRwb2ludCB0byBlbmFibGUgdHdvIGZhY3RvciBhdXRoZW50aWNhdGlvbi4gVGhpcyB3aWxsIGdlbmVyYXRlIGEgVE9UUCBVUkkgYW5kIGJhY2t1cCBjb2Rlcy4gT25jZSB0aGUgdXNlciB2ZXJpZmllcyB0aGUgVE9UUCBVUkksIHRoZSB0d28gZmFjdG9yIGF1dGhlbnRpY2F0aW9uIHdpbGwgYmUgZW5hYmxlZC5cIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsIHJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0dG90cFVSSToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRPVFAgVVJJXCJcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGJhY2t1cENvZGVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVtczogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJCYWNrdXAgY29kZXNcIlxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9XG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXI7XG5cdFx0XHRcdGNvbnN0IHsgcGFzc3dvcmQsIGlzc3VlciB9ID0gY3R4LmJvZHk7XG5cdFx0XHRcdGlmICghYXdhaXQgdmFsaWRhdGVQYXNzd29yZChjdHgsIHtcblx0XHRcdFx0XHRwYXNzd29yZCxcblx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuaWRcblx0XHRcdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRcdFx0XHRjb25zdCBzZWNyZXQgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMik7XG5cdFx0XHRcdGNvbnN0IGVuY3J5cHRlZFNlY3JldCA9IGF3YWl0IHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdFx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRcdGRhdGE6IHNlY3JldFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgYmFja3VwQ29kZXMgPSBhd2FpdCBnZW5lcmF0ZUJhY2t1cENvZGVzKGN0eC5jb250ZXh0LnNlY3JldCwgYmFja3VwQ29kZU9wdGlvbnMpO1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uc2tpcFZlcmlmaWNhdGlvbk9uRW5hYmxlKSB7XG5cdFx0XHRcdFx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcih1c2VyLmlkLCB7IHR3b0ZhY3RvckVuYWJsZWQ6IHRydWUgfSk7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBVcGRhdGUgdGhlIHNlc3Npb24gY29va2llIHdpdGggdGhlIG5ldyB1c2VyIGRhdGFcblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1cGRhdGVkVXNlci5pZCwgZmFsc2UsIGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbiksXG5cdFx0XHRcdFx0XHR1c2VyOiB1cGRhdGVkVXNlclxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbi50b2tlbik7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5kZWxldGVNYW55KHtcblx0XHRcdFx0XHRtb2RlbDogb3B0cy50d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHVzZXIuaWRcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5jcmVhdGUoe1xuXHRcdFx0XHRcdG1vZGVsOiBvcHRzLnR3b0ZhY3RvclRhYmxlLFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHNlY3JldDogZW5jcnlwdGVkU2VjcmV0LFxuXHRcdFx0XHRcdFx0YmFja3VwQ29kZXM6IGJhY2t1cENvZGVzLmVuY3J5cHRlZEJhY2t1cENvZGVzLFxuXHRcdFx0XHRcdFx0dXNlcklkOiB1c2VyLmlkXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgdG90cFVSSSA9IGNyZWF0ZU9UUChzZWNyZXQsIHtcblx0XHRcdFx0XHRkaWdpdHM6IG9wdGlvbnM/LnRvdHBPcHRpb25zPy5kaWdpdHMgfHwgNixcblx0XHRcdFx0XHRwZXJpb2Q6IG9wdGlvbnM/LnRvdHBPcHRpb25zPy5wZXJpb2Rcblx0XHRcdFx0fSkudXJsKGlzc3VlciB8fCBvcHRpb25zPy5pc3N1ZXIgfHwgY3R4LmNvbnRleHQuYXBwTmFtZSwgdXNlci5lbWFpbCk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0dG90cFVSSSxcblx0XHRcdFx0XHRiYWNrdXBDb2RlczogYmFja3VwQ29kZXMuYmFja3VwQ29kZXNcblx0XHRcdFx0fSk7XG5cdFx0XHR9KSxcblx0XHRcdGRpc2FibGVUd29GYWN0b3I6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL2Rpc2FibGVcIiwge1xuXHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRib2R5OiBkaXNhYmxlVHdvRmFjdG9yQm9keVNjaGVtYSxcblx0XHRcdFx0dXNlOiBbc2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRcdFx0XHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0XHRcdFx0c3VtbWFyeTogXCJEaXNhYmxlIHR3byBmYWN0b3IgYXV0aGVudGljYXRpb25cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJVc2UgdGhpcyBlbmRwb2ludCB0byBkaXNhYmxlIHR3byBmYWN0b3IgYXV0aGVudGljYXRpb24uXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc2Z1bCByZXNwb25zZVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IGN0eC5jb250ZXh0LnNlc3Npb24udXNlcjtcblx0XHRcdFx0Y29uc3QgeyBwYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdFx0XHRcdGlmICghYXdhaXQgdmFsaWRhdGVQYXNzd29yZChjdHgsIHtcblx0XHRcdFx0XHRwYXNzd29yZCxcblx0XHRcdFx0XHR1c2VySWQ6IHVzZXIuaWRcblx0XHRcdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKHVzZXIuaWQsIHsgdHdvRmFjdG9yRW5hYmxlZDogZmFsc2UgfSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZGVsZXRlKHtcblx0XHRcdFx0XHRtb2RlbDogb3B0cy50d29GYWN0b3JUYWJsZSxcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHVwZGF0ZWRVc2VyLmlkXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8qKlxuXHRcdFx0XHQqIFVwZGF0ZSB0aGUgc2Vzc2lvbiBjb29raWUgd2l0aCB0aGUgbmV3IHVzZXIgZGF0YVxuXHRcdFx0XHQqL1xuXHRcdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdHNlc3Npb246IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVwZGF0ZWRVc2VyLmlkLCBmYWxzZSwgY3R4LmNvbnRleHQuc2Vzc2lvbi5zZXNzaW9uKSxcblx0XHRcdFx0XHR1c2VyOiB1cGRhdGVkVXNlclxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb24oY3R4LmNvbnRleHQuc2Vzc2lvbi5zZXNzaW9uLnRva2VuKTtcblx0XHRcdFx0Y29uc3QgZGlzYWJsZVRydXN0Q29va2llID0gY3R4LmNvbnRleHQuY3JlYXRlQXV0aENvb2tpZShUUlVTVF9ERVZJQ0VfQ09PS0lFX05BTUUsIHsgbWF4QWdlOiB0cnVzdERldmljZU1heEFnZSB9KTtcblx0XHRcdFx0Y29uc3QgZGlzYWJsZVRydXN0VmFsdWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGRpc2FibGVUcnVzdENvb2tpZS5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdFx0XHRpZiAoZGlzYWJsZVRydXN0VmFsdWUpIHtcblx0XHRcdFx0XHRjb25zdCBbLCB0cnVzdElkXSA9IGRpc2FibGVUcnVzdFZhbHVlLnNwbGl0KFwiIVwiKTtcblx0XHRcdFx0XHRpZiAodHJ1c3RJZCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvbkJ5SWRlbnRpZmllcih0cnVzdElkKTtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4LCBkaXNhYmxlVHJ1c3RDb29raWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHRcdH0pXG5cdFx0fSxcblx0XHRvcHRpb25zLFxuXHRcdGhvb2tzOiB7IGFmdGVyOiBbe1xuXHRcdFx0bWF0Y2hlcihjb250ZXh0KSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LnBhdGggPT09IFwiL3NpZ24taW4vZW1haWxcIiB8fCBjb250ZXh0LnBhdGggPT09IFwiL3NpZ24taW4vdXNlcm5hbWVcIiB8fCBjb250ZXh0LnBhdGggPT09IFwiL3NpZ24taW4vcGhvbmUtbnVtYmVyXCI7XG5cdFx0XHR9LFxuXHRcdFx0aGFuZGxlcjogY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRjb25zdCBkYXRhID0gY3R4LmNvbnRleHQubmV3U2Vzc2lvbjtcblx0XHRcdFx0aWYgKCFkYXRhKSByZXR1cm47XG5cdFx0XHRcdGlmICghZGF0YT8udXNlci50d29GYWN0b3JFbmFibGVkKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHRydXN0RGV2aWNlQ29va2llQXR0cnMgPSBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFRSVVNUX0RFVklDRV9DT09LSUVfTkFNRSwgeyBtYXhBZ2U6IHRydXN0RGV2aWNlTWF4QWdlIH0pO1xuXHRcdFx0XHRjb25zdCB0cnVzdERldmljZUNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUodHJ1c3REZXZpY2VDb29raWVBdHRycy5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdFx0XHRpZiAodHJ1c3REZXZpY2VDb29raWUpIHtcblx0XHRcdFx0XHRjb25zdCBbdG9rZW4sIHRydXN0SWRlbnRpZmllcl0gPSB0cnVzdERldmljZUNvb2tpZS5zcGxpdChcIiFcIik7XG5cdFx0XHRcdFx0aWYgKHRva2VuICYmIHRydXN0SWRlbnRpZmllcikge1xuXHRcdFx0XHRcdFx0aWYgKHRva2VuID09PSBhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnNpZ24oY3R4LmNvbnRleHQuc2VjcmV0LCBgJHtkYXRhLnVzZXIuaWR9ISR7dHJ1c3RJZGVudGlmaWVyfWApKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZlcmlmaWNhdGlvblJlY29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUodHJ1c3RJZGVudGlmaWVyKTtcblx0XHRcdFx0XHRcdFx0aWYgKHZlcmlmaWNhdGlvblJlY29yZCAmJiB2ZXJpZmljYXRpb25SZWNvcmQudmFsdWUgPT09IGRhdGEudXNlci5pZCAmJiB2ZXJpZmljYXRpb25SZWNvcmQuZXhwaXJlc0F0ID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uUmVjb3JkLmlkKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdUcnVzdElkZW50aWZpZXIgPSBgdHJ1c3QtZGV2aWNlLSR7Z2VuZXJhdGVSYW5kb21TdHJpbmcoMzIpfWA7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3VG9rZW4gPSBhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnNpZ24oY3R4LmNvbnRleHQuc2VjcmV0LCBgJHtkYXRhLnVzZXIuaWR9ISR7bmV3VHJ1c3RJZGVudGlmaWVyfWApO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogZGF0YS51c2VyLmlkLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWRlbnRpZmllcjogbmV3VHJ1c3RJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgdHJ1c3REZXZpY2VNYXhBZ2UgKiAxZTMpXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3VHJ1c3REZXZpY2VDb29raWUgPSBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFRSVVNUX0RFVklDRV9DT09LSUVfTkFNRSwgeyBtYXhBZ2U6IHRydXN0RGV2aWNlTWF4QWdlIH0pO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUobmV3VHJ1c3REZXZpY2VDb29raWUubmFtZSwgYCR7bmV3VG9rZW59ISR7bmV3VHJ1c3RJZGVudGlmaWVyfWAsIGN0eC5jb250ZXh0LnNlY3JldCwgdHJ1c3REZXZpY2VDb29raWVBdHRycy5hdHRyaWJ1dGVzKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZXhwaXJlQ29va2llKGN0eCwgdHJ1c3REZXZpY2VDb29raWVBdHRycyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0LyoqXG5cdFx0XHRcdCogcmVtb3ZlIHRoZSBzZXNzaW9uIGNvb2tpZS4gSXQncyBzZXQgYnkgdGhlIHNpZ24gaW4gY3JlZGVudGlhbFxuXHRcdFx0XHQqL1xuXHRcdFx0XHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCwgdHJ1ZSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKGRhdGEuc2Vzc2lvbi50b2tlbik7XG5cdFx0XHRcdGNvbnN0IG1heEFnZSA9IG9wdGlvbnM/LnR3b0ZhY3RvckNvb2tpZU1heEFnZSA/PyA2MDA7XG5cdFx0XHRcdGNvbnN0IHR3b0ZhY3RvckNvb2tpZSA9IGN0eC5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoVFdPX0ZBQ1RPUl9DT09LSUVfTkFNRSwgeyBtYXhBZ2UgfSk7XG5cdFx0XHRcdGNvbnN0IGlkZW50aWZpZXIgPSBgMmZhLSR7Z2VuZXJhdGVSYW5kb21TdHJpbmcoMjApfWA7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHRcdFx0dmFsdWU6IGRhdGEudXNlci5pZCxcblx0XHRcdFx0XHRpZGVudGlmaWVyLFxuXHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIG1heEFnZSAqIDFlMylcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5zZXRTaWduZWRDb29raWUodHdvRmFjdG9yQ29va2llLm5hbWUsIGlkZW50aWZpZXIsIGN0eC5jb250ZXh0LnNlY3JldCwgdHdvRmFjdG9yQ29va2llLmF0dHJpYnV0ZXMpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyB0d29GYWN0b3JSZWRpcmVjdDogdHJ1ZSB9KTtcblx0XHRcdH0pXG5cdFx0fV0gfSxcblx0XHRzY2hlbWE6IG1lcmdlU2NoZW1hKHNjaGVtYSwgb3B0aW9ucz8uc2NoZW1hKSxcblx0XHRyYXRlTGltaXQ6IFt7XG5cdFx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdHJldHVybiBwYXRoLnN0YXJ0c1dpdGgoXCIvdHdvLWZhY3Rvci9cIik7XG5cdFx0XHR9LFxuXHRcdFx0d2luZG93OiAxMCxcblx0XHRcdG1heDogM1xuXHRcdH1dLFxuXHRcdCRFUlJPUl9DT0RFUzogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFU1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBUV09fRkFDVE9SX0VSUk9SX0NPREVTLCB0d29GYWN0b3IsIHR3b0ZhY3RvckNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/otp/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/otp/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   otp2fa: () => (/* binding */ otp2fa)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../crypto/buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../verify-two-factor.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/utils.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/two-factor/otp/index.ts\nconst verifyOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The otp code to verify. Eg: \\\"012345\\\"\" }),\n\ttrustDevice: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().optional().meta({ description: \"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true\" })\n});\nconst send2FaOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({ trustDevice: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().optional().meta({ description: \"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true\" }) }).optional();\n/**\n* The otp adapter is created from the totp adapter.\n*/\nconst otp2fa = (options) => {\n\tconst opts = {\n\t\tstoreOTP: \"plain\",\n\t\tdigits: 6,\n\t\t...options,\n\t\tperiod: (options?.period || 3) * 60 * 1e3\n\t};\n\tasync function storeOTP(ctx, otp) {\n\t\tif (opts.storeOTP === \"hashed\") return await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.defaultKeyHasher)(otp);\n\t\tif (typeof opts.storeOTP === \"object\" && \"hash\" in opts.storeOTP) return await opts.storeOTP.hash(otp);\n\t\tif (typeof opts.storeOTP === \"object\" && \"encrypt\" in opts.storeOTP) return await opts.storeOTP.encrypt(otp);\n\t\tif (opts.storeOTP === \"encrypted\") return await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricEncrypt)({\n\t\t\tkey: ctx.context.secret,\n\t\t\tdata: otp\n\t\t});\n\t\treturn otp;\n\t}\n\tasync function decryptOrHashForComparison(ctx, storedOtp, userInput) {\n\t\tif (opts.storeOTP === \"hashed\") return [storedOtp, await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_7__.defaultKeyHasher)(userInput)];\n\t\tif (opts.storeOTP === \"encrypted\") return [await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecrypt)({\n\t\t\tkey: ctx.context.secret,\n\t\t\tdata: storedOtp\n\t\t}), userInput];\n\t\tif (typeof opts.storeOTP === \"object\" && \"encrypt\" in opts.storeOTP) return [await opts.storeOTP.decrypt(storedOtp), userInput];\n\t\tif (typeof opts.storeOTP === \"object\" && \"hash\" in opts.storeOTP) return [storedOtp, await opts.storeOTP.hash(userInput)];\n\t\treturn [storedOtp, userInput];\n\t}\n\treturn {\n\t\tid: \"otp\",\n\t\tendpoints: {\n\t\t\tsendTwoFactorOTP: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/two-factor/send-otp\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: send2FaOTPBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Send two factor OTP\",\n\t\t\t\t\tdescription: \"Send two factor OTP to the user\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (!options || !options.sendOTP) {\n\t\t\t\t\tctx.context.logger.error(\"send otp isn't configured. Please configure the send otp function on otp options.\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"otp isn't configured\" });\n\t\t\t\t}\n\t\t\t\tconst { session, key } = await (0,_verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_6__.verifyTwoFactor)(ctx);\n\t\t\t\tconst code = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_2__.generateRandomString)(opts.digits, \"0-9\");\n\t\t\t\tconst hashedCode = await storeOTP(ctx, code);\n\t\t\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\t\t\tvalue: `${hashedCode}:0`,\n\t\t\t\t\tidentifier: `2fa-otp-${key}`,\n\t\t\t\t\texpiresAt: new Date(Date.now() + opts.period)\n\t\t\t\t});\n\t\t\t\tconst sendOTPResult = options.sendOTP({\n\t\t\t\t\tuser: session.user,\n\t\t\t\t\totp: code\n\t\t\t\t}, ctx);\n\t\t\t\tif (sendOTPResult instanceof Promise) await ctx.context.runInBackgroundOrAwait(sendOTPResult.catch((e) => {\n\t\t\t\t\tctx.context.logger.error(\"Failed to send two-factor OTP\", e);\n\t\t\t\t}));\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}),\n\t\t\tverifyTwoFactorOTP: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/two-factor/verify-otp\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: verifyOTPBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Verify two factor OTP\",\n\t\t\t\t\tdescription: \"Verify two factor OTP\",\n\t\t\t\t\tresponses: { \"200\": {\n\t\t\t\t\t\tdescription: \"Two-factor OTP verified successfully\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\tdescription: \"Session token for the authenticated session\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's email address\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email is verified\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's name\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"User's profile image URL\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was created\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\t\tdescription: \"Timestamp when the user was last updated\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tdescription: \"The authenticated user object\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trequired: [\"token\", \"user\"]\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst { session, key, valid, invalid } = await (0,_verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_6__.verifyTwoFactor)(ctx);\n\t\t\t\tconst toCheckOtp = await ctx.context.internalAdapter.findVerificationValue(`2fa-otp-${key}`);\n\t\t\t\tconst [otp, counter] = toCheckOtp?.value?.split(\":\") ?? [];\n\t\t\t\tif (!toCheckOtp || toCheckOtp.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t\t\tif (toCheckOtp) await ctx.context.internalAdapter.deleteVerificationValue(toCheckOtp.id);\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.OTP_HAS_EXPIRED });\n\t\t\t\t}\n\t\t\t\tconst allowedAttempts = options?.allowedAttempts || 5;\n\t\t\t\tif (parseInt(counter) >= allowedAttempts) {\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteVerificationValue(toCheckOtp.id);\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE });\n\t\t\t\t}\n\t\t\t\tconst [storedValue, inputValue] = await decryptOrHashForComparison(ctx, otp, ctx.body.code);\n\t\t\t\tif ((0,_crypto_buffer_mjs__WEBPACK_IMPORTED_MODULE_1__.constantTimeEqual)(new TextEncoder().encode(storedValue), new TextEncoder().encode(inputValue))) {\n\t\t\t\t\tif (!session.user.twoFactorEnabled) {\n\t\t\t\t\t\tif (!session.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\t\tconst updatedUser = await ctx.context.internalAdapter.updateUser(session.user.id, { twoFactorEnabled: true });\n\t\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id, false, session.session);\n\t\t\t\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\t\tuser: updatedUser\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\ttoken: newSession.token,\n\t\t\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn valid(ctx);\n\t\t\t\t} else {\n\t\t\t\t\tawait ctx.context.internalAdapter.updateVerificationValue(toCheckOtp.id, { value: `${otp}:${(parseInt(counter, 10) || 0) + 1}` });\n\t\t\t\t\treturn invalid(\"INVALID_CODE\");\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3Ivb3RwL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ007QUFDRztBQUNhO0FBQ2pCO0FBQ0g7QUFDQTtBQUNYO0FBQ1c7QUFDcEI7QUFDZDtBQUNrQzs7QUFFM0Q7QUFDQSw0QkFBNEIsd0NBQVE7QUFDcEMsT0FBTyx3Q0FBUSxVQUFVLHVEQUF1RDtBQUNoRixjQUFjLHlDQUFTLHFCQUFxQix3SUFBd0k7QUFDcEwsQ0FBQztBQUNELDZCQUE2Qix3Q0FBUSxHQUFHLGFBQWEseUNBQVMscUJBQXFCLHdJQUF3SSxHQUFHO0FBQzlOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsNERBQWdCO0FBQy9EO0FBQ0E7QUFDQSxrREFBa0QsbUVBQWdCO0FBQ2xFO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDREQUFnQjtBQUMzRSxtREFBbUQsbUVBQWdCO0FBQ25FO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEVBQWtCO0FBQ3ZDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsaURBQVEsa0JBQWtCLGlDQUFpQztBQUMxRTtBQUNBLFlBQVksZUFBZSxRQUFRLHVFQUFlO0FBQ2xELGlCQUFpQix3RUFBb0I7QUFDckM7QUFDQTtBQUNBLGVBQWUsV0FBVztBQUMxQiw0QkFBNEIsSUFBSTtBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxzQkFBc0IsY0FBYztBQUNwQyxJQUFJO0FBQ0osdUJBQXVCLDBFQUFrQjtBQUN6QztBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksK0JBQStCLFFBQVEsdUVBQWU7QUFDbEUsMEZBQTBGLElBQUk7QUFDOUY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBUSxrQkFBa0IsU0FBUyxtRUFBc0Isa0JBQWtCO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBUSxrQkFBa0IsU0FBUyxtRUFBc0IscUNBQXFDO0FBQzdHO0FBQ0E7QUFDQSxRQUFRLHFFQUFpQjtBQUN6QjtBQUNBLHNDQUFzQyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3BILDBGQUEwRix3QkFBd0I7QUFDbEg7QUFDQTtBQUNBLFlBQVksb0VBQWdCO0FBQzVCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGFBQWEsK0RBQWU7QUFDNUIsT0FBTztBQUNQO0FBQ0E7QUFDQSxNQUFNO0FBQ04sZ0ZBQWdGLFVBQVUsSUFBSSxHQUFHLGlDQUFpQyxHQUFHO0FBQ3JJO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ2tCO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdHdvLWZhY3Rvclxcb3RwXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH0gZnJvbSBcIi4uLy4uLy4uL2NyeXB0by9idWZmZXIubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi8uLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBUV09fRkFDVE9SX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4uL2Vycm9yLWNvZGUubWpzXCI7XG5pbXBvcnQgeyB2ZXJpZnlUd29GYWN0b3IgfSBmcm9tIFwiLi4vdmVyaWZ5LXR3by1mYWN0b3IubWpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0S2V5SGFzaGVyIH0gZnJvbSBcIi4uL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvdHdvLWZhY3Rvci9vdHAvaW5kZXgudHNcbmNvbnN0IHZlcmlmeU9UUEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGNvZGU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvdHAgY29kZSB0byB2ZXJpZnkuIEVnOiBcXFwiMDEyMzQ1XFxcIlwiIH0pLFxuXHR0cnVzdERldmljZTogei5ib29sZWFuKCkub3B0aW9uYWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiSWYgdHJ1ZSwgdGhlIGRldmljZSB3aWxsIGJlIHRydXN0ZWQgZm9yIDMwIGRheXMuIEl0J2xsIGJlIHJlZnJlc2hlZCBvbiBldmVyeSBzaWduIGluIHJlcXVlc3Qgd2l0aGluIHRoaXMgdGltZS4gRWc6IHRydWVcIiB9KVxufSk7XG5jb25zdCBzZW5kMkZhT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgdHJ1c3REZXZpY2U6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklmIHRydWUsIHRoZSBkZXZpY2Ugd2lsbCBiZSB0cnVzdGVkIGZvciAzMCBkYXlzLiBJdCdsbCBiZSByZWZyZXNoZWQgb24gZXZlcnkgc2lnbiBpbiByZXF1ZXN0IHdpdGhpbiB0aGlzIHRpbWUuIEVnOiB0cnVlXCIgfSkgfSkub3B0aW9uYWwoKTtcbi8qKlxuKiBUaGUgb3RwIGFkYXB0ZXIgaXMgY3JlYXRlZCBmcm9tIHRoZSB0b3RwIGFkYXB0ZXIuXG4qL1xuY29uc3Qgb3RwMmZhID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgb3B0cyA9IHtcblx0XHRzdG9yZU9UUDogXCJwbGFpblwiLFxuXHRcdGRpZ2l0czogNixcblx0XHQuLi5vcHRpb25zLFxuXHRcdHBlcmlvZDogKG9wdGlvbnM/LnBlcmlvZCB8fCAzKSAqIDYwICogMWUzXG5cdH07XG5cdGFzeW5jIGZ1bmN0aW9uIHN0b3JlT1RQKGN0eCwgb3RwKSB7XG5cdFx0aWYgKG9wdHMuc3RvcmVPVFAgPT09IFwiaGFzaGVkXCIpIHJldHVybiBhd2FpdCBkZWZhdWx0S2V5SGFzaGVyKG90cCk7XG5cdFx0aWYgKHR5cGVvZiBvcHRzLnN0b3JlT1RQID09PSBcIm9iamVjdFwiICYmIFwiaGFzaFwiIGluIG9wdHMuc3RvcmVPVFApIHJldHVybiBhd2FpdCBvcHRzLnN0b3JlT1RQLmhhc2gob3RwKTtcblx0XHRpZiAodHlwZW9mIG9wdHMuc3RvcmVPVFAgPT09IFwib2JqZWN0XCIgJiYgXCJlbmNyeXB0XCIgaW4gb3B0cy5zdG9yZU9UUCkgcmV0dXJuIGF3YWl0IG9wdHMuc3RvcmVPVFAuZW5jcnlwdChvdHApO1xuXHRcdGlmIChvcHRzLnN0b3JlT1RQID09PSBcImVuY3J5cHRlZFwiKSByZXR1cm4gYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRrZXk6IGN0eC5jb250ZXh0LnNlY3JldCxcblx0XHRcdGRhdGE6IG90cFxuXHRcdH0pO1xuXHRcdHJldHVybiBvdHA7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVjcnlwdE9ySGFzaEZvckNvbXBhcmlzb24oY3R4LCBzdG9yZWRPdHAsIHVzZXJJbnB1dCkge1xuXHRcdGlmIChvcHRzLnN0b3JlT1RQID09PSBcImhhc2hlZFwiKSByZXR1cm4gW3N0b3JlZE90cCwgYXdhaXQgZGVmYXVsdEtleUhhc2hlcih1c2VySW5wdXQpXTtcblx0XHRpZiAob3B0cy5zdG9yZU9UUCA9PT0gXCJlbmNyeXB0ZWRcIikgcmV0dXJuIFthd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0ZGF0YTogc3RvcmVkT3RwXG5cdFx0fSksIHVzZXJJbnB1dF07XG5cdFx0aWYgKHR5cGVvZiBvcHRzLnN0b3JlT1RQID09PSBcIm9iamVjdFwiICYmIFwiZW5jcnlwdFwiIGluIG9wdHMuc3RvcmVPVFApIHJldHVybiBbYXdhaXQgb3B0cy5zdG9yZU9UUC5kZWNyeXB0KHN0b3JlZE90cCksIHVzZXJJbnB1dF07XG5cdFx0aWYgKHR5cGVvZiBvcHRzLnN0b3JlT1RQID09PSBcIm9iamVjdFwiICYmIFwiaGFzaFwiIGluIG9wdHMuc3RvcmVPVFApIHJldHVybiBbc3RvcmVkT3RwLCBhd2FpdCBvcHRzLnN0b3JlT1RQLmhhc2godXNlcklucHV0KV07XG5cdFx0cmV0dXJuIFtzdG9yZWRPdHAsIHVzZXJJbnB1dF07XG5cdH1cblx0cmV0dXJuIHtcblx0XHRpZDogXCJvdHBcIixcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNlbmRUd29GYWN0b3JPVFA6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL3NlbmQtb3RwXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogc2VuZDJGYU9UUEJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRzdW1tYXJ5OiBcIlNlbmQgdHdvIGZhY3RvciBPVFBcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTZW5kIHR3byBmYWN0b3IgT1RQIHRvIHRoZSB1c2VyXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc2Z1bCByZXNwb25zZVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0aWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLnNlbmRPVFApIHtcblx0XHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJzZW5kIG90cCBpc24ndCBjb25maWd1cmVkLiBQbGVhc2UgY29uZmlndXJlIHRoZSBzZW5kIG90cCBmdW5jdGlvbiBvbiBvdHAgb3B0aW9ucy5cIik7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIm90cCBpc24ndCBjb25maWd1cmVkXCIgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgeyBzZXNzaW9uLCBrZXkgfSA9IGF3YWl0IHZlcmlmeVR3b0ZhY3RvcihjdHgpO1xuXHRcdFx0XHRjb25zdCBjb2RlID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcob3B0cy5kaWdpdHMsIFwiMC05XCIpO1xuXHRcdFx0XHRjb25zdCBoYXNoZWRDb2RlID0gYXdhaXQgc3RvcmVPVFAoY3R4LCBjb2RlKTtcblx0XHRcdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHRcdFx0XHR2YWx1ZTogYCR7aGFzaGVkQ29kZX06MGAsXG5cdFx0XHRcdFx0aWRlbnRpZmllcjogYDJmYS1vdHAtJHtrZXl9YCxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyBvcHRzLnBlcmlvZClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnN0IHNlbmRPVFBSZXN1bHQgPSBvcHRpb25zLnNlbmRPVFAoe1xuXHRcdFx0XHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRcdFx0XHRvdHA6IGNvZGVcblx0XHRcdFx0fSwgY3R4KTtcblx0XHRcdFx0aWYgKHNlbmRPVFBSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSBhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KHNlbmRPVFBSZXN1bHQuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gc2VuZCB0d28tZmFjdG9yIE9UUFwiLCBlKTtcblx0XHRcdFx0fSkpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdFx0XHR9KSxcblx0XHRcdHZlcmlmeVR3b0ZhY3Rvck9UUDogY3JlYXRlQXV0aEVuZHBvaW50KFwiL3R3by1mYWN0b3IvdmVyaWZ5LW90cFwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IHZlcmlmeU9UUEJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRzdW1tYXJ5OiBcIlZlcmlmeSB0d28gZmFjdG9yIE9UUFwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlZlcmlmeSB0d28gZmFjdG9yIE9UUFwiLFxuXHRcdFx0XHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUd28tZmFjdG9yIE9UUCB2ZXJpZmllZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW4gZm9yIHRoZSBhdXRoZW50aWNhdGVkIHNlc3Npb25cIlxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJlbWFpbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIncyBlbWFpbCBhZGRyZXNzXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGlzIHZlcmlmaWVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlcidzIG5hbWVcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcInVyaVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIncyBwcm9maWxlIGltYWdlIFVSTFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRpbWVzdGFtcCB3aGVuIHRoZSB1c2VyIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGltZXN0YW1wIHdoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiY3JlYXRlZEF0XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlZEF0XCJcblx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgYXV0aGVudGljYXRlZCB1c2VyIG9iamVjdFwiXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1widG9rZW5cIiwgXCJ1c2VyXCJdXG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgeyBzZXNzaW9uLCBrZXksIHZhbGlkLCBpbnZhbGlkIH0gPSBhd2FpdCB2ZXJpZnlUd29GYWN0b3IoY3R4KTtcblx0XHRcdFx0Y29uc3QgdG9DaGVja090cCA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoYDJmYS1vdHAtJHtrZXl9YCk7XG5cdFx0XHRcdGNvbnN0IFtvdHAsIGNvdW50ZXJdID0gdG9DaGVja090cD8udmFsdWU/LnNwbGl0KFwiOlwiKSA/PyBbXTtcblx0XHRcdFx0aWYgKCF0b0NoZWNrT3RwIHx8IHRvQ2hlY2tPdHAuZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRcdFx0XHRpZiAodG9DaGVja090cCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHRvQ2hlY2tPdHAuaWQpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUy5PVFBfSEFTX0VYUElSRUQgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgYWxsb3dlZEF0dGVtcHRzID0gb3B0aW9ucz8uYWxsb3dlZEF0dGVtcHRzIHx8IDU7XG5cdFx0XHRcdGlmIChwYXJzZUludChjb3VudGVyKSA+PSBhbGxvd2VkQXR0ZW1wdHMpIHtcblx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodG9DaGVja090cC5pZCk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBUV09fRkFDVE9SX0VSUk9SX0NPREVTLlRPT19NQU5ZX0FUVEVNUFRTX1JFUVVFU1RfTkVXX0NPREUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgW3N0b3JlZFZhbHVlLCBpbnB1dFZhbHVlXSA9IGF3YWl0IGRlY3J5cHRPckhhc2hGb3JDb21wYXJpc29uKGN0eCwgb3RwLCBjdHguYm9keS5jb2RlKTtcblx0XHRcdFx0aWYgKGNvbnN0YW50VGltZUVxdWFsKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdG9yZWRWYWx1ZSksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShpbnB1dFZhbHVlKSkpIHtcblx0XHRcdFx0XHRpZiAoIXNlc3Npb24udXNlci50d29GYWN0b3JFbmFibGVkKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXNlc3Npb24uc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0XHRcdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkLCB7IHR3b0ZhY3RvckVuYWJsZWQ6IHRydWUgfSk7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24oc2Vzc2lvbi51c2VyLmlkLCBmYWxzZSwgc2Vzc2lvbi5zZXNzaW9uKTtcblx0XHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKHNlc3Npb24uc2Vzc2lvbi50b2tlbik7XG5cdFx0XHRcdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHR1c2VyOiB1cGRhdGVkVXNlclxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0XHR0b2tlbjogbmV3U2Vzc2lvbi50b2tlbixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyKVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWxpZChjdHgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVWZXJpZmljYXRpb25WYWx1ZSh0b0NoZWNrT3RwLmlkLCB7IHZhbHVlOiBgJHtvdHB9OiR7KHBhcnNlSW50KGNvdW50ZXIsIDEwKSB8fCAwKSArIDF9YCB9KTtcblx0XHRcdFx0XHRyZXR1cm4gaW52YWxpZChcIklOVkFMSURfQ09ERVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG90cDJmYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/otp/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/schema.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/schema.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   schema: () => (/* binding */ schema)\n/* harmony export */ });\n//#region src/plugins/two-factor/schema.ts\nconst schema = {\n\tuser: { fields: { twoFactorEnabled: {\n\t\ttype: \"boolean\",\n\t\trequired: false,\n\t\tdefaultValue: false,\n\t\tinput: false\n\t} } },\n\ttwoFactor: { fields: {\n\t\tsecret: {\n\t\t\ttype: \"string\",\n\t\t\trequired: true,\n\t\t\treturned: false,\n\t\t\tindex: true\n\t\t},\n\t\tbackupCodes: {\n\t\t\ttype: \"string\",\n\t\t\trequired: true,\n\t\t\treturned: false\n\t\t},\n\t\tuserId: {\n\t\t\ttype: \"string\",\n\t\t\trequired: true,\n\t\t\treturned: false,\n\t\t\treferences: {\n\t\t\t\tmodel: \"user\",\n\t\t\t\tfield: \"id\"\n\t\t\t},\n\t\t\tindex: true\n\t\t}\n\t} }\n};\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3Ivc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLFNBQVMsVUFBVTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrQjtBQUNsQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXHNjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3R3by1mYWN0b3Ivc2NoZW1hLnRzXG5jb25zdCBzY2hlbWEgPSB7XG5cdHVzZXI6IHsgZmllbGRzOiB7IHR3b0ZhY3RvckVuYWJsZWQ6IHtcblx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0ZGVmYXVsdFZhbHVlOiBmYWxzZSxcblx0XHRpbnB1dDogZmFsc2Vcblx0fSB9IH0sXG5cdHR3b0ZhY3RvcjogeyBmaWVsZHM6IHtcblx0XHRzZWNyZXQ6IHtcblx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdHJldHVybmVkOiBmYWxzZSxcblx0XHRcdGluZGV4OiB0cnVlXG5cdFx0fSxcblx0XHRiYWNrdXBDb2Rlczoge1xuXHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0cmV0dXJuZWQ6IGZhbHNlXG5cdFx0fSxcblx0XHR1c2VySWQ6IHtcblx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdHJldHVybmVkOiBmYWxzZSxcblx0XHRcdHJlZmVyZW5jZXM6IHtcblx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHR9LFxuXHRcdFx0aW5kZXg6IHRydWVcblx0XHR9XG5cdH0gfVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/totp/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/totp/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   totp2fa: () => (/* binding */ totp2fa)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_code_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../verify-two-factor.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/utils/otp */ \"(rsc)/./node_modules/@better-auth/utils/dist/otp.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/two-factor/totp/index.ts\nconst generateTOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ secret: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The secret to generate the TOTP code\" }) });\nconst getTOTPURIBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ password: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"User password\" }) });\nconst verifyTOTPBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The otp code to verify. Eg: \\\"012345\\\"\" }),\n\ttrustDevice: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true\" }).optional()\n});\nconst totp2fa = (options) => {\n\tconst opts = {\n\t\t...options,\n\t\tdigits: options?.digits || 6,\n\t\tperiod: options?.period || 30\n\t};\n\tconst twoFactorTable = \"twoFactor\";\n\treturn {\n\t\tid: \"totp\",\n\t\tendpoints: {\n\t\t\tgenerateTOTP: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)({\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: generateTOTPBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Generate TOTP code\",\n\t\t\t\t\tdescription: \"Use this endpoint to generate a TOTP code\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { code: { type: \"string\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (options?.disable) {\n\t\t\t\t\tctx.context.logger.error(\"totp isn't configured. please pass totp option on two factor plugin to enable totp\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"totp isn't configured\" });\n\t\t\t\t}\n\t\t\t\treturn { code: await (0,_better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_9__.createOTP)(ctx.body.secret, {\n\t\t\t\t\tperiod: opts.period,\n\t\t\t\t\tdigits: opts.digits\n\t\t\t\t}).totp() };\n\t\t\t}),\n\t\t\tgetTOTPURI: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/two-factor/get-totp-uri\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tuse: [_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_2__.sessionMiddleware],\n\t\t\t\tbody: getTOTPURIBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Get TOTP URI\",\n\t\t\t\t\tdescription: \"Use this endpoint to get the TOTP URI\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { totpURI: { type: \"string\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (options?.disable) {\n\t\t\t\t\tctx.context.logger.error(\"totp isn't configured. please pass totp option on two factor plugin to enable totp\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"totp isn't configured\" });\n\t\t\t\t}\n\t\t\t\tconst user = ctx.context.session.user;\n\t\t\t\tconst twoFactor = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!twoFactor) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_4__.TWO_FACTOR_ERROR_CODES.TOTP_NOT_ENABLED });\n\t\t\t\tconst secret = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\tdata: twoFactor.secret\n\t\t\t\t});\n\t\t\t\tawait ctx.context.password.checkPassword(user.id, ctx);\n\t\t\t\treturn { totpURI: (0,_better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_9__.createOTP)(secret, {\n\t\t\t\t\tdigits: opts.digits,\n\t\t\t\t\tperiod: opts.period\n\t\t\t\t}).url(options?.issuer || ctx.context.appName, user.email) };\n\t\t\t}),\n\t\t\tverifyTOTP: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/two-factor/verify-totp\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: verifyTOTPBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Verify two factor TOTP\",\n\t\t\t\t\tdescription: \"Verify two factor TOTP\",\n\t\t\t\t\tresponses: { 200: {\n\t\t\t\t\t\tdescription: \"Successful response\",\n\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t\t\t} } }\n\t\t\t\t\t} }\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (options?.disable) {\n\t\t\t\t\tctx.context.logger.error(\"totp isn't configured. please pass totp option on two factor plugin to enable totp\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"totp isn't configured\" });\n\t\t\t\t}\n\t\t\t\tconst { session, valid, invalid } = await (0,_verify_two_factor_mjs__WEBPACK_IMPORTED_MODULE_5__.verifyTwoFactor)(ctx);\n\t\t\t\tconst user = session.user;\n\t\t\t\tconst twoFactor = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: twoFactorTable,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!twoFactor) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_4__.TWO_FACTOR_ERROR_CODES.TOTP_NOT_ENABLED });\n\t\t\t\tif (!await (0,_better_auth_utils_otp__WEBPACK_IMPORTED_MODULE_9__.createOTP)(await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\t\t\t\tkey: ctx.context.secret,\n\t\t\t\t\tdata: twoFactor.secret\n\t\t\t\t}), {\n\t\t\t\t\tperiod: opts.period,\n\t\t\t\t\tdigits: opts.digits\n\t\t\t\t}).verify(ctx.body.code)) return invalid(\"INVALID_CODE\");\n\t\t\t\tif (!user.twoFactorEnabled) {\n\t\t\t\t\tif (!session.session) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tconst updatedUser = await ctx.context.internalAdapter.updateUser(user.id, { twoFactorEnabled: true });\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.id, false, session.session).catch((e) => {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__.setSessionCookie)(ctx, {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: updatedUser\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn valid(ctx);\n\t\t\t})\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvdG90cC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ0M7QUFDTTtBQUNwQztBQUMyQjtBQUNBO0FBQ0E7QUFDcEI7QUFDZDtBQUNrQztBQUNSOztBQUVuRDtBQUNBLCtCQUErQix3Q0FBUSxHQUFHLFFBQVEsd0NBQVEsVUFBVSxxREFBcUQsR0FBRztBQUM1SCw2QkFBNkIsd0NBQVEsR0FBRyxVQUFVLHdDQUFRLFVBQVUsOEJBQThCLEdBQUc7QUFDckcsNkJBQTZCLHdDQUFRO0FBQ3JDLE9BQU8sd0NBQVEsVUFBVSx1REFBdUQ7QUFDaEYsY0FBYyx5Q0FBUyxVQUFVLHdJQUF3STtBQUN6SyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIseUVBQWtCO0FBQ25DO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQSxxQkFBcUIsUUFBUTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsaURBQVEsa0JBQWtCLGtDQUFrQztBQUMzRTtBQUNBLGFBQWEsWUFBWSxpRUFBUztBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixlQUFlLHlFQUFrQjtBQUNqQztBQUNBLFVBQVUsc0VBQWlCO0FBQzNCO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0EscUJBQXFCLFdBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLGlEQUFRLGtCQUFrQixrQ0FBa0M7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMLDhCQUE4QixpREFBUSxrQkFBa0IsU0FBUyxtRUFBc0IsbUJBQW1CO0FBQzFHLHlCQUF5QixtRUFBZ0I7QUFDekM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsU0FBUyxpRUFBUztBQUMvQjtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixlQUFlLHlFQUFrQjtBQUNqQztBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDO0FBQ0EscUJBQXFCLFVBQVU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxlQUFlLGlEQUFRLGtCQUFrQixrQ0FBa0M7QUFDM0U7QUFDQSxZQUFZLDBCQUEwQixRQUFRLHVFQUFlO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0wsOEJBQThCLGlEQUFRLGtCQUFrQixTQUFTLG1FQUFzQixtQkFBbUI7QUFDMUcsZUFBZSxpRUFBUyxPQUFPLG1FQUFnQjtBQUMvQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxxQ0FBcUMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUNuSCxpRkFBaUYsd0JBQXdCO0FBQ3pHO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxXQUFXLG9FQUFnQjtBQUMzQjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdHdvLWZhY3RvclxcdG90cFxcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN5bW1ldHJpY0RlY3J5cHQgfSBmcm9tIFwiLi4vLi4vLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3JvdXRlcy9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUyB9IGZyb20gXCIuLi9lcnJvci1jb2RlLm1qc1wiO1xuaW1wb3J0IHsgdmVyaWZ5VHdvRmFjdG9yIH0gZnJvbSBcIi4uL3ZlcmlmeS10d28tZmFjdG9yLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlT1RQIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9vdHBcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3R3by1mYWN0b3IvdG90cC9pbmRleC50c1xuY29uc3QgZ2VuZXJhdGVUT1RQQm9keVNjaGVtYSA9IHoub2JqZWN0KHsgc2VjcmV0OiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgc2VjcmV0IHRvIGdlbmVyYXRlIHRoZSBUT1RQIGNvZGVcIiB9KSB9KTtcbmNvbnN0IGdldFRPVFBVUklCb2R5U2NoZW1hID0gei5vYmplY3QoeyBwYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVXNlciBwYXNzd29yZFwiIH0pIH0pO1xuY29uc3QgdmVyaWZ5VE9UUEJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGNvZGU6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBvdHAgY29kZSB0byB2ZXJpZnkuIEVnOiBcXFwiMDEyMzQ1XFxcIlwiIH0pLFxuXHR0cnVzdERldmljZTogei5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklmIHRydWUsIHRoZSBkZXZpY2Ugd2lsbCBiZSB0cnVzdGVkIGZvciAzMCBkYXlzLiBJdCdsbCBiZSByZWZyZXNoZWQgb24gZXZlcnkgc2lnbiBpbiByZXF1ZXN0IHdpdGhpbiB0aGlzIHRpbWUuIEVnOiB0cnVlXCIgfSkub3B0aW9uYWwoKVxufSk7XG5jb25zdCB0b3RwMmZhID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgb3B0cyA9IHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdGRpZ2l0czogb3B0aW9ucz8uZGlnaXRzIHx8IDYsXG5cdFx0cGVyaW9kOiBvcHRpb25zPy5wZXJpb2QgfHwgMzBcblx0fTtcblx0Y29uc3QgdHdvRmFjdG9yVGFibGUgPSBcInR3b0ZhY3RvclwiO1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInRvdHBcIixcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdGdlbmVyYXRlVE9UUDogY3JlYXRlQXV0aEVuZHBvaW50KHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogZ2VuZXJhdGVUT1RQQm9keVNjaGVtYSxcblx0XHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRcdHN1bW1hcnk6IFwiR2VuZXJhdGUgVE9UUCBjb2RlXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVXNlIHRoaXMgZW5kcG9pbnQgdG8gZ2VuZXJhdGUgYSBUT1RQIGNvZGVcIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsIHJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IGNvZGU6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZSkge1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcInRvdHAgaXNuJ3QgY29uZmlndXJlZC4gcGxlYXNlIHBhc3MgdG90cCBvcHRpb24gb24gdHdvIGZhY3RvciBwbHVnaW4gdG8gZW5hYmxlIHRvdHBcIik7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcInRvdHAgaXNuJ3QgY29uZmlndXJlZFwiIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB7IGNvZGU6IGF3YWl0IGNyZWF0ZU9UUChjdHguYm9keS5zZWNyZXQsIHtcblx0XHRcdFx0XHRwZXJpb2Q6IG9wdHMucGVyaW9kLFxuXHRcdFx0XHRcdGRpZ2l0czogb3B0cy5kaWdpdHNcblx0XHRcdFx0fSkudG90cCgpIH07XG5cdFx0XHR9KSxcblx0XHRcdGdldFRPVFBVUkk6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL2dldC10b3RwLXVyaVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0XHRcdFx0Ym9keTogZ2V0VE9UUFVSSUJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRzdW1tYXJ5OiBcIkdldCBUT1RQIFVSSVwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZSB0aGlzIGVuZHBvaW50IHRvIGdldCB0aGUgVE9UUCBVUklcIixcblx0XHRcdFx0XHRyZXNwb25zZXM6IHsgMjAwOiB7XG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzZnVsIHJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHRvdHBVUkk6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAob3B0aW9ucz8uZGlzYWJsZSkge1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcInRvdHAgaXNuJ3QgY29uZmlndXJlZC4gcGxlYXNlIHBhc3MgdG90cCBvcHRpb24gb24gdHdvIGZhY3RvciBwbHVnaW4gdG8gZW5hYmxlIHRvdHBcIik7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcInRvdHAgaXNuJ3QgY29uZmlndXJlZFwiIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBjdHguY29udGV4dC5zZXNzaW9uLnVzZXI7XG5cdFx0XHRcdGNvbnN0IHR3b0ZhY3RvciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IHR3b0ZhY3RvclRhYmxlLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdXNlci5pZFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXR3b0ZhY3RvcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBUV09fRkFDVE9SX0VSUk9SX0NPREVTLlRPVFBfTk9UX0VOQUJMRUQgfSk7XG5cdFx0XHRcdGNvbnN0IHNlY3JldCA9IGF3YWl0IHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdFx0XHRcdGtleTogY3R4LmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRcdGRhdGE6IHR3b0ZhY3Rvci5zZWNyZXRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNoZWNrUGFzc3dvcmQodXNlci5pZCwgY3R4KTtcblx0XHRcdFx0cmV0dXJuIHsgdG90cFVSSTogY3JlYXRlT1RQKHNlY3JldCwge1xuXHRcdFx0XHRcdGRpZ2l0czogb3B0cy5kaWdpdHMsXG5cdFx0XHRcdFx0cGVyaW9kOiBvcHRzLnBlcmlvZFxuXHRcdFx0XHR9KS51cmwob3B0aW9ucz8uaXNzdWVyIHx8IGN0eC5jb250ZXh0LmFwcE5hbWUsIHVzZXIuZW1haWwpIH07XG5cdFx0XHR9KSxcblx0XHRcdHZlcmlmeVRPVFA6IGNyZWF0ZUF1dGhFbmRwb2ludChcIi90d28tZmFjdG9yL3ZlcmlmeS10b3RwXCIsIHtcblx0XHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdFx0Ym9keTogdmVyaWZ5VE9UUEJvZHlTY2hlbWEsXG5cdFx0XHRcdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRcdFx0XHRzdW1tYXJ5OiBcIlZlcmlmeSB0d28gZmFjdG9yIFRPVFBcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgdHdvIGZhY3RvciBUT1RQXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7IDIwMDoge1xuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc2Z1bCByZXNwb25zZVwiLFxuXHRcdFx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHRcdFx0XHR9IH0gfVxuXHRcdFx0XHRcdH0gfVxuXHRcdFx0XHR9IH1cblx0XHRcdH0sIGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0aWYgKG9wdGlvbnM/LmRpc2FibGUpIHtcblx0XHRcdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJ0b3RwIGlzbid0IGNvbmZpZ3VyZWQuIHBsZWFzZSBwYXNzIHRvdHAgb3B0aW9uIG9uIHR3byBmYWN0b3IgcGx1Z2luIHRvIGVuYWJsZSB0b3RwXCIpO1xuXHRcdFx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJ0b3RwIGlzbid0IGNvbmZpZ3VyZWRcIiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB7IHNlc3Npb24sIHZhbGlkLCBpbnZhbGlkIH0gPSBhd2FpdCB2ZXJpZnlUd29GYWN0b3IoY3R4KTtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHNlc3Npb24udXNlcjtcblx0XHRcdFx0Y29uc3QgdHdvRmFjdG9yID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogdHdvRmFjdG9yVGFibGUsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB1c2VyLmlkXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghdHdvRmFjdG9yKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFRXT19GQUNUT1JfRVJST1JfQ09ERVMuVE9UUF9OT1RfRU5BQkxFRCB9KTtcblx0XHRcdFx0aWYgKCFhd2FpdCBjcmVhdGVPVFAoYXdhaXQgc3ltbWV0cmljRGVjcnlwdCh7XG5cdFx0XHRcdFx0a2V5OiBjdHguY29udGV4dC5zZWNyZXQsXG5cdFx0XHRcdFx0ZGF0YTogdHdvRmFjdG9yLnNlY3JldFxuXHRcdFx0XHR9KSwge1xuXHRcdFx0XHRcdHBlcmlvZDogb3B0cy5wZXJpb2QsXG5cdFx0XHRcdFx0ZGlnaXRzOiBvcHRzLmRpZ2l0c1xuXHRcdFx0XHR9KS52ZXJpZnkoY3R4LmJvZHkuY29kZSkpIHJldHVybiBpbnZhbGlkKFwiSU5WQUxJRF9DT0RFXCIpO1xuXHRcdFx0XHRpZiAoIXVzZXIudHdvRmFjdG9yRW5hYmxlZCkge1xuXHRcdFx0XHRcdGlmICghc2Vzc2lvbi5zZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHRcdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIodXNlci5pZCwgeyB0d29GYWN0b3JFbmFibGVkOiB0cnVlIH0pO1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLmlkLCBmYWxzZSwgc2Vzc2lvbi5zZXNzaW9uKS5jYXRjaCgoZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRcdFx0XHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBuZXdTZXNzaW9uLFxuXHRcdFx0XHRcdFx0dXNlcjogdXBkYXRlZFVzZXJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsaWQoY3R4KTtcblx0XHRcdH0pXG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b3RwMmZhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/totp/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/utils.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/utils.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultKeyHasher: () => (/* binding */ defaultKeyHasher)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n\n\n\n//#region src/plugins/two-factor/utils.ts\nconst defaultKeyHasher = async (token) => {\n\tconst hash = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_0__.createHash)(\"SHA-256\").digest(new TextEncoder().encode(token));\n\treturn _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(new Uint8Array(hash), { padding: false });\n};\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNDOztBQUV0RDtBQUNBO0FBQ0Esb0JBQW9CLG1FQUFVO0FBQzlCLFFBQVEsZ0VBQVMsZ0NBQWdDLGdCQUFnQjtBQUNqRTs7QUFFQTtBQUM0QjtBQUM1QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXHV0aWxzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvdHdvLWZhY3Rvci91dGlscy50c1xuY29uc3QgZGVmYXVsdEtleUhhc2hlciA9IGFzeW5jICh0b2tlbikgPT4ge1xuXHRjb25zdCBoYXNoID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0b2tlbikpO1xuXHRyZXR1cm4gYmFzZTY0VXJsLmVuY29kZShuZXcgVWludDhBcnJheShoYXNoKSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGVmYXVsdEtleUhhc2hlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyTwoFactor: () => (/* binding */ verifyTwoFactor)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./error-code.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/error-code.mjs\");\n/* harmony import */ var _constant_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./constant.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/two-factor/constant.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/two-factor/verify-two-factor.ts\nasync function verifyTwoFactor(ctx) {\n\tconst invalid = (errorKey) => {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES[errorKey] });\n\t};\n\tconst session = await (0,_api_routes_session_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst twoFactorCookie = ctx.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_6__.TWO_FACTOR_COOKIE_NAME);\n\t\tconst signedTwoFactorCookie = await ctx.getSignedCookie(twoFactorCookie.name, ctx.context.secret);\n\t\tif (!signedTwoFactorCookie) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.INVALID_TWO_FACTOR_COOKIE });\n\t\tconst verificationToken = await ctx.context.internalAdapter.findVerificationValue(signedTwoFactorCookie);\n\t\tif (!verificationToken) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.INVALID_TWO_FACTOR_COOKIE });\n\t\tconst user = await ctx.context.internalAdapter.findUserById(verificationToken.value);\n\t\tif (!user) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: _error_code_mjs__WEBPACK_IMPORTED_MODULE_5__.TWO_FACTOR_ERROR_CODES.INVALID_TWO_FACTOR_COOKIE });\n\t\tconst dontRememberMe = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\treturn {\n\t\t\tvalid: async (ctx$1) => {\n\t\t\t\tconst session$1 = await ctx$1.context.internalAdapter.createSession(verificationToken.value, !!dontRememberMe);\n\t\t\t\tif (!session$1) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"failed to create session\" });\n\t\t\t\tawait ctx$1.context.internalAdapter.deleteVerificationValue(verificationToken.id);\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx$1, {\n\t\t\t\t\tsession: session$1,\n\t\t\t\t\tuser\n\t\t\t\t});\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx$1, twoFactorCookie);\n\t\t\t\tif (ctx$1.body.trustDevice) {\n\t\t\t\t\tconst maxAge = ctx$1.context.getPlugin(\"two-factor\").options.trustDeviceMaxAge ?? _constant_mjs__WEBPACK_IMPORTED_MODULE_6__.TRUST_DEVICE_COOKIE_MAX_AGE;\n\t\t\t\t\tconst trustDeviceCookie = ctx$1.context.createAuthCookie(_constant_mjs__WEBPACK_IMPORTED_MODULE_6__.TRUST_DEVICE_COOKIE_NAME, { maxAge });\n\t\t\t\t\t/**\n\t\t\t\t\t* Create a random identifier for the trust device record.\n\t\t\t\t\t* Store it in the verification table with an expiration\n\t\t\t\t\t* so the server can validate and revoke it.\n\t\t\t\t\t*/\n\t\t\t\t\tconst trustIdentifier = `trust-device-${(0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32)}`;\n\t\t\t\t\tconst token = await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_8__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx$1.context.secret, `${user.id}!${trustIdentifier}`);\n\t\t\t\t\tawait ctx$1.context.internalAdapter.createVerificationValue({\n\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\tidentifier: trustIdentifier,\n\t\t\t\t\t\texpiresAt: new Date(Date.now() + maxAge * 1e3)\n\t\t\t\t\t});\n\t\t\t\t\tawait ctx$1.setSignedCookie(trustDeviceCookie.name, `${token}!${trustIdentifier}`, ctx$1.context.secret, trustDeviceCookie.attributes);\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(ctx$1, ctx$1.context.authCookies.dontRememberToken);\n\t\t\t\t}\n\t\t\t\treturn ctx$1.json({\n\t\t\t\t\ttoken: session$1.token,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx$1.context.options, user)\n\t\t\t\t});\n\t\t\t},\n\t\t\tinvalid,\n\t\t\tsession: {\n\t\t\t\tsession: null,\n\t\t\t\tuser\n\t\t\t},\n\t\t\tkey: signedTwoFactorCookie\n\t\t};\n\t}\n\treturn {\n\t\tvalid: async (ctx$1) => {\n\t\t\treturn ctx$1.json({\n\t\t\t\ttoken: session.session.token,\n\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx$1.context.options, session.user)\n\t\t\t});\n\t\t},\n\t\tinvalid,\n\t\tsession,\n\t\tkey: `${session.user.id}!${session.session.id}`\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=verify-two-factor.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvdmVyaWZ5LXR3by1mYWN0b3IubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDUztBQUNVO0FBQ1I7QUFDcEM7QUFDNkI7QUFDcUQ7QUFDeEU7QUFDYzs7QUFFckQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxtRUFBc0IsWUFBWTtBQUNsRjtBQUNBLHVCQUF1QiwwRUFBaUI7QUFDeEM7QUFDQSx1REFBdUQsaUVBQXNCO0FBQzdFO0FBQ0Esd0NBQXdDLGlEQUFRLG1CQUFtQixTQUFTLG1FQUFzQiw0QkFBNEI7QUFDOUg7QUFDQSxvQ0FBb0MsaURBQVEsbUJBQW1CLFNBQVMsbUVBQXNCLDRCQUE0QjtBQUMxSDtBQUNBLHVCQUF1QixpREFBUSxtQkFBbUIsU0FBUyxtRUFBc0IsNEJBQTRCO0FBQzdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlEQUFRLDRCQUE0QixxQ0FBcUM7QUFDdkc7QUFDQSxVQUFVLG9FQUFnQjtBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksZ0VBQVk7QUFDaEI7QUFDQSx1RkFBdUYsc0VBQTJCO0FBQ2xILDhEQUE4RCxtRUFBd0IsSUFBSSxRQUFRO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsd0VBQW9CLEtBQUs7QUFDdEUseUJBQXlCLG1FQUFVLDREQUE0RCxRQUFRLEdBQUcsZ0JBQWdCO0FBQzFIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLDREQUE0RCxNQUFNLEdBQUcsZ0JBQWdCO0FBQ3JGLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0EsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrREFBZTtBQUN6QixJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixHQUFHLG1CQUFtQjtBQUNoRDtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdHdvLWZhY3RvclxcdmVyaWZ5LXR3by1mYWN0b3IubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVJhbmRvbVN0cmluZyB9IGZyb20gXCIuLi8uLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgZXhwaXJlQ29va2llLCBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCB9IGZyb20gXCIuLi8uLi9hcGkvcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBUV09fRkFDVE9SX0VSUk9SX0NPREVTIH0gZnJvbSBcIi4vZXJyb3ItY29kZS5tanNcIjtcbmltcG9ydCB7IFRSVVNUX0RFVklDRV9DT09LSUVfTUFYX0FHRSwgVFJVU1RfREVWSUNFX0NPT0tJRV9OQU1FLCBUV09fRkFDVE9SX0NPT0tJRV9OQU1FIH0gZnJvbSBcIi4vY29uc3RhbnQubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0IHsgY3JlYXRlSE1BQyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaG1hY1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvdHdvLWZhY3Rvci92ZXJpZnktdHdvLWZhY3Rvci50c1xuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VHdvRmFjdG9yKGN0eCkge1xuXHRjb25zdCBpbnZhbGlkID0gKGVycm9yS2V5KSA9PiB7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFU1tlcnJvcktleV0gfSk7XG5cdH07XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHtcblx0XHRjb25zdCB0d29GYWN0b3JDb29raWUgPSBjdHguY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFRXT19GQUNUT1JfQ09PS0lFX05BTUUpO1xuXHRcdGNvbnN0IHNpZ25lZFR3b0ZhY3RvckNvb2tpZSA9IGF3YWl0IGN0eC5nZXRTaWduZWRDb29raWUodHdvRmFjdG9yQ29va2llLm5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0aWYgKCFzaWduZWRUd29GYWN0b3JDb29raWUpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFRXT19GQUNUT1JfRVJST1JfQ09ERVMuSU5WQUxJRF9UV09fRkFDVE9SX0NPT0tJRSB9KTtcblx0XHRjb25zdCB2ZXJpZmljYXRpb25Ub2tlbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoc2lnbmVkVHdvRmFjdG9yQ29va2llKTtcblx0XHRpZiAoIXZlcmlmaWNhdGlvblRva2VuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBUV09fRkFDVE9SX0VSUk9SX0NPREVTLklOVkFMSURfVFdPX0ZBQ1RPUl9DT09LSUUgfSk7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5SWQodmVyaWZpY2F0aW9uVG9rZW4udmFsdWUpO1xuXHRcdGlmICghdXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVFdPX0ZBQ1RPUl9FUlJPUl9DT0RFUy5JTlZBTElEX1RXT19GQUNUT1JfQ09PS0lFIH0pO1xuXHRcdGNvbnN0IGRvbnRSZW1lbWJlck1lID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdHJldHVybiB7XG5cdFx0XHR2YWxpZDogYXN5bmMgKGN0eCQxKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb24kMSA9IGF3YWl0IGN0eCQxLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odmVyaWZpY2F0aW9uVG9rZW4udmFsdWUsICEhZG9udFJlbWVtYmVyTWUpO1xuXHRcdFx0XHRpZiAoIXNlc3Npb24kMSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogXCJmYWlsZWQgdG8gY3JlYXRlIHNlc3Npb25cIiB9KTtcblx0XHRcdFx0YXdhaXQgY3R4JDEuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWUodmVyaWZpY2F0aW9uVG9rZW4uaWQpO1xuXHRcdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCQxLCB7XG5cdFx0XHRcdFx0c2Vzc2lvbjogc2Vzc2lvbiQxLFxuXHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgkMSwgdHdvRmFjdG9yQ29va2llKTtcblx0XHRcdFx0aWYgKGN0eCQxLmJvZHkudHJ1c3REZXZpY2UpIHtcblx0XHRcdFx0XHRjb25zdCBtYXhBZ2UgPSBjdHgkMS5jb250ZXh0LmdldFBsdWdpbihcInR3by1mYWN0b3JcIikub3B0aW9ucy50cnVzdERldmljZU1heEFnZSA/PyBUUlVTVF9ERVZJQ0VfQ09PS0lFX01BWF9BR0U7XG5cdFx0XHRcdFx0Y29uc3QgdHJ1c3REZXZpY2VDb29raWUgPSBjdHgkMS5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoVFJVU1RfREVWSUNFX0NPT0tJRV9OQU1FLCB7IG1heEFnZSB9KTtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIENyZWF0ZSBhIHJhbmRvbSBpZGVudGlmaWVyIGZvciB0aGUgdHJ1c3QgZGV2aWNlIHJlY29yZC5cblx0XHRcdFx0XHQqIFN0b3JlIGl0IGluIHRoZSB2ZXJpZmljYXRpb24gdGFibGUgd2l0aCBhbiBleHBpcmF0aW9uXG5cdFx0XHRcdFx0KiBzbyB0aGUgc2VydmVyIGNhbiB2YWxpZGF0ZSBhbmQgcmV2b2tlIGl0LlxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0Y29uc3QgdHJ1c3RJZGVudGlmaWVyID0gYHRydXN0LWRldmljZS0ke2dlbmVyYXRlUmFuZG9tU3RyaW5nKDMyKX1gO1xuXHRcdFx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS5zaWduKGN0eCQxLmNvbnRleHQuc2VjcmV0LCBgJHt1c2VyLmlkfSEke3RydXN0SWRlbnRpZmllcn1gKTtcblx0XHRcdFx0XHRhd2FpdCBjdHgkMS5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0XHRcdGlkZW50aWZpZXI6IHRydXN0SWRlbnRpZmllcixcblx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIG1heEFnZSAqIDFlMylcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhd2FpdCBjdHgkMS5zZXRTaWduZWRDb29raWUodHJ1c3REZXZpY2VDb29raWUubmFtZSwgYCR7dG9rZW59ISR7dHJ1c3RJZGVudGlmaWVyfWAsIGN0eCQxLmNvbnRleHQuc2VjcmV0LCB0cnVzdERldmljZUNvb2tpZS5hdHRyaWJ1dGVzKTtcblx0XHRcdFx0XHRleHBpcmVDb29raWUoY3R4JDEsIGN0eCQxLmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBjdHgkMS5qc29uKHtcblx0XHRcdFx0XHR0b2tlbjogc2Vzc2lvbiQxLnRva2VuLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgkMS5jb250ZXh0Lm9wdGlvbnMsIHVzZXIpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGludmFsaWQsXG5cdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdHNlc3Npb246IG51bGwsXG5cdFx0XHRcdHVzZXJcblx0XHRcdH0sXG5cdFx0XHRrZXk6IHNpZ25lZFR3b0ZhY3RvckNvb2tpZVxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHR2YWxpZDogYXN5bmMgKGN0eCQxKSA9PiB7XG5cdFx0XHRyZXR1cm4gY3R4JDEuanNvbih7XG5cdFx0XHRcdHRva2VuOiBzZXNzaW9uLnNlc3Npb24udG9rZW4sXG5cdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgkMS5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcilcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0aW52YWxpZCxcblx0XHRzZXNzaW9uLFxuXHRcdGtleTogYCR7c2Vzc2lvbi51c2VyLmlkfSEke3Nlc3Npb24uc2Vzc2lvbi5pZH1gXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdmVyaWZ5VHdvRmFjdG9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJpZnktdHdvLWZhY3Rvci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/two-factor/verify-two-factor.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/username/client.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/username/client.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usernameClient: () => (/* binding */ usernameClient)\n/* harmony export */ });\n//#region src/plugins/username/client.ts\nconst usernameClient = () => {\n\treturn {\n\t\tid: \"username\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/sign-in/username\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3VzZXJuYW1lL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdXNlcm5hbWVcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3VzZXJuYW1lL2NsaWVudC50c1xuY29uc3QgdXNlcm5hbWVDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidXNlcm5hbWVcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyOiAocGF0aCkgPT4gcGF0aCA9PT0gXCIvc2lnbi1pbi91c2VybmFtZVwiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1c2VybmFtZUNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/username/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/username/error-codes.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/username/error-codes.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USERNAME_ERROR_CODES: () => (/* binding */ USERNAME_ERROR_CODES)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n//#region src/plugins/username/error-codes.ts\nconst USERNAME_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n\tINVALID_USERNAME_OR_PASSWORD: \"Invalid username or password\",\n\tEMAIL_NOT_VERIFIED: \"Email not verified\",\n\tUNEXPECTED_ERROR: \"Unexpected error\",\n\tUSERNAME_IS_ALREADY_TAKEN: \"Username is already taken. Please try another.\",\n\tUSERNAME_TOO_SHORT: \"Username is too short\",\n\tUSERNAME_TOO_LONG: \"Username is too long\",\n\tINVALID_USERNAME: \"Username is invalid\",\n\tINVALID_DISPLAY_USERNAME: \"Display username is invalid\"\n});\n\n//#endregion\n\n//# sourceMappingURL=error-codes.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3VzZXJuYW1lL2Vycm9yLWNvZGVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyRDs7QUFFM0Q7QUFDQSw2QkFBNkIseUVBQWdCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdXNlcm5hbWVcXGVycm9yLWNvZGVzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVFcnJvckNvZGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy91c2VybmFtZS9lcnJvci1jb2Rlcy50c1xuY29uc3QgVVNFUk5BTUVfRVJST1JfQ09ERVMgPSBkZWZpbmVFcnJvckNvZGVzKHtcblx0SU5WQUxJRF9VU0VSTkFNRV9PUl9QQVNTV09SRDogXCJJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkXCIsXG5cdEVNQUlMX05PVF9WRVJJRklFRDogXCJFbWFpbCBub3QgdmVyaWZpZWRcIixcblx0VU5FWFBFQ1RFRF9FUlJPUjogXCJVbmV4cGVjdGVkIGVycm9yXCIsXG5cdFVTRVJOQU1FX0lTX0FMUkVBRFlfVEFLRU46IFwiVXNlcm5hbWUgaXMgYWxyZWFkeSB0YWtlbi4gUGxlYXNlIHRyeSBhbm90aGVyLlwiLFxuXHRVU0VSTkFNRV9UT09fU0hPUlQ6IFwiVXNlcm5hbWUgaXMgdG9vIHNob3J0XCIsXG5cdFVTRVJOQU1FX1RPT19MT05HOiBcIlVzZXJuYW1lIGlzIHRvbyBsb25nXCIsXG5cdElOVkFMSURfVVNFUk5BTUU6IFwiVXNlcm5hbWUgaXMgaW52YWxpZFwiLFxuXHRJTlZBTElEX0RJU1BMQVlfVVNFUk5BTUU6IFwiRGlzcGxheSB1c2VybmFtZSBpcyBpbnZhbGlkXCJcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFVTRVJOQU1FX0VSUk9SX0NPREVTIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvci1jb2Rlcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/username/error-codes.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/username/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/username/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   USERNAME_ERROR_CODES: () => (/* reexport safe */ _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES),\n/* harmony export */   username: () => (/* binding */ username)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/routes/email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./error-codes.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/username/error-codes.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/plugins/username/schema.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/plugins/username/index.ts\nfunction defaultUsernameValidator(username$1) {\n\treturn /^[a-zA-Z0-9_.]+$/.test(username$1);\n}\nconst signInUsernameBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tusername: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The username of the user\" }),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The password of the user\" }),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().meta({ description: \"Remember the user session\" }).optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n});\nconst isUsernameAvailableBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({ username: zod__WEBPACK_IMPORTED_MODULE_10__.string().meta({ description: \"The username to check\" }) });\nconst username = (options) => {\n\tconst normalizer = (username$1) => {\n\t\tif (options?.usernameNormalization === false) return username$1;\n\t\tif (options?.usernameNormalization) return options.usernameNormalization(username$1);\n\t\treturn username$1.toLowerCase();\n\t};\n\tconst displayUsernameNormalizer = (displayUsername) => {\n\t\treturn options?.displayUsernameNormalization ? options.displayUsernameNormalization(displayUsername) : displayUsername;\n\t};\n\treturn {\n\t\tid: \"username\",\n\t\tinit(ctx) {\n\t\t\treturn { options: { databaseHooks: { user: {\n\t\t\t\tcreate: { async before(user, context) {\n\t\t\t\t\tconst username$1 = \"username\" in user ? user.username : null;\n\t\t\t\t\tconst displayUsername = \"displayUsername\" in user ? user.displayUsername : null;\n\t\t\t\t\treturn { data: {\n\t\t\t\t\t\t...user,\n\t\t\t\t\t\t...username$1 ? { username: normalizer(username$1) } : {},\n\t\t\t\t\t\t...displayUsername ? { displayUsername: displayUsernameNormalizer(displayUsername) } : {}\n\t\t\t\t\t} };\n\t\t\t\t} },\n\t\t\t\tupdate: { async before(user, context) {\n\t\t\t\t\tconst username$1 = \"username\" in user ? user.username : null;\n\t\t\t\t\tconst displayUsername = \"displayUsername\" in user ? user.displayUsername : null;\n\t\t\t\t\treturn { data: {\n\t\t\t\t\t\t...user,\n\t\t\t\t\t\t...username$1 ? { username: normalizer(username$1) } : {},\n\t\t\t\t\t\t...displayUsername ? { displayUsername: displayUsernameNormalizer(displayUsername) } : {}\n\t\t\t\t\t} };\n\t\t\t\t} }\n\t\t\t} } } };\n\t\t},\n\t\tendpoints: {\n\t\t\tsignInUsername: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-in/username\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: signInUsernameBodySchema,\n\t\t\t\tmetadata: { openapi: {\n\t\t\t\t\tsummary: \"Sign in with username\",\n\t\t\t\t\tdescription: \"Sign in with username\",\n\t\t\t\t\tresponses: {\n\t\t\t\t\t\t200: {\n\t\t\t\t\t\t\tdescription: \"Success\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Session token for the authenticated session\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\"token\", \"user\"]\n\t\t\t\t\t\t\t} } }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t422: {\n\t\t\t\t\t\t\tdescription: \"Unprocessable Entity. Validation error\",\n\t\t\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t\t\t} } }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t}, async (ctx) => {\n\t\t\t\tif (!ctx.body.username || !ctx.body.password) {\n\t\t\t\t\tctx.context.logger.error(\"Username or password not found\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME_OR_PASSWORD });\n\t\t\t\t}\n\t\t\t\tconst username$1 = options?.validationOrder?.username === \"pre-normalization\" ? normalizer(ctx.body.username) : ctx.body.username;\n\t\t\t\tconst minUsernameLength = options?.minUsernameLength || 3;\n\t\t\t\tconst maxUsernameLength = options?.maxUsernameLength || 30;\n\t\t\t\tif (username$1.length < minUsernameLength) {\n\t\t\t\t\tctx.context.logger.error(\"Username too short\", { username: username$1 });\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", {\n\t\t\t\t\t\tcode: \"USERNAME_TOO_SHORT\",\n\t\t\t\t\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_SHORT\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (username$1.length > maxUsernameLength) {\n\t\t\t\t\tctx.context.logger.error(\"Username too long\", { username: username$1 });\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_LONG });\n\t\t\t\t}\n\t\t\t\tif (!await (options?.usernameValidator || defaultUsernameValidator)(username$1)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME });\n\t\t\t\tconst user = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"username\",\n\t\t\t\t\t\tvalue: normalizer(username$1)\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!user) {\n\t\t\t\t\tawait ctx.context.password.hash(ctx.body.password);\n\t\t\t\t\tctx.context.logger.error(\"User not found\", { username: username$1 });\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME_OR_PASSWORD });\n\t\t\t\t}\n\t\t\t\tconst account = await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: \"account\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\t\tvalue: user.id\n\t\t\t\t\t}, {\n\t\t\t\t\t\tfield: \"providerId\",\n\t\t\t\t\t\tvalue: \"credential\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME_OR_PASSWORD });\n\t\t\t\tconst currentPassword = account?.password;\n\t\t\t\tif (!currentPassword) {\n\t\t\t\t\tctx.context.logger.error(\"Password not found\", { username: username$1 });\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME_OR_PASSWORD });\n\t\t\t\t}\n\t\t\t\tif (!await ctx.context.password.verify({\n\t\t\t\t\thash: currentPassword,\n\t\t\t\t\tpassword: ctx.body.password\n\t\t\t\t})) {\n\t\t\t\t\tctx.context.logger.error(\"Invalid password\");\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME_OR_PASSWORD });\n\t\t\t\t}\n\t\t\t\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.emailVerified) {\n\t\t\t\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\t\t\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\t\t\t\tconst token = await (0,_api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__.createEmailVerificationToken)(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\t\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\t\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\t\t\tuser,\n\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\ttoken\n\t\t\t\t\t\t}, ctx.request));\n\t\t\t\t\t}\n\t\t\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\t\t\t}\n\t\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.id, ctx.body.rememberMe === false);\n\t\t\t\tif (!session) return ctx.json(null, {\n\t\t\t\t\tstatus: 500,\n\t\t\t\t\tbody: { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION }\n\t\t\t\t});\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t}, ctx.body.rememberMe === false);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\ttoken: session.token,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user)\n\t\t\t\t});\n\t\t\t}),\n\t\t\tisUsernameAvailable: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/is-username-available\", {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tbody: isUsernameAvailableBodySchema\n\t\t\t}, async (ctx) => {\n\t\t\t\tconst username$1 = ctx.body.username;\n\t\t\t\tif (!username$1) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME });\n\t\t\t\tconst minUsernameLength = options?.minUsernameLength || 3;\n\t\t\t\tconst maxUsernameLength = options?.maxUsernameLength || 30;\n\t\t\t\tif (username$1.length < minUsernameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", {\n\t\t\t\t\tcode: \"USERNAME_TOO_SHORT\",\n\t\t\t\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_SHORT\n\t\t\t\t});\n\t\t\t\tif (username$1.length > maxUsernameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_LONG });\n\t\t\t\tif (!await (options?.usernameValidator || defaultUsernameValidator)(username$1)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME });\n\t\t\t\tif (await ctx.context.adapter.findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"username\",\n\t\t\t\t\t\tvalue: normalizer(username$1)\n\t\t\t\t\t}]\n\t\t\t\t})) return ctx.json({ available: false });\n\t\t\t\treturn ctx.json({ available: true });\n\t\t\t})\n\t\t},\n\t\tschema: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.mergeSchema)((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_6__.getSchema)({\n\t\t\tusername: normalizer,\n\t\t\tdisplayUsername: displayUsernameNormalizer\n\t\t}), options?.schema),\n\t\thooks: { before: [{\n\t\t\tmatcher(context) {\n\t\t\t\treturn context.path === \"/sign-up/email\" || context.path === \"/update-user\";\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst username$1 = typeof ctx.body.username === \"string\" && options?.validationOrder?.username === \"post-normalization\" ? normalizer(ctx.body.username) : ctx.body.username;\n\t\t\t\tif (username$1 !== void 0 && typeof username$1 === \"string\") {\n\t\t\t\t\tconst minUsernameLength = options?.minUsernameLength || 3;\n\t\t\t\t\tconst maxUsernameLength = options?.maxUsernameLength || 30;\n\t\t\t\t\tif (username$1.length < minUsernameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", {\n\t\t\t\t\t\tcode: \"USERNAME_TOO_SHORT\",\n\t\t\t\t\t\tmessage: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_SHORT\n\t\t\t\t\t});\n\t\t\t\t\tif (username$1.length > maxUsernameLength) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_TOO_LONG });\n\t\t\t\t\tif (!await (options?.usernameValidator || defaultUsernameValidator)(username$1)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_USERNAME });\n\t\t\t\t\tconst user = await ctx.context.adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"username\",\n\t\t\t\t\t\t\tvalue: username$1\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tconst blockChangeSignUp = ctx.path === \"/sign-up/email\" && user;\n\t\t\t\t\tconst blockChangeUpdateUser = ctx.path === \"/update-user\" && user && ctx.context.session && user.id !== ctx.context.session.session.userId;\n\t\t\t\t\tif (blockChangeSignUp || blockChangeUpdateUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.USERNAME_IS_ALREADY_TAKEN });\n\t\t\t\t}\n\t\t\t\tconst displayUsername = typeof ctx.body.displayUsername === \"string\" && options?.validationOrder?.displayUsername === \"post-normalization\" ? displayUsernameNormalizer(ctx.body.displayUsername) : ctx.body.displayUsername;\n\t\t\t\tif (displayUsername !== void 0 && typeof displayUsername === \"string\") {\n\t\t\t\t\tif (options?.displayUsernameValidator) {\n\t\t\t\t\t\tif (!await options.displayUsernameValidator(displayUsername)) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES.INVALID_DISPLAY_USERNAME });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}, {\n\t\t\tmatcher(context) {\n\t\t\t\treturn context.path === \"/sign-up/email\" || context.path === \"/update-user\";\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tif (ctx.body.username && !ctx.body.displayUsername) ctx.body.displayUsername = ctx.body.username;\n\t\t\t\tif (ctx.body.displayUsername && !ctx.body.username) ctx.body.username = ctx.body.displayUsername;\n\t\t\t})\n\t\t}] },\n\t\toptions,\n\t\t$ERROR_CODES: _error_codes_mjs__WEBPACK_IMPORTED_MODULE_5__.USERNAME_ERROR_CODES\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3VzZXJuYW1lL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQW1FO0FBQ3ZDO0FBQytCO0FBQzRCO0FBQzFEO0FBQzRCO0FBQ2hCO0FBQ2tCO0FBQ3BCO0FBQ2Q7QUFDd0Q7O0FBRWpGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHdDQUFRO0FBQ3pDLFdBQVcsd0NBQVEsVUFBVSx5Q0FBeUM7QUFDdEUsV0FBVyx3Q0FBUSxVQUFVLHlDQUF5QztBQUN0RSxhQUFhLHlDQUFTLFVBQVUsMENBQTBDO0FBQzFFLGNBQWMsd0NBQVEsVUFBVSxnRUFBZ0U7QUFDaEcsQ0FBQztBQUNELHNDQUFzQyx3Q0FBUSxHQUFHLFVBQVUsd0NBQVEsVUFBVSxzQ0FBc0MsR0FBRztBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFdBQVcsaUJBQWlCO0FBQ3hDLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0Esd0JBQXdCLG1DQUFtQyxJQUFJO0FBQy9ELDZCQUE2Qiw4REFBOEQ7QUFDM0Y7QUFDQSxPQUFPO0FBQ1AsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSx3QkFBd0IsbUNBQW1DLElBQUk7QUFDL0QsNkJBQTZCLDhEQUE4RDtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxtQkFBbUIseUVBQWtCO0FBQ3JDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixpQkFBaUI7QUFDakIsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQSxzQkFBc0IsV0FBVztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsZUFBZSxpREFBUSxtQkFBbUIsU0FBUyxrRUFBb0IsK0JBQStCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0JBQXNCO0FBQzVFLGVBQWUsaURBQVE7QUFDdkI7QUFDQSxlQUFlLGtFQUFvQjtBQUNuQyxNQUFNO0FBQ047QUFDQTtBQUNBLHFEQUFxRCxzQkFBc0I7QUFDM0UsZUFBZSxpREFBUSwyQkFBMkIsU0FBUyxrRUFBb0Isb0JBQW9CO0FBQ25HO0FBQ0EsK0ZBQStGLGlEQUFRLDJCQUEyQixTQUFTLGtFQUFvQixtQkFBbUI7QUFDbEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLGtEQUFrRCxzQkFBc0I7QUFDeEUsZUFBZSxpREFBUSxtQkFBbUIsU0FBUyxrRUFBb0IsK0JBQStCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTCw0QkFBNEIsaURBQVEsbUJBQW1CLFNBQVMsa0VBQW9CLCtCQUErQjtBQUNuSDtBQUNBO0FBQ0Esc0RBQXNELHNCQUFzQjtBQUM1RSxlQUFlLGlEQUFRLG1CQUFtQixTQUFTLGtFQUFvQiwrQkFBK0I7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxlQUFlLGlEQUFRLG1CQUFtQixTQUFTLGtFQUFvQiwrQkFBK0I7QUFDdEc7QUFDQTtBQUNBLG1GQUFtRixpREFBUSxnQkFBZ0IsU0FBUyxrRUFBb0IscUJBQXFCO0FBQzdKO0FBQ0EsMEJBQTBCLGdHQUE0QjtBQUN0RCxxQkFBcUIsb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsNEJBQTRCO0FBQ2hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsZUFBZSxpREFBUSxnQkFBZ0IsU0FBUyxrRUFBb0IscUJBQXFCO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTLHFFQUFnQjtBQUN0QyxLQUFLO0FBQ0wsVUFBVSxvRUFBZ0I7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsV0FBVywrREFBZTtBQUMxQixLQUFLO0FBQ0wsSUFBSTtBQUNKLHdCQUF3Qix5RUFBa0I7QUFDMUM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLCtCQUErQixpREFBUSwyQkFBMkIsU0FBUyxrRUFBb0IsbUJBQW1CO0FBQ2xIO0FBQ0E7QUFDQSx5REFBeUQsaURBQVE7QUFDakU7QUFDQSxjQUFjLGtFQUFvQjtBQUNsQyxLQUFLO0FBQ0wseURBQXlELGlEQUFRLDJCQUEyQixTQUFTLGtFQUFvQixvQkFBb0I7QUFDN0ksK0ZBQStGLGlEQUFRLDJCQUEyQixTQUFTLGtFQUFvQixtQkFBbUI7QUFDbEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLLHFCQUFxQixrQkFBa0I7QUFDNUMsc0JBQXNCLGlCQUFpQjtBQUN2QyxJQUFJO0FBQ0osR0FBRztBQUNILFVBQVUsMkRBQVcsQ0FBQyxzREFBUztBQUMvQjtBQUNBO0FBQ0EsR0FBRztBQUNILFdBQVc7QUFDWDtBQUNBO0FBQ0EsSUFBSTtBQUNKLFlBQVksMkVBQW9CO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGlEQUFRO0FBQ2xFO0FBQ0EsZUFBZSxrRUFBb0I7QUFDbkMsTUFBTTtBQUNOLDBEQUEwRCxpREFBUSxrQkFBa0IsU0FBUyxrRUFBb0Isb0JBQW9CO0FBQ3JJLGdHQUFnRyxpREFBUSxrQkFBa0IsU0FBUyxrRUFBb0IsbUJBQW1CO0FBQzFLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQSwrREFBK0QsaURBQVEsa0JBQWtCLFNBQVMsa0VBQW9CLDRCQUE0QjtBQUNsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxpREFBUSxrQkFBa0IsU0FBUyxrRUFBb0IsMkJBQTJCO0FBQ2hLO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHLEdBQUc7QUFDTjtBQUNBLGdCQUFnQixrRUFBb0I7QUFDcEM7QUFDQTs7QUFFQTtBQUMwQztBQUMxQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHVzZXJuYW1lXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWVyZ2VTY2hlbWEsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi4vLi4vYXBpL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVU0VSTkFNRV9FUlJPUl9DT0RFUyB9IGZyb20gXCIuL2Vycm9yLWNvZGVzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50LCBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3VzZXJuYW1lL2luZGV4LnRzXG5mdW5jdGlvbiBkZWZhdWx0VXNlcm5hbWVWYWxpZGF0b3IodXNlcm5hbWUkMSkge1xuXHRyZXR1cm4gL15bYS16QS1aMC05Xy5dKyQvLnRlc3QodXNlcm5hbWUkMSk7XG59XG5jb25zdCBzaWduSW5Vc2VybmFtZUJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdHVzZXJuYW1lOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlcm5hbWUgb2YgdGhlIHVzZXJcIiB9KSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCBvZiB0aGUgdXNlclwiIH0pLFxuXHRyZW1lbWJlck1lOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiUmVtZW1iZXIgdGhlIHVzZXIgc2Vzc2lvblwiIH0pLm9wdGlvbmFsKCksXG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKClcbn0pO1xuY29uc3QgaXNVc2VybmFtZUF2YWlsYWJsZUJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7IHVzZXJuYW1lOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlcm5hbWUgdG8gY2hlY2tcIiB9KSB9KTtcbmNvbnN0IHVzZXJuYW1lID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgbm9ybWFsaXplciA9ICh1c2VybmFtZSQxKSA9PiB7XG5cdFx0aWYgKG9wdGlvbnM/LnVzZXJuYW1lTm9ybWFsaXphdGlvbiA9PT0gZmFsc2UpIHJldHVybiB1c2VybmFtZSQxO1xuXHRcdGlmIChvcHRpb25zPy51c2VybmFtZU5vcm1hbGl6YXRpb24pIHJldHVybiBvcHRpb25zLnVzZXJuYW1lTm9ybWFsaXphdGlvbih1c2VybmFtZSQxKTtcblx0XHRyZXR1cm4gdXNlcm5hbWUkMS50b0xvd2VyQ2FzZSgpO1xuXHR9O1xuXHRjb25zdCBkaXNwbGF5VXNlcm5hbWVOb3JtYWxpemVyID0gKGRpc3BsYXlVc2VybmFtZSkgPT4ge1xuXHRcdHJldHVybiBvcHRpb25zPy5kaXNwbGF5VXNlcm5hbWVOb3JtYWxpemF0aW9uID8gb3B0aW9ucy5kaXNwbGF5VXNlcm5hbWVOb3JtYWxpemF0aW9uKGRpc3BsYXlVc2VybmFtZSkgOiBkaXNwbGF5VXNlcm5hbWU7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidXNlcm5hbWVcIixcblx0XHRpbml0KGN0eCkge1xuXHRcdFx0cmV0dXJuIHsgb3B0aW9uczogeyBkYXRhYmFzZUhvb2tzOiB7IHVzZXI6IHtcblx0XHRcdFx0Y3JlYXRlOiB7IGFzeW5jIGJlZm9yZSh1c2VyLCBjb250ZXh0KSB7XG5cdFx0XHRcdFx0Y29uc3QgdXNlcm5hbWUkMSA9IFwidXNlcm5hbWVcIiBpbiB1c2VyID8gdXNlci51c2VybmFtZSA6IG51bGw7XG5cdFx0XHRcdFx0Y29uc3QgZGlzcGxheVVzZXJuYW1lID0gXCJkaXNwbGF5VXNlcm5hbWVcIiBpbiB1c2VyID8gdXNlci5kaXNwbGF5VXNlcm5hbWUgOiBudWxsO1xuXHRcdFx0XHRcdHJldHVybiB7IGRhdGE6IHtcblx0XHRcdFx0XHRcdC4uLnVzZXIsXG5cdFx0XHRcdFx0XHQuLi51c2VybmFtZSQxID8geyB1c2VybmFtZTogbm9ybWFsaXplcih1c2VybmFtZSQxKSB9IDoge30sXG5cdFx0XHRcdFx0XHQuLi5kaXNwbGF5VXNlcm5hbWUgPyB7IGRpc3BsYXlVc2VybmFtZTogZGlzcGxheVVzZXJuYW1lTm9ybWFsaXplcihkaXNwbGF5VXNlcm5hbWUpIH0gOiB7fVxuXHRcdFx0XHRcdH0gfTtcblx0XHRcdFx0fSB9LFxuXHRcdFx0XHR1cGRhdGU6IHsgYXN5bmMgYmVmb3JlKHVzZXIsIGNvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCB1c2VybmFtZSQxID0gXCJ1c2VybmFtZVwiIGluIHVzZXIgPyB1c2VyLnVzZXJuYW1lIDogbnVsbDtcblx0XHRcdFx0XHRjb25zdCBkaXNwbGF5VXNlcm5hbWUgPSBcImRpc3BsYXlVc2VybmFtZVwiIGluIHVzZXIgPyB1c2VyLmRpc3BsYXlVc2VybmFtZSA6IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuIHsgZGF0YToge1xuXHRcdFx0XHRcdFx0Li4udXNlcixcblx0XHRcdFx0XHRcdC4uLnVzZXJuYW1lJDEgPyB7IHVzZXJuYW1lOiBub3JtYWxpemVyKHVzZXJuYW1lJDEpIH0gOiB7fSxcblx0XHRcdFx0XHRcdC4uLmRpc3BsYXlVc2VybmFtZSA/IHsgZGlzcGxheVVzZXJuYW1lOiBkaXNwbGF5VXNlcm5hbWVOb3JtYWxpemVyKGRpc3BsYXlVc2VybmFtZSkgfSA6IHt9XG5cdFx0XHRcdFx0fSB9O1xuXHRcdFx0XHR9IH1cblx0XHRcdH0gfSB9IH07XG5cdFx0fSxcblx0XHRlbmRwb2ludHM6IHtcblx0XHRcdHNpZ25JblVzZXJuYW1lOiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvc2lnbi1pbi91c2VybmFtZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IHNpZ25JblVzZXJuYW1lQm9keVNjaGVtYSxcblx0XHRcdFx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdFx0XHRcdHN1bW1hcnk6IFwiU2lnbiBpbiB3aXRoIHVzZXJuYW1lXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2lnbiBpbiB3aXRoIHVzZXJuYW1lXCIsXG5cdFx0XHRcdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcdFx0XHQyMDA6IHtcblx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiB0b2tlbiBmb3IgdGhlIGF1dGhlbnRpY2F0ZWQgc2Vzc2lvblwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0dXNlcjogeyAkcmVmOiBcIiMvY29tcG9uZW50cy9zY2hlbWFzL1VzZXJcIiB9XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRyZXF1aXJlZDogW1widG9rZW5cIiwgXCJ1c2VyXCJdXG5cdFx0XHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0NDIyOiB7XG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5LiBWYWxpZGF0aW9uIGVycm9yXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfVxuXHRcdFx0fSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRcdFx0XHRpZiAoIWN0eC5ib2R5LnVzZXJuYW1lIHx8ICFjdHguYm9keS5wYXNzd29yZCkge1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXJuYW1lIG9yIHBhc3N3b3JkIG5vdCBmb3VuZFwiKTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBVU0VSTkFNRV9FUlJPUl9DT0RFUy5JTlZBTElEX1VTRVJOQU1FX09SX1BBU1NXT1JEIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHVzZXJuYW1lJDEgPSBvcHRpb25zPy52YWxpZGF0aW9uT3JkZXI/LnVzZXJuYW1lID09PSBcInByZS1ub3JtYWxpemF0aW9uXCIgPyBub3JtYWxpemVyKGN0eC5ib2R5LnVzZXJuYW1lKSA6IGN0eC5ib2R5LnVzZXJuYW1lO1xuXHRcdFx0XHRjb25zdCBtaW5Vc2VybmFtZUxlbmd0aCA9IG9wdGlvbnM/Lm1pblVzZXJuYW1lTGVuZ3RoIHx8IDM7XG5cdFx0XHRcdGNvbnN0IG1heFVzZXJuYW1lTGVuZ3RoID0gb3B0aW9ucz8ubWF4VXNlcm5hbWVMZW5ndGggfHwgMzA7XG5cdFx0XHRcdGlmICh1c2VybmFtZSQxLmxlbmd0aCA8IG1pblVzZXJuYW1lTGVuZ3RoKSB7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlcm5hbWUgdG9vIHNob3J0XCIsIHsgdXNlcm5hbWU6IHVzZXJuYW1lJDEgfSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwge1xuXHRcdFx0XHRcdFx0Y29kZTogXCJVU0VSTkFNRV9UT09fU0hPUlRcIixcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFVTRVJOQU1FX0VSUk9SX0NPREVTLlVTRVJOQU1FX1RPT19TSE9SVFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh1c2VybmFtZSQxLmxlbmd0aCA+IG1heFVzZXJuYW1lTGVuZ3RoKSB7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlcm5hbWUgdG9vIGxvbmdcIiwgeyB1c2VybmFtZTogdXNlcm5hbWUkMSB9KTtcblx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTlBST0NFU1NBQkxFX0VOVElUWVwiLCB7IG1lc3NhZ2U6IFVTRVJOQU1FX0VSUk9SX0NPREVTLlVTRVJOQU1FX1RPT19MT05HIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghYXdhaXQgKG9wdGlvbnM/LnVzZXJuYW1lVmFsaWRhdG9yIHx8IGRlZmF1bHRVc2VybmFtZVZhbGlkYXRvcikodXNlcm5hbWUkMSkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRSB9KTtcblx0XHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcm5hbWVcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBub3JtYWxpemVyKHVzZXJuYW1lJDEpXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghdXNlcikge1xuXHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2goY3R4LmJvZHkucGFzc3dvcmQpO1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgbm90IGZvdW5kXCIsIHsgdXNlcm5hbWU6IHVzZXJuYW1lJDEgfSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRV9PUl9QQVNTV09SRCB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBhY2NvdW50ID0gYXdhaXQgY3R4LmNvbnRleHQuYWRhcHRlci5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRmaWVsZDogXCJ1c2VySWRcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB1c2VyLmlkXG5cdFx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwicHJvdmlkZXJJZFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IFwiY3JlZGVudGlhbFwiXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICghYWNjb3VudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRV9PUl9QQVNTV09SRCB9KTtcblx0XHRcdFx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gYWNjb3VudD8ucGFzc3dvcmQ7XG5cdFx0XHRcdGlmICghY3VycmVudFBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgbm90IGZvdW5kXCIsIHsgdXNlcm5hbWU6IHVzZXJuYW1lJDEgfSk7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRV9PUl9QQVNTV09SRCB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0XHRcdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdFx0XHRcdHBhc3N3b3JkOiBjdHguYm9keS5wYXNzd29yZFxuXHRcdFx0XHR9KSkge1xuXHRcdFx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkludmFsaWQgcGFzc3dvcmRcIik7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRV9PUl9QQVNTV09SRCB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxBbmRQYXNzd29yZD8ucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uICYmICF1c2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRcdFx0XHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IFVTRVJOQU1FX0VSUk9SX0NPREVTLkVNQUlMX05PVF9WRVJJRklFRCB9KTtcblx0XHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxWZXJpZmljYXRpb24/LnNlbmRPblNpZ25Jbikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgdXNlci5lbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRcdFx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRcdFx0XHR1cmwsXG5cdFx0XHRcdFx0XHRcdHRva2VuXG5cdFx0XHRcdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBVU0VSTkFNRV9FUlJPUl9DT0RFUy5FTUFJTF9OT1RfVkVSSUZJRUQgfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIuaWQsIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0XHRcdFx0aWYgKCFzZXNzaW9uKSByZXR1cm4gY3R4Lmpzb24obnVsbCwge1xuXHRcdFx0XHRcdHN0YXR1czogNTAwLFxuXHRcdFx0XHRcdGJvZHk6IHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHRcdHVzZXJcblx0XHRcdFx0fSwgY3R4LmJvZHkucmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdHRva2VuOiBzZXNzaW9uLnRva2VuLFxuXHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1c2VyKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pLFxuXHRcdFx0aXNVc2VybmFtZUF2YWlsYWJsZTogY3JlYXRlQXV0aEVuZHBvaW50KFwiL2lzLXVzZXJuYW1lLWF2YWlsYWJsZVwiLCB7XG5cdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdGJvZHk6IGlzVXNlcm5hbWVBdmFpbGFibGVCb2R5U2NoZW1hXG5cdFx0XHR9LCBhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHVzZXJuYW1lJDEgPSBjdHguYm9keS51c2VybmFtZTtcblx0XHRcdFx0aWYgKCF1c2VybmFtZSQxKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTlBST0NFU1NBQkxFX0VOVElUWVwiLCB7IG1lc3NhZ2U6IFVTRVJOQU1FX0VSUk9SX0NPREVTLklOVkFMSURfVVNFUk5BTUUgfSk7XG5cdFx0XHRcdGNvbnN0IG1pblVzZXJuYW1lTGVuZ3RoID0gb3B0aW9ucz8ubWluVXNlcm5hbWVMZW5ndGggfHwgMztcblx0XHRcdFx0Y29uc3QgbWF4VXNlcm5hbWVMZW5ndGggPSBvcHRpb25zPy5tYXhVc2VybmFtZUxlbmd0aCB8fCAzMDtcblx0XHRcdFx0aWYgKHVzZXJuYW1lJDEubGVuZ3RoIDwgbWluVXNlcm5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHtcblx0XHRcdFx0XHRjb2RlOiBcIlVTRVJOQU1FX1RPT19TSE9SVFwiLFxuXHRcdFx0XHRcdG1lc3NhZ2U6IFVTRVJOQU1FX0VSUk9SX0NPREVTLlVTRVJOQU1FX1RPT19TSE9SVFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHVzZXJuYW1lJDEubGVuZ3RoID4gbWF4VXNlcm5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuVVNFUk5BTUVfVE9PX0xPTkcgfSk7XG5cdFx0XHRcdGlmICghYXdhaXQgKG9wdGlvbnM/LnVzZXJuYW1lVmFsaWRhdG9yIHx8IGRlZmF1bHRVc2VybmFtZVZhbGlkYXRvcikodXNlcm5hbWUkMSkpIHRocm93IG5ldyBBUElFcnJvcihcIlVOUFJPQ0VTU0FCTEVfRU5USVRZXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuSU5WQUxJRF9VU0VSTkFNRSB9KTtcblx0XHRcdFx0aWYgKGF3YWl0IGN0eC5jb250ZXh0LmFkYXB0ZXIuZmluZE9uZSh7XG5cdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcm5hbWVcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBub3JtYWxpemVyKHVzZXJuYW1lJDEpXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0fSkpIHJldHVybiBjdHguanNvbih7IGF2YWlsYWJsZTogZmFsc2UgfSk7XG5cdFx0XHRcdHJldHVybiBjdHguanNvbih7IGF2YWlsYWJsZTogdHJ1ZSB9KTtcblx0XHRcdH0pXG5cdFx0fSxcblx0XHRzY2hlbWE6IG1lcmdlU2NoZW1hKGdldFNjaGVtYSh7XG5cdFx0XHR1c2VybmFtZTogbm9ybWFsaXplcixcblx0XHRcdGRpc3BsYXlVc2VybmFtZTogZGlzcGxheVVzZXJuYW1lTm9ybWFsaXplclxuXHRcdH0pLCBvcHRpb25zPy5zY2hlbWEpLFxuXHRcdGhvb2tzOiB7IGJlZm9yZTogW3tcblx0XHRcdG1hdGNoZXIoY29udGV4dCkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5wYXRoID09PSBcIi9zaWduLXVwL2VtYWlsXCIgfHwgY29udGV4dC5wYXRoID09PSBcIi91cGRhdGUtdXNlclwiO1xuXHRcdFx0fSxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0Y29uc3QgdXNlcm5hbWUkMSA9IHR5cGVvZiBjdHguYm9keS51c2VybmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBvcHRpb25zPy52YWxpZGF0aW9uT3JkZXI/LnVzZXJuYW1lID09PSBcInBvc3Qtbm9ybWFsaXphdGlvblwiID8gbm9ybWFsaXplcihjdHguYm9keS51c2VybmFtZSkgOiBjdHguYm9keS51c2VybmFtZTtcblx0XHRcdFx0aWYgKHVzZXJuYW1lJDEgIT09IHZvaWQgMCAmJiB0eXBlb2YgdXNlcm5hbWUkMSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGNvbnN0IG1pblVzZXJuYW1lTGVuZ3RoID0gb3B0aW9ucz8ubWluVXNlcm5hbWVMZW5ndGggfHwgMztcblx0XHRcdFx0XHRjb25zdCBtYXhVc2VybmFtZUxlbmd0aCA9IG9wdGlvbnM/Lm1heFVzZXJuYW1lTGVuZ3RoIHx8IDMwO1xuXHRcdFx0XHRcdGlmICh1c2VybmFtZSQxLmxlbmd0aCA8IG1pblVzZXJuYW1lTGVuZ3RoKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRcdFx0XHRjb2RlOiBcIlVTRVJOQU1FX1RPT19TSE9SVFwiLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuVVNFUk5BTUVfVE9PX1NIT1JUXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKHVzZXJuYW1lJDEubGVuZ3RoID4gbWF4VXNlcm5hbWVMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuVVNFUk5BTUVfVE9PX0xPTkcgfSk7XG5cdFx0XHRcdFx0aWYgKCFhd2FpdCAob3B0aW9ucz8udXNlcm5hbWVWYWxpZGF0b3IgfHwgZGVmYXVsdFVzZXJuYW1lVmFsaWRhdG9yKSh1c2VybmFtZSQxKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBVU0VSTkFNRV9FUlJPUl9DT0RFUy5JTlZBTElEX1VTRVJOQU1FIH0pO1xuXHRcdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5hZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcInVzZXJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiB1c2VybmFtZSQxXG5cdFx0XHRcdFx0XHR9XVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGNvbnN0IGJsb2NrQ2hhbmdlU2lnblVwID0gY3R4LnBhdGggPT09IFwiL3NpZ24tdXAvZW1haWxcIiAmJiB1c2VyO1xuXHRcdFx0XHRcdGNvbnN0IGJsb2NrQ2hhbmdlVXBkYXRlVXNlciA9IGN0eC5wYXRoID09PSBcIi91cGRhdGUtdXNlclwiICYmIHVzZXIgJiYgY3R4LmNvbnRleHQuc2Vzc2lvbiAmJiB1c2VyLmlkICE9PSBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24udXNlcklkO1xuXHRcdFx0XHRcdGlmIChibG9ja0NoYW5nZVNpZ25VcCB8fCBibG9ja0NoYW5nZVVwZGF0ZVVzZXIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogVVNFUk5BTUVfRVJST1JfQ09ERVMuVVNFUk5BTUVfSVNfQUxSRUFEWV9UQUtFTiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBkaXNwbGF5VXNlcm5hbWUgPSB0eXBlb2YgY3R4LmJvZHkuZGlzcGxheVVzZXJuYW1lID09PSBcInN0cmluZ1wiICYmIG9wdGlvbnM/LnZhbGlkYXRpb25PcmRlcj8uZGlzcGxheVVzZXJuYW1lID09PSBcInBvc3Qtbm9ybWFsaXphdGlvblwiID8gZGlzcGxheVVzZXJuYW1lTm9ybWFsaXplcihjdHguYm9keS5kaXNwbGF5VXNlcm5hbWUpIDogY3R4LmJvZHkuZGlzcGxheVVzZXJuYW1lO1xuXHRcdFx0XHRpZiAoZGlzcGxheVVzZXJuYW1lICE9PSB2b2lkIDAgJiYgdHlwZW9mIGRpc3BsYXlVc2VybmFtZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zPy5kaXNwbGF5VXNlcm5hbWVWYWxpZGF0b3IpIHtcblx0XHRcdFx0XHRcdGlmICghYXdhaXQgb3B0aW9ucy5kaXNwbGF5VXNlcm5hbWVWYWxpZGF0b3IoZGlzcGxheVVzZXJuYW1lKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBVU0VSTkFNRV9FUlJPUl9DT0RFUy5JTlZBTElEX0RJU1BMQVlfVVNFUk5BTUUgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH0sIHtcblx0XHRcdG1hdGNoZXIoY29udGV4dCkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5wYXRoID09PSBcIi9zaWduLXVwL2VtYWlsXCIgfHwgY29udGV4dC5wYXRoID09PSBcIi91cGRhdGUtdXNlclwiO1xuXHRcdFx0fSxcblx0XHRcdGhhbmRsZXI6IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0XHRcdFx0aWYgKGN0eC5ib2R5LnVzZXJuYW1lICYmICFjdHguYm9keS5kaXNwbGF5VXNlcm5hbWUpIGN0eC5ib2R5LmRpc3BsYXlVc2VybmFtZSA9IGN0eC5ib2R5LnVzZXJuYW1lO1xuXHRcdFx0XHRpZiAoY3R4LmJvZHkuZGlzcGxheVVzZXJuYW1lICYmICFjdHguYm9keS51c2VybmFtZSkgY3R4LmJvZHkudXNlcm5hbWUgPSBjdHguYm9keS5kaXNwbGF5VXNlcm5hbWU7XG5cdFx0XHR9KVxuXHRcdH1dIH0sXG5cdFx0b3B0aW9ucyxcblx0XHQkRVJST1JfQ09ERVM6IFVTRVJOQU1FX0VSUk9SX0NPREVTXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFVTRVJOQU1FX0VSUk9SX0NPREVTLCB1c2VybmFtZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/username/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/plugins/username/schema.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/username/schema.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSchema: () => (/* binding */ getSchema)\n/* harmony export */ });\n//#region src/plugins/username/schema.ts\nconst getSchema = (normalizer) => {\n\treturn { user: { fields: {\n\t\tusername: {\n\t\t\ttype: \"string\",\n\t\t\trequired: false,\n\t\t\tsortable: true,\n\t\t\tunique: true,\n\t\t\treturned: true,\n\t\t\ttransform: { input(value) {\n\t\t\t\treturn typeof value !== \"string\" ? value : normalizer.username(value);\n\t\t\t} }\n\t\t},\n\t\tdisplayUsername: {\n\t\t\ttype: \"string\",\n\t\t\trequired: false,\n\t\t\ttransform: { input(value) {\n\t\t\t\treturn typeof value !== \"string\" ? value : normalizer.displayUsername(value);\n\t\t\t} }\n\t\t}\n\t} } };\n};\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3VzZXJuYW1lL3NjaGVtYS5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSxVQUFVLFFBQVE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFx1c2VybmFtZVxcc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvdXNlcm5hbWUvc2NoZW1hLnRzXG5jb25zdCBnZXRTY2hlbWEgPSAobm9ybWFsaXplcikgPT4ge1xuXHRyZXR1cm4geyB1c2VyOiB7IGZpZWxkczoge1xuXHRcdHVzZXJuYW1lOiB7XG5cdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0c29ydGFibGU6IHRydWUsXG5cdFx0XHR1bmlxdWU6IHRydWUsXG5cdFx0XHRyZXR1cm5lZDogdHJ1ZSxcblx0XHRcdHRyYW5zZm9ybTogeyBpbnB1dCh2YWx1ZSkge1xuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiID8gdmFsdWUgOiBub3JtYWxpemVyLnVzZXJuYW1lKHZhbHVlKTtcblx0XHRcdH0gfVxuXHRcdH0sXG5cdFx0ZGlzcGxheVVzZXJuYW1lOiB7XG5cdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0dHJhbnNmb3JtOiB7IGlucHV0KHZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiB0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgPyB2YWx1ZSA6IG5vcm1hbGl6ZXIuZGlzcGxheVVzZXJuYW1lKHZhbHVlKTtcblx0XHRcdH0gfVxuXHRcdH1cblx0fSB9IH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/plugins/username/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/state.mjs":
/*!*************************************************!*\
  !*** ./node_modules/better-auth/dist/state.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StateError: () => (/* binding */ StateError),\n/* harmony export */   generateGenericState: () => (/* binding */ generateGenericState),\n/* harmony export */   parseGenericState: () => (/* binding */ parseGenericState)\n/* harmony export */ });\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n\n//#region src/state.ts\nconst stateDataSchema = zod__WEBPACK_IMPORTED_MODULE_4__.looseObject({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\tcodeVerifier: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\terrorURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\tnewUserURL: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional(),\n\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_4__.number(),\n\tlink: zod__WEBPACK_IMPORTED_MODULE_4__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_4__.coerce.string()\n\t}).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_4__.boolean().optional()\n});\nvar StateError = class extends _better_auth_core_error__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError {\n\tcode;\n\tdetails;\n\tconstructor(message, options) {\n\t\tsuper(message, options);\n\t\tthis.code = options.code;\n\t\tthis.details = options.details;\n\t}\n};\nasync function generateGenericState(c, stateData, settings) {\n\tconst state = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_0__.generateRandomString)(32);\n\tif (c.context.oauthConfig.storeStateStrategy === \"cookie\") {\n\t\tconst encryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncrypt)({\n\t\t\tkey: c.context.secret,\n\t\t\tdata: JSON.stringify(stateData)\n\t\t});\n\t\tconst stateCookie$1 = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\", { maxAge: 600 });\n\t\tc.setCookie(stateCookie$1.name, encryptedData, stateCookie$1.attributes);\n\t\treturn {\n\t\t\tstate,\n\t\t\tcodeVerifier: stateData.codeVerifier\n\t\t};\n\t}\n\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\", { maxAge: 300 });\n\tawait c.setSignedCookie(stateCookie.name, state, c.context.secret, stateCookie.attributes);\n\tconst expiresAt = /* @__PURE__ */ new Date();\n\texpiresAt.setMinutes(expiresAt.getMinutes() + 10);\n\tconst verification = await c.context.internalAdapter.createVerificationValue({\n\t\tvalue: JSON.stringify(stateData),\n\t\tidentifier: state,\n\t\texpiresAt\n\t});\n\tif (!verification) throw new StateError(\"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\", { code: \"state_generation_error\" });\n\treturn {\n\t\tstate: verification.identifier,\n\t\tcodeVerifier: stateData.codeVerifier\n\t};\n}\nasync function parseGenericState(c, state, settings) {\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\tlet parsedData;\n\tif (storeStateStrategy === \"cookie\") {\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"oauth_state\");\n\t\tconst encryptedData = c.getCookie(stateCookie.name);\n\t\tif (!encryptedData) throw new StateError(\"State mismatch: auth state cookie not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\ttry {\n\t\t\tconst decryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecrypt)({\n\t\t\t\tkey: c.context.secret,\n\t\t\t\tdata: encryptedData\n\t\t\t});\n\t\t\tparsedData = stateDataSchema.parse(JSON.parse(decryptedData));\n\t\t} catch (error) {\n\t\t\tthrow new StateError(\"State invalid: Failed to decrypt or parse auth state\", {\n\t\t\t\tcode: \"state_invalid\",\n\t\t\t\tdetails: { state },\n\t\t\t\tcause: error\n\t\t\t});\n\t\t}\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t} else {\n\t\tconst data = await c.context.internalAdapter.findVerificationValue(state);\n\t\tif (!data) throw new StateError(\"State mismatch: verification not found\", {\n\t\t\tcode: \"state_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\tparsedData = stateDataSchema.parse(JSON.parse(data.value));\n\t\tconst stateCookie = c.context.createAuthCookie(settings?.cookieName ?? \"state\");\n\t\tconst stateCookieValue = await c.getSignedCookie(stateCookie.name, c.context.secret);\n\t\tif (!c.context.oauthConfig.skipStateCookieCheck && (!stateCookieValue || stateCookieValue !== state)) throw new StateError(\"State mismatch: State not persisted correctly\", {\n\t\t\tcode: \"state_security_mismatch\",\n\t\t\tdetails: { state }\n\t\t});\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.expireCookie)(c, stateCookie);\n\t\tawait c.context.internalAdapter.deleteVerificationValue(data.id);\n\t}\n\tif (parsedData.expiresAt < Date.now()) throw new StateError(\"Invalid state: request expired\", {\n\t\tcode: \"state_mismatch\",\n\t\tdetails: { expiresAt: parsedData.expiresAt }\n\t});\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9zdGF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDYTtBQUNyQjtBQUNPO0FBQ2pDOztBQUV6QjtBQUNBLHdCQUF3Qiw0Q0FBYTtBQUNyQyxjQUFjLHVDQUFRO0FBQ3RCLGVBQWUsdUNBQVE7QUFDdkIsV0FBVyx1Q0FBUTtBQUNuQixhQUFhLHVDQUFRO0FBQ3JCLFlBQVksdUNBQVE7QUFDcEIsT0FBTyx1Q0FBUTtBQUNmLFNBQVMsdUNBQVE7QUFDakIsVUFBVSw4Q0FBZTtBQUN6QixFQUFFO0FBQ0YsZ0JBQWdCLHdDQUFTO0FBQ3pCLENBQUM7QUFDRCwrQkFBK0Isb0VBQWU7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3RUFBb0I7QUFDbkM7QUFDQSw4QkFBOEIsbUVBQWdCO0FBQzlDO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsNEZBQTRGLGFBQWE7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GLGFBQWE7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysa0xBQWtMLGdDQUFnQztBQUNsTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxHQUFHO0FBQ0g7QUFDQSwrQkFBK0IsbUVBQWdCO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUUsZ0VBQVk7QUFDZCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLEdBQUc7QUFDSCxFQUFFLGdFQUFZO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDK0Q7QUFDL0QiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxzdGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9jcnlwdG8vcmFuZG9tLm1qc1wiO1xuaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGV4cGlyZUNvb2tpZSB9IGZyb20gXCIuL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL3N0YXRlLnRzXG5jb25zdCBzdGF0ZURhdGFTY2hlbWEgPSB6Lmxvb3NlT2JqZWN0KHtcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCksXG5cdGNvZGVWZXJpZmllcjogei5zdHJpbmcoKSxcblx0ZXJyb3JVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0bmV3VXNlclVSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRleHBpcmVzQXQ6IHoubnVtYmVyKCksXG5cdGxpbms6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5zdHJpbmcoKSxcblx0XHR1c2VySWQ6IHouY29lcmNlLnN0cmluZygpXG5cdH0pLm9wdGlvbmFsKCksXG5cdHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm9wdGlvbmFsKClcbn0pO1xudmFyIFN0YXRlRXJyb3IgPSBjbGFzcyBleHRlbmRzIEJldHRlckF1dGhFcnJvciB7XG5cdGNvZGU7XG5cdGRldGFpbHM7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG9wdGlvbnMpIHtcblx0XHRzdXBlcihtZXNzYWdlLCBvcHRpb25zKTtcblx0XHR0aGlzLmNvZGUgPSBvcHRpb25zLmNvZGU7XG5cdFx0dGhpcy5kZXRhaWxzID0gb3B0aW9ucy5kZXRhaWxzO1xuXHR9XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVHZW5lcmljU3RhdGUoYywgc3RhdGVEYXRhLCBzZXR0aW5ncykge1xuXHRjb25zdCBzdGF0ZSA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyKTtcblx0aWYgKGMuY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3kgPT09IFwiY29va2llXCIpIHtcblx0XHRjb25zdCBlbmNyeXB0ZWREYXRhID0gYXdhaXQgc3ltbWV0cmljRW5jcnlwdCh7XG5cdFx0XHRrZXk6IGMuY29udGV4dC5zZWNyZXQsXG5cdFx0XHRkYXRhOiBKU09OLnN0cmluZ2lmeShzdGF0ZURhdGEpXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWUkMSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwib2F1dGhfc3RhdGVcIiwgeyBtYXhBZ2U6IDYwMCB9KTtcblx0XHRjLnNldENvb2tpZShzdGF0ZUNvb2tpZSQxLm5hbWUsIGVuY3J5cHRlZERhdGEsIHN0YXRlQ29va2llJDEuYXR0cmlidXRlcyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0YXRlLFxuXHRcdFx0Y29kZVZlcmlmaWVyOiBzdGF0ZURhdGEuY29kZVZlcmlmaWVyXG5cdFx0fTtcblx0fVxuXHRjb25zdCBzdGF0ZUNvb2tpZSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwic3RhdGVcIiwgeyBtYXhBZ2U6IDMwMCB9KTtcblx0YXdhaXQgYy5zZXRTaWduZWRDb29raWUoc3RhdGVDb29raWUubmFtZSwgc3RhdGUsIGMuY29udGV4dC5zZWNyZXQsIHN0YXRlQ29va2llLmF0dHJpYnV0ZXMpO1xuXHRjb25zdCBleHBpcmVzQXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0ZXhwaXJlc0F0LnNldE1pbnV0ZXMoZXhwaXJlc0F0LmdldE1pbnV0ZXMoKSArIDEwKTtcblx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0dmFsdWU6IEpTT04uc3RyaW5naWZ5KHN0YXRlRGF0YSksXG5cdFx0aWRlbnRpZmllcjogc3RhdGUsXG5cdFx0ZXhwaXJlc0F0XG5cdH0pO1xuXHRpZiAoIXZlcmlmaWNhdGlvbikgdGhyb3cgbmV3IFN0YXRlRXJyb3IoXCJVbmFibGUgdG8gY3JlYXRlIHZlcmlmaWNhdGlvbi4gTWFrZSBzdXJlIHRoZSBkYXRhYmFzZSBhZGFwdGVyIGlzIHByb3Blcmx5IHdvcmtpbmcgYW5kIHRoZXJlIGlzIGEgdmVyaWZpY2F0aW9uIHRhYmxlIGluIHRoZSBkYXRhYmFzZVwiLCB7IGNvZGU6IFwic3RhdGVfZ2VuZXJhdGlvbl9lcnJvclwiIH0pO1xuXHRyZXR1cm4ge1xuXHRcdHN0YXRlOiB2ZXJpZmljYXRpb24uaWRlbnRpZmllcixcblx0XHRjb2RlVmVyaWZpZXI6IHN0YXRlRGF0YS5jb2RlVmVyaWZpZXJcblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlR2VuZXJpY1N0YXRlKGMsIHN0YXRlLCBzZXR0aW5ncykge1xuXHRjb25zdCBzdG9yZVN0YXRlU3RyYXRlZ3kgPSBjLmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5O1xuXHRsZXQgcGFyc2VkRGF0YTtcblx0aWYgKHN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikge1xuXHRcdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoc2V0dGluZ3M/LmNvb2tpZU5hbWUgPz8gXCJvYXV0aF9zdGF0ZVwiKTtcblx0XHRjb25zdCBlbmNyeXB0ZWREYXRhID0gYy5nZXRDb29raWUoc3RhdGVDb29raWUubmFtZSk7XG5cdFx0aWYgKCFlbmNyeXB0ZWREYXRhKSB0aHJvdyBuZXcgU3RhdGVFcnJvcihcIlN0YXRlIG1pc21hdGNoOiBhdXRoIHN0YXRlIGNvb2tpZSBub3QgZm91bmRcIiwge1xuXHRcdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdFx0ZGV0YWlsczogeyBzdGF0ZSB9XG5cdFx0fSk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRlY3J5cHRlZERhdGEgPSBhd2FpdCBzeW1tZXRyaWNEZWNyeXB0KHtcblx0XHRcdFx0a2V5OiBjLmNvbnRleHQuc2VjcmV0LFxuXHRcdFx0XHRkYXRhOiBlbmNyeXB0ZWREYXRhXG5cdFx0XHR9KTtcblx0XHRcdHBhcnNlZERhdGEgPSBzdGF0ZURhdGFTY2hlbWEucGFyc2UoSlNPTi5wYXJzZShkZWNyeXB0ZWREYXRhKSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgaW52YWxpZDogRmFpbGVkIHRvIGRlY3J5cHQgb3IgcGFyc2UgYXV0aCBzdGF0ZVwiLCB7XG5cdFx0XHRcdGNvZGU6IFwic3RhdGVfaW52YWxpZFwiLFxuXHRcdFx0XHRkZXRhaWxzOiB7IHN0YXRlIH0sXG5cdFx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGV4cGlyZUNvb2tpZShjLCBzdGF0ZUNvb2tpZSk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKHN0YXRlKTtcblx0XHRpZiAoIWRhdGEpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgbWlzbWF0Y2g6IHZlcmlmaWNhdGlvbiBub3QgZm91bmRcIiwge1xuXHRcdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdFx0ZGV0YWlsczogeyBzdGF0ZSB9XG5cdFx0fSk7XG5cdFx0cGFyc2VkRGF0YSA9IHN0YXRlRGF0YVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKGRhdGEudmFsdWUpKTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKHNldHRpbmdzPy5jb29raWVOYW1lID8/IFwic3RhdGVcIik7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWVWYWx1ZSA9IGF3YWl0IGMuZ2V0U2lnbmVkQ29va2llKHN0YXRlQ29va2llLm5hbWUsIGMuY29udGV4dC5zZWNyZXQpO1xuXHRcdGlmICghYy5jb250ZXh0Lm9hdXRoQ29uZmlnLnNraXBTdGF0ZUNvb2tpZUNoZWNrICYmICghc3RhdGVDb29raWVWYWx1ZSB8fCBzdGF0ZUNvb2tpZVZhbHVlICE9PSBzdGF0ZSkpIHRocm93IG5ldyBTdGF0ZUVycm9yKFwiU3RhdGUgbWlzbWF0Y2g6IFN0YXRlIG5vdCBwZXJzaXN0ZWQgY29ycmVjdGx5XCIsIHtcblx0XHRcdGNvZGU6IFwic3RhdGVfc2VjdXJpdHlfbWlzbWF0Y2hcIixcblx0XHRcdGRldGFpbHM6IHsgc3RhdGUgfVxuXHRcdH0pO1xuXHRcdGV4cGlyZUNvb2tpZShjLCBzdGF0ZUNvb2tpZSk7XG5cdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVWZXJpZmljYXRpb25WYWx1ZShkYXRhLmlkKTtcblx0fVxuXHRpZiAocGFyc2VkRGF0YS5leHBpcmVzQXQgPCBEYXRlLm5vdygpKSB0aHJvdyBuZXcgU3RhdGVFcnJvcihcIkludmFsaWQgc3RhdGU6IHJlcXVlc3QgZXhwaXJlZFwiLCB7XG5cdFx0Y29kZTogXCJzdGF0ZV9taXNtYXRjaFwiLFxuXHRcdGRldGFpbHM6IHsgZXhwaXJlc0F0OiBwYXJzZWREYXRhLmV4cGlyZXNBdCB9XG5cdH0pO1xuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBTdGF0ZUVycm9yLCBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgcGFyc2VHZW5lcmljU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/state.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/boolean.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/boolean.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toBoolean: () => (/* binding */ toBoolean)\n/* harmony export */ });\n//#region src/utils/boolean.ts\nfunction toBoolean(value) {\n\treturn value === \"true\" || value === true;\n}\n\n//#endregion\n\n//# sourceMappingURL=boolean.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9ib29sZWFuLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcYm9vbGVhbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9ib29sZWFuLnRzXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcblx0cmV0dXJuIHZhbHVlID09PSBcInRydWVcIiB8fCB2YWx1ZSA9PT0gdHJ1ZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b0Jvb2xlYW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/boolean.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/constants.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/constants.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SECRET: () => (/* binding */ DEFAULT_SECRET)\n/* harmony export */ });\n//#region src/utils/constants.ts\nconst DEFAULT_SECRET = \"better-auth-secret-12345678901234567890\";\n\n//#endregion\n\n//# sourceMappingURL=constants.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9jb25zdGFudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGNvbnN0YW50cy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9jb25zdGFudHMudHNcbmNvbnN0IERFRkFVTFRfU0VDUkVUID0gXCJiZXR0ZXItYXV0aC1zZWNyZXQtMTIzNDU2Nzg5MDEyMzQ1Njc4OTBcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBERUZBVUxUX1NFQ1JFVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/constants.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/date.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/date.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDate: () => (/* binding */ getDate)\n/* harmony export */ });\n//#region src/utils/date.ts\nconst getDate = (span, unit = \"ms\") => {\n\treturn new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\n//#endregion\n\n//# sourceMappingURL=date.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9kYXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcZGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9kYXRlLnRzXG5jb25zdCBnZXREYXRlID0gKHNwYW4sIHVuaXQgPSBcIm1zXCIpID0+IHtcblx0cmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyAodW5pdCA9PT0gXCJzZWNcIiA/IHNwYW4gKiAxZTMgOiBzcGFuKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldERhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/date.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/get-request-ip.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIp: () => (/* binding */ getIp)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n//#region src/utils/get-request-ip.ts\nconst LOCALHOST_IP = \"127.0.0.1\";\nfunction getIp(req, options) {\n\tif (options.advanced?.ipAddress?.disableIpTracking) return null;\n\tconst headers = \"headers\" in req ? req.headers : req;\n\tconst ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders || [\"x-forwarded-for\"];\n\tfor (const key of ipHeaders) {\n\t\tconst value = \"get\" in headers ? headers.get(key) : headers[key];\n\t\tif (typeof value === \"string\") {\n\t\t\tconst ip = value.split(\",\")[0].trim();\n\t\t\tif ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.isValidIP)(ip)) return (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_1__.normalizeIP)(ip, { ipv6Subnet: options.advanced?.ipAddress?.ipv6Subnet });\n\t\t}\n\t}\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)() || (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) return LOCALHOST_IP;\n\treturn null;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-request-ip.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9nZXQtcmVxdWVzdC1pcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQ0c7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxrRUFBUyxhQUFhLG9FQUFXLE9BQU8scURBQXFEO0FBQ3BHO0FBQ0E7QUFDQSxLQUFLLDZEQUFNLE1BQU0sb0VBQWE7QUFDOUI7QUFDQTs7QUFFQTtBQUNpQjtBQUNqQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxnZXQtcmVxdWVzdC1pcC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNEZXZlbG9wbWVudCwgaXNUZXN0IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgaXNWYWxpZElQLCBub3JtYWxpemVJUCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2dldC1yZXF1ZXN0LWlwLnRzXG5jb25zdCBMT0NBTEhPU1RfSVAgPSBcIjEyNy4wLjAuMVwiO1xuZnVuY3Rpb24gZ2V0SXAocmVxLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmRpc2FibGVJcFRyYWNraW5nKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgaGVhZGVycyA9IFwiaGVhZGVyc1wiIGluIHJlcSA/IHJlcS5oZWFkZXJzIDogcmVxO1xuXHRjb25zdCBpcEhlYWRlcnMgPSBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwQWRkcmVzc0hlYWRlcnMgfHwgW1wieC1mb3J3YXJkZWQtZm9yXCJdO1xuXHRmb3IgKGNvbnN0IGtleSBvZiBpcEhlYWRlcnMpIHtcblx0XHRjb25zdCB2YWx1ZSA9IFwiZ2V0XCIgaW4gaGVhZGVycyA/IGhlYWRlcnMuZ2V0KGtleSkgOiBoZWFkZXJzW2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc3QgaXAgPSB2YWx1ZS5zcGxpdChcIixcIilbMF0udHJpbSgpO1xuXHRcdFx0aWYgKGlzVmFsaWRJUChpcCkpIHJldHVybiBub3JtYWxpemVJUChpcCwgeyBpcHY2U3VibmV0OiBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwdjZTdWJuZXQgfSk7XG5cdFx0fVxuXHR9XG5cdGlmIChpc1Rlc3QoKSB8fCBpc0RldmVsb3BtZW50KCkpIHJldHVybiBMT0NBTEhPU1RfSVA7XG5cdHJldHVybiBudWxsO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldElwIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtcmVxdWVzdC1pcC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/hashing.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/hashing.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toChecksumAddress: () => (/* binding */ toChecksumAddress)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @noble/hashes/utils.js */ \"(rsc)/./node_modules/@noble/hashes/utils.js\");\n/* harmony import */ var _noble_hashes_sha3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @noble/hashes/sha3.js */ \"(rsc)/./node_modules/@noble/hashes/sha3.js\");\n\n\n\n//#region src/utils/hashing.ts\n/**\n* TS implementation of ERC-55 (\"Mixed-case checksum address encoding\") using @noble/hashes\n* @param address - The address to convert to a checksum address\n* @returns The checksummed address\n*/\nfunction toChecksumAddress(address) {\n\taddress = address.toLowerCase().replace(\"0x\", \"\");\n\tconst hash = [...(0,_noble_hashes_sha3_js__WEBPACK_IMPORTED_MODULE_0__.keccak_256)((0,_noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_1__.utf8ToBytes)(address))].map((v) => v.toString(16).padStart(2, \"0\")).join(\"\");\n\tlet ret = \"0x\";\n\tfor (let i = 0; i < 40; i++) if (parseInt(hash[i], 16) >= 8) ret += address[i].toUpperCase();\n\telse ret += address[i];\n\treturn ret;\n}\n\n//#endregion\n\n//# sourceMappingURL=hashing.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9oYXNoaW5nLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDRjs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixpRUFBVSxDQUFDLG1FQUFXO0FBQ3hDO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQzZCO0FBQzdCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGhhc2hpbmcubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV0ZjhUb0J5dGVzIH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvdXRpbHMuanNcIjtcbmltcG9ydCB7IGtlY2Nha18yNTYgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zaGEzLmpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvaGFzaGluZy50c1xuLyoqXG4qIFRTIGltcGxlbWVudGF0aW9uIG9mIEVSQy01NSAoXCJNaXhlZC1jYXNlIGNoZWNrc3VtIGFkZHJlc3MgZW5jb2RpbmdcIikgdXNpbmcgQG5vYmxlL2hhc2hlc1xuKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSBhZGRyZXNzIHRvIGNvbnZlcnQgdG8gYSBjaGVja3N1bSBhZGRyZXNzXG4qIEByZXR1cm5zIFRoZSBjaGVja3N1bW1lZCBhZGRyZXNzXG4qL1xuZnVuY3Rpb24gdG9DaGVja3N1bUFkZHJlc3MoYWRkcmVzcykge1xuXHRhZGRyZXNzID0gYWRkcmVzcy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCIweFwiLCBcIlwiKTtcblx0Y29uc3QgaGFzaCA9IFsuLi5rZWNjYWtfMjU2KHV0ZjhUb0J5dGVzKGFkZHJlc3MpKV0ubWFwKCh2KSA9PiB2LnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpLmpvaW4oXCJcIik7XG5cdGxldCByZXQgPSBcIjB4XCI7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgNDA7IGkrKykgaWYgKHBhcnNlSW50KGhhc2hbaV0sIDE2KSA+PSA4KSByZXQgKz0gYWRkcmVzc1tpXS50b1VwcGVyQ2FzZSgpO1xuXHRlbHNlIHJldCArPSBhZGRyZXNzW2ldO1xuXHRyZXR1cm4gcmV0O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHRvQ2hlY2tzdW1BZGRyZXNzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXNoaW5nLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/hashing.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/hide-metadata.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HIDE_METADATA: () => (/* binding */ HIDE_METADATA)\n/* harmony export */ });\n//#region src/utils/hide-metadata.ts\nconst HIDE_METADATA = { scope: \"server\" };\n\n//#endregion\n\n//# sourceMappingURL=hide-metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9oaWRlLW1ldGFkYXRhLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGhpZGUtbWV0YWRhdGEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvaGlkZS1tZXRhZGF0YS50c1xuY29uc3QgSElERV9NRVRBREFUQSA9IHsgc2NvcGU6IFwic2VydmVyXCIgfTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBISURFX01FVEFEQVRBIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaWRlLW1ldGFkYXRhLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateId: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.generateId)\n/* harmony export */ });\n/* harmony import */ var _state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../state.mjs */ \"(rsc)/./node_modules/better-auth/dist/state.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBdUU7QUFDUDtBQUNaO0FBQ2lCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXGluZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZUdlbmVyaWNTdGF0ZSwgcGFyc2VHZW5lcmljU3RhdGUgfSBmcm9tIFwiLi4vc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuZXhwb3J0IHsgZ2VuZXJhdGVJZCQxIGFzIGdlbmVyYXRlSWQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/is-atom.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/is-atom.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n//#region src/utils/is-atom.ts\nfunction isAtom(value) {\n\treturn typeof value === \"object\" && value !== null && \"get\" in value && typeof value.get === \"function\" && \"lc\" in value && typeof value.lc === \"number\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pcy1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaXMtYXRvbS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1hdG9tLnRzXG5mdW5jdGlvbiBpc0F0b20odmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcImdldFwiIGluIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5nZXQgPT09IFwiZnVuY3Rpb25cIiAmJiBcImxjXCIgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLmxjID09PSBcIm51bWJlclwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtYXRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/is-atom.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/is-promise.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPromise: () => (/* binding */ isPromise)\n/* harmony export */ });\n//#region src/utils/is-promise.ts\nfunction isPromise(obj) {\n\treturn !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-promise.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pcy1wcm9taXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaXMtcHJvbWlzZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1wcm9taXNlLnRzXG5mdW5jdGlvbiBpc1Byb21pc2Uob2JqKSB7XG5cdHJldHVybiAhIW9iaiAmJiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzUHJvbWlzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcHJvbWlzZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/middleware-response.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middlewareResponse: () => (/* binding */ middlewareResponse)\n/* harmony export */ });\n//#region src/utils/middleware-response.ts\nconst middlewareResponse = ({ message, status }) => ({ response: new Response(JSON.stringify({ message }), { status }) });\n\n//#endregion\n\n//# sourceMappingURL=middleware-response.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9taWRkbGV3YXJlLXJlc3BvbnNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSw4QkFBOEIsaUJBQWlCLFFBQVEsd0NBQXdDLFNBQVMsS0FBSyxRQUFRLEdBQUc7O0FBRXhIO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXG1pZGRsZXdhcmUtcmVzcG9uc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvbWlkZGxld2FyZS1yZXNwb25zZS50c1xuY29uc3QgbWlkZGxld2FyZVJlc3BvbnNlID0gKHsgbWVzc2FnZSwgc3RhdHVzIH0pID0+ICh7IHJlc3BvbnNlOiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pLCB7IHN0YXR1cyB9KSB9KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtaWRkbGV3YXJlUmVzcG9uc2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZGRsZXdhcmUtcmVzcG9uc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/middleware-response.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/password.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/password.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkPassword: () => (/* binding */ checkPassword),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/utils/password.ts\nasync function validatePassword(ctx, data) {\n\tconst credentialAccount = (await ctx.context.internalAdapter.findAccounts(data.userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword) return false;\n\treturn await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: data.password\n\t});\n}\nasync function checkPassword(userId, c) {\n\tconst credentialAccount = (await c.context.internalAdapter.findAccounts(userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword || !c.body.password) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"No password credential found\" });\n\tif (!await c.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: c.body.password\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"Invalid password\" });\n\treturn true;\n}\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9wYXNzd29yZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGlEQUFRLGtCQUFrQix5Q0FBeUM7QUFDOUk7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQiw2QkFBNkI7QUFDdEU7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHV0aWxzXFxwYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9wYXNzd29yZC50c1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZChjdHgsIGRhdGEpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhkYXRhLnVzZXJJZCkpPy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcblx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50IHx8ICFjdXJyZW50UGFzc3dvcmQpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkXG5cdH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tQYXNzd29yZCh1c2VySWQsIGMpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHModXNlcklkKSk/LmZpbmQoKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3JlZGVudGlhbEFjY291bnQgfHwgIWN1cnJlbnRQYXNzd29yZCB8fCAhYy5ib2R5LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiTm8gcGFzc3dvcmQgY3JlZGVudGlhbCBmb3VuZFwiIH0pO1xuXHRpZiAoIWF3YWl0IGMuY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcblx0XHRwYXNzd29yZDogYy5ib2R5LnBhc3N3b3JkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiSW52YWxpZCBwYXNzd29yZFwiIH0pO1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGVja1Bhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/plugin-helper.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/plugin-helper.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEndpointResponse: () => (/* binding */ getEndpointResponse)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/utils/plugin-helper.ts\nconst getEndpointResponse = async (ctx) => {\n\tconst returned = ctx.context.returned;\n\tif (!returned) return null;\n\tif (returned instanceof Response) {\n\t\tif (returned.status !== 200) return null;\n\t\treturn await returned.clone().json();\n\t}\n\tif (returned instanceof better_call__WEBPACK_IMPORTED_MODULE_0__.APIError) return null;\n\treturn returned;\n};\n\n//#endregion\n\n//# sourceMappingURL=plugin-helper.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9wbHVnaW4taGVscGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1Qzs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpREFBUTtBQUNqQztBQUNBOztBQUVBO0FBQytCO0FBQy9CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHBsdWdpbi1oZWxwZXIubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvcGx1Z2luLWhlbHBlci50c1xuY29uc3QgZ2V0RW5kcG9pbnRSZXNwb25zZSA9IGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgcmV0dXJuZWQgPSBjdHguY29udGV4dC5yZXR1cm5lZDtcblx0aWYgKCFyZXR1cm5lZCkgcmV0dXJuIG51bGw7XG5cdGlmIChyZXR1cm5lZCBpbnN0YW5jZW9mIFJlc3BvbnNlKSB7XG5cdFx0aWYgKHJldHVybmVkLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gbnVsbDtcblx0XHRyZXR1cm4gYXdhaXQgcmV0dXJuZWQuY2xvbmUoKS5qc29uKCk7XG5cdH1cblx0aWYgKHJldHVybmVkIGluc3RhbmNlb2YgQVBJRXJyb3IpIHJldHVybiBudWxsO1xuXHRyZXR1cm4gcmV0dXJuZWQ7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEVuZHBvaW50UmVzcG9uc2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBsdWdpbi1oZWxwZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/plugin-helper.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/shim.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/shim.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimContext: () => (/* binding */ shimContext)\n/* harmony export */ });\n//#region src/utils/shim.ts\nconst shimContext = (originalObject, newContext) => {\n\tconst shimmedObj = {};\n\tfor (const [key, value] of Object.entries(originalObject)) {\n\t\tshimmedObj[key] = (ctx) => {\n\t\t\treturn value({\n\t\t\t\t...ctx,\n\t\t\t\tcontext: {\n\t\t\t\t\t...newContext,\n\t\t\t\t\t...ctx.context\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tshimmedObj[key].path = value.path;\n\t\tshimmedObj[key].method = value.method;\n\t\tshimmedObj[key].options = value.options;\n\t\tshimmedObj[key].headers = value.headers;\n\t}\n\treturn shimmedObj;\n};\n\n//#endregion\n\n//# sourceMappingURL=shim.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9zaGltLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHNoaW0ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvc2hpbS50c1xuY29uc3Qgc2hpbUNvbnRleHQgPSAob3JpZ2luYWxPYmplY3QsIG5ld0NvbnRleHQpID0+IHtcblx0Y29uc3Qgc2hpbW1lZE9iaiA9IHt9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhvcmlnaW5hbE9iamVjdCkpIHtcblx0XHRzaGltbWVkT2JqW2tleV0gPSAoY3R4KSA9PiB7XG5cdFx0XHRyZXR1cm4gdmFsdWUoe1xuXHRcdFx0XHQuLi5jdHgsXG5cdFx0XHRcdGNvbnRleHQ6IHtcblx0XHRcdFx0XHQuLi5uZXdDb250ZXh0LFxuXHRcdFx0XHRcdC4uLmN0eC5jb250ZXh0XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH07XG5cdFx0c2hpbW1lZE9ialtrZXldLnBhdGggPSB2YWx1ZS5wYXRoO1xuXHRcdHNoaW1tZWRPYmpba2V5XS5tZXRob2QgPSB2YWx1ZS5tZXRob2Q7XG5cdFx0c2hpbW1lZE9ialtrZXldLm9wdGlvbnMgPSB2YWx1ZS5vcHRpb25zO1xuXHRcdHNoaW1tZWRPYmpba2V5XS5oZWFkZXJzID0gdmFsdWUuaGVhZGVycztcblx0fVxuXHRyZXR1cm4gc2hpbW1lZE9iajtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2hpbUNvbnRleHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW0ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/shim.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/time.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/time.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ms: () => (/* binding */ ms),\n/* harmony export */   sec: () => (/* binding */ sec)\n/* harmony export */ });\n//#region src/utils/time.ts\nconst SEC = 1e3;\nconst MIN = SEC * 60;\nconst HOUR = MIN * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;\nfunction parse(value) {\n\tconst match = REGEX.exec(value);\n\tif (!match || match[4] && match[1]) throw new TypeError(`Invalid time string format: \"${value}\". Use formats like \"7d\", \"30m\", \"1 hour\", etc.`);\n\tconst n = parseFloat(match[2]);\n\tconst unit = match[3].toLowerCase();\n\tlet result;\n\tswitch (unit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\":\n\t\t\tresult = n * YEAR;\n\t\t\tbreak;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\":\n\t\t\tresult = n * MONTH;\n\t\t\tbreak;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\":\n\t\t\tresult = n * WEEK;\n\t\t\tbreak;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\":\n\t\t\tresult = n * DAY;\n\t\t\tbreak;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\":\n\t\t\tresult = n * HOUR;\n\t\t\tbreak;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\":\n\t\t\tresult = n * MIN;\n\t\t\tbreak;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\":\n\t\t\tresult = n * SEC;\n\t\t\tbreak;\n\t\tdefault: throw new TypeError(`Unknown time unit: \"${unit}\"`);\n\t}\n\tif (match[1] === \"-\" || match[4] === \"ago\") return -result;\n\treturn result;\n}\n/**\n* Parse a time string and return the value in milliseconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in milliseconds\n* @throws TypeError if the string format is invalid\n*\n* @example\n* ms(\"1d\")          // 86400000\n* ms(\"2 hours\")     // 7200000\n* ms(\"30s\")         // 30000\n* ms(\"2 hours ago\") // -7200000\n*/\nfunction ms(value) {\n\treturn parse(value);\n}\n/**\n* Parse a time string and return the value in seconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in seconds (rounded)\n* @throws TypeError if the string format is invalid\n*\n* @example\n* sec(\"1d\")          // 86400\n* sec(\"2 hours\")     // 7200\n* sec(\"-30s\")        // -30\n* sec(\"2 hours ago\") // -7200\n*/\nfunction sec(value) {\n\treturn Math.round(parse(value) / 1e3);\n}\n\n//#endregion\n\n//# sourceMappingURL=time.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy90aW1lLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RkFBeUYsTUFBTTtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHRpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGltZS50c1xuY29uc3QgU0VDID0gMWUzO1xuY29uc3QgTUlOID0gU0VDICogNjA7XG5jb25zdCBIT1VSID0gTUlOICogNjA7XG5jb25zdCBEQVkgPSBIT1VSICogMjQ7XG5jb25zdCBXRUVLID0gREFZICogNztcbmNvbnN0IE1PTlRIID0gREFZICogMzA7XG5jb25zdCBZRUFSID0gREFZICogMzY1LjI1O1xuY29uc3QgUkVHRVggPSAvXihcXCt8XFwtKT8gPyhcXGQrfFxcZCtcXC5cXGQrKSA/KHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8bW9udGhzP3xtb3x5ZWFycz98eXJzP3x5KSg/OiAoYWdvfGZyb20gbm93KSk/JC9pO1xuZnVuY3Rpb24gcGFyc2UodmFsdWUpIHtcblx0Y29uc3QgbWF0Y2ggPSBSRUdFWC5leGVjKHZhbHVlKTtcblx0aWYgKCFtYXRjaCB8fCBtYXRjaFs0XSAmJiBtYXRjaFsxXSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB0aW1lIHN0cmluZyBmb3JtYXQ6IFwiJHt2YWx1ZX1cIi4gVXNlIGZvcm1hdHMgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIGV0Yy5gKTtcblx0Y29uc3QgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuXHRjb25zdCB1bml0ID0gbWF0Y2hbM10udG9Mb3dlckNhc2UoKTtcblx0bGV0IHJlc3VsdDtcblx0c3dpdGNoICh1bml0KSB7XG5cdFx0Y2FzZSBcInllYXJzXCI6XG5cdFx0Y2FzZSBcInllYXJcIjpcblx0XHRjYXNlIFwieXJzXCI6XG5cdFx0Y2FzZSBcInlyXCI6XG5cdFx0Y2FzZSBcInlcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBZRUFSO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1vbnRoc1wiOlxuXHRcdGNhc2UgXCJtb250aFwiOlxuXHRcdGNhc2UgXCJtb1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIE1PTlRIO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIndlZWtzXCI6XG5cdFx0Y2FzZSBcIndlZWtcIjpcblx0XHRjYXNlIFwid1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIFdFRUs7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZGF5c1wiOlxuXHRcdGNhc2UgXCJkYXlcIjpcblx0XHRjYXNlIFwiZFwiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIERBWTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJob3Vyc1wiOlxuXHRcdGNhc2UgXCJob3VyXCI6XG5cdFx0Y2FzZSBcImhyc1wiOlxuXHRcdGNhc2UgXCJoclwiOlxuXHRcdGNhc2UgXCJoXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogSE9VUjtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJtaW51dGVzXCI6XG5cdFx0Y2FzZSBcIm1pbnV0ZVwiOlxuXHRcdGNhc2UgXCJtaW5zXCI6XG5cdFx0Y2FzZSBcIm1pblwiOlxuXHRcdGNhc2UgXCJtXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogTUlOO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInNlY29uZHNcIjpcblx0XHRjYXNlIFwic2Vjb25kXCI6XG5cdFx0Y2FzZSBcInNlY3NcIjpcblx0XHRjYXNlIFwic2VjXCI6XG5cdFx0Y2FzZSBcInNcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBTRUM7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIHRpbWUgdW5pdDogXCIke3VuaXR9XCJgKTtcblx0fVxuXHRpZiAobWF0Y2hbMV0gPT09IFwiLVwiIHx8IG1hdGNoWzRdID09PSBcImFnb1wiKSByZXR1cm4gLXJlc3VsdDtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbipcbiogQHBhcmFtIHZhbHVlIC0gQSB0aW1lIHN0cmluZyBsaWtlIFwiN2RcIiwgXCIzMG1cIiwgXCIxIGhvdXJcIiwgXCIyIGhvdXJzIGFnb1wiXG4qIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUgaW4gbWlsbGlzZWNvbmRzXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogbXMoXCIxZFwiKSAgICAgICAgICAvLyA4NjQwMDAwMFxuKiBtcyhcIjIgaG91cnNcIikgICAgIC8vIDcyMDAwMDBcbiogbXMoXCIzMHNcIikgICAgICAgICAvLyAzMDAwMFxuKiBtcyhcIjIgaG91cnMgYWdvXCIpIC8vIC03MjAwMDAwXG4qL1xuZnVuY3Rpb24gbXModmFsdWUpIHtcblx0cmV0dXJuIHBhcnNlKHZhbHVlKTtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIHNlY29uZHMuXG4qXG4qIEBwYXJhbSB2YWx1ZSAtIEEgdGltZSBzdHJpbmcgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIFwiMiBob3VycyBhZ29cIlxuKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlIGluIHNlY29uZHMgKHJvdW5kZWQpXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogc2VjKFwiMWRcIikgICAgICAgICAgLy8gODY0MDBcbiogc2VjKFwiMiBob3Vyc1wiKSAgICAgLy8gNzIwMFxuKiBzZWMoXCItMzBzXCIpICAgICAgICAvLyAtMzBcbiogc2VjKFwiMiBob3VycyBhZ29cIikgLy8gLTcyMDBcbiovXG5mdW5jdGlvbiBzZWModmFsdWUpIHtcblx0cmV0dXJuIE1hdGgucm91bmQocGFyc2UodmFsdWUpIC8gMWUzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtcywgc2VjIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/time.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/url.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/url.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy91cmwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QztBQUNjOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9FQUFlLHNCQUFzQixJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsb0VBQWUsc0JBQXNCLElBQUk7QUFDNUgsR0FBRztBQUNILHVCQUF1QixvRUFBZTtBQUN0QyxZQUFZLG9FQUFlLHNCQUFzQixJQUFJLHVDQUF1QyxjQUFjO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEtBQUs7QUFDL0MsV0FBVyxXQUFXLEVBQUUsS0FBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsS0FBSyx5Q0FBeUMsS0FBSyx1QkFBdUIsSUFBSSwyQkFBMkIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLFFBQVEsSUFBSSxnREFBZ0QsSUFBSSx3Q0FBd0MsSUFBSTtBQUMxUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQUcsb0JBQW9CLHNEQUFHLGdDQUFnQyxzREFBRywyQkFBMkIsc0RBQUcsZ0NBQWdDLHNEQUFHLDBCQUEwQixzREFBRyxvQkFBb0Isc0RBQUc7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQixLQUFLLFlBQVk7QUFDeEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHVybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/url.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/wildcard.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   wildcardMatch: () => (/* binding */ wildcardMatch)\n/* harmony export */ });\n//#region src/utils/wildcard.ts\n/**\n* Escapes a character if it has a special meaning in regular expressions\n* and returns the character as is if it doesn't\n*/\nfunction escapeRegExpChar(char) {\n\tif (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") return `\\\\${char}`;\n\telse return char;\n}\n/**\n* Escapes all characters in a given string that have a special meaning in regular expressions\n*/\nfunction escapeRegExpString(str) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) result += escapeRegExpChar(str[i]);\n\treturn result;\n}\n/**\n* Transforms one or more glob patterns into a RegExp pattern\n*/\nfunction transform(pattern, separator = true) {\n\tif (Array.isArray(pattern)) return `(?:${pattern.map((p) => `^${transform(p, separator)}$`).join(\"|\")})`;\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\tif (separator === true) {\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else wildcard = `[^${separatorMatcher}]`;\n\t}\n\tconst requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tconst optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\tconst segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tconst segment = segments[s];\n\t\tconst nextSegment = segments[s + 1];\n\t\tlet currentSeparator = \"\";\n\t\tif (!segment && s > 0) continue;\n\t\tif (separator) if (s === segments.length - 1) currentSeparator = optionalSeparator;\n\t\telse if (nextSegment !== \"**\") currentSeparator = requiredSeparator;\n\t\telse currentSeparator = \"\";\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tconst char = segment[c];\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") result += wildcard;\n\t\t\telse if (char === \"*\") result += `${wildcard}*?`;\n\t\t\telse result += escapeRegExpChar(char);\n\t\t}\n\t\tresult += currentSeparator;\n\t}\n\treturn result;\n}\nfunction isMatch(regexp, sample) {\n\tif (typeof sample !== \"string\") throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\treturn regexp.test(sample);\n}\n/**\n* Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n* The isMatch function takes a sample string as its only argument and returns `true`\n* if the string matches the pattern(s).\n*\n* ```js\n* wildcardMatch('src/*.js')('src/index.js') //=> true\n* ```\n*\n* ```js\n* const isMatch = wildcardMatch('*.example.com', '.')\n* isMatch('foo.example.com') //=> true\n* isMatch('foo.bar.com') //=> false\n* ```\n*/\nfunction wildcardMatch(pattern, options) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`);\n\tif (typeof options === \"string\" || typeof options === \"boolean\") options = { separator: options };\n\tif (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`);\n\toptions = options || {};\n\tif (options.separator === \"\\\\\") throw new Error(\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\");\n\tconst regexpPattern = transform(pattern, options.separator);\n\tconst regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\tconst fn = isMatch.bind(null, regexp);\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\n//#endregion\n\n//# sourceMappingURL=wildcard.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy93aWxkY2FyZC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdMQUFnTCxnQkFBZ0IsZ0VBQWdFLEtBQUs7QUFDclE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx1QkFBdUIsd0JBQXdCLGNBQWM7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlCQUFpQjtBQUM3QyxxQkFBcUIsaUJBQWlCO0FBQ3RDLElBQUkscUJBQXFCLGlCQUFpQjtBQUMxQztBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0QsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTLElBQUksaUJBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVDQUF1QyxTQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGVBQWU7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0tBQW9LLGdCQUFnQjtBQUNwTCw4RUFBOEU7QUFDOUUsd1BBQXdQLGdCQUFnQjtBQUN4UTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsY0FBYztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcd2lsZGNhcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvd2lsZGNhcmQudHNcbi8qKlxuKiBFc2NhcGVzIGEgY2hhcmFjdGVyIGlmIGl0IGhhcyBhIHNwZWNpYWwgbWVhbmluZyBpbiByZWd1bGFyIGV4cHJlc3Npb25zXG4qIGFuZCByZXR1cm5zIHRoZSBjaGFyYWN0ZXIgYXMgaXMgaWYgaXQgZG9lc24ndFxuKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cENoYXIoY2hhcikge1xuXHRpZiAoY2hhciA9PT0gXCItXCIgfHwgY2hhciA9PT0gXCJeXCIgfHwgY2hhciA9PT0gXCIkXCIgfHwgY2hhciA9PT0gXCIrXCIgfHwgY2hhciA9PT0gXCIuXCIgfHwgY2hhciA9PT0gXCIoXCIgfHwgY2hhciA9PT0gXCIpXCIgfHwgY2hhciA9PT0gXCJ8XCIgfHwgY2hhciA9PT0gXCJbXCIgfHwgY2hhciA9PT0gXCJdXCIgfHwgY2hhciA9PT0gXCJ7XCIgfHwgY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCIqXCIgfHwgY2hhciA9PT0gXCI/XCIgfHwgY2hhciA9PT0gXCJcXFxcXCIpIHJldHVybiBgXFxcXCR7Y2hhcn1gO1xuXHRlbHNlIHJldHVybiBjaGFyO1xufVxuLyoqXG4qIEVzY2FwZXMgYWxsIGNoYXJhY3RlcnMgaW4gYSBnaXZlbiBzdHJpbmcgdGhhdCBoYXZlIGEgc3BlY2lhbCBtZWFuaW5nIGluIHJlZ3VsYXIgZXhwcmVzc2lvbnNcbiovXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHBTdHJpbmcoc3RyKSB7XG5cdGxldCByZXN1bHQgPSBcIlwiO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgcmVzdWx0ICs9IGVzY2FwZVJlZ0V4cENoYXIoc3RyW2ldKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBUcmFuc2Zvcm1zIG9uZSBvciBtb3JlIGdsb2IgcGF0dGVybnMgaW50byBhIFJlZ0V4cCBwYXR0ZXJuXG4qL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHBhdHRlcm4sIHNlcGFyYXRvciA9IHRydWUpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHJldHVybiBgKD86JHtwYXR0ZXJuLm1hcCgocCkgPT4gYF4ke3RyYW5zZm9ybShwLCBzZXBhcmF0b3IpfSRgKS5qb2luKFwifFwiKX0pYDtcblx0bGV0IHNlcGFyYXRvclNwbGl0dGVyID0gXCJcIjtcblx0bGV0IHNlcGFyYXRvck1hdGNoZXIgPSBcIlwiO1xuXHRsZXQgd2lsZGNhcmQgPSBcIi5cIjtcblx0aWYgKHNlcGFyYXRvciA9PT0gdHJ1ZSkge1xuXHRcdHNlcGFyYXRvclNwbGl0dGVyID0gXCIvXCI7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IFwiWy9cXFxcXFxcXF1cIjtcblx0XHR3aWxkY2FyZCA9IFwiW14vXFxcXFxcXFxdXCI7XG5cdH0gZWxzZSBpZiAoc2VwYXJhdG9yKSB7XG5cdFx0c2VwYXJhdG9yU3BsaXR0ZXIgPSBzZXBhcmF0b3I7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGVzY2FwZVJlZ0V4cFN0cmluZyhzZXBhcmF0b3JTcGxpdHRlcik7XG5cdFx0aWYgKHNlcGFyYXRvck1hdGNoZXIubGVuZ3RoID4gMSkge1xuXHRcdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGAoPzoke3NlcGFyYXRvck1hdGNoZXJ9KWA7XG5cdFx0XHR3aWxkY2FyZCA9IGAoKD8hJHtzZXBhcmF0b3JNYXRjaGVyfSkuKWA7XG5cdFx0fSBlbHNlIHdpbGRjYXJkID0gYFteJHtzZXBhcmF0b3JNYXRjaGVyfV1gO1xuXHR9XG5cdGNvbnN0IHJlcXVpcmVkU2VwYXJhdG9yID0gc2VwYXJhdG9yID8gYCR7c2VwYXJhdG9yTWF0Y2hlcn0rP2AgOiBcIlwiO1xuXHRjb25zdCBvcHRpb25hbFNlcGFyYXRvciA9IHNlcGFyYXRvciA/IGAke3NlcGFyYXRvck1hdGNoZXJ9Kj9gIDogXCJcIjtcblx0Y29uc3Qgc2VnbWVudHMgPSBzZXBhcmF0b3IgPyBwYXR0ZXJuLnNwbGl0KHNlcGFyYXRvclNwbGl0dGVyKSA6IFtwYXR0ZXJuXTtcblx0bGV0IHJlc3VsdCA9IFwiXCI7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc2VnbWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbc107XG5cdFx0Y29uc3QgbmV4dFNlZ21lbnQgPSBzZWdtZW50c1tzICsgMV07XG5cdFx0bGV0IGN1cnJlbnRTZXBhcmF0b3IgPSBcIlwiO1xuXHRcdGlmICghc2VnbWVudCAmJiBzID4gMCkgY29udGludWU7XG5cdFx0aWYgKHNlcGFyYXRvcikgaWYgKHMgPT09IHNlZ21lbnRzLmxlbmd0aCAtIDEpIGN1cnJlbnRTZXBhcmF0b3IgPSBvcHRpb25hbFNlcGFyYXRvcjtcblx0XHRlbHNlIGlmIChuZXh0U2VnbWVudCAhPT0gXCIqKlwiKSBjdXJyZW50U2VwYXJhdG9yID0gcmVxdWlyZWRTZXBhcmF0b3I7XG5cdFx0ZWxzZSBjdXJyZW50U2VwYXJhdG9yID0gXCJcIjtcblx0XHRpZiAoc2VwYXJhdG9yICYmIHNlZ21lbnQgPT09IFwiKipcIikge1xuXHRcdFx0aWYgKGN1cnJlbnRTZXBhcmF0b3IpIHtcblx0XHRcdFx0cmVzdWx0ICs9IHMgPT09IDAgPyBcIlwiIDogY3VycmVudFNlcGFyYXRvcjtcblx0XHRcdFx0cmVzdWx0ICs9IGAoPzoke3dpbGRjYXJkfSo/JHtjdXJyZW50U2VwYXJhdG9yfSkqP2A7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgYyA9IDA7IGMgPCBzZWdtZW50Lmxlbmd0aDsgYysrKSB7XG5cdFx0XHRjb25zdCBjaGFyID0gc2VnbWVudFtjXTtcblx0XHRcdGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuXHRcdFx0XHRpZiAoYyA8IHNlZ21lbnQubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKHNlZ21lbnRbYyArIDFdKTtcblx0XHRcdFx0XHRjKys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoY2hhciA9PT0gXCI/XCIpIHJlc3VsdCArPSB3aWxkY2FyZDtcblx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwiKlwiKSByZXN1bHQgKz0gYCR7d2lsZGNhcmR9Kj9gO1xuXHRcdFx0ZWxzZSByZXN1bHQgKz0gZXNjYXBlUmVnRXhwQ2hhcihjaGFyKTtcblx0XHR9XG5cdFx0cmVzdWx0ICs9IGN1cnJlbnRTZXBhcmF0b3I7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGlzTWF0Y2gocmVnZXhwLCBzYW1wbGUpIHtcblx0aWYgKHR5cGVvZiBzYW1wbGUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoYFNhbXBsZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgJHt0eXBlb2Ygc2FtcGxlfSBnaXZlbmApO1xuXHRyZXR1cm4gcmVnZXhwLnRlc3Qoc2FtcGxlKTtcbn1cbi8qKlxuKiBDb21waWxlcyBvbmUgb3IgbW9yZSBnbG9iIHBhdHRlcm5zIGludG8gYSBSZWdFeHAgYW5kIHJldHVybnMgYW4gaXNNYXRjaCBmdW5jdGlvbi5cbiogVGhlIGlzTWF0Y2ggZnVuY3Rpb24gdGFrZXMgYSBzYW1wbGUgc3RyaW5nIGFzIGl0cyBvbmx5IGFyZ3VtZW50IGFuZCByZXR1cm5zIGB0cnVlYFxuKiBpZiB0aGUgc3RyaW5nIG1hdGNoZXMgdGhlIHBhdHRlcm4ocykuXG4qXG4qIGBgYGpzXG4qIHdpbGRjYXJkTWF0Y2goJ3NyYy8qLmpzJykoJ3NyYy9pbmRleC5qcycpIC8vPT4gdHJ1ZVxuKiBgYGBcbipcbiogYGBganNcbiogY29uc3QgaXNNYXRjaCA9IHdpbGRjYXJkTWF0Y2goJyouZXhhbXBsZS5jb20nLCAnLicpXG4qIGlzTWF0Y2goJ2Zvby5leGFtcGxlLmNvbScpIC8vPT4gdHJ1ZVxuKiBpc01hdGNoKCdmb28uYmFyLmNvbScpIC8vPT4gZmFsc2VcbiogYGBgXG4qL1xuZnVuY3Rpb24gd2lsZGNhcmRNYXRjaChwYXR0ZXJuLCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgcGF0dGVybiAhPT0gXCJzdHJpbmdcIiAmJiAhQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzaW5nbGUgcGF0dGVybiBzdHJpbmcgb3IgYW4gYXJyYXkgb2YgcGF0dGVybnMsIGJ1dCAke3R5cGVvZiBwYXR0ZXJufSBnaXZlbmApO1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiKSBvcHRpb25zID0geyBzZXBhcmF0b3I6IG9wdGlvbnMgfTtcblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgISh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMpKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIG9wdGlvbnMgb2JqZWN0IG9yIGEgc3RyaW5nL2Jvb2xlYW4gc2VwYXJhdG9yLCBidXQgJHt0eXBlb2Ygb3B0aW9uc30gZ2l2ZW5gKTtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdGlmIChvcHRpb25zLnNlcGFyYXRvciA9PT0gXCJcXFxcXCIpIHRocm93IG5ldyBFcnJvcihcIlxcXFwgaXMgbm90IGEgdmFsaWQgc2VwYXJhdG9yIGJlY2F1c2UgaXQgaXMgdXNlZCBmb3IgZXNjYXBpbmcuIFRyeSBzZXR0aW5nIHRoZSBzZXBhcmF0b3IgdG8gYHRydWVgIGluc3RlYWRcIik7XG5cdGNvbnN0IHJlZ2V4cFBhdHRlcm4gPSB0cmFuc2Zvcm0ocGF0dGVybiwgb3B0aW9ucy5zZXBhcmF0b3IpO1xuXHRjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeJHtyZWdleHBQYXR0ZXJufSRgLCBvcHRpb25zLmZsYWdzKTtcblx0Y29uc3QgZm4gPSBpc01hdGNoLmJpbmQobnVsbCwgcmVnZXhwKTtcblx0Zm4ub3B0aW9ucyA9IG9wdGlvbnM7XG5cdGZuLnBhdHRlcm4gPSBwYXR0ZXJuO1xuXHRmbi5yZWdleHAgPSByZWdleHA7XG5cdHJldHVybiBmbjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB3aWxkY2FyZE1hdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aWxkY2FyZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/broadcast-channel.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalBroadcastChannel: () => (/* binding */ getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* binding */ kBroadcastChannel)\n/* harmony export */ });\n//#region src/client/broadcast-channel.ts\nconst kBroadcastChannel = Symbol.for(\"better-auth:broadcast-channel\");\nconst now = () => Math.floor(Date.now() / 1e3);\nvar WindowBroadcastChannel = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tname;\n\tconstructor(name = \"better-auth.message\") {\n\t\tthis.name = name;\n\t}\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tpost(message) {\n\t\tif (typeof window === \"undefined\") return;\n\t\ttry {\n\t\t\tlocalStorage.setItem(this.name, JSON.stringify({\n\t\t\t\t...message,\n\t\t\t\ttimestamp: now()\n\t\t\t}));\n\t\t} catch {}\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst handler = (event) => {\n\t\t\tif (event.key !== this.name) return;\n\t\t\tconst message = JSON.parse(event.newValue ?? \"{}\");\n\t\t\tif (message?.event !== \"session\" || !message?.data) return;\n\t\t\tthis.listeners.forEach((listener) => listener(message));\n\t\t};\n\t\twindow.addEventListener(\"storage\", handler);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"storage\", handler);\n\t\t};\n\t}\n};\nfunction getGlobalBroadcastChannel(name = \"better-auth.message\") {\n\tif (!globalThis[kBroadcastChannel]) globalThis[kBroadcastChannel] = new WindowBroadcastChannel(name);\n\treturn globalThis[kBroadcastChannel];\n}\n\n//#endregion\n\n//# sourceMappingURL=broadcast-channel.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dEO0FBQ3hEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxicm9hZGNhc3QtY2hhbm5lbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwudHNcbmNvbnN0IGtCcm9hZGNhc3RDaGFubmVsID0gU3ltYm9sLmZvcihcImJldHRlci1hdXRoOmJyb2FkY2FzdC1jaGFubmVsXCIpO1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbnZhciBXaW5kb3dCcm9hZGNhc3RDaGFubmVsID0gY2xhc3Mge1xuXHRsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRuYW1lO1xuXHRjb25zdHJ1Y3RvcihuYW1lID0gXCJiZXR0ZXItYXV0aC5tZXNzYWdlXCIpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR9XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRwb3N0KG1lc3NhZ2UpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm5hbWUsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4ubWVzc2FnZSxcblx0XHRcdFx0dGltZXN0YW1wOiBub3coKVxuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2gge31cblx0fVxuXHRzZXR1cCgpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiAoKSA9PiB7fTtcblx0XHRjb25zdCBoYW5kbGVyID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ICE9PSB0aGlzLm5hbWUpIHJldHVybjtcblx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50Lm5ld1ZhbHVlID8/IFwie31cIik7XG5cdFx0XHRpZiAobWVzc2FnZT8uZXZlbnQgIT09IFwic2Vzc2lvblwiIHx8ICFtZXNzYWdlPy5kYXRhKSByZXR1cm47XG5cdFx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIobWVzc2FnZSkpO1xuXHRcdH07XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIGhhbmRsZXIpO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgaGFuZGxlcik7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwobmFtZSA9IFwiYmV0dGVyLWF1dGgubWVzc2FnZVwiKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trQnJvYWRjYXN0Q2hhbm5lbF0pIGdsb2JhbFRoaXNba0Jyb2FkY2FzdENoYW5uZWxdID0gbmV3IFdpbmRvd0Jyb2FkY2FzdENoYW5uZWwobmFtZSk7XG5cdHJldHVybiBnbG9iYWxUaGlzW2tCcm9hZGNhc3RDaGFubmVsXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsLCBrQnJvYWRjYXN0Q2hhbm5lbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvYWRjYXN0LWNoYW5uZWwubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/config.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/config.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientConfig: () => (/* binding */ getClientConfig)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(ssr)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-plugins.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\");\n/* harmony import */ var _parser_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-atom.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(ssr)/./node_modules/defu/dist/defu.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-fetch/fetch */ \"(ssr)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n\n//#region src/client/config.ts\nconst getClientConfig = (options, loadEnv) => {\n\tconst isCredentialsSupported = \"credentials\" in Request.prototype;\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(options?.baseURL, options?.basePath, void 0, loadEnv) ?? \"/api/auth\";\n\tconst pluginsFetchPlugins = options?.plugins?.flatMap((plugin) => plugin.fetchPlugins).filter((pl) => pl !== void 0) || [];\n\tconst lifeCyclePlugin = {\n\t\tid: \"lifecycle-hooks\",\n\t\tname: \"lifecycle-hooks\",\n\t\thooks: {\n\t\t\tonSuccess: options?.fetchOptions?.onSuccess,\n\t\t\tonError: options?.fetchOptions?.onError,\n\t\t\tonRequest: options?.fetchOptions?.onRequest,\n\t\t\tonResponse: options?.fetchOptions?.onResponse\n\t\t}\n\t};\n\tconst { onSuccess: _onSuccess, onError: _onError, onRequest: _onRequest, onResponse: _onResponse, ...restOfFetchOptions } = options?.fetchOptions || {};\n\tconst $fetch = (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_5__.createFetch)({\n\t\tbaseURL,\n\t\t...isCredentialsSupported ? { credentials: \"include\" } : {},\n\t\tmethod: \"GET\",\n\t\tjsonParser(text) {\n\t\t\tif (!text) return null;\n\t\t\treturn (0,_parser_mjs__WEBPACK_IMPORTED_MODULE_2__.parseJSON)(text, { strict: false });\n\t\t},\n\t\tcustomFetchImpl: fetch,\n\t\t...restOfFetchOptions,\n\t\tplugins: [\n\t\t\tlifeCyclePlugin,\n\t\t\t...restOfFetchOptions.plugins || [],\n\t\t\t...options?.disableDefaultFetchPlugins ? [] : [_fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__.redirectPlugin],\n\t\t\t...pluginsFetchPlugins\n\t\t]\n\t});\n\tconst { $sessionSignal, session } = (0,_session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionAtom)($fetch, options);\n\tconst plugins = options?.plugins || [];\n\tlet pluginsActions = {};\n\tconst pluginsAtoms = {\n\t\t$sessionSignal,\n\t\tsession\n\t};\n\tconst pluginPathMethods = {\n\t\t\"/sign-out\": \"POST\",\n\t\t\"/revoke-sessions\": \"POST\",\n\t\t\"/revoke-other-sessions\": \"POST\",\n\t\t\"/delete-user\": \"POST\"\n\t};\n\tconst atomListeners = [{\n\t\tsignal: \"$sessionSignal\",\n\t\tmatcher(path) {\n\t\t\treturn path === \"/sign-out\" || path === \"/update-user\" || path === \"/sign-up/email\" || path === \"/sign-in/email\" || path === \"/delete-user\" || path === \"/verify-email\" || path === \"/revoke-sessions\" || path === \"/revoke-session\" || path === \"/change-email\";\n\t\t}\n\t}];\n\tfor (const plugin of plugins) {\n\t\tif (plugin.getAtoms) Object.assign(pluginsAtoms, plugin.getAtoms?.($fetch));\n\t\tif (plugin.pathMethods) Object.assign(pluginPathMethods, plugin.pathMethods);\n\t\tif (plugin.atomListeners) atomListeners.push(...plugin.atomListeners);\n\t}\n\tconst $store = {\n\t\tnotify: (signal) => {\n\t\t\tpluginsAtoms[signal].set(!pluginsAtoms[signal].get());\n\t\t},\n\t\tlisten: (signal, listener) => {\n\t\t\tpluginsAtoms[signal].subscribe(listener);\n\t\t},\n\t\tatoms: pluginsAtoms\n\t};\n\tfor (const plugin of plugins) if (plugin.getActions) pluginsActions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(plugin.getActions?.($fetch, $store, options) ?? {}, pluginsActions);\n\treturn {\n\t\tget baseURL() {\n\t\t\treturn baseURL;\n\t\t},\n\t\tpluginsActions,\n\t\tpluginsAtoms,\n\t\tpluginPathMethods,\n\t\tatomListeners,\n\t\t$fetch,\n\t\t$store\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=config.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvY29uZmlnLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThDO0FBQ087QUFDWjtBQUNXO0FBQ2Q7QUFDWTs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtIQUFrSDtBQUMzSCxnQkFBZ0IsZ0VBQVc7QUFDM0I7QUFDQSxnQ0FBZ0MseUJBQXlCLElBQUk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzREFBUyxTQUFTLGVBQWU7QUFDM0MsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsOERBQWM7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRixTQUFTLDBCQUEwQixFQUFFLGlFQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx1RUFBdUUsMENBQU0sbURBQW1EO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxjb25maWcubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgcmVkaXJlY3RQbHVnaW4gfSBmcm9tIFwiLi9mZXRjaC1wbHVnaW5zLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VKU09OIH0gZnJvbSBcIi4vcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkF0b20gfSBmcm9tIFwiLi9zZXNzaW9uLWF0b20ubWpzXCI7XG5pbXBvcnQgeyBkZWZ1IGFzIGRlZnUkMSB9IGZyb20gXCJkZWZ1XCI7XG5pbXBvcnQgeyBjcmVhdGVGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2NvbmZpZy50c1xuY29uc3QgZ2V0Q2xpZW50Q29uZmlnID0gKG9wdGlvbnMsIGxvYWRFbnYpID0+IHtcblx0Y29uc3QgaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA9IFwiY3JlZGVudGlhbHNcIiBpbiBSZXF1ZXN0LnByb3RvdHlwZTtcblx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwob3B0aW9ucz8uYmFzZVVSTCwgb3B0aW9ucz8uYmFzZVBhdGgsIHZvaWQgMCwgbG9hZEVudikgPz8gXCIvYXBpL2F1dGhcIjtcblx0Y29uc3QgcGx1Z2luc0ZldGNoUGx1Z2lucyA9IG9wdGlvbnM/LnBsdWdpbnM/LmZsYXRNYXAoKHBsdWdpbikgPT4gcGx1Z2luLmZldGNoUGx1Z2lucykuZmlsdGVyKChwbCkgPT4gcGwgIT09IHZvaWQgMCkgfHwgW107XG5cdGNvbnN0IGxpZmVDeWNsZVBsdWdpbiA9IHtcblx0XHRpZDogXCJsaWZlY3ljbGUtaG9va3NcIixcblx0XHRuYW1lOiBcImxpZmVjeWNsZS1ob29rc1wiLFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRvblN1Y2Nlc3M6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25TdWNjZXNzLFxuXHRcdFx0b25FcnJvcjogb3B0aW9ucz8uZmV0Y2hPcHRpb25zPy5vbkVycm9yLFxuXHRcdFx0b25SZXF1ZXN0OiBvcHRpb25zPy5mZXRjaE9wdGlvbnM/Lm9uUmVxdWVzdCxcblx0XHRcdG9uUmVzcG9uc2U6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25SZXNwb25zZVxuXHRcdH1cblx0fTtcblx0Y29uc3QgeyBvblN1Y2Nlc3M6IF9vblN1Y2Nlc3MsIG9uRXJyb3I6IF9vbkVycm9yLCBvblJlcXVlc3Q6IF9vblJlcXVlc3QsIG9uUmVzcG9uc2U6IF9vblJlc3BvbnNlLCAuLi5yZXN0T2ZGZXRjaE9wdGlvbnMgfSA9IG9wdGlvbnM/LmZldGNoT3B0aW9ucyB8fCB7fTtcblx0Y29uc3QgJGZldGNoID0gY3JlYXRlRmV0Y2goe1xuXHRcdGJhc2VVUkwsXG5cdFx0Li4uaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA/IHsgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiIH0gOiB7fSxcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0anNvblBhcnNlcih0ZXh0KSB7XG5cdFx0XHRpZiAoIXRleHQpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHBhcnNlSlNPTih0ZXh0LCB7IHN0cmljdDogZmFsc2UgfSk7XG5cdFx0fSxcblx0XHRjdXN0b21GZXRjaEltcGw6IGZldGNoLFxuXHRcdC4uLnJlc3RPZkZldGNoT3B0aW9ucyxcblx0XHRwbHVnaW5zOiBbXG5cdFx0XHRsaWZlQ3ljbGVQbHVnaW4sXG5cdFx0XHQuLi5yZXN0T2ZGZXRjaE9wdGlvbnMucGx1Z2lucyB8fCBbXSxcblx0XHRcdC4uLm9wdGlvbnM/LmRpc2FibGVEZWZhdWx0RmV0Y2hQbHVnaW5zID8gW10gOiBbcmVkaXJlY3RQbHVnaW5dLFxuXHRcdFx0Li4ucGx1Z2luc0ZldGNoUGx1Z2luc1xuXHRcdF1cblx0fSk7XG5cdGNvbnN0IHsgJHNlc3Npb25TaWduYWwsIHNlc3Npb24gfSA9IGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucyk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zPy5wbHVnaW5zIHx8IFtdO1xuXHRsZXQgcGx1Z2luc0FjdGlvbnMgPSB7fTtcblx0Y29uc3QgcGx1Z2luc0F0b21zID0ge1xuXHRcdCRzZXNzaW9uU2lnbmFsLFxuXHRcdHNlc3Npb25cblx0fTtcblx0Y29uc3QgcGx1Z2luUGF0aE1ldGhvZHMgPSB7XG5cdFx0XCIvc2lnbi1vdXRcIjogXCJQT1NUXCIsXG5cdFx0XCIvcmV2b2tlLXNlc3Npb25zXCI6IFwiUE9TVFwiLFxuXHRcdFwiL3Jldm9rZS1vdGhlci1zZXNzaW9uc1wiOiBcIlBPU1RcIixcblx0XHRcIi9kZWxldGUtdXNlclwiOiBcIlBPU1RcIlxuXHR9O1xuXHRjb25zdCBhdG9tTGlzdGVuZXJzID0gW3tcblx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIixcblx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdHJldHVybiBwYXRoID09PSBcIi9zaWduLW91dFwiIHx8IHBhdGggPT09IFwiL3VwZGF0ZS11c2VyXCIgfHwgcGF0aCA9PT0gXCIvc2lnbi11cC9lbWFpbFwiIHx8IHBhdGggPT09IFwiL3NpZ24taW4vZW1haWxcIiB8fCBwYXRoID09PSBcIi9kZWxldGUtdXNlclwiIHx8IHBhdGggPT09IFwiL3ZlcmlmeS1lbWFpbFwiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uc1wiIHx8IHBhdGggPT09IFwiL3Jldm9rZS1zZXNzaW9uXCIgfHwgcGF0aCA9PT0gXCIvY2hhbmdlLWVtYWlsXCI7XG5cdFx0fVxuXHR9XTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykge1xuXHRcdGlmIChwbHVnaW4uZ2V0QXRvbXMpIE9iamVjdC5hc3NpZ24ocGx1Z2luc0F0b21zLCBwbHVnaW4uZ2V0QXRvbXM/LigkZmV0Y2gpKTtcblx0XHRpZiAocGx1Z2luLnBhdGhNZXRob2RzKSBPYmplY3QuYXNzaWduKHBsdWdpblBhdGhNZXRob2RzLCBwbHVnaW4ucGF0aE1ldGhvZHMpO1xuXHRcdGlmIChwbHVnaW4uYXRvbUxpc3RlbmVycykgYXRvbUxpc3RlbmVycy5wdXNoKC4uLnBsdWdpbi5hdG9tTGlzdGVuZXJzKTtcblx0fVxuXHRjb25zdCAkc3RvcmUgPSB7XG5cdFx0bm90aWZ5OiAoc2lnbmFsKSA9PiB7XG5cdFx0XHRwbHVnaW5zQXRvbXNbc2lnbmFsXS5zZXQoIXBsdWdpbnNBdG9tc1tzaWduYWxdLmdldCgpKTtcblx0XHR9LFxuXHRcdGxpc3RlbjogKHNpZ25hbCwgbGlzdGVuZXIpID0+IHtcblx0XHRcdHBsdWdpbnNBdG9tc1tzaWduYWxdLnN1YnNjcmliZShsaXN0ZW5lcik7XG5cdFx0fSxcblx0XHRhdG9tczogcGx1Z2luc0F0b21zXG5cdH07XG5cdGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIGlmIChwbHVnaW4uZ2V0QWN0aW9ucykgcGx1Z2luc0FjdGlvbnMgPSBkZWZ1JDEocGx1Z2luLmdldEFjdGlvbnM/LigkZmV0Y2gsICRzdG9yZSwgb3B0aW9ucykgPz8ge30sIHBsdWdpbnNBY3Rpb25zKTtcblx0cmV0dXJuIHtcblx0XHRnZXQgYmFzZVVSTCgpIHtcblx0XHRcdHJldHVybiBiYXNlVVJMO1xuXHRcdH0sXG5cdFx0cGx1Z2luc0FjdGlvbnMsXG5cdFx0cGx1Z2luc0F0b21zLFxuXHRcdHBsdWdpblBhdGhNZXRob2RzLFxuXHRcdGF0b21MaXN0ZW5lcnMsXG5cdFx0JGZldGNoLFxuXHRcdCRzdG9yZVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRDbGllbnRDb25maWcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/config.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/fetch-plugins.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redirectPlugin: () => (/* binding */ redirectPlugin)\n/* harmony export */ });\n//#region src/client/fetch-plugins.ts\nconst redirectPlugin = {\n\tid: \"redirect\",\n\tname: \"Redirect\",\n\thooks: { onSuccess(context) {\n\t\tif (context.data?.url && context.data?.redirect) {\n\t\t\tif (typeof window !== \"undefined\" && window.location) {\n\t\t\t\tif (window.location) try {\n\t\t\t\t\twindow.location.href = context.data.url;\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\t} }\n};\n\n//#endregion\n\n//# sourceMappingURL=fetch-plugins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZmV0Y2gtcGx1Z2lucy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxmZXRjaC1wbHVnaW5zLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9mZXRjaC1wbHVnaW5zLnRzXG5jb25zdCByZWRpcmVjdFBsdWdpbiA9IHtcblx0aWQ6IFwicmVkaXJlY3RcIixcblx0bmFtZTogXCJSZWRpcmVjdFwiLFxuXHRob29rczogeyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdGlmIChjb250ZXh0LmRhdGE/LnVybCAmJiBjb250ZXh0LmRhdGE/LnJlZGlyZWN0KSB7XG5cdFx0XHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHtcblx0XHRcdFx0aWYgKHdpbmRvdy5sb2NhdGlvbikgdHJ5IHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbnRleHQuZGF0YS51cmw7XG5cdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyByZWRpcmVjdFBsdWdpbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2gtcGx1Z2lucy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/focus-manager.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalFocusManager: () => (/* binding */ getGlobalFocusManager),\n/* harmony export */   kFocusManager: () => (/* binding */ kFocusManager)\n/* harmony export */ });\n//#region src/client/focus-manager.ts\nconst kFocusManager = Symbol.for(\"better-auth:focus-manager\");\nvar WindowFocusManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetFocused(focused) {\n\t\tthis.listeners.forEach((listener) => listener(focused));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof document === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst visibilityHandler = () => {\n\t\t\tif (document.visibilityState === \"visible\") this.setFocused(true);\n\t\t};\n\t\tdocument.addEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\t};\n\t}\n};\nfunction getGlobalFocusManager() {\n\tif (!globalThis[kFocusManager]) globalThis[kFocusManager] = new WindowFocusManager();\n\treturn globalThis[kFocusManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=focus-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZm9jdXMtbWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcZm9jdXMtbWFuYWdlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvZm9jdXMtbWFuYWdlci50c1xuY29uc3Qga0ZvY3VzTWFuYWdlciA9IFN5bWJvbC5mb3IoXCJiZXR0ZXItYXV0aDpmb2N1cy1tYW5hZ2VyXCIpO1xudmFyIFdpbmRvd0ZvY3VzTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0c3Vic2NyaWJlKGxpc3RlbmVyKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcblx0XHR9O1xuXHR9XG5cdHNldEZvY3VzZWQoZm9jdXNlZCkge1xuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihmb2N1c2VkKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICgpID0+IHt9O1xuXHRcdGNvbnN0IHZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0aWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHRoaXMuc2V0Rm9jdXNlZCh0cnVlKTtcblx0XHR9O1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEZvY3VzTWFuYWdlcigpIHtcblx0aWYgKCFnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdKSBnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdID0gbmV3IFdpbmRvd0ZvY3VzTWFuYWdlcigpO1xuXHRyZXR1cm4gZ2xvYmFsVGhpc1trRm9jdXNNYW5hZ2VyXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxGb2N1c01hbmFnZXIsIGtGb2N1c01hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLW1hbmFnZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferAuth: () => (/* binding */ InferAuth),\n/* harmony export */   InferPlugin: () => (/* binding */ InferPlugin),\n/* harmony export */   createAuthClient: () => (/* reexport safe */ _vanilla_mjs__WEBPACK_IMPORTED_MODULE_5__.createAuthClient),\n/* harmony export */   createSessionRefreshManager: () => (/* reexport safe */ _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_4__.createSessionRefreshManager),\n/* harmony export */   getGlobalBroadcastChannel: () => (/* reexport safe */ _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* reexport safe */ _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.kBroadcastChannel),\n/* harmony export */   kFocusManager: () => (/* reexport safe */ _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.kFocusManager),\n/* harmony export */   kOnlineManager: () => (/* reexport safe */ _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.kOnlineManager),\n/* harmony export */   useAuthQuery: () => (/* reexport safe */ _query_mjs__WEBPACK_IMPORTED_MODULE_3__.useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs\");\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var _vanilla_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./vanilla.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/vanilla.mjs\");\n\n\n\n\n\n\n\n//#region src/client/index.ts\nconst InferPlugin = () => {\n\treturn {\n\t\tid: \"infer-server-plugin\",\n\t\t$InferServerPlugin: {}\n\t};\n};\nfunction InferAuth() {\n\treturn {};\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RjtBQUNuQztBQUNFO0FBQ1g7QUFDeUI7QUFDbkI7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRLO0FBQzVLIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCwga0Jyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGtGb2N1c01hbmFnZXIgfSBmcm9tIFwiLi9mb2N1cy1tYW5hZ2VyLm1qc1wiO1xuaW1wb3J0IHsga09ubGluZU1hbmFnZXIgfSBmcm9tIFwiLi9vbmxpbmUtbWFuYWdlci5tanNcIjtcbmltcG9ydCB7IHVzZUF1dGhRdWVyeSB9IGZyb20gXCIuL3F1ZXJ5Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2Vzc2lvblJlZnJlc2hNYW5hZ2VyIH0gZnJvbSBcIi4vc2Vzc2lvbi1yZWZyZXNoLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aENsaWVudCB9IGZyb20gXCIuL3ZhbmlsbGEubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2luZGV4LnRzXG5jb25zdCBJbmZlclBsdWdpbiA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJpbmZlci1zZXJ2ZXItcGx1Z2luXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcbmZ1bmN0aW9uIEluZmVyQXV0aCgpIHtcblx0cmV0dXJuIHt9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEluZmVyQXV0aCwgSW5mZXJQbHVnaW4sIGNyZWF0ZUF1dGhDbGllbnQsIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciwgZ2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCwga0Jyb2FkY2FzdENoYW5uZWwsIGtGb2N1c01hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyLCB1c2VBdXRoUXVlcnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/online-manager.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalOnlineManager: () => (/* binding */ getGlobalOnlineManager),\n/* harmony export */   kOnlineManager: () => (/* binding */ kOnlineManager)\n/* harmony export */ });\n//#region src/client/online-manager.ts\nconst kOnlineManager = Symbol.for(\"better-auth:online-manager\");\nvar WindowOnlineManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tisOnline = typeof navigator !== \"undefined\" ? navigator.onLine : true;\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetOnline(online) {\n\t\tthis.isOnline = online;\n\t\tthis.listeners.forEach((listener) => listener(online));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst onOnline = () => this.setOnline(true);\n\t\tconst onOffline = () => this.setOnline(false);\n\t\twindow.addEventListener(\"online\", onOnline, false);\n\t\twindow.addEventListener(\"offline\", onOffline, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"online\", onOnline, false);\n\t\t\twindow.removeEventListener(\"offline\", onOffline, false);\n\t\t};\n\t}\n};\nfunction getGlobalOnlineManager() {\n\tif (!globalThis[kOnlineManager]) globalThis[kOnlineManager] = new WindowOnlineManager();\n\treturn globalThis[kOnlineManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=online-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvb25saW5lLW1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXG9ubGluZS1tYW5hZ2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9vbmxpbmUtbWFuYWdlci50c1xuY29uc3Qga09ubGluZU1hbmFnZXIgPSBTeW1ib2wuZm9yKFwiYmV0dGVyLWF1dGg6b25saW5lLW1hbmFnZXJcIik7XG52YXIgV2luZG93T25saW5lTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0aXNPbmxpbmUgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yLm9uTGluZSA6IHRydWU7XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRzZXRPbmxpbmUob25saW5lKSB7XG5cdFx0dGhpcy5pc09ubGluZSA9IG9ubGluZTtcblx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIob25saW5lKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gKCkgPT4ge307XG5cdFx0Y29uc3Qgb25PbmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZSh0cnVlKTtcblx0XHRjb25zdCBvbk9mZmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZShmYWxzZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgb25PbmxpbmUsIGZhbHNlKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIG9uT25saW5lLCBmYWxzZSk7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trT25saW5lTWFuYWdlcl0pIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdID0gbmV3IFdpbmRvd09ubGluZU1hbmFnZXIoKTtcblx0cmV0dXJuIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEdsb2JhbE9ubGluZU1hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbmxpbmUtbWFuYWdlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/parser.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/parser.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJSON: () => (/* binding */ parseJSON)\n/* harmony export */ });\n//#region src/client/parser.ts\nconst PROTO_POLLUTION_PATTERNS = {\n\tproto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n\tconstructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n\tprotoShort: /\"__proto__\"\\s*:/,\n\tconstructorShort: /\"constructor\"\\s*:/\n};\nconst JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nconst SPECIAL_VALUES = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: void 0,\n\tnan: NaN,\n\tinfinity: Number.POSITIVE_INFINITY,\n\t\"-infinity\": Number.NEGATIVE_INFINITY\n};\nconst ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n\tconst match = ISO_DATE_REGEX.exec(value);\n\tif (!match) return null;\n\tconst [, year, month, day, hour, minute, second, ms, offsetSign, offsetHour, offsetMinute] = match;\n\tconst date = new Date(Date.UTC(parseInt(year, 10), parseInt(month, 10) - 1, parseInt(day, 10), parseInt(hour, 10), parseInt(minute, 10), parseInt(second, 10), ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0));\n\tif (offsetSign) {\n\t\tconst offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n\t\tdate.setUTCMinutes(date.getUTCMinutes() + offset);\n\t}\n\treturn isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n\tconst { strict = false, warnings = false, reviver, parseDates = true } = options;\n\tif (typeof value !== \"string\") return value;\n\tconst trimmed = value.trim();\n\tif (trimmed.length > 0 && trimmed[0] === \"\\\"\" && trimmed.endsWith(\"\\\"\") && !trimmed.slice(1, -1).includes(\"\\\"\")) return trimmed.slice(1, -1);\n\tconst lowerValue = trimmed.toLowerCase();\n\tif (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) return SPECIAL_VALUES[lowerValue];\n\tif (!JSON_SIGNATURE.test(trimmed)) {\n\t\tif (strict) throw new SyntaxError(\"[better-json] Invalid JSON\");\n\t\treturn value;\n\t}\n\tif (Object.entries(PROTO_POLLUTION_PATTERNS).some(([key, pattern]) => {\n\t\tconst matches = pattern.test(trimmed);\n\t\tif (matches && warnings) console.warn(`[better-json] Detected potential prototype pollution attempt using ${key} pattern`);\n\t\treturn matches;\n\t}) && strict) throw new Error(\"[better-json] Potential prototype pollution attempt detected\");\n\ttry {\n\t\tconst secureReviver = (key, value$1) => {\n\t\t\tif (key === \"__proto__\" || key === \"constructor\" && value$1 && typeof value$1 === \"object\" && \"prototype\" in value$1) {\n\t\t\t\tif (warnings) console.warn(`[better-json] Dropping \"${key}\" key to prevent prototype pollution`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (parseDates && typeof value$1 === \"string\") {\n\t\t\t\tconst date = parseISODate(value$1);\n\t\t\t\tif (date) return date;\n\t\t\t}\n\t\t\treturn reviver ? reviver(key, value$1) : value$1;\n\t\t};\n\t\treturn JSON.parse(trimmed, secureReviver);\n\t} catch (error) {\n\t\tif (strict) throw error;\n\t\treturn value;\n\t}\n}\nfunction parseJSON(value, options = { strict: true }) {\n\treturn betterJSONParse(value, options);\n}\n\n//#endregion\n\n//# sourceMappingURL=parser.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGFyc2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLG9CQUFvQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFdBQVcsS0FBSyxNQUFNLEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLElBQUksa0JBQWtCLEVBQUUsTUFBTSxFQUFFO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsU0FBUywrREFBK0Q7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RyxLQUFLO0FBQ25IO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxJQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxjQUFjO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHBhcnNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvcGFyc2VyLnRzXG5jb25zdCBQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMgPSB7XG5cdHByb3RvOiAvXCIoPzpffFxcXFx1MHsyfTVbRmZdKXsyfSg/OnB8XFxcXHUwezJ9NzApKD86cnxcXFxcdTB7Mn03MikoPzpvfFxcXFx1MHsyfTZbRmZdKSg/OnR8XFxcXHUwezJ9NzQpKD86b3xcXFxcdTB7Mn02W0ZmXSkoPzpffFxcXFx1MHsyfTVbRmZdKXsyfVwiXFxzKjovLFxuXHRjb25zdHJ1Y3RvcjogL1wiKD86Y3xcXFxcdTAwNjMpKD86b3xcXFxcdTAwNltGZl0pKD86bnxcXFxcdTAwNltFZV0pKD86c3xcXFxcdTAwNzMpKD86dHxcXFxcdTAwNzQpKD86cnxcXFxcdTAwNzIpKD86dXxcXFxcdTAwNzUpKD86Y3xcXFxcdTAwNjMpKD86dHxcXFxcdTAwNzQpKD86b3xcXFxcdTAwNltGZl0pKD86cnxcXFxcdTAwNzIpXCJcXHMqOi8sXG5cdHByb3RvU2hvcnQ6IC9cIl9fcHJvdG9fX1wiXFxzKjovLFxuXHRjb25zdHJ1Y3RvclNob3J0OiAvXCJjb25zdHJ1Y3RvclwiXFxzKjovXG59O1xuY29uc3QgSlNPTl9TSUdOQVRVUkUgPSAvXlxccypbXCJbe118XlxccyotP1xcZHsxLDE2fShcXC5cXGR7MSwxN30pPyhbRWVdWystXT9cXGQrKT9cXHMqJC87XG5jb25zdCBTUEVDSUFMX1ZBTFVFUyA9IHtcblx0dHJ1ZTogdHJ1ZSxcblx0ZmFsc2U6IGZhbHNlLFxuXHRudWxsOiBudWxsLFxuXHR1bmRlZmluZWQ6IHZvaWQgMCxcblx0bmFuOiBOYU4sXG5cdGluZmluaXR5OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG5cdFwiLWluZmluaXR5XCI6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxufTtcbmNvbnN0IElTT19EQVRFX1JFR0VYID0gL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSg/OlxcLihcXGR7MSw3fSkpPyg/Olp8KFsrLV0pKFxcZHsyfSk6KFxcZHsyfSkpJC87XG5mdW5jdGlvbiBpc1ZhbGlkRGF0ZShkYXRlKSB7XG5cdHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EYXRlKHZhbHVlKSB7XG5cdGNvbnN0IG1hdGNoID0gSVNPX0RBVEVfUkVHRVguZXhlYyh2YWx1ZSk7XG5cdGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXHRjb25zdCBbLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbXMsIG9mZnNldFNpZ24sIG9mZnNldEhvdXIsIG9mZnNldE1pbnV0ZV0gPSBtYXRjaDtcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHBhcnNlSW50KHllYXIsIDEwKSwgcGFyc2VJbnQobW9udGgsIDEwKSAtIDEsIHBhcnNlSW50KGRheSwgMTApLCBwYXJzZUludChob3VyLCAxMCksIHBhcnNlSW50KG1pbnV0ZSwgMTApLCBwYXJzZUludChzZWNvbmQsIDEwKSwgbXMgPyBwYXJzZUludChtcy5wYWRFbmQoMywgXCIwXCIpLCAxMCkgOiAwKSk7XG5cdGlmIChvZmZzZXRTaWduKSB7XG5cdFx0Y29uc3Qgb2Zmc2V0ID0gKHBhcnNlSW50KG9mZnNldEhvdXIsIDEwKSAqIDYwICsgcGFyc2VJbnQob2Zmc2V0TWludXRlLCAxMCkpICogKG9mZnNldFNpZ24gPT09IFwiK1wiID8gLTEgOiAxKTtcblx0XHRkYXRlLnNldFVUQ01pbnV0ZXMoZGF0ZS5nZXRVVENNaW51dGVzKCkgKyBvZmZzZXQpO1xuXHR9XG5cdHJldHVybiBpc1ZhbGlkRGF0ZShkYXRlKSA/IGRhdGUgOiBudWxsO1xufVxuZnVuY3Rpb24gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3QgeyBzdHJpY3QgPSBmYWxzZSwgd2FybmluZ3MgPSBmYWxzZSwgcmV2aXZlciwgcGFyc2VEYXRlcyA9IHRydWUgfSA9IG9wdGlvbnM7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZTtcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcblx0aWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkWzBdID09PSBcIlxcXCJcIiAmJiB0cmltbWVkLmVuZHNXaXRoKFwiXFxcIlwiKSAmJiAhdHJpbW1lZC5zbGljZSgxLCAtMSkuaW5jbHVkZXMoXCJcXFwiXCIpKSByZXR1cm4gdHJpbW1lZC5zbGljZSgxLCAtMSk7XG5cdGNvbnN0IGxvd2VyVmFsdWUgPSB0cmltbWVkLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChsb3dlclZhbHVlLmxlbmd0aCA8PSA5ICYmIGxvd2VyVmFsdWUgaW4gU1BFQ0lBTF9WQUxVRVMpIHJldHVybiBTUEVDSUFMX1ZBTFVFU1tsb3dlclZhbHVlXTtcblx0aWYgKCFKU09OX1NJR05BVFVSRS50ZXN0KHRyaW1tZWQpKSB7XG5cdFx0aWYgKHN0cmljdCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW2JldHRlci1qc29uXSBJbnZhbGlkIEpTT05cIik7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmIChPYmplY3QuZW50cmllcyhQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMpLnNvbWUoKFtrZXksIHBhdHRlcm5dKSA9PiB7XG5cdFx0Y29uc3QgbWF0Y2hlcyA9IHBhdHRlcm4udGVzdCh0cmltbWVkKTtcblx0XHRpZiAobWF0Y2hlcyAmJiB3YXJuaW5ncykgY29uc29sZS53YXJuKGBbYmV0dGVyLWpzb25dIERldGVjdGVkIHBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgdXNpbmcgJHtrZXl9IHBhdHRlcm5gKTtcblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSkgJiYgc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJbYmV0dGVyLWpzb25dIFBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgZGV0ZWN0ZWRcIik7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2VjdXJlUmV2aXZlciA9IChrZXksIHZhbHVlJDEpID0+IHtcblx0XHRcdGlmIChrZXkgPT09IFwiX19wcm90b19fXCIgfHwga2V5ID09PSBcImNvbnN0cnVjdG9yXCIgJiYgdmFsdWUkMSAmJiB0eXBlb2YgdmFsdWUkMSA9PT0gXCJvYmplY3RcIiAmJiBcInByb3RvdHlwZVwiIGluIHZhbHVlJDEpIHtcblx0XHRcdFx0aWYgKHdhcm5pbmdzKSBjb25zb2xlLndhcm4oYFtiZXR0ZXItanNvbl0gRHJvcHBpbmcgXCIke2tleX1cIiBrZXkgdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uYCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChwYXJzZURhdGVzICYmIHR5cGVvZiB2YWx1ZSQxID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBwYXJzZUlTT0RhdGUodmFsdWUkMSk7XG5cdFx0XHRcdGlmIChkYXRlKSByZXR1cm4gZGF0ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXZpdmVyID8gcmV2aXZlcihrZXksIHZhbHVlJDEpIDogdmFsdWUkMTtcblx0XHR9O1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHRyaW1tZWQsIHNlY3VyZVJldml2ZXIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChzdHJpY3QpIHRocm93IGVycm9yO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufVxuZnVuY3Rpb24gcGFyc2VKU09OKHZhbHVlLCBvcHRpb25zID0geyBzdHJpY3Q6IHRydWUgfSkge1xuXHRyZXR1cm4gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUpTT04gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/parser.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/plugins/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/plugins/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferServerPlugin: () => (/* reexport safe */ _infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_20__.InferServerPlugin),\n/* harmony export */   adminClient: () => (/* reexport safe */ _plugins_admin_client_mjs__WEBPACK_IMPORTED_MODULE_1__.adminClient),\n/* harmony export */   anonymousClient: () => (/* reexport safe */ _plugins_anonymous_client_mjs__WEBPACK_IMPORTED_MODULE_2__.anonymousClient),\n/* harmony export */   apiKeyClient: () => (/* reexport safe */ _plugins_api_key_client_mjs__WEBPACK_IMPORTED_MODULE_3__.apiKeyClient),\n/* harmony export */   clientSideHasPermission: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.clientSideHasPermission),\n/* harmony export */   customSessionClient: () => (/* reexport safe */ _plugins_custom_session_client_mjs__WEBPACK_IMPORTED_MODULE_4__.customSessionClient),\n/* harmony export */   deviceAuthorizationClient: () => (/* reexport safe */ _plugins_device_authorization_client_mjs__WEBPACK_IMPORTED_MODULE_5__.deviceAuthorizationClient),\n/* harmony export */   emailOTPClient: () => (/* reexport safe */ _plugins_email_otp_client_mjs__WEBPACK_IMPORTED_MODULE_6__.emailOTPClient),\n/* harmony export */   genericOAuthClient: () => (/* reexport safe */ _plugins_generic_oauth_client_mjs__WEBPACK_IMPORTED_MODULE_7__.genericOAuthClient),\n/* harmony export */   inferAdditionalFields: () => (/* reexport safe */ _plugins_additional_fields_client_mjs__WEBPACK_IMPORTED_MODULE_0__.inferAdditionalFields),\n/* harmony export */   inferOrgAdditionalFields: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.inferOrgAdditionalFields),\n/* harmony export */   jwtClient: () => (/* reexport safe */ _plugins_jwt_client_mjs__WEBPACK_IMPORTED_MODULE_8__.jwtClient),\n/* harmony export */   lastLoginMethodClient: () => (/* reexport safe */ _plugins_last_login_method_client_mjs__WEBPACK_IMPORTED_MODULE_9__.lastLoginMethodClient),\n/* harmony export */   magicLinkClient: () => (/* reexport safe */ _plugins_magic_link_client_mjs__WEBPACK_IMPORTED_MODULE_10__.magicLinkClient),\n/* harmony export */   multiSessionClient: () => (/* reexport safe */ _plugins_multi_session_client_mjs__WEBPACK_IMPORTED_MODULE_11__.multiSessionClient),\n/* harmony export */   oidcClient: () => (/* reexport safe */ _plugins_oidc_provider_client_mjs__WEBPACK_IMPORTED_MODULE_12__.oidcClient),\n/* harmony export */   oneTapClient: () => (/* reexport safe */ _plugins_one_tap_client_mjs__WEBPACK_IMPORTED_MODULE_13__.oneTapClient),\n/* harmony export */   oneTimeTokenClient: () => (/* reexport safe */ _plugins_one_time_token_client_mjs__WEBPACK_IMPORTED_MODULE_14__.oneTimeTokenClient),\n/* harmony export */   organizationClient: () => (/* reexport safe */ _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__.organizationClient),\n/* harmony export */   phoneNumberClient: () => (/* reexport safe */ _plugins_phone_number_client_mjs__WEBPACK_IMPORTED_MODULE_16__.phoneNumberClient),\n/* harmony export */   siweClient: () => (/* reexport safe */ _plugins_siwe_client_mjs__WEBPACK_IMPORTED_MODULE_17__.siweClient),\n/* harmony export */   twoFactorClient: () => (/* reexport safe */ _plugins_two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_18__.twoFactorClient),\n/* harmony export */   usernameClient: () => (/* reexport safe */ _plugins_username_client_mjs__WEBPACK_IMPORTED_MODULE_19__.usernameClient)\n/* harmony export */ });\n/* harmony import */ var _plugins_additional_fields_client_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../plugins/additional-fields/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs\");\n/* harmony import */ var _plugins_admin_client_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../plugins/admin/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/client.mjs\");\n/* harmony import */ var _plugins_anonymous_client_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../plugins/anonymous/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs\");\n/* harmony import */ var _plugins_api_key_client_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../plugins/api-key/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/api-key/client.mjs\");\n/* harmony import */ var _plugins_custom_session_client_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../plugins/custom-session/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs\");\n/* harmony import */ var _plugins_device_authorization_client_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../plugins/device-authorization/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs\");\n/* harmony import */ var _plugins_email_otp_client_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../plugins/email-otp/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs\");\n/* harmony import */ var _plugins_generic_oauth_client_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../plugins/generic-oauth/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs\");\n/* harmony import */ var _plugins_jwt_client_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../plugins/jwt/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/jwt/client.mjs\");\n/* harmony import */ var _plugins_last_login_method_client_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../plugins/last-login-method/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs\");\n/* harmony import */ var _plugins_magic_link_client_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../plugins/magic-link/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs\");\n/* harmony import */ var _plugins_multi_session_client_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../plugins/multi-session/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs\");\n/* harmony import */ var _plugins_oidc_provider_client_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../plugins/oidc-provider/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs\");\n/* harmony import */ var _plugins_one_tap_client_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../plugins/one-tap/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs\");\n/* harmony import */ var _plugins_one_time_token_client_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../plugins/one-time-token/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs\");\n/* harmony import */ var _plugins_organization_client_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../plugins/organization/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/organization/client.mjs\");\n/* harmony import */ var _plugins_phone_number_client_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../plugins/phone-number/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs\");\n/* harmony import */ var _plugins_siwe_client_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../plugins/siwe/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/siwe/client.mjs\");\n/* harmony import */ var _plugins_two_factor_client_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../plugins/two-factor/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\");\n/* harmony import */ var _plugins_username_client_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../plugins/username/client.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/username/client.mjs\");\n/* harmony import */ var _infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./infer-plugin.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGx1Z2lucy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUY7QUFDdEI7QUFDUTtBQUNMO0FBQ2M7QUFDWTtBQUN0QjtBQUNRO0FBQ25CO0FBQzBCO0FBQ2I7QUFDTTtBQUNSO0FBQ0o7QUFDYTtBQUNpRDtBQUNwRDtBQUNmO0FBQ1c7QUFDSDtBQUNaIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxwbHVnaW5zXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5mZXJBZGRpdGlvbmFsRmllbGRzIH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvYWRkaXRpb25hbC1maWVsZHMvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgYWRtaW5DbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9hZG1pbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBhbm9ueW1vdXNDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9hbm9ueW1vdXMvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgYXBpS2V5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvYXBpLWtleS9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBjdXN0b21TZXNzaW9uQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvY3VzdG9tLXNlc3Npb24vY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgZGV2aWNlQXV0aG9yaXphdGlvbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGVtYWlsT1RQQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvZW1haWwtb3RwL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGdlbmVyaWNPQXV0aENsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgand0Q2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvand0L2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGxhc3RMb2dpbk1ldGhvZENsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2xhc3QtbG9naW4tbWV0aG9kL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IG1hZ2ljTGlua0NsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL21hZ2ljLWxpbmsvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgbXVsdGlTZXNzaW9uQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvbXVsdGktc2Vzc2lvbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBvaWRjQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvb2lkYy1wcm92aWRlci9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBvbmVUYXBDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy9vbmUtdGFwL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IG9uZVRpbWVUb2tlbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBpbmZlck9yZ0FkZGl0aW9uYWxGaWVsZHMsIG9yZ2FuaXphdGlvbkNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBwaG9uZU51bWJlckNsaWVudCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL3Bob25lLW51bWJlci9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyBzaXdlQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvc2l3ZS9jbGllbnQubWpzXCI7XG5pbXBvcnQgeyB0d29GYWN0b3JDbGllbnQgfSBmcm9tIFwiLi4vLi4vcGx1Z2lucy90d28tZmFjdG9yL2NsaWVudC5tanNcIjtcbmltcG9ydCB7IHVzZXJuYW1lQ2xpZW50IH0gZnJvbSBcIi4uLy4uL3BsdWdpbnMvdXNlcm5hbWUvY2xpZW50Lm1qc1wiO1xuaW1wb3J0IHsgSW5mZXJTZXJ2ZXJQbHVnaW4gfSBmcm9tIFwiLi9pbmZlci1wbHVnaW4ubWpzXCI7XG5cbmV4cG9ydCB7IEluZmVyU2VydmVyUGx1Z2luLCBhZG1pbkNsaWVudCwgYW5vbnltb3VzQ2xpZW50LCBhcGlLZXlDbGllbnQsIGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBjdXN0b21TZXNzaW9uQ2xpZW50LCBkZXZpY2VBdXRob3JpemF0aW9uQ2xpZW50LCBlbWFpbE9UUENsaWVudCwgZ2VuZXJpY09BdXRoQ2xpZW50LCBpbmZlckFkZGl0aW9uYWxGaWVsZHMsIGluZmVyT3JnQWRkaXRpb25hbEZpZWxkcywgand0Q2xpZW50LCBsYXN0TG9naW5NZXRob2RDbGllbnQsIG1hZ2ljTGlua0NsaWVudCwgbXVsdGlTZXNzaW9uQ2xpZW50LCBvaWRjQ2xpZW50LCBvbmVUYXBDbGllbnQsIG9uZVRpbWVUb2tlbkNsaWVudCwgb3JnYW5pemF0aW9uQ2xpZW50LCBwaG9uZU51bWJlckNsaWVudCwgc2l3ZUNsaWVudCwgdHdvRmFjdG9yQ2xpZW50LCB1c2VybmFtZUNsaWVudCB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/plugins/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InferServerPlugin: () => (/* binding */ InferServerPlugin)\n/* harmony export */ });\n//#region src/client/plugins/infer-plugin.ts\nconst InferServerPlugin = () => {\n\treturn {\n\t\tid: \"infer-server-plugin\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=infer-plugin.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGx1Z2lucy9pbmZlci1wbHVnaW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxccGx1Z2luc1xcaW5mZXItcGx1Z2luLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9wbHVnaW5zL2luZmVyLXBsdWdpbi50c1xuY29uc3QgSW5mZXJTZXJ2ZXJQbHVnaW4gPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiaW5mZXItc2VydmVyLXBsdWdpblwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSW5mZXJTZXJ2ZXJQbHVnaW4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZmVyLXBsdWdpbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/proxy.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/proxy.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDynamicPathProxy: () => (/* binding */ createDynamicPathProxy)\n/* harmony export */ });\n/* harmony import */ var _utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-atom.mjs */ \"(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs\");\n\n\n//#region src/client/proxy.ts\nfunction getMethod(path, knownPathMethods, args) {\n\tconst method = knownPathMethods[path];\n\tconst { fetchOptions, query: _query, ...body } = args || {};\n\tif (method) return method;\n\tif (fetchOptions?.method) return fetchOptions.method;\n\tif (body && Object.keys(body).length > 0) return \"POST\";\n\treturn \"GET\";\n}\nfunction createDynamicPathProxy(routes, client, knownPathMethods, atoms, atomListeners) {\n\tfunction createProxy(path = []) {\n\t\treturn new Proxy(function() {}, {\n\t\t\tget(_, prop) {\n\t\t\t\tif (typeof prop !== \"string\") return;\n\t\t\t\tif (prop === \"then\" || prop === \"catch\" || prop === \"finally\") return;\n\t\t\t\tconst fullPath = [...path, prop];\n\t\t\t\tlet current = routes;\n\t\t\t\tfor (const segment of fullPath) if (current && typeof current === \"object\" && segment in current) current = current[segment];\n\t\t\t\telse {\n\t\t\t\t\tcurrent = void 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (typeof current === \"function\") return current;\n\t\t\t\tif ((0,_utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__.isAtom)(current)) return current;\n\t\t\t\treturn createProxy(fullPath);\n\t\t\t},\n\t\t\tapply: async (_, __, args) => {\n\t\t\t\tconst routePath = \"/\" + path.map((segment) => segment.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`)).join(\"/\");\n\t\t\t\tconst arg = args[0] || {};\n\t\t\t\tconst fetchOptions = args[1] || {};\n\t\t\t\tconst { query, fetchOptions: argFetchOptions, ...body } = arg;\n\t\t\t\tconst options = {\n\t\t\t\t\t...fetchOptions,\n\t\t\t\t\t...argFetchOptions\n\t\t\t\t};\n\t\t\t\tconst method = getMethod(routePath, knownPathMethods, arg);\n\t\t\t\treturn await client(routePath, {\n\t\t\t\t\t...options,\n\t\t\t\t\tbody: method === \"GET\" ? void 0 : {\n\t\t\t\t\t\t...body,\n\t\t\t\t\t\t...options?.body || {}\n\t\t\t\t\t},\n\t\t\t\t\tquery: query || options?.query,\n\t\t\t\t\tmethod,\n\t\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\t\tawait options?.onSuccess?.(context);\n\t\t\t\t\t\tif (!atomListeners || options.disableSignal) return;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* We trigger listeners\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst matches = atomListeners.filter((s) => s.matcher(routePath));\n\t\t\t\t\t\tif (!matches.length) return;\n\t\t\t\t\t\tconst visited = /* @__PURE__ */ new Set();\n\t\t\t\t\t\tfor (const match of matches) {\n\t\t\t\t\t\t\tconst signal = atoms[match.signal];\n\t\t\t\t\t\t\tif (!signal) return;\n\t\t\t\t\t\t\tif (visited.has(match.signal)) continue;\n\t\t\t\t\t\t\tvisited.add(match.signal);\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* To avoid race conditions we set the signal in a setTimeout\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tconst val = signal.get();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsignal.set(!val);\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn createProxy();\n}\n\n//#endregion\n\n//# sourceMappingURL=proxy.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcHJveHkubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDOztBQUU5QztBQUNBO0FBQ0E7QUFDQSxTQUFTLHVDQUF1QztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwREFBTTtBQUNkO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBO0FBQ0EsWUFBWSxnREFBZ0Q7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDa0M7QUFDbEMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxjbGllbnRcXHByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0F0b20gfSBmcm9tIFwiLi4vdXRpbHMvaXMtYXRvbS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvcHJveHkudHNcbmZ1bmN0aW9uIGdldE1ldGhvZChwYXRoLCBrbm93blBhdGhNZXRob2RzLCBhcmdzKSB7XG5cdGNvbnN0IG1ldGhvZCA9IGtub3duUGF0aE1ldGhvZHNbcGF0aF07XG5cdGNvbnN0IHsgZmV0Y2hPcHRpb25zLCBxdWVyeTogX3F1ZXJ5LCAuLi5ib2R5IH0gPSBhcmdzIHx8IHt9O1xuXHRpZiAobWV0aG9kKSByZXR1cm4gbWV0aG9kO1xuXHRpZiAoZmV0Y2hPcHRpb25zPy5tZXRob2QpIHJldHVybiBmZXRjaE9wdGlvbnMubWV0aG9kO1xuXHRpZiAoYm9keSAmJiBPYmplY3Qua2V5cyhib2R5KS5sZW5ndGggPiAwKSByZXR1cm4gXCJQT1NUXCI7XG5cdHJldHVybiBcIkdFVFwiO1xufVxuZnVuY3Rpb24gY3JlYXRlRHluYW1pY1BhdGhQcm94eShyb3V0ZXMsIGNsaWVudCwga25vd25QYXRoTWV0aG9kcywgYXRvbXMsIGF0b21MaXN0ZW5lcnMpIHtcblx0ZnVuY3Rpb24gY3JlYXRlUHJveHkocGF0aCA9IFtdKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm94eShmdW5jdGlvbigpIHt9LCB7XG5cdFx0XHRnZXQoXywgcHJvcCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHByb3AgIT09IFwic3RyaW5nXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHByb3AgPT09IFwidGhlblwiIHx8IHByb3AgPT09IFwiY2F0Y2hcIiB8fCBwcm9wID09PSBcImZpbmFsbHlcIikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCBwcm9wXTtcblx0XHRcdFx0bGV0IGN1cnJlbnQgPSByb3V0ZXM7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiBmdWxsUGF0aCkgaWYgKGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgJiYgc2VnbWVudCBpbiBjdXJyZW50KSBjdXJyZW50ID0gY3VycmVudFtzZWdtZW50XTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y3VycmVudCA9IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGN1cnJlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGN1cnJlbnQ7XG5cdFx0XHRcdGlmIChpc0F0b20oY3VycmVudCkpIHJldHVybiBjdXJyZW50O1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlUHJveHkoZnVsbFBhdGgpO1xuXHRcdFx0fSxcblx0XHRcdGFwcGx5OiBhc3luYyAoXywgX18sIGFyZ3MpID0+IHtcblx0XHRcdFx0Y29uc3Qgcm91dGVQYXRoID0gXCIvXCIgKyBwYXRoLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC5yZXBsYWNlKC9bQS1aXS9nLCAobGV0dGVyKSA9PiBgLSR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YCkpLmpvaW4oXCIvXCIpO1xuXHRcdFx0XHRjb25zdCBhcmcgPSBhcmdzWzBdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCBmZXRjaE9wdGlvbnMgPSBhcmdzWzFdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCB7IHF1ZXJ5LCBmZXRjaE9wdGlvbnM6IGFyZ0ZldGNoT3B0aW9ucywgLi4uYm9keSB9ID0gYXJnO1xuXHRcdFx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0XHRcdC4uLmZldGNoT3B0aW9ucyxcblx0XHRcdFx0XHQuLi5hcmdGZXRjaE9wdGlvbnNcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgbWV0aG9kID0gZ2V0TWV0aG9kKHJvdXRlUGF0aCwga25vd25QYXRoTWV0aG9kcywgYXJnKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGNsaWVudChyb3V0ZVBhdGgsIHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGJvZHk6IG1ldGhvZCA9PT0gXCJHRVRcIiA/IHZvaWQgMCA6IHtcblx0XHRcdFx0XHRcdC4uLmJvZHksXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zPy5ib2R5IHx8IHt9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRxdWVyeTogcXVlcnkgfHwgb3B0aW9ucz8ucXVlcnksXG5cdFx0XHRcdFx0bWV0aG9kLFxuXHRcdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBvcHRpb25zPy5vblN1Y2Nlc3M/Lihjb250ZXh0KTtcblx0XHRcdFx0XHRcdGlmICghYXRvbUxpc3RlbmVycyB8fCBvcHRpb25zLmRpc2FibGVTaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBXZSB0cmlnZ2VyIGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSBhdG9tTGlzdGVuZXJzLmZpbHRlcigocykgPT4gcy5tYXRjaGVyKHJvdXRlUGF0aCkpO1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaGVzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgdmlzaXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2lnbmFsID0gYXRvbXNbbWF0Y2guc2lnbmFsXTtcblx0XHRcdFx0XHRcdFx0aWYgKCFzaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0aWYgKHZpc2l0ZWQuaGFzKG1hdGNoLnNpZ25hbCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR2aXNpdGVkLmFkZChtYXRjaC5zaWduYWwpO1xuXHRcdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdFx0KiBUbyBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2Ugc2V0IHRoZSBzaWduYWwgaW4gYSBzZXRUaW1lb3V0XG5cdFx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZhbCA9IHNpZ25hbC5nZXQoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsLnNldCghdmFsKTtcblx0XHRcdFx0XHRcdFx0fSwgMTApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGNyZWF0ZVByb3h5KCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRHluYW1pY1BhdGhQcm94eSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJveHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/proxy.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/query.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/query.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthQuery: () => (/* binding */ useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n//#region src/client/query.ts\nconst isServer = () => typeof window === \"undefined\";\nconst useAuthQuery = (initializedAtom, path, $fetch, options) => {\n\tconst value = (0,nanostores__WEBPACK_IMPORTED_MODULE_0__.atom)({\n\t\tdata: null,\n\t\terror: null,\n\t\tisPending: true,\n\t\tisRefetching: false,\n\t\trefetch: (queryParams) => fn(queryParams)\n\t});\n\tconst fn = async (queryParams) => {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst opts = typeof options === \"function\" ? options({\n\t\t\t\tdata: value.get().data,\n\t\t\t\terror: value.get().error,\n\t\t\t\tisPending: value.get().isPending\n\t\t\t}) : options;\n\t\t\t$fetch(path, {\n\t\t\t\t...opts,\n\t\t\t\tquery: {\n\t\t\t\t\t...opts?.query,\n\t\t\t\t\t...queryParams?.query\n\t\t\t\t},\n\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tdata: context.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onSuccess?.(context);\n\t\t\t\t},\n\t\t\t\tasync onError(context) {\n\t\t\t\t\tconst { request } = context;\n\t\t\t\t\tconst retryAttempts = typeof request.retry === \"number\" ? request.retry : request.retry?.attempts;\n\t\t\t\t\tconst retryAttempt = request.retryAttempt || 0;\n\t\t\t\t\tif (retryAttempts && retryAttempt < retryAttempts) return;\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\terror: context.error,\n\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onError?.(context);\n\t\t\t\t},\n\t\t\t\tasync onRequest(context) {\n\t\t\t\t\tconst currentValue = value.get();\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tisPending: currentValue.data === null,\n\t\t\t\t\t\tdata: currentValue.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisRefetching: true,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onRequest?.(context);\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tvalue.set({\n\t\t\t\t\terror,\n\t\t\t\t\tdata: null,\n\t\t\t\t\tisPending: false,\n\t\t\t\t\tisRefetching: false,\n\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t});\n\t\t\t}).finally(() => {\n\t\t\t\tresolve(void 0);\n\t\t\t});\n\t\t});\n\t};\n\tinitializedAtom = Array.isArray(initializedAtom) ? initializedAtom : [initializedAtom];\n\tlet isMounted = false;\n\tfor (const initAtom of initializedAtom) initAtom.subscribe(async () => {\n\t\tif (isServer()) return;\n\t\tif (isMounted) await fn();\n\t\telse (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.onMount)(value, () => {\n\t\t\tconst timeoutId = setTimeout(async () => {\n\t\t\t\tif (!isMounted) {\n\t\t\t\t\tawait fn();\n\t\t\t\t\tisMounted = true;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t\treturn () => {\n\t\t\t\tvalue.off();\n\t\t\t\tinitAtom.off();\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t};\n\t\t});\n\t});\n\treturn value;\n};\n\n//#endregion\n\n//# sourceMappingURL=query.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcXVlcnkubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxccXVlcnkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9xdWVyeS50c1xuY29uc3QgaXNTZXJ2ZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xuY29uc3QgdXNlQXV0aFF1ZXJ5ID0gKGluaXRpYWxpemVkQXRvbSwgcGF0aCwgJGZldGNoLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHZhbHVlID0gYXRvbSh7XG5cdFx0ZGF0YTogbnVsbCxcblx0XHRlcnJvcjogbnVsbCxcblx0XHRpc1BlbmRpbmc6IHRydWUsXG5cdFx0aXNSZWZldGNoaW5nOiBmYWxzZSxcblx0XHRyZWZldGNoOiAocXVlcnlQYXJhbXMpID0+IGZuKHF1ZXJ5UGFyYW1zKVxuXHR9KTtcblx0Y29uc3QgZm4gPSBhc3luYyAocXVlcnlQYXJhbXMpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IG9wdHMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucyh7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLmdldCgpLmRhdGEsXG5cdFx0XHRcdGVycm9yOiB2YWx1ZS5nZXQoKS5lcnJvcixcblx0XHRcdFx0aXNQZW5kaW5nOiB2YWx1ZS5nZXQoKS5pc1BlbmRpbmdcblx0XHRcdH0pIDogb3B0aW9ucztcblx0XHRcdCRmZXRjaChwYXRoLCB7XG5cdFx0XHRcdC4uLm9wdHMsXG5cdFx0XHRcdHF1ZXJ5OiB7XG5cdFx0XHRcdFx0Li4ub3B0cz8ucXVlcnksXG5cdFx0XHRcdFx0Li4ucXVlcnlQYXJhbXM/LnF1ZXJ5XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGRhdGE6IGNvbnRleHQuZGF0YSxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRcdGlzUmVmZXRjaGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25TdWNjZXNzPy4oY29udGV4dCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRcdGNvbnN0IHsgcmVxdWVzdCB9ID0gY29udGV4dDtcblx0XHRcdFx0XHRjb25zdCByZXRyeUF0dGVtcHRzID0gdHlwZW9mIHJlcXVlc3QucmV0cnkgPT09IFwibnVtYmVyXCIgPyByZXF1ZXN0LnJldHJ5IDogcmVxdWVzdC5yZXRyeT8uYXR0ZW1wdHM7XG5cdFx0XHRcdFx0Y29uc3QgcmV0cnlBdHRlbXB0ID0gcmVxdWVzdC5yZXRyeUF0dGVtcHQgfHwgMDtcblx0XHRcdFx0XHRpZiAocmV0cnlBdHRlbXB0cyAmJiByZXRyeUF0dGVtcHQgPCByZXRyeUF0dGVtcHRzKSByZXR1cm47XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGVycm9yOiBjb250ZXh0LmVycm9yLFxuXHRcdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRcdGlzUGVuZGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdFx0cmVmZXRjaDogdmFsdWUudmFsdWUucmVmZXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IG9wdHM/Lm9uRXJyb3I/Lihjb250ZXh0KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgb25SZXF1ZXN0KGNvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZS5nZXQoKTtcblx0XHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBjdXJyZW50VmFsdWUuZGF0YSA9PT0gbnVsbCxcblx0XHRcdFx0XHRcdGRhdGE6IGN1cnJlbnRWYWx1ZS5kYXRhLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IG51bGwsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IHRydWUsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25SZXF1ZXN0Py4oY29udGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdGVycm9yLFxuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdHJlZmV0Y2g6IHZhbHVlLnZhbHVlLnJlZmV0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHR9KS5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh2b2lkIDApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cdGluaXRpYWxpemVkQXRvbSA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbGl6ZWRBdG9tKSA/IGluaXRpYWxpemVkQXRvbSA6IFtpbml0aWFsaXplZEF0b21dO1xuXHRsZXQgaXNNb3VudGVkID0gZmFsc2U7XG5cdGZvciAoY29uc3QgaW5pdEF0b20gb2YgaW5pdGlhbGl6ZWRBdG9tKSBpbml0QXRvbS5zdWJzY3JpYmUoYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChpc1NlcnZlcigpKSByZXR1cm47XG5cdFx0aWYgKGlzTW91bnRlZCkgYXdhaXQgZm4oKTtcblx0XHRlbHNlIG9uTW91bnQodmFsdWUsICgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoIWlzTW91bnRlZCkge1xuXHRcdFx0XHRcdGF3YWl0IGZuKCk7XG5cdFx0XHRcdFx0aXNNb3VudGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMCk7XG5cdFx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0XHR2YWx1ZS5vZmYoKTtcblx0XHRcdFx0aW5pdEF0b20ub2ZmKCk7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdXNlQXV0aFF1ZXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/query.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-atom.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionAtom: () => (/* binding */ getSessionAtom)\n/* harmony export */ });\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n\n\n//#region src/client/session-atom.ts\nfunction getSessionAtom($fetch, options) {\n\tconst $signal = (0,nanostores__WEBPACK_IMPORTED_MODULE_2__.atom)(false);\n\tconst session = (0,_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($signal, \"/get-session\", $fetch, { method: \"GET\" });\n\t(0,nanostores__WEBPACK_IMPORTED_MODULE_3__.onMount)(session, () => {\n\t\tconst refreshManager = (0,_session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__.createSessionRefreshManager)({\n\t\t\tsessionAtom: session,\n\t\t\tsessionSignal: $signal,\n\t\t\t$fetch,\n\t\t\toptions\n\t\t});\n\t\trefreshManager.init();\n\t\treturn () => {\n\t\t\trefreshManager.cleanup();\n\t\t};\n\t});\n\treturn {\n\t\tsession,\n\t\t$sessionSignal: $signal\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyQztBQUN5QjtBQUN6Qjs7QUFFM0M7QUFDQTtBQUNBLGlCQUFpQixnREFBSTtBQUNyQixpQkFBaUIsd0RBQVksb0NBQW9DLGVBQWU7QUFDaEYsQ0FBQyxtREFBTztBQUNSLHlCQUF5QixpRkFBMkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXGNsaWVudFxcc2Vzc2lvbi1hdG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi9xdWVyeS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciB9IGZyb20gXCIuL3Nlc3Npb24tcmVmcmVzaC5tanNcIjtcbmltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9zZXNzaW9uLWF0b20udHNcbmZ1bmN0aW9uIGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucykge1xuXHRjb25zdCAkc2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHNlc3Npb24gPSB1c2VBdXRoUXVlcnkoJHNpZ25hbCwgXCIvZ2V0LXNlc3Npb25cIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KTtcblx0b25Nb3VudChzZXNzaW9uLCAoKSA9PiB7XG5cdFx0Y29uc3QgcmVmcmVzaE1hbmFnZXIgPSBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIoe1xuXHRcdFx0c2Vzc2lvbkF0b206IHNlc3Npb24sXG5cdFx0XHRzZXNzaW9uU2lnbmFsOiAkc2lnbmFsLFxuXHRcdFx0JGZldGNoLFxuXHRcdFx0b3B0aW9uc1xuXHRcdH0pO1xuXHRcdHJlZnJlc2hNYW5hZ2VyLmluaXQoKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0cmVmcmVzaE1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH07XG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdHNlc3Npb24sXG5cdFx0JHNlc3Npb25TaWduYWw6ICRzaWduYWxcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRTZXNzaW9uQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi1hdG9tLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-refresh.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSessionRefreshManager: () => (/* binding */ createSessionRefreshManager)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs\");\n\n\n\n\n//#region src/client/session-refresh.ts\nconst now = () => Math.floor(Date.now() / 1e3);\n/**\n* Rate limit: don't refetch on focus if a session request was made within this many seconds\n*/\nconst FOCUS_REFETCH_RATE_LIMIT_SECONDS = 5;\nfunction createSessionRefreshManager(opts) {\n\tconst { sessionAtom, sessionSignal, $fetch, options = {} } = opts;\n\tconst refetchInterval = options.sessionOptions?.refetchInterval ?? 0;\n\tconst refetchOnWindowFocus = options.sessionOptions?.refetchOnWindowFocus ?? true;\n\tconst refetchWhenOffline = options.sessionOptions?.refetchWhenOffline ?? false;\n\tconst state = {\n\t\tlastSync: 0,\n\t\tlastSessionRequest: 0,\n\t\tcachedSession: void 0\n\t};\n\tconst shouldRefetch = () => {\n\t\treturn refetchWhenOffline || (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().isOnline;\n\t};\n\tconst triggerRefetch = (event) => {\n\t\tif (!shouldRefetch()) return;\n\t\tif (event?.event === \"storage\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\treturn;\n\t\t}\n\t\tconst currentSession = sessionAtom.get();\n\t\tif (event?.event === \"poll\") {\n\t\t\tstate.lastSessionRequest = now();\n\t\t\t$fetch(\"/get-session\").then((res) => {\n\t\t\t\tif (res.error) sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: res.error\n\t\t\t\t});\n\t\t\t\telse sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t\tstate.lastSync = now();\n\t\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\t}).catch(() => {});\n\t\t\treturn;\n\t\t}\n\t\tif (event?.event === \"visibilitychange\") {\n\t\t\tif (now() - state.lastSessionRequest < FOCUS_REFETCH_RATE_LIMIT_SECONDS) return;\n\t\t\tstate.lastSessionRequest = now();\n\t\t}\n\t\tif (currentSession?.data === null || currentSession?.data === void 0 || event?.event === \"visibilitychange\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t}\n\t};\n\tconst broadcastSessionUpdate = (trigger) => {\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().post({\n\t\t\tevent: \"session\",\n\t\t\tdata: { trigger },\n\t\t\tclientId: Math.random().toString(36).substring(7)\n\t\t});\n\t};\n\tconst setupPolling = () => {\n\t\tif (refetchInterval && refetchInterval > 0) state.pollInterval = setInterval(() => {\n\t\t\tif (sessionAtom.get()?.data) triggerRefetch({ event: \"poll\" });\n\t\t}, refetchInterval * 1e3);\n\t};\n\tconst setupBroadcast = () => {\n\t\tstate.unsubscribeBroadcast = (0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"storage\" });\n\t\t});\n\t};\n\tconst setupFocusRefetch = () => {\n\t\tif (!refetchOnWindowFocus) return;\n\t\tstate.unsubscribeFocus = (0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst setupOnlineRefetch = () => {\n\t\tstate.unsubscribeOnline = (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().subscribe((online) => {\n\t\t\tif (online) triggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst init = () => {\n\t\tsetupPolling();\n\t\tsetupBroadcast();\n\t\tsetupFocusRefetch();\n\t\tsetupOnlineRefetch();\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().setup();\n\t\t(0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().setup();\n\t\t(0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().setup();\n\t};\n\tconst cleanup = () => {\n\t\tif (state.pollInterval) {\n\t\t\tclearInterval(state.pollInterval);\n\t\t\tstate.pollInterval = void 0;\n\t\t}\n\t\tif (state.unsubscribeBroadcast) {\n\t\t\tstate.unsubscribeBroadcast();\n\t\t\tstate.unsubscribeBroadcast = void 0;\n\t\t}\n\t\tif (state.unsubscribeFocus) {\n\t\t\tstate.unsubscribeFocus();\n\t\t\tstate.unsubscribeFocus = void 0;\n\t\t}\n\t\tif (state.unsubscribeOnline) {\n\t\t\tstate.unsubscribeOnline();\n\t\t\tstate.unsubscribeOnline = void 0;\n\t\t}\n\t\tstate.lastSync = 0;\n\t\tstate.lastSessionRequest = 0;\n\t\tstate.cachedSession = void 0;\n\t};\n\treturn {\n\t\tinit,\n\t\tcleanup,\n\t\ttriggerRefetch,\n\t\tbroadcastSessionUpdate\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-refresh.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1yZWZyZXNoLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9FO0FBQ1I7QUFDRTs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1EQUFtRDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZUFBZTtBQUNoRSxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtCQUErQixpRkFBeUI7QUFDeEQsb0JBQW9CLGtCQUFrQjtBQUN0QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlFQUFxQjtBQUNoRCxvQkFBb0IsMkJBQTJCO0FBQy9DLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNEJBQTRCLDJFQUFzQjtBQUNsRCxnQ0FBZ0MsMkJBQTJCO0FBQzNELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQixFQUFFLHlFQUFxQjtBQUN2QixFQUFFLDJFQUFzQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VDO0FBQ3ZDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFxzZXNzaW9uLXJlZnJlc2gubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbEZvY3VzTWFuYWdlciB9IGZyb20gXCIuL2ZvY3VzLW1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyIH0gZnJvbSBcIi4vb25saW5lLW1hbmFnZXIubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3Nlc3Npb24tcmVmcmVzaC50c1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbi8qKlxuKiBSYXRlIGxpbWl0OiBkb24ndCByZWZldGNoIG9uIGZvY3VzIGlmIGEgc2Vzc2lvbiByZXF1ZXN0IHdhcyBtYWRlIHdpdGhpbiB0aGlzIG1hbnkgc2Vjb25kc1xuKi9cbmNvbnN0IEZPQ1VTX1JFRkVUQ0hfUkFURV9MSU1JVF9TRUNPTkRTID0gNTtcbmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlcihvcHRzKSB7XG5cdGNvbnN0IHsgc2Vzc2lvbkF0b20sIHNlc3Npb25TaWduYWwsICRmZXRjaCwgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuXHRjb25zdCByZWZldGNoSW50ZXJ2YWwgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoSW50ZXJ2YWwgPz8gMDtcblx0Y29uc3QgcmVmZXRjaE9uV2luZG93Rm9jdXMgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoT25XaW5kb3dGb2N1cyA/PyB0cnVlO1xuXHRjb25zdCByZWZldGNoV2hlbk9mZmxpbmUgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoV2hlbk9mZmxpbmUgPz8gZmFsc2U7XG5cdGNvbnN0IHN0YXRlID0ge1xuXHRcdGxhc3RTeW5jOiAwLFxuXHRcdGxhc3RTZXNzaW9uUmVxdWVzdDogMCxcblx0XHRjYWNoZWRTZXNzaW9uOiB2b2lkIDBcblx0fTtcblx0Y29uc3Qgc2hvdWxkUmVmZXRjaCA9ICgpID0+IHtcblx0XHRyZXR1cm4gcmVmZXRjaFdoZW5PZmZsaW5lIHx8IGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKS5pc09ubGluZTtcblx0fTtcblx0Y29uc3QgdHJpZ2dlclJlZmV0Y2ggPSAoZXZlbnQpID0+IHtcblx0XHRpZiAoIXNob3VsZFJlZmV0Y2goKSkgcmV0dXJuO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwic3RvcmFnZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IHNlc3Npb25BdG9tLmdldCgpO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwicG9sbFwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSBub3coKTtcblx0XHRcdCRmZXRjaChcIi9nZXQtc2Vzc2lvblwiKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0aWYgKHJlcy5lcnJvcikgc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yOiByZXMuZXJyb3Jcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGVsc2Ugc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiByZXMuZGF0YSxcblx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RhdGUubGFzdFN5bmMgPSBub3coKTtcblx0XHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0fSkuY2F0Y2goKCkgPT4ge30pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoZXZlbnQ/LmV2ZW50ID09PSBcInZpc2liaWxpdHljaGFuZ2VcIikge1xuXHRcdFx0aWYgKG5vdygpIC0gc3RhdGUubGFzdFNlc3Npb25SZXF1ZXN0IDwgRk9DVVNfUkVGRVRDSF9SQVRFX0xJTUlUX1NFQ09ORFMpIHJldHVybjtcblx0XHRcdHN0YXRlLmxhc3RTZXNzaW9uUmVxdWVzdCA9IG5vdygpO1xuXHRcdH1cblx0XHRpZiAoY3VycmVudFNlc3Npb24/LmRhdGEgPT09IG51bGwgfHwgY3VycmVudFNlc3Npb24/LmRhdGEgPT09IHZvaWQgMCB8fCBldmVudD8uZXZlbnQgPT09IFwidmlzaWJpbGl0eWNoYW5nZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgYnJvYWRjYXN0U2Vzc2lvblVwZGF0ZSA9ICh0cmlnZ2VyKSA9PiB7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnBvc3Qoe1xuXHRcdFx0ZXZlbnQ6IFwic2Vzc2lvblwiLFxuXHRcdFx0ZGF0YTogeyB0cmlnZ2VyIH0sXG5cdFx0XHRjbGllbnRJZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpXG5cdFx0fSk7XG5cdH07XG5cdGNvbnN0IHNldHVwUG9sbGluZyA9ICgpID0+IHtcblx0XHRpZiAocmVmZXRjaEludGVydmFsICYmIHJlZmV0Y2hJbnRlcnZhbCA+IDApIHN0YXRlLnBvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGlmIChzZXNzaW9uQXRvbS5nZXQoKT8uZGF0YSkgdHJpZ2dlclJlZmV0Y2goeyBldmVudDogXCJwb2xsXCIgfSk7XG5cdFx0fSwgcmVmZXRjaEludGVydmFsICogMWUzKTtcblx0fTtcblx0Y29uc3Qgc2V0dXBCcm9hZGNhc3QgPSAoKSA9PiB7XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QgPSBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsKCkuc3Vic2NyaWJlKCgpID0+IHtcblx0XHRcdHRyaWdnZXJSZWZldGNoKHsgZXZlbnQ6IFwic3RvcmFnZVwiIH0pO1xuXHRcdH0pO1xuXHR9O1xuXHRjb25zdCBzZXR1cEZvY3VzUmVmZXRjaCA9ICgpID0+IHtcblx0XHRpZiAoIXJlZmV0Y2hPbldpbmRvd0ZvY3VzKSByZXR1cm47XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IGdldEdsb2JhbEZvY3VzTWFuYWdlcigpLnN1YnNjcmliZSgoKSA9PiB7XG5cdFx0XHR0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3Qgc2V0dXBPbmxpbmVSZWZldGNoID0gKCkgPT4ge1xuXHRcdHN0YXRlLnVuc3Vic2NyaWJlT25saW5lID0gZ2V0R2xvYmFsT25saW5lTWFuYWdlcigpLnN1YnNjcmliZSgob25saW5lKSA9PiB7XG5cdFx0XHRpZiAob25saW5lKSB0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3QgaW5pdCA9ICgpID0+IHtcblx0XHRzZXR1cFBvbGxpbmcoKTtcblx0XHRzZXR1cEJyb2FkY2FzdCgpO1xuXHRcdHNldHVwRm9jdXNSZWZldGNoKCk7XG5cdFx0c2V0dXBPbmxpbmVSZWZldGNoKCk7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnNldHVwKCk7XG5cdFx0Z2V0R2xvYmFsRm9jdXNNYW5hZ2VyKCkuc2V0dXAoKTtcblx0XHRnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyKCkuc2V0dXAoKTtcblx0fTtcblx0Y29uc3QgY2xlYW51cCA9ICgpID0+IHtcblx0XHRpZiAoc3RhdGUucG9sbEludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHN0YXRlLnBvbGxJbnRlcnZhbCk7XG5cdFx0XHRzdGF0ZS5wb2xsSW50ZXJ2YWwgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdGlmIChzdGF0ZS51bnN1YnNjcmliZUJyb2FkY2FzdCkge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QoKTtcblx0XHRcdHN0YXRlLnVuc3Vic2NyaWJlQnJvYWRjYXN0ID0gdm9pZCAwO1xuXHRcdH1cblx0XHRpZiAoc3RhdGUudW5zdWJzY3JpYmVGb2N1cykge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cygpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IHZvaWQgMDtcblx0XHR9XG5cdFx0aWYgKHN0YXRlLnVuc3Vic2NyaWJlT25saW5lKSB7XG5cdFx0XHRzdGF0ZS51bnN1YnNjcmliZU9ubGluZSgpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVPbmxpbmUgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdHN0YXRlLmxhc3RTeW5jID0gMDtcblx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSAwO1xuXHRcdHN0YXRlLmNhY2hlZFNlc3Npb24gPSB2b2lkIDA7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0aW5pdCxcblx0XHRjbGVhbnVwLFxuXHRcdHRyaWdnZXJSZWZldGNoLFxuXHRcdGJyb2FkY2FzdFNlc3Npb25VcGRhdGVcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24tcmVmcmVzaC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/vanilla.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/vanilla.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthClient: () => (/* binding */ createAuthClient)\n/* harmony export */ });\n/* harmony import */ var _config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/config.mjs\");\n/* harmony import */ var _proxy_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./proxy.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/proxy.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(ssr)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/client/vanilla.ts\nfunction createAuthClient(options) {\n\tconst { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, atomListeners, $store } = (0,_config_mjs__WEBPACK_IMPORTED_MODULE_0__.getClientConfig)(options);\n\tconst resolvedHooks = {};\n\tfor (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[`use${(0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.capitalizeFirstLetter)(key)}`] = value;\n\treturn (0,_proxy_mjs__WEBPACK_IMPORTED_MODULE_1__.createDynamicPathProxy)({\n\t\t...pluginsActions,\n\t\t...resolvedHooks,\n\t\t$fetch,\n\t\t$store\n\t}, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);\n}\n\n//#endregion\n\n//# sourceMappingURL=vanilla.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvdmFuaWxsYS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNNO0FBQ1c7O0FBRWhFO0FBQ0E7QUFDQSxTQUFTLGlGQUFpRixFQUFFLDREQUFlO0FBQzNHO0FBQ0EsOEVBQThFLDhFQUFxQixNQUFNO0FBQ3pHLFFBQVEsa0VBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcY2xpZW50XFx2YW5pbGxhLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDbGllbnRDb25maWcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEeW5hbWljUGF0aFByb3h5IH0gZnJvbSBcIi4vcHJveHkubWpzXCI7XG5pbXBvcnQgeyBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvdmFuaWxsYS50c1xuZnVuY3Rpb24gY3JlYXRlQXV0aENsaWVudChvcHRpb25zKSB7XG5cdGNvbnN0IHsgcGx1Z2luUGF0aE1ldGhvZHMsIHBsdWdpbnNBY3Rpb25zLCBwbHVnaW5zQXRvbXMsICRmZXRjaCwgYXRvbUxpc3RlbmVycywgJHN0b3JlIH0gPSBnZXRDbGllbnRDb25maWcob3B0aW9ucyk7XG5cdGNvbnN0IHJlc29sdmVkSG9va3MgPSB7fTtcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocGx1Z2luc0F0b21zKSkgcmVzb2x2ZWRIb29rc1tgdXNlJHtjYXBpdGFsaXplRmlyc3RMZXR0ZXIoa2V5KX1gXSA9IHZhbHVlO1xuXHRyZXR1cm4gY3JlYXRlRHluYW1pY1BhdGhQcm94eSh7XG5cdFx0Li4ucGx1Z2luc0FjdGlvbnMsXG5cdFx0Li4ucmVzb2x2ZWRIb29rcyxcblx0XHQkZmV0Y2gsXG5cdFx0JHN0b3JlXG5cdH0sICRmZXRjaCwgcGx1Z2luUGF0aE1ldGhvZHMsIHBsdWdpbnNBdG9tcywgYXRvbUxpc3RlbmVycyk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlQXV0aENsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFuaWxsYS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/vanilla.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/access/access.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/access/access.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessControl: () => (/* binding */ createAccessControl),\n/* harmony export */   role: () => (/* binding */ role)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/error */ \"(ssr)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n//#region src/plugins/access/access.ts\nfunction role(statements) {\n\treturn {\n\t\tauthorize(request, connector = \"AND\") {\n\t\t\tlet success = false;\n\t\t\tfor (const [requestedResource, requestedActions] of Object.entries(request)) {\n\t\t\t\tconst allowedActions = statements[requestedResource];\n\t\t\t\tif (!allowedActions) return {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: `You are not allowed to access resource: ${requestedResource}`\n\t\t\t\t};\n\t\t\t\tif (Array.isArray(requestedActions)) success = requestedActions.every((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\telse if (typeof requestedActions === \"object\") {\n\t\t\t\t\tconst actions = requestedActions;\n\t\t\t\t\tif (actions.connector === \"OR\") success = actions.actions.some((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\t\telse success = actions.actions.every((requestedAction) => allowedActions.includes(requestedAction));\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_0__.BetterAuthError(\"Invalid access control request\");\n\t\t\t\tif (success && connector === \"OR\") return { success };\n\t\t\t\tif (!success && connector === \"AND\") return {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: `unauthorized to access resource \"${requestedResource}\"`\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (success) return { success };\n\t\t\treturn {\n\t\t\t\tsuccess: false,\n\t\t\t\terror: \"Not authorized\"\n\t\t\t};\n\t\t},\n\t\tstatements\n\t};\n}\nfunction createAccessControl(s) {\n\treturn {\n\t\tnewRole(statements) {\n\t\t\treturn role(statements);\n\t\t},\n\t\tstatements: s\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=access.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FjY2Vzcy9hY2Nlc3MubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwRDs7QUFFMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELGtCQUFrQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGVBQWUsb0VBQWU7QUFDcEMsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxnREFBZ0Qsa0JBQWtCO0FBQ2xFO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3FDO0FBQ3JDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWNjZXNzXFxhY2Nlc3MubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWNjZXNzL2FjY2Vzcy50c1xuZnVuY3Rpb24gcm9sZShzdGF0ZW1lbnRzKSB7XG5cdHJldHVybiB7XG5cdFx0YXV0aG9yaXplKHJlcXVlc3QsIGNvbm5lY3RvciA9IFwiQU5EXCIpIHtcblx0XHRcdGxldCBzdWNjZXNzID0gZmFsc2U7XG5cdFx0XHRmb3IgKGNvbnN0IFtyZXF1ZXN0ZWRSZXNvdXJjZSwgcmVxdWVzdGVkQWN0aW9uc10gb2YgT2JqZWN0LmVudHJpZXMocmVxdWVzdCkpIHtcblx0XHRcdFx0Y29uc3QgYWxsb3dlZEFjdGlvbnMgPSBzdGF0ZW1lbnRzW3JlcXVlc3RlZFJlc291cmNlXTtcblx0XHRcdFx0aWYgKCFhbGxvd2VkQWN0aW9ucykgcmV0dXJuIHtcblx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRlcnJvcjogYFlvdSBhcmUgbm90IGFsbG93ZWQgdG8gYWNjZXNzIHJlc291cmNlOiAke3JlcXVlc3RlZFJlc291cmNlfWBcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocmVxdWVzdGVkQWN0aW9ucykpIHN1Y2Nlc3MgPSByZXF1ZXN0ZWRBY3Rpb25zLmV2ZXJ5KChyZXF1ZXN0ZWRBY3Rpb24pID0+IGFsbG93ZWRBY3Rpb25zLmluY2x1ZGVzKHJlcXVlc3RlZEFjdGlvbikpO1xuXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgcmVxdWVzdGVkQWN0aW9ucyA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdGNvbnN0IGFjdGlvbnMgPSByZXF1ZXN0ZWRBY3Rpb25zO1xuXHRcdFx0XHRcdGlmIChhY3Rpb25zLmNvbm5lY3RvciA9PT0gXCJPUlwiKSBzdWNjZXNzID0gYWN0aW9ucy5hY3Rpb25zLnNvbWUoKHJlcXVlc3RlZEFjdGlvbikgPT4gYWxsb3dlZEFjdGlvbnMuaW5jbHVkZXMocmVxdWVzdGVkQWN0aW9uKSk7XG5cdFx0XHRcdFx0ZWxzZSBzdWNjZXNzID0gYWN0aW9ucy5hY3Rpb25zLmV2ZXJ5KChyZXF1ZXN0ZWRBY3Rpb24pID0+IGFsbG93ZWRBY3Rpb25zLmluY2x1ZGVzKHJlcXVlc3RlZEFjdGlvbikpO1xuXHRcdFx0XHR9IGVsc2UgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkludmFsaWQgYWNjZXNzIGNvbnRyb2wgcmVxdWVzdFwiKTtcblx0XHRcdFx0aWYgKHN1Y2Nlc3MgJiYgY29ubmVjdG9yID09PSBcIk9SXCIpIHJldHVybiB7IHN1Y2Nlc3MgfTtcblx0XHRcdFx0aWYgKCFzdWNjZXNzICYmIGNvbm5lY3RvciA9PT0gXCJBTkRcIikgcmV0dXJuIHtcblx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZSxcblx0XHRcdFx0XHRlcnJvcjogYHVuYXV0aG9yaXplZCB0byBhY2Nlc3MgcmVzb3VyY2UgXCIke3JlcXVlc3RlZFJlc291cmNlfVwiYFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN1Y2Nlc3MpIHJldHVybiB7IHN1Y2Nlc3MgfTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlLFxuXHRcdFx0XHRlcnJvcjogXCJOb3QgYXV0aG9yaXplZFwiXG5cdFx0XHR9O1xuXHRcdH0sXG5cdFx0c3RhdGVtZW50c1xuXHR9O1xufVxuZnVuY3Rpb24gY3JlYXRlQWNjZXNzQ29udHJvbChzKSB7XG5cdHJldHVybiB7XG5cdFx0bmV3Um9sZShzdGF0ZW1lbnRzKSB7XG5cdFx0XHRyZXR1cm4gcm9sZShzdGF0ZW1lbnRzKTtcblx0XHR9LFxuXHRcdHN0YXRlbWVudHM6IHNcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBY2Nlc3NDb250cm9sLCByb2xlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3MubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/access/access.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/access/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/access/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccessControl: () => (/* reexport safe */ _access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl),\n/* harmony export */   role: () => (/* reexport safe */ _access_mjs__WEBPACK_IMPORTED_MODULE_0__.role)\n/* harmony export */ });\n/* harmony import */ var _access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FjY2Vzcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWNjZXNzXFxpbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCwgcm9sZSB9IGZyb20gXCIuL2FjY2Vzcy5tanNcIjtcblxuZXhwb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCwgcm9sZSB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/access/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/additional-fields/client.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   inferAdditionalFields: () => (/* binding */ inferAdditionalFields)\n/* harmony export */ });\n//#region src/plugins/additional-fields/client.ts\nconst inferAdditionalFields = (schema) => {\n\treturn {\n\t\tid: \"additional-fields-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkZGl0aW9uYWwtZmllbGRzL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lDO0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRkaXRpb25hbC1maWVsZHNcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2FkZGl0aW9uYWwtZmllbGRzL2NsaWVudC50c1xuY29uc3QgaW5mZXJBZGRpdGlvbmFsRmllbGRzID0gKHNjaGVtYSkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFkZGl0aW9uYWwtZmllbGRzLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaW5mZXJBZGRpdGlvbmFsRmllbGRzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/additional-fields/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/access/index.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc),\n/* harmony export */   defaultAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAc),\n/* harmony export */   defaultRoles: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles),\n/* harmony export */   defaultStatements: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultStatements),\n/* harmony export */   userAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.userAc)\n/* harmony export */ });\n/* harmony import */ var _statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./statement.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2FjY2Vzcy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQThGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGFjY2Vzc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgdXNlckFjIH0gZnJvbSBcIi4vc3RhdGVtZW50Lm1qc1wiO1xuXG5leHBvcnQgeyBhZG1pbkFjLCBkZWZhdWx0QWMsIGRlZmF1bHRSb2xlcywgZGVmYXVsdFN0YXRlbWVudHMsIHVzZXJBYyB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/access/statement.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* binding */ adminAc),\n/* harmony export */   defaultAc: () => (/* binding */ defaultAc),\n/* harmony export */   defaultRoles: () => (/* binding */ defaultRoles),\n/* harmony export */   defaultStatements: () => (/* binding */ defaultStatements),\n/* harmony export */   userAc: () => (/* binding */ userAc)\n/* harmony export */ });\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../access/access.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../access/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n\n\n\n//#region src/plugins/admin/access/statement.ts\nconst defaultStatements = {\n\tuser: [\n\t\t\"create\",\n\t\t\"list\",\n\t\t\"set-role\",\n\t\t\"ban\",\n\t\t\"impersonate\",\n\t\t\"delete\",\n\t\t\"set-password\",\n\t\t\"get\",\n\t\t\"update\"\n\t],\n\tsession: [\n\t\t\"list\",\n\t\t\"revoke\",\n\t\t\"delete\"\n\t]\n};\nconst defaultAc = (0,_access_access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl)(defaultStatements);\nconst adminAc = defaultAc.newRole({\n\tuser: [\n\t\t\"create\",\n\t\t\"list\",\n\t\t\"set-role\",\n\t\t\"ban\",\n\t\t\"impersonate\",\n\t\t\"delete\",\n\t\t\"set-password\",\n\t\t\"get\",\n\t\t\"update\"\n\t],\n\tsession: [\n\t\t\"list\",\n\t\t\"revoke\",\n\t\t\"delete\"\n\t]\n});\nconst userAc = defaultAc.newRole({\n\tuser: [],\n\tsession: []\n});\nconst defaultRoles = {\n\tadmin: adminAc,\n\tuser: userAc\n};\n\n//#endregion\n\n//# sourceMappingURL=statement.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2FjY2Vzcy9zdGF0ZW1lbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEQ7QUFDOUI7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN1RTtBQUN2RSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGFkbWluXFxhY2Nlc3NcXHN0YXRlbWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQWNjZXNzQ29udHJvbCB9IGZyb20gXCIuLi8uLi9hY2Nlc3MvYWNjZXNzLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWRtaW4vYWNjZXNzL3N0YXRlbWVudC50c1xuY29uc3QgZGVmYXVsdFN0YXRlbWVudHMgPSB7XG5cdHVzZXI6IFtcblx0XHRcImNyZWF0ZVwiLFxuXHRcdFwibGlzdFwiLFxuXHRcdFwic2V0LXJvbGVcIixcblx0XHRcImJhblwiLFxuXHRcdFwiaW1wZXJzb25hdGVcIixcblx0XHRcImRlbGV0ZVwiLFxuXHRcdFwic2V0LXBhc3N3b3JkXCIsXG5cdFx0XCJnZXRcIixcblx0XHRcInVwZGF0ZVwiXG5cdF0sXG5cdHNlc3Npb246IFtcblx0XHRcImxpc3RcIixcblx0XHRcInJldm9rZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufTtcbmNvbnN0IGRlZmF1bHRBYyA9IGNyZWF0ZUFjY2Vzc0NvbnRyb2woZGVmYXVsdFN0YXRlbWVudHMpO1xuY29uc3QgYWRtaW5BYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0dXNlcjogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJsaXN0XCIsXG5cdFx0XCJzZXQtcm9sZVwiLFxuXHRcdFwiYmFuXCIsXG5cdFx0XCJpbXBlcnNvbmF0ZVwiLFxuXHRcdFwiZGVsZXRlXCIsXG5cdFx0XCJzZXQtcGFzc3dvcmRcIixcblx0XHRcImdldFwiLFxuXHRcdFwidXBkYXRlXCJcblx0XSxcblx0c2Vzc2lvbjogW1xuXHRcdFwibGlzdFwiLFxuXHRcdFwicmV2b2tlXCIsXG5cdFx0XCJkZWxldGVcIlxuXHRdXG59KTtcbmNvbnN0IHVzZXJBYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0dXNlcjogW10sXG5cdHNlc3Npb246IFtdXG59KTtcbmNvbnN0IGRlZmF1bHRSb2xlcyA9IHtcblx0YWRtaW46IGFkbWluQWMsXG5cdHVzZXI6IHVzZXJBY1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhZG1pbkFjLCBkZWZhdWx0QWMsIGRlZmF1bHRSb2xlcywgZGVmYXVsdFN0YXRlbWVudHMsIHVzZXJBYyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGVtZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/admin/client.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/client.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminClient: () => (/* binding */ adminClient)\n/* harmony export */ });\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/statement.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\");\n/* harmony import */ var _has_permission_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./has-permission.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs\");\n\n\n\n\n//#region src/plugins/admin/client.ts\nconst adminClient = (options) => {\n\tconst roles = {\n\t\tadmin: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc,\n\t\tuser: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.userAc,\n\t\t...options?.roles\n\t};\n\treturn {\n\t\tid: \"admin-client\",\n\t\t$InferServerPlugin: {},\n\t\tgetActions: () => ({ admin: { checkRolePermission: (data) => {\n\t\t\treturn (0,_has_permission_mjs__WEBPACK_IMPORTED_MODULE_2__.hasPermission)({\n\t\t\t\trole: data.role,\n\t\t\t\toptions: {\n\t\t\t\t\tac: options?.ac,\n\t\t\t\t\troles\n\t\t\t\t},\n\t\t\t\tpermissions: data.permissions ?? data.permission\n\t\t\t});\n\t\t} } }),\n\t\tpathMethods: {\n\t\t\t\"/admin/list-users\": \"GET\",\n\t\t\t\"/admin/stop-impersonating\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5RDtBQUM3QjtBQUN5Qjs7QUFFckQ7QUFDQTtBQUNBO0FBQ0EsU0FBUywwREFBTztBQUNoQixRQUFRLHlEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsdUJBQXVCLFNBQVM7QUFDaEMsVUFBVSxrRUFBYTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VCO0FBQ3ZCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRtaW5BYywgdXNlckFjIH0gZnJvbSBcIi4vYWNjZXNzL3N0YXRlbWVudC5tanNcIjtcbmltcG9ydCBcIi4vYWNjZXNzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiB9IGZyb20gXCIuL2hhcy1wZXJtaXNzaW9uLm1qc1wiO1xuXG4vLyNyZWdpb24gc3JjL3BsdWdpbnMvYWRtaW4vY2xpZW50LnRzXG5jb25zdCBhZG1pbkNsaWVudCA9IChvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHJvbGVzID0ge1xuXHRcdGFkbWluOiBhZG1pbkFjLFxuXHRcdHVzZXI6IHVzZXJBYyxcblx0XHQuLi5vcHRpb25zPy5yb2xlc1xuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFkbWluLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge30sXG5cdFx0Z2V0QWN0aW9uczogKCkgPT4gKHsgYWRtaW46IHsgY2hlY2tSb2xlUGVybWlzc2lvbjogKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBoYXNQZXJtaXNzaW9uKHtcblx0XHRcdFx0cm9sZTogZGF0YS5yb2xlLFxuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0YWM6IG9wdGlvbnM/LmFjLFxuXHRcdFx0XHRcdHJvbGVzXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBlcm1pc3Npb25zOiBkYXRhLnBlcm1pc3Npb25zID8/IGRhdGEucGVybWlzc2lvblxuXHRcdFx0fSk7XG5cdFx0fSB9IH0pLFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9hZG1pbi9saXN0LXVzZXJzXCI6IFwiR0VUXCIsXG5cdFx0XHRcIi9hZG1pbi9zdG9wLWltcGVyc29uYXRpbmdcIjogXCJQT1NUXCJcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkbWluQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/admin/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/admin/has-permission.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission)\n/* harmony export */ });\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./access/statement.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./access/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/admin/access/index.mjs\");\n\n\n\n//#region src/plugins/admin/has-permission.ts\nconst hasPermission = (input) => {\n\tif (input.userId && input.options?.adminUserIds?.includes(input.userId)) return true;\n\tif (!input.permissions && !input.permission) return false;\n\tconst roles = (input.role || input.options?.defaultRole || \"user\").split(\",\");\n\tconst acRoles = input.options?.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles;\n\tfor (const role of roles) if ((acRoles[role]?.authorize(input.permission ?? input.permissions))?.success) return true;\n\treturn false;\n};\n\n//#endregion\n\n//# sourceMappingURL=has-permission.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FkbWluL2hhcy1wZXJtaXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Q7QUFDMUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsK0RBQVk7QUFDckQ7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcYWRtaW5cXGhhcy1wZXJtaXNzaW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZhdWx0Um9sZXMgfSBmcm9tIFwiLi9hY2Nlc3Mvc3RhdGVtZW50Lm1qc1wiO1xuaW1wb3J0IFwiLi9hY2Nlc3MvaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hZG1pbi9oYXMtcGVybWlzc2lvbi50c1xuY29uc3QgaGFzUGVybWlzc2lvbiA9IChpbnB1dCkgPT4ge1xuXHRpZiAoaW5wdXQudXNlcklkICYmIGlucHV0Lm9wdGlvbnM/LmFkbWluVXNlcklkcz8uaW5jbHVkZXMoaW5wdXQudXNlcklkKSkgcmV0dXJuIHRydWU7XG5cdGlmICghaW5wdXQucGVybWlzc2lvbnMgJiYgIWlucHV0LnBlcm1pc3Npb24pIHJldHVybiBmYWxzZTtcblx0Y29uc3Qgcm9sZXMgPSAoaW5wdXQucm9sZSB8fCBpbnB1dC5vcHRpb25zPy5kZWZhdWx0Um9sZSB8fCBcInVzZXJcIikuc3BsaXQoXCIsXCIpO1xuXHRjb25zdCBhY1JvbGVzID0gaW5wdXQub3B0aW9ucz8ucm9sZXMgfHwgZGVmYXVsdFJvbGVzO1xuXHRmb3IgKGNvbnN0IHJvbGUgb2Ygcm9sZXMpIGlmICgoYWNSb2xlc1tyb2xlXT8uYXV0aG9yaXplKGlucHV0LnBlcm1pc3Npb24gPz8gaW5wdXQucGVybWlzc2lvbnMpKT8uc3VjY2VzcykgcmV0dXJuIHRydWU7XG5cdHJldHVybiBmYWxzZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgaGFzUGVybWlzc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLXBlcm1pc3Npb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/admin/has-permission.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/anonymous/client.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anonymousClient: () => (/* binding */ anonymousClient)\n/* harmony export */ });\n//#region src/plugins/anonymous/client.ts\nconst anonymousClient = () => {\n\treturn {\n\t\tid: \"anonymous\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/sign-in/anonymous\": \"POST\",\n\t\t\t\"/delete-anonymous-user\": \"POST\"\n\t\t},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/sign-in/anonymous\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2Fub255bW91cy9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhbm9ueW1vdXNcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2Fub255bW91cy9jbGllbnQudHNcbmNvbnN0IGFub255bW91c0NsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJhbm9ueW1vdXNcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9zaWduLWluL2Fub255bW91c1wiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RlbGV0ZS1hbm9ueW1vdXMtdXNlclwiOiBcIlBPU1RcIlxuXHRcdH0sXG5cdFx0YXRvbUxpc3RlbmVyczogW3tcblx0XHRcdG1hdGNoZXI6IChwYXRoKSA9PiBwYXRoID09PSBcIi9zaWduLWluL2Fub255bW91c1wiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhbm9ueW1vdXNDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/anonymous/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/api-key/client.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/api-key/client.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeyClient: () => (/* binding */ apiKeyClient)\n/* harmony export */ });\n//#region src/plugins/api-key/client.ts\nconst apiKeyClient = () => {\n\treturn {\n\t\tid: \"api-key\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/api-key/create\": \"POST\",\n\t\t\t\"/api-key/delete\": \"POST\",\n\t\t\t\"/api-key/delete-all-expired-api-keys\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2FwaS1rZXkvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxhcGkta2V5XFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9hcGkta2V5L2NsaWVudC50c1xuY29uc3QgYXBpS2V5Q2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImFwaS1rZXlcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9hcGkta2V5L2NyZWF0ZVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2FwaS1rZXkvZGVsZXRlXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpLWtleS9kZWxldGUtYWxsLWV4cGlyZWQtYXBpLWtleXNcIjogXCJQT1NUXCJcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFwaUtleUNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/api-key/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/custom-session/client.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customSessionClient: () => (/* binding */ customSessionClient)\n/* harmony export */ });\n/* harmony import */ var _client_plugins_infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/plugins/infer-plugin.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/plugins/infer-plugin.mjs\");\n/* harmony import */ var _client_plugins_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/plugins/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/plugins/index.mjs\");\n\n\n\n//#region src/plugins/custom-session/client.ts\nconst customSessionClient = () => {\n\treturn (0,_client_plugins_infer_plugin_mjs__WEBPACK_IMPORTED_MODULE_0__.InferServerPlugin)();\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2N1c3RvbS1zZXNzaW9uL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBFO0FBQ2xDOztBQUV4QztBQUNBO0FBQ0EsUUFBUSxtRkFBaUI7QUFDekI7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxjdXN0b20tc2Vzc2lvblxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmZlclNlcnZlclBsdWdpbiB9IGZyb20gXCIuLi8uLi9jbGllbnQvcGx1Z2lucy9pbmZlci1wbHVnaW4ubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jbGllbnQvcGx1Z2lucy9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL2N1c3RvbS1zZXNzaW9uL2NsaWVudC50c1xuY29uc3QgY3VzdG9tU2Vzc2lvbkNsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIEluZmVyU2VydmVyUGx1Z2luKCk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGN1c3RvbVNlc3Npb25DbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/custom-session/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/device-authorization/client.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deviceAuthorizationClient: () => (/* binding */ deviceAuthorizationClient)\n/* harmony export */ });\n//#region src/plugins/device-authorization/client.ts\nconst deviceAuthorizationClient = () => {\n\treturn {\n\t\tid: \"device-authorization\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: {\n\t\t\t\"/device/code\": \"POST\",\n\t\t\t\"/device/token\": \"POST\",\n\t\t\t\"/device\": \"GET\",\n\t\t\t\"/device/approve\": \"POST\",\n\t\t\t\"/device/deny\": \"POST\"\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2RldmljZS1hdXRob3JpemF0aW9uL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGRldmljZS1hdXRob3JpemF0aW9uXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9kZXZpY2UtYXV0aG9yaXphdGlvbi9jbGllbnQudHNcbmNvbnN0IGRldmljZUF1dGhvcml6YXRpb25DbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZGV2aWNlLWF1dGhvcml6YXRpb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdHBhdGhNZXRob2RzOiB7XG5cdFx0XHRcIi9kZXZpY2UvY29kZVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RldmljZS90b2tlblwiOiBcIlBPU1RcIixcblx0XHRcdFwiL2RldmljZVwiOiBcIkdFVFwiLFxuXHRcdFx0XCIvZGV2aWNlL2FwcHJvdmVcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi9kZXZpY2UvZGVueVwiOiBcIlBPU1RcIlxuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZGV2aWNlQXV0aG9yaXphdGlvbkNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/device-authorization/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/email-otp/client.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailOTPClient: () => (/* binding */ emailOTPClient)\n/* harmony export */ });\n//#region src/plugins/email-otp/client.ts\nconst emailOTPClient = () => {\n\treturn {\n\t\tid: \"email-otp\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/email-otp/verify-email\" || path === \"/sign-in/email-otp\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2VtYWlsLW90cC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGVtYWlsLW90cFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvZW1haWwtb3RwL2NsaWVudC50c1xuY29uc3QgZW1haWxPVFBDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiZW1haWwtb3RwXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fSxcblx0XHRhdG9tTGlzdGVuZXJzOiBbe1xuXHRcdFx0bWF0Y2hlcjogKHBhdGgpID0+IHBhdGggPT09IFwiL2VtYWlsLW90cC92ZXJpZnktZW1haWxcIiB8fCBwYXRoID09PSBcIi9zaWduLWluL2VtYWlsLW90cFwiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlbWFpbE9UUENsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/email-otp/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   genericOAuthClient: () => (/* binding */ genericOAuthClient)\n/* harmony export */ });\n//#region src/plugins/generic-oauth/client.ts\nconst genericOAuthClient = () => {\n\treturn {\n\t\tid: \"generic-oauth-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2dlbmVyaWMtb2F1dGgvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxnZW5lcmljLW9hdXRoXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9nZW5lcmljLW9hdXRoL2NsaWVudC50c1xuY29uc3QgZ2VuZXJpY09BdXRoQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcImdlbmVyaWMtb2F1dGgtY2xpZW50XCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZW5lcmljT0F1dGhDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/generic-oauth/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/jwt/client.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/jwt/client.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   jwtClient: () => (/* binding */ jwtClient)\n/* harmony export */ });\n//#region src/plugins/jwt/client.ts\nconst jwtClient = (options) => {\n\tconst jwksPath = options?.jwks?.jwksPath ?? \"/jwks\";\n\treturn {\n\t\tid: \"better-auth-client\",\n\t\t$InferServerPlugin: {},\n\t\tpathMethods: { [jwksPath]: \"GET\" },\n\t\tgetActions: ($fetch) => ({ jwks: async (fetchOptions) => {\n\t\t\treturn await $fetch(jwksPath, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\t...fetchOptions\n\t\t\t});\n\t\t} })\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2p3dC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLGlCQUFpQixtQkFBbUI7QUFDcEMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXGp3dFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvand0L2NsaWVudC50c1xuY29uc3Qgand0Q2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3Qgandrc1BhdGggPSBvcHRpb25zPy5qd2tzPy5qd2tzUGF0aCA/PyBcIi9qd2tzXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwiYmV0dGVyLWF1dGgtY2xpZW50XCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fSxcblx0XHRwYXRoTWV0aG9kczogeyBbandrc1BhdGhdOiBcIkdFVFwiIH0sXG5cdFx0Z2V0QWN0aW9uczogKCRmZXRjaCkgPT4gKHsgandrczogYXN5bmMgKGZldGNoT3B0aW9ucykgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0ICRmZXRjaChqd2tzUGF0aCwge1xuXHRcdFx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0XHRcdC4uLmZldGNoT3B0aW9uc1xuXHRcdFx0fSk7XG5cdFx0fSB9KVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBqd3RDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/jwt/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/last-login-method/client.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   lastLoginMethodClient: () => (/* binding */ lastLoginMethodClient)\n/* harmony export */ });\n//#region src/plugins/last-login-method/client.ts\nfunction getCookieValue(name) {\n\tif (typeof document === \"undefined\") return null;\n\tconst cookie = document.cookie.split(\"; \").find((row) => row.startsWith(`${name}=`));\n\treturn cookie ? cookie.split(\"=\")[1] : null;\n}\n/**\n* Client-side plugin to retrieve the last used login method\n*/\nconst lastLoginMethodClient = (config = {}) => {\n\tconst cookieName = config.cookieName || \"better-auth.last_used_login_method\";\n\treturn {\n\t\tid: \"last-login-method-client\",\n\t\tgetActions() {\n\t\t\treturn {\n\t\t\t\tgetLastUsedLoginMethod: () => {\n\t\t\t\t\treturn getCookieValue(cookieName);\n\t\t\t\t},\n\t\t\t\tclearLastUsedLoginMethod: () => {\n\t\t\t\t\tif (typeof document !== \"undefined\") document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n\t\t\t\t},\n\t\t\t\tisLastUsedLoginMethod: (method) => {\n\t\t\t\t\treturn getCookieValue(cookieName) === method;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL2xhc3QtbG9naW4tbWV0aG9kL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxtQ0FBbUMsS0FBSztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsK0RBQStELFdBQVcsR0FBRyx1Q0FBdUMsT0FBTztBQUMzSCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxsYXN0LWxvZ2luLW1ldGhvZFxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvbGFzdC1sb2dpbi1tZXRob2QvY2xpZW50LnRzXG5mdW5jdGlvbiBnZXRDb29raWVWYWx1ZShuYW1lKSB7XG5cdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuXHRjb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXCI7IFwiKS5maW5kKChyb3cpID0+IHJvdy5zdGFydHNXaXRoKGAke25hbWV9PWApKTtcblx0cmV0dXJuIGNvb2tpZSA/IGNvb2tpZS5zcGxpdChcIj1cIilbMV0gOiBudWxsO1xufVxuLyoqXG4qIENsaWVudC1zaWRlIHBsdWdpbiB0byByZXRyaWV2ZSB0aGUgbGFzdCB1c2VkIGxvZ2luIG1ldGhvZFxuKi9cbmNvbnN0IGxhc3RMb2dpbk1ldGhvZENsaWVudCA9IChjb25maWcgPSB7fSkgPT4ge1xuXHRjb25zdCBjb29raWVOYW1lID0gY29uZmlnLmNvb2tpZU5hbWUgfHwgXCJiZXR0ZXItYXV0aC5sYXN0X3VzZWRfbG9naW5fbWV0aG9kXCI7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibGFzdC1sb2dpbi1tZXRob2QtY2xpZW50XCIsXG5cdFx0Z2V0QWN0aW9ucygpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGdldExhc3RVc2VkTG9naW5NZXRob2Q6ICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gZ2V0Q29va2llVmFsdWUoY29va2llTmFtZSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNsZWFyTGFzdFVzZWRMb2dpbk1ldGhvZDogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIGRvY3VtZW50LmNvb2tpZSA9IGAke2Nvb2tpZU5hbWV9PTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQzsgcGF0aD0vO2A7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGlzTGFzdFVzZWRMb2dpbk1ldGhvZDogKG1ldGhvZCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBnZXRDb29raWVWYWx1ZShjb29raWVOYW1lKSA9PT0gbWV0aG9kO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbGFzdExvZ2luTWV0aG9kQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/last-login-method/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/magic-link/client.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   magicLinkClient: () => (/* binding */ magicLinkClient)\n/* harmony export */ });\n//#region src/plugins/magic-link/client.ts\nconst magicLinkClient = () => {\n\treturn {\n\t\tid: \"magic-link\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL21hZ2ljLWxpbmsvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxtYWdpYy1saW5rXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tYWdpYy1saW5rL2NsaWVudC50c1xuY29uc3QgbWFnaWNMaW5rQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm1hZ2ljLWxpbmtcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1hZ2ljTGlua0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/magic-link/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/multi-session/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   multiSessionClient: () => (/* binding */ multiSessionClient)\n/* harmony export */ });\n//#region src/plugins/multi-session/client.ts\nconst multiSessionClient = () => {\n\treturn {\n\t\tid: \"multi-session\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher(path) {\n\t\t\t\treturn path === \"/multi-session/set-active\";\n\t\t\t},\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL211bHRpLXNlc3Npb24vY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDOEI7QUFDOUIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxtdWx0aS1zZXNzaW9uXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9tdWx0aS1zZXNzaW9uL2NsaWVudC50c1xuY29uc3QgbXVsdGlTZXNzaW9uQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm11bHRpLXNlc3Npb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL211bHRpLXNlc3Npb24vc2V0LWFjdGl2ZVwiO1xuXHRcdFx0fSxcblx0XHRcdHNpZ25hbDogXCIkc2Vzc2lvblNpZ25hbFwiXG5cdFx0fV1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbXVsdGlTZXNzaW9uQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/multi-session/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oidcClient: () => (/* binding */ oidcClient)\n/* harmony export */ });\n//#region src/plugins/oidc-provider/client.ts\nconst oidcClient = () => {\n\treturn {\n\t\tid: \"oidc-client\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29pZGMtcHJvdmlkZXIvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvaWRjLXByb3ZpZGVyXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vaWRjLXByb3ZpZGVyL2NsaWVudC50c1xuY29uc3Qgb2lkY0NsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvaWRjLWNsaWVudFwiLFxuXHRcdCRJbmZlclNlcnZlclBsdWdpbjoge31cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb2lkY0NsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/oidc-provider/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-tap/client.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTapClient: () => (/* binding */ oneTapClient)\n/* harmony export */ });\n//#region src/plugins/one-tap/client.ts\nlet isRequestInProgress = null;\nfunction isFedCMSupported() {\n\treturn typeof window !== \"undefined\" && \"IdentityCredential\" in window;\n}\n/**\n* Reasons that should NOT trigger a retry.\n* @see https://developers.google.com/identity/gsi/web/reference/js-reference\n*/\nconst noRetryReasons = {\n\tdismissed: [\"credential_returned\", \"cancel_called\"],\n\tskipped: [\"user_cancel\", \"tap_outside\"]\n};\nconst oneTapClient = (options) => {\n\treturn {\n\t\tid: \"one-tap\",\n\t\tfetchPlugins: [{\n\t\t\tid: \"fedcm-signout-handle\",\n\t\t\tname: \"FedCM Sign-Out Handler\",\n\t\t\thooks: { async onResponse(ctx) {\n\t\t\t\tif (!ctx.request.url.toString().includes(\"/sign-out\")) return;\n\t\t\t\tif (options.promptOptions?.fedCM === false || !isFedCMSupported()) return;\n\t\t\t\tnavigator.credentials.preventSilentAccess();\n\t\t\t} }\n\t\t}],\n\t\tgetActions: ($fetch, _) => {\n\t\t\treturn { oneTap: async (opts, fetchOptions) => {\n\t\t\t\tif (isRequestInProgress && !isRequestInProgress.signal.aborted) {\n\t\t\t\t\tconsole.warn(\"A Google One Tap request is already in progress. Please wait.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof window === \"undefined\" || !window.document) {\n\t\t\t\t\tconsole.warn(\"Google One Tap is only available in browser environments\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (opts?.button) {\n\t\t\t\t\tawait loadGoogleScript();\n\t\t\t\t\tconst container = typeof opts.button.container === \"string\" ? document.querySelector(opts.button.container) : opts.button.container;\n\t\t\t\t\tif (!container) {\n\t\t\t\t\t\tconsole.error(\"Google One Tap: Button container not found\", opts.button.container);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tasync function callback$1(idToken) {\n\t\t\t\t\t\tawait $fetch(\"/one-tap/callback\", {\n\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\tbody: { idToken },\n\t\t\t\t\t\t\t...opts?.fetchOptions,\n\t\t\t\t\t\t\t...fetchOptions\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!opts?.fetchOptions && !fetchOptions || opts?.callbackURL) window.location.href = opts?.callbackURL ?? \"/\";\n\t\t\t\t\t}\n\t\t\t\t\tconst { autoSelect: autoSelect$1, cancelOnTapOutside: cancelOnTapOutside$1, context: context$1 } = opts ?? {};\n\t\t\t\t\tconst contextValue$1 = context$1 ?? options.context ?? \"signin\";\n\t\t\t\t\twindow.google?.accounts.id.initialize({\n\t\t\t\t\t\tclient_id: options.clientId,\n\t\t\t\t\t\tcallback: async (response) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback$1(response.credential);\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error(\"Error during button callback:\", error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tauto_select: autoSelect$1,\n\t\t\t\t\t\tcancel_on_tap_outside: cancelOnTapOutside$1,\n\t\t\t\t\t\tcontext: contextValue$1,\n\t\t\t\t\t\tux_mode: opts?.uxMode || \"popup\",\n\t\t\t\t\t\tnonce: opts?.nonce,\n\t\t\t\t\t\titp_support: true,\n\t\t\t\t\t\t...options.additionalOptions\n\t\t\t\t\t});\n\t\t\t\t\twindow.google?.accounts.id.renderButton(container, opts.button.config ?? { type: \"icon\" });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tasync function callback(idToken) {\n\t\t\t\t\tawait $fetch(\"/one-tap/callback\", {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\tbody: { idToken },\n\t\t\t\t\t\t...opts?.fetchOptions,\n\t\t\t\t\t\t...fetchOptions\n\t\t\t\t\t});\n\t\t\t\t\tif (!opts?.fetchOptions && !fetchOptions || opts?.callbackURL) window.location.href = opts?.callbackURL ?? \"/\";\n\t\t\t\t}\n\t\t\t\tconst { autoSelect, cancelOnTapOutside, context } = opts ?? {};\n\t\t\t\tconst contextValue = context ?? options.context ?? \"signin\";\n\t\t\t\tconst clients = {\n\t\t\t\t\tfedCM: async () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst identityCredential = await navigator.credentials.get({\n\t\t\t\t\t\t\t\tidentity: {\n\t\t\t\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t\t\t\t\tproviders: [{\n\t\t\t\t\t\t\t\t\t\tconfigURL: \"https://accounts.google.com/gsi/fedcm.json\",\n\t\t\t\t\t\t\t\t\t\tclientId: options.clientId,\n\t\t\t\t\t\t\t\t\t\tnonce: opts?.nonce\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tmediation: autoSelect ? \"optional\" : \"required\",\n\t\t\t\t\t\t\t\tsignal: isRequestInProgress?.signal\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!identityCredential?.token) {\n\t\t\t\t\t\t\t\topts?.onPromptNotification?.(void 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback(identityCredential.token);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error(\"Error during FedCM callback:\", error);\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tif (error?.code && (error.code === 19 || error.code === 20)) {\n\t\t\t\t\t\t\t\topts?.onPromptNotification?.(void 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\toneTap: () => {\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\t\tlet isResolved = false;\n\t\t\t\t\t\t\tconst baseDelay = options.promptOptions?.baseDelay ?? 1e3;\n\t\t\t\t\t\t\tconst maxAttempts = options.promptOptions?.maxAttempts ?? 5;\n\t\t\t\t\t\t\twindow.google?.accounts.id.initialize({\n\t\t\t\t\t\t\t\tclient_id: options.clientId,\n\t\t\t\t\t\t\t\tcallback: async (response) => {\n\t\t\t\t\t\t\t\t\tisResolved = true;\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tawait callback(response.credential);\n\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\t\tconsole.error(\"Error during One Tap callback:\", error);\n\t\t\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tauto_select: autoSelect,\n\t\t\t\t\t\t\t\tcancel_on_tap_outside: cancelOnTapOutside,\n\t\t\t\t\t\t\t\tcontext: contextValue,\n\t\t\t\t\t\t\t\tux_mode: opts?.uxMode || \"popup\",\n\t\t\t\t\t\t\t\tnonce: opts?.nonce,\n\t\t\t\t\t\t\t\titp_support: true,\n\t\t\t\t\t\t\t\t...options.additionalOptions\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst handlePrompt = (attempt) => {\n\t\t\t\t\t\t\t\tif (isResolved) return;\n\t\t\t\t\t\t\t\twindow.google?.accounts.id.prompt((notification) => {\n\t\t\t\t\t\t\t\t\tif (isResolved) return;\n\t\t\t\t\t\t\t\t\tif (notification.isDismissedMoment && notification.isDismissedMoment()) {\n\t\t\t\t\t\t\t\t\t\tconst reason = notification.getDismissedReason?.();\n\t\t\t\t\t\t\t\t\t\tif (noRetryReasons.dismissed.includes(reason)) {\n\t\t\t\t\t\t\t\t\t\t\topts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (attempt < maxAttempts) {\n\t\t\t\t\t\t\t\t\t\t\tconst delay = Math.pow(2, attempt) * baseDelay;\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handlePrompt(attempt + 1), delay);\n\t\t\t\t\t\t\t\t\t\t} else opts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t} else if (notification.isSkippedMoment && notification.isSkippedMoment()) {\n\t\t\t\t\t\t\t\t\t\tconst reason = notification.getSkippedReason?.();\n\t\t\t\t\t\t\t\t\t\tif (noRetryReasons.skipped.includes(reason)) {\n\t\t\t\t\t\t\t\t\t\t\topts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (attempt < maxAttempts) {\n\t\t\t\t\t\t\t\t\t\t\tconst delay = Math.pow(2, attempt) * baseDelay;\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => handlePrompt(attempt + 1), delay);\n\t\t\t\t\t\t\t\t\t\t} else opts?.onPromptNotification?.(notification);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\thandlePrompt(0);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (isRequestInProgress) isRequestInProgress?.abort();\n\t\t\t\tisRequestInProgress = new AbortController();\n\t\t\t\ttry {\n\t\t\t\t\tconst client = options.promptOptions?.fedCM === false || !isFedCMSupported() ? \"oneTap\" : \"fedCM\";\n\t\t\t\t\tif (client === \"oneTap\") await loadGoogleScript();\n\t\t\t\t\tawait clients[client]();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Error during Google One Tap flow:\", error);\n\t\t\t\t\tthrow error;\n\t\t\t\t} finally {\n\t\t\t\t\tisRequestInProgress = null;\n\t\t\t\t}\n\t\t\t} };\n\t\t},\n\t\tgetAtoms($fetch) {\n\t\t\treturn {};\n\t\t}\n\t};\n};\nconst loadGoogleScript = () => {\n\treturn new Promise((resolve) => {\n\t\tif (window.googleScriptInitialized) {\n\t\t\tresolve();\n\t\t\treturn;\n\t\t}\n\t\tconst script = document.createElement(\"script\");\n\t\tscript.src = \"https://accounts.google.com/gsi/client\";\n\t\tscript.async = true;\n\t\tscript.defer = true;\n\t\tscript.onload = () => {\n\t\t\twindow.googleScriptInitialized = true;\n\t\t\tresolve();\n\t\t};\n\t\tdocument.head.appendChild(script);\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10YXAvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGFBQWEseUZBQXlGO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGdGQUFnRixjQUFjO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsWUFBWSwwQ0FBMEM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvbmUtdGFwXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9vbmUtdGFwL2NsaWVudC50c1xubGV0IGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBudWxsO1xuZnVuY3Rpb24gaXNGZWRDTVN1cHBvcnRlZCgpIHtcblx0cmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJJZGVudGl0eUNyZWRlbnRpYWxcIiBpbiB3aW5kb3c7XG59XG4vKipcbiogUmVhc29ucyB0aGF0IHNob3VsZCBOT1QgdHJpZ2dlciBhIHJldHJ5LlxuKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2lkZW50aXR5L2dzaS93ZWIvcmVmZXJlbmNlL2pzLXJlZmVyZW5jZVxuKi9cbmNvbnN0IG5vUmV0cnlSZWFzb25zID0ge1xuXHRkaXNtaXNzZWQ6IFtcImNyZWRlbnRpYWxfcmV0dXJuZWRcIiwgXCJjYW5jZWxfY2FsbGVkXCJdLFxuXHRza2lwcGVkOiBbXCJ1c2VyX2NhbmNlbFwiLCBcInRhcF9vdXRzaWRlXCJdXG59O1xuY29uc3Qgb25lVGFwQ2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvbmUtdGFwXCIsXG5cdFx0ZmV0Y2hQbHVnaW5zOiBbe1xuXHRcdFx0aWQ6IFwiZmVkY20tc2lnbm91dC1oYW5kbGVcIixcblx0XHRcdG5hbWU6IFwiRmVkQ00gU2lnbi1PdXQgSGFuZGxlclwiLFxuXHRcdFx0aG9va3M6IHsgYXN5bmMgb25SZXNwb25zZShjdHgpIHtcblx0XHRcdFx0aWYgKCFjdHgucmVxdWVzdC51cmwudG9TdHJpbmcoKS5pbmNsdWRlcyhcIi9zaWduLW91dFwiKSkgcmV0dXJuO1xuXHRcdFx0XHRpZiAob3B0aW9ucy5wcm9tcHRPcHRpb25zPy5mZWRDTSA9PT0gZmFsc2UgfHwgIWlzRmVkQ01TdXBwb3J0ZWQoKSkgcmV0dXJuO1xuXHRcdFx0XHRuYXZpZ2F0b3IuY3JlZGVudGlhbHMucHJldmVudFNpbGVudEFjY2VzcygpO1xuXHRcdFx0fSB9XG5cdFx0fV0sXG5cdFx0Z2V0QWN0aW9uczogKCRmZXRjaCwgXykgPT4ge1xuXHRcdFx0cmV0dXJuIHsgb25lVGFwOiBhc3luYyAob3B0cywgZmV0Y2hPcHRpb25zKSA9PiB7XG5cdFx0XHRcdGlmIChpc1JlcXVlc3RJblByb2dyZXNzICYmICFpc1JlcXVlc3RJblByb2dyZXNzLnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiQSBHb29nbGUgT25lIFRhcCByZXF1ZXN0IGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSB3YWl0LlwiKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgIXdpbmRvdy5kb2N1bWVudCkge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIkdvb2dsZSBPbmUgVGFwIGlzIG9ubHkgYXZhaWxhYmxlIGluIGJyb3dzZXIgZW52aXJvbm1lbnRzXCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob3B0cz8uYnV0dG9uKSB7XG5cdFx0XHRcdFx0YXdhaXQgbG9hZEdvb2dsZVNjcmlwdCgpO1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBvcHRzLmJ1dHRvbi5jb250YWluZXIgPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdHMuYnV0dG9uLmNvbnRhaW5lcikgOiBvcHRzLmJ1dHRvbi5jb250YWluZXI7XG5cdFx0XHRcdFx0aWYgKCFjb250YWluZXIpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJHb29nbGUgT25lIFRhcDogQnV0dG9uIGNvbnRhaW5lciBub3QgZm91bmRcIiwgb3B0cy5idXR0b24uY29udGFpbmVyKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YXN5bmMgZnVuY3Rpb24gY2FsbGJhY2skMShpZFRva2VuKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCAkZmV0Y2goXCIvb25lLXRhcC9jYWxsYmFja1wiLCB7XG5cdFx0XHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0XHRcdGJvZHk6IHsgaWRUb2tlbiB9LFxuXHRcdFx0XHRcdFx0XHQuLi5vcHRzPy5mZXRjaE9wdGlvbnMsXG5cdFx0XHRcdFx0XHRcdC4uLmZldGNoT3B0aW9uc1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpZiAoIW9wdHM/LmZldGNoT3B0aW9ucyAmJiAhZmV0Y2hPcHRpb25zIHx8IG9wdHM/LmNhbGxiYWNrVVJMKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9wdHM/LmNhbGxiYWNrVVJMID8/IFwiL1wiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGF1dG9TZWxlY3Q6IGF1dG9TZWxlY3QkMSwgY2FuY2VsT25UYXBPdXRzaWRlOiBjYW5jZWxPblRhcE91dHNpZGUkMSwgY29udGV4dDogY29udGV4dCQxIH0gPSBvcHRzID8/IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRleHRWYWx1ZSQxID0gY29udGV4dCQxID8/IG9wdGlvbnMuY29udGV4dCA/PyBcInNpZ25pblwiO1xuXHRcdFx0XHRcdHdpbmRvdy5nb29nbGU/LmFjY291bnRzLmlkLmluaXRpYWxpemUoe1xuXHRcdFx0XHRcdFx0Y2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0Y2FsbGJhY2s6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IGNhbGxiYWNrJDEocmVzcG9uc2UuY3JlZGVudGlhbCk7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBidXR0b24gY2FsbGJhY2s6XCIsIGVycm9yKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGF1dG9fc2VsZWN0OiBhdXRvU2VsZWN0JDEsXG5cdFx0XHRcdFx0XHRjYW5jZWxfb25fdGFwX291dHNpZGU6IGNhbmNlbE9uVGFwT3V0c2lkZSQxLFxuXHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlJDEsXG5cdFx0XHRcdFx0XHR1eF9tb2RlOiBvcHRzPy51eE1vZGUgfHwgXCJwb3B1cFwiLFxuXHRcdFx0XHRcdFx0bm9uY2U6IG9wdHM/Lm5vbmNlLFxuXHRcdFx0XHRcdFx0aXRwX3N1cHBvcnQ6IHRydWUsXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zLmFkZGl0aW9uYWxPcHRpb25zXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0d2luZG93Lmdvb2dsZT8uYWNjb3VudHMuaWQucmVuZGVyQnV0dG9uKGNvbnRhaW5lciwgb3B0cy5idXR0b24uY29uZmlnID8/IHsgdHlwZTogXCJpY29uXCIgfSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGFzeW5jIGZ1bmN0aW9uIGNhbGxiYWNrKGlkVG9rZW4pIHtcblx0XHRcdFx0XHRhd2FpdCAkZmV0Y2goXCIvb25lLXRhcC9jYWxsYmFja1wiLCB7XG5cdFx0XHRcdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRcdFx0XHRcdFx0Ym9keTogeyBpZFRva2VuIH0sXG5cdFx0XHRcdFx0XHQuLi5vcHRzPy5mZXRjaE9wdGlvbnMsXG5cdFx0XHRcdFx0XHQuLi5mZXRjaE9wdGlvbnNcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoIW9wdHM/LmZldGNoT3B0aW9ucyAmJiAhZmV0Y2hPcHRpb25zIHx8IG9wdHM/LmNhbGxiYWNrVVJMKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG9wdHM/LmNhbGxiYWNrVVJMID8/IFwiL1wiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHsgYXV0b1NlbGVjdCwgY2FuY2VsT25UYXBPdXRzaWRlLCBjb250ZXh0IH0gPSBvcHRzID8/IHt9O1xuXHRcdFx0XHRjb25zdCBjb250ZXh0VmFsdWUgPSBjb250ZXh0ID8/IG9wdGlvbnMuY29udGV4dCA/PyBcInNpZ25pblwiO1xuXHRcdFx0XHRjb25zdCBjbGllbnRzID0ge1xuXHRcdFx0XHRcdGZlZENNOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpZGVudGl0eUNyZWRlbnRpYWwgPSBhd2FpdCBuYXZpZ2F0b3IuY3JlZGVudGlhbHMuZ2V0KHtcblx0XHRcdFx0XHRcdFx0XHRpZGVudGl0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0cHJvdmlkZXJzOiBbe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25maWdVUkw6IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL2dzaS9mZWRjbS5qc29uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub25jZTogb3B0cz8ubm9uY2Vcblx0XHRcdFx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRtZWRpYXRpb246IGF1dG9TZWxlY3QgPyBcIm9wdGlvbmFsXCIgOiBcInJlcXVpcmVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsOiBpc1JlcXVlc3RJblByb2dyZXNzPy5zaWduYWxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGlmICghaWRlbnRpdHlDcmVkZW50aWFsPy50b2tlbikge1xuXHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4odm9pZCAwKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCBjYWxsYmFjayhpZGVudGl0eUNyZWRlbnRpYWwudG9rZW4pO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIEZlZENNIGNhbGxiYWNrOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChlcnJvcj8uY29kZSAmJiAoZXJyb3IuY29kZSA9PT0gMTkgfHwgZXJyb3IuY29kZSA9PT0gMjApKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3B0cz8ub25Qcm9tcHROb3RpZmljYXRpb24/Lih2b2lkIDApO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uZVRhcDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IGlzUmVzb2x2ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYmFzZURlbGF5ID0gb3B0aW9ucy5wcm9tcHRPcHRpb25zPy5iYXNlRGVsYXkgPz8gMWUzO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtYXhBdHRlbXB0cyA9IG9wdGlvbnMucHJvbXB0T3B0aW9ucz8ubWF4QXR0ZW1wdHMgPz8gNTtcblx0XHRcdFx0XHRcdFx0d2luZG93Lmdvb2dsZT8uYWNjb3VudHMuaWQuaW5pdGlhbGl6ZSh7XG5cdFx0XHRcdFx0XHRcdFx0Y2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLFxuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrOiBhc3luYyAocmVzcG9uc2UpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlzUmVzb2x2ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgY2FsbGJhY2socmVzcG9uc2UuY3JlZGVudGlhbCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgT25lIFRhcCBjYWxsYmFjazpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0YXV0b19zZWxlY3Q6IGF1dG9TZWxlY3QsXG5cdFx0XHRcdFx0XHRcdFx0Y2FuY2VsX29uX3RhcF9vdXRzaWRlOiBjYW5jZWxPblRhcE91dHNpZGUsXG5cdFx0XHRcdFx0XHRcdFx0Y29udGV4dDogY29udGV4dFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdHV4X21vZGU6IG9wdHM/LnV4TW9kZSB8fCBcInBvcHVwXCIsXG5cdFx0XHRcdFx0XHRcdFx0bm9uY2U6IG9wdHM/Lm5vbmNlLFxuXHRcdFx0XHRcdFx0XHRcdGl0cF9zdXBwb3J0OiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdC4uLm9wdGlvbnMuYWRkaXRpb25hbE9wdGlvbnNcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhbmRsZVByb21wdCA9IChhdHRlbXB0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzUmVzb2x2ZWQpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuZ29vZ2xlPy5hY2NvdW50cy5pZC5wcm9tcHQoKG5vdGlmaWNhdGlvbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzUmVzb2x2ZWQpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChub3RpZmljYXRpb24uaXNEaXNtaXNzZWRNb21lbnQgJiYgbm90aWZpY2F0aW9uLmlzRGlzbWlzc2VkTW9tZW50KCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcmVhc29uID0gbm90aWZpY2F0aW9uLmdldERpc21pc3NlZFJlYXNvbj8uKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChub1JldHJ5UmVhc29ucy5kaXNtaXNzZWQuaW5jbHVkZXMocmVhc29uKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4obm90aWZpY2F0aW9uKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiBiYXNlRGVsYXk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBoYW5kbGVQcm9tcHQoYXR0ZW1wdCArIDEpLCBkZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBvcHRzPy5vblByb21wdE5vdGlmaWNhdGlvbj8uKG5vdGlmaWNhdGlvbik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5vdGlmaWNhdGlvbi5pc1NraXBwZWRNb21lbnQgJiYgbm90aWZpY2F0aW9uLmlzU2tpcHBlZE1vbWVudCgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlYXNvbiA9IG5vdGlmaWNhdGlvbi5nZXRTa2lwcGVkUmVhc29uPy4oKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vUmV0cnlSZWFzb25zLnNraXBwZWQuaW5jbHVkZXMocmVhc29uKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdHM/Lm9uUHJvbXB0Tm90aWZpY2F0aW9uPy4obm90aWZpY2F0aW9uKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGF0dGVtcHQgPCBtYXhBdHRlbXB0cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiBiYXNlRGVsYXk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBoYW5kbGVQcm9tcHQoYXR0ZW1wdCArIDEpLCBkZWxheSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBvcHRzPy5vblByb21wdE5vdGlmaWNhdGlvbj8uKG5vdGlmaWNhdGlvbik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGhhbmRsZVByb21wdCgwKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGlzUmVxdWVzdEluUHJvZ3Jlc3MpIGlzUmVxdWVzdEluUHJvZ3Jlc3M/LmFib3J0KCk7XG5cdFx0XHRcdGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgY2xpZW50ID0gb3B0aW9ucy5wcm9tcHRPcHRpb25zPy5mZWRDTSA9PT0gZmFsc2UgfHwgIWlzRmVkQ01TdXBwb3J0ZWQoKSA/IFwib25lVGFwXCIgOiBcImZlZENNXCI7XG5cdFx0XHRcdFx0aWYgKGNsaWVudCA9PT0gXCJvbmVUYXBcIikgYXdhaXQgbG9hZEdvb2dsZVNjcmlwdCgpO1xuXHRcdFx0XHRcdGF3YWl0IGNsaWVudHNbY2xpZW50XSgpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgR29vZ2xlIE9uZSBUYXAgZmxvdzpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdHRocm93IGVycm9yO1xuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlzUmVxdWVzdEluUHJvZ3Jlc3MgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9IH07XG5cdFx0fSxcblx0XHRnZXRBdG9tcygkZmV0Y2gpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgbG9hZEdvb2dsZVNjcmlwdCA9ICgpID0+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0aWYgKHdpbmRvdy5nb29nbGVTY3JpcHRJbml0aWFsaXplZCkge1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHRcdHNjcmlwdC5zcmMgPSBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9nc2kvY2xpZW50XCI7XG5cdFx0c2NyaXB0LmFzeW5jID0gdHJ1ZTtcblx0XHRzY3JpcHQuZGVmZXIgPSB0cnVlO1xuXHRcdHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7XG5cdFx0XHR3aW5kb3cuZ29vZ2xlU2NyaXB0SW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH07XG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHR9KTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb25lVGFwQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/one-tap/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/one-time-token/client.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   oneTimeTokenClient: () => (/* binding */ oneTimeTokenClient)\n/* harmony export */ });\n//#region src/plugins/one-time-token/client.ts\nconst oneTimeTokenClient = () => {\n\treturn {\n\t\tid: \"one-time-token\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzhCO0FBQzlCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcb25lLXRpbWUtdG9rZW5cXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29uZS10aW1lLXRva2VuL2NsaWVudC50c1xuY29uc3Qgb25lVGltZVRva2VuQ2xpZW50ID0gKCkgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcIm9uZS10aW1lLXRva2VuXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBvbmVUaW1lVG9rZW5DbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/one-time-token/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/access/index.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.adminAc),\n/* harmony export */   defaultAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultAc),\n/* harmony export */   defaultRoles: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultRoles),\n/* harmony export */   defaultStatements: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.defaultStatements),\n/* harmony export */   memberAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.memberAc),\n/* harmony export */   ownerAc: () => (/* reexport safe */ _statement_mjs__WEBPACK_IMPORTED_MODULE_0__.ownerAc)\n/* harmony export */ });\n/* harmony import */ var _statement_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./statement.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3MvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxvcmdhbml6YXRpb25cXGFjY2Vzc1xcaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfSBmcm9tIFwiLi9zdGF0ZW1lbnQubWpzXCI7XG5cbmV4cG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/access/statement.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adminAc: () => (/* binding */ adminAc),\n/* harmony export */   defaultAc: () => (/* binding */ defaultAc),\n/* harmony export */   defaultRoles: () => (/* binding */ defaultRoles),\n/* harmony export */   defaultStatements: () => (/* binding */ defaultStatements),\n/* harmony export */   memberAc: () => (/* binding */ memberAc),\n/* harmony export */   ownerAc: () => (/* binding */ ownerAc)\n/* harmony export */ });\n/* harmony import */ var _access_access_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../access/access.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/access/access.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../access/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/access/index.mjs\");\n\n\n\n//#region src/plugins/organization/access/statement.ts\nconst defaultStatements = {\n\torganization: [\"update\", \"delete\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tinvitation: [\"create\", \"cancel\"],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n};\nconst defaultAc = (0,_access_access_mjs__WEBPACK_IMPORTED_MODULE_0__.createAccessControl)(defaultStatements);\nconst adminAc = defaultAc.newRole({\n\torganization: [\"update\"],\n\tinvitation: [\"create\", \"cancel\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n});\nconst ownerAc = defaultAc.newRole({\n\torganization: [\"update\", \"delete\"],\n\tmember: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tinvitation: [\"create\", \"cancel\"],\n\tteam: [\n\t\t\"create\",\n\t\t\"update\",\n\t\t\"delete\"\n\t],\n\tac: [\n\t\t\"create\",\n\t\t\"read\",\n\t\t\"update\",\n\t\t\"delete\"\n\t]\n});\nconst memberAc = defaultAc.newRole({\n\torganization: [],\n\tmember: [],\n\tinvitation: [],\n\tteam: [],\n\tac: [\"read\"]\n});\nconst defaultRoles = {\n\tadmin: adminAc,\n\towner: ownerAc,\n\tmember: memberAc\n};\n\n//#endregion\n\n//# sourceMappingURL=statement.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3Mvc3RhdGVtZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE4RDtBQUM5Qjs7QUFFaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrRjtBQUNsRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcYWNjZXNzXFxzdGF0ZW1lbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFjY2Vzc0NvbnRyb2wgfSBmcm9tIFwiLi4vLi4vYWNjZXNzL2FjY2Vzcy5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2FjY2Vzcy9pbmRleC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9hY2Nlc3Mvc3RhdGVtZW50LnRzXG5jb25zdCBkZWZhdWx0U3RhdGVtZW50cyA9IHtcblx0b3JnYW5pemF0aW9uOiBbXCJ1cGRhdGVcIiwgXCJkZWxldGVcIl0sXG5cdG1lbWJlcjogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGludml0YXRpb246IFtcImNyZWF0ZVwiLCBcImNhbmNlbFwiXSxcblx0dGVhbTogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGFjOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInJlYWRcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufTtcbmNvbnN0IGRlZmF1bHRBYyA9IGNyZWF0ZUFjY2Vzc0NvbnRyb2woZGVmYXVsdFN0YXRlbWVudHMpO1xuY29uc3QgYWRtaW5BYyA9IGRlZmF1bHRBYy5uZXdSb2xlKHtcblx0b3JnYW5pemF0aW9uOiBbXCJ1cGRhdGVcIl0sXG5cdGludml0YXRpb246IFtcImNyZWF0ZVwiLCBcImNhbmNlbFwiXSxcblx0bWVtYmVyOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0dGVhbTogW1xuXHRcdFwiY3JlYXRlXCIsXG5cdFx0XCJ1cGRhdGVcIixcblx0XHRcImRlbGV0ZVwiXG5cdF0sXG5cdGFjOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInJlYWRcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XVxufSk7XG5jb25zdCBvd25lckFjID0gZGVmYXVsdEFjLm5ld1JvbGUoe1xuXHRvcmdhbml6YXRpb246IFtcInVwZGF0ZVwiLCBcImRlbGV0ZVwiXSxcblx0bWVtYmVyOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0aW52aXRhdGlvbjogW1wiY3JlYXRlXCIsIFwiY2FuY2VsXCJdLFxuXHR0ZWFtOiBbXG5cdFx0XCJjcmVhdGVcIixcblx0XHRcInVwZGF0ZVwiLFxuXHRcdFwiZGVsZXRlXCJcblx0XSxcblx0YWM6IFtcblx0XHRcImNyZWF0ZVwiLFxuXHRcdFwicmVhZFwiLFxuXHRcdFwidXBkYXRlXCIsXG5cdFx0XCJkZWxldGVcIlxuXHRdXG59KTtcbmNvbnN0IG1lbWJlckFjID0gZGVmYXVsdEFjLm5ld1JvbGUoe1xuXHRvcmdhbml6YXRpb246IFtdLFxuXHRtZW1iZXI6IFtdLFxuXHRpbnZpdGF0aW9uOiBbXSxcblx0dGVhbTogW10sXG5cdGFjOiBbXCJyZWFkXCJdXG59KTtcbmNvbnN0IGRlZmF1bHRSb2xlcyA9IHtcblx0YWRtaW46IGFkbWluQWMsXG5cdG93bmVyOiBvd25lckFjLFxuXHRtZW1iZXI6IG1lbWJlckFjXG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGFkbWluQWMsIGRlZmF1bHRBYywgZGVmYXVsdFJvbGVzLCBkZWZhdWx0U3RhdGVtZW50cywgbWVtYmVyQWMsIG93bmVyQWMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YXRlbWVudC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/organization/client.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/client.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientSideHasPermission: () => (/* binding */ clientSideHasPermission),\n/* harmony export */   inferOrgAdditionalFields: () => (/* binding */ inferOrgAdditionalFields),\n/* harmony export */   organizationClient: () => (/* binding */ organizationClient)\n/* harmony export */ });\n/* harmony import */ var _client_query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../client/query.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _client_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../client/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/index.mjs\");\n/* harmony import */ var _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./access/statement.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/organization/access/statement.mjs\");\n/* harmony import */ var _access_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./access/index.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/organization/access/index.mjs\");\n/* harmony import */ var _permission_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./permission.mjs */ \"(ssr)/./node_modules/better-auth/dist/plugins/organization/permission.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/atom/index.js\");\n\n\n\n\n\n\n\n//#region src/plugins/organization/client.ts\n/**\n* Using the same `hasPermissionFn` function, but without the need for a `ctx` parameter or the `organizationId` parameter.\n*/\nconst clientSideHasPermission = (input) => {\n\treturn (0,_permission_mjs__WEBPACK_IMPORTED_MODULE_4__.hasPermissionFn)(input, input.options.roles || _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.defaultRoles);\n};\nconst organizationClient = (options) => {\n\tconst $listOrg = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeOrgSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeMemberSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst $activeMemberRoleSignal = (0,nanostores__WEBPACK_IMPORTED_MODULE_5__.atom)(false);\n\tconst roles = {\n\t\tadmin: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.adminAc,\n\t\tmember: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.memberAc,\n\t\towner: _access_statement_mjs__WEBPACK_IMPORTED_MODULE_2__.ownerAc,\n\t\t...options?.roles\n\t};\n\treturn {\n\t\tid: \"organization\",\n\t\t$InferServerPlugin: {},\n\t\tgetActions: ($fetch, _$store, co) => ({\n\t\t\t$Infer: {\n\t\t\t\tActiveOrganization: {},\n\t\t\t\tOrganization: {},\n\t\t\t\tInvitation: {},\n\t\t\t\tMember: {},\n\t\t\t\tTeam: {}\n\t\t\t},\n\t\t\torganization: { checkRolePermission: (data) => {\n\t\t\t\treturn clientSideHasPermission({\n\t\t\t\t\trole: data.role,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tac: options?.ac,\n\t\t\t\t\t\troles\n\t\t\t\t\t},\n\t\t\t\t\tpermissions: data.permissions ?? data.permission\n\t\t\t\t});\n\t\t\t} }\n\t\t}),\n\t\tgetAtoms: ($fetch) => {\n\t\t\tconst listOrganizations = (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($listOrg, \"/organization/list\", $fetch, { method: \"GET\" });\n\t\t\treturn {\n\t\t\t\t$listOrg,\n\t\t\t\t$activeOrgSignal,\n\t\t\t\t$activeMemberSignal,\n\t\t\t\t$activeMemberRoleSignal,\n\t\t\t\tactiveOrganization: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeOrgSignal], \"/organization/get-full-organization\", $fetch, () => ({ method: \"GET\" })),\n\t\t\t\tlistOrganizations,\n\t\t\t\tactiveMember: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeMemberSignal], \"/organization/get-active-member\", $fetch, { method: \"GET\" }),\n\t\t\t\tactiveMemberRole: (0,_client_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)([$activeMemberRoleSignal], \"/organization/get-active-member-role\", $fetch, { method: \"GET\" })\n\t\t\t};\n\t\t},\n\t\tpathMethods: {\n\t\t\t\"/organization/get-full-organization\": \"GET\",\n\t\t\t\"/organization/list-user-teams\": \"GET\"\n\t\t},\n\t\tatomListeners: [\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path === \"/organization/create\" || path === \"/organization/delete\" || path === \"/organization/update\";\n\t\t\t\t},\n\t\t\t\tsignal: \"$listOrg\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.startsWith(\"/organization\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeOrgSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.startsWith(\"/organization/set-active\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$sessionSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.includes(\"/organization/update-member-role\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeMemberSignal\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tmatcher(path) {\n\t\t\t\t\treturn path.includes(\"/organization/update-member-role\");\n\t\t\t\t},\n\t\t\t\tsignal: \"$activeMemberRoleSignal\"\n\t\t\t}\n\t\t]\n\t};\n};\nconst inferOrgAdditionalFields = (schema) => {\n\treturn {};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFzRDtBQUN0QjtBQUNrRDtBQUN0RDtBQUN1QjtBQUNqQjs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQWUsK0JBQStCLCtEQUFZO0FBQ2xFO0FBQ0E7QUFDQSxrQkFBa0IsZ0RBQUk7QUFDdEIsMEJBQTBCLGdEQUFJO0FBQzlCLDZCQUE2QixnREFBSTtBQUNqQyxpQ0FBaUMsZ0RBQUk7QUFDckM7QUFDQSxTQUFTLDBEQUFPO0FBQ2hCLFVBQVUsMkRBQVE7QUFDbEIsU0FBUywwREFBTztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCLG9CQUFvQjtBQUNwQixrQkFBa0I7QUFDbEIsY0FBYztBQUNkO0FBQ0EsSUFBSTtBQUNKLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0EsNkJBQTZCLCtEQUFZLDJDQUEyQyxlQUFlO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQVksNkVBQTZFLGVBQWU7QUFDaEk7QUFDQSxrQkFBa0IsK0RBQVkscUVBQXFFLGVBQWU7QUFDbEgsc0JBQXNCLCtEQUFZLDhFQUE4RSxlQUFlO0FBQy9IO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNpRjtBQUNqRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi4vLi4vY2xpZW50L3F1ZXJ5Lm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2xpZW50L2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgYWRtaW5BYywgZGVmYXVsdFJvbGVzLCBtZW1iZXJBYywgb3duZXJBYyB9IGZyb20gXCIuL2FjY2Vzcy9zdGF0ZW1lbnQubWpzXCI7XG5pbXBvcnQgXCIuL2FjY2Vzcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGhhc1Blcm1pc3Npb25GbiB9IGZyb20gXCIuL3Blcm1pc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBhdG9tIH0gZnJvbSBcIm5hbm9zdG9yZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9jbGllbnQudHNcbi8qKlxuKiBVc2luZyB0aGUgc2FtZSBgaGFzUGVybWlzc2lvbkZuYCBmdW5jdGlvbiwgYnV0IHdpdGhvdXQgdGhlIG5lZWQgZm9yIGEgYGN0eGAgcGFyYW1ldGVyIG9yIHRoZSBgb3JnYW5pemF0aW9uSWRgIHBhcmFtZXRlci5cbiovXG5jb25zdCBjbGllbnRTaWRlSGFzUGVybWlzc2lvbiA9IChpbnB1dCkgPT4ge1xuXHRyZXR1cm4gaGFzUGVybWlzc2lvbkZuKGlucHV0LCBpbnB1dC5vcHRpb25zLnJvbGVzIHx8IGRlZmF1bHRSb2xlcyk7XG59O1xuY29uc3Qgb3JnYW5pemF0aW9uQ2xpZW50ID0gKG9wdGlvbnMpID0+IHtcblx0Y29uc3QgJGxpc3RPcmcgPSBhdG9tKGZhbHNlKTtcblx0Y29uc3QgJGFjdGl2ZU9yZ1NpZ25hbCA9IGF0b20oZmFsc2UpO1xuXHRjb25zdCAkYWN0aXZlTWVtYmVyU2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0ICRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHJvbGVzID0ge1xuXHRcdGFkbWluOiBhZG1pbkFjLFxuXHRcdG1lbWJlcjogbWVtYmVyQWMsXG5cdFx0b3duZXI6IG93bmVyQWMsXG5cdFx0Li4ub3B0aW9ucz8ucm9sZXNcblx0fTtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJvcmdhbml6YXRpb25cIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGdldEFjdGlvbnM6ICgkZmV0Y2gsIF8kc3RvcmUsIGNvKSA9PiAoe1xuXHRcdFx0JEluZmVyOiB7XG5cdFx0XHRcdEFjdGl2ZU9yZ2FuaXphdGlvbjoge30sXG5cdFx0XHRcdE9yZ2FuaXphdGlvbjoge30sXG5cdFx0XHRcdEludml0YXRpb246IHt9LFxuXHRcdFx0XHRNZW1iZXI6IHt9LFxuXHRcdFx0XHRUZWFtOiB7fVxuXHRcdFx0fSxcblx0XHRcdG9yZ2FuaXphdGlvbjogeyBjaGVja1JvbGVQZXJtaXNzaW9uOiAoZGF0YSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gY2xpZW50U2lkZUhhc1Blcm1pc3Npb24oe1xuXHRcdFx0XHRcdHJvbGU6IGRhdGEucm9sZSxcblx0XHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0XHRhYzogb3B0aW9ucz8uYWMsXG5cdFx0XHRcdFx0XHRyb2xlc1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cGVybWlzc2lvbnM6IGRhdGEucGVybWlzc2lvbnMgPz8gZGF0YS5wZXJtaXNzaW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSB9XG5cdFx0fSksXG5cdFx0Z2V0QXRvbXM6ICgkZmV0Y2gpID0+IHtcblx0XHRcdGNvbnN0IGxpc3RPcmdhbml6YXRpb25zID0gdXNlQXV0aFF1ZXJ5KCRsaXN0T3JnLCBcIi9vcmdhbml6YXRpb24vbGlzdFwiLCAkZmV0Y2gsIHsgbWV0aG9kOiBcIkdFVFwiIH0pO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0JGxpc3RPcmcsXG5cdFx0XHRcdCRhY3RpdmVPcmdTaWduYWwsXG5cdFx0XHRcdCRhY3RpdmVNZW1iZXJTaWduYWwsXG5cdFx0XHRcdCRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsLFxuXHRcdFx0XHRhY3RpdmVPcmdhbml6YXRpb246IHVzZUF1dGhRdWVyeShbJGFjdGl2ZU9yZ1NpZ25hbF0sIFwiL29yZ2FuaXphdGlvbi9nZXQtZnVsbC1vcmdhbml6YXRpb25cIiwgJGZldGNoLCAoKSA9PiAoeyBtZXRob2Q6IFwiR0VUXCIgfSkpLFxuXHRcdFx0XHRsaXN0T3JnYW5pemF0aW9ucyxcblx0XHRcdFx0YWN0aXZlTWVtYmVyOiB1c2VBdXRoUXVlcnkoWyRhY3RpdmVNZW1iZXJTaWduYWxdLCBcIi9vcmdhbml6YXRpb24vZ2V0LWFjdGl2ZS1tZW1iZXJcIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KSxcblx0XHRcdFx0YWN0aXZlTWVtYmVyUm9sZTogdXNlQXV0aFF1ZXJ5KFskYWN0aXZlTWVtYmVyUm9sZVNpZ25hbF0sIFwiL29yZ2FuaXphdGlvbi9nZXQtYWN0aXZlLW1lbWJlci1yb2xlXCIsICRmZXRjaCwgeyBtZXRob2Q6IFwiR0VUXCIgfSlcblx0XHRcdH07XG5cdFx0fSxcblx0XHRwYXRoTWV0aG9kczoge1xuXHRcdFx0XCIvb3JnYW5pemF0aW9uL2dldC1mdWxsLW9yZ2FuaXphdGlvblwiOiBcIkdFVFwiLFxuXHRcdFx0XCIvb3JnYW5pemF0aW9uL2xpc3QtdXNlci10ZWFtc1wiOiBcIkdFVFwiXG5cdFx0fSxcblx0XHRhdG9tTGlzdGVuZXJzOiBbXG5cdFx0XHR7XG5cdFx0XHRcdG1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoID09PSBcIi9vcmdhbml6YXRpb24vY3JlYXRlXCIgfHwgcGF0aCA9PT0gXCIvb3JnYW5pemF0aW9uL2RlbGV0ZVwiIHx8IHBhdGggPT09IFwiL29yZ2FuaXphdGlvbi91cGRhdGVcIjtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRsaXN0T3JnXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG1hdGNoZXIocGF0aCkge1xuXHRcdFx0XHRcdHJldHVybiBwYXRoLnN0YXJ0c1dpdGgoXCIvb3JnYW5pemF0aW9uXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaWduYWw6IFwiJGFjdGl2ZU9yZ1NpZ25hbFwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0aC5zdGFydHNXaXRoKFwiL29yZ2FuaXphdGlvbi9zZXQtYWN0aXZlXCIpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGguaW5jbHVkZXMoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1tZW1iZXItcm9sZVwiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRhY3RpdmVNZW1iZXJTaWduYWxcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGguaW5jbHVkZXMoXCIvb3JnYW5pemF0aW9uL3VwZGF0ZS1tZW1iZXItcm9sZVwiKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2lnbmFsOiBcIiRhY3RpdmVNZW1iZXJSb2xlU2lnbmFsXCJcblx0XHRcdH1cblx0XHRdXG5cdH07XG59O1xuY29uc3QgaW5mZXJPcmdBZGRpdGlvbmFsRmllbGRzID0gKHNjaGVtYSkgPT4ge1xuXHRyZXR1cm4ge307XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNsaWVudFNpZGVIYXNQZXJtaXNzaW9uLCBpbmZlck9yZ0FkZGl0aW9uYWxGaWVsZHMsIG9yZ2FuaXphdGlvbkNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/organization/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/organization/permission.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/organization/permission.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cacheAllRoles: () => (/* binding */ cacheAllRoles),\n/* harmony export */   hasPermissionFn: () => (/* binding */ hasPermissionFn)\n/* harmony export */ });\n//#region src/plugins/organization/permission.ts\nconst hasPermissionFn = (input, acRoles) => {\n\tif (!input.permissions && !input.permission) return false;\n\tconst roles = input.role.split(\",\");\n\tconst creatorRole = input.options.creatorRole || \"owner\";\n\tconst isCreator = roles.includes(creatorRole);\n\tconst allowCreatorsAllPermissions = input.allowCreatorAllPermissions || false;\n\tif (isCreator && allowCreatorsAllPermissions) return true;\n\tfor (const role of roles) if ((acRoles[role]?.authorize(input.permissions ?? input.permission))?.success) return true;\n\treturn false;\n};\nconst cacheAllRoles = /* @__PURE__ */ new Map();\n\n//#endregion\n\n//# sourceMappingURL=permission.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL29yZ2FuaXphdGlvbi9wZXJtaXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQztBQUMxQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXG9yZ2FuaXphdGlvblxccGVybWlzc2lvbi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL29yZ2FuaXphdGlvbi9wZXJtaXNzaW9uLnRzXG5jb25zdCBoYXNQZXJtaXNzaW9uRm4gPSAoaW5wdXQsIGFjUm9sZXMpID0+IHtcblx0aWYgKCFpbnB1dC5wZXJtaXNzaW9ucyAmJiAhaW5wdXQucGVybWlzc2lvbikgcmV0dXJuIGZhbHNlO1xuXHRjb25zdCByb2xlcyA9IGlucHV0LnJvbGUuc3BsaXQoXCIsXCIpO1xuXHRjb25zdCBjcmVhdG9yUm9sZSA9IGlucHV0Lm9wdGlvbnMuY3JlYXRvclJvbGUgfHwgXCJvd25lclwiO1xuXHRjb25zdCBpc0NyZWF0b3IgPSByb2xlcy5pbmNsdWRlcyhjcmVhdG9yUm9sZSk7XG5cdGNvbnN0IGFsbG93Q3JlYXRvcnNBbGxQZXJtaXNzaW9ucyA9IGlucHV0LmFsbG93Q3JlYXRvckFsbFBlcm1pc3Npb25zIHx8IGZhbHNlO1xuXHRpZiAoaXNDcmVhdG9yICYmIGFsbG93Q3JlYXRvcnNBbGxQZXJtaXNzaW9ucykgcmV0dXJuIHRydWU7XG5cdGZvciAoY29uc3Qgcm9sZSBvZiByb2xlcykgaWYgKChhY1JvbGVzW3JvbGVdPy5hdXRob3JpemUoaW5wdXQucGVybWlzc2lvbnMgPz8gaW5wdXQucGVybWlzc2lvbikpPy5zdWNjZXNzKSByZXR1cm4gdHJ1ZTtcblx0cmV0dXJuIGZhbHNlO1xufTtcbmNvbnN0IGNhY2hlQWxsUm9sZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhY2hlQWxsUm9sZXMsIGhhc1Blcm1pc3Npb25GbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGVybWlzc2lvbi5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/organization/permission.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/phone-number/client.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   phoneNumberClient: () => (/* binding */ phoneNumberClient)\n/* harmony export */ });\n//#region src/plugins/phone-number/client.ts\nconst phoneNumberClient = () => {\n\treturn {\n\t\tid: \"phoneNumber\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher(path) {\n\t\t\t\treturn path === \"/phone-number/update\" || path === \"/phone-number/verify\" || path === \"/sign-in/phone-number\";\n\t\t\t},\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Bob25lLW51bWJlci9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUM2QjtBQUM3QiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHBob25lLW51bWJlclxcY2xpZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL3BsdWdpbnMvcGhvbmUtbnVtYmVyL2NsaWVudC50c1xuY29uc3QgcGhvbmVOdW1iZXJDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwicGhvbmVOdW1iZXJcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyKHBhdGgpIHtcblx0XHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL3Bob25lLW51bWJlci91cGRhdGVcIiB8fCBwYXRoID09PSBcIi9waG9uZS1udW1iZXIvdmVyaWZ5XCIgfHwgcGF0aCA9PT0gXCIvc2lnbi1pbi9waG9uZS1udW1iZXJcIjtcblx0XHRcdH0sXG5cdFx0XHRzaWduYWw6IFwiJHNlc3Npb25TaWduYWxcIlxuXHRcdH1dXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHBob25lTnVtYmVyQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/phone-number/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/siwe/client.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/siwe/client.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   siweClient: () => (/* binding */ siweClient)\n/* harmony export */ });\n//#region src/plugins/siwe/client.ts\nconst siweClient = () => {\n\treturn {\n\t\tid: \"siwe\",\n\t\t$InferServerPlugin: {}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3Npd2UvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFxwbHVnaW5zXFxzaXdlXFxjbGllbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvcGx1Z2lucy9zaXdlL2NsaWVudC50c1xuY29uc3Qgc2l3ZUNsaWVudCA9ICgpID0+IHtcblx0cmV0dXJuIHtcblx0XHRpZDogXCJzaXdlXCIsXG5cdFx0JEluZmVyU2VydmVyUGx1Z2luOiB7fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaXdlQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/siwe/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/two-factor/client.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   twoFactorClient: () => (/* binding */ twoFactorClient)\n/* harmony export */ });\n//#region src/plugins/two-factor/client.ts\nconst twoFactorClient = (options) => {\n\treturn {\n\t\tid: \"two-factor\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path.startsWith(\"/two-factor/\"),\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}],\n\t\tpathMethods: {\n\t\t\t\"/two-factor/disable\": \"POST\",\n\t\t\t\"/two-factor/enable\": \"POST\",\n\t\t\t\"/two-factor/send-otp\": \"POST\",\n\t\t\t\"/two-factor/generate-backup-codes\": \"POST\",\n\t\t\t\"/two-factor/get-totp-uri\": \"POST\",\n\t\t\t\"/two-factor/verify-totp\": \"POST\",\n\t\t\t\"/two-factor/verify-otp\": \"POST\",\n\t\t\t\"/two-factor/verify-backup-code\": \"POST\"\n\t\t},\n\t\tfetchPlugins: [{\n\t\t\tid: \"two-factor\",\n\t\t\tname: \"two-factor\",\n\t\t\thooks: { async onSuccess(context) {\n\t\t\t\tif (context.data?.twoFactorRedirect) {\n\t\t\t\t\tif (options?.onTwoFactorRedirect) await options.onTwoFactorRedirect();\n\t\t\t\t}\n\t\t\t} }\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3R3by1mYWN0b3IvY2xpZW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUMyQjtBQUMzQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxDaG9oYW4gUENcXERvY3VtZW50c1xcR2l0SHViXFxIYWNrYXRob24tMlxcZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcYmV0dGVyLWF1dGhcXGRpc3RcXHBsdWdpbnNcXHR3by1mYWN0b3JcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3R3by1mYWN0b3IvY2xpZW50LnRzXG5jb25zdCB0d29GYWN0b3JDbGllbnQgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBcInR3by1mYWN0b3JcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyOiAocGF0aCkgPT4gcGF0aC5zdGFydHNXaXRoKFwiL3R3by1mYWN0b3IvXCIpLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XSxcblx0XHRwYXRoTWV0aG9kczoge1xuXHRcdFx0XCIvdHdvLWZhY3Rvci9kaXNhYmxlXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvdHdvLWZhY3Rvci9lbmFibGVcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3NlbmQtb3RwXCI6IFwiUE9TVFwiLFxuXHRcdFx0XCIvdHdvLWZhY3Rvci9nZW5lcmF0ZS1iYWNrdXAtY29kZXNcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL2dldC10b3RwLXVyaVwiOiBcIlBPU1RcIixcblx0XHRcdFwiL3R3by1mYWN0b3IvdmVyaWZ5LXRvdHBcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3ZlcmlmeS1vdHBcIjogXCJQT1NUXCIsXG5cdFx0XHRcIi90d28tZmFjdG9yL3ZlcmlmeS1iYWNrdXAtY29kZVwiOiBcIlBPU1RcIlxuXHRcdH0sXG5cdFx0ZmV0Y2hQbHVnaW5zOiBbe1xuXHRcdFx0aWQ6IFwidHdvLWZhY3RvclwiLFxuXHRcdFx0bmFtZTogXCJ0d28tZmFjdG9yXCIsXG5cdFx0XHRob29rczogeyBhc3luYyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdFx0XHRpZiAoY29udGV4dC5kYXRhPy50d29GYWN0b3JSZWRpcmVjdCkge1xuXHRcdFx0XHRcdGlmIChvcHRpb25zPy5vblR3b0ZhY3RvclJlZGlyZWN0KSBhd2FpdCBvcHRpb25zLm9uVHdvRmFjdG9yUmVkaXJlY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSB9XG5cdFx0fV1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdHdvRmFjdG9yQ2xpZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/two-factor/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/plugins/username/client.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/better-auth/dist/plugins/username/client.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usernameClient: () => (/* binding */ usernameClient)\n/* harmony export */ });\n//#region src/plugins/username/client.ts\nconst usernameClient = () => {\n\treturn {\n\t\tid: \"username\",\n\t\t$InferServerPlugin: {},\n\t\tatomListeners: [{\n\t\t\tmatcher: (path) => path === \"/sign-in/username\",\n\t\t\tsignal: \"$sessionSignal\"\n\t\t}]\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=client.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9wbHVnaW5zL3VzZXJuYW1lL2NsaWVudC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxccGx1Z2luc1xcdXNlcm5hbWVcXGNsaWVudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9wbHVnaW5zL3VzZXJuYW1lL2NsaWVudC50c1xuY29uc3QgdXNlcm5hbWVDbGllbnQgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwidXNlcm5hbWVcIixcblx0XHQkSW5mZXJTZXJ2ZXJQbHVnaW46IHt9LFxuXHRcdGF0b21MaXN0ZW5lcnM6IFt7XG5cdFx0XHRtYXRjaGVyOiAocGF0aCkgPT4gcGF0aCA9PT0gXCIvc2lnbi1pbi91c2VybmFtZVwiLFxuXHRcdFx0c2lnbmFsOiBcIiRzZXNzaW9uU2lnbmFsXCJcblx0XHR9XVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB1c2VybmFtZUNsaWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/plugins/username/client.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/is-atom.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n//#region src/utils/is-atom.ts\nfunction isAtom(value) {\n\treturn typeof value === \"object\" && value !== null && \"get\" in value && typeof value.get === \"function\" && \"lc\" in value && typeof value.lc === \"number\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pcy1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ2hvaGFuIFBDXFxEb2N1bWVudHNcXEdpdEh1YlxcSGFja2F0aG9uLTJcXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXGJldHRlci1hdXRoXFxkaXN0XFx1dGlsc1xcaXMtYXRvbS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1hdG9tLnRzXG5mdW5jdGlvbiBpc0F0b20odmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcImdldFwiIGluIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5nZXQgPT09IFwiZnVuY3Rpb25cIiAmJiBcImxjXCIgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLmxjID09PSBcIm51bWJlclwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtYXRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/utils/url.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/url.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(ssr)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(ssr)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy91cmwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QztBQUNjOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9FQUFlLHNCQUFzQixJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsb0VBQWUsc0JBQXNCLElBQUk7QUFDNUgsR0FBRztBQUNILHVCQUF1QixvRUFBZTtBQUN0QyxZQUFZLG9FQUFlLHNCQUFzQixJQUFJLHVDQUF1QyxjQUFjO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEtBQUs7QUFDL0MsV0FBVyxXQUFXLEVBQUUsS0FBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsS0FBSyx5Q0FBeUMsS0FBSyx1QkFBdUIsSUFBSSwyQkFBMkIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLFFBQVEsSUFBSSxnREFBZ0QsSUFBSSx3Q0FBd0MsSUFBSTtBQUMxUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQUcsb0JBQW9CLHNEQUFHLGdDQUFnQyxzREFBRywyQkFBMkIsc0RBQUcsZ0NBQWdDLHNEQUFHLDBCQUEwQixzREFBRyxvQkFBb0Isc0RBQUc7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQixLQUFLLFlBQVk7QUFDeEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXENob2hhbiBQQ1xcRG9jdW1lbnRzXFxHaXRIdWJcXEhhY2thdGhvbi0yXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxiZXR0ZXItYXV0aFxcZGlzdFxcdXRpbHNcXHVybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/utils/url.mjs\n");

/***/ })

};
;