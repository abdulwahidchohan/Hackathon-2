# Secret for backend env (user must provide values via --set or override)
# Example: helm install ... --set backend.secret.DATABASE_URL=postgres://... --set backend.secret.BETTER_AUTH_SECRET=xxx --set backend.secret.OPENAI_API_KEY=sk-...
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "evolution-todo.fullname" . }}-backend
  labels:
    {{- include "evolution-todo.labels" . | nindent 4 }}
type: Opaque
stringData:
  DATABASE_URL: {{ .Values.backend.env.DATABASE_URL | default "postgresql://user:pass@host/db" | quote }}
  BETTER_AUTH_SECRET: {{ .Values.backend.env.BETTER_AUTH_SECRET | default "change-me" | quote }}
  OPENAI_API_KEY: {{ .Values.backend.env.OPENAI_API_KEY | default "" | quote }}
