# Evolution of Todo â€” Helm values (Phase IV)
# Override for Minikube: image pull policy, ingress host, secrets

replicaCount: 1

backend:
  image:
    repository: evolution-todo-backend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 8000
  env:
    # Set via --set or override file; do not commit real secrets
    DATABASE_URL: "postgresql://neondb_owner:npg_xYGJLo7AT6wZ@ep-flat-band-a7rtmidx-pooler.ap-southeast-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require"
    BETTER_AUTH_SECRET: "hk2_evolution_todo_secret_key_9988776655"
    GEMINI_API_KEY: "AIzaSyBj9_a2AsPr6hVFhWSChvIlRUJyMTmaJdE"
  resources: {}
  # existingSecret: evolution-todo-backend-secret

frontend:
  image:
    repository: evolution-todo-frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 3000
  env:
    # Public origin (Ingress host). Browser calls this origin + /api/... for backend.
    NEXT_PUBLIC_API_URL: "http://local.evolution-todo.com"
    # Optional: Postgres for auth users (recommended over local SQLite)
    BETTER_AUTH_DATABASE_URL: ""
  resources: {}

ingress:
  enabled: true
  className: nginx
  host: local.evolution-todo.com
  annotations: {}
  # For Minikube: minikube addons enable ingress
  # Add to /etc/hosts: 127.0.0.1 local.evolution-todo.com
